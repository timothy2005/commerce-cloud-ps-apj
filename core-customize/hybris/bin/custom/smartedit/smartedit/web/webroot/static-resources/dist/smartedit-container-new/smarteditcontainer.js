/*! For license information please see smarteditcontainer.js.LICENSE.txt */
(function(e){function webpackJsonpCallback(t){var o=t[0];var r=t[1];var a=t[2];var c,l,d=0,p=[];for(;d<o.length;d++){l=o[d];if(Object.prototype.hasOwnProperty.call(n,l)&&n[l]){p.push(n[l][0])}n[l]=0}for(c in r){if(Object.prototype.hasOwnProperty.call(r,c)){e[c]=r[c]}}if(s)s(t);while(p.length){p.shift()()}i.push.apply(i,a||[]);return checkDeferredModules()}function checkDeferredModules(){var e;for(var t=0;t<i.length;t++){var o=i[t];var r=true;for(var a=1;a<o.length;a++){var s=o[a];if(n[s]!==0)r=false}if(r){i.splice(t--,1);e=__webpack_require__(__webpack_require__.s=o[0])}}return e}var t={};var n={0:0};var i=[];function __webpack_require__(n){if(t[n]){return t[n].exports}var i=t[n]={i:n,l:false,exports:{}};e[n].call(i.exports,i,i.exports,__webpack_require__);i.l=true;return i.exports}__webpack_require__.m=e;__webpack_require__.c=t;__webpack_require__.d=function(e,t,n){if(!__webpack_require__.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n})}};__webpack_require__.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})};__webpack_require__.t=function(e,t){if(t&1)e=__webpack_require__(e);if(t&8)return e;if(t&4&&typeof e==="object"&&e&&e.__esModule)return e;var n=Object.create(null);__webpack_require__.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var i in e)__webpack_require__.d(n,i,function(t){return e[t]}.bind(null,i));return n};__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e["default"]}:function getModuleExports(){return e};__webpack_require__.d(t,"a",t);return t};__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};__webpack_require__.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[];var r=o.push.bind(o);o.push=webpackJsonpCallback;o=o.slice();for(var a=0;a<o.length;a++)webpackJsonpCallback(o[a]);var s=r;i.push([578,1]);return checkDeferredModules()})({1057:function(e,t,n){},1058:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(114);var o=n(93);var r=n(1059);var a=n(132);var s=n(0);var c=n(155);var l=n(552);var d=n(551);var p=n(45);var u=n(137);var m=n(4);var g=n(156);(function(){var e=e||window.angular;var t=null;try{t=e.module("personalizationsmarteditContainerTemplates")}catch(e){}t=t||e.module("personalizationsmarteditContainerTemplates",[]);t.run(["$templateCache",function(e){e.put("personalizationsmarteditCombinedViewConfigureTemplate.html",'<form class="pe-combinedview-config__form"><div class="form-group"><label for="PageFilterDropdownField001" class="fd-form__label" data-translate="personalization.commons.filter.label"></label><div class="pe-combinedview-config__filter-layout"><page-filter-dropdown id="PageFilterDropdownField001" data-on-select-callback="modalController.pageFilterChange(value)" class="fd-has-margin-right-small"></page-filter-dropdown><has-multicatalog><catalog-filter-dropdown data-on-select-callback="modalController.catalogFilterChange(value)"></catalog-filter-dropdown></has-multicatalog></div><div class="pe-combinedview-config__select-group-layout"><div class="pe-combinedview-config__select-group-label-layout"><label for="CombinedViewSearchField1" class="fd-form__label se-control-label required pe-combinedview-config__label" data-translate="personalization.modal.combinedview.search.label"></label></div><ui-select data-ng-init="modalController.initUiSelect($select)" ng-model="selectedElement" theme="select2" class="fd-form__control" ng-keyup="modalController.searchInputKeypress($event, $select.search)" on-select="modalController.selectElement($item)" data-backspace-reset="false" reset-search-input="false" id="CombinedViewSearchField1"><ui-select-match placeholder="{{ \'personalization.modal.combinedview.search.placeholder\' | translate}}"><span>{{\'personalization.modal.combinedview.search.placeholder\' | translate}}</span></ui-select-match><ui-select-choices repeat="item in selectionArray" position="down" ui-disable-choice="modalController.isItemInSelectDisabled(item)" personalization-infinite-scroll="modalController.addMoreItems()" personalization-infinite-scroll-distance="1"><div class="pe-combinedview-config__ui-select-choices-layout" data-ng-class="{\'pe-combinedview-config__ui-select-item--selected\': modalController.isItemSelected(item)}"><div class="pe-combinedview-config__ui-select-choices-col1"><div class="perso-wrap-ellipsis" data-ng-bind="item.customization.name + \' > \' + item.variation.name" title="{{item.customization.name}} > {{item.variation.name}}"></div></div><div class="pe-combinedview-config__ui-select-choices-col2"><has-multicatalog><div data-ng-if="catalogFilter!==\'current\'" data-ng-init="modalController.getAndSetCatalogVersionNameL10N(item.variation)"><div class="perso-wrap-ellipsis" data-ng-if="!modalController.isItemFromCurrentCatalog(item.variation)" data-ng-bind="item.variation.catalogVersionNameL10N" title="{{item.variation.catalogVersionNameL10N}}"></div><div class="perso-wrap-ellipsis" data-ng-if="modalController.isItemFromCurrentCatalog(item.variation)" data-translate="personalization.filter.catalog.current" title="{{\'personalization.filter.catalog.current\' | translate }}"></div></div></has-multicatalog></div></div></ui-select-choices></ui-select></div></div><div class="form-group"><p data-ng-hide="selectedItems.length > 0" data-translate="personalization.toolbar.combinedview.openconfigure.empty"></p><div id="CombinedViewSelectedField1" class="pe-combinedview-config__list-layout" data-ng-repeat="item in selectedItems" data-ng-class="{\'pe-combinedview-config__divider\': $first}"><div class="pe-combinedview-config__letter-layout"><div data-ng-class="modalController.getClassForElement($index)" data-ng-bind="modalController.getLetterForElement($index)"></div></div><div class="pe-combinedview-config__names-layout"><div class="perso-wrap-ellipsis pe-combinedview-config__cname" data-ng-bind="item.customization.name" title="{{item.customization.name}}"></div><span>></span><div class="perso-wrap-ellipsis pe-combinedview-config__vname" data-ng-bind="item.variation.name" title="{{item.variation.name}}"></div></div><div class="pe-combinedview-config__hyicon-globe"><span data-ng-if="!modalController.isItemFromCurrentCatalog(item.variation)" class="perso__globe-icon sap-icon--globe" data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}" data-tooltip-placement="top-right"></span></div><div class="pe-combinedview-config__hyicon-remove"><span class="sap-icon--decline" data-ng-click="modalController.removeSelectedItem(item)" title="{{\'personalization.modal.combinedview.icon.remove.title\' | translate}}"></span></div></div></div></form>');e.put("personalizationsmarteditCombinedViewMenuTemplate.html",'<div data-ng-if="!$ctrl.isCombinedViewConfigured"><div class="pe-combined-view-panel__wrapper pe-combined-view-panel__wrapper--empty"><img src="static-resources/images/emptyVersions.svg" alt="no Configurationss" class="pe-combined-view-panel--empty-img"> <span class="pe-combined-view-panel--empty-text" data-translate="{{\'personalization.toolbar.combinedview.openconfigure.empty\' | translate}}"></span> <a class="fd-link pe-combined-view-panel--empty-link" data-ng-click="$ctrl.combinedViewClick()" data-translate="personalization.toolbar.combinedview.openconfigure.link" title="{{\'personalization.toolbar.combinedview.openconfigure.link\' | translate}}"></a></div></div><div data-ng-if="$ctrl.isCombinedViewConfigured"><div class="pe-combined-view-panel__wrapper"><div class="pe-combined-view-panel__configure-layout"><button class="pe-combined-view-panel__configure-btn fd-button--light perso-wrap-ellipsis" data-ng-click="$ctrl.clearAllCombinedViewClick()" data-translate="personalization.toolbar.combinedview.clearall.button" title="{{\'personalization.toolbar.combinedview.clearall.button\' | translate}}"></button> <button class="pe-combined-view-panel__configure-btn fd-button perso-wrap-ellipsis" data-ng-click="$ctrl.combinedViewClick()" data-translate="personalization.toolbar.combinedview.openconfigure.button" title="{{\'personalization.toolbar.combinedview.openconfigure.button\' | translate}}"></button></div><div data-ng-class="$ctrl.combinedView.enabled ? \'\':\'pe-combined-view-panel--disabled\'"><div class="pe-combined-view-panel__list-layout" data-ng-repeat="item in $ctrl.selectedItems" data-ng-click="$ctrl.itemClick(item)" data-ng-class="{\'pe-combined-view-panel-list__item--highlighted\': item.highlighted}"><div class="pe-combined-view-panel-list__letter-layout"><div data-ng-class="$ctrl.getClassForElement($index)" data-ng-bind="$ctrl.getLetterForElement($index)"></div></div><div class="pe-combined-view-panel-list__names-layout"><div class="perso-wrap-ellipsis" data-ng-bind="item.customization.name" title="{{item.customization.name}}"></div><div class="perso-wrap-ellipsis perso-tree__primary-data" data-ng-bind="item.variation.name" title="{{item.variation.name}}"></div></div><div class="pe-combined-view-panel-list__icon"><span data-ng-if="!$ctrl.isItemFromCurrentCatalog(item.variation)" class="perso__globe-icon sap-icon--globe" data-uib-tooltip="{{item.variation.catalogVersionNameL10N}}" data-tooltip-placement="auto top" data-tooltip-enable="$ctrl.combinedView.enabled"></span></div></div></div></div></div>');e.put("personalizationsmarteditCombinedViewMenuWrapperTemplate.html",'<div class="btn-block pe-toolbar-action--include"><div class="pe-toolbar-menu-content se-toolbar-menu-content--pe-customized se-toolbar-menu-content--pe-combine" role="menu"><div class="se-toolbar-menu-content--pe-customized__headers"><h2 class="se-toolbar-menu-content--pe-customized__headers--h2" data-translate="personalization.toolbar.combinedview.header.title"></h2><y-help class="se-toolbar-menu-content__y-help" data-template="\'<span data-translate=personalization.toolbar.combinedview.header.description></span>\'"></y-help></div><div role="menuitem"><personalizationsmartedit-combined-view-menu data-is-menu-open="item.isOpen"/></div></div></div>');e.put("personalizationsmarteditCombinedViewToolbarContextWrapperTemplate.html","<personalizationsmartedit-combined-view-toolbar-context></personalizationsmartedit-combined-view-toolbar-context>");e.put("PersonalizationsmarteditContextMenuAddEditActionComponent.html",'<div class="perso-customize-component"><div class="perso-customize-component__title-layout"><div *ngIf="letterIndicatorForElement" class="perso-customize-component__title-layout__letter-block"><span [ngClass]="colorIndicatorForElement">{{letterIndicatorForElement}}</span></div><div class="perso-customize-component__title-layout__cust-name perso-wrap-ellipsis" title="{{selectedCustomization.name}}">{{selectedCustomization.name}}</div><div class="perso-customize-component__title-layout__target-group-name perso-wrap-ellipsis" title="{{selectedVariation.name}}">{{\'> \'+ selectedVariation.name}}</div></div><dl class="perso-customize-component__data-list"><label class="fd-form__label" [translate]="\'personalization.modal.addeditaction.selected.mastercomponent.title\'"></label><dd>{{componentType}}</dd></dl><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.actions.title\'"></label><fd-inline-help [inlineHelpIconStyle]="{\'margin-left\': \'10px\', \'padding-top\': \'1px\'}" [inlineHelpContentStyle]="{\'box-shadow\': \'0 0 4px 0 #d9d9d9\', \'border\': \'1px solid #d9d9d9\', \'border-radius\': \'4px\', \'color\': \'#32363a\', \'font-size\': \'14px\', \'max-width\': \'200px\', \'white-space\': \'normal\'}" [placement]="\'top-start\'"><span [translate]="\'personalization.modal.addeditaction.selected.actions.help.label\'"></span></fd-inline-help><se-select class="perso-customize-component__select2-container" [placeholder]="\'personalization.modal.addeditaction.dropdown.placeholder\'" [(model)]="actionSelected" [searchEnabled]="false" [showRemoveButton]="false" [fetchStrategy]="actionFetchStrategy"></se-select><div class="perso-customize-component__select-group-label-layout"><div *ngIf="actionSelected == \'use\'"><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.component.title\'"></label></div><has-multicatalog *ngIf="actionSelected == \'use\'"><div class="perso-customize-component__filter-layout"><label class="fd-form__label perso-customize-component__filter-label" [translate]="\'personalization.commons.filter.label\'"></label><catalog-version-filter-dropdown class="pe-customize-component__catalog-version-filter-dropdown" (onSelectCallback)="catalogVersionFilterChange($event)"></catalog-version-filter-dropdown></div></has-multicatalog></div><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'use\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componentlist.placeholder\'" [(model)]="idComponentSelected" [onSelect]="componentSelectedEvent" [searchEnabled]="true" [showRemoveButton]="false" [fetchStrategy]="componentsFetchStrategy" [itemComponent]="itemComponent"></se-select><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'create\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componenttype.placeholder\'" [(model)]="newComponentSelected" [onSelect]="newComponentTypeSelectedEvent" [searchEnabled]="false" [fetchStrategy]="componentTypesFetchStrategy"></se-select></div>');e.put("pageFilterDropdownTemplate.html",'<y-select class="perso-filter" data-ng-click="$event.stopPropagation();" data-ng-model="$ctrl.selectedId" data-on-change="$ctrl.onChange" data-fetch-strategy="$ctrl.fetchStrategy" data-item-template="::$ctrl.itemTemplate" data-search-enabled="false"></y-select>');e.put("personalizationsmarteditCustomizeToolbarContextWrapperTemplate.html","<personalizationsmartedit-customize-toolbar-context></personalizationsmartedit-customize-toolbar-context>");e.put("personalizationsmarteditCustomizeViewTemplate.html",'<div class="btn-block pe-toolbar-action--include"><div class="pe-toolbar-menu-content se-toolbar-menu-content--pe-customized-customizations-panel" role="menu"><div class="se-toolbar-menu-content--pe-customized__headers"><div class="se-toolbar-menu-content--pe-customized__headers--wrapper"><h2 class="se-toolbar-menu-content--pe-customized__headers--h2"><span data-translate="personalization.toolbar.pagecustomizations.header.title"></span> ({{$ctrl.pagination.totalCount}})</h2><y-help class="se-toolbar-menu-content__y-help" data-template="\'<span data-translate=personalization.toolbar.pagecustomizations.header.description></span>\'"></y-help></div><div class="se-input-group se-component-search" data-ng-class="$ctrl.customizationsList.length == 0 ? \'\':\'\'"><div class="perso-input-group"><input type="text" class="se-input-group--input se-component-search--input ng-pristine ng-untouched ng-valid" placeholder="{{ \'personalization.toolbar.pagecustomizations.search.placeholder\' | translate}}" data-ng-model="$ctrl.nameFilter" data-ng-keyup="$ctrl.nameInputKeypress($event)"/> <span class="sap-icon--search se-component-search--search-icon se-input-group__addon"></span><div class="se-input-group__addon se-input-group__clear-btn" data-ng-click="$ctrl.nameFilter=\'\'; $ctrl.nameInputKeypress($event)" data-ng-show="$ctrl.nameFilter"><span class="sap-icon--decline"></span></div></div></div></div><div role="menuitem"><div id="personalizationsmartedit-right-toolbar-item-template"><div class="pe-customize-panel__filter-label-layout"><div class="pe-customize-panel__filter-layout"><page-filter-dropdown data-initial-value="$ctrl.pageFilter" data-on-select-callback="$ctrl.pageFilterChange(value)" class="perso-filter__wrapper perso-filter__wrapper--page"></page-filter-dropdown><has-multicatalog class="perso-filter__wrapper perso-filter__wrapper--catalog"><catalog-filter-dropdown data-initial-value="$ctrl.catalogFilter" data-on-select-callback="$ctrl.catalogFilterChange(value)"/></has-multicatalog><status-filter-dropdown data-initial-value="$ctrl.statusFilter" data-on-select-callback="$ctrl.statusFilterChange(value)" class="perso-filter__wrapper perso-filter__wrapper--status"></status-filter-dropdown></div></div><personalization-infinite-scrolling [fetch-page]="$ctrl.getPage" [context]="$ctrl" [drop-down-container-class]="\'pe-customize-panel__wrapper\'"><customizations-list data-customizations-list="$ctrl.customizationsList" data-request-processing="$ctrl.moreCustomizationsRequestProcessing"/></personalization-infinite-scrolling></div></div></div></div>');e.put("personalizationsmarteditCustomizeViewWrapperTemplate.html",'<personalizationsmartedit-customize-view data-is-menu-open="item.isOpen"/>');e.put("personalizationsmarteditToolbarContextTemplate.html",'<div data-ng-show="$ctrl.visible" class="pe-toolbar-item-context"><span class="sap-icon--slim-arrow-right pe-toolbar-item-context__icon"></span><div class="pe-toolbar-item-context__btn"><div class="pe-toolbar-item-context__btn-txt"><div title="{{$ctrl.title}}" class="perso-wrap-ellipsis pe-toolbar-item-context__btn-title">{{$ctrl.title}}</div><div title="{{$ctrl.subtitle}}" class="perso-wrap-ellipsis pe-toolbar-item-context__btn-subtitle">{{$ctrl.subtitle}}</div></div></div><div class="pe-toolbar-item-context__btn-hyicon" data-ng-click="$ctrl.clear()"><span class="sap-icon--decline"></span></div></div>');e.put("customizationsListTemplate.html",'<div class="pe-customize-panel-list"><div class="pe-customize-panel-list__header"><span class="pe-customize-panel-list__header--name" data-translate="personalization.toolbar.pagecustomizations.list.title"></span> <span class="pe-customize-panel-list__header--status" data-translate="personalization.toolbar.pagecustomizations.list.status"></span></div><div data-ng-class="$last && customization.collapsed && $ctrl.isCustomizationFromCurrentCatalog(customization) ? \'pe-customize-panel-list__item-last\':\'\'" data-ng-repeat="customization in $ctrl.customizationsList track by $index" data-ng-init="$ctrl.initCustomization(customization)"><div class="pe-customize-panel-list__row-layout" data-ng-class="$ctrl.getSelectedCustomizationClass(customization)"><div class="pe-customize-panel-list__icon-layout pe-customize-panel-list__icon-divider" data-ng-click="$ctrl.customizationRowClick(customization);"><a class="pe-customize-panel-list__btn-link btn btn-link" title="{{customization.collapsed ? \'personalization.commons.icon.title.expand\' : \'personalization.commons.icon.title.collapse\' | translate}}"><span data-ng-class="customization.collapsed ? \'sap-icon--navigation-right-arrow\' : \'sap-icon--navigation-down-arrow\'"></span></a></div><div class="pe-customize-panel-list__row" data-ng-click="$ctrl.customizationRowClick(customization,true);"><div class="pe-customize-panel-list__col-lg"><div class="perso-wrap-ellipsis pe-customize-panel-list__parent-layout perso-tree__primary-data" data-ng-bind="customization.name" title="{{customization.name}}"></div></div><div class="pe-customize-panel-list__col-md"></div><div class="pe-customize-panel-list__col-md"><div class="perso-tree__status" data-ng-class="$ctrl.getActivityStateForCustomization(customization)" data-ng-bind="$ctrl.getEnablementTextForCustomization(customization)"></div><div class="perso-tree__dates-layout" data-ng-if="$ctrl.isEnabled(customization)" data-ng-bind="$ctrl.getDatesForCustomization(customization)"></div></div><div class="pe-customize-panel-list__col-sm"><span data-ng-if="!$ctrl.isCustomizationFromCurrentCatalog(customization)" class="perso__globe-icon sap-icon--globe" data-uib-tooltip="{{customization.catalogVersionNameL10N}}" data-tooltip-placement="auto top"></span></div></div><div class="pe-customize-panel-list__col-xs pe-customize-panel-list__dropdown"><div data-ng-if="$ctrl.isCustomizationFromCurrentCatalog(customization)" class="y-dropdown-more-menu dropdown open" data-ng-init="$ctrl.clearAllSubMenu();"><button type="button" class="pe-customize-panel-list__btn-link fd-button--light customization-rank-{{customization.rank}}-dropdown-toggle" data-ng-click="$ctrl.customizationSubMenuAction(customization)"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-ng-if="customization.subMenu" class="se-y-dropdown-menu__list fd-menu__list dropdown-menu" role="menu"><li><a class="se-dropdown-item fd-menu__item cutomization-rank-{{customization.rank}}-edit-button" data-ng-click="$ctrl.clearAllSubMenu(); $ctrl.editCustomizationAction(customization);" data-translate="personalization.toolbar.pagecustomizations.customization.options.edit "></a></li></ul></div></div></div><div data-uib-collapse="customization.collapsed"><div class="pe-customize-panel-list__row-layout" data-ng-repeat="variation in customization.variations" data-ng-if="$ctrl.statusNotDeleted(variation)" data-ng-class="$ctrl.getSelectedVariationClass(variation)" data-ng-click="$ctrl.clearAllSubMenu(); $ctrl.variationClick(customization, variation);"><div class="pe-customize-panel-list__icon-layout"><div class="pe-customize-panel-list__btn-link btn btn-link"></div></div><div class="pe-customize-panel-list__row"><div class="pe-customize-panel-list__col-lg"><div class="perso-wrap-ellipsis pe-customize-panel-list__child-layout" data-ng-bind="variation.name" title="{{variation.name}}"></div></div><div class="pe-customize-panel-list__col-md"><div class="pe-customize-panel-list__components-layout"><div data-ng-show="variation.numberOfAffectedComponents >= 0" class="pe-customize-panel-list__number-layout">{{variation.numberOfAffectedComponents}}</div><div data-ng-hide="variation.numberOfAffectedComponents >= 0" class="pe-customize-panel-list__number-layout">#</div><div class="perso-wrap-ellipsis" data-translate="personalization.toolbar.pagecustomizations.variation.numberofaffectedcomponents.label" title="{{\'personalization.toolbar.pagecustomizations.variation.numberofaffectedcomponents.label\' | translate}}"></div></div></div><div class="pe-customize-panel-list__col-md perso-tree__status" data-ng-class="$ctrl.getActivityStateForVariation(customization, variation)" data-ng-bind="$ctrl.getEnablementTextForVariation(variation)"></div><div class="pe-customize-panel-list__col-sm"><span class="perso__cc-icon sap-icon--tag" data-ng-class="{\'perso__cc-icon--hidden\': !$ctrl.hasCommerceActions(variation)}" data-uib-tooltip-html="$ctrl.getCommerceCustomizationTooltip(variation)" data-tooltip-placement="auto top"></span></div></div><div class="pe-customize-panel-list__col-xs pe-customize-panel-list__dropdown"></div></div></div></div><div class="pe-spinner--outer" data-ng-show="$ctrl.requestProcessing"><div class="spinner-md spinner-light"></div></div></div>');e.put("personalizationsmarteditCommerceCustomizationViewTemplate.html",'<div id="commerceCustomizationBody-002" class="perso-cc-modal"><div class="perso-cc-modal__title-layout"><div class="perso-wrap-ellipsis perso-cc-modal__title-cname" data-ng-bind="customization.name" title="{{customization.name}}"></div><div class="perso-cc-modal__title-status" data-ng-class="modalController.customizationStatus" data-ng-bind="\' (\' + modalController.customizationStatusText + \') \'"></div><span>></span><div class="perso-wrap-ellipsis perso-cc-modal__title-vname" data-ng-bind="variation.name" title="{{variation.name}}"></div><div class="perso-cc-modal__title-status" data-ng-class="modalController.variationStatus" data-ng-bind="\' (\' + modalController.variationStatusText + \')\'"></div></div><div class="form-group perso-cc-modal__content-layout"><label for="commerce-customization-type-1" class="fd-form__label" data-translate="personalization.modal.commercecustomization.action.type"></label><ui-select id="commerce-customization-type-1" class="fd-form__control" ng-model="modalController.select.type" data-backspace-reset="false" theme="select2" search-enabled="false"><ui-select-match><span data-ng-bind="$select.selected.text | translate"></span></ui-select-match><ui-select-choices repeat="item in modalController.availableTypes" position="down"><span data-ng-bind="item.text | translate"></span></ui-select-choices></ui-select></div><div class="form-group perso-cc-modal__content-layout"><ng-include src="modalController.select.type.template"></ng-include></div><div class="select2-choices"><div class="ui-select-match-item select2-search-choice" data-ng-repeat="action in modalController.getActionsToDisplay()"><span data-ng-bind="modalController.displayAction(action)"></span> <span class="ui-select-match-close select2-search-choice-close sap-icon--decline" data-ng-click="modalController.removeSelectedAction(action)"></span></div></div></div>');e.put("basicInfoTabTemplate.html",'<div class="pe-customization-modal"><form><div class="fd-form__item"><label for="customization-name" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.name" class="fd-form__label se-control-label required"></label> <input type="text" class="fd-form__control" placeholder="{{\'personalization.modal.customizationvariationmanagement.basicinformationtab.name.placeholder\' | translate}}" name="{{$ctrl.customization.name}}_key" data-ng-model="$ctrl.customization.name" data-ng-required="true" id="customization-name"></div><div class="fd-form__item"><label for="customization-description" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details" class="se-control-label fd-form__label"></label> <textarea rows="2" class="fd-form__control pe-customization-modal__textarea" placeholder="{{\'personalization.modal.customizationvariationmanagement.basicinformationtab.details.placeholder\' | translate}}" name="{{$ctrl.customization.description}}_key" data-ng-model="$ctrl.customization.description" id="customization-description"></textarea></div><div class="fd-form__item fd-has-padding-bottom-tiny"><label for="customization-status" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.status" class="se-control-label fd-form__label"></label><div class="fd-form__item fd-form__item--check"><label class="fd-form__label" for="test-checkbox" id="customization-status"><span class="fd-toggle fd-toggle--s fd-form__control"><input type="checkbox" name="" value="" id="test-checkbox" data-ng-model="$ctrl.customization.statusBoolean" data-ng-change="$ctrl.customizationStatusChange()"> <span class="fd-toggle__switch" role="presentation"></span></span></label></div></div><div class="fd-form__item"><div><a data-ng-show="!$ctrl.datetimeConfigurationEnabled" class="fd-link" data-ng-click="$ctrl.datetimeConfigurationEnabled = !$ctrl.datetimeConfigurationEnabled" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.showdateconfigdata"></a> <a data-ng-show="$ctrl.datetimeConfigurationEnabled" class="fd-link" data-ng-click="$ctrl.datetimeConfigurationEnabled = !$ctrl.datetimeConfigurationEnabled; $ctrl.resetDateTimeConfiguration();" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.hidedateconfigdata"></a></div><div data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.statusfortimeframe.description" class="fd-has-padding-top-tiny"></div></div><div class="fd-form__item"><div data-ng-show="$ctrl.datetimeConfigurationEnabled"><div class="row pe-customization-modal__dates-group"><date-time-picker-range name="data-date-time-from-to-key" data-date-from="$ctrl.customization.enabledStartDate" data-date-to="$ctrl.customization.enabledEndDate" data-is-editable="true" date-format="$ctrl.DATE_CONSTANTS.MOMENT_FORMAT"></date-time-picker-range></div></div></div></form></div>');e.put("basicInfoTabWrapperTemplate.html",'<basic-info-tab data-customization="$ctrl.customization"></basic-info-tab>');e.put("manageCustomizationViewMenuTemplate.html",'<div class="btn-block pe-toolbar-action--include"><div class="se-toolbar-menu-content se-toolbar-menu-content--pe-customized" role="menu"><div class="se-toolbar-menu-content--pe-customized__headers"><h2 class="se-toolbar-menu-content--pe-customized__headers--h2" data-translate="personalization.toolbar.library.header.title"></h2><y-help class="se-toolbar-menu-content__y-help" data-template="\'<span data-translate=personalization.toolbar.library.header.description></span>\'"></y-help></div><div class="se-toolbar-menu-content--pe-customized__item"><a class="se-toolbar-menu-content--pe-customized__item__link" id="personalizationsmartedit-pagecustomizations-toolbar-customization-anchor" data-translate="personalization.toolbar.library.manager.name" data-ng-click="$ctrl.managerViewClick();item.isOpen=false"></a></div><div class="se-toolbar-menu-content--pe-customized__item se-toolbar-menu-content--pe-customized__item--last"><a class="se-toolbar-menu-content--pe-customized__item__link" id="personalizationsmartedit-pagecustomizations-toolbar-customization-anchor" data-translate="personalization.toolbar.library.customizationvariationmanagement.name" data-ng-click="$ctrl.createCustomizationClick();item.isOpen=false"></a></div></div></div>');e.put("manageCustomizationViewMenuWrapperTemplate.html","<personalizationsmartedit-manage-customization-view-menu></personalizationsmartedit-manage-customization-view-menu>");e.put("manageCustomizationViewTemplate.html",'<div class="pe-customization-modal__tabs"><uib-tabset active="$ctrl.activeTabNumber"><uib-tab ng-repeat="tab in $ctrl.tabsArr" select="$ctrl.selectTab(tab)" disable="tab.disabled" heading="{{tab.heading}}"><form name="{{tab.formName}}" novalidate><div><data-ng-include src="tab.template"></data-ng-include></div></form></uib-tab></uib-tabset></div>');e.put("targetGroupTabTemplate.html",'<div class="pe-customization-modal"><div class="pe-customization-modal__title"><div class="pe-customization-modal__title-header"><div class="pe-customization-modal__title-header-name perso-wrap-ellipsis" data-ng-bind="$ctrl.customization.name" title="{{$ctrl.customization.name}}"></div><div><span class="pe-customization-modal__title-header-badge badge" data-ng-class="{\'perso__status--enabled\':\'badge-success\', \'perso__status--disabled\':\'\', \'perso__status--ignore\':\'\'}[$ctrl.getActivityStateForCustomization($ctrl.customization)]">{{\'personalization.modal.customizationvariationmanagement.targetgrouptab.customization.\' + $ctrl.customization.status | lowercase | translate}}</span></div></div><div class="pe-customization-modal__title-subarea"><div data-ng-if="$ctrl.customization.status === $ctrl.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED" class="pe-customization-modal__title-dates"><span data-ng-if="!$ctrl.customization.enabledStartDate && $ctrl.customization.enabledEndDate">...</span> <span data-ng-bind="$ctrl.customization.enabledStartDate" data-ng-class="{\'perso__datetimepicker--error-text\':!$ctrl.personalizationsmarteditDateUtils.isDateValidOrEmpty($ctrl.customization.enabledStartDate)}"></span> <span data-ng-if="$ctrl.customization.enabledStartDate || $ctrl.customization.enabledEndDate">- </span><span data-ng-bind="$ctrl.customization.enabledEndDate" data-ng-class="{\'perso__datetimepicker--error-text\':!$ctrl.personalizationsmarteditDateUtils.isDateValidOrEmpty($ctrl.customization.enabledEndDate)}"></span> <span data-ng-if="$ctrl.personalizationsmarteditDateUtils.isDateInThePast($ctrl.customization.enabledEndDate)" class="section-help help-inline help-inline--section help-inline--tooltip"><span class="pe-datetime__warning-icon"></span> <span class="pe-help-block--inline help-block-inline help-block-inline--text" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.datetooltip"></span> </span><span data-ng-if="$ctrl.customization.enabledStartDate && !$ctrl.customization.enabledEndDate">...</span></div></div></div><div class="pe-customization-modal__y-add-btn"><button class="fd-button" type="button" data-ng-click="$ctrl.addVariationAction()"><span data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.addtargetgroup.button"></span></button></div><ul data-ng-show="filteredVariations.length > 0" class="pe-customization-modal__list-group"><li class="pe-customization-modal__list-group__item" data-ng-repeat="variation in $ctrl.customization.variations | filter:$ctrl.personalizationsmarteditUtils.isItemVisible as filteredVariations"><div class="pe-customization-modal__list-group__item-col1"><a class="pe-customization-modal__list-group__item-link perso-wrap-ellipsis" data-ng-bind="variation.name" data-ng-click="$ctrl.editVariationAction(variation)"></a> <span data-ng-class="$ctrl.getActivityStateForVariation($ctrl.customization, variation)" data-ng-bind="$ctrl.getEnablementTextForVariation(variation)"></span><div data-ng-show="$ctrl.personalizationsmarteditTriggerService.isDefault(variation.triggers)"><span class="pe-customization-modal__title-label-segments" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.segments.colon"></span> <span data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.default"></span></div><div data-ng-show="!$ctrl.personalizationsmarteditTriggerService.isDefault(variation.triggers)"><div><span class="pe-customization-modal__title-label-segments" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.segments.colon"></span><personalizationsmartedit-segment-expression-as-html data-segment-expression="variation.triggers"></personalizationsmartedit-segment-expression-as-html></div></div></div><div data-uib-dropdown class="pe-customization-modal__dropdown y-dropdown-more-menu"><button type="button" data-uib-dropdown-toggle class="dropdown-toggle fd-button--light" id="dropdownMenu1" aria-haspopup="true" aria-expanded="true"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-uib-dropdown-menu aria-labelledby="dropdownMenu1" class="se-y-dropdown-menu__list fd-menu__list" role="menu"><li><a data-ng-click="$ctrl.editVariationAction(variation)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.edit"></a></li><li><a data-ng-click="$ctrl.toogleVariationActive(variation)" class="se-dropdown-item fd-menu__item" data-ng-bind="$ctrl.getActivityActionTextForVariation(variation)"></a></li><li data-ng-class="$first ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$ctrl.setVariationRank(variation, -1, $event, $first)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.moveup"></a></li><li data-ng-class="$last ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$ctrl.setVariationRank(variation, 1, $event, $last)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.movedown"></a></li><li><a data-ng-click="$ctrl.removeVariationClick(variation)" class="se-dropdown-item fd-menu__item fd-has-color-status-3" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.remove"></a></li></ul></div></li></ul><se-slider-panel [slider-panel-configuration]="$ctrl.sliderPanelConfiguration" [(slider-panel-hide)]="$ctrl.sliderPanelHide" [(slider-panel-show)]="$ctrl.sliderPanelShow" class="pe-customization-modal__sliderpanel"> <div data-ng-if="$ctrl.isVariationLoaded"><div class="pe-customization-modal__sliderpanel__btn-layout"><button class="fd-button--light pe-customization-modal__sliderpanel__btn-link" data-ng-init="$ctrl.isFullscreen=false" data-ng-click="$ctrl.toggleSliderFullscreen(); $ctrl.isFullscreen=!$ctrl.isFullscreen"><div><div data-ng-if="!$ctrl.isFullscreen"><span data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.fullscreen.open"></span></div><div data-ng-if="$ctrl.isFullscreen"><span data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.fullscreen.close"></span></div></div></button></div><form><div class="fd-form-item"><label for="targetgroup-name" class="fd-form__label required" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.targetgroupname"></label> <input type="text" class="fd-form__control" placeholder="{{\'personalization.modal.customizationvariationmanagement.targetgrouptab.targetgroupname.placeholder\' | translate}}" name="variationname_key" data-ng-model="$ctrl.edit.name" id="targetgroup-name"></div><div class="fd-form-item pe-customization-modal--check"><input type="checkbox" id="targetgroup-isDefault-001" class="fd-form__control fd-checkbox" data-ng-model="$ctrl.edit.isDefault" data-ng-change="$ctrl.confirmDefaultTrigger($ctrl.edit.isDefault);"/> <label for="targetgroup-isDefault-001" class="fd-form__control fd-form__label" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.variation.default"></label></div><div data-ng-show="$ctrl.edit.showExpression"><multiple-triggers></multiple-triggers></div></form> </div></se-slider-panel></div>');e.put("targetGroupTabWrapperTemplate.html",'<target-group-tab data-customization="$ctrl.customization" data-variation="$ctrl.edit.selectedVariation"></target-group-tab>');e.put("personalizationsmarteditManagerViewGridHeaderTemplate.html",'<div class="tree-head hidden-sm hidden-xs"><div class="tree-head__col--lg perso-wrap-ellipsis" data-translate="personalization.modal.manager.grid.header.customization" title="{{\'personalization.modal.manager.grid.header.customization\' | translate}}"></div><div class="tree-head__col--xs" data-translate="personalization.modal.manager.grid.header.variations" title="{{\'personalization.modal.manager.grid.header.variations\' | translate}}"></div><div class="tree-head__col--xs perso-wrap-ellipsis" data-translate="personalization.modal.manager.grid.header.components" title="{{\'personalization.modal.manager.grid.header.components\' | translate}}"></div><div class="tree-head__col--md" data-translate="personalization.modal.manager.grid.header.status" title="{{\'personalization.modal.manager.grid.header.status\' | translate}}"></div><div class="tree-head__col--sm perso-wrap-ellipsis" data-translate="personalization.modal.manager.grid.header.startdate" title="{{\'personalization.modal.manager.grid.header.startdate\' | translate}}"></div><div class="tree-head__col--sm perso-wrap-ellipsis" data-translate="personalization.modal.manager.grid.header.enddate" title="{{\'personalization.modal.manager.grid.header.enddate\' | translate}}"></div></div><div class="row tree-head visible-sm visible-xs"><div class="col-xs-10 text-left" data-translate="personalization.modal.manager.grid.header.customization"></div></div>');e.put("personalizationsmarteditManagerViewNodeTemplate.html",'<div class="y-tree-row" data-ng-init="modalController.initCustomization(customization)" data-ng-class="allCustomizationsCollapsed()? \'active-level\' : \'inactive-level\'"><div class="desktop-layout hidden-sm hidden-xs customization-rank-{{customization.rank}}-row"><div data-ng-click="modalController.customizationCollapseAction(customization)"><a title="{{customization.isCollapsed ? \'personalization.commons.icon.title.expand\' : \'personalization.commons.icon.title.collapse\' | translate}}"><span data-ng-class="customization.isCollapsed ? \'sap-icon--navigation-right-arrow\' : \'sap-icon--navigation-down-arrow\'" class="perso__toggle-icon"></span></a></div><div ui-tree-handle class="y-tree-row__angular-ui-tree-handle"><div class="y-tree__col--lg"><div class="perso-wrap-ellipsis perso-tree__primary-data" title="{{customization.name}}"><span class="personalizationsmartedit-customization-code" data-ng-bind="customization.name"></span></div></div><div class="y-tree__col--xs" data-ng-bind="customization.variations.filter(modalController.statusNotDeleted).length || 0"></div><div class="y-tree__col--xs"></div><div class="y-tree__col--md perso-tree__status" data-ng-class="modalController.getActivityStateForCustomization(customization)"><span data-ng-bind="modalController.getEnablementTextForCustomization(customization)" class="perso-library__status-layout"></span></div><div class="y-tree__col--sm"><div data-ng-show="customization.status === modalController.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED" class="perso-tree__dates-layout"><span data-ng-bind="modalController.getFormattedDate(customization.enabledStartDate)"></span></div></div><div class="y-tree__col--sm"><div data-ng-show="customization.status === modalController.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED" class="perso-tree__dates-layout"><span data-ng-bind="modalController.getFormattedDate(customization.enabledEndDate)"></span></div></div></div><div><div data-uib-dropdown class="y-dropdown-more-menu"><button type="button" data-uib-dropdown-toggle class="fd-button--light"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-uib-dropdown-menu class="se-y-dropdown-menu__list fd-menu__list" role="menu"><li><a data-ng-click="modalController.editCustomizationAction(customization)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.customization.options.edit"></a></li><li data-ng-class="modalController.isFilterEnabled() || $first ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="(modalController.isFilterEnabled() || $first) ? $event.stopPropagation() : modalController.setCustomizationRank(customization, -1)" data-translate="personalization.modal.manager.customization.options.moveup"></a></li><li data-ng-class="modalController.isFilterEnabled() || $last ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="(modalController.isFilterEnabled() || $last) ? $event.stopPropagation() : modalController.setCustomizationRank(customization, 1)" data-translate="personalization.modal.manager.customization.options.movedown"></a></li><li><a data-ng-click="modalController.deleteCustomizationAction(customization)" data-translate="personalization.modal.manager.customization.options.delete" class="se-dropdown-item--delete"></a></li></ul></div></div></div><div class="mobile-layout hidden-xl hidden-lg hidden-md customization-rank-{{customization.rank}}-row"><div data-ng-click="modalController.customizationCollapseAction(customization)"><a title="{{customization.isCollapsed ? \'personalization.commons.icon.title.expand\' : \'personalization.commons.icon.title.collapse\' | translate}}"><span data-ng-class="customization.isCollapsed ? \'sap-icon--navigation-right-arrow\' : \'sap-icon--navigation-down-arrow\'" class="perso__toggle-icon"></span></a></div><div ui-tree-handle class="y-tree-row__angular-ui-tree-handle--mobile"><p class="y-tree__col-xl--mobile perso-tree__primary-data perso-wrap-ellipsis" title="{{customization.name}}"><span class="personalizationsmartedit-customization-code" data-ng-bind="customization.name"></span></p><div class="mobile-data"><span class="perso-library__tree-head--mobile" data-translate="personalization.modal.manager.grid.header.variations"></span><div class="perso-library__number-data--mobile" data-ng-bind="customization.variations.filter(modalController.statusNotDeleted).length || 0"></div></div><div class="mobile-data perso-tree__status" data-ng-class="modalController.getActivityStateForCustomization(customization)"><span data-ng-bind="modalController.getEnablementTextForCustomization(customization)"></span></div><div data-ng-show="customization.status === modalController.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED"><div class="mobile-data" data-ng-if="customization.enabledStartDate || customization.enabledEndDate"><span data-ng-if="customization.enabledStartDate" class="perso-library__tree-head--mobile" data-translate="personalization.modal.manager.grid.header.startdate"></span><p data-ng-bind="modalController.getFormattedDate(customization.enabledStartDate)"></p><span data-ng-if="customization.enabledEndDate" class="perso-library__tree-head--mobile" data-translate="personalization.modal.manager.grid.header.enddate"></span><p data-ng-bind="modalController.getFormattedDate(customization.enabledEndDate)"></p></div></div></div><div><div data-uib-dropdown class="y-dropdown-more-menu mobile-more-menu"><button type="button" data-uib-dropdown-toggle class="fd-button--link"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-uib-dropdown-menu class="se-y-dropdown-menu__list fd-menu__list" role="menu"><li><a data-ng-click="modalController.editCustomizationAction(customization)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.customization.options.edit"></a></li><li data-ng-class="modalController.isFilterEnabled() || $first ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="(modalController.isFilterEnabled() || $first) ? $event.stopPropagation() : modalController.setCustomizationRank(customization, -1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.customization.options.moveup"></a></li><li data-ng-class="modalController.isFilterEnabled() || $last ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="(modalController.isFilterEnabled() || $last) ? $event.stopPropagation() : modalController.setCustomizationRank(customization, 1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.customization.options.movedown"></a></li><li><a data-ng-click="modalController.deleteCustomizationAction(customization)" class="se-dropdown-item fd-menu__item fd-has-color-status-3" data-translate="personalization.modal.manager.customization.options.delete"></a></li></ul></div></div></div></div><div data-uib-collapse="customization.isCollapsed" data-expanding="modalController.customizationClickAction(customization)"><div ui-tree-nodes data-ng-model="customization.variations"><div class="y-tree-row child-row active-level" data-ng-class="{\'perso-library__angular-ui-tree-drag\': variation.isDragging}" ui-tree-node data-ng-repeat="variation in customization.variations | filter:modalController.statusNotDeleted" data-ng-init="variation.isCommerceCustomizationEnabled = modalController.isCommerceCustomizationEnabled()"><div class="desktop-layout variation-rank-{{variation.rank}}-row hidden-sm hidden-xs" data-ng-class="$last ? \'active-level--last\':\'\'"><div><span class="perso__cc-icon sap-icon--tag" data-ng-class="{\'perso__cc-icon--hidden\': !modalController.hasCommerceActions(variation)}" data-uib-tooltip-html="modalController.getCommerceCustomizationTooltip(variation)" data-tooltip-placement="top-left"></span></div><div ui-tree-handle class="y-tree-row__angular-ui-tree-handle"><div class="y-tree__col--xl perso-wrap-ellipsis" title="{{variation.name}}"><span data-ng-bind="variation.name"></span></div><div class="y-tree__col--xs" data-ng-bind="variation.numberOfComponents"></div><div class="y-tree__col--md perso-tree__status" data-ng-class="modalController.getActivityStateForVariation(customization,variation)"><span data-ng-bind="modalController.getEnablementTextForVariation(variation)" class="perso-library__status-layout"></span></div><div class="y-tree__col--lg"></div></div><div><div data-uib-dropdown class="y-dropdown-more-menu"><button type="button" data-uib-dropdown-toggle class="fd-button--light"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-uib-dropdown-menu class="se-y-dropdown-menu__list fd-menu__list" role="menu"><li><a data-ng-click="modalController.editVariationAction(customization, variation)" data-translate="personalization.modal.manager.variation.options.edit"></a></li><li><a data-ng-click="modalController.toogleVariationActive(customization,variation)" class="se-dropdown-item fd-menu__item" data-ng-bind="modalController.getEnablementActionTextForVariation(variation)"></a></li><li data-ng-show="variation.isCommerceCustomizationEnabled"><a data-ng-click="modalController.manageCommerceCustomization(customization, variation)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.commercecustomization"></a></li><li data-ng-class="$first ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$first ? $event.stopPropagation() : modalController.setVariationRank(customization, variation, -1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.moveup"></a></li><li data-ng-class="$last ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$last ? $event.stopPropagation() : modalController.setVariationRank(customization, variation, 1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.movedown"></a></li><li data-ng-class="modalController.isDeleteVariationEnabled(customization) ? \'perso-dropdown-menu__item--delete\' : \'perso-dropdown-menu__item--disabled disabled\' "><a data-ng-click="modalController.deleteVariationAction(customization, variation, $event)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.delete"></a></li></ul></div></div></div><div class="mobile-layout hidden-xl hidden-lg hidden-md variation-rank-{{variation.rank}}-row" data-ng-class="$last ? \'active-level--last\':\'\'"><div><span class="perso__cc-icon sap-icon--tag" data-ng-class="{\'perso__cc-icon--hidden\': !modalController.hasCommerceActions(variation)}" data-uib-tooltip-html="modalController.getCommerceCustomizationTooltip(variation)" data-tooltip-placement="top-left"></span></div><div ui-tree-handle class="y-tree-row__angular-ui-tree-handle--mobile"><div><p class="y-tree__col-xl--mobile perso-wrap-ellipsis" title="{{variation.name}}"><span data-ng-bind="variation.name"></span></p><div class="mobile-data"><span class="perso-library__tree-head--mobile" data-translate="personalization.modal.manager.grid.header.components"></span><div data-ng-bind="variation.numberOfComponents"></div></div><div class="mobile-data perso-tree__status" data-ng-class="modalController.getActivityStateForVariation(customization,variation)"><span data-ng-bind="modalController.getEnablementTextForVariation(variation)"></span></div></div></div><div><div class="y-dropdown-more-menu mobile-more-menu"><div data-uib-dropdown><button type="button" data-uib-dropdown-toggle class="fd-button--light"><span class="perso__more-icon sap-icon--overflow"></span></button><ul data-uib-dropdown-menu class="se-y-dropdown-menu__list fd-menu__list" role="menu"><li><a data-ng-click="modalController.editVariationAction(customization, variation)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.edit"></a></li><li><a data-ng-click="modalController.toogleVariationActive(customization,variation)" class="se-dropdown-item fd-menu__item" data-ng-bind="modalController.getEnablementActionTextForVariation(variation)"></a></li><li data-ng-show="variation.isCommerceCustomizationEnabled"><a data-ng-click="modalController.manageCommerceCustomization(customization, variation)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.commercecustomization"></a></li><li data-ng-class="$first ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$first ? $event.stopPropagation() : modalController.setVariationRank(customization, variation, -1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.moveup"></a></li><li data-ng-class="$last ? \'perso-dropdown-menu__item--disabled disabled\' : \'\' "><a data-ng-click="$last ? $event.stopPropagation() : modalController.setVariationRank(customization, variation, 1)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.movedown"></a></li><li data-ng-class="modalController.isDeleteVariationEnabled(customization) ? \'perso-dropdown-menu__item--delete\' : \'perso-dropdown-menu__item--disabled disabled\' "><a data-ng-click="modalController.deleteVariationAction(customization, variation, $event)" class="se-dropdown-item fd-menu__item" data-translate="personalization.modal.manager.variation.options.delete"></a></li></ul></div></div></div></div></div></div></div>');e.put("personalizationsmarteditManagerViewTemplate.html",'<div id="editConfigurationsBody-001" class="perso-library"><personalizationsmartedit-scroll-zone data-ng-if="scrollZoneElement != null" data-is-transparent="true" data-scroll-zone-id="\'managerview\'" data-scroll-zone-visible="scrollZoneVisible" data-get-element-to-scroll="modalController.getElementToScroll()"></personalizationsmartedit-scroll-zone><personalization-infinite-scrolling [fetch-page]="modalController.getPage" [context]="modalController.context" [drop-down-container-class]="\'perso-library__scroll-zone perso__scrollbar--hidden\'"><div personalization-current-element="modalController.setScrollZoneElement"><div class="perso-library__header"><div class="perso-library__title"><span data-ng-bind="modalController.catalogName"></span> | {{\'personalization.toolbar.pagecustomizations.header.title\' | translate}} ({{filteredCustomizationsCount}})</div><div class="se-input-group perso-library__search"><div class="perso-input-group"><input type="text" class="se-input-group--input se-component-search--input ng-pristine ng-untouched ng-valid" placeholder="{{ \'personalization.modal.manager.search.placeholder\' | translate}}" ng-model="modalController.search.name" ng-keyup="modalController.searchInputKeypress($event)"><span class="sap-icon--search se-component-search--search-icon se-input-group__addon"></span><div class="se-input-group__addon se-input-group__clear-btn" data-ng-show="modalController.search.name" ng-click="modalController.search.name=\'\'; modalController.searchInputKeypress($event)"><span class="sap-icon--decline"></span></div></div></div><div class="perso-library__status"><ui-select ng-model="modalController.search.status" on-select="modalController.refreshGrid()" data-backspace-reset="false" theme="select2" title="" search-enabled="false"><ui-select-match><span ng-bind="$select.selected.text | translate"></span></ui-select-match><ui-select-choices repeat="item in modalController.statuses" position="down"><span ng-bind="item.text | translate"></span></ui-select-choices></ui-select></div><button class="fd-button" type="button" data-ng-click="modalController.openNewModal();"><span data-translate="personalization.modal.manager.add.button"></span></button></div><div class="y-tree perso-library__y-tree"><div data-ng-show="modalController.isSearchGridHeaderHidden()" class="y-tree-header y-tree-header--fixed"><data-ng-include src="\'personalizationsmarteditManagerViewGridHeaderTemplate.html\'"></data-ng-include></div><div class="y-tree-header"><data-ng-include src="\'personalizationsmarteditManagerViewGridHeaderTemplate.html\'"></data-ng-include></div><div ui-tree="modalController.treeOptions" id="tree-root"><div ui-tree-nodes data-ng-model="modalController.customizations"><div data-ng-repeat="customization in modalController.customizations" data-ng-class="{\'perso-library__angular-ui-tree-drag\': customization.isDragging}" ui-tree-node data-ng-include="\'personalizationsmarteditManagerViewNodeTemplate.html\'"></div></div></div><div class="pe-spinner--outer" data-ng-show="modalController.moreCustomizationsRequestProcessing"><div class="spinner-md spinner-light"></div></div></div></div></personalization-infinite-scrolling><a class="perso-library__back-to-top" title="{{\'personalization.commons.button.title.backtotop\' | translate}}" data-ng-show="modalController.isReturnToTopButtonVisible()" data-ng-click="modalController.scrollZoneReturnToTop()"><span class="sap-icon--back-to-top"></span></a></div>');e.put("multipleTriggersComponentTemplate.html",'<se-tabs [tabs-list]="$ctrl.tabsList" [num-tabs-displayed]="{{$ctrl.tabsList.length}}"></se-tabs>');e.put("personalizationsmarteditSegmentNodeTemplate.html",'<div data-ng-class="{\'perso-segments-tree__layout\': $ctrl.isContainer(node), \'perso-segments-tree__empty-container\': $ctrl.isContainerWithDropzone(node), \'perso-segments-tree__collapsed-container\': collapsed }"><div class="perso-segments-tree" data-ng-class="{\'perso-segments-tree__node\': $ctrl.isItem(node), \'perso-segments-tree__container\': $ctrl.isContainer(node)}"><div data-ng-if="$ctrl.isContainer(node)"><div class="perso-segments-tree__toggle" data-ng-click="$ctrl.toggle(this)" title="{{collapsed ? \'personalization.commons.icon.title.expand\' : \'personalization.commons.icon.title.collapse\' | translate}}" data-ng-class="collapsed ? \'sap-icon--navigation-right-arrow\' : \'sap-icon--navigation-down-arrow\'"></div><div class="perso-segments-tree__dropdown"><ui-select data-ng-model="node.operation" data-backspace-reset="false" theme="select2" title="" search-enabled="false"><ui-select-match><span data-ng-bind="$select.selected.name | translate"></span></ui-select-match><ui-select-choices repeat="item in $ctrl.actions" position="down"><span data-ng-bind="item.name | translate"></span></ui-select-choices></ui-select></div></div><div data-ng-if="$ctrl.isItem(node)" ui-tree-handle class="perso-segments-tree__node-content" data-ng-bind="node.selectedSegment.code"></div><div data-ng-if="$ctrl.isDropzone(node)" class="perso-segments-tree__empty-container-node"><div class="perso-segments-tree__empty-container-node-text" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.segments.dropzone"></div></div><div data-ng-if="$ctrl.isContainer(node)" ui-tree-handle class="perso-segments-tree__angular-ui-tree-handle--empty"></div><div data-nodrag><span class="pull-right"><a data-ng-if="$ctrl.isItem(node)" class="perso-segments-tree__actions perso-segments-tree__node-icon" data-ng-click="$ctrl.duplicateItem(node)" title="{{\'personalization.commons.icon.title.duplicate\' | translate}}"><span class="sap-icon--duplicate"></span> </a><a data-ng-if="!$ctrl.isTopContainer(this)" class="perso-segments-tree__actions" data-ng-click="$ctrl.removeItem(this)"><div data-ng-if="$ctrl.isContainer(node)" class="btn btn-link perso-segments-tree__container-btn-icon fd-has-margin-left-tiny" title="{{\'personalization.commons.icon.title.remove\' | translate}}"><span class="sap-icon--decline"></span></div><div data-ng-if="$ctrl.isItem(node)" class="perso-segments-tree__node-icon" title="{{\'personalization.commons.icon.title.remove\' | translate}}"><span class="sap-icon--decline"></span></div></a></span><button data-ng-if="$ctrl.isContainer(node)" class="fd-button--light perso-segments-tree__btn" data-ng-click="$ctrl.newSubItem(this, \'container\')"><span data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.segments.group.button"></span></button></div></div><ol data-ng-if="$ctrl.isItem(node)" ui-tree-nodes data-nodrop-enabled="true" data-ng-model="node.nodes" data-ng-class="{hidden: collapsed}"><li data-ng-repeat="node in node.nodes" ui-tree-node data-collapsed="true" data-expand-on-hover="500" data-ng-include="\'personalizationsmarteditSegmentNodeTemplate.html\'"></li></ol><ol data-ng-if="$ctrl.isContainer(node)" ui-tree-nodes data-ng-model="node.nodes" data-ng-class="{hidden: collapsed}"><li data-ng-repeat="node in node.nodes" ui-tree-node data-collapsed="true" data-expand-on-hover="500" data-ng-include="\'personalizationsmarteditSegmentNodeTemplate.html\'"></li></ol></div>');e.put("personalizationsmarteditSegmentViewTemplate.html",'<label class="fd-form__label" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.targetgroupexpression"></label><div><personalizationsmartedit-scroll-zone data-scroll-zone-id="\'segmentview\'" data-scroll-zone-visible="$ctrl.scrollZoneVisible" data-get-element-to-scroll="$ctrl.getElementToScroll()"></personalizationsmartedit-scroll-zone><div class="form-group"><personalizationsmartedit-segment-expression-as-html data-segment-expression="$ctrl.expression[0]"></personalizationsmartedit-segment-expression-as-html></div><div class="form-group"><label class="fd-form__label" data-translate="personalization.modal.customizationvariationmanagement.targetgrouptab.segments"></label><ui-select class="fd-form__control pe-customization-modal__segments-dropdown" ng-model="$ctrl.singleSegment" data-backspace-reset="false" theme="select2" ng-keyup="$ctrl.segmentSearchInputKeypress($event, $select.search)" on-select="$ctrl.segmentSelectedEvent($item, $select.items)" reset-search-input="false"><ui-select-match placeholder="{{ \'personalization.modal.customizationvariationmanagement.targetgrouptab.segments.placeholder\' | translate}}"><span>{{\'personalization.modal.customizationvariationmanagement.targetgrouptab.segments.placeholder\' | translate}}</span></ui-select-match><ui-select-choices repeat="item in $ctrl.segments" position="down" personalization-infinite-scroll="$ctrl.addMoreSegmentItems()" personalization-infinite-scroll-distance="2"><div ng-bind="item.code" class="perso__item-name"></div><div class="perso-wrap-ellipsis perso__wrapper-description" data-ng-bind="item.description" title="{{item.description}}"></div></ui-select-choices></ui-select></div><div ui-tree="$ctrl.treeOptions" id="tree-root"><div ui-tree-nodes ng-model="$ctrl.expression" data-nodrop-enabled="true"><div ng-repeat="node in $ctrl.expression" data-collapsed="false" ui-tree-node ng-include="\'personalizationsmarteditSegmentNodeTemplate.html\'"></div></div></div></div>');e.put("personalizationsmarteditSegmentViewWrapperTemplate.html","<personalizationsmartedit-segment-view></personalizationsmartedit-segment-view>");e.put("personalizationsmarteditSegmentExpressionAsHtmlTemplate.html",'<span data-ng-repeat="word in $ctrl.getExpressionAsArray() track by $index"><span data-ng-if="$ctrl.operators.indexOf(word) > -1" class="pe-customization-modal__expression-text">{{ $ctrl.getLocalizationKeyForOperator(word) | translate }} </span><span data-ng-if="$ctrl.emptyGroup === word" class="pe-customization-modal__expression-alert-icon sap-icon--alert" data-uib-tooltip="{{\'personalization.modal.customizationvariationmanagement.targetgrouptab.segments.group.tooltip\' | translate}}" data-tooltip-placement="auto top"></span> <span data-ng-if="$ctrl.emptyGroupAndOperators.indexOf(word) === -1">{{word}}</span></span>')}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}var h=function(){function PersonalizationsmarteditContextServiceProxy(){}PersonalizationsmarteditContextServiceProxy.prototype.setPersonalization=function(e){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceProxy.prototype.setPersonalization.$inject=["personalization"];PersonalizationsmarteditContextServiceProxy.prototype.setCustomize=function(e){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceProxy.prototype.setCustomize.$inject=["customize"];PersonalizationsmarteditContextServiceProxy.prototype.setCombinedView=function(e){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceProxy.prototype.setCombinedView.$inject=["combinedView"];PersonalizationsmarteditContextServiceProxy.prototype.setSeData=function(e){"proxyFunction";return undefined};PersonalizationsmarteditContextServiceProxy.prototype.setSeData.$inject=["seData"];PersonalizationsmarteditContextServiceProxy=__decorate([o.GatewayProxied("setPersonalization","setCustomize","setCombinedView","setSeData"),o.SeInjectable()],PersonalizationsmarteditContextServiceProxy);return PersonalizationsmarteditContextServiceProxy}();var v=function(){PersonalizationsmarteditContextService.$inject=["$q","sharedDataService","loadConfigManagerService","personalizationsmarteditContextServiceProxy","personalizationsmarteditContextUtils"];function PersonalizationsmarteditContextService(e,t,n,i,o){this.$q=e;this.sharedDataService=t;this.loadConfigManagerService=n;this.personalizationsmarteditContextServiceProxy=i;this.personalizationsmarteditContextUtils=o;var r=o.getContextObject();this.setPersonalization(r.personalization);this.setCustomize(r.customize);this.setCombinedView(r.combinedView);this.setSeData(r.seData);this.customizeFiltersState={}}PersonalizationsmarteditContextService.prototype.getPersonalization=function(){return this.personalization};PersonalizationsmarteditContextService.prototype.setPersonalization=function(e){this.personalization=e;this.personalizationsmarteditContextServiceProxy.setPersonalization(e)};PersonalizationsmarteditContextService.prototype.setPersonalization.$inject=["personalization"];PersonalizationsmarteditContextService.prototype.getCustomize=function(){return this.customize};PersonalizationsmarteditContextService.prototype.setCustomize=function(e){this.customize=e;this.personalizationsmarteditContextServiceProxy.setCustomize(e)};PersonalizationsmarteditContextService.prototype.setCustomize.$inject=["customize"];PersonalizationsmarteditContextService.prototype.getCombinedView=function(){return this.combinedView};PersonalizationsmarteditContextService.prototype.setCombinedView=function(e){this.combinedView=e;this.personalizationsmarteditContextServiceProxy.setCombinedView(e)};PersonalizationsmarteditContextService.prototype.setCombinedView.$inject=["combinedView"];PersonalizationsmarteditContextService.prototype.getSeData=function(){return this.seData};PersonalizationsmarteditContextService.prototype.setSeData=function(e){this.seData=e;this.personalizationsmarteditContextServiceProxy.setSeData(e)};PersonalizationsmarteditContextService.prototype.setSeData.$inject=["seData"];PersonalizationsmarteditContextService.prototype.refreshExperienceData=function(){var e=this;return this.sharedDataService.get("experience").then((function(t){var n=e.getSeData();n.seExperienceData=t;n.pageId=t.pageId;e.setSeData(n);return e.$q.when()}))};PersonalizationsmarteditContextService.prototype.refreshConfigurationData=function(){var e=this;this.loadConfigManagerService.loadAsObject().then((function(t){var n=e.getSeData();n.seConfigurationData=t;e.setSeData(n)}))};PersonalizationsmarteditContextService.prototype.applySynchronization=function(){this.personalizationsmarteditContextServiceProxy.setPersonalization(this.personalization);this.personalizationsmarteditContextServiceProxy.setCustomize(this.customize);this.personalizationsmarteditContextServiceProxy.setCombinedView(this.combinedView);this.personalizationsmarteditContextServiceProxy.setSeData(this.seData);this.refreshExperienceData();this.refreshConfigurationData()};PersonalizationsmarteditContextService.prototype.getContexServiceProxy=function(){return this.personalizationsmarteditContextServiceProxy};PersonalizationsmarteditContextService.prototype.getCustomizeFiltersState=function(){return this.customizeFiltersState};PersonalizationsmarteditContextService.prototype.setCustomizeFiltersState=function(e){this.customizeFiltersState=e};PersonalizationsmarteditContextService.prototype.setCustomizeFiltersState.$inject=["filters"];PersonalizationsmarteditContextService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[Object,Object,Object,h,r.PersonalizationsmarteditContextUtils])],PersonalizationsmarteditContextService);return PersonalizationsmarteditContextService}();var f=function(){PersonalizationsmarteditRestService.$inject=["restServiceFactory","personalizationsmarteditUtils","httpClient","$q","yjQuery","personalizationsmarteditContextService"];function PersonalizationsmarteditRestService(e,t,n,i,o,r){this.restServiceFactory=e;this.personalizationsmarteditUtils=t;this.httpClient=n;this.$q=i;this.yjQuery=o;this.personalizationsmarteditContextService=r;this.actionHeaders=new a.HttpHeaders({"Content-Type":"application/json;charset=utf-8"})}e=PersonalizationsmarteditRestService;PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCatalogAwarePathVariables=function(e,t){t=t||{};var n=this.personalizationsmarteditContextService.getSeData().seExperienceData;var o={catalogId:t.catalog||n.catalogDescriptor.catalogId,catalogVersion:t.catalogVersion||n.catalogDescriptor.catalogVersion};e=i.extend(e,o);return e};PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCatalogAwarePathVariables.$inject=["requestParam","catalogAware"];PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCustomizatonCode=function(e,t){var n={customizationCode:t};e=i.extend(e,n);return e};PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithCustomizatonCode.$inject=["requestParam","customizatiodCode"];PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithVariationCode=function(e,t){var n={variationCode:t};e=i.extend(e,n);return e};PersonalizationsmarteditRestService.prototype.extendRequestParamObjWithVariationCode.$inject=["requestParam","variationCode"];PersonalizationsmarteditRestService.prototype.getParamsAction=function(e,t,n,i,o,r){var a=[];this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"oldComponentId",e);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"newComponentId",t);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"slotId",n);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"containerId",i);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"variationId",r);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a,"customizationId",o);return{params:{entry:a}}};PersonalizationsmarteditRestService.prototype.getParamsAction.$inject=["oldComponentId","newComponentId","slotId","containerId","customizationId","variationId"];PersonalizationsmarteditRestService.prototype.getPathVariablesObjForModifyingActionURI=function(e,t,n,i){var o=this.personalizationsmarteditContextService.getSeData().seExperienceData;i=i||{};return{customizationCode:e,variationCode:t,actionId:n,catalogId:i.catalog||o.catalogDescriptor.catalogId,catalogVersion:i.catalogVersion||o.catalogDescriptor.catalogVersion}};PersonalizationsmarteditRestService.prototype.getPathVariablesObjForModifyingActionURI.$inject=["customizationId","variationId","actionId","filter"];PersonalizationsmarteditRestService.prototype.prepareURI=function(e,t){return e.replace(/((?:\:)(\w*)(?:\/))/g,(function(e,n,i){return t[i]+"/"}))};PersonalizationsmarteditRestService.prototype.prepareURI.$inject=["uri","pathVariables"];PersonalizationsmarteditRestService.prototype.getParamsForCustomizations=function(e){return{code:i.isDefined(e.code)?e.code:undefined,pageId:i.isDefined(e.pageId)?e.pageId:undefined,pageCatalogId:i.isDefined(e.pageCatalogId)?e.pageCatalogId:undefined,name:i.isDefined(e.name)?e.name:undefined,negatePageId:i.isDefined(e.negatePageId)?e.negatePageId:undefined,catalogs:i.isDefined(e.catalogs)?e.catalogs:undefined,statuses:i.isDefined(e.statuses)?e.statuses.join(","):undefined}};PersonalizationsmarteditRestService.prototype.getParamsForCustomizations.$inject=["filter"];PersonalizationsmarteditRestService.prototype.getActionsDetails=function(t){var n=this.restServiceFactory.get(e.ACTIONS_DETAILS);t=this.extendRequestParamObjWithCatalogAwarePathVariables(t);return n.get(t)};PersonalizationsmarteditRestService.prototype.getActionsDetails.$inject=["filter"];PersonalizationsmarteditRestService.prototype.getCustomizations=function(t){t=t||{};var n={};var i=this.restServiceFactory.get(e.CUSTOMIZATIONS);n=this.extendRequestParamObjWithCatalogAwarePathVariables(n,t);n.pageSize=t.currentSize||10;n.currentPage=t.currentPage||0;this.yjQuery.extend(n,this.getParamsForCustomizations(t));return i.get(n)};PersonalizationsmarteditRestService.prototype.getCustomizations.$inject=["filter"];PersonalizationsmarteditRestService.prototype.getComponenentsIdsForVariation=function(t,n,i,o){var r=this.personalizationsmarteditContextService.getSeData().seExperienceData;var a=this.restServiceFactory.get(e.CXCMSC_ACTIONS_FROM_VARIATIONS);var s=[];this.personalizationsmarteditUtils.pushToArrayIfValueExists(s,"customization",t);this.personalizationsmarteditUtils.pushToArrayIfValueExists(s,"variations",n);this.personalizationsmarteditUtils.pushToArrayIfValueExists(s,"catalog",i||r.catalogDescriptor.catalogId);this.personalizationsmarteditUtils.pushToArrayIfValueExists(s,"catalogVersion",o||r.catalogDescriptor.catalogVersion);var c={params:{entry:s}};return a.save(c)};PersonalizationsmarteditRestService.prototype.getComponenentsIdsForVariation.$inject=["customizationId","variationId","catalog","catalogVersion"];PersonalizationsmarteditRestService.prototype.getCxCmsActionsOnPageForCustomization=function(e,t){var n={type:"CXCMSACTION",catalogs:"ALL",fields:"FULL",pageId:this.personalizationsmarteditContextService.getSeData().pageId,pageCatalogId:this.personalizationsmarteditContextService.getSeData().seExperienceData.pageContext.catalogId,customizationCode:e.code||"",currentPage:t||0};return this.getActionsDetails(n)};PersonalizationsmarteditRestService.prototype.getCxCmsActionsOnPageForCustomization.$inject=["customization","currentPage"];PersonalizationsmarteditRestService.prototype.getSegments=function(t){var n=this.restServiceFactory.get(e.SEGMENTS);return n.get(t)};PersonalizationsmarteditRestService.prototype.getSegments.$inject=["filter"];PersonalizationsmarteditRestService.prototype.getCustomization=function(t){var n=this.restServiceFactory.get(e.CUSTOMIZATION,"customizationCode");var i=this.extendRequestParamObjWithCustomizatonCode({},t.code);i=this.extendRequestParamObjWithCatalogAwarePathVariables(i,t);return n.get(i)};PersonalizationsmarteditRestService.prototype.getCustomization.$inject=["filter"];PersonalizationsmarteditRestService.prototype.createCustomization=function(t){var n=this.restServiceFactory.get(e.CUSTOMIZATION_PACKAGES);return n.save(this.extendRequestParamObjWithCatalogAwarePathVariables(t))};PersonalizationsmarteditRestService.prototype.createCustomization.$inject=["customization"];PersonalizationsmarteditRestService.prototype.updateCustomization=function(t){var n=this.restServiceFactory.get(e.CUSTOMIZATION,"customizationCode");t.customizationCode=t.code;return n.update(this.extendRequestParamObjWithCatalogAwarePathVariables(t))};PersonalizationsmarteditRestService.prototype.updateCustomization.$inject=["customization"];PersonalizationsmarteditRestService.prototype.updateCustomizationPackage=function(t){var n=this.restServiceFactory.get(e.CUSTOMIZATION_PACKAGE,"customizationCode");t.customizationCode=t.code;return n.update(this.extendRequestParamObjWithCatalogAwarePathVariables(t))};PersonalizationsmarteditRestService.prototype.updateCustomizationPackage.$inject=["customization"];PersonalizationsmarteditRestService.prototype.deleteCustomization=function(t){var n=this.restServiceFactory.get(e.CUSTOMIZATION,"customizationCode");var i={customizationCode:t};return n.remove(this.extendRequestParamObjWithCatalogAwarePathVariables(i))};PersonalizationsmarteditRestService.prototype.deleteCustomization.$inject=["customizationCode"];PersonalizationsmarteditRestService.prototype.getVariation=function(t,n){var i=this.restServiceFactory.get(e.VARIATION,"variationCode");var o=this.extendRequestParamObjWithVariationCode({},n);o=this.extendRequestParamObjWithCatalogAwarePathVariables(o);o=this.extendRequestParamObjWithCustomizatonCode(o,t);return i.get(o)};PersonalizationsmarteditRestService.prototype.getVariation.$inject=["customizationCode","variationCode"];PersonalizationsmarteditRestService.prototype.editVariation=function(t,n){var i=this.restServiceFactory.get(e.VARIATION,"variationCode");n=this.extendRequestParamObjWithCatalogAwarePathVariables(n);n=this.extendRequestParamObjWithCustomizatonCode(n,t);n.variationCode=n.code;return i.update(n)};PersonalizationsmarteditRestService.prototype.editVariation.$inject=["customizationCode","variation"];PersonalizationsmarteditRestService.prototype.deleteVariation=function(t,n){var i=this.restServiceFactory.get(e.VARIATION,"variationCode");var o=this.extendRequestParamObjWithVariationCode({},n);o=this.extendRequestParamObjWithCatalogAwarePathVariables(o);o=this.extendRequestParamObjWithCustomizatonCode(o,t);return i.remove(o)};PersonalizationsmarteditRestService.prototype.deleteVariation.$inject=["customizationCode","variationCode"];PersonalizationsmarteditRestService.prototype.createVariationForCustomization=function(t,n){var i=this.restServiceFactory.get(e.VARIATIONS);n=this.extendRequestParamObjWithCatalogAwarePathVariables(n);n=this.extendRequestParamObjWithCustomizatonCode(n,t);return i.save(n)};PersonalizationsmarteditRestService.prototype.createVariationForCustomization.$inject=["customizationCode","variation"];PersonalizationsmarteditRestService.prototype.getVariationsForCustomization=function(t,n){var i=this.restServiceFactory.get(e.VARIATIONS);var o={};var r=n||{};o=this.extendRequestParamObjWithCatalogAwarePathVariables(o,r);o=this.extendRequestParamObjWithCustomizatonCode(o,t);o.fields=e.VARIATION_FOR_CUSTOMIZATION_DEFAULT_FIELDS;var a=typeof r.includeFullFields==="undefined"?false:r.includeFullFields;if(a){o.fields=e.FULL_FIELDS}return i.get(o)};PersonalizationsmarteditRestService.prototype.getVariationsForCustomization.$inject=["customizationCode","filter"];PersonalizationsmarteditRestService.prototype.replaceComponentWithContainer=function(t,n,i){var o=this.restServiceFactory.get(e.ADD_CONTAINER);var r=this.extendRequestParamObjWithCatalogAwarePathVariables({},i);var a=this.getParamsAction(t,null,n,null,null,null);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a.params.entry,"catalog",r.catalogId);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a.params.entry,"catalogVersion",r.catalogVersion);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a.params.entry,"slotCatalog",i.slotCatalog);this.personalizationsmarteditUtils.pushToArrayIfValueExists(a.params.entry,"oldComponentCatalog",i.oldComponentCatalog);return o.save(a)};PersonalizationsmarteditRestService.prototype.replaceComponentWithContainer.$inject=["componentId","slotId","filter"];PersonalizationsmarteditRestService.prototype.getActions=function(t,n,o){var r=this.restServiceFactory.get(e.ACTIONS);var a=this.getPathVariablesObjForModifyingActionURI(t,n,undefined,o);var s={fields:e.FULL_FIELDS};s=i.extend(s,a);return r.get(s)};PersonalizationsmarteditRestService.prototype.getActions.$inject=["customizationId","variationId","filter"];PersonalizationsmarteditRestService.prototype.createActions=function(t,n,i,o){var r=this.getPathVariablesObjForModifyingActionURI(t,n,undefined,o);var a=this.prepareURI(e.ACTIONS,r);var s={headers:this.actionHeaders};return this.httpClient.patch(a,i,s).toPromise()};PersonalizationsmarteditRestService.prototype.createActions.$inject=["customizationId","variationId","data","filter"];PersonalizationsmarteditRestService.prototype.addActionToContainer=function(t,n,o,r,a,s){var c=this.restServiceFactory.get(e.ACTIONS);var l=this.getPathVariablesObjForModifyingActionURI(r,a,undefined,s);var d={type:"cxCmsActionData",containerId:o,componentId:t,componentCatalog:n};d=i.extend(d,l);return c.save(d)};PersonalizationsmarteditRestService.prototype.addActionToContainer.$inject=["componentId","catalogId","containerId","customizationId","variationId","filter"];PersonalizationsmarteditRestService.prototype.editAction=function(t,n,o,r,a,s){var c=this.restServiceFactory.get(e.ACTION,"actionId");var l=this.getPathVariablesObjForModifyingActionURI(t,n,o,s);return c.get(l).then((function(e){e=i.extend(e,l);e.componentId=r;e.componentCatalog=a;return c.update(e)}))};PersonalizationsmarteditRestService.prototype.editAction.$inject=["customizationId","variationId","actionId","newComponentId","newComponentCatalog","filter"];PersonalizationsmarteditRestService.prototype.deleteAction=function(t,n,i,o){var r=this.restServiceFactory.get(e.ACTION,"actionId");var a=this.getPathVariablesObjForModifyingActionURI(t,n,i,o);return r.remove(a)};PersonalizationsmarteditRestService.prototype.deleteAction.$inject=["customizationId","variationId","actionId","filter"];PersonalizationsmarteditRestService.prototype.deleteActions=function(t,n,i,o){var r=this.getPathVariablesObjForModifyingActionURI(t,n,undefined,o);var a=this.prepareURI(e.ACTIONS,r);var s={headers:this.actionHeaders,body:i};return this.httpClient.delete(a,s).toPromise()};PersonalizationsmarteditRestService.prototype.deleteActions.$inject=["customizationId","variationId","actionIds","filter"];PersonalizationsmarteditRestService.prototype.getComponents=function(t){var n=this.personalizationsmarteditContextService.getSeData().seExperienceData;var o=this.restServiceFactory.get(e.CATALOGS);var r={siteId:n.siteDescriptor.uid};r=i.extend(r,t);return o.get(this.extendRequestParamObjWithCatalogAwarePathVariables(r,t))};PersonalizationsmarteditRestService.prototype.getComponents.$inject=["filter"];PersonalizationsmarteditRestService.prototype.getComponent=function(t){var n=this.personalizationsmarteditContextService.getSeData().seExperienceData;var i=this.restServiceFactory.get(e.CATALOG,"itemUuid");var o={itemUuid:t,siteId:n.siteDescriptor.uid};return i.get(o)};PersonalizationsmarteditRestService.prototype.getComponent.$inject=["itemUuid"];PersonalizationsmarteditRestService.prototype.getNewComponentTypes=function(){var t=this.restServiceFactory.get(e.COMPONENT_TYPES);return t.get()};PersonalizationsmarteditRestService.prototype.updateCustomizationRank=function(t,n){var i=this.personalizationsmarteditContextService.getSeData().seExperienceData;var o=this.restServiceFactory.get(e.UPDATE_CUSTOMIZATION_RANK);var r=[];this.personalizationsmarteditUtils.pushToArrayIfValueExists(r,"customization",t);this.personalizationsmarteditUtils.pushToArrayIfValueExists(r,"increaseValue",n);this.personalizationsmarteditUtils.pushToArrayIfValueExists(r,"catalog",i.catalogDescriptor.catalogId);this.personalizationsmarteditUtils.pushToArrayIfValueExists(r,"catalogVersion",i.catalogDescriptor.catalogVersion);var a={params:{entry:r}};return o.save(a)};PersonalizationsmarteditRestService.prototype.updateCustomizationRank.$inject=["customizationId","icreaseValue"];PersonalizationsmarteditRestService.prototype.checkVersionConflict=function(t){var n=this.personalizationsmarteditContextService.getSeData().seExperienceData;var i=this.restServiceFactory.get(e.CHECK_VERSION);var o=[];this.personalizationsmarteditUtils.pushToArrayIfValueExists(o,"versionId",t);this.personalizationsmarteditUtils.pushToArrayIfValueExists(o,"catalog",n.catalogDescriptor.catalogId);this.personalizationsmarteditUtils.pushToArrayIfValueExists(o,"catalogVersion",n.catalogDescriptor.catalogVersion);var r={params:{entry:o}};return i.save(r)};PersonalizationsmarteditRestService.prototype.checkVersionConflict.$inject=["versionId"];var e;PersonalizationsmarteditRestService.CUSTOMIZATIONS="/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/customizations";PersonalizationsmarteditRestService.CUSTOMIZATION=e.CUSTOMIZATIONS+"/:customizationCode";PersonalizationsmarteditRestService.CUSTOMIZATION_PACKAGES="/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/customizationpackages";PersonalizationsmarteditRestService.CUSTOMIZATION_PACKAGE=e.CUSTOMIZATION_PACKAGES+"/:customizationCode";PersonalizationsmarteditRestService.ACTIONS_DETAILS="/personalizationwebservices/v1/catalogs/:catalogId/catalogVersions/:catalogVersion/actions";PersonalizationsmarteditRestService.VARIATIONS=e.CUSTOMIZATION+"/variations";PersonalizationsmarteditRestService.VARIATION=e.VARIATIONS+"/:variationCode";PersonalizationsmarteditRestService.ACTIONS=e.VARIATION+"/actions";PersonalizationsmarteditRestService.ACTION=e.ACTIONS+"/:actionId";PersonalizationsmarteditRestService.CXCMSC_ACTIONS_FROM_VARIATIONS="/personalizationwebservices/v1/query/cxcmscomponentsfromvariations";PersonalizationsmarteditRestService.SEGMENTS="/personalizationwebservices/v1/segments";PersonalizationsmarteditRestService.CATALOGS="/cmswebservices/v1/sites/:siteId/cmsitems";PersonalizationsmarteditRestService.CATALOG=e.CATALOGS+"/:itemUuid";PersonalizationsmarteditRestService.ADD_CONTAINER="/personalizationwebservices/v1/query/cxReplaceComponentWithContainer";PersonalizationsmarteditRestService.COMPONENT_TYPES="/cmswebservices/v1/types?category=COMPONENT";PersonalizationsmarteditRestService.UPDATE_CUSTOMIZATION_RANK="/personalizationwebservices/v1/query/cxUpdateCustomizationRank";PersonalizationsmarteditRestService.CHECK_VERSION="/personalizationwebservices/v1/query/cxCmsPageVersionCheck";PersonalizationsmarteditRestService.VARIATION_FOR_CUSTOMIZATION_DEFAULT_FIELDS="variations(active,actions,enabled,code,name,rank,status,catalog,catalogVersion)";PersonalizationsmarteditRestService.FULL_FIELDS="FULL";PersonalizationsmarteditRestService=e=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[o.RestServiceFactory,Object,a.HttpClient,Object,Object,v])],PersonalizationsmarteditRestService);return PersonalizationsmarteditRestService}();var _=function(){ManageCustomizationViewComponent.$inject=["DATE_CONSTANTS","CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS","PERSONALIZATION_MODEL_STATUS_CODES","CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS","PERSONALIZATION_DATE_FORMATS","MODAL_BUTTON_ACTIONS","personalizationsmarteditRestService","personalizationsmarteditDateUtils","personalizationsmarteditMessageHandler","personalizationsmarteditCommerceCustomizationService","personalizationsmarteditUtils","confirmationModalService","systemEventService","$translate","$log"];function ManageCustomizationViewComponent(e,t,n,i,o,r,a,s,c,l,d,p,u,m,g){this.DATE_CONSTANTS=e;this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS=t;this.PERSONALIZATION_MODEL_STATUS_CODES=n;this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS=i;this.PERSONALIZATION_DATE_FORMATS=o;this.MODAL_BUTTON_ACTIONS=r;this.personalizationsmarteditRestService=a;this.personalizationsmarteditDateUtils=s;this.personalizationsmarteditMessageHandler=c;this.personalizationsmarteditCommerceCustomizationService=l;this.personalizationsmarteditUtils=d;this.confirmationModalService=p;this.systemEventService=u;this.$translate=m;this.$log=g;this.initialCustomization={name:"",enabledStartDate:"",enabledEndDate:"",status:"ENABLED",statusBoolean:true,variations:[]};this.customization={};this.activeTabNumber=0;this.editMode=false;this.doCheckCounter=0}e=ManageCustomizationViewComponent;ManageCustomizationViewComponent.prototype.$onInit=function(){var e=this;if(this.customizationCode){this.getCustomization();this.editMode=true}else{this.customization=i.copy(this.initialCustomization)}this.initTabs();this.modalManager.setDismissCallback((function(){return e.onCancel()}));this.modalManager.setButtonHandler((function(t){switch(t){case e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK:return e.edit.selectedTab.onConfirm();case e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT:return e.edit.selectedTab.onConfirm();case e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_CANCEL:return e.edit.selectedTab.onCancel();default:e.$log.error(e.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab.invalidbuttonid"),t);break}}));this.edit={code:"",name:"",selectedTab:this.tabsArr[0]}};ManageCustomizationViewComponent.prototype.$doCheck=function(){this.doCheckCounter+=1;if(this.doCheckCounter===e.DOCHECK_COUNTER_INTERVAL){this.doCheckCounter=0;var t=this.edit.selectedTab.isDirty();var n=this.edit.selectedTab.isValid();if(t){if(n){this.edit.selectedTab.setEnabled(true)}else{this.edit.selectedTab.setEnabled(false)}}else if(this.editMode){if(n){this.edit.selectedTab.setEnabled(true)}else{this.edit.selectedTab.setEnabled(false)}}else{this.edit.selectedTab.setEnabled(false)}}};ManageCustomizationViewComponent.prototype.getVariationsForCustomization=function(e){var t={includeFullFields:true};return this.personalizationsmarteditRestService.getVariationsForCustomization(e,t)};ManageCustomizationViewComponent.prototype.getVariationsForCustomization.$inject=["customizationCode"];ManageCustomizationViewComponent.prototype.createCommerceCustomizationData=function(e){var t=this;e.forEach((function(e){e.commerceCustomizations=t.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCountMap(e);e.numberOfCommerceActions=t.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCount(e);delete e.actions}))};ManageCustomizationViewComponent.prototype.createCommerceCustomizationData.$inject=["variations"];ManageCustomizationViewComponent.prototype.getCustomization=function(){var e=this;var t={code:this.customizationCode};this.personalizationsmarteditRestService.getCustomization(t).then((function(t){e.customization=t;e.customization.enabledStartDate=e.personalizationsmarteditDateUtils.formatDate(e.customization.enabledStartDate,undefined);e.customization.enabledEndDate=e.personalizationsmarteditDateUtils.formatDate(e.customization.enabledEndDate,undefined);e.customization.statusBoolean=e.customization.status===e.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED;e.getVariationsForCustomization(e.customizationCode).then((function(t){e.createCommerceCustomizationData(t.variations);e.customization.variations=t.variations;if(i.isDefined(e.variationCode)){var n=e.customization.variations.filter((function(t){return t.code===e.variationCode}));if(n.length>0){e.activeTabNumber=1;e.edit.selectedTab=e.tabsArr[1];var o=n[0];e.edit.selectedVariation=o}e.initialCustomization=i.copy(e.customization)}else{e.edit.selectedTab=e.tabsArr[0];e.initialCustomization=i.copy(e.customization)}}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.gettingsegments"))}))}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.gettingcomponents"))}))};ManageCustomizationViewComponent.prototype.initTabs=function(){var e=this;this.tabsArr=[{name:this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.BASIC_INFO_TAB_NAME,active:true,disabled:false,heading:this.$translate.instant("personalization.modal.customizationvariationmanagement.basicinformationtab"),template:"basicInfoTabWrapperTemplate.html",formName:this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.BASIC_INFO_TAB_FORM_NAME,isDirty:function(){return e.isModalDirty()},isValid:function(){return e.isBasicInfoTabValid(e.customization).length===0},setEnabled:function(t){if(t){e.tabsArr[1].disabled=false;e.modalManager.enableButton(e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT)}else{e.tabsArr[1].disabled=true;e.modalManager.disableButton(e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT)}},onConfirm:function(){e.activeTabNumber=1},onCancel:function(){e.onCancel()}},{name:this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.TARGET_GROUP_TAB_NAME,active:false,disabled:true,heading:this.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab"),template:"targetGroupTabWrapperTemplate.html",formName:this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.TARGET_GROUP_TAB_FORM_NAME,isDirty:function(){return e.isModalDirty()},isValid:function(){return e.isTargetGroupTabValid(e.customization).length===0},setEnabled:function(t){if(t){e.modalManager.enableButton(e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK)}else{e.modalManager.disableButton(e.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK)}},onConfirm:function(){e.onSave()},onCancel:function(){e.onCancel()}}]};ManageCustomizationViewComponent.prototype.selectTab=function(e){this.edit.selectedTab=e;this.activeTabNumber=this.tabsArr.indexOf(e);switch(e.name){case this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.BASIC_INFO_TAB_NAME:this.modalManager.removeButton(this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK);if(!this.modalManager.getButton(this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT)){this.modalManager.addButton({id:this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT,label:"personalization.modal.customizationvariationmanagement.basicinformationtab.button.next"})}break;case this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS.TARGET_GROUP_TAB_NAME:this.modalManager.removeButton(this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_NEXT);if(!this.modalManager.getButton(this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK)){this.modalManager.addButton({id:this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_OK,label:"personalization.modal.customizationvariationmanagement.targetgrouptab.button.submit",action:this.MODAL_BUTTON_ACTIONS.CLOSE})}if(this.customization.enabledStartDate){this.customization.enabledStartDate=this.personalizationsmarteditDateUtils.formatDate(this.customization.enabledStartDate,this.DATE_CONSTANTS.MOMENT_FORMAT)}if(this.customization.enabledEndDate){this.customization.enabledEndDate=this.personalizationsmarteditDateUtils.formatDate(this.customization.enabledEndDate,this.DATE_CONSTANTS.MOMENT_FORMAT)}break}};ManageCustomizationViewComponent.prototype.selectTab.$inject=["tab"];ManageCustomizationViewComponent.prototype.onSave=function(){var e=this;if(this.customization.enabledStartDate){this.customization.enabledStartDate=this.personalizationsmarteditDateUtils.formatDate(this.customization.enabledStartDate,this.PERSONALIZATION_DATE_FORMATS.MODEL_DATE_FORMAT)}else{this.customization.enabledStartDate=undefined}if(this.customization.enabledEndDate){this.customization.enabledEndDate=this.personalizationsmarteditDateUtils.formatDate(this.customization.enabledEndDate,this.PERSONALIZATION_DATE_FORMATS.MODEL_DATE_FORMAT)}else{this.customization.enabledEndDate=undefined}this.customization.status=this.customization.statusBoolean?this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED:this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED;if(this.editMode){this.personalizationsmarteditRestService.updateCustomizationPackage(this.customization).then((function(){e.systemEventService.publishAsync("CUSTOMIZATIONS_MODIFIED",{});e.personalizationsmarteditMessageHandler.sendSuccess(e.$translate.instant("personalization.info.updatingcustomization"))}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.updatingcustomization"))}))}else{this.personalizationsmarteditRestService.createCustomization(this.customization).then((function(){e.systemEventService.publishAsync("CUSTOMIZATIONS_MODIFIED",{});e.personalizationsmarteditMessageHandler.sendSuccess(e.$translate.instant("personalization.info.creatingcustomization"))}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.creatingcustomization"))}))}};ManageCustomizationViewComponent.prototype.onCancel=function(){var e=this;if(this.isModalDirty()){return this.confirmationModalService.confirm({description:this.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab.cancelconfirmation")}).then((function(){e.modalManager.dismiss();return Promise.resolve()}),(function(){return Promise.reject()}))}else{this.modalManager.dismiss();return Promise.resolve()}};ManageCustomizationViewComponent.prototype.isBasicInfoTabValid=function(e){var t=[];if(i.isUndefined(e.name)||e.name===""){t.push("name cant be empty")}return t};ManageCustomizationViewComponent.prototype.isBasicInfoTabValid.$inject=["customizationForm"];ManageCustomizationViewComponent.prototype.isTargetGroupTabValid=function(e){var t=[];if(!(i.isArray(e.variations)&&this.personalizationsmarteditUtils.getVisibleItems(e.variations).length>0)){t.push("variations cant be empty")}return t};ManageCustomizationViewComponent.prototype.isTargetGroupTabValid.$inject=["customizationForm"];ManageCustomizationViewComponent.prototype.isCustomizationValid=function(e){var t=[];t.push(this.isBasicInfoTabValid(e));t.push(this.isTargetGroupTabValid(e));return t};ManageCustomizationViewComponent.prototype.isCustomizationValid.$inject=["customizationForm"];ManageCustomizationViewComponent.prototype.isModalDirty=function(){return!i.equals(this.initialCustomization,this.customization)};var e;ManageCustomizationViewComponent.DOCHECK_COUNTER_INTERVAL=30;ManageCustomizationViewComponent=e=__decorate([o.SeComponent({templateUrl:"manageCustomizationViewTemplate.html",inputs:["modalManager: =","customizationCode","variationCode"]}),__metadata("design:paramtypes",[Object,Object,Object,Object,Object,Object,f,r.PersonalizationsmarteditDateUtils,Object,Object,Object,Object,Object,Function,Object])],ManageCustomizationViewComponent);return ManageCustomizationViewComponent}();var y=function(){BasicInfoTabComponent.$inject=["PERSONALIZATION_MODEL_STATUS_CODES","DATE_CONSTANTS"];function BasicInfoTabComponent(e,t){this.PERSONALIZATION_MODEL_STATUS_CODES=e;this.DATE_CONSTANTS=t;this.datetimeConfigurationEnabled=false}Object.defineProperty(BasicInfoTabComponent.prototype,"customization",{get:function(){return this._customization},set:function(e){this._customization=e;this.datetimeConfigurationEnabled=this.customization.enabledStartDate||this.customization.enabledEndDate},enumerable:false,configurable:true});BasicInfoTabComponent.prototype.resetDateTimeConfiguration=function(){this.customization.enabledStartDate=undefined;this.customization.enabledEndDate=undefined};BasicInfoTabComponent.prototype.customizationStatusChange=function(){this.customization.status=this.customization.statusBoolean?this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED:this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED};BasicInfoTabComponent=__decorate([o.SeComponent({templateUrl:"basicInfoTabTemplate.html",inputs:["customization: =?"]}),__metadata("design:paramtypes",[Object,Object])],BasicInfoTabComponent);return BasicInfoTabComponent}();var C=function(){function TriggerDataState(){this.state={code:"",name:"",expression:[],isDefault:false,showExpression:true,selectedVariation:undefined}}return TriggerDataState}();var S=function(){function TriggerTabService(){this.tabsList=[];this.triggerDataState=new C}TriggerTabService.prototype.getTriggersTabs=function(){return this.tabsList};TriggerTabService.prototype.addTriggerTab=function(e){var t=this.tabsList.filter((function(t){return t.id===e.id}));if(t.length===0){this.tabsList.push(e)}};TriggerTabService.prototype.addTriggerTab.$inject=["trigger"];TriggerTabService.prototype.removeTriggerTab=function(e){var t=this.tabsList.filter((function(t){return t.id===e.id}));if(t.length>0){var n=this.tabsList.indexOf(t[0]);this.tabsList.splice(n,1)}};TriggerTabService.prototype.removeTriggerTab.$inject=["trigger"];TriggerTabService.prototype.getTriggerDataState=function(){return this.triggerDataState.state};TriggerTabService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[])],TriggerTabService);return TriggerTabService}();var b=function(){TargetGroupTabComponent.$inject=["PERSONALIZATION_MODEL_STATUS_CODES","CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS","personalizationsmarteditUtils","personalizationsmarteditTriggerService","$translate","$timeout","yjQuery","confirmationModalService","isBlank","personalizationsmarteditDateUtils","triggerTabService"];function TargetGroupTabComponent(e,t,n,i,o,r,a,s,c,l,d){this.PERSONALIZATION_MODEL_STATUS_CODES=e;this.CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS=t;this.personalizationsmarteditUtils=n;this.personalizationsmarteditTriggerService=i;this.$translate=o;this.$timeout=r;this.yjQuery=a;this.confirmationModalService=s;this.isBlank=c;this.personalizationsmarteditDateUtils=l;this.triggerTabService=d}TargetGroupTabComponent.prototype.getActivityActionTextForVariation=function(e){if(e.enabled){return this.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.disable")}else{return this.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab.variation.options.enable")}};TargetGroupTabComponent.prototype.getActivityActionTextForVariation.$inject=["variation"];TargetGroupTabComponent.prototype.getActivityStateForCustomization=function(e){return this.personalizationsmarteditUtils.getActivityStateForCustomization(e)};TargetGroupTabComponent.prototype.getActivityStateForCustomization.$inject=["customization"];TargetGroupTabComponent.prototype.getActivityStateForVariation=function(e,t){return this.personalizationsmarteditUtils.getActivityStateForVariation(e,t)};TargetGroupTabComponent.prototype.getActivityStateForVariation.$inject=["customization","variation"];TargetGroupTabComponent.prototype.getEnablementTextForVariation=function(e){return"("+this.personalizationsmarteditUtils.getEnablementTextForVariation(e,"personalization.modal.customizationvariationmanagement.targetgrouptab")+")"};TargetGroupTabComponent.prototype.getEnablementTextForVariation.$inject=["variation"];TargetGroupTabComponent.prototype.setSliderConfigForAdd=function(){var e=this;this.sliderPanelConfiguration.modal.save.label="personalization.modal.customizationvariationmanagement.targetgrouptab.addvariation";this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!e.canSaveVariation()};this.sliderPanelConfiguration.modal.save.onClick=function(){e.addVariationClick()}};TargetGroupTabComponent.prototype.setSliderConfigForEditing=function(){var e=this;this.sliderPanelConfiguration.modal.save.label="personalization.modal.customizationvariationmanagement.targetgrouptab.savechanges";this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){return!e.canSaveVariation()};this.sliderPanelConfiguration.modal.save.onClick=function(){e.submitChangesClick()}};TargetGroupTabComponent.prototype.toggleSliderFullscreen=function(e){var t=this;var n=i.element(".sliderPanelParentModal");var o="modal-fullscreen";if(n.hasClass(o)||e===false){n.removeClass(o)}else{n.addClass(o)}this.$timeout((function(){t.yjQuery(window).resize()}),0)};TargetGroupTabComponent.prototype.toggleSliderFullscreen.$inject=["enableFullscreen"];TargetGroupTabComponent.prototype.confirmDefaultTrigger=function(e){var t=this;if(e&&this.personalizationsmarteditTriggerService.isValidExpression(this.edit.expression[0])){this.confirmationModalService.confirm({description:"personalization.modal.manager.targetgrouptab.defaulttrigger.content"}).then((function(){t.edit.showExpression=false}),(function(){t.edit.isDefault=false}))}else{this.edit.showExpression=!e}};TargetGroupTabComponent.prototype.confirmDefaultTrigger.$inject=["isDefault"];TargetGroupTabComponent.prototype.canSaveVariation=function(){var e=this.triggerTabService.getTriggersTabs();var t=e.every((function(e){return e.isValidOrEmpty()}));var n=e.some((function(e){return e.isTriggerDefined()}));var i=!this.isBlank(this.edit.name);i=i&&(this.edit.isDefault||n&&t);return i};TargetGroupTabComponent.prototype.addVariationClick=function(){var e=this;this.customization.variations.push({code:this.edit.code,name:this.edit.name,enabled:true,status:this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED,triggers:this.personalizationsmarteditTriggerService.buildTriggers(this.edit,this.edit.selectedVariation.triggers||[]),rank:this.customization.variations.length,isNew:true});this.clearEditedVariationDetails();this.toggleSliderFullscreen(false);this.$timeout((function(){e.sliderPanelHide()}),0);this.isVariationLoaded=false};TargetGroupTabComponent.prototype.submitChangesClick=function(){var e=this;var t=this.personalizationsmarteditTriggerService.buildTriggers(this.edit,this.edit.selectedVariation.triggers||[]);this.edit.selectedVariation.triggers=t;this.edit.selectedVariation.name=this.edit.name;this.edit.selectedVariation=undefined;this.toggleSliderFullscreen(false);this.$timeout((function(){e.sliderPanelHide()}),0);this.isVariationLoaded=false};TargetGroupTabComponent.prototype.cancelChangesClick=function(){if(this.isVariationSelected()){this.edit.selectedVariation=undefined}else{this.clearEditedVariationDetails()}this.toggleSliderFullscreen(false);this.sliderPanelHide();this.isVariationLoaded=false};TargetGroupTabComponent.prototype.isVariationSelected=function(){return i.isDefined(this.edit.selectedVariation)};TargetGroupTabComponent.prototype.clearEditedVariationDetails=function(){this.edit.code="";this.edit.name="";this.edit.expression=[];this.edit.isDefault=false;this.edit.showExpression=true};TargetGroupTabComponent.prototype.setVariationRank=function(e,t,n,i){if(i){n.stopPropagation()}else{var o=this.customization.variations.indexOf(e);var r=this.personalizationsmarteditUtils.getValidRank(this.customization.variations,e,t);var a=this.customization.variations;if(r>=0&&r<a.length){a.splice(r,0,a.splice(o,1)[0]);this.recalculateRanksForVariations()}}};TargetGroupTabComponent.prototype.setVariationRank.$inject=["variation","increaseValue","$event","firstOrLast"];TargetGroupTabComponent.prototype.recalculateRanksForVariations=function(){var e=this;this.customization.variations.forEach((function(t,n){e.customization.variations[n].rank=n}))};TargetGroupTabComponent.prototype.removeVariationClick=function(e){var t=this;this.confirmationModalService.confirm({description:"personalization.modal.manager.targetgrouptab.deletevariation.content"}).then((function(){if(e.isNew){t.customization.variations.splice(t.customization.variations.indexOf(e),1)}else{e.status="DELETED"}t.edit.selectedVariation=undefined;t.recalculateRanksForVariations()}))};TargetGroupTabComponent.prototype.removeVariationClick.$inject=["variation"];TargetGroupTabComponent.prototype.addVariationAction=function(){var e=this;this.clearEditedVariationDetails();this.setSliderConfigForAdd();this.sliderPanelShow();this.edit.selectedVariation={triggers:[]};this.$timeout((function(){e.isVariationLoaded=true}),0)};TargetGroupTabComponent.prototype.editVariationAction=function(e){var t=this;this.setSliderConfigForEditing();this.edit.selectedVariation=e;this.edit.code=e.code;this.edit.name=e.name;this.edit.isDefault=this.personalizationsmarteditTriggerService.isDefault(e.triggers);this.edit.showExpression=!this.edit.isDefault;this.sliderPanelShow();this.$timeout((function(){t.isVariationLoaded=true}),0)};TargetGroupTabComponent.prototype.editVariationAction.$inject=["variation"];TargetGroupTabComponent.prototype.toogleVariationActive=function(e){e.enabled=!e.enabled;e.status=e.enabled?this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED:this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED};TargetGroupTabComponent.prototype.toogleVariationActive.$inject=["variation"];TargetGroupTabComponent.prototype.$onInit=function(){var e=this;this.isVariationLoaded=false;this.edit=this.triggerTabService.getTriggerDataState();this.sliderPanelConfiguration={modal:{showDismissButton:true,title:"personalization.modal.customizationvariationmanagement.targetgrouptab.slidingpanel.title",cancel:{label:"personalization.modal.customizationvariationmanagement.targetgrouptab.cancelchanges",onClick:function(){e.cancelChangesClick()}},dismiss:{onClick:function(){e.cancelChangesClick()}},save:{}},cssSelector:"#y-modal-dialog"};var t={id:"segmentTrigger",title:"personalization.modal.customizationvariationmanagement.targetgrouptab.segments",templateUrl:"personalizationsmarteditSegmentViewWrapperTemplate.html",isTriggerDefined:function(){return e.personalizationsmarteditTriggerService.isValidExpression(e.edit.expression[0])},isValidOrEmpty:function(){e.edit.expression=e.edit.expression||[{nodes:[]}];return e.personalizationsmarteditTriggerService.isValidExpression(e.edit.expression[0])||e.edit.expression.length===0||e.edit.expression[0].nodes.length===0||e.personalizationsmarteditTriggerService.isDropzone(e.edit.expression[0].nodes[0])}};this.triggerTabService.addTriggerTab(t)};TargetGroupTabComponent.prototype.$onChanges=function(e){if(e.variation&&e.variation.currentValue){this.editVariationAction(e.variation.currentValue)}};TargetGroupTabComponent.prototype.$onChanges.$inject=["changes"];TargetGroupTabComponent=__decorate([o.SeComponent({templateUrl:"targetGroupTabTemplate.html",inputs:["customization: =?","variation"]}),__metadata("design:paramtypes",[Object,Object,Object,Object,Function,Object,Function,Object,Object,r.PersonalizationsmarteditDateUtils,S])],TargetGroupTabComponent);return TargetGroupTabComponent}();var I=function(){function PersonalizationsmarteditTriggerService(){this.DEFAULT_TRIGGER="defaultTriggerData";this.SEGMENT_TRIGGER="segmentTriggerData";this.EXPRESSION_TRIGGER="expressionTriggerData";this.supportedTypes=[this.DEFAULT_TRIGGER,this.SEGMENT_TRIGGER,this.EXPRESSION_TRIGGER];this.actions=[{id:"AND",name:"personalization.modal.customizationvariationmanagement.targetgrouptab.expression.and"},{id:"OR",name:"personalization.modal.customizationvariationmanagement.targetgrouptab.expression.or"},{id:"NOT",name:"personalization.modal.customizationvariationmanagement.targetgrouptab.expression.not"}];this.GROUP_EXPRESSION="groupExpressionData";this.SEGMENT_EXPRESSION="segmentExpressionData";this.NEGATION_EXPRESSION="negationExpressionData";this.CONTAINER_TYPE="container";this.ITEM_TYPE="item";this.DROPZONE_TYPE="dropzone"}PersonalizationsmarteditTriggerService.prototype.isContainer=function(e){return this.isElementOfType(e,this.CONTAINER_TYPE)};PersonalizationsmarteditTriggerService.prototype.isContainer.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isEmptyContainer=function(e){return this.isContainer(e)&&e.nodes.length===0};PersonalizationsmarteditTriggerService.prototype.isEmptyContainer.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isNotEmptyContainer=function(e){return this.isContainer(e)&&e.nodes.length>0};PersonalizationsmarteditTriggerService.prototype.isNotEmptyContainer.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isDropzone=function(e){return this.isElementOfType(e,this.DROPZONE_TYPE)};PersonalizationsmarteditTriggerService.prototype.isDropzone.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isItem=function(e){return this.isElementOfType(e,this.ITEM_TYPE)};PersonalizationsmarteditTriggerService.prototype.isItem.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isValidExpression=function(e){var t=this;if(!e){return false}if(this.isContainer(e)){return e.nodes&&e.nodes.length>0&&e.nodes.every((function(e){return t.isValidExpression(e)}))}else{return i.isDefined(e.selectedSegment)}};PersonalizationsmarteditTriggerService.prototype.isValidExpression.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.buildTriggers=function(e,t){var n={};e=e||{};if(this.isDefaultData(e)){n=this.buildDefaultTrigger()}else if(e.expression&&e.expression.length>0){var i=e.expression[0];if(this.isDropzone(i.nodes[0])){n={}}else if(this.isExpressionData(i)){n=this.buildExpressionTrigger(i)}else{n=this.buildSegmentTrigger(i)}}return this.mergeTriggers(t,n)};PersonalizationsmarteditTriggerService.prototype.buildTriggers.$inject=["form","existingTriggers"];PersonalizationsmarteditTriggerService.prototype.buildData=function(e){var t=this;var n={};var i=this.getBaseData();if(e&&e.length>0){n=e.filter((function(e){return t.isSupportedTrigger(e)}))[0]}if(this.isDefaultTrigger(n));else if(this.isExpressionTrigger(n)){i=this.buildExpressionTriggerData(n)}else if(this.isSegmentTrigger(n)){i=this.buildSegmentTriggerData(n)}return i};PersonalizationsmarteditTriggerService.prototype.buildData.$inject=["triggers"];PersonalizationsmarteditTriggerService.prototype.isDefault=function(e){var t=this;var n=(e||[]).filter((function(e){return t.isDefaultTrigger(e)}))[0];return e&&n?true:false};PersonalizationsmarteditTriggerService.prototype.isDefault.$inject=["triggers"];PersonalizationsmarteditTriggerService.prototype.getExpressionAsString=function(e){var t=this;var n="";if(e===undefined){return n}var i=this.isNegation(e)?"AND":e.operation.id;n+=this.isNegation(e)?" NOT ":"";n+="(";e.nodes.forEach((function(e,o){if(t.isDropzone(e)){n+=" [] "}else{n+=o>0?" "+i+" ":"";n+=t.isItem(e)?e.selectedSegment.code:t.getExpressionAsString(e)}}));n+=")";return n};PersonalizationsmarteditTriggerService.prototype.getExpressionAsString.$inject=["expressionContainer"];PersonalizationsmarteditTriggerService.prototype.isElementOfType=function(e,t){return i.isDefined(e)?e.type===t:false};PersonalizationsmarteditTriggerService.prototype.isElementOfType.$inject=["element","myType"];PersonalizationsmarteditTriggerService.prototype.isNegation=function(e){return this.isContainer(e)&&e.operation.id==="NOT"};PersonalizationsmarteditTriggerService.prototype.isNegation.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isDefaultData=function(e){return e.isDefault};PersonalizationsmarteditTriggerService.prototype.isDefaultData.$inject=["form"];PersonalizationsmarteditTriggerService.prototype.isExpressionData=function(e){var t=this;return e.operation.id==="NOT"||e.nodes.some((function(e){return!t.isItem(e)}))};PersonalizationsmarteditTriggerService.prototype.isExpressionData.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.isSupportedTrigger=function(e){return this.supportedTypes.indexOf(e.type)>=0};PersonalizationsmarteditTriggerService.prototype.isSupportedTrigger.$inject=["trigger"];PersonalizationsmarteditTriggerService.prototype.isDefaultTrigger=function(e){return this.isElementOfType(e,this.DEFAULT_TRIGGER)};PersonalizationsmarteditTriggerService.prototype.isDefaultTrigger.$inject=["trigger"];PersonalizationsmarteditTriggerService.prototype.isSegmentTrigger=function(e){return this.isElementOfType(e,this.SEGMENT_TRIGGER)};PersonalizationsmarteditTriggerService.prototype.isSegmentTrigger.$inject=["trigger"];PersonalizationsmarteditTriggerService.prototype.isExpressionTrigger=function(e){return this.isElementOfType(e,this.EXPRESSION_TRIGGER)};PersonalizationsmarteditTriggerService.prototype.isExpressionTrigger.$inject=["trigger"];PersonalizationsmarteditTriggerService.prototype.isGroupExpressionData=function(e){return this.isElementOfType(e,this.GROUP_EXPRESSION)};PersonalizationsmarteditTriggerService.prototype.isGroupExpressionData.$inject=["expression"];PersonalizationsmarteditTriggerService.prototype.isSegmentExpressionData=function(e){return this.isElementOfType(e,this.SEGMENT_EXPRESSION)};PersonalizationsmarteditTriggerService.prototype.isSegmentExpressionData.$inject=["expression"];PersonalizationsmarteditTriggerService.prototype.isNegationExpressionData=function(e){return this.isElementOfType(e,this.NEGATION_EXPRESSION)};PersonalizationsmarteditTriggerService.prototype.isNegationExpressionData.$inject=["expression"];PersonalizationsmarteditTriggerService.prototype.buildSegmentsForTrigger=function(e){var t=this;return e.nodes.filter((function(e){return t.isItem(e)})).map((function(e){return e.selectedSegment}))};PersonalizationsmarteditTriggerService.prototype.buildSegmentsForTrigger.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.buildExpressionForTrigger=function(e){var t=this;if(this.isNegation(e)){var n=[];e.nodes.forEach((function(e){n.push(t.buildExpressionForTrigger(e))}));return{type:this.NEGATION_EXPRESSION,element:{type:this.GROUP_EXPRESSION,operator:"AND",elements:n}}}else if(this.isContainer(e)){var i=[];e.nodes.forEach((function(e){i.push(t.buildExpressionForTrigger(e))}));return{type:this.GROUP_EXPRESSION,operator:e.operation.id,elements:i}}else{return{type:this.SEGMENT_EXPRESSION,code:e.selectedSegment.code}}};PersonalizationsmarteditTriggerService.prototype.buildExpressionForTrigger.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.buildDefaultTrigger=function(){return{type:this.DEFAULT_TRIGGER}};PersonalizationsmarteditTriggerService.prototype.buildExpressionTrigger=function(e){return{type:this.EXPRESSION_TRIGGER,expression:this.buildExpressionForTrigger(e)}};PersonalizationsmarteditTriggerService.prototype.buildExpressionTrigger.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.buildSegmentTrigger=function(e){return{type:this.SEGMENT_TRIGGER,groupBy:e.operation.id,segments:this.buildSegmentsForTrigger(e)}};PersonalizationsmarteditTriggerService.prototype.buildSegmentTrigger.$inject=["element"];PersonalizationsmarteditTriggerService.prototype.mergeTriggers=function(e,t){var n=this;if(!i.isDefined(e)){return[t]}var o=e.findIndex((function(e){return e.type===t.type}));if(o>=0){t.code=e[o].code}var r=e.filter((function(e){return!n.isSupportedTrigger(e)}));if(!i.equals(t,{})){r.push(t)}return r};PersonalizationsmarteditTriggerService.prototype.mergeTriggers.$inject=["triggers","trigger"];PersonalizationsmarteditTriggerService.prototype.buildContainer=function(e){var t=this.actions.filter((function(t){return t.id===e}))[0];return{type:this.CONTAINER_TYPE,operation:t,nodes:[]}};PersonalizationsmarteditTriggerService.prototype.buildContainer.$inject=["actionId"];PersonalizationsmarteditTriggerService.prototype.buildItem=function(e){return{type:this.ITEM_TYPE,operation:"",selectedSegment:{code:e},nodes:[]}};PersonalizationsmarteditTriggerService.prototype.buildItem.$inject=["value"];PersonalizationsmarteditTriggerService.prototype.getBaseData=function(){var e=this.buildContainer("AND");return[e]};PersonalizationsmarteditTriggerService.prototype.buildExpressionFromTrigger=function(e){var t=this;var n;if(this.isGroupExpressionData(e)){n=this.buildContainer(e.operator);n.nodes=e.elements.map((function(e){return t.buildExpressionFromTrigger(e)}))}else if(this.isNegationExpressionData(e)){n=this.buildContainer("NOT");var i=this.buildExpressionFromTrigger(e.element);if(this.isGroupExpressionData(e.element)&&e.element.operator==="AND"){n.nodes=i.nodes}else{n.nodes.push(i)}}else if(this.isSegmentExpressionData(e)){n=this.buildItem(e.code)}return n};PersonalizationsmarteditTriggerService.prototype.buildExpressionFromTrigger.$inject=["expression"];PersonalizationsmarteditTriggerService.prototype.buildSegmentTriggerData=function(e){var t=this;var n=this.buildContainer(e.groupBy);e.segments.forEach((function(e){n.nodes.push(t.buildItem(e.code))}));return[n]};PersonalizationsmarteditTriggerService.prototype.buildSegmentTriggerData.$inject=["trigger"];PersonalizationsmarteditTriggerService.prototype.buildExpressionTriggerData=function(e){var t=this.buildExpressionFromTrigger(e.expression);return[t]};PersonalizationsmarteditTriggerService.prototype.buildExpressionTriggerData.$inject=["trigger"];PersonalizationsmarteditTriggerService=__decorate([o.SeInjectable()],PersonalizationsmarteditTriggerService);return PersonalizationsmarteditTriggerService}();var w=function(){CustomizationDataFactory.$inject=["personalizationsmarteditRestService","personalizationsmarteditUtils"];function CustomizationDataFactory(e,t){this.personalizationsmarteditRestService=e;this.personalizationsmarteditUtils=t;this.items=[];this.defaultFilter={};this.defaultDataArrayName="customizations"}CustomizationDataFactory.prototype.getCustomizations=function(e){var t=this;this.personalizationsmarteditRestService.getCustomizations(e).then((function(e){t.personalizationsmarteditUtils.uniqueArray(t.items,e[t.defaultDataArrayName]||[]);t.defaultSuccessCallbackFunction(e)}),(function(e){t.defaultErrorCallbackFunction(e)}))};CustomizationDataFactory.prototype.getCustomizations.$inject=["filter"];CustomizationDataFactory.prototype.updateData=function(e,t,n){e=e||{};this.defaultFilter=e.filter||this.defaultFilter;this.defaultDataArrayName=e.dataArrayName||this.defaultDataArrayName;if(t&&typeof t==="function"){this.defaultSuccessCallbackFunction=t}if(n&&typeof n==="function"){this.defaultErrorCallbackFunction=n}this.getCustomizations(this.defaultFilter)};CustomizationDataFactory.prototype.updateData.$inject=["params","successCallbackFunction","errorCallbackFunction"];CustomizationDataFactory.prototype.refreshData=function(){if(i.equals({},this.defaultFilter)){return}var e={};i.copy(this.defaultFilter,e);e.currentSize=this.items.length;e.currentPage=0;this.resetData();this.getCustomizations(e)};CustomizationDataFactory.prototype.resetData=function(){this.items.length=0};CustomizationDataFactory=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[f,Object])],CustomizationDataFactory);return CustomizationDataFactory}();var E=function(){PersonalizationsmarteditContextServiceReverseProxy.$inject=["personalizationsmarteditContextService","workflowService","pageInfoService"];function PersonalizationsmarteditContextServiceReverseProxy(e,t,n){this.personalizationsmarteditContextService=e;this.workflowService=t;this.pageInfoService=n}e=PersonalizationsmarteditContextServiceReverseProxy;PersonalizationsmarteditContextServiceReverseProxy.prototype.applySynchronization=function(){this.personalizationsmarteditContextService.applySynchronization()};PersonalizationsmarteditContextServiceReverseProxy.prototype.isCurrentPageActiveWorkflowRunning=function(){var t=this;return this.pageInfoService.getPageUUID().then((function(n){return t.workflowService.getActiveWorkflowForPageUuid(n).then((function(t){if(t==null){return false}return t.status===e.WORKFLOW_RUNNING_STATUS}))}))};var e;PersonalizationsmarteditContextServiceReverseProxy.WORKFLOW_RUNNING_STATUS="RUNNING";PersonalizationsmarteditContextServiceReverseProxy=e=__decorate([o.GatewayProxied("applySynchronization","isCurrentPageActiveWorkflowRunning"),o.SeInjectable(),__metadata("design:paramtypes",[v,Object,Object])],PersonalizationsmarteditContextServiceReverseProxy);return PersonalizationsmarteditContextServiceReverseProxy}();var P=function(){PersonalizationsmarteditPreviewService.$inject=["experienceService"];function PersonalizationsmarteditPreviewService(e){this.experienceService=e}PersonalizationsmarteditPreviewService.prototype.removePersonalizationDataFromPreview=function(){return this.updatePreviewTicketWithVariations([])};PersonalizationsmarteditPreviewService.prototype.updatePreviewTicketWithVariations=function(e){var t=this;return this.experienceService.getCurrentExperience().then((function(n){if(!n){return undefined}if(JSON.stringify(n.variations)===JSON.stringify(e)){return undefined}n.variations=e;return t.experienceService.setCurrentExperience(n).then((function(){return t.experienceService.updateExperience()}))}))};PersonalizationsmarteditPreviewService.prototype.updatePreviewTicketWithVariations.$inject=["variations"];PersonalizationsmarteditPreviewService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[o.IExperienceService])],PersonalizationsmarteditPreviewService);return PersonalizationsmarteditPreviewService}();var T=function(){PersonalizationsmarteditRulesAndPermissionsRegistrationService.$inject=["personalizationsmarteditContextService","personalizationsmarteditRestService","permissionService","catalogVersionPermissionService","pageService","$q"];function PersonalizationsmarteditRulesAndPermissionsRegistrationService(e,t,n,i,o,r){this.personalizationsmarteditContextService=e;this.personalizationsmarteditRestService=t;this.permissionService=n;this.catalogVersionPermissionService=i;this.pageService=o;this.$q=r}PersonalizationsmarteditRulesAndPermissionsRegistrationService.prototype.registerRules=function(){var e=this;this.permissionService.registerRule({names:["se.access.personalization"],verify:function(){return e.catalogVersionPermissionService.hasReadPermissionOnCurrent().then((function(){return e.personalizationsmarteditContextService.refreshExperienceData().then((function(){return e.personalizationsmarteditRestService.getCustomizations(e.getCustomizationFilter()).then((function(){return e.$q.resolve(true)}),(function(t){if(t.status===403){return e.$q.resolve(false)}else{return e.$q.resolve(true)}}))}))}))}});this.permissionService.registerRule({names:["se.access.personalization.page"],verify:function(){return e.pageService.getCurrentPageInfo().then((function(t){return e.$q.resolve(t.typeCode!=="EmailPage")}))}});this.permissionService.registerPermission({aliases:["se.personalization.open"],rules:["se.access.personalization"]});this.permissionService.registerPermission({aliases:["se.personalization.page"],rules:["se.access.personalization.page"]})};PersonalizationsmarteditRulesAndPermissionsRegistrationService.prototype.getCustomizationFilter=function(){return{currentPage:0,currentSize:1}};PersonalizationsmarteditRulesAndPermissionsRegistrationService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[v,f,o.IPermissionService,Object,Object,Function])],PersonalizationsmarteditRulesAndPermissionsRegistrationService);return PersonalizationsmarteditRulesAndPermissionsRegistrationService}();var A=function(){function PersonalizationsmarteditServicesModule(){}PersonalizationsmarteditServicesModule=__decorate([o.SeModule({imports:["loadConfigModule","smarteditServicesModule","yjqueryModule","permissionServiceModule","catalogVersionPermissionModule",r.PersonalizationsmarteditCommonsModule],providers:[f,v,h,E,P,T],initialize:["personalizationsmarteditRulesAndPermissionsRegistrationService",function(e){"ngInject";e.registerRules()}]})],PersonalizationsmarteditServicesModule);return PersonalizationsmarteditServicesModule}();var D=function(){function PersonalizationsmarteditDataFactory(){}PersonalizationsmarteditDataFactory=__decorate([o.SeModule({imports:[A],providers:[w]})],PersonalizationsmarteditDataFactory);return PersonalizationsmarteditDataFactory}();var O={provide:"CUSTOMIZATION_VARIATION_MANAGEMENT_TABS_CONSTANTS",useValue:{BASIC_INFO_TAB_NAME:"basicinfotab",BASIC_INFO_TAB_FORM_NAME:"form.basicinfotab",TARGET_GROUP_TAB_NAME:"targetgrptab",TARGET_GROUP_TAB_FORM_NAME:"form.targetgrptab"}};var R={provide:"CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS",useValue:{CONFIRM_OK:"confirmOk",CONFIRM_CANCEL:"confirmCancel",CONFIRM_NEXT:"confirmNext"}};var M={provide:"CUSTOMIZATION_VARIATION_MANAGEMENT_SEGMENTTRIGGER_GROUPBY",useValue:{CRITERIA_AND:"AND",CRITERIA_OR:"OR"}};var x={provide:"DATE_CONSTANTS",useValue:{ANGULAR_FORMAT:"short",MOMENT_FORMAT:"M/D/YY h:mm A",MOMENT_ISO:"YYYY-MM-DDTHH:mm:00ZZ",ISO:"yyyy-MM-ddTHH:mm:00Z"}};var N=function(){PersonalizationsmarteditManager.$inject=["modalService","MODAL_BUTTON_STYLES","CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS"];function PersonalizationsmarteditManager(e,t,n){var i=this;this.modalService=e;this.MODAL_BUTTON_STYLES=t;this.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS=n;this.openCreateCustomizationModal=function(){i.modalService.open({title:"personalization.modal.customizationvariationmanagement.title",templateInline:'<manage-customization-view data-modal-manager="modalController.modalManager"></manage-customization-view>',controller:["modalManager",function ctrl(e){"ngInject";this.modalManager=e}],buttons:[{id:i.CUSTOMIZATION_VARIATION_MANAGEMENT_BUTTONS.CONFIRM_CANCEL,label:"personalization.modal.customizationvariationmanagement.button.cancel",style:i.MODAL_BUTTON_STYLES.SECONDARY}],size:"lg sliderPanelParentModal"})};this.openEditCustomizationModal=function(e,t){i.modalService.open({title:"personalization.modal.customizationvariationmanagement.title",templateInline:'<manage-customization-view data-modal-manager="modalController.modalManager" data-customization-code="modalController.customizationCode" data-variation-code="modalController.variationCode"/>',controller:["modalManager",function ctrl(n){"ngInject";this.modalManager=n;this.customizationCode=e;this.variationCode=t}],buttons:[{id:"confirmCancel",label:"personalization.modal.customizationvariationmanagement.button.cancel",style:i.MODAL_BUTTON_STYLES.SECONDARY}],size:"lg sliderPanelParentModal"})}}PersonalizationsmarteditManager=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[o.IModalService,Object,Object])],PersonalizationsmarteditManager);return PersonalizationsmarteditManager}();var k=function(){function PersonalizationsmarteditManageCustomizationViewModule(){}PersonalizationsmarteditManageCustomizationViewModule=__decorate([o.SeModule({imports:["modalServiceModule","coretemplates","ui.select","confirmationModalServiceModule","functionsModule","sliderPanelModule","seConstantsModule","yjqueryModule",D,r.PersonalizationsmarteditCommonsModule],declarations:[_,y,b],providers:[I,N,O,R,M,x]})],PersonalizationsmarteditManageCustomizationViewModule);return PersonalizationsmarteditManageCustomizationViewModule}();var F=function(){MultipleTriggersComponent.$inject=["triggerTabService"];function MultipleTriggersComponent(e){this.triggerTabService=e}MultipleTriggersComponent.prototype.$onInit=function(){this.tabsList=this.triggerTabService.getTriggersTabs()};MultipleTriggersComponent=__decorate([o.SeComponent({templateUrl:"multipleTriggersComponentTemplate.html"}),__metadata("design:paramtypes",[S])],MultipleTriggersComponent);return MultipleTriggersComponent}();var z=function(){function PersonalizationsmarteditManagementModule(){}PersonalizationsmarteditManagementModule=__decorate([o.SeModule({imports:["smarteditServicesModule"],providers:[S],declarations:[F]})],PersonalizationsmarteditManagementModule);return PersonalizationsmarteditManagementModule}();var L=function(){VersionCheckerService.$inject=["personalizationsmarteditRestService","pageVersionSelectionService"];function VersionCheckerService(e,t){this.personalizationsmarteditRestService=e;this.pageVersionSelectionService=t}VersionCheckerService.prototype.setVersion=function(e){this.version=e};VersionCheckerService.prototype.setVersion.$inject=["version"];VersionCheckerService.prototype.provideTranlationKey=function(e){var t="personalization.se.cms.actionitem.page.version.rollback.confirmation";this.version=this.version||this.pageVersionSelectionService.getSelectedPageVersion();if(!!this.version){return this.personalizationsmarteditRestService.checkVersionConflict(this.version.uid).then((function(n){return n.result?e:t}),(function(){return e}))}else{return Promise.resolve(e)}};VersionCheckerService.prototype.provideTranlationKey.$inject=["key"];VersionCheckerService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[f,Object])],VersionCheckerService);return VersionCheckerService}();var V=function(){function VersioningModule(){}VersioningModule=__decorate([o.SeModule({imports:["smarteditServicesModule"],providers:[L]})],VersioningModule);return VersioningModule}();var $=function(){PersonalizationsmarteditCustomizeViewComponent.$inject=["$translate","customizationDataFactory","personalizationsmarteditContextService","personalizationsmarteditMessageHandler","personalizationsmarteditUtils","PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER"];function PersonalizationsmarteditCustomizeViewComponent(e,t,n,i,o,r){this.$translate=e;this.customizationDataFactory=t;this.personalizationsmarteditContextService=n;this.personalizationsmarteditMessageHandler=i;this.personalizationsmarteditUtils=o;this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER=r}PersonalizationsmarteditCustomizeViewComponent.prototype.$onInit=function(){this.personalizationsmarteditContextService.refreshExperienceData();this.moreCustomizationsRequestProcessing=false;this.customizationsList=this.customizationDataFactory.items;this.customizationDataFactory.resetData();this.pagination=new r.PaginationHelper({});this.pagination.reset();this.filters=this.personalizationsmarteditContextService.getCustomizeFiltersState();this.catalogFilter=this.filters.catalogFilter;this.pageFilter=this.filters.pageFilter;this.statusFilter=this.filters.statusFilter;this.nameFilter=this.filters.nameFilter};PersonalizationsmarteditCustomizeViewComponent.prototype.$onDestroy=function(){var e=this.personalizationsmarteditContextService.getCustomizeFiltersState();e.catalogFilter=this.catalogFilter;e.pageFilter=this.pageFilter;e.statusFilter=this.statusFilter;e.nameFilter=this.nameFilter;this.personalizationsmarteditContextService.setCustomizeFiltersState(e)};PersonalizationsmarteditCustomizeViewComponent.prototype.$onChanges=function(e){if(e.isMenuOpen&&!e.isMenuOpen.isFirstChange()&&e.isMenuOpen.currentValue){this.refreshList()}};PersonalizationsmarteditCustomizeViewComponent.prototype.$onChanges.$inject=["changes"];PersonalizationsmarteditCustomizeViewComponent.prototype.errorCallback=function(){this.personalizationsmarteditMessageHandler.sendError(this.$translate.instant("personalization.error.gettingcustomizations"));this.moreCustomizationsRequestProcessing=false};PersonalizationsmarteditCustomizeViewComponent.prototype.successCallback=function(e){this.pagination=new r.PaginationHelper(e.pagination);this.moreCustomizationsRequestProcessing=false};PersonalizationsmarteditCustomizeViewComponent.prototype.successCallback.$inject=["response"];PersonalizationsmarteditCustomizeViewComponent.prototype.getStatus=function(){var e=this;if(this.statusFilter===undefined){return this.personalizationsmarteditUtils.getStatusesMapping()[0]}return this.personalizationsmarteditUtils.getStatusesMapping().filter((function(t){return t.code===e.statusFilter}))[0]};PersonalizationsmarteditCustomizeViewComponent.prototype.getCustomizations=function(e){var t={filter:e,dataArrayName:"customizations"};this.customizationDataFactory.updateData(t,this.successCallback.bind(this),this.errorCallback.bind(this))};PersonalizationsmarteditCustomizeViewComponent.prototype.getCustomizations.$inject=["categoryFilter"];PersonalizationsmarteditCustomizeViewComponent.prototype.getCustomizationsFilterObject=function(){var e={currentSize:this.pagination.getCount(),currentPage:this.pagination.getPage()+1,name:this.nameFilter,statuses:this.getStatus().modelStatuses,catalogs:this.catalogFilter};if(this.pageFilter===this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER.ONLY_THIS_PAGE){e.pageId=this.personalizationsmarteditContextService.getSeData().pageId;e.pageCatalogId=(this.personalizationsmarteditContextService.getSeData().seExperienceData.pageContext||{}).catalogId}return e};PersonalizationsmarteditCustomizeViewComponent.prototype.refreshList=function(){if(this.moreCustomizationsRequestProcessing===false){this.moreCustomizationsRequestProcessing=true;this.pagination.reset();this.customizationDataFactory.resetData();this.getCustomizations(this.getCustomizationsFilterObject())}};PersonalizationsmarteditCustomizeViewComponent.prototype.catalogFilterChange=function(e){this.catalogFilter=e;this.refreshList()};PersonalizationsmarteditCustomizeViewComponent.prototype.catalogFilterChange.$inject=["itemId"];PersonalizationsmarteditCustomizeViewComponent.prototype.pageFilterChange=function(e){this.pageFilter=e;this.refreshList()};PersonalizationsmarteditCustomizeViewComponent.prototype.pageFilterChange.$inject=["itemId"];PersonalizationsmarteditCustomizeViewComponent.prototype.statusFilterChange=function(e){this.statusFilter=e;this.refreshList()};PersonalizationsmarteditCustomizeViewComponent.prototype.statusFilterChange.$inject=["itemId"];PersonalizationsmarteditCustomizeViewComponent.prototype.nameInputKeypress=function(e){if(e.which===13||this.nameFilter.length>2||this.nameFilter.length===0){this.refreshList()}};PersonalizationsmarteditCustomizeViewComponent.prototype.nameInputKeypress.$inject=["keyEvent"];PersonalizationsmarteditCustomizeViewComponent.prototype.addMoreCustomizationItems=function(){if(this.pagination.getPage()<this.pagination.getTotalPages()-1&&!this.moreCustomizationsRequestProcessing){this.moreCustomizationsRequestProcessing=true;this.getCustomizations(this.getCustomizationsFilterObject())}};PersonalizationsmarteditCustomizeViewComponent.prototype.getPage=function(){this.context.addMoreCustomizationItems()};PersonalizationsmarteditCustomizeViewComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditCustomizeViewTemplate.html",inputs:["isMenuOpen"]}),__metadata("design:paramtypes",[Function,w,v,r.PersonalizationsmarteditMessageHandler,r.PersonalizationsmarteditUtils,Object])],PersonalizationsmarteditCustomizeViewComponent);return PersonalizationsmarteditCustomizeViewComponent}();var U=function(){function PersonalizationsmarteditCustomizeViewServiceProxy(){}PersonalizationsmarteditCustomizeViewServiceProxy.prototype.getSourceContainersInfo=function(){"proxyFunction";return null};PersonalizationsmarteditCustomizeViewServiceProxy=__decorate([o.GatewayProxied("getSourceContainersInfo"),o.SeInjectable()],PersonalizationsmarteditCustomizeViewServiceProxy);return PersonalizationsmarteditCustomizeViewServiceProxy}();var j={provide:"PERSONALIZATION_CATALOG_FILTER",useValue:{ALL:"all",CURRENT:"current",PARENTS:"parents"}};var B=function(){CatalogFilterDropdownComponent.$inject=["$q","PERSONALIZATION_CATALOG_FILTER"];function CatalogFilterDropdownComponent(e,t){var n=this;this.$q=e;this.PERSONALIZATION_CATALOG_FILTER=t;this.fetchStrategy={fetchAll:function(){return n.$q.when(n.items)}};this.onChange=this.onChange.bind(this)}CatalogFilterDropdownComponent.prototype.$onInit=function(){this.items=[{id:this.PERSONALIZATION_CATALOG_FILTER.ALL,label:"personalization.filter.catalog.all"},{id:this.PERSONALIZATION_CATALOG_FILTER.CURRENT,label:"personalization.filter.catalog.current"},{id:this.PERSONALIZATION_CATALOG_FILTER.PARENTS,label:"personalization.filter.catalog.parents"}];this.selectedId=this.initialValue||this.items[1].id};CatalogFilterDropdownComponent.prototype.onChange=function(e){this.onSelectCallback({value:this.selectedId})};CatalogFilterDropdownComponent.prototype.onChange.$inject=["changes"];CatalogFilterDropdownComponent=__decorate([o.SeComponent({templateUrl:"pageFilterDropdownTemplate.html",inputs:["initialValue","onSelectCallback: &"]}),__metadata("design:paramtypes",[Function,Object])],CatalogFilterDropdownComponent);return CatalogFilterDropdownComponent}();var H={provide:"PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER",useValue:{ALL:"all",ONLY_THIS_PAGE:"onlythispage"}};var G=function(){PageFilterDropdownComponent.$inject=["$q","PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER"];function PageFilterDropdownComponent(e,t){var n=this;this.$q=e;this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER=t;this.fetchStrategy={fetchAll:function(){return n.$q.when(n.items)}};this.onChange=this.onChange.bind(this)}PageFilterDropdownComponent.prototype.$onInit=function(){this.items=[{id:this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER.ALL,label:"personalization.filter.page.all"},{id:this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER.ONLY_THIS_PAGE,label:"personalization.filter.page.onlythispage"}];this.selectedId=this.initialValue||this.items[1].id};PageFilterDropdownComponent.prototype.onChange=function(e){this.onSelectCallback({value:this.selectedId})};PageFilterDropdownComponent.prototype.onChange.$inject=["changes"];PageFilterDropdownComponent=__decorate([o.SeComponent({templateUrl:"pageFilterDropdownTemplate.html",inputs:["initialValue","onSelectCallback: &"]}),__metadata("design:paramtypes",[Function,Object])],PageFilterDropdownComponent);return PageFilterDropdownComponent}();var W=function(){StatusFilterDropdownComponent.$inject=["$q","personalizationsmarteditUtils"];function StatusFilterDropdownComponent(e,t){var n=this;this.$q=e;this.personalizationsmarteditUtils=t;this.fetchStrategy={fetchAll:function(){return n.$q.when(n.items)}};this.onChange=this.onChange.bind(this)}StatusFilterDropdownComponent.prototype.$onInit=function(){this.items=this.personalizationsmarteditUtils.getStatusesMapping().map((function(e){return{id:e.code,label:e.text,modelStatuses:e.modelStatuses}}));this.selectedId=this.initialValue||this.items[0].id};StatusFilterDropdownComponent.prototype.onChange=function(e){this.onSelectCallback({value:this.selectedId})};StatusFilterDropdownComponent.prototype.onChange.$inject=["changes"];StatusFilterDropdownComponent=__decorate([o.SeComponent({templateUrl:"pageFilterDropdownTemplate.html",inputs:["initialValue","onSelectCallback: &"]}),__metadata("design:paramtypes",[Function,r.PersonalizationsmarteditUtils])],StatusFilterDropdownComponent);return StatusFilterDropdownComponent}();var q=function(){function PersonalizationsmarteditCommonComponentsModule(){}PersonalizationsmarteditCommonComponentsModule=__decorate([o.SeModule({imports:["ySelectModule","l10nModule",r.PersonalizationsmarteditCommonsModule,A],declarations:[B,G,W],providers:[H,j]})],PersonalizationsmarteditCommonComponentsModule);return PersonalizationsmarteditCommonComponentsModule}();var K=function(){CustomizationsListComponent.$inject=["$q","$translate","personalizationsmarteditContextService","personalizationsmarteditRestService","personalizationsmarteditCommerceCustomizationService","personalizationsmarteditMessageHandler","personalizationsmarteditUtils","personalizationsmarteditDateUtils","personalizationsmarteditContextUtils","personalizationsmarteditPreviewService","personalizationsmarteditManager","personalizationsmarteditCustomizeViewServiceProxy","systemEventService","crossFrameEventService","SHOW_TOOLBAR_ITEM_CONTEXT","CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY","lodash"];function CustomizationsListComponent(e,t,n,i,o,r,a,s,c,l,d,p,u,m,g,h,v){this.$q=e;this.$translate=t;this.personalizationsmarteditContextService=n;this.personalizationsmarteditRestService=i;this.personalizationsmarteditCommerceCustomizationService=o;this.personalizationsmarteditMessageHandler=r;this.personalizationsmarteditUtils=a;this.personalizationsmarteditDateUtils=s;this.personalizationsmarteditContextUtils=c;this.personalizationsmarteditPreviewService=l;this.personalizationsmarteditManager=d;this.personalizationsmarteditCustomizeViewServiceProxy=p;this.systemEventService=u;this.crossFrameEventService=m;this.SHOW_TOOLBAR_ITEM_CONTEXT=g;this.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY=h;this.lodash=v}CustomizationsListComponent.prototype.$onInit=function(){var e=this;this.sourceContainersComponentsInfo={};this.systemEventService.subscribe("CUSTOMIZATIONS_MODIFIED",(function(){e.refreshCustomizeContext();return e.$q.when()}))};CustomizationsListComponent.prototype.initCustomization=function(e){e.collapsed=true;if((this.personalizationsmarteditContextService.getCustomize().selectedCustomization||{}).code===e.code){e.collapsed=false;this.updateCustomizationData(e)}this.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(e)};CustomizationsListComponent.prototype.initCustomization.$inject=["customization"];CustomizationsListComponent.prototype.editCustomizationAction=function(e){this.personalizationsmarteditContextUtils.clearCombinedViewContextAndReloadPreview(this.personalizationsmarteditPreviewService,this.personalizationsmarteditContextService);this.personalizationsmarteditManager.openEditCustomizationModal(e.code)};CustomizationsListComponent.prototype.editCustomizationAction.$inject=["customization"];CustomizationsListComponent.prototype.customizationRowClick=function(e,t){this.clearAllSubMenu();e.collapsed=!e.collapsed;if(!e.collapsed){this.updateCustomizationData(e)}if(t){this.customizationClick(e)}this.customizationsList.filter((function(t){return e.code!==t.code})).forEach((function(e){e.collapsed=true}))};CustomizationsListComponent.prototype.customizationRowClick.$inject=["customization","select"];CustomizationsListComponent.prototype.customizationClick=function(e){var t=this.personalizationsmarteditContextService.getCombinedView();var n=this.personalizationsmarteditContextService.getCustomize().selectedVariations;var i=this.getVisibleVariations(e);var o=this.personalizationsmarteditContextService.getCustomize();o.selectedCustomization=e;o.selectedVariations=i;this.personalizationsmarteditContextService.setCustomize(o);if(i.length>0){var r=this.personalizationsmarteditUtils.getVariationCodes(i).join(",");this.getAndSetComponentsForVariation(e.code,r,e.catalog,e.catalogVersion)}if(this.lodash.isObjectLike(n)&&!this.lodash.isArray(n)||t.enabled){this.updatePreviewTicket()}this.personalizationsmarteditContextUtils.clearCombinedViewContext(this.personalizationsmarteditContextService);this.crossFrameEventService.publish(this.SHOW_TOOLBAR_ITEM_CONTEXT,this.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY)};CustomizationsListComponent.prototype.customizationClick.$inject=["customization"];CustomizationsListComponent.prototype.getSelectedVariationClass=function(e){if(this.lodash.isEqual(e.code,(this.personalizationsmarteditContextService.getCustomize().selectedVariations||{}).code)){return"selectedVariation"}else{return""}};CustomizationsListComponent.prototype.getSelectedVariationClass.$inject=["variation"];CustomizationsListComponent.prototype.getSelectedCustomizationClass=function(e){if(this.lodash.isEqual(e.code,(this.personalizationsmarteditContextService.getCustomize().selectedCustomization||{}).code)&&this.lodash.isArray(this.personalizationsmarteditContextService.getCustomize().selectedVariations)){return"selectedCustomization"}else{return""}};CustomizationsListComponent.prototype.getSelectedCustomizationClass.$inject=["customization"];CustomizationsListComponent.prototype.variationClick=function(e,t){var n=this.personalizationsmarteditContextService.getCustomize();n.selectedCustomization=e;n.selectedVariations=t;this.personalizationsmarteditContextService.setCustomize(n);this.personalizationsmarteditContextUtils.clearCombinedViewContext(this.personalizationsmarteditContextService);this.getAndSetComponentsForVariation(e.code,t.code,e.catalog,e.catalogVersion);this.updatePreviewTicket(e.code,[t]);this.crossFrameEventService.publish(this.SHOW_TOOLBAR_ITEM_CONTEXT,this.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY)};CustomizationsListComponent.prototype.variationClick.$inject=["customization","variation"];CustomizationsListComponent.prototype.hasCommerceActions=function(e){return this.personalizationsmarteditUtils.hasCommerceActions(e)};CustomizationsListComponent.prototype.hasCommerceActions.$inject=["variation"];CustomizationsListComponent.prototype.getCommerceCustomizationTooltip=function(e){return this.personalizationsmarteditUtils.getCommerceCustomizationTooltipHTML(e)};CustomizationsListComponent.prototype.getCommerceCustomizationTooltip.$inject=["variation"];CustomizationsListComponent.prototype.getActivityStateForCustomization=function(e){return this.personalizationsmarteditUtils.getActivityStateForCustomization(e)};CustomizationsListComponent.prototype.getActivityStateForCustomization.$inject=["customization"];CustomizationsListComponent.prototype.getActivityStateForVariation=function(e,t){return this.personalizationsmarteditUtils.getActivityStateForVariation(e,t)};CustomizationsListComponent.prototype.getActivityStateForVariation.$inject=["customization","variation"];CustomizationsListComponent.prototype.clearAllSubMenu=function(){for(var e=0,t=this.customizationsList;e<t.length;e++){var n=t[e];n.subMenu=false}};CustomizationsListComponent.prototype.getEnablementTextForCustomization=function(e){return this.personalizationsmarteditUtils.getEnablementTextForCustomization(e,"personalization.toolbar.pagecustomizations")};CustomizationsListComponent.prototype.getEnablementTextForCustomization.$inject=["customization"];CustomizationsListComponent.prototype.getEnablementTextForVariation=function(e){return this.personalizationsmarteditUtils.getEnablementTextForVariation(e,"personalization.toolbar.pagecustomizations")};CustomizationsListComponent.prototype.getEnablementTextForVariation.$inject=["variation"];CustomizationsListComponent.prototype.isEnabled=function(e){return this.personalizationsmarteditUtils.isPersonalizationItemEnabled(e)};CustomizationsListComponent.prototype.isEnabled.$inject=["item"];CustomizationsListComponent.prototype.getDatesForCustomization=function(e){var t="";var n="";var i="";if(e.enabledStartDate||e.enabledEndDate){n=this.personalizationsmarteditDateUtils.formatDateWithMessage(e.enabledStartDate);i=this.personalizationsmarteditDateUtils.formatDateWithMessage(e.enabledEndDate);if(!e.enabledStartDate){n=" ..."}if(!e.enabledEndDate){i="... "}t+=" ("+n+" - "+i+") "}return t};CustomizationsListComponent.prototype.getDatesForCustomization.$inject=["customization"];CustomizationsListComponent.prototype.customizationSubMenuAction=function(e){if(!e.subMenu){this.clearAllSubMenu()}e.subMenu=!e.subMenu};CustomizationsListComponent.prototype.customizationSubMenuAction.$inject=["customization"];CustomizationsListComponent.prototype.isCustomizationFromCurrentCatalog=function(e){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(e,this.personalizationsmarteditContextService.getSeData())};CustomizationsListComponent.prototype.isCustomizationFromCurrentCatalog.$inject=["customization"];CustomizationsListComponent.prototype.statusNotDeleted=function(e){return this.personalizationsmarteditUtils.isItemVisible(e)};CustomizationsListComponent.prototype.statusNotDeleted.$inject=["variation"];CustomizationsListComponent.prototype.matchActionForVariation=function(e,t){return e.variationCode===t.code&&e.actionCatalog===t.catalog&&e.actionCatalogVersion===t.catalogVersion};CustomizationsListComponent.prototype.matchActionForVariation.$inject=["action","variation"];CustomizationsListComponent.prototype.numberOfAffectedComponentsForActions=function(e){var t=this;var n=0;e.forEach((function(e){n+=parseInt(t.sourceContainersComponentsInfo[e.containerId],10)||0}));return n};CustomizationsListComponent.prototype.numberOfAffectedComponentsForActions.$inject=["actionsForVariation"];CustomizationsListComponent.prototype.initSourceContainersComponentsInfo=function(){var e=this;var t=this.$q.defer();this.personalizationsmarteditCustomizeViewServiceProxy.getSourceContainersInfo().then((function(n){e.sourceContainersComponentsInfo=n;t.resolve()}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.gettingnumberofaffectedcomponentsforvariation"));t.reject()}));return t.promise};CustomizationsListComponent.prototype.paginatedGetAndSetNumberOfAffectedComponentsForVariations=function(e,t){var n=this;this.personalizationsmarteditRestService.getCxCmsActionsOnPageForCustomization(e,t).then((function(i){e.variations.forEach((function(e){var o=i.actions.filter((function(t){return n.matchActionForVariation(t,e)}));e.numberOfAffectedComponents=t===0?0:e.numberOfAffectedComponents;e.numberOfAffectedComponents+=n.numberOfAffectedComponentsForActions(o)}));var o=t+1;if(o<i.pagination.totalPages){n.paginatedGetAndSetNumberOfAffectedComponentsForVariations(e,o)}}),(function(){n.personalizationsmarteditMessageHandler.sendError(n.$translate.instant("personalization.error.gettingnumberofaffectedcomponentsforvariation"))}))};CustomizationsListComponent.prototype.paginatedGetAndSetNumberOfAffectedComponentsForVariations.$inject=["customization","currentPage"];CustomizationsListComponent.prototype.getAndSetNumberOfAffectedComponentsForVariations=function(e){var t=this;var n=this.personalizationsmarteditContextService.getCustomize();var i=(n.selectedComponents||[]).every((function(e){return t.sourceContainersComponentsInfo[e]!==undefined}));if(!i||n.selectedComponents===null||this.lodash.isEqual(this.sourceContainersComponentsInfo,{})){this.initSourceContainersComponentsInfo().finally((function(){t.paginatedGetAndSetNumberOfAffectedComponentsForVariations(e,0)}))}else if(i){this.paginatedGetAndSetNumberOfAffectedComponentsForVariations(e,0)}};CustomizationsListComponent.prototype.getAndSetNumberOfAffectedComponentsForVariations.$inject=["customization"];CustomizationsListComponent.prototype.getNumberOfAffectedComponentsForCorrespondingVariation=function(e,t){var n=e.filter((function(e){return e.code===t}));return(n[0]||{}).numberOfAffectedComponents};CustomizationsListComponent.prototype.getNumberOfAffectedComponentsForCorrespondingVariation.$inject=["variationsArray","variationCode"];CustomizationsListComponent.prototype.updateCustomizationData=function(e){var t=this;this.personalizationsmarteditRestService.getVariationsForCustomization(e.code,e).then((function(n){n.variations.forEach((function(n){n.numberOfAffectedComponents=t.getNumberOfAffectedComponentsForCorrespondingVariation(e.variations,n.code)}));e.variations=n.variations||[];e.variations.forEach((function(e){e.numberOfCommerceActions=t.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCount(e);e.commerceCustomizations=t.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCountMap(e)}));t.getAndSetNumberOfAffectedComponentsForVariations(e)}),(function(){t.personalizationsmarteditMessageHandler.sendError(t.$translate.instant("personalization.error.gettingcustomization"))}))};CustomizationsListComponent.prototype.updateCustomizationData.$inject=["customization"];CustomizationsListComponent.prototype.getVisibleVariations=function(e){return this.personalizationsmarteditUtils.getVisibleItems(e.variations)};CustomizationsListComponent.prototype.getVisibleVariations.$inject=["customization"];CustomizationsListComponent.prototype.getAndSetComponentsForVariation=function(e,t,n,i){var o=this;this.personalizationsmarteditRestService.getComponenentsIdsForVariation(e,t,n,i).then((function(e){var t=o.personalizationsmarteditContextService.getCustomize();t.selectedComponents=e.components;o.personalizationsmarteditContextService.setCustomize(t)}),(function(){o.personalizationsmarteditMessageHandler.sendError(o.$translate.instant("personalization.error.gettingcomponentsforvariation"))}))};CustomizationsListComponent.prototype.getAndSetComponentsForVariation.$inject=["customizationId","variationId","catalog","catalogVersion"];CustomizationsListComponent.prototype.updatePreviewTicket=function(e,t){var n=this.personalizationsmarteditUtils.getVariationKey(e,t);this.personalizationsmarteditPreviewService.updatePreviewTicketWithVariations(n)};CustomizationsListComponent.prototype.updatePreviewTicket.$inject=["customizationId","variationArray"];CustomizationsListComponent.prototype.refreshCustomizeContext=function(){var e=this;var t=this.lodash.cloneDeep(this.personalizationsmarteditContextService.getCustomize());if(t.selectedCustomization){this.personalizationsmarteditRestService.getCustomization(t.selectedCustomization).then((function(n){t.selectedCustomization=n;if(t.selectedVariations&&!e.lodash.isArray(t.selectedVariations)){n.variations.filter((function(e){return t.selectedVariations.code===e.code})).forEach((function(n){t.selectedVariations=n;if(!e.personalizationsmarteditUtils.isItemVisible(n)){t.selectedCustomization=null;t.selectedVariations=null;e.personalizationsmarteditPreviewService.removePersonalizationDataFromPreview()}}))}e.personalizationsmarteditContextService.setCustomize(t)}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.gettingcustomization"))}))}};CustomizationsListComponent=__decorate([o.SeComponent({templateUrl:"customizationsListTemplate.html",inputs:["customizationsList","requestProcessing"]}),__metadata("design:paramtypes",[Object,Function,v,f,Object,r.PersonalizationsmarteditMessageHandler,r.PersonalizationsmarteditUtils,r.PersonalizationsmarteditDateUtils,r.PersonalizationsmarteditContextUtils,P,Object,U,Object,o.CrossFrameEventService,Object,Object,Function])],CustomizationsListComponent);return CustomizationsListComponent}();var Y=function(){function PersonalizationsmarteditCustomizeViewModule(){}PersonalizationsmarteditCustomizeViewModule=__decorate([o.SeModule({imports:["seConstantsModule","personalizationsmarteditManageCustomizationViewModule","smarteditCommonsModule",q,r.PersonalizationsmarteditCommonsModule,A],providers:[U,w],declarations:[$,K]})],PersonalizationsmarteditCustomizeViewModule);return PersonalizationsmarteditCustomizeViewModule}();var ContextMenuDeleteActionControllerFactory=function(e){var t=function(){PersonalizationsmarteditContextMenuDeleteActionController.$inject=["$q","modalManager","personalizationsmarteditRestService"];function PersonalizationsmarteditContextMenuDeleteActionController(t,n,i){var o=this;this.$q=t;this.modalManager=n;this.personalizationsmarteditRestService=i;this.catalog=e.catalog;this.catalogVersion=e.catalogVersion;this.selectedCustomizationCode=e.selectedCustomizationCode;this.selectedVariationCode=e.selectedVariationCode;this.actionId=e.actionId;this.buttonHandlerFn=function(e){var t=o.$q.defer();if(e==="confirmOk"){var n={catalog:o.catalog,catalogVersion:o.catalogVersion};return o.personalizationsmarteditRestService.deleteAction(o.selectedCustomizationCode,o.selectedVariationCode,o.actionId,n)}return t.reject()};this.modalManager.setButtonHandler(this.buttonHandlerFn)}return PersonalizationsmarteditContextMenuDeleteActionController}();return t};window.__smartedit__.addDecoratorPayload("Component","ComponentDropdownItemPrinterComponent",{selector:"component-item-printer",template:'\n        <div class="pe-customize-component__se-select-choices-layout">\n            <div class="pe-customize-component__se-select-choices-col1">\n                <div class="perso-wrap-ellipsis" title="{{ data.item.name }}">{{ data.item.name }}</div>\n            </div>\n            <div class="pe-customize-component__se-select-choices-col2">\n                <div class="perso-wrap-ellipsis" title="{{ data.item.typeCode }}">{{ data.item.typeCode }}</div>\n            </div>\n        </div>\n    '});var X=function(){function ComponentDropdownItemPrinterComponent(e){this.data=e}ComponentDropdownItemPrinterComponent=__decorate([s.Component({selector:"component-item-printer",template:'\n        <div class="pe-customize-component__se-select-choices-layout">\n            <div class="pe-customize-component__se-select-choices-col1">\n                <div class="perso-wrap-ellipsis" title="{{ data.item.name }}">{{ data.item.name }}</div>\n            </div>\n            <div class="pe-customize-component__se-select-choices-col2">\n                <div class="perso-wrap-ellipsis" title="{{ data.item.typeCode }}">{{ data.item.typeCode }}</div>\n            </div>\n        </div>\n    '}),__param(0,s.Inject(o.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],ComponentDropdownItemPrinterComponent);return ComponentDropdownItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","PersonalizationsmarteditContextMenuAddEditActionComponent",{template:'<div class="perso-customize-component"><div class="perso-customize-component__title-layout"><div *ngIf="letterIndicatorForElement" class="perso-customize-component__title-layout__letter-block"><span [ngClass]="colorIndicatorForElement">{{letterIndicatorForElement}}</span></div><div class="perso-customize-component__title-layout__cust-name perso-wrap-ellipsis" title="{{selectedCustomization.name}}">{{selectedCustomization.name}}</div><div class="perso-customize-component__title-layout__target-group-name perso-wrap-ellipsis" title="{{selectedVariation.name}}">{{\'> \'+ selectedVariation.name}}</div></div><dl class="perso-customize-component__data-list"><label class="fd-form__label" [translate]="\'personalization.modal.addeditaction.selected.mastercomponent.title\'"></label><dd>{{componentType}}</dd></dl><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.actions.title\'"></label><fd-inline-help [inlineHelpIconStyle]="{\'margin-left\': \'10px\', \'padding-top\': \'1px\'}" [inlineHelpContentStyle]="{\'box-shadow\': \'0 0 4px 0 #d9d9d9\', \'border\': \'1px solid #d9d9d9\', \'border-radius\': \'4px\', \'color\': \'#32363a\', \'font-size\': \'14px\', \'max-width\': \'200px\', \'white-space\': \'normal\'}" [placement]="\'top-start\'"><span [translate]="\'personalization.modal.addeditaction.selected.actions.help.label\'"></span></fd-inline-help><se-select class="perso-customize-component__select2-container" [placeholder]="\'personalization.modal.addeditaction.dropdown.placeholder\'" [(model)]="actionSelected" [searchEnabled]="false" [showRemoveButton]="false" [fetchStrategy]="actionFetchStrategy"></se-select><div class="perso-customize-component__select-group-label-layout"><div *ngIf="actionSelected == \'use\'"><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.component.title\'"></label></div><has-multicatalog *ngIf="actionSelected == \'use\'"><div class="perso-customize-component__filter-layout"><label class="fd-form__label perso-customize-component__filter-label" [translate]="\'personalization.commons.filter.label\'"></label><catalog-version-filter-dropdown class="pe-customize-component__catalog-version-filter-dropdown" (onSelectCallback)="catalogVersionFilterChange($event)"></catalog-version-filter-dropdown></div></has-multicatalog></div><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'use\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componentlist.placeholder\'" [(model)]="idComponentSelected" [onSelect]="componentSelectedEvent" [searchEnabled]="true" [showRemoveButton]="false" [fetchStrategy]="componentsFetchStrategy" [itemComponent]="itemComponent"></se-select><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'create\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componenttype.placeholder\'" [(model)]="newComponentSelected" [onSelect]="newComponentTypeSelectedEvent" [searchEnabled]="false" [fetchStrategy]="componentTypesFetchStrategy"></se-select></div>'});var Z=function(){function PersonalizationsmarteditContextMenuAddEditActionComponent(e,t,n,i,o,r,a,c,l,d){var p=this;this.modalManager=e;this.translateService=t;this.personalizationsmarteditRestService=n;this.personalizationsmarteditMessageHandler=i;this.personalizationsmarteditContextService=o;this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=r;this.MODAL_BUTTON_ACTIONS=a;this.MODAL_BUTTON_STYLES=c;this.slotRestrictionsService=l;this.editorModalService=d;this.actionSelected="";this.idComponentSelected="";this.selectedCustomization={};this.selectedVariation={};this.newComponentSelected="";this.componentSelected={};this.actionCreated=new s.EventEmitter;this.itemComponent=X;this.modalButtons=[{id:"cancel",label:"personalization.modal.addeditaction.button.cancel",style:this.MODAL_BUTTON_STYLES.SECONDARY,action:this.MODAL_BUTTON_ACTIONS.DISMISS},{id:"submit",label:"personalization.modal.addeditaction.button.submit",action:this.MODAL_BUTTON_ACTIONS.CLOSE,disabledFn:function(){return!Boolean(p.idComponentSelected)||Boolean(p.componentUuid)&&p.componentUuid===p.idComponentSelected},callback:function(){p.idComponentSelected=undefined;var e=p.componentSelected.catalogVersion.substring(0,p.componentSelected.catalogVersion.indexOf("/"));var t={catalog:p.selectedCustomization.catalog,catalogVersion:p.selectedCustomization.catalogVersion};var n={slotCatalog:p.slotCatalog,oldComponentCatalog:p.componentCatalog};Object.assign(n,t);if(p.editEnabled){p.editAction(p.selectedCustomization.code,p.selectedVariation.code,p.actionId,p.componentSelected.uid,e,t)}else{p.personalizationsmarteditRestService.replaceComponentWithContainer(p.defaultComponentId,p.slotId,n).then((function(n){p.addActionToContainer(p.componentSelected.uid,e,n.sourceId,p.selectedCustomization.code,p.selectedVariation.code,t)}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.replacingcomponent"))}))}return p.actionCreated}}];this.initNewComponentTypes=function(){return p.slotRestrictionsService.getSlotRestrictions(p.slotId).then((function(e){return p.personalizationsmarteditRestService.getNewComponentTypes().then((function(t){p.newComponentTypes=t.componentTypes.filter((function(t){return e.indexOf(t.code)>-1})).map((function(e){e.id=e.code;return e}));return p.newComponentTypes}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.gettingcomponentstypes"))}))}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.gettingslotrestrictions"))}))};this.getAndSetComponentById=function(e){p.personalizationsmarteditRestService.getComponent(e).then((function(e){p.idComponentSelected=e.uuid}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.gettingcomponents"))}))};this.getAndSetColorAndLetter=function(){var e=p.personalizationsmarteditContextService.getCombinedView();if(e.enabled){(e.selectedItems||[]).forEach((function(e,t){var n=p.selectedCustomizationCode===e.customization.code;n=n&&p.selectedVariationCode===e.variation.code;var i=t%Object.keys(p.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;if(n){p.letterIndicatorForElement=String.fromCharCode("a".charCodeAt(0)+i).toUpperCase();p.colorIndicatorForElement=p.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[i].listClass}}))}};this.componentSelectedEvent=function(e){if(!e){return}p.componentSelected=e;p.idComponentSelected=e.uuid};this.newComponentTypeSelectedEvent=function(e){if(!e){return}var t={smarteditComponentType:e.code,catalogVersionUuid:p.personalizationsmarteditContextService.getSeData().seExperienceData.pageContext.catalogVersionUuid};p.editorModalService.open(t).then((function(e){p.actionSelected=p.actions.filter((function(e){return e.id==="use"}))[0].id;p.idComponentSelected=e.uuid;p.componentSelected=e}),(function(){p.newComponentSelected=""}))};this.editAction=function(e,t,n,i,o,r){p.personalizationsmarteditRestService.editAction(e,t,n,i,o,r).then((function(){p.personalizationsmarteditMessageHandler.sendSuccess(p.translateService.instant("personalization.info.updatingaction"));p.actionCreated.emit()}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.updatingaction"));p.actionCreated.emit()}))};this.addActionToContainer=function(e,t,n,i,o,r){p.personalizationsmarteditRestService.addActionToContainer(e,t,n,i,o,r).then((function(){p.personalizationsmarteditMessageHandler.sendSuccess(p.translateService.instant("personalization.info.creatingaction"));p.actionCreated.emit(n)}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.creatingaction"));p.actionCreated.emit()}))};this.catalogVersionFilterChange=function(e){if(!e){return}var t=e.split("/");p.catalogFilter=t[0];p.catalogVersionFilter=t[1]};this.components=[];this.modalManager.addButton(this.modalButtons[0]);this.modalManager.addButton(this.modalButtons[1]);this.actionFetchStrategy={fetchAll:function(){return Promise.resolve(p.actions)}};this.componentsFetchStrategy={fetchPage:function(e,t,n){return p.componentTypesFetchStrategy.fetchAll().then((function(t){var i=t.map((function(e){return e.code})).join(",");var o={currentPage:n,mask:e,pageSize:30,sort:"name",catalog:p.catalogFilter,catalogVersion:p.catalogVersionFilter,typeCodes:i};return p.personalizationsmarteditRestService.getComponents(o).then((function(e){var t=e.response.filter((function(e){return!e.restricted}));return Promise.resolve({results:t,pagination:e.pagination})}),(function(){p.personalizationsmarteditMessageHandler.sendError(p.translateService.instant("personalization.error.gettingcomponents"));return Promise.reject()}))}))},fetchEntity:function(e){return p.personalizationsmarteditRestService.getComponent(e).then((function(e){return Promise.resolve({id:e.uuid,name:e.name,typeCode:e.typeCode})}))}};this.componentTypesFetchStrategy={fetchAll:function(){if(p.newComponentTypes){return Promise.resolve(p.newComponentTypes)}else{return p.initNewComponentTypes()}}}}Object.defineProperty(PersonalizationsmarteditContextMenuAddEditActionComponent.prototype,"modalData",{get:function(){return this.modalManager.getModalData()},enumerable:false,configurable:true});PersonalizationsmarteditContextMenuAddEditActionComponent.prototype.ngOnInit=function(){this.init()};PersonalizationsmarteditContextMenuAddEditActionComponent.prototype.init=function(){var e=this;this.actions=[{id:"create",name:this.translateService.instant("personalization.modal.addeditaction.createnewcomponent")},{id:"use",name:this.translateService.instant("personalization.modal.addeditaction.usecomponent")}];this.modalData.subscribe((function(t){e.colorIndicatorForElement=t.colorIndicatorForElement;e.slotId=t.slotId;e.actionId=t.actionId;e.componentUuid=t.componentUuid;e.defaultComponentId=t.componentId;e.editEnabled=t.editEnabled;e.slotCatalog=t.slotCatalog;e.componentCatalog=t.componentCatalog;e.selectedCustomizationCode=t.selectedCustomizationCode;e.selectedVariationCode=t.selectedVariationCode;e.componentType=t.componentType;e.personalizationsmarteditRestService.getCustomization({code:e.selectedCustomizationCode}).then((function(t){e.selectedCustomization=t;e.selectedVariation=t.variations.filter((function(t){return t.code===e.selectedVariationCode}))[0]}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.translateService.instant("personalization.error.gettingcustomization"))}));if(e.editEnabled){e.getAndSetComponentById(e.componentUuid);e.actionSelected=e.actions.filter((function(e){return e.id==="use"}))[0].id}else{e.actionSelected=""}}));this.initNewComponentTypes();this.getAndSetColorAndLetter()};PersonalizationsmarteditContextMenuAddEditActionComponent=__decorate([s.Component({template:'<div class="perso-customize-component"><div class="perso-customize-component__title-layout"><div *ngIf="letterIndicatorForElement" class="perso-customize-component__title-layout__letter-block"><span [ngClass]="colorIndicatorForElement">{{letterIndicatorForElement}}</span></div><div class="perso-customize-component__title-layout__cust-name perso-wrap-ellipsis" title="{{selectedCustomization.name}}">{{selectedCustomization.name}}</div><div class="perso-customize-component__title-layout__target-group-name perso-wrap-ellipsis" title="{{selectedVariation.name}}">{{\'> \'+ selectedVariation.name}}</div></div><dl class="perso-customize-component__data-list"><label class="fd-form__label" [translate]="\'personalization.modal.addeditaction.selected.mastercomponent.title\'"></label><dd>{{componentType}}</dd></dl><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.actions.title\'"></label><fd-inline-help [inlineHelpIconStyle]="{\'margin-left\': \'10px\', \'padding-top\': \'1px\'}" [inlineHelpContentStyle]="{\'box-shadow\': \'0 0 4px 0 #d9d9d9\', \'border\': \'1px solid #d9d9d9\', \'border-radius\': \'4px\', \'color\': \'#32363a\', \'font-size\': \'14px\', \'max-width\': \'200px\', \'white-space\': \'normal\'}" [placement]="\'top-start\'"><span [translate]="\'personalization.modal.addeditaction.selected.actions.help.label\'"></span></fd-inline-help><se-select class="perso-customize-component__select2-container" [placeholder]="\'personalization.modal.addeditaction.dropdown.placeholder\'" [(model)]="actionSelected" [searchEnabled]="false" [showRemoveButton]="false" [fetchStrategy]="actionFetchStrategy"></se-select><div class="perso-customize-component__select-group-label-layout"><div *ngIf="actionSelected == \'use\'"><label class="fd-form__label se-control-label required" [translate]="\'personalization.modal.addeditaction.selected.component.title\'"></label></div><has-multicatalog *ngIf="actionSelected == \'use\'"><div class="perso-customize-component__filter-layout"><label class="fd-form__label perso-customize-component__filter-label" [translate]="\'personalization.commons.filter.label\'"></label><catalog-version-filter-dropdown class="pe-customize-component__catalog-version-filter-dropdown" (onSelectCallback)="catalogVersionFilterChange($event)"></catalog-version-filter-dropdown></div></has-multicatalog></div><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'use\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componentlist.placeholder\'" [(model)]="idComponentSelected" [onSelect]="componentSelectedEvent" [searchEnabled]="true" [showRemoveButton]="false" [fetchStrategy]="componentsFetchStrategy" [itemComponent]="itemComponent"></se-select><se-select class="perso-customize-component__select2-container" *ngIf="actionSelected == \'create\'" [placeholder]="\'personalization.modal.addeditaction.dropdown.componenttype.placeholder\'" [(model)]="newComponentSelected" [onSelect]="newComponentTypeSelectedEvent" [searchEnabled]="false" [fetchStrategy]="componentTypesFetchStrategy"></se-select></div>'}),__param(0,s.Inject(o.FundamentalModalManagerService)),__param(1,s.Inject(c.TranslateService)),__param(2,s.Inject(f)),__param(3,s.Inject(r.PersonalizationsmarteditMessageHandler)),__param(4,s.Inject(v)),__param(5,s.Inject("PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING")),__param(6,s.Inject("MODAL_BUTTON_ACTIONS")),__param(7,s.Inject("MODAL_BUTTON_STYLES")),__param(8,s.Inject(l.ISlotRestrictionsService)),__param(9,s.Inject("editorModalService")),__metadata("design:paramtypes",[o.FundamentalModalManagerService,c.TranslateService,f,r.PersonalizationsmarteditMessageHandler,v,Object,Object,Object,l.ISlotRestrictionsService,Object])],PersonalizationsmarteditContextMenuAddEditActionComponent);return PersonalizationsmarteditContextMenuAddEditActionComponent}();var Q=function(){PersonalizationsmarteditContextMenuServiceProxy.$inject=["modalService","renderService","editorModalService","personalizationsmarteditContextService","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","lodash","$translate","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES"];function PersonalizationsmarteditContextMenuServiceProxy(e,t,n,i,o,r,a,s,c,l){this.modalService=e;this.renderService=t;this.editorModalService=n;this.personalizationsmarteditContextService=i;this.personalizationsmarteditRestService=o;this.personalizationsmarteditMessageHandler=r;this.lodash=a;this.$translate=s;this.MODAL_BUTTON_ACTIONS=c;this.MODAL_BUTTON_STYLES=l;this.confirmModalButtons=[{id:"confirmCancel",label:"personalization.modal.deleteaction.button.cancel",style:this.MODAL_BUTTON_STYLES.SECONDARY,action:this.MODAL_BUTTON_ACTIONS.DISMISS},{id:"confirmOk",label:"personalization.modal.deleteaction.button.ok",action:this.MODAL_BUTTON_ACTIONS.CLOSE}]}PersonalizationsmarteditContextMenuServiceProxy.prototype.openDeleteAction=function(e){var t=this;this.modalService.open({size:"md",title:"personalization.modal.deleteaction.title",templateInline:'<div id="confirmationModalDescription">{{ "'+"personalization.modal.deleteaction.content"+'" | translate }}</div>',controller:ContextMenuDeleteActionControllerFactory(e),cssClasses:"yFrontModal",buttons:this.confirmModalButtons}).then((function(){if(t.personalizationsmarteditContextService.getCombinedView().enabled){t.personalizationsmarteditRestService.getActions(e.selectedCustomizationCode,e.selectedVariationCode,e).then((function(n){var i=t.personalizationsmarteditContextService.getCombinedView();if(i.customize.selectedComponents){i.customize.selectedComponents.splice(i.customize.selectedComponents.indexOf(e.containerSourceId),1)}t.lodash.forEach(i.selectedItems,(function(t){if(t.customization.code===e.selectedCustomizationCode&&t.variation.code===e.selectedVariationCode){t.variation.actions=n.actions}}));t.personalizationsmarteditContextService.setCombinedView(i)}),(function(){t.personalizationsmarteditMessageHandler.sendError(t.$translate.instant("personalization.error.gettingactions"))}))}else{var n=t.personalizationsmarteditContextService.getCustomize();n.selectedComponents.splice(n.selectedComponents.indexOf(e.containerSourceId),1);t.personalizationsmarteditContextService.setCustomize(n)}t.renderService.renderSlots(e.slotsToRefresh)}))};PersonalizationsmarteditContextMenuServiceProxy.prototype.openDeleteAction.$inject=["config"];PersonalizationsmarteditContextMenuServiceProxy.prototype.openAddAction=function(e){var t=this;this.modalService.open({component:Z,data:e,templateConfig:{title:"personalization.modal.addaction.title",isDismissButtonVisible:true},config:{focusTrapped:false,modalPanelClass:"yPersonalizationContextModal"}}).afterClosed.subscribe((function(n){if(t.personalizationsmarteditContextService.getCombinedView().enabled){var i=t.personalizationsmarteditContextService.getCombinedView();i.customize.selectedComponents.push(n);t.personalizationsmarteditContextService.setCombinedView(i)}else{var o=t.personalizationsmarteditContextService.getCustomize();o.selectedComponents.push(n);t.personalizationsmarteditContextService.setCustomize(o)}t.renderService.renderSlots(e.slotsToRefresh)}))};PersonalizationsmarteditContextMenuServiceProxy.prototype.openAddAction.$inject=["config"];PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditAction=function(e){var t=this;e.editEnabled=true;this.modalService.open({component:Z,data:e,templateConfig:{title:"personalization.modal.editaction.title",isDismissButtonVisible:true},config:{focusTrapped:false,modalPanelClass:"yPersonalizationContextModal"}}).afterClosed.subscribe((function(n){t.renderService.renderSlots(e.slotsToRefresh)}))};PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditAction.$inject=["config"];PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditComponentAction=function(e){this.editorModalService.open(e)};PersonalizationsmarteditContextMenuServiceProxy.prototype.openEditComponentAction.$inject=["config"];PersonalizationsmarteditContextMenuServiceProxy=__decorate([o.GatewayProxied("openDeleteAction","openAddAction","openEditAction","openEditComponentAction"),o.SeInjectable(),__metadata("design:paramtypes",[Object,Object,Object,v,f,r.PersonalizationsmarteditMessageHandler,Function,Function,Object,Object])],PersonalizationsmarteditContextMenuServiceProxy);return PersonalizationsmarteditContextMenuServiceProxy}();var J=function(){function LegacyPersonalizationsmarteditContextMenuModule(){}LegacyPersonalizationsmarteditContextMenuModule=__decorate([o.SeModule({imports:[A,r.PersonalizationsmarteditCommonsModule,q,"ui.select","genericEditorModule","cmsSmarteditServicesModule","smarteditRootModule","renderServiceModule","modalServiceModule"],providers:[Q]})],LegacyPersonalizationsmarteditContextMenuModule);return LegacyPersonalizationsmarteditContextMenuModule}();var ee=function(){PersonalizationsmarteditCombinedViewConfigureController.$inject=["$translate","customizationDataFactory","personalizationsmarteditContextService","personalizationsmarteditMessageHandler","personalizationsmarteditUtils","componentMenuService","PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","$scope","$q","lodash","modalManager"];function PersonalizationsmarteditCombinedViewConfigureController(e,t,n,i,o,a,s,c,l,d,p,u){var m=this;this.$translate=e;this.customizationDataFactory=t;this.personalizationsmarteditContextService=n;this.personalizationsmarteditMessageHandler=i;this.personalizationsmarteditUtils=o;this.componentMenuService=a;this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER=s;this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=c;this.$scope=l;this.$q=d;this.lodash=p;this.modalManager=u;this.getCustomizations=function(e){var t={filter:e,dataArrayName:"customizations"};m.customizationDataFactory.updateData(t,m.successCallback,m.errorCallback)};this.addMoreItems=function(){if(m.pagination.getPage()<m.pagination.getTotalPages()-1&&!m.moreCustomizationsRequestProcessing){m.moreCustomizationsRequestProcessing=true;m.getCustomizations(m.getCustomizationsFilterObject())}};this.selectElement=function(e){if(!e){return}m.$scope.selectedItems.push(e);m.componentMenuService.getValidContentCatalogVersions().then((function(e){var t=e.map((function(e){return e.id}));m.$scope.selectedItems.sort((function(e,n){var i=e.customization.catalog+"/"+e.customization.catalogVersion;var o=n.customization.catalog+"/"+n.customization.catalogVersion;if(i===o){return e.customization.rank-n.customization.rank}return t.indexOf(o)-t.indexOf(i)}))}));m.$scope.selectedElement=null;m.searchInputKeypress(null,"")};this.initUiSelect=function(e){e.isActive=function(){return false}};this.removeSelectedItem=function(e){m.$scope.selectedItems.splice(m.$scope.selectedItems.indexOf(e),1);m.$scope.selectedElement=null;m.searchInputKeypress(null,"")};this.getClassForElement=function(e){return m.personalizationsmarteditUtils.getClassForElement(e)};this.getLetterForElement=function(e){return m.personalizationsmarteditUtils.getLetterForElement(e)};this.isItemInSelectDisabled=function(e){return m.$scope.selectedItems.find((function(t){return t.customization.code===e.customization.code}))};this.isItemSelected=function(e){return m.$scope.selectedItems.find((function(t){return t.customization.code===e.customization.code&&t.variation.code===e.variation.code}))};this.searchInputKeypress=function(e,t){if(e&&[37,38,39,40].indexOf(e.which)>-1){return}m.pagination.reset();m.customizationFilter.name=t;m.customizationDataFactory.resetData();m.addMoreItems()};this.buttonHandlerFn=function(e){var t=m.$q.defer();if(e==="confirmOk"){var n=m.personalizationsmarteditContextService.getCombinedView();n.selectedItems=m.$scope.selectedItems;if(n.enabled&&n.customize.selectedVariations!==null&&m.isCombinedViewContextPersRemoved(n)){n.customize.selectedCustomization=null;n.customize.selectedVariations=null;n.customize.selectedComponents=null}m.personalizationsmarteditContextService.setCombinedView(n);return t.resolve()}return t.reject()};this.pageFilterChange=function(e){m.customizationPageFilter=e;m.pagination.reset();m.customizationDataFactory.resetData();m.addMoreItems()};this.catalogFilterChange=function(e){m.$scope.catalogFilter=e;m.pagination.reset();m.customizationDataFactory.resetData();m.addMoreItems()};this.isItemFromCurrentCatalog=function(e){return m.personalizationsmarteditUtils.isItemFromCurrentCatalog(e,m.personalizationsmarteditContextService.getSeData())};this.getAndSetCatalogVersionNameL10N=function(e){return m.personalizationsmarteditUtils.getAndSetCatalogVersionNameL10N(e)};this.successCallback=function(e){m.pagination=new r.PaginationHelper(e.pagination);m.$scope.selectionArray.length=0;m.customizationDataFactory.items.forEach((function(e){e.variations.filter((function(e){return m.personalizationsmarteditUtils.isItemVisible(e)})).forEach((function(t){m.$scope.selectionArray.push({customization:{code:e.code,name:e.name,rank:e.rank,catalog:e.catalog,catalogVersion:e.catalogVersion},variation:{code:t.code,name:t.name,catalog:t.catalog,catalogVersion:t.catalogVersion}})}))}));m.moreCustomizationsRequestProcessing=false};this.errorCallback=function(){m.personalizationsmarteditMessageHandler.sendError(m.$translate.instant("personalization.error.gettingcustomizations"));m.moreCustomizationsRequestProcessing=false};this.init=function(){m.$scope.selectionArray=[];m.customizationDataFactory.resetData();m.pagination=new r.PaginationHelper({});m.pagination.reset();m.combinedView=m.personalizationsmarteditContextService.getCombinedView();m.$scope.selectedItems=[];m.$scope.selectedItems=m.lodash.cloneDeep(m.combinedView.selectedItems||[]);m.$scope.selectedElement={};m.moreCustomizationsRequestProcessing=false;m.customizationFilter={name:""};m.modalManager.setButtonHandler(m.buttonHandlerFn);m.$scope.$watch("selectedItems",(function(e,t){m.modalManager.disableButton("confirmOk");if(e!==t){var n=m.personalizationsmarteditContextService.getCombinedView();var i=(n.selectedItems||[]).length===0&&m.$scope.selectedItems.length===0;i=i||m.lodash.isEqual(n.selectedItems,m.$scope.selectedItems);if(!i){m.modalManager.enableButton("confirmOk")}}}),true)}}PersonalizationsmarteditCombinedViewConfigureController.prototype.getDefaultStatus=function(){var e=this;return this.personalizationsmarteditUtils.getStatusesMapping().filter((function(t){return t.code===e.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL}))[0]};PersonalizationsmarteditCombinedViewConfigureController.prototype.getCustomizationsFilterObject=function(){var e={currentSize:this.pagination.getCount(),currentPage:this.pagination.getPage()+1,name:this.customizationFilter.name,statuses:this.getDefaultStatus().modelStatuses,catalogs:this.$scope.catalogFilter};if(this.customizationPageFilter===this.PERSONALIZATION_CUSTOMIZATION_PAGE_FILTER.ONLY_THIS_PAGE){e.pageId=this.personalizationsmarteditContextService.getSeData().pageId;e.pageCatalogId=this.personalizationsmarteditContextService.getSeData().seExperienceData.pageContext.catalogId}return e};PersonalizationsmarteditCombinedViewConfigureController.prototype.isCombinedViewContextPersRemoved=function(e){return e.selectedItems.filter((function(t){return t.customization.code===e.customize.selectedCustomization.code&&t.variation.code===e.customize.selectedVariations.code})).length===0};PersonalizationsmarteditCombinedViewConfigureController.prototype.isCombinedViewContextPersRemoved.$inject=["combinedView"];PersonalizationsmarteditCombinedViewConfigureController=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[Function,w,v,r.PersonalizationsmarteditMessageHandler,r.PersonalizationsmarteditUtils,d.ComponentMenuService,Object,Object,Object,Function,Function,Object])],PersonalizationsmarteditCombinedViewConfigureController);return PersonalizationsmarteditCombinedViewConfigureController}();var te=function(){PersonalizationsmarteditCombinedViewCommonsService.$inject=["$q","personalizationsmarteditContextUtils","personalizationsmarteditContextService","personalizationsmarteditPreviewService","personalizationsmarteditUtils","personalizationsmarteditRestService","modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES"];function PersonalizationsmarteditCombinedViewCommonsService(e,t,n,i,o,r,a,s,c){var l=this;this.$q=e;this.personalizationsmarteditContextUtils=t;this.personalizationsmarteditContextService=n;this.personalizationsmarteditPreviewService=i;this.personalizationsmarteditUtils=o;this.personalizationsmarteditRestService=r;this.modalService=a;this.MODAL_BUTTON_ACTIONS=s;this.MODAL_BUTTON_STYLES=c;this.openManagerAction=function(){l.modalService.open({title:"personalization.modal.combinedview.title",templateUrl:"personalizationsmarteditCombinedViewConfigureTemplate.html",controller:ee,buttons:[{id:"confirmCancel",label:"personalization.modal.combinedview.button.cancel",style:l.MODAL_BUTTON_STYLES.SECONDARY,action:l.MODAL_BUTTON_ACTIONS.DISMISS},{id:"confirmOk",label:"personalization.modal.combinedview.button.ok",action:l.MODAL_BUTTON_ACTIONS.CLOSE}]}).then((function(){l.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(l.personalizationsmarteditContextService);var e=l.personalizationsmarteditContextService.getCombinedView();e.enabled=e.selectedItems&&e.selectedItems.length>0;l.personalizationsmarteditContextService.setCombinedView(e);l.updatePreview(l.getVariationsForPreviewTicket())}),(function(){}))}}PersonalizationsmarteditCombinedViewCommonsService.prototype.updatePreview=function(e){this.personalizationsmarteditPreviewService.updatePreviewTicketWithVariations(e);this.updateActionsOnSelectedVariations()};PersonalizationsmarteditCombinedViewCommonsService.prototype.updatePreview.$inject=["previewTicketVariations"];PersonalizationsmarteditCombinedViewCommonsService.prototype.getVariationsForPreviewTicket=function(){var e=[];var t=this.personalizationsmarteditContextService.getCombinedView();(t.selectedItems||[]).forEach((function(t){e.push({customizationCode:t.customization.code,variationCode:t.variation.code,catalog:t.variation.catalog,catalogVersion:t.variation.catalogVersion})}));return e};PersonalizationsmarteditCombinedViewCommonsService.prototype.combinedViewEnabledEvent=function(e){var t=this.personalizationsmarteditContextService.getCombinedView();t.enabled=e;this.personalizationsmarteditContextService.setCombinedView(t);var n=this.personalizationsmarteditContextService.getCustomize();n.selectedCustomization=null;n.selectedVariations=null;n.selectedComponents=null;this.personalizationsmarteditContextService.setCustomize(n);if(e){this.updatePreview(this.getVariationsForPreviewTicket())}else{this.updatePreview([])}};PersonalizationsmarteditCombinedViewCommonsService.prototype.combinedViewEnabledEvent.$inject=["isEnabled"];PersonalizationsmarteditCombinedViewCommonsService.prototype.isItemFromCurrentCatalog=function(e){return this.personalizationsmarteditUtils.isItemFromCurrentCatalog(e,this.personalizationsmarteditContextService.getSeData())};PersonalizationsmarteditCombinedViewCommonsService.prototype.isItemFromCurrentCatalog.$inject=["item"];PersonalizationsmarteditCombinedViewCommonsService.prototype.updateActionsOnSelectedVariations=function(){var e=this;var t=this.personalizationsmarteditContextService.getCombinedView();var n=[];(t.selectedItems||[]).forEach((function(t){n.push(e.personalizationsmarteditRestService.getActions(t.customization.code,t.variation.code,t.variation).then((function(e){t.variation.actions=e.actions})))}));this.$q.all(n).then((function(){e.personalizationsmarteditContextService.setCombinedView(t)}))};PersonalizationsmarteditCombinedViewCommonsService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[Function,r.PersonalizationsmarteditContextUtils,v,P,r.PersonalizationsmarteditUtils,f,o.IModalService,Object,Object])],PersonalizationsmarteditCombinedViewCommonsService);return PersonalizationsmarteditCombinedViewCommonsService}();var ne=function(){PersonalizationsmarteditCombinedViewMenuComponent.$inject=["$translate","personalizationsmarteditContextService","personalizationsmarteditMessageHandler","personalizationsmarteditRestService","personalizationsmarteditContextUtils","personalizationsmarteditUtils","personalizationsmarteditPreviewService","personalizationsmarteditCombinedViewCommonsService","crossFrameEventService","permissionService","SHOW_TOOLBAR_ITEM_CONTEXT","COMBINED_VIEW_TOOLBAR_ITEM_KEY"];function PersonalizationsmarteditCombinedViewMenuComponent(e,t,n,i,o,r,a,s,c,l,d,p){this.$translate=e;this.personalizationsmarteditContextService=t;this.personalizationsmarteditMessageHandler=n;this.personalizationsmarteditRestService=i;this.personalizationsmarteditContextUtils=o;this.personalizationsmarteditUtils=r;this.personalizationsmarteditPreviewService=a;this.personalizationsmarteditCombinedViewCommonsService=s;this.crossFrameEventService=c;this.permissionService=l;this.SHOW_TOOLBAR_ITEM_CONTEXT=d;this.COMBINED_VIEW_TOOLBAR_ITEM_KEY=p}PersonalizationsmarteditCombinedViewMenuComponent.prototype.$onInit=function(){this.combinedView=this.personalizationsmarteditContextService.getCombinedView();this.selectedItems=this.combinedView.selectedItems||[];this.isCombinedViewConfigured=this.selectedItems.length!==0};PersonalizationsmarteditCombinedViewMenuComponent.prototype.combinedViewClick=function(){this.personalizationsmarteditContextUtils.clearCustomizeContextAndReloadPreview(this.personalizationsmarteditPreviewService,this.personalizationsmarteditContextService);this.personalizationsmarteditCombinedViewCommonsService.openManagerAction()};PersonalizationsmarteditCombinedViewMenuComponent.prototype.getAndSetComponentsForElement=function(e,t,n,i){var o=this;this.personalizationsmarteditRestService.getComponenentsIdsForVariation(e,t,n,i).then((function(e){var t=o.personalizationsmarteditContextService.getCombinedView();t.customize.selectedComponents=e.components;o.personalizationsmarteditContextService.setCombinedView(t)}),(function(){o.personalizationsmarteditMessageHandler.sendError(o.$translate.instant("personalization.error.gettingcomponentsforvariation"))}))};PersonalizationsmarteditCombinedViewMenuComponent.prototype.getAndSetComponentsForElement.$inject=["customizationId","variationId","catalog","catalogVersion"];PersonalizationsmarteditCombinedViewMenuComponent.prototype.itemClick=function(e){var t=this;var n=this.personalizationsmarteditContextService.getCombinedView();if(!n.enabled){return}this.selectedItems.forEach((function(e){e.highlighted=false}));e.highlighted=true;n.customize.selectedCustomization=e.customization;n.customize.selectedVariations=e.variation;this.personalizationsmarteditContextService.setCombinedView(n);this.permissionService.isPermitted([{names:["se.edit.page"]}]).then((function(n){if(n){t.getAndSetComponentsForElement(e.customization.code,e.variation.code,e.customization.catalog,e.customization.catalogVersion)}}));this.personalizationsmarteditCombinedViewCommonsService.updatePreview(this.personalizationsmarteditUtils.getVariationKey(e.customization.code,[e.variation]));this.crossFrameEventService.publish(this.SHOW_TOOLBAR_ITEM_CONTEXT,this.COMBINED_VIEW_TOOLBAR_ITEM_KEY)};PersonalizationsmarteditCombinedViewMenuComponent.prototype.itemClick.$inject=["item"];PersonalizationsmarteditCombinedViewMenuComponent.prototype.getClassForElement=function(e){return this.personalizationsmarteditUtils.getClassForElement(e)};PersonalizationsmarteditCombinedViewMenuComponent.prototype.getClassForElement.$inject=["index"];PersonalizationsmarteditCombinedViewMenuComponent.prototype.getLetterForElement=function(e){return this.personalizationsmarteditUtils.getLetterForElement(e)};PersonalizationsmarteditCombinedViewMenuComponent.prototype.getLetterForElement.$inject=["index"];PersonalizationsmarteditCombinedViewMenuComponent.prototype.isItemFromCurrentCatalog=function(e){return this.personalizationsmarteditCombinedViewCommonsService.isItemFromCurrentCatalog(e)};PersonalizationsmarteditCombinedViewMenuComponent.prototype.isItemFromCurrentCatalog.$inject=["item"];PersonalizationsmarteditCombinedViewMenuComponent.prototype.clearAllCombinedViewClick=function(){this.selectedItems=[];this.combinedView.selectedItems=[];this.combinedView.enabled=false;this.personalizationsmarteditContextService.setCombinedView(this.combinedView);this.personalizationsmarteditCombinedViewCommonsService.combinedViewEnabledEvent(this.combinedView.enabled)};PersonalizationsmarteditCombinedViewMenuComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditCombinedViewMenuTemplate.html",inputs:["isMenuOpen"]}),__metadata("design:paramtypes",[Function,v,r.PersonalizationsmarteditMessageHandler,f,r.PersonalizationsmarteditContextUtils,r.PersonalizationsmarteditUtils,P,te,o.CrossFrameEventService,o.IPermissionService,Object,Object])],PersonalizationsmarteditCombinedViewMenuComponent);return PersonalizationsmarteditCombinedViewMenuComponent}();var ie=function(){function PersonalizationsmarteditCombinedViewModule(){}PersonalizationsmarteditCombinedViewModule=__decorate([o.SeModule({imports:["seConstantsModule","personalizationsmarteditManageCustomizationViewModule","smarteditCommonsModule","modalServiceModule",q,r.PersonalizationsmarteditCommonsModule,A,Y],providers:[te],declarations:[ne]})],PersonalizationsmarteditCombinedViewModule);return PersonalizationsmarteditCombinedViewModule}();var oe=function(){PersonalizationsmarteditCustomizeToolbarContextComponent.$inject=["$scope","personalizationsmarteditContextService","personalizationsmarteditContextUtils","personalizationsmarteditPreviewService","crossFrameEventService","SHOW_TOOLBAR_ITEM_CONTEXT","HIDE_TOOLBAR_ITEM_CONTEXT","CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY"];function PersonalizationsmarteditCustomizeToolbarContextComponent(e,t,n,i,o,r,a,s){this.$scope=e;this.personalizationsmarteditContextService=t;this.personalizationsmarteditContextUtils=n;this.personalizationsmarteditPreviewService=i;this.crossFrameEventService=o;this.SHOW_TOOLBAR_ITEM_CONTEXT=r;this.HIDE_TOOLBAR_ITEM_CONTEXT=a;this.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY=s}PersonalizationsmarteditCustomizeToolbarContextComponent.prototype.$onInit=function(){var e=this;this.selectedCustomization=i.copy(this.personalizationsmarteditContextService.getCustomize().selectedCustomization);this.selectedVariations=i.copy(this.personalizationsmarteditContextService.getCustomize().selectedVariations);this.visible=false;if(this.selectedCustomization){this.title=this.personalizationsmarteditContextService.getCustomize().selectedCustomization.name;this.visible=true;if(!i.isArray(this.selectedVariations)){this.subtitle=this.selectedVariations.name}}this.$scope.$watch((function(){return e.personalizationsmarteditContextService.getCustomize().selectedCustomization}),(function(t,n){if(t&&t!==n){e.title=t.name;e.visible=true;e.crossFrameEventService.publish(e.SHOW_TOOLBAR_ITEM_CONTEXT,e.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY)}else if(!t){e.visible=false;e.crossFrameEventService.publish(e.HIDE_TOOLBAR_ITEM_CONTEXT,e.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY)}}));this.$scope.$watch((function(){return e.personalizationsmarteditContextService.getCustomize().selectedVariations}),(function(t,n){if(t&&t!==n){e.subtitle=t.name}}))};PersonalizationsmarteditCustomizeToolbarContextComponent.prototype.clear=function(){this.personalizationsmarteditContextUtils.clearCustomizeContextAndReloadPreview(this.personalizationsmarteditPreviewService,this.personalizationsmarteditContextService);this.crossFrameEventService.publish(this.HIDE_TOOLBAR_ITEM_CONTEXT,this.CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY)};PersonalizationsmarteditCustomizeToolbarContextComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditToolbarContextTemplate.html"}),__metadata("design:paramtypes",[Object,v,r.PersonalizationsmarteditContextUtils,P,Object,Object,Object,Object])],PersonalizationsmarteditCustomizeToolbarContextComponent);return PersonalizationsmarteditCustomizeToolbarContextComponent}();var re=function(){PersonalizationsmarteditCombinedViewToolbarContextComponent.$inject=["$scope","personalizationsmarteditCombinedViewCommonsService","personalizationsmarteditContextService","personalizationsmarteditContextUtils","crossFrameEventService","SHOW_TOOLBAR_ITEM_CONTEXT","HIDE_TOOLBAR_ITEM_CONTEXT","COMBINED_VIEW_TOOLBAR_ITEM_KEY"];function PersonalizationsmarteditCombinedViewToolbarContextComponent(e,t,n,i,o,r,a,s){this.$scope=e;this.personalizationsmarteditCombinedViewCommonsService=t;this.personalizationsmarteditContextService=n;this.personalizationsmarteditContextUtils=i;this.crossFrameEventService=o;this.SHOW_TOOLBAR_ITEM_CONTEXT=r;this.HIDE_TOOLBAR_ITEM_CONTEXT=a;this.COMBINED_VIEW_TOOLBAR_ITEM_KEY=s}PersonalizationsmarteditCombinedViewToolbarContextComponent.prototype.$onInit=function(){var e=this;this.selectedCustomization=i.copy(this.personalizationsmarteditContextService.getCombinedView().customize.selectedCustomization);this.visible=false;if(this.selectedCustomization){this.title=this.personalizationsmarteditContextService.getCombinedView().customize.selectedCustomization.name;this.subtitle=this.personalizationsmarteditContextService.getCombinedView().customize.selectedVariations.name;this.visible=true}this.$scope.$watch((function(){return e.personalizationsmarteditContextService.getCombinedView().customize.selectedCustomization}),(function(t,n){if(t&&t!==n){e.title=t.name;e.subtitle=e.personalizationsmarteditContextService.getCombinedView().customize.selectedVariations.name;e.visible=true;e.crossFrameEventService.publish(e.SHOW_TOOLBAR_ITEM_CONTEXT,e.COMBINED_VIEW_TOOLBAR_ITEM_KEY)}else if(!t){e.visible=false;e.crossFrameEventService.publish(e.HIDE_TOOLBAR_ITEM_CONTEXT,e.COMBINED_VIEW_TOOLBAR_ITEM_KEY)}}));this.$scope.$watch((function(){return e.personalizationsmarteditContextService.getCombinedView().enabled}),(function(t,n){if(t===false&&t!==n){e.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(e.personalizationsmarteditContextService)}}))};PersonalizationsmarteditCombinedViewToolbarContextComponent.prototype.clear=function(){this.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(this.personalizationsmarteditContextService);var e=this.personalizationsmarteditContextService.getCombinedView();var t=[];(e.selectedItems||[]).forEach((function(e){t.push({customizationCode:e.customization.code,variationCode:e.variation.code,catalog:e.variation.catalog,catalogVersion:e.variation.catalogVersion})}));this.personalizationsmarteditCombinedViewCommonsService.updatePreview(t);this.crossFrameEventService.publish(this.HIDE_TOOLBAR_ITEM_CONTEXT,this.COMBINED_VIEW_TOOLBAR_ITEM_KEY)};PersonalizationsmarteditCombinedViewToolbarContextComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditToolbarContextTemplate.html"}),__metadata("design:paramtypes",[Object,te,v,r.PersonalizationsmarteditContextUtils,Object,Object,Object,Object])],PersonalizationsmarteditCombinedViewToolbarContextComponent);return PersonalizationsmarteditCombinedViewToolbarContextComponent}();var ae=function(){PersonalizationsmarteditManageCustomizationViewMenuComponent.$inject=["personalizationsmarteditContextService","personalizationsmarteditContextUtils","personalizationsmarteditPreviewService","personalizationsmarteditManager","personalizationsmarteditManagerView"];function PersonalizationsmarteditManageCustomizationViewMenuComponent(e,t,n,i,o){this.personalizationsmarteditContextService=e;this.personalizationsmarteditContextUtils=t;this.personalizationsmarteditPreviewService=n;this.personalizationsmarteditManager=i;this.personalizationsmarteditManagerView=o}PersonalizationsmarteditManageCustomizationViewMenuComponent.prototype.createCustomizationClick=function(){this.personalizationsmarteditManager.openCreateCustomizationModal()};PersonalizationsmarteditManageCustomizationViewMenuComponent.prototype.managerViewClick=function(){this.personalizationsmarteditContextUtils.clearCombinedViewCustomizeContext(this.personalizationsmarteditContextService);this.personalizationsmarteditContextUtils.clearCustomizeContextAndReloadPreview(this.personalizationsmarteditPreviewService,this.personalizationsmarteditContextService);this.personalizationsmarteditContextUtils.clearCombinedViewContextAndReloadPreview(this.personalizationsmarteditPreviewService,this.personalizationsmarteditContextService);this.personalizationsmarteditManagerView.openManagerAction()};PersonalizationsmarteditManageCustomizationViewMenuComponent=__decorate([o.SeComponent({templateUrl:"manageCustomizationViewMenuTemplate.html"}),__metadata("design:paramtypes",[v,r.PersonalizationsmarteditContextUtils,P,Object,Object])],PersonalizationsmarteditManageCustomizationViewMenuComponent);return PersonalizationsmarteditManageCustomizationViewMenuComponent}();var se=function(){function PersonalizationsmarteditToolbarContextModule(){}PersonalizationsmarteditToolbarContextModule=__decorate([o.SeModule({imports:[r.PersonalizationsmarteditCommonsModule],declarations:[oe,re,ae]})],PersonalizationsmarteditToolbarContextModule);return PersonalizationsmarteditToolbarContextModule}();var ce=function(){PersonalizationsmarteditSegmentExpressionAsHtmlComponent.$inject=["personalizationsmarteditTriggerService"];function PersonalizationsmarteditSegmentExpressionAsHtmlComponent(e){this.personalizationsmarteditTriggerService=e;this._segmentExpression={};this._operators=["AND","OR","NOT"];this._emptyGroup="[]";this._emptyGroupAndOperators=this.operators.concat(this.emptyGroup)}Object.defineProperty(PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype,"segmentExpression",{get:function(){return this._segmentExpression},set:function(e){this._segmentExpression=e},enumerable:false,configurable:true});Object.defineProperty(PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype,"operators",{get:function(){return this._operators},enumerable:false,configurable:true});Object.defineProperty(PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype,"emptyGroup",{get:function(){return this._emptyGroup},enumerable:false,configurable:true});Object.defineProperty(PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype,"emptyGroupAndOperators",{get:function(){return this._emptyGroupAndOperators},enumerable:false,configurable:true});PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype.getExpressionAsArray=function(){if(i.isDefined(this.segmentExpression)&&!i.isDefined(this.segmentExpression.operation)){this.segmentExpression=this.personalizationsmarteditTriggerService.buildData(this.segmentExpression)[0]}return this.personalizationsmarteditTriggerService.getExpressionAsString(this.segmentExpression).split(" ")};PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype.getLocalizationKeyForOperator=function(e){return"personalization.modal.customizationvariationmanagement.targetgrouptab.expression."+e.toLowerCase()};PersonalizationsmarteditSegmentExpressionAsHtmlComponent.prototype.getLocalizationKeyForOperator.$inject=["operator"];PersonalizationsmarteditSegmentExpressionAsHtmlComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditSegmentExpressionAsHtmlTemplate.html",inputs:["segmentExpression"]}),__metadata("design:paramtypes",[Object])],PersonalizationsmarteditSegmentExpressionAsHtmlComponent);return PersonalizationsmarteditSegmentExpressionAsHtmlComponent}();var le=function(){PersonalizationsmarteditSegmentViewComponent.$inject=["personalizationsmarteditRestService","personalizationsmarteditMessageHandler","personalizationsmarteditTriggerService","personalizationsmarteditUtils","$timeout","$translate","confirmationModalService","triggerTabService"];function PersonalizationsmarteditSegmentViewComponent(e,t,n,i,o,a,s,c){var l=this;this.personalizationsmarteditRestService=e;this.personalizationsmarteditMessageHandler=t;this.personalizationsmarteditTriggerService=n;this.personalizationsmarteditUtils=i;this.$timeout=o;this.$translate=a;this.confirmationModalService=s;this.triggerTabService=c;this.actions=this.personalizationsmarteditTriggerService.actions;this.segments=[];this.segmentPagination=new r.PaginationHelper({});this.treeOptions={dragStart:function(){l.scrollZoneVisible=l.isScrollZoneVisible()},dropped:function(e){l.scrollZoneVisible=false;l.removeDropzoneItem(e.dest.nodesScope.$modelValue);l.$timeout((function(){l.fixEmptyContainer(l.expression)}),0)},dragMove:function(e){l.highlightedContainer=e.dest.nodesScope.$nodeScope.$modelValue.$$hashKey;if(l.isScrollZoneVisible()!==l.scrollZoneVisible){l.scrollZoneVisible=l.isScrollZoneVisible()}else if(Math.abs(l.elementToScrollHeight-l.elementToScroll.get(0).scrollHeight)>10){l.elementToScrollHeight=l.elementToScroll.get(0).scrollHeight;l.scrollZoneVisible=false}}};this.moreSegmentRequestProcessing=false;this.dropzoneItem={type:"dropzone"};this.initExpression=[{type:"container",operation:this.actions[0],nodes:[this.dropzoneItem]}];this.segmentFilter={code:""};this.elementToDuplicate=null;this._elementToScrollHeight=0;this.segmentPagination.reset()}Object.defineProperty(PersonalizationsmarteditSegmentViewComponent.prototype,"elementToScrollHeight",{get:function(){return this._elementToScrollHeight},set:function(e){this._elementToScrollHeight=e},enumerable:false,configurable:true});PersonalizationsmarteditSegmentViewComponent.prototype.$onInit=function(){var e=this.triggerTabService.getTriggerDataState();this.triggers=this.triggers||(e.selectedVariation||{}).triggers;this.expression=this.expression||e.expression;if(this.triggers&&this.triggers.length>0){this.expression=this.personalizationsmarteditTriggerService.buildData(this.triggers)}else{this.expression=i.copy(this.initExpression)}this.fixEmptyContainer(this.expression);e.expression=this.expression;this.elementToScroll=i.element(".se-slider-panel__body")};PersonalizationsmarteditSegmentViewComponent.prototype.getElementToScroll=function(){return this.elementToScroll};PersonalizationsmarteditSegmentViewComponent.prototype.removeItem=function(e){var t=this;if(this.personalizationsmarteditTriggerService.isNotEmptyContainer(e.$modelValue)&&!this.isContainerWithDropzone(e.$modelValue)){this.confirmationModalService.confirm({description:this.$translate.instant("personalization.modal.customizationvariationmanagement.targetgrouptab.segments.removecontainerconfirmation")}).then((function(){e.remove();t.$timeout((function(){t.fixEmptyContainer(t.expression)}),0)}))}else{e.remove();this.$timeout((function(){t.fixEmptyContainer(t.expression)}),0)}};PersonalizationsmarteditSegmentViewComponent.prototype.removeItem.$inject=["scope"];PersonalizationsmarteditSegmentViewComponent.prototype.duplicateItem=function(e){this.elementToDuplicate=e;this.expression[0].nodes.some(this.findElementAndDuplicate,this)};PersonalizationsmarteditSegmentViewComponent.prototype.duplicateItem.$inject=["elementToDuplicate"];PersonalizationsmarteditSegmentViewComponent.prototype.toggle=function(e){e.toggle()};PersonalizationsmarteditSegmentViewComponent.prototype.toggle.$inject=["scope"];PersonalizationsmarteditSegmentViewComponent.prototype.newSubItem=function(e,t){var n=e.$modelValue;this.removeDropzoneItem(n.nodes);n.nodes.unshift({type:t,operation:t==="item"?"":this.actions[0],nodes:[this.dropzoneItem]});e.expand();this.$timeout((function(){var t=e.childNodes();t[0].expand()}),0)};PersonalizationsmarteditSegmentViewComponent.prototype.newSubItem.$inject=["scope","type"];PersonalizationsmarteditSegmentViewComponent.prototype.segmentSearchInputKeypress=function(e,t){if(e&&[37,38,39,40].indexOf(e.which)>-1){return}this.segmentPagination.reset();this.segmentFilter.code=t;this.segments.length=0;this.addMoreSegmentItems()};PersonalizationsmarteditSegmentViewComponent.prototype.segmentSearchInputKeypress.$inject=["keyEvent","searchObj"];PersonalizationsmarteditSegmentViewComponent.prototype.segmentSelectedEvent=function(e){if(!e){return}this.expression[0].nodes.unshift({type:"item",operation:"",selectedSegment:e,nodes:[]});this.singleSegment=null;this.highlightedContainer=this.expression[0].$$hashKey;this.removeDropzoneItem(this.expression[0].nodes)};PersonalizationsmarteditSegmentViewComponent.prototype.segmentSelectedEvent.$inject=["item"];PersonalizationsmarteditSegmentViewComponent.prototype.addMoreSegmentItems=function(){var e=this;if(this.segmentPagination.getPage()<this.segmentPagination.getTotalPages()-1&&!this.moreSegmentRequestProcessing){this.moreSegmentRequestProcessing=true;this.personalizationsmarteditRestService.getSegments(this.getSegmentsFilterObject()).then((function(t){e.personalizationsmarteditUtils.uniqueArray(e.segments,t.segments||[]);e.segmentPagination=new r.PaginationHelper(t.pagination);e.moreSegmentRequestProcessing=false}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$translate.instant("personalization.error.gettingsegments"));e.moreSegmentRequestProcessing=false}))}};PersonalizationsmarteditSegmentViewComponent.prototype.isTopContainer=function(e){return i.equals(this.expression[0],e.node)};PersonalizationsmarteditSegmentViewComponent.prototype.isTopContainer.$inject=["element"];PersonalizationsmarteditSegmentViewComponent.prototype.isContainerWithDropzone=function(e){return this.isContainer(e)&&e.nodes.length===1&&this.isDropzone(e.nodes[0])};PersonalizationsmarteditSegmentViewComponent.prototype.isContainerWithDropzone.$inject=["element"];PersonalizationsmarteditSegmentViewComponent.prototype.isItem=function(e){return this.personalizationsmarteditTriggerService.isItem(e)};PersonalizationsmarteditSegmentViewComponent.prototype.isItem.$inject=["element"];PersonalizationsmarteditSegmentViewComponent.prototype.isDropzone=function(e){return this.personalizationsmarteditTriggerService.isDropzone(e)};PersonalizationsmarteditSegmentViewComponent.prototype.isDropzone.$inject=["element"];PersonalizationsmarteditSegmentViewComponent.prototype.isContainer=function(e){return this.personalizationsmarteditTriggerService.isContainer(e)};PersonalizationsmarteditSegmentViewComponent.prototype.isContainer.$inject=["element"];PersonalizationsmarteditSegmentViewComponent.prototype.getSegmentsFilterObject=function(){return{code:this.segmentFilter.code,pageSize:this.segmentPagination.getCount(),currentPage:this.segmentPagination.getPage()+1}};PersonalizationsmarteditSegmentViewComponent.prototype.findElementAndDuplicate=function(e,t,n){if(this.elementToDuplicate===e){n.splice(t,0,i.copy(this.elementToDuplicate));return true}if(this.isContainer(e)){e.nodes.some(this.findElementAndDuplicate,this)}return false};PersonalizationsmarteditSegmentViewComponent.prototype.findElementAndDuplicate.$inject=["element","index","array"];PersonalizationsmarteditSegmentViewComponent.prototype.removeDropzoneItem=function(e){var t=this;e.forEach((function(e,n,i){if(t.isDropzone(e)){i.splice(n,1)}}))};PersonalizationsmarteditSegmentViewComponent.prototype.removeDropzoneItem.$inject=["nodes"];PersonalizationsmarteditSegmentViewComponent.prototype.fixEmptyContainer=function(e){var t=this;e.forEach((function(e){if(t.isEmptyContainer(e)){e.nodes.push(t.dropzoneItem)}if(t.isContainer(e)){t.fixEmptyContainer(e.nodes)}}))};PersonalizationsmarteditSegmentViewComponent.prototype.fixEmptyContainer.$inject=["nodes"];PersonalizationsmarteditSegmentViewComponent.prototype.isScrollZoneVisible=function(){return this.elementToScroll.get(0).scrollHeight>this.elementToScroll.get(0).clientHeight};PersonalizationsmarteditSegmentViewComponent.prototype.isEmptyContainer=function(e){return this.isContainer(e)&&e.nodes.length===0};PersonalizationsmarteditSegmentViewComponent.prototype.isEmptyContainer.$inject=["element"];PersonalizationsmarteditSegmentViewComponent=__decorate([o.SeComponent({templateUrl:"personalizationsmarteditSegmentViewTemplate.html",inputs:["triggers","expression"]}),__metadata("design:paramtypes",[f,r.PersonalizationsmarteditMessageHandler,Object,r.PersonalizationsmarteditUtils,Object,Function,Object,S])],PersonalizationsmarteditSegmentViewComponent);return PersonalizationsmarteditSegmentViewComponent}();var PersonalizationsmarteditCommerceCustomizationViewControllerFactory=function(e,t){var n=function(){PersonalizationsmarteditCommerceCustomizationViewController.$inject=["$scope","$translate","$q","actionsDataFactory","personalizationsmarteditRestService","personalizationsmarteditMessageHandler","systemEventService","personalizationsmarteditCommerceCustomizationService","personalizationsmarteditContextService","personalizationsmarteditUtils","confirmationModalService","PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES","modalManager","$log"];function PersonalizationsmarteditCommerceCustomizationViewController(n,i,o,r,a,s,c,l,d,p,u,m,g,h){var v=this;this.$scope=n;this.$translate=i;this.$q=o;this.actionsDataFactory=r;this.personalizationsmarteditRestService=a;this.personalizationsmarteditMessageHandler=s;this.systemEventService=c;this.personalizationsmarteditCommerceCustomizationService=l;this.personalizationsmarteditContextService=d;this.personalizationsmarteditUtils=p;this.confirmationModalService=u;this.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES=m;this.modalManager=g;this.$log=h;this.availableTypes=[];this.select={};this.isItemInSelectedActions=function(e,t){return v.actionsDataFactory.isItemInSelectedActions(e,t)};this.removeSelectedAction=function(e){var t=v.$scope.actions.indexOf(e);if(t<0){return}var n=v.$scope.actions.splice(t,1);if(n[0].status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.OLD||n[0].status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE){n[0].status=v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.DELETE;v.removedActions.push(n[0])}};this.addAction=function(e,t){v.actionsDataFactory.addAction(e,t)};this.displayAction=function(e){var t=e.action;var n=v.getType(t.type);if(n.getName){return n.getName(t)}else{return t.code}};this.getActionsToDisplay=function(){return v.actionsDataFactory.getActions()};this.populateActions=function(){v.personalizationsmarteditRestService.getActions(v.$scope.customization.code,v.$scope.variation.code,{}).then((function(e){var t=e.actions.filter((function(e){return e.type!=="cxCmsActionData"})).map((function(e){return{code:e.code,action:e,status:v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.OLD}}));v.actionsDataFactory.resetActions();v.personalizationsmarteditUtils.uniqueArray(v.actionsDataFactory.actions,t||[])}),(function(){v.personalizationsmarteditMessageHandler.sendError(v.$translate.instant("personalization.error.gettingactions"))}))};this.getType=function(e){for(var t=0,n=v.availableTypes;t<n.length;t++){var i=n[t];if(i.type===e){return i}}return{}};this.sendRefreshEvent=function(){v.systemEventService.publishAsync("CUSTOMIZATIONS_MODIFIED",{})};this.dismissModalCallback=function(){if(v.isDirty()){return v.confirmationModalService.confirm({description:"personalization.modal.commercecustomization.cancelconfirmation"}).then((function(){return v.$q.resolve()}),(function(){return v.$q.reject()}))}else{return v.$q.resolve()}};this.isDirty=function(){var e=false;v.$scope.actions.forEach((function(t){e=e||t.status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.NEW||t.status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE}));e=e||v.removedActions.length>0;return e};this.onSave=function(){var e={actions:v.$scope.actions.filter((function(e){return e.status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.NEW})).map((function(e){return e.action}))};var t=v.removedActions.filter((function(e){return e.status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.DELETE})).map((function(e){return e.action.code}));var n={actions:v.$scope.actions.filter((function(e){return e.status===v.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.UPDATE})).map((function(e){return e.action}))};var i=e.actions.length>0;var o=t.length>0;var r=n.actions.length>0;(function(){if(i){return v.createActions(v.$scope.customization.code,v.$scope.variation.code,e)}else{return v.$q.resolve()}})().then((function(e){(function(){if(o){return v.deleteActions(v.$scope.customization.code,v.$scope.variation.code,t)}else{return v.$q.resolve()}})().then((function(t){if(r){v.updateActions(v.$scope.customization.code,v.$scope.variation.code,n,e,t)}}))}))};this.getActionTypesForActions=function(e){return e.map((function(e){return e.type})).filter((function(e,t,n){return n.indexOf(e)===t})).map((function(e){return v.availableTypes.filter((function(t){return t.type===e}))[0]}))};this.createActions=function(e,t,n){var i=v.$q.defer();v.personalizationsmarteditRestService.createActions(e,t,n,{}).then((function(e){v.personalizationsmarteditMessageHandler.sendSuccess(v.$translate.instant("personalization.info.creatingaction"));v.sendRefreshEvent();i.resolve(e)}),(function(){v.personalizationsmarteditMessageHandler.sendError(v.$translate.instant("personalization.error.creatingaction"));i.reject()}));return i.promise};this.deleteActions=function(e,t,n){var i=v.$q.defer();v.personalizationsmarteditRestService.deleteActions(e,t,n,{}).then((function(e){v.personalizationsmarteditMessageHandler.sendSuccess(v.$translate.instant("personalization.info.removingaction"));v.sendRefreshEvent();i.resolve(e)}),(function(){v.personalizationsmarteditMessageHandler.sendError(v.$translate.instant("personalization.error.removingaction"));i.resolve()}));return i.promise};this.updateActions=function(e,t,n,i,o){var r=v.getActionTypesForActions(n.actions);r.forEach((function(r){if(r.updateActions){var a=n.actions.filter((function(e){return v.getType(e.type)===r}));r.updateActions(e,t,a,i,o).then((function(){v.personalizationsmarteditMessageHandler.sendSuccess(v.$translate.instant("personalization.info.updatingactions"));v.sendRefreshEvent()}),(function(){v.personalizationsmarteditMessageHandler.sendError(v.$translate.instant("personalization.error.updatingactions"))}))}else{v.$log.debug(v.$translate.instant("personalization.error.noupdatingactions"))}}))};this.availableTypes=this.personalizationsmarteditCommerceCustomizationService.getAvailableTypes(this.personalizationsmarteditContextService.getSeData().seConfigurationData);this.select={type:this.availableTypes[0]};this.$scope.customization=e;this.$scope.variation=t;this.actionsDataFactory.resetActions();this.actionsDataFactory.resetRemovedActions();this.$scope.actions=this.actionsDataFactory.getActions();this.removedActions=this.actionsDataFactory.getRemovedActions();this.customizationStatusText=this.personalizationsmarteditUtils.getEnablementTextForCustomization(this.$scope.customization,"personalization.modal.commercecustomization");this.variationStatusText=this.personalizationsmarteditUtils.getEnablementTextForVariation(this.$scope.variation,"personalization.modal.commercecustomization");this.customizationStatus=this.personalizationsmarteditUtils.getActivityStateForCustomization(this.$scope.customization);this.variationStatus=this.personalizationsmarteditUtils.getActivityStateForVariation(this.$scope.customization,this.$scope.variation);this.init=function(){v.$scope.isItemInSelectedActions=v.isItemInSelectedActions;v.$scope.removeSelectedAction=v.removeSelectedAction;v.$scope.addAction=v.addAction;v.populateActions();v.$scope.$watch("actions",(function(){if(v.isDirty()){v.modalManager.enableButton("confirmSave")}else{v.modalManager.disableButton("confirmSave")}}),true);v.modalManager.setButtonHandler((function(e){if(e==="confirmSave"){v.onSave()}else if(e==="confirmCancel"){return v.dismissModalCallback()}}));v.modalManager.setDismissCallback((function(){return v.dismissModalCallback()}))}}return PersonalizationsmarteditCommerceCustomizationViewController}();return n};var de=function(){PersonalizationsmarteditCommerceCustomizationView.$inject=["modalService","MODAL_BUTTON_ACTIONS","MODAL_BUTTON_STYLES"];function PersonalizationsmarteditCommerceCustomizationView(e,t,n){var i=this;this.modalService=e;this.MODAL_BUTTON_ACTIONS=t;this.MODAL_BUTTON_STYLES=n;this.openCommerceCustomizationAction=function(e,t){i.modalService.open({title:"personalization.modal.commercecustomization.title",templateUrl:"personalizationsmarteditCommerceCustomizationViewTemplate.html",controller:PersonalizationsmarteditCommerceCustomizationViewControllerFactory(e,t),buttons:[{id:"confirmCancel",label:"personalization.modal.commercecustomization.button.cancel",style:i.MODAL_BUTTON_STYLES.SECONDARY,action:i.MODAL_BUTTON_ACTIONS.CLOSE},{id:"confirmSave",label:"personalization.modal.commercecustomization.button.submit",action:i.MODAL_BUTTON_ACTIONS.CLOSE}]}).then((function(){}),(function(){}))}}PersonalizationsmarteditCommerceCustomizationView=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[o.IModalService,Object,Object])],PersonalizationsmarteditCommerceCustomizationView);return PersonalizationsmarteditCommerceCustomizationView}();var pe={provide:"PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES",useValue:{OLD:"old",NEW:"new",DELETE:"delete",UPDATE:"update"}};var ue=function(){ActionsDataFactory.$inject=["PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES"];function ActionsDataFactory(e){var t=this;this.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES=e;this.actions=[];this.removedActions=[];this.getActions=function(){return t.actions};this.getRemovedActions=function(){return t.removedActions};this.resetActions=function(){t.actions.length=0};this.resetRemovedActions=function(){t.removedActions.length=0};this.addAction=function(e,n){var i=false;t.actions.forEach((function(t){i=i||n(e,t.action)}));if(!i){var o=t.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.NEW;var r=-1;t.removedActions.forEach((function(t,i){if(n(e,t.action)){r=i}}));if(r>=0){o=t.PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES.OLD;t.removedActions.splice(r,1)}t.actions.push({action:e,status:o})}};this.isItemInSelectedActions=function(e,n){return t.actions.find((function(t){return n(e,t.action)}))}}ActionsDataFactory=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[Object])],ActionsDataFactory);return ActionsDataFactory}();var me=function(){function PersonalizationsmarteditCommerceCustomizationModule(){}PersonalizationsmarteditCommerceCustomizationModule=__decorate([o.SeModule({imports:["modalServiceModule","smarteditCommonsModule","confirmationModalServiceModule",r.PersonalizationsmarteditCommonsModule,A],providers:[de,ue,pe]})],PersonalizationsmarteditCommerceCustomizationModule);return PersonalizationsmarteditCommerceCustomizationModule}();var ge=function(){function PersonalizationsmarteditSegmentViewModule(){}PersonalizationsmarteditSegmentViewModule=__decorate([o.SeModule({imports:["modalServiceModule","confirmationModalServiceModule","ui.tree",r.PersonalizationsmarteditCommonsModule,A,z,me,k],declarations:[le,ce]})],PersonalizationsmarteditSegmentViewModule);return PersonalizationsmarteditSegmentViewModule}();var he=function(){PersonalizationsmarteditManagerViewUtilsService.$inject=["personalizationsmarteditRestService","personalizationsmarteditMessageHandler","personalizationsmarteditCommerceCustomizationService","PERSONALIZATION_MODEL_STATUS_CODES","waitDialogService","confirmationModalService","$translate"];function PersonalizationsmarteditManagerViewUtilsService(e,t,n,i,o,r,a){var s=this;this.personalizationsmarteditRestService=e;this.personalizationsmarteditMessageHandler=t;this.personalizationsmarteditCommerceCustomizationService=n;this.PERSONALIZATION_MODEL_STATUS_CODES=i;this.waitDialogService=o;this.confirmationModalService=r;this.$translate=a;this.deleteCustomizationAction=function(e,t){s.confirmationModalService.confirm({description:"personalization.modal.manager.deletecustomization.content"}).then((function(){s.personalizationsmarteditRestService.getCustomization(e).then((function(n){n.status="DELETED";s.personalizationsmarteditRestService.updateCustomization(n).then((function(){t.splice(t.indexOf(e),1)}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.deletingcustomization"))}))}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.deletingcustomization"))}))}))};this.deleteVariationAction=function(e,t){s.confirmationModalService.confirm({description:"personalization.modal.manager.deletevariation.content"}).then((function(){s.personalizationsmarteditRestService.getVariation(e.code,t.code).then((function(n){n.status="DELETED";s.personalizationsmarteditRestService.editVariation(e.code,n).then((function(e){t.status=e.status}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.deletingvariation"))}))}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.deletingvariation"))}))}))};this.toogleVariationActive=function(e,t){s.personalizationsmarteditRestService.getVariation(e.code,t.code).then((function(n){n.enabled=!n.enabled;n.status=n.enabled?s.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED:s.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED;s.personalizationsmarteditRestService.editVariation(e.code,n).then((function(e){t.enabled=e.enabled;t.status=e.status}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.editingvariation"))}))}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.gettingvariation"))}))};this.customizationClickAction=function(e){return s.personalizationsmarteditRestService.getVariationsForCustomization(e.code,e).then((function(t){e.variations.forEach((function(e){e.actions=s.getActionsForVariation(e.code,t.variations);e.numberOfComponents=s.personalizationsmarteditCommerceCustomizationService.getNonCommerceActionsCount(e);e.commerceCustomizations=s.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCountMap(e);e.numberOfCommerceActions=s.personalizationsmarteditCommerceCustomizationService.getCommerceActionsCount(e)}))}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.gettingcustomization"))}))};this.getCustomizations=function(e){return s.personalizationsmarteditRestService.getCustomizations(e)};this.updateCustomizationRank=function(e,t){return s.personalizationsmarteditRestService.updateCustomizationRank(e,t).then((function(){}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.updatingcustomization"))}))};this.updateVariationRank=function(e,t,n){return s.personalizationsmarteditRestService.getVariation(e.code,t).then((function(t){t.rank=t.rank+n;return s.personalizationsmarteditRestService.editVariation(e.code,t).then((function(){}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.editingvariation"))}))}),(function(){s.personalizationsmarteditMessageHandler.sendError(s.$translate.instant("personalization.error.gettingvariation"))}))};this.setCustomizationRank=function(e,t,n){var i=n[n.indexOf(e)+t];s.waitDialogService.showWaitModal();s.updateCustomizationRank(e.code,i.rank-e.rank).then((function(){e.rank+=t;i.rank-=t;var o=n.indexOf(e);var r=n.splice(o,1);n.splice(o+t,0,r[0]);s.waitDialogService.hideWaitModal()})).catch((function(){s.waitDialogService.hideWaitModal()}))};this.setVariationRank=function(e,t,n){var i=e.variations[e.variations.indexOf(t)+n];s.waitDialogService.showWaitModal();s.updateVariationRank(e,t.code,n).then((function(){t.rank+=n;i.rank-=n;var o=e.variations.indexOf(t);var r=e.variations.splice(o,1);e.variations.splice(o+n,0,r[0])})).finally((function(){s.waitDialogService.hideWaitModal()}))};this.getActionsForVariation=function(e,t){t=t||[];var n=t.filter((function(t){return e===t.code}))[0];return n?n.actions:[]}}PersonalizationsmarteditManagerViewUtilsService=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[f,r.PersonalizationsmarteditMessageHandler,r.PersonalizationsmarteditCommerceCustomizationService,Object,Object,Object,Function])],PersonalizationsmarteditManagerViewUtilsService);return PersonalizationsmarteditManagerViewUtilsService}();var ve=function(){PersonalizationsmarteditManagerViewController.$inject=["$scope","$translate","$q","lodash","personalizationsmarteditManagerViewUtilsService","personalizationsmarteditMessageHandler","personalizationsmarteditContextService","personalizationsmarteditUtils","personalizationsmarteditManager","personalizationsmarteditCommerceCustomizationService","personalizationsmarteditCommerceCustomizationView","personalizationsmarteditDateUtils","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_MODEL_STATUS_CODES","waitDialogService","$timeout","systemEventService"];function PersonalizationsmarteditManagerViewController(e,t,n,i,o,a,s,c,l,d,p,u,m,g,h,v,f){var _=this;this.$scope=e;this.$translate=t;this.$q=n;this.lodash=i;this.personalizationsmarteditManagerViewUtilsService=o;this.personalizationsmarteditMessageHandler=a;this.personalizationsmarteditContextService=s;this.personalizationsmarteditUtils=c;this.personalizationsmarteditManager=l;this.personalizationsmarteditCommerceCustomizationService=d;this.personalizationsmarteditCommerceCustomizationView=p;this.personalizationsmarteditDateUtils=u;this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=m;this.PERSONALIZATION_MODEL_STATUS_CODES=g;this.waitDialogService=h;this.$timeout=v;this.systemEventService=f;this.state={uncollapsedCustomizations:[]};this.searchInputKeypress=function(e){if(e.which===13||_.search.name.length>2||_.search.name.length===0){_.refreshGrid()}};this.addMoreItems=function(){if(_.pagination.getPage()<_.pagination.getTotalPages()-1&&!_.moreCustomizationsRequestProcessing){_.moreCustomizationsRequestProcessing=true;_.getCustomizations(_.getCustomizationsFilterObject())}};this.getElementToScroll=function(){return _.$scope.scrollZoneElement.children()};this.setScrollZoneElement=function(e){_.$scope.scrollZoneElement=e};this.openNewModal=function(){_.personalizationsmarteditManager.openCreateCustomizationModal()};this.isSearchGridHeaderHidden=function(){return _.$scope.scrollZoneElement.children().scrollTop()>=120};this.scrollZoneReturnToTop=function(){_.$scope.scrollZoneElement.children().animate({scrollTop:0},500)};this.isReturnToTopButtonVisible=function(){return _.$scope.scrollZoneElement.children().scrollTop()>50};this.isFilterEnabled=function(){return _.search.name!==""||_.search.status!==_.getDefaultStatus()};this.setCustomizationRank=function(e,t){_.personalizationsmarteditManagerViewUtilsService.setCustomizationRank(e,t,_.customizations)};this.setVariationRank=function(e,t,n){_.personalizationsmarteditManagerViewUtilsService.setVariationRank(e,t,n)};this.refreshGrid=function(){_.pagination.reset();_.customizations.length=0;_.addMoreItems()};this.editCustomizationAction=function(e){_.personalizationsmarteditManager.openEditCustomizationModal(e.code,null)};this.editVariationAction=function(e,t){_.personalizationsmarteditManager.openEditCustomizationModal(e.code,t.code)};this.deleteCustomizationAction=function(e){_.personalizationsmarteditManagerViewUtilsService.deleteCustomizationAction(e,_.customizations)};this.isCommerceCustomizationEnabled=function(){return _.personalizationsmarteditCommerceCustomizationService.isCommerceCustomizationEnabled(_.personalizationsmarteditContextService.getSeData().seConfigurationData)};this.manageCommerceCustomization=function(e,t){_.personalizationsmarteditCommerceCustomizationView.openCommerceCustomizationAction(e,t)};this.isDeleteVariationEnabled=function(e){return _.personalizationsmarteditUtils.getVisibleItems(e.variations).length>1};this.deleteVariationAction=function(e,t,n){if(_.isDeleteVariationEnabled(e)){_.personalizationsmarteditManagerViewUtilsService.deleteVariationAction(e,t)}else{n.stopPropagation()}};this.toogleVariationActive=function(e,t){_.personalizationsmarteditManagerViewUtilsService.toogleVariationActive(e,t)};this.customizationClickAction=function(e){_.personalizationsmarteditManagerViewUtilsService.customizationClickAction(e)};this.hasCommerceActions=function(e){return _.personalizationsmarteditUtils.hasCommerceActions(e)};this.getCommerceCustomizationTooltip=function(e){return _.personalizationsmarteditUtils.getCommerceCustomizationTooltipHTML(e)};this.getFormattedDate=function(e){if(e){return _.personalizationsmarteditDateUtils.formatDate(e,null)}else{return""}};this.getEnablementTextForCustomization=function(e){return _.personalizationsmarteditUtils.getEnablementTextForCustomization(e,"personalization.modal.manager")};this.getEnablementTextForVariation=function(e){return _.personalizationsmarteditUtils.getEnablementTextForVariation(e,"personalization.modal.manager")};this.getEnablementActionTextForVariation=function(e){return _.personalizationsmarteditUtils.getEnablementActionTextForVariation(e,"personalization.modal.manager")};this.getActivityStateForCustomization=function(e){return _.personalizationsmarteditUtils.getActivityStateForCustomization(e)};this.getActivityStateForVariation=function(e,t){return _.personalizationsmarteditUtils.getActivityStateForVariation(e,t)};this.allCustomizationsCollapsed=function(){return _.customizations.map((function(e){return e.isCollapsed})).reduce((function(e,t){return e&&t}),true)};this.statusNotDeleted=function(e){return _.personalizationsmarteditUtils.isItemVisible(e)};this.initCustomization=function(e){if(_.state.uncollapsedCustomizations.includes(e.code)){e.isCollapsed=false;_.customizationClickAction(e)}else{e.isCollapsed=true}};this.customizationCollapseAction=function(e){e.isCollapsed=!e.isCollapsed;if(e.isCollapsed===false){_.state.uncollapsedCustomizations.push(e.code)}else{_.state.uncollapsedCustomizations.splice(_.state.uncollapsedCustomizations.indexOf(e.code),1)}};this.getPage=function(){_.addMoreItems()};this.isScrollZoneVisible=function(){return _.$scope.scrollZoneElement.children().get(0).scrollHeight>_.$scope.scrollZoneElement.children().get(0).clientHeight};this.getCustomizations=function(e){_.personalizationsmarteditManagerViewUtilsService.getCustomizations(e).then((function(e){_.personalizationsmarteditUtils.uniqueArray(_.customizations,e.customizations||[]);_.$scope.filteredCustomizationsCount=e.pagination.totalCount;_.pagination=new r.PaginationHelper(e.pagination);_.moreCustomizationsRequestProcessing=false}),(function(){_.personalizationsmarteditMessageHandler.sendError(_.$translate.instant("personalization.error.gettingcustomizations"));_.moreCustomizationsRequestProcessing=false}))};this.getCustomizationsFilterObject=function(){return{active:"all",name:_.search.name,currentSize:_.pagination.getCount(),currentPage:_.pagination.getPage()+1,statuses:_.search.status.modelStatuses}};this.getDefaultStatus=function(){return _.statuses.filter((function(e){return e.code===_.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL}))[0]};this.updateCustomizationRank=function(e,t){return _.personalizationsmarteditManagerViewUtilsService.updateCustomizationRank(e,t)};this.updateVariationRank=function(e,t,n){return _.personalizationsmarteditManagerViewUtilsService.updateVariationRank(e,t,n)};this.updateRanks=function(e,t,n,i,o){var r=o>0?i.source.index:i.dest.index;var a=o>0?i.dest.index:i.source.index;n[i.dest.index].rank=t.rank;for(var s=r;s<=a;s++){if(s!==i.dest.index){n[s].rank+=o>0?-1:1}}};this.valideRanks=function(e){for(var t=0;t<e.length-1;t++){if(e[t].rank>e[t+1].rank){_.refreshGrid();break}}};this.droppedCustomization=function(e,t){var n=_.customizations[t.dest.index];var i=n.rank-e.rank;if(i!==0){_.waitDialogService.showWaitModal();_.updateCustomizationRank(e.code,i).then((function(){_.updateRanks(e,n,_.customizations,t,i);_.$timeout((function(){_.valideRanks(_.customizations)}),100);_.waitDialogService.hideWaitModal()})).catch((function(){_.waitDialogService.hideWaitModal()}))}};this.droppedTargetGroup=function(e,t){var n=t.source.nodesScope.$modelValue;var i=n[t.dest.index];var o=i.rank-e.rank;var r=t.source.nodesScope.$parent.$modelValue;if(o!==0){_.waitDialogService.showWaitModal();_.updateVariationRank(r,e.code,o).then((function(){_.updateRanks(e,i,r.variations,t,o);_.$timeout((function(){_.valideRanks(r.variations)}),100)})).finally((function(){_.waitDialogService.hideWaitModal()}))}};var y=this.personalizationsmarteditContextService.getSeData().seExperienceData;var C=y.languageDescriptor.isocode;this.$scope.scrollZoneVisible=false;this.catalogName=y.catalogDescriptor.name[C];this.catalogName+=" - "+y.catalogDescriptor.catalogVersion;this.statuses=this.personalizationsmarteditUtils.getStatusesMapping();this.customizations=[];this.$scope.filteredCustomizationsCount=0;this.search={name:"",status:this.getDefaultStatus()};this.moreCustomizationsRequestProcessing=false;this.pagination=new r.PaginationHelper;this.pagination.reset();this.treeOptions={dragStart:function(e){_.$scope.scrollZoneVisible=_.isScrollZoneVisible();e.source.nodeScope.$modelValue.isDragging=true},dragStop:function(e){e.source.nodeScope.$modelValue.isDragging=undefined},dropped:function(e){_.$scope.scrollZoneVisible=false;var t=e.source.nodeScope.$modelValue;if(e.source.index===e.dest.index){return}else if(t.variations){_.droppedCustomization(t,e)}else{_.droppedTargetGroup(t,e)}},accept:function(e,t){if(_.lodash.isArray(t.$modelValue)&&t.$modelValue.indexOf(e.$modelValue)>-1){return true}return false}};this.init=function(){_.systemEventService.subscribe("CUSTOMIZATIONS_MODIFIED",(function(){_.refreshGrid();return _.$q.when()}))};this.state.uncollapsedCustomizations=[]}PersonalizationsmarteditManagerViewController=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[Object,Function,Function,Function,he,r.PersonalizationsmarteditMessageHandler,v,r.PersonalizationsmarteditUtils,N,r.PersonalizationsmarteditCommerceCustomizationService,de,r.PersonalizationsmarteditDateUtils,Object,Object,Object,Object,Object])],PersonalizationsmarteditManagerViewController);return PersonalizationsmarteditManagerViewController}();var fe=function(){PersonalizationsmarteditManagerView.$inject=["modalService"];function PersonalizationsmarteditManagerView(e){var t=this;this.modalService=e;this.openManagerAction=function(e,n){t.modalService.open({title:"personalization.modal.manager.title",templateUrl:"personalizationsmarteditManagerViewTemplate.html",controller:ve,size:"fullscreen",cssClasses:"perso-library"}).then((function(){}),(function(){}))}}PersonalizationsmarteditManagerView=__decorate([o.SeInjectable(),__metadata("design:paramtypes",[o.IModalService])],PersonalizationsmarteditManagerView);return PersonalizationsmarteditManagerView}();var _e=function(){function PersonalizationsmarteditManagerViewModule(){}PersonalizationsmarteditManagerViewModule=__decorate([o.SeModule({imports:["modalServiceModule","confirmationModalServiceModule","smarteditCommonsModule","ui.tree",r.PersonalizationsmarteditCommonsModule,A,k,me,D],providers:[fe,he]})],PersonalizationsmarteditManagerViewModule);return PersonalizationsmarteditManagerViewModule}();var ye=function(){function PersonalizationsmarteditContainer(){}PersonalizationsmarteditContainer=__decorate([o.SeModule({imports:["personalizationsmarteditContainerTemplates","ui.bootstrap","functionsModule","seConstantsModule","yjqueryModule","smarteditCommonsModule","smarteditRootModule","smarteditServicesModule",ie,Y,se,J,k,r.PersonalizationsmarteditCommonsModule,z,A,V,D,q,ge,_e],config:["$provide",function(e){"ngInject";e.decorator("rollbackPageVersionService",["$delegate","$log","versionCheckerService",function(e,t,n){var i=e.rollbackPageVersion;function rollbackWrapper(){n.setVersion(arguments[0]);return i.apply(e,arguments)}e.rollbackPageVersion=rollbackWrapper;var o=e.showConfirmationModal;function modalWrapper(){var t=arguments;return n.provideTranlationKey(t[1]).then((function(n){t[1]=n;return o.apply(e,t)}))}e.showConfirmationModal=modalWrapper;return e}])}],initialize:["$log","yjQuery","domain","$q","personalizationsmarteditContextServiceReverseProxy","personalizationsmarteditContextService","personalizationsmarteditContextMenuServiceProxy","personalizationsmarteditContextUtils","personalizationsmarteditPreviewService","personalizationsmarteditMessageHandler","personalizationsmarteditRestService","personalizationsmarteditUtils","EVENTS","SWITCH_LANGUAGE_EVENT","EVENT_PERSPECTIVE_UNLOADING","EVENT_PERSPECTIVE_ADDED","SHOW_TOOLBAR_ITEM_CONTEXT","crossFrameEventService","featureService","perspectiveService","smarteditBootstrapGateway","systemEventService","experienceService","httpBackendService","personalizationsmarteditDateUtils","CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY","COMBINED_VIEW_TOOLBAR_ITEM_KEY",function(e,t,n,o,r,a,s,c,l,d,p,u,m,g,h,v,f,_,y,C,S,b,I,w,E,P,T){"ngInject";if(!w.backends.PATCH){w.backends.PATCH=[]}var A="personalizationsmartedit.perspective";y.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:P,type:"HYBRID_ACTION",nameI18nKey:"personalization.toolbar.pagecustomizations",priority:4,section:"left",include:"personalizationsmarteditCustomizeViewWrapperTemplate.html",contextTemplateUrl:"personalizationsmarteditCustomizeToolbarContextWrapperTemplate.html",keepAliveOnClose:false,iconClassName:"sap-icon--palette se-toolbar-menu-ddlb--button__icon",permissions:["se.edit.page","se.personalization.page"]});y.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:T,type:"HYBRID_ACTION",nameI18nKey:"personalization.toolbar.combinedview.name",priority:6,section:"left",include:"personalizationsmarteditCombinedViewMenuWrapperTemplate.html",contextTemplateUrl:"personalizationsmarteditCombinedViewToolbarContextWrapperTemplate.html",keepAliveOnClose:false,iconClassName:"sap-icon--switch-views se-toolbar-menu-ddlb--button__icon",permissions:["se.read.page","se.personalization.page"]});y.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"personalizationsmartedit.container.manager.toolbar",type:"HYBRID_ACTION",nameI18nKey:"personalization.toolbar.library.name",priority:8,section:"left",include:"manageCustomizationViewMenuWrapperTemplate.html",keepAliveOnClose:false,iconClassName:"sap-icon--bbyd-active-sales se-toolbar-menu-ddlb--button__icon",permissions:["se.edit.page"]});y.register({key:"personalizationsmartedit.context.service",nameI18nKey:"personalization.context.service.name",descriptionI18nKey:"personalization.context.service.description",enablingCallback:function(){var e=a.getPersonalization();e.enabled=true;a.setPersonalization(e)},disablingCallback:function(){var e=a.getPersonalization();e.enabled=false;a.setPersonalization(e)},permissions:["se.edit.page"]});C.register({key:A,nameI18nKey:"personalization.perspective.name",features:["personalizationsmartedit.context.service",P,"personalizationsmartedit.container.manager.toolbar",T,"personalizationsmarteditSharedSlot","personalizationsmarteditComponentLightUp","personalizationsmarteditCombinedViewComponentLightUp","personalizationsmartedit.context.add.action","personalizationsmartedit.context.edit.action","personalizationsmartedit.context.delete.action","personalizationsmartedit.context.info.action","personalizationsmartedit.context.component.edit.action","personalizationsmartedit.context.show.action.list","externalcomponentbutton","personalizationsmarteditExternalComponentDecorator","se.contextualMenu","se.emptySlotFix","se.cms.pageDisplayStatus"],perspectives:[],permissions:["se.personalization.open"]});var clearAllContextsAndReloadPreview=function(){c.clearCombinedViewCustomizeContext(a);c.clearCustomizeContextAndReloadPreview(l,a);c.clearCombinedViewContextAndReloadPreview(l,a)};_.subscribe(h,(function(e,t){if(t===A){clearAllContextsAndReloadPreview()}}));var clearAllContexts=function(){c.clearCombinedViewCustomizeContext(a);c.clearCustomizeContext(a);c.clearCombinedViewContext(a)};b.subscribe(m.EXPERIENCE_UPDATE,(function(){clearAllContexts();a.setCustomizeFiltersState({});return o.when()}));b.subscribe(v,(function(){l.removePersonalizationDataFromPreview();return o.when()}));b.subscribe(g,(function(){var e=a.getCombinedView();i.forEach(e.selectedItems,(function(e){u.getAndSetCatalogVersionNameL10N(e.variation)}));a.setCombinedView(e);return o.when()}));S.subscribe("smartEditReady",(function(e,t){_.publish(f,P);_.publish(f,T);var n=a.getCustomize().selectedCustomization;var i=a.getCombinedView().customize.selectedCustomization;var o=a.getCombinedView().selectedItems;I.getCurrentExperience().then((function(e){if(!e.variations&&(n||i||o)){clearAllContexts()}}));a.refreshExperienceData().then((function(){var e=a.getSeData().seExperienceData;var t=C.getActivePerspective()||{};if(t.key===A&&e.pageContext.catalogVersionUuid!==e.catalogDescriptor.catalogVersionUuid){var n={message:"personalization.warning.pagefromparent",timeout:-1};d.sendWarning(n)}})).finally((function(){a.applySynchronization()}))}))}]})],PersonalizationsmarteditContainer);return PersonalizationsmarteditContainer}();window.__smartedit__.addDecoratorPayload("Component","HasMulticatalogComponent",{selector:"has-multicatalog",template:'\n        <div *ngIf="hasMulticatalog">\n            <ng-content></ng-content>\n        </div>\n    '});var Ce=function(){HasMulticatalogComponent.$inject=["personalizationsmarteditContextService"];function HasMulticatalogComponent(e){this.personalizationsmarteditContextService=e}HasMulticatalogComponent.prototype.ngOnInit=function(){this.hasMulticatalog=this.getSeExperienceData().siteDescriptor.contentCatalogs.length>1};HasMulticatalogComponent.prototype.getSeExperienceData=function(){return this.personalizationsmarteditContextService.getSeData().seExperienceData};HasMulticatalogComponent=__decorate([o.SeDowngradeComponent(),s.Component({selector:"has-multicatalog",template:'\n        <div *ngIf="hasMulticatalog">\n            <ng-content></ng-content>\n        </div>\n    '}),__param(0,s.Inject(v)),__metadata("design:paramtypes",[v])],HasMulticatalogComponent);return HasMulticatalogComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogVersionFilterItemPrinterComponent",{selector:"catalog-version-filter-item-printer",template:'\n        <div>\n            <span class="perso__globe-icon sap-icon--globe"\n                  *ngIf="data.item.isCurrentCatalog === false">\n            </span>\n            <span *ngIf="data.item.isCurrentCatalog === false">\n                {{data.item.catalogName}} - {{data.item.catalogVersionId}}\n            </span>\n            <span *ngIf="data.item.isCurrentCatalog === true" [translate]="\'personalization.filter.catalog.current\'"></span>\n        </div>\n    '});var Se=function(){function CatalogVersionFilterItemPrinterComponent(e){this.data=e}CatalogVersionFilterItemPrinterComponent=__decorate([s.Component({selector:"catalog-version-filter-item-printer",template:'\n        <div>\n            <span class="perso__globe-icon sap-icon--globe"\n                  *ngIf="data.item.isCurrentCatalog === false">\n            </span>\n            <span *ngIf="data.item.isCurrentCatalog === false">\n                {{data.item.catalogName}} - {{data.item.catalogVersionId}}\n            </span>\n            <span *ngIf="data.item.isCurrentCatalog === true" [translate]="\'personalization.filter.catalog.current\'"></span>\n        </div>\n    '}),__param(0,s.Inject(o.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],CatalogVersionFilterItemPrinterComponent);return CatalogVersionFilterItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogVersionFilterDropdownComponent",{selector:"catalog-version-filter-dropdown",template:'        \n        <se-select class="perso-filter"\n                   (click)="$event.stopPropagation()"\n                   [(model)]="selectedId"\n                   [onChange]="onChange"\n                   [fetchStrategy]="fetchStrategy"\n                   [itemComponent]="itemComponent"\n                   [searchEnabled]="false"\n        ></se-select>\n    '});var be=function(){CatalogVersionFilterDropdownComponent.$inject=["crossFrameEventService","languageService","componentMenuService","personalizationsmarteditContextService"];function CatalogVersionFilterDropdownComponent(e,t,n,i){var r=this;this.crossFrameEventService=e;this.languageService=t;this.componentMenuService=n;this.personalizationsmarteditContextService=i;this.onSelectCallback=new s.EventEmitter;this.itemComponent=Se;this.l10nFilter=o.setupL10nFilter(this.languageService,this.crossFrameEventService);this.onChange=this.onChange.bind(this);this.fetchStrategy={fetchAll:function(){return Promise.resolve(r.items)}}}CatalogVersionFilterDropdownComponent.prototype.ngOnInit=function(){var e=this;this.componentMenuService.getValidContentCatalogVersions().then((function(t){e.items=t;var n=e.personalizationsmarteditContextService.getSeData().seExperienceData;e.items.forEach((function(t){t.isCurrentCatalog=t.id===n.catalogDescriptor.catalogVersionUuid;t.catalogName=e.l10nFilter(t.catalogName)}));e.componentMenuService.getInitialCatalogVersion(e.items).then((function(t){e.selectedId=e.initialValue||t.id}))}))};CatalogVersionFilterDropdownComponent.prototype.onChange=function(e){this.onSelectCallback.emit(this.selectedId)};CatalogVersionFilterDropdownComponent.prototype.onChange.$inject=["changes"];__decorate([s.Input(),__metadata("design:type",String)],CatalogVersionFilterDropdownComponent.prototype,"initialValue",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],CatalogVersionFilterDropdownComponent.prototype,"onSelectCallback",void 0);CatalogVersionFilterDropdownComponent=__decorate([o.SeDowngradeComponent(),s.Component({selector:"catalog-version-filter-dropdown",template:'        \n        <se-select class="perso-filter"\n                   (click)="$event.stopPropagation()"\n                   [(model)]="selectedId"\n                   [onChange]="onChange"\n                   [fetchStrategy]="fetchStrategy"\n                   [itemComponent]="itemComponent"\n                   [searchEnabled]="false"\n        ></se-select>\n    '}),__param(0,s.Inject(o.EVENT_SERVICE)),__param(1,s.Inject("languageService")),__param(2,s.Inject("componentMenuService")),__param(3,s.Inject(v)),__metadata("design:paramtypes",[o.CrossFrameEventService,o.LanguageService,d.ComponentMenuService,v])],CatalogVersionFilterDropdownComponent);return CatalogVersionFilterDropdownComponent}();var Ie=function(){function PersonalizationsmarteditSharedComponentsModule(){}PersonalizationsmarteditSharedComponentsModule=__decorate([s.NgModule({imports:[m.CommonModule,c.TranslateModule,o.SelectModule],declarations:[Ce,be,Se],entryComponents:[Ce,be,Se],exports:[Ce,be,Se]})],PersonalizationsmarteditSharedComponentsModule);return PersonalizationsmarteditSharedComponentsModule}();var we=function(){function PersonalizationsmarteditContextMenuModule(){}PersonalizationsmarteditContextMenuModule=__decorate([s.NgModule({imports:[m.CommonModule,c.TranslateModule,o.SharedComponentsModule,g.InlineHelpModule,o.SelectModule,o.TooltipModule,Ie],declarations:[Z,X],entryComponents:[Z,X],exports:[Z,X]})],PersonalizationsmarteditContextMenuModule);return PersonalizationsmarteditContextMenuModule}();var Ee=function(){function PersonalizationsmarteditContainerModule(){}PersonalizationsmarteditContainerModule=__decorate([o.SeEntryModule("personalizationsmarteditcontainer"),s.NgModule({imports:[p.BrowserModule,u.UpgradeModule,r.PersonalizationsmarteditCommonsComponentsModule,we,Ie],providers:[{provide:a.HTTP_INTERCEPTORS,useClass:r.BaseSiteHeaderInterceptor,multi:true,deps:[o.ISharedDataService]},o.diBridgeUtils.upgradeProvider("personalizationsmarteditRestService",f),o.diBridgeUtils.upgradeProvider("personalizationsmarteditMessageHandler",r.PersonalizationsmarteditMessageHandler),o.diBridgeUtils.upgradeProvider("personalizationsmarteditContextService",v),o.diBridgeUtils.upgradeProvider("PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING"),o.diBridgeUtils.upgradeProvider("MODAL_BUTTON_ACTIONS"),o.diBridgeUtils.upgradeProvider("MODAL_BUTTON_STYLES"),o.diBridgeUtils.upgradeProvider("slotRestrictionsService"),o.diBridgeUtils.upgradeProvider("editorModalService"),o.diBridgeUtils.upgradeProvider("componentMenuService"),o.diBridgeUtils.upgradeProvider("languageService")]})],PersonalizationsmarteditContainerModule);return PersonalizationsmarteditContainerModule}();t.PersonalizationsmarteditContainer=ye;t.PersonalizationsmarteditContainerModule=Ee},1059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(93);var o=n(114);var r=n(5);var a=n(0);var s=n(4);var c=n(49);var l=n(52);(function(){var e=e||window.angular;var t=null;try{t=e.module("personalizationsmarteditCommonTemplates")}catch(e){}t=t||e.module("personalizationsmarteditCommonTemplates",[]);t.run(["$templateCache",function(e){e.put("PersonalizationPreventParentScrollComponent.html","<div persoPreventParentScroll><ng-content></ng-content></div>");e.put("PersonalizationsmarteditInfiniteScrollingComponent.html",'<div [ngClass]="dropDownContainerClass" persoInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div [ngClass]="dropDownClass"><ng-content></ng-content></div></div>');e.put("dateTimePickerRangeTemplate.html",'<div class="pe-datetime-range"><div class="col-md-6 pe-datetime-range__from" data-ng-class="{\'has-error\': !$ctrl.isFromDateValid}"><label for="customization-start-date" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate" class="fd-form__label perso__datetimepicker__label"></label><y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.startdate.help></span>\'"></y-help><div class="input-group se-date-field pe-date-field" id="date-picker-range-from" data-ng-show="$ctrl.isEditable"><input type="text" name="date_from_key" class="fd-form-control se-date-field--input pe-date-field__input" placeholder="{{ $ctrl.placeholderText | translate}}" data-ng-disabled="!$ctrl.isEditable" name="{{$ctrl.name}}" data-ng-model="$ctrl.dateFrom" id="customization-start-date"/> <span class="input-group-addon se-date-field--button pe-datetime-range__picker" data-ng-show="$ctrl.isEditable"><span class="sap-icon--calendar pe-datetime-range__picker__icon"></span></span></div><div class="input-group se-date-field pe-date-field" id="date-picker-range-from" data-ng-show="!$ctrl.isEditable"><input type="text" name="date_from_key" class="fd-form-control se-date-field--input pe-date-field__input" data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}" data-ng-model="$ctrl.dateFrom" data-date-formatter id="customization-start-date" data-ng-disabled="true" data-format-type="short"></div><span data-ng-if="!$ctrl.isFromDateValid" class="help-block pe-datetime__error-msg pe-datetime__msg" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformatfrom.description"></span></div><div class="col-md-6 pe-datetime-range__to" data-ng-class="{\'has-error\':!$ctrl.isToDateValid, \'has-warning\':$ctrl.isEndDateInThePast}"><label for="customization-end-date" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate" class="fd-form__label perso__datetimepicker__label"></label><y-help data-template="\'<span data-translate=personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddate.help></span>\'"></y-help><div class="input-group se-date-field pe-date-field" id="date-picker-range-to"><input type="text" name="date_to_key" class="fd-form-control se-date-field--input pe-date-field__input" placeholder="{{ $ctrl.placeholderText | translate}}" data-ng-disabled="!$ctrl.isEditable" name="{{$ctrl.name}}" data-ng-model="$ctrl.dateTo" id="customization-end-date"/> <span class="input-group-addon se-date-field--button pe-datetime-range__picker" data-ng-show="$ctrl.isEditable"><span class="sap-icon--calendar pe-datetime-range__picker__icon"></span></span></div><div class="input-group se-date-field pe-date-field" id="date-picker-range-to" data-ng-show="!$ctrl.isEditable"><input type="text" name="date_to_key" class="fd-form-control se-date-field--input pe-date-field__input" data-ng-class="{\'pe-input--is-disabled\': !$ctrl.isEditable}" data-ng-model="$ctrl.dateTo" data-date-formatter id="customization-end-date" data-ng-disabled="true" data-format-type="short"></div><span class="help-block pe-datetime__error-msg pe-datetime__msg" data-ng-if="!$ctrl.isToDateValid" data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.wrongdateformat.description"></span> <span data-ng-if="$ctrl.isEndDateInThePast" class="help-block pe-datetime__warning-msg pe-datetime__msg"><span data-translate="personalization.modal.customizationvariationmanagement.basicinformationtab.details.enddateinthepast.description"></span></span></div></div>');e.put("personalizationsmarteditScrollZoneBottomTemplate.html",'<div class="perso__scrollzone perso__scrollzone--bottom" data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'" data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneBottom" data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollBottom()" data-ng-mouseleave="$ctrl.stopScroll()"></div>');e.put("personalizationsmarteditScrollZoneTopTemplate.html",'<div class="perso__scrollzone perso__scrollzone--top" data-ng-class="$ctrl.isTransparent?\'perso__scrollzone--transparent\':\'perso__scrollzone--normal\'" data-ng-show="$ctrl.scrollZoneVisible && $ctrl.scrollZoneTop" data-ng-mouseenter="$ctrl.start=true;$ctrl.scrollTop()" data-ng-mouseleave="$ctrl.stopScroll()"></div>')}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}var d=function(){function Personalization(){this.enabled=false}return Personalization}();var p=function(){function Customize(){this.enabled=false;this.selectedCustomization=null;this.selectedVariations=null;this.selectedComponents=null}return Customize}();var u=function(){function CombinedView(){this.enabled=false;this.selectedItems=null;this.customize=new p}return CombinedView}();var m=function(){function SeData(){this.pageId=null;this.seExperienceData=null;this.seConfigurationData=null}return SeData}();var g=function(){function PersonalizationsmarteditContextUtils(){}PersonalizationsmarteditContextUtils.prototype.getContextObject=function(){return{personalization:new d,customize:new p,combinedView:new u,seData:new m}};PersonalizationsmarteditContextUtils.prototype.clearCustomizeContext=function(e){var t=e.getCustomize();t.enabled=false;t.selectedCustomization=null;t.selectedVariations=null;t.selectedComponents=null;e.setCustomize(t)};PersonalizationsmarteditContextUtils.prototype.clearCustomizeContext.$inject=["contextService"];PersonalizationsmarteditContextUtils.prototype.clearCustomizeContextAndReloadPreview=function(e,t){var n=o.copy(t.getCustomize().selectedVariations);this.clearCustomizeContext(t);if(o.isObject(n)&&!o.isArray(n)){e.removePersonalizationDataFromPreview()}};PersonalizationsmarteditContextUtils.prototype.clearCustomizeContextAndReloadPreview.$inject=["previewService","contexService"];PersonalizationsmarteditContextUtils.prototype.clearCombinedViewCustomizeContext=function(e){var t=e.getCombinedView();t.customize.enabled=false;t.customize.selectedCustomization=null;t.customize.selectedVariations=null;t.customize.selectedComponents=null;(t.selectedItems||[]).forEach((function(e){delete e.highlighted}));e.setCombinedView(t)};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewCustomizeContext.$inject=["contextService"];PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContext=function(e){var t=e.getCombinedView();t.enabled=false;t.selectedItems=null;e.setCombinedView(t)};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContext.$inject=["contextService"];PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContextAndReloadPreview=function(e,t){var n=o.copy(t.getCombinedView().enabled);var i=o.copy(t.getCombinedView().selectedItems);this.clearCombinedViewContext(t);if(n&&i){e.removePersonalizationDataFromPreview()}};PersonalizationsmarteditContextUtils.prototype.clearCombinedViewContextAndReloadPreview.$inject=["previewService","contextService"];PersonalizationsmarteditContextUtils=__decorate([i.SeInjectable()],PersonalizationsmarteditContextUtils);return PersonalizationsmarteditContextUtils}();var h=r;var v={provide:"PERSONALIZATION_DATE_FORMATS",useValue:{SHORT_DATE_FORMAT:"M/D/YY",MODEL_DATE_FORMAT:"YYYY-MM-DDTHH:mm:SSZ"}};var f=function(){PersonalizationsmarteditDateUtils.$inject=["$translate","DATE_CONSTANTS","PERSONALIZATION_DATE_FORMATS","isBlank"];function PersonalizationsmarteditDateUtils(e,t,n,i){this.$translate=e;this.DATE_CONSTANTS=t;this.PERSONALIZATION_DATE_FORMATS=n;this.isBlank=i}PersonalizationsmarteditDateUtils.prototype.formatDate=function(e,t){t=t||this.DATE_CONSTANTS.MOMENT_FORMAT;if(e){if(e.match&&e.match(/^(\d{4})\-(\d{2})\-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\+|\-)(\d{4})$/)){e=e.slice(0,-2)+":"+e.slice(-2)}return h(new Date(e)).format(t)}else{return""}};PersonalizationsmarteditDateUtils.prototype.formatDate.$inject=["dateStr","format"];PersonalizationsmarteditDateUtils.prototype.formatDateWithMessage=function(e,t){t=t||this.PERSONALIZATION_DATE_FORMATS.SHORT_DATE_FORMAT;if(e){return this.formatDate(e,t)}else{return this.$translate.instant("personalization.toolbar.pagecustomizations.nodatespecified")}};PersonalizationsmarteditDateUtils.prototype.formatDateWithMessage.$inject=["dateStr","format"];PersonalizationsmarteditDateUtils.prototype.isDateInThePast=function(e){if(this.isBlank(e)){return false}else{return h(e,this.DATE_CONSTANTS.MOMENT_FORMAT).isBefore()}};PersonalizationsmarteditDateUtils.prototype.isDateInThePast.$inject=["modelValue"];PersonalizationsmarteditDateUtils.prototype.isDateValidOrEmpty=function(e){return this.isBlank(e)||this.isDateValid(e)};PersonalizationsmarteditDateUtils.prototype.isDateValidOrEmpty.$inject=["modelValue"];PersonalizationsmarteditDateUtils.prototype.isDateValid=function(e){return h(e,this.DATE_CONSTANTS.MOMENT_FORMAT).isValid()};PersonalizationsmarteditDateUtils.prototype.isDateValid.$inject=["modelValue"];PersonalizationsmarteditDateUtils.prototype.isDateRangeValid=function(e,t){if(this.isBlank(e)||this.isBlank(t)){return true}else{return h(new Date(e)).isSameOrBefore(h(new Date(t)))}};PersonalizationsmarteditDateUtils.prototype.isDateRangeValid.$inject=["startDate","endDate"];PersonalizationsmarteditDateUtils.prototype.isDateStrFormatValid=function(e,t){t=t||this.DATE_CONSTANTS.MOMENT_FORMAT;if(this.isBlank(e)){return false}else{return h(e,t,true).isValid()}};PersonalizationsmarteditDateUtils.prototype.isDateStrFormatValid.$inject=["dateStr","format"];PersonalizationsmarteditDateUtils=__decorate([i.SeInjectable(),__metadata("design:paramtypes",[Function,Object,Object,Object])],PersonalizationsmarteditDateUtils);return PersonalizationsmarteditDateUtils}();var _=r;var y={provide:"PERSONALIZATION_MODEL_STATUS_CODES",useValue:{ENABLED:"ENABLED",DISABLED:"DISABLED"}};var C={provide:"PERSONALIZATION_VIEW_STATUS_MAPPING_CODES",useValue:{ALL:"ALL",ENABLED:"ENABLED",DISABLED:"DISABLED"}};var S={provide:"PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING",useValue:{0:{borderClass:"personalizationsmarteditComponentSelected0",listClass:"personalizationsmarteditComponentSelectedList0"},1:{borderClass:"personalizationsmarteditComponentSelected1",listClass:"personalizationsmarteditComponentSelectedList1"},2:{borderClass:"personalizationsmarteditComponentSelected2",listClass:"personalizationsmarteditComponentSelectedList2"},3:{borderClass:"personalizationsmarteditComponentSelected3",listClass:"personalizationsmarteditComponentSelectedList3"},4:{borderClass:"personalizationsmarteditComponentSelected4",listClass:"personalizationsmarteditComponentSelectedList4"},5:{borderClass:"personalizationsmarteditComponentSelected5",listClass:"personalizationsmarteditComponentSelectedList5"},6:{borderClass:"personalizationsmarteditComponentSelected6",listClass:"personalizationsmarteditComponentSelectedList6"},7:{borderClass:"personalizationsmarteditComponentSelected7",listClass:"personalizationsmarteditComponentSelectedList7"},8:{borderClass:"personalizationsmarteditComponentSelected8",listClass:"personalizationsmarteditComponentSelectedList8"},9:{borderClass:"personalizationsmarteditComponentSelected9",listClass:"personalizationsmarteditComponentSelectedList9"},10:{borderClass:"personalizationsmarteditComponentSelected10",listClass:"personalizationsmarteditComponentSelectedList10"},11:{borderClass:"personalizationsmarteditComponentSelected11",listClass:"personalizationsmarteditComponentSelectedList11"},12:{borderClass:"personalizationsmarteditComponentSelected12",listClass:"personalizationsmarteditComponentSelectedList12"},13:{borderClass:"personalizationsmarteditComponentSelected13",listClass:"personalizationsmarteditComponentSelectedList13"},14:{borderClass:"personalizationsmarteditComponentSelected14",listClass:"personalizationsmarteditComponentSelectedList14"}}};var b={provide:"COMBINED_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.combinedview.toolbar"};var I={provide:"CUSTOMIZE_VIEW_TOOLBAR_ITEM_KEY",useValue:"personalizationsmartedit.container.pagecustomizations.toolbar"};var w=function(){PersonalizationsmarteditUtils.$inject=["$translate","l10nFilter","PERSONALIZATION_MODEL_STATUS_CODES","PERSONALIZATION_VIEW_STATUS_MAPPING_CODES","PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING","catalogService"];function PersonalizationsmarteditUtils(e,t,n,i,o,r){this.$translate=e;this.l10nFilter=t;this.PERSONALIZATION_MODEL_STATUS_CODES=n;this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES=i;this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING=o;this.catalogService=r}PersonalizationsmarteditUtils.prototype.pushToArrayIfValueExists=function(e,t,n){if(n){e.push({key:t,value:n})}};PersonalizationsmarteditUtils.prototype.pushToArrayIfValueExists.$inject=["array","sKey","sValue"];PersonalizationsmarteditUtils.prototype.getVariationCodes=function(e){if(typeof e===undefined||e===null){return[]}var t=e.map((function(e){return e.code})).filter((function(e){return typeof e!=="undefined"}));return t};PersonalizationsmarteditUtils.prototype.getVariationCodes.$inject=["variations"];PersonalizationsmarteditUtils.prototype.getVariationKey=function(e,t){if(e===undefined||t===undefined){return[]}var n=t.map((function(t){return{variationCode:t.code,customizationCode:e,catalog:t.catalog,catalogVersion:t.catalogVersion}}));return n};PersonalizationsmarteditUtils.prototype.getVariationKey.$inject=["customizationId","variations"];PersonalizationsmarteditUtils.prototype.getSegmentTriggerForVariation=function(e){var t=e.triggers||[];var n=t.filter((function(e){return e.type==="segmentTriggerData"}));if(n.length===0){return{}}return n[0]};PersonalizationsmarteditUtils.prototype.getSegmentTriggerForVariation.$inject=["variation"];PersonalizationsmarteditUtils.prototype.isPersonalizationItemEnabled=function(e){return e.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED};PersonalizationsmarteditUtils.prototype.isPersonalizationItemEnabled.$inject=["item"];PersonalizationsmarteditUtils.prototype.getEnablementTextForCustomization=function(e,t){t=t||"personalization";if(this.isPersonalizationItemEnabled(e)){return this.$translate.instant(t+".customization.enabled")}else{return this.$translate.instant(t+".customization.disabled")}};PersonalizationsmarteditUtils.prototype.getEnablementTextForCustomization.$inject=["customization","keyPrefix"];PersonalizationsmarteditUtils.prototype.getEnablementTextForVariation=function(e,t){t=t||"personalization";if(this.isPersonalizationItemEnabled(e)){return this.$translate.instant(t+".variation.enabled")}else{return this.$translate.instant(t+".variation.disabled")}};PersonalizationsmarteditUtils.prototype.getEnablementTextForVariation.$inject=["variation","keyPrefix"];PersonalizationsmarteditUtils.prototype.getEnablementActionTextForVariation=function(e,t){t=t||"personalization";if(this.isPersonalizationItemEnabled(e)){return this.$translate.instant(t+".variation.options.disable")}else{return this.$translate.instant(t+".variation.options.enable")}};PersonalizationsmarteditUtils.prototype.getEnablementActionTextForVariation.$inject=["variation","keyPrefix"];PersonalizationsmarteditUtils.prototype.getActivityStateForCustomization=function(e){if(e.status===this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED){var t=new Date(e.enabledStartDate);var n=new Date(e.enabledEndDate);var i=_(t).isValid();var o=_(n).isValid();if(!i&&!o||i&&!o&&_().isAfter(t,"minute")||!i&&o&&_().isBefore(n,"minute")||_().isBetween(t,n,"minute","[]")){return"perso__status--enabled"}else{return"perso__status--ignore"}}else{return"perso__status--disabled"}};PersonalizationsmarteditUtils.prototype.getActivityStateForCustomization.$inject=["customization"];PersonalizationsmarteditUtils.prototype.getActivityStateForVariation=function(e,t){if(t.enabled){return this.getActivityStateForCustomization(e)}else{return"perso__status--disabled"}};PersonalizationsmarteditUtils.prototype.getActivityStateForVariation.$inject=["customization","variation"];PersonalizationsmarteditUtils.prototype.isItemVisible=function(e){return e.status!=="DELETED"};PersonalizationsmarteditUtils.prototype.isItemVisible.$inject=["item"];PersonalizationsmarteditUtils.prototype.getVisibleItems=function(e){var t=this;return e.filter((function(e){return t.isItemVisible(e)}))};PersonalizationsmarteditUtils.prototype.getVisibleItems.$inject=["items"];PersonalizationsmarteditUtils.prototype.getValidRank=function(e,t,n){var i=e.indexOf(t);var o=n<0?-1:1;var r=i+n;while(r>=0&&r<e.length&&!this.isItemVisible(e[r])){r+=o}r=r>=e.length?e.length-1:r;r=r<0?0:r;return e[r].rank};PersonalizationsmarteditUtils.prototype.getValidRank.$inject=["items","item","increaseValue"];PersonalizationsmarteditUtils.prototype.getStatusesMapping=function(){var e=[];e.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ALL,text:"personalization.context.status.all",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED,this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]});e.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.ENABLED,text:"personalization.context.status.enabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.ENABLED]});e.push({code:this.PERSONALIZATION_VIEW_STATUS_MAPPING_CODES.DISABLED,text:"personalization.context.status.disabled",modelStatuses:[this.PERSONALIZATION_MODEL_STATUS_CODES.DISABLED]});return e};PersonalizationsmarteditUtils.prototype.getClassForElement=function(e){var t=e%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING[t].listClass};PersonalizationsmarteditUtils.prototype.getClassForElement.$inject=["index"];PersonalizationsmarteditUtils.prototype.getLetterForElement=function(e){var t=e%Object.keys(this.PERSONALIZATION_COMBINED_VIEW_CSS_MAPPING).length;return String.fromCharCode("a".charCodeAt(0)+t).toUpperCase()};PersonalizationsmarteditUtils.prototype.getLetterForElement.$inject=["index"];PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltip=function(e,t,n){var i=this;t=t||"";n=n||"\n";var r="";o.forEach(e.commerceCustomizations,(function(e,o){r+=t+i.$translate.instant("personalization.modal.manager.commercecustomization."+o)+": "+e+n}));return r};PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltip.$inject=["variation","prefix","suffix"];PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltipHTML=function(e){return this.getCommerceCustomizationTooltip(e,"<div>","</div>")};PersonalizationsmarteditUtils.prototype.getCommerceCustomizationTooltipHTML.$inject=["variation"];PersonalizationsmarteditUtils.prototype.isItemFromCurrentCatalog=function(e,t){var n=t.seExperienceData.catalogDescriptor;return e.catalog===n.catalogId&&e.catalogVersion===n.catalogVersion};PersonalizationsmarteditUtils.prototype.isItemFromCurrentCatalog.$inject=["item","seData"];PersonalizationsmarteditUtils.prototype.hasCommerceActions=function(e){return e.numberOfCommerceActions>0};PersonalizationsmarteditUtils.prototype.hasCommerceActions.$inject=["variation"];PersonalizationsmarteditUtils.prototype.getCatalogVersionNameByUuid=function(e){var t=this;return this.catalogService.getCatalogVersionByUuid(e).then((function(e){return t.l10nFilter(e.catalogName)+" ("+e.version+")"}))};PersonalizationsmarteditUtils.prototype.getCatalogVersionNameByUuid.$inject=["catalogVersionUuid"];PersonalizationsmarteditUtils.prototype.getAndSetCatalogVersionNameL10N=function(e){this.getCatalogVersionNameByUuid(e.catalog+"/"+e.catalogVersion).then((function(t){e.catalogVersionNameL10N=t}))};PersonalizationsmarteditUtils.prototype.getAndSetCatalogVersionNameL10N.$inject=["customization"];PersonalizationsmarteditUtils.prototype.uniqueArray=function(e,t,n){n=n||"code";t.forEach((function(t){if(!e.some((function(e){return e[n]===t[n]}))){e.push(t)}}));return e};PersonalizationsmarteditUtils.prototype.uniqueArray.$inject=["array1","array2","fieldName"];PersonalizationsmarteditUtils=__decorate([i.SeInjectable(),__metadata("design:paramtypes",[Function,Object,Object,Object,Object,i.ICatalogService])],PersonalizationsmarteditUtils);return PersonalizationsmarteditUtils}();var E=r;var P=function(){DateTimePickerRangeComponent.$inject=["DATE_CONSTANTS","personalizationsmarteditDateUtils","$element","$scope","languageService"];function DateTimePickerRangeComponent(e,t,n,i,o){this.DATE_CONSTANTS=e;this.personalizationsmarteditDateUtils=t;this.$element=n;this.$scope=i;this.languageService=o;this.placeholderText="personalization.commons.datetimepicker.placeholder";this.isFromDateValid=false;this.isToDateValid=false;this.isEndDateInThePast=false}DateTimePickerRangeComponent.prototype.$onInit=function(){this.actionsIfisEditable()};DateTimePickerRangeComponent.prototype.getDateOrDefault=function(e){try{return E(new Date(e))}catch(e){return false}};DateTimePickerRangeComponent.prototype.getDateOrDefault.$inject=["date"];DateTimePickerRangeComponent.prototype.actionsIfisEditable=function(){var e=this;if(this.isEditable){this.getFromPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:true,showClose:true,useCurrent:false,widgetPositioning:{horizontal:"right",vertical:"bottom"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.update dp.hide dp.change",function(e){var t=this.personalizationsmarteditDateUtils.formatDate(e.date,undefined);if(this.personalizationsmarteditDateUtils.isDateValidOrEmpty(t)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateTo)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(t,this.dateTo)){t=o.copy(this.dateTo)}this.dateFrom=t}.bind(this));this.getToPickerNode().datetimepicker({format:this.DATE_CONSTANTS.MOMENT_FORMAT,showClear:true,showClose:true,useCurrent:false,widgetPositioning:{horizontal:"right",vertical:"bottom"},locale:this.languageService.getBrowserLocale().split("-")[0]}).on("dp.change dp.hide dp.change",function(e){var t=this.personalizationsmarteditDateUtils.formatDate(e.date,undefined);if(this.personalizationsmarteditDateUtils.isDateValidOrEmpty(t)&&this.personalizationsmarteditDateUtils.isDateValidOrEmpty(this.dateFrom)&&!this.personalizationsmarteditDateUtils.isDateRangeValid(this.dateFrom,t)){t=o.copy(this.dateFrom)}this.dateTo=t}.bind(this));this.$scope.$watch("this.$ctrl.dateFrom",(function(){e.isFromDateValid=e.personalizationsmarteditDateUtils.isDateValidOrEmpty(e.dateFrom);if(e.personalizationsmarteditDateUtils.isDateStrFormatValid(e.dateFrom,e.DATE_CONSTANTS.MOMENT_FORMAT)){e.getToDatetimepicker().minDate(e.getMinToDate(e.dateFrom))}else{e.getToDatetimepicker().minDate(E())}}),true);this.$scope.$watch("this.$ctrl.dateTo",(function(){var t=e.personalizationsmarteditDateUtils.isDateValidOrEmpty(e.dateTo);if(t){e.isToDateValid=true;e.isEndDateInThePast=e.personalizationsmarteditDateUtils.isDateInThePast(e.dateTo)}else{e.isToDateValid=false;e.isEndDateInThePast=false}if(e.personalizationsmarteditDateUtils.isDateStrFormatValid(e.dateTo,e.DATE_CONSTANTS.MOMENT_FORMAT)){e.getFromDatetimepicker().maxDate(e.getDateOrDefault(e.dateTo))}else if(e.dateTo===""){e.getFromDatetimepicker().maxDate(false)}}),true)}};DateTimePickerRangeComponent.prototype.getMinToDate=function(e){if(!this.personalizationsmarteditDateUtils.isDateInThePast(e)){return this.getDateOrDefault(e)}else{return E()}};DateTimePickerRangeComponent.prototype.getMinToDate.$inject=["date"];DateTimePickerRangeComponent.prototype.getFromPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-from")};DateTimePickerRangeComponent.prototype.getFromDatetimepicker=function(){return this.getFromPickerNode().datetimepicker().data("DateTimePicker")};DateTimePickerRangeComponent.prototype.getToPickerNode=function(){return this.$element.querySelectorAll("#date-picker-range-to")};DateTimePickerRangeComponent.prototype.getToDatetimepicker=function(){return this.getToPickerNode().datetimepicker().data("DateTimePicker")};DateTimePickerRangeComponent=__decorate([i.SeComponent({templateUrl:"dateTimePickerRangeTemplate.html",inputs:["name: =","dateFrom: =","dateTo: =","isEditable: =","dateFormat: ="]}),__metadata("design:paramtypes",[Object,f,HTMLElement,Object,i.LanguageService])],DateTimePickerRangeComponent);return DateTimePickerRangeComponent}();var T=function(){IsDateValidOrEmptyDirective.$inject=["personalizationsmarteditDateUtils"];function IsDateValidOrEmptyDirective(e){this.personalizationsmarteditDateUtils=e}IsDateValidOrEmptyDirective.prototype.isDateInThePast=function(e){return this.personalizationsmarteditDateUtils.isDateValidOrEmpty(e)};IsDateValidOrEmptyDirective.prototype.isDateInThePast.$inject=["modelValue"];IsDateValidOrEmptyDirective=__decorate([i.SeDirective({require:"ngModel",selector:"[isdatevalidorempty]"}),__metadata("design:paramtypes",[f])],IsDateValidOrEmptyDirective);return IsDateValidOrEmptyDirective}();var A=function(){PaginationHelper.$inject=["initialData"];function PaginationHelper(e){if(e===void 0){e={}}this.count=e.count||0;this.page=e.page||0;this.totalCount=e.totalCount||0;this.totalPages=e.totalPages||0}PaginationHelper.prototype.reset=function(){this.count=50;this.page=-1;this.totalPages=1;this.totalCount=0};PaginationHelper.prototype.getCount=function(){return this.count};PaginationHelper.prototype.getPage=function(){return this.page};PaginationHelper.prototype.getTotalCount=function(){return this.totalCount};PaginationHelper.prototype.getTotalPages=function(){return this.totalPages};PaginationHelper=__decorate([i.SeInjectable(),__metadata("design:paramtypes",[Object])],PaginationHelper);return PaginationHelper}();var D=function(){PersonalizationsmarteditScrollZoneComponent.$inject=["$scope","$timeout","$compile","yjQuery"];function PersonalizationsmarteditScrollZoneComponent(e,t,n,i){this.$scope=e;this.$timeout=t;this.$compile=n;this.yjQuery=i;this.scrollZoneTop=true;this.scrollZoneBottom=true;this.start=false;this.scrollZoneVisible=false;this.isTransparent=false;this.elementToScroll=null;this.scrollZoneId=""}PersonalizationsmarteditScrollZoneComponent.prototype.stopScroll=function(){this.start=false};PersonalizationsmarteditScrollZoneComponent.prototype.scrollTop=function(){var e=this;if(!this.start){return}this.elementToScroll=this.elementToScroll||this.getElementToScroll();this.scrollZoneTop=this.elementToScroll.scrollTop()<=2?false:true;this.scrollZoneBottom=true;this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()-15);this.$timeout((function(){e.scrollTop()}),100)};PersonalizationsmarteditScrollZoneComponent.prototype.scrollBottom=function(){var e=this;if(!this.start){return}this.elementToScroll=this.elementToScroll||this.getElementToScroll();this.scrollZoneTop=true;var t=this.elementToScroll.get(0).scrollHeight-this.elementToScroll.scrollTop();this.scrollZoneBottom=Math.abs(t-this.elementToScroll.outerHeight())<2?false:true;this.elementToScroll.scrollTop(this.elementToScroll.scrollTop()+15);this.$timeout((function(){e.scrollBottom()}),100)};PersonalizationsmarteditScrollZoneComponent.prototype.$onChanges=function(e){if(e.scrollZoneVisible){this.start=e.scrollZoneVisible.currentValue;this.scrollZoneTop=true;this.scrollZoneBottom=true}};PersonalizationsmarteditScrollZoneComponent.prototype.$onChanges.$inject=["changes"];PersonalizationsmarteditScrollZoneComponent.prototype.$onInit=function(){var e=this.$compile('<div id="sliderTopScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneTopTemplate.html\'"></div>')(this.$scope);o.element("body").append(e);var t=this.$compile('<div id="sliderBottomScrollZone'+this.scrollZoneId+'" data-ng-include="\'personalizationsmarteditScrollZoneBottomTemplate.html\'"></div>')(this.$scope);o.element("body").append(t)};PersonalizationsmarteditScrollZoneComponent.prototype.$onDestroy=function(){var e=this;o.element("#sliderTopScrollZone"+this.scrollZoneId).scope().$destroy();o.element("#sliderTopScrollZone"+this.scrollZoneId).remove();o.element("#sliderBottomScrollZone"+this.scrollZoneId).scope().$destroy();o.element("#sliderBottomScrollZone"+this.scrollZoneId).remove();o.element("body").contents().each((function(t){if(t.nodeType===Node.COMMENT_NODE&&t.data.indexOf("personalizationsmarteditScrollZone")>-1){e.yjQuery(t).remove()}}))};PersonalizationsmarteditScrollZoneComponent=__decorate([i.SeComponent({inputs:["scrollZoneVisible","getElementToScroll: &","isTransparent","scrollZoneId"]}),__metadata("design:paramtypes",[Object,Object,Object,Function])],PersonalizationsmarteditScrollZoneComponent);return PersonalizationsmarteditScrollZoneComponent}();var O=function(){PersonalizationsmarteditMessageHandler.$inject=["alertService"];function PersonalizationsmarteditMessageHandler(e){this.alertService=e}PersonalizationsmarteditMessageHandler.prototype.sendInformation=function(e){this.alertService.showInfo(e)};PersonalizationsmarteditMessageHandler.prototype.sendInformation.$inject=["informationMessage"];PersonalizationsmarteditMessageHandler.prototype.sendError=function(e){this.alertService.showDanger(e)};PersonalizationsmarteditMessageHandler.prototype.sendError.$inject=["errorMessage"];PersonalizationsmarteditMessageHandler.prototype.sendWarning=function(e){this.alertService.showWarning(e)};PersonalizationsmarteditMessageHandler.prototype.sendWarning.$inject=["warningMessage"];PersonalizationsmarteditMessageHandler.prototype.sendSuccess=function(e){this.alertService.showSuccess(e)};PersonalizationsmarteditMessageHandler.prototype.sendSuccess.$inject=["successMessage"];PersonalizationsmarteditMessageHandler=__decorate([i.SeInjectable(),__metadata("design:paramtypes",[Object])],PersonalizationsmarteditMessageHandler);return PersonalizationsmarteditMessageHandler}();var R=function(){function PersonalizationsmarteditCommerceCustomizationService(){this.nonCommerceActionTypes=["cxCmsActionData"];this.types=[]}PersonalizationsmarteditCommerceCustomizationService.prototype.isNonCommerceAction=function(e){return this.nonCommerceActionTypes.some((function(t){return t===e.type}))};PersonalizationsmarteditCommerceCustomizationService.prototype.isNonCommerceAction.$inject=["action"];PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceAction=function(e){return!this.isNonCommerceAction(e)};PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceAction.$inject=["action"];PersonalizationsmarteditCommerceCustomizationService.prototype.isTypeEnabled=function(e,t){return t!==undefined&&t!==null&&t[e.confProperty]===true};PersonalizationsmarteditCommerceCustomizationService.prototype.isTypeEnabled.$inject=["type","seConfigurationData"];PersonalizationsmarteditCommerceCustomizationService.prototype.registerType=function(e){var t=e.type;var n=false;this.types.forEach((function(e){if(e.type===t){n=true}}));if(!n){this.types.push(e)}};PersonalizationsmarteditCommerceCustomizationService.prototype.registerType.$inject=["item"];PersonalizationsmarteditCommerceCustomizationService.prototype.getAvailableTypes=function(e){var t=this;return this.types.filter((function(n){return t.isTypeEnabled(n,e)}))};PersonalizationsmarteditCommerceCustomizationService.prototype.getAvailableTypes.$inject=["seConfigurationData"];PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceCustomizationEnabled=function(e){var t=this.getAvailableTypes(e);return t.length>0};PersonalizationsmarteditCommerceCustomizationService.prototype.isCommerceCustomizationEnabled.$inject=["seConfigurationData"];PersonalizationsmarteditCommerceCustomizationService.prototype.getNonCommerceActionsCount=function(e){return(e.actions||[]).filter(this.isNonCommerceAction,this).length};PersonalizationsmarteditCommerceCustomizationService.prototype.getNonCommerceActionsCount.$inject=["variation"];PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCountMap=function(e){var t={};(e.actions||[]).filter(this.isCommerceAction,this).forEach((function(e){var n=e.type.toLowerCase();var i=t[n];if(i===undefined){i=1}else{i+=1}t[n]=i}));return t};PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCountMap.$inject=["variation"];PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCount=function(e){return(e.actions||[]).filter(this.isCommerceAction,this).length};PersonalizationsmarteditCommerceCustomizationService.prototype.getCommerceActionsCount.$inject=["variation"];PersonalizationsmarteditCommerceCustomizationService=__decorate([i.SeInjectable()],PersonalizationsmarteditCommerceCustomizationService);return PersonalizationsmarteditCommerceCustomizationService}();var M=function(){PersonalizationCurrentElementDirective.$inject=["$scope","$element","$attrs"];function PersonalizationCurrentElementDirective(e,t,n){this.$scope=e;this.$element=t;this.$attrs=n}PersonalizationCurrentElementDirective.prototype.$postLink=function(){if(this.$attrs.personalizationCurrentElement){this.$scope.$parent.$eval(this.$attrs.personalizationCurrentElement)(this.$element.parent())}};PersonalizationCurrentElementDirective=__decorate([i.SeDirective({selector:"[personalization-current-element]"}),__metadata("design:paramtypes",[Object,Object,Object])],PersonalizationCurrentElementDirective);return PersonalizationCurrentElementDirective}();var x=function(){PersonalizationInfiniteScrollDirectiveOld.$inject=["$scope","$element","$attrs","$rootScope","yjQuery","$window","$timeout"];function PersonalizationInfiniteScrollDirectiveOld(e,t,n,i,o,r,a){this.$scope=e;this.$element=t;this.$attrs=n;this.$rootScope=i;this.yjQuery=o;this.$window=r;this.$timeout=a}PersonalizationInfiniteScrollDirectiveOld.prototype.$postLink=function(){var e=this;var t;var n;var i;var r;this.$window=o.element(this.$window);i=0;if(this.$attrs.personalizationInfiniteScrollDistance!==null){this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDistance,(function(e){i=parseInt(e,10);return i}))}r=true;t=false;if(this.$attrs.personalizationInfiniteScrollDisabled!==null){this.$scope.$parent.$watch(this.$attrs.personalizationInfiniteScrollDisabled,(function(e){r=!e;if(r&&t){t=false;return n()}}))}this.$rootScope.$on("refreshStart",(function(){e.$element.animate({scrollTop:"0"})}));n=function(){var n;var o;var a;var s;var c;if(e.$element.children().length<=0){return}n=e.yjQuery(e.$element.children()[0]);o=e.$element.offset().top+e.$element.height();c=n.offset().top+n.height();a=c-o;s=a<=e.$element.height()*i;if(s&&r){if(e.$rootScope.$$phase){return e.$scope.$parent.$eval(e.$attrs.personalizationInfiniteScroll)}else{return e.$scope.$parent.$apply(e.$attrs.personalizationInfiniteScroll)}}else if(s){t=true;return t}};this.$element.on("scroll",n);this.$scope.$parent.$on("$destroy",(function(){return e.$window.off("scroll",n)}));return this.$timeout((function(){if(e.$attrs.personalizationInfiniteScrollImmediateCheck){if(e.$scope.$parent.$eval(e.$attrs.personalizationInfiniteScrollImmediateCheck)){return n()}}else{return n()}}),0)};PersonalizationInfiniteScrollDirectiveOld=__decorate([i.SeDirective({selector:"[personalization-infinite-scroll]"}),__metadata("design:paramtypes",[Object,Object,Object,Object,Function,Object,Object])],PersonalizationInfiniteScrollDirectiveOld);return PersonalizationInfiniteScrollDirectiveOld}();var N=function(){function PersonalizationsmarteditCommonsModule(){}PersonalizationsmarteditCommonsModule=__decorate([i.SeModule({imports:["personalizationsmarteditCommonTemplates","smarteditServicesModule","yjqueryModule","l10nModule","alertServiceModule"],providers:[A,{provide:"PaginationHelper",useFactory:function(){return function(e){return new A(e)}}},f,g,v,y,C,S,b,I,w,O,R],declarations:[T,M,x,P,D]})],PersonalizationsmarteditCommonsModule);return PersonalizationsmarteditCommonsModule}();window.__smartedit__.addDecoratorPayload("Component","PersonalizationsmarteditInfiniteScrollingComponent",{selector:"personalization-infinite-scrolling",template:'<div [ngClass]="dropDownContainerClass" persoInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div [ngClass]="dropDownClass"><ng-content></ng-content></div></div>'});var k=function(){function PersonalizationsmarteditInfiniteScrollingComponent(){this.distance=80;this.initiated=false}PersonalizationsmarteditInfiniteScrollingComponent.prototype.ngOnInit=function(){this.context=this.context||this;this.init()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.ngOnChanges=function(){this.init()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.nextPage=function(){this.fetchPage()};PersonalizationsmarteditInfiniteScrollingComponent.prototype.init=function(){var e=this.initiated;this.initiated=true;if(e){this.nextPage()}};__decorate([a.Input(),__metadata("design:type",String)],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"dropDownContainerClass",void 0);__decorate([a.Input(),__metadata("design:type",String)],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"dropDownClass",void 0);__decorate([a.Input(),__metadata("design:type",Number)],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"distance",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"context",void 0);__decorate([a.Input(),__metadata("design:type",Function)],PersonalizationsmarteditInfiniteScrollingComponent.prototype,"fetchPage",void 0);PersonalizationsmarteditInfiniteScrollingComponent=__decorate([i.SeDowngradeComponent(),a.Component({selector:"personalization-infinite-scrolling",template:'<div [ngClass]="dropDownContainerClass" persoInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div [ngClass]="dropDownClass"><ng-content></ng-content></div></div>'})],PersonalizationsmarteditInfiniteScrollingComponent);return PersonalizationsmarteditInfiniteScrollingComponent}();var F=function(){function PersonalizationInfiniteScrollDirective(e){this.element=e;this.scrollPercent=75;this.onScrollAction=new a.EventEmitter}PersonalizationInfiniteScrollDirective.prototype.ngOnInit=function(){var e=this;this.scrollEvent=c.fromEvent(this.element.nativeElement,"scroll");this.subscription=this.scrollEvent.subscribe((function(t){if((t.target.scrollTop+t.target.offsetHeight)/t.target.scrollHeight>e.scrollPercent/100){e.onScrollAction.emit(null)}}))};PersonalizationInfiniteScrollDirective.prototype.ngOnDestroy=function(){if(this.subscription){this.subscription.unsubscribe()}};__decorate([a.Input(),__metadata("design:type",Number)],PersonalizationInfiniteScrollDirective.prototype,"scrollPercent",void 0);__decorate([a.Output(),__metadata("design:type",Object)],PersonalizationInfiniteScrollDirective.prototype,"onScrollAction",void 0);PersonalizationInfiniteScrollDirective=__decorate([a.Directive({selector:"[persoInfiniteScroll]"}),__param(0,a.Inject(a.ElementRef)),__metadata("design:paramtypes",[a.ElementRef])],PersonalizationInfiniteScrollDirective);return PersonalizationInfiniteScrollDirective}();var z=function(){function PersonalizationPreventParentScrollDirective(e){var t=this;this.element=e;this.mouseWheelEventHandler=function(e){return t.onMouseWheel(e)}}PersonalizationPreventParentScrollDirective.prototype.ngOnInit=function(){var e=this.element.nativeElement;e.addEventListener("mousewheel",this.mouseWheelEventHandler);e.addEventListener("DOMMouseScroll",this.mouseWheelEventHandler)};PersonalizationPreventParentScrollDirective.prototype.ngOnDestroy=function(){var e=this.element.nativeElement;e.removeEventListener("mousewheel",this.mouseWheelEventHandler);e.removeEventListener("DOMMouseScroll",this.mouseWheelEventHandler)};PersonalizationPreventParentScrollDirective.prototype.onMouseWheel=function(e){var t=this.element.nativeElement;var n=e.originalEvent&&(e.originalEvent.wheelDeltaY||e.originalEvent.wheelDelta);var i=-(e.deltaY||e.delta)||0;t.parentElement.parentElement.parentElement.scrollTop-=e.wheelDeltaY||n||e.wheelDelta||i;e.stopPropagation();e.preventDefault();e.returnValue=false};PersonalizationPreventParentScrollDirective=__decorate([a.Directive({selector:"[persoPreventParentScroll]"}),__param(0,a.Inject(a.ElementRef)),__metadata("design:paramtypes",[a.ElementRef])],PersonalizationPreventParentScrollDirective);return PersonalizationPreventParentScrollDirective}();window.__smartedit__.addDecoratorPayload("Component","PersonalizationPreventParentScrollComponent",{selector:"personalization-prevent-parent-scroll",template:"<div persoPreventParentScroll><ng-content></ng-content></div>"});var L=function(){function PersonalizationPreventParentScrollComponent(){}PersonalizationPreventParentScrollComponent=__decorate([i.SeDowngradeComponent(),a.Component({selector:"personalization-prevent-parent-scroll",template:"<div persoPreventParentScroll><ng-content></ng-content></div>"})],PersonalizationPreventParentScrollComponent);return PersonalizationPreventParentScrollComponent}();var V=function(){function PersonalizationsmarteditCommonsComponentsModule(){}PersonalizationsmarteditCommonsComponentsModule=__decorate([a.NgModule({imports:[s.CommonModule],declarations:[F,z,k,L],entryComponents:[k,L],exports:[F,z,k,L]})],PersonalizationsmarteditCommonsComponentsModule);return PersonalizationsmarteditCommonsComponentsModule}();var $=function(){BaseSiteHeaderInterceptor.$inject=["sharedDataService"];function BaseSiteHeaderInterceptor(e){this.sharedDataService=e}e=BaseSiteHeaderInterceptor;BaseSiteHeaderInterceptor.prototype.intercept=function(t,n){if(e.PERSONALIZATION_ENDPOINT.test(t.url)){return c.from(this.sharedDataService.get("experience")).pipe(l.switchMap((function(i){if(i.catalogDescriptor.siteId){var o=t.clone({headers:t.headers.set(e.HEADER_NAME,i.catalogDescriptor.siteId)});return n.handle(o)}return n.handle(t)})))}else{return n.handle(t)}};BaseSiteHeaderInterceptor.prototype.intercept.$inject=["request","next"];var e;BaseSiteHeaderInterceptor.HEADER_NAME="Basesite";BaseSiteHeaderInterceptor.PERSONALIZATION_ENDPOINT=/\/personalizationwebservices/;BaseSiteHeaderInterceptor=e=__decorate([a.Injectable(),__metadata("design:paramtypes",[i.ISharedDataService])],BaseSiteHeaderInterceptor);return BaseSiteHeaderInterceptor}();t.BaseSiteHeaderInterceptor=$;t.CombinedView=u;t.Customize=p;t.DateTimePickerRangeComponent=P;t.IsDateValidOrEmptyDirective=T;t.PaginationHelper=A;t.Personalization=d;t.PersonalizationPreventParentScrollComponent=L;t.PersonalizationsmarteditCommerceCustomizationService=R;t.PersonalizationsmarteditCommonsComponentsModule=V;t.PersonalizationsmarteditCommonsModule=N;t.PersonalizationsmarteditContextUtils=g;t.PersonalizationsmarteditDateUtils=f;t.PersonalizationsmarteditInfiniteScrollingComponent=k;t.PersonalizationsmarteditMessageHandler=O;t.PersonalizationsmarteditScrollZoneComponent=D;t.PersonalizationsmarteditUtils=w;t.SeData=m},1060:function(e,t,n){},1061:function(e,t,n){"use strict";var i=n(114);var o=n(0);var r=n(132);var a=n(93);var s=n(1062);(function(){var e=e||window.angular;var t=null;try{t=e.module("merchandisingsmarteditContainerTemplates")}catch(e){}t=t||e.module("merchandisingsmarteditContainerTemplates",[]);t.run(["$templateCache",function(e){}])})();i.module("merchandisingsmarteditContainer",["loadConfigModule","smarteditServicesModule"]).run(["loadConfigManagerService","sharedDataService",function(e,t){"ngInject";e.loadAsObject().then((function(e){t.set("contextDrivenServicesMerchandisingUrl",e.contextDrivenServicesMerchandisingUrl)}))}]);function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}var c=function(){function MerchandisingSmartEditContainerModule(){}MerchandisingSmartEditContainerModule=__decorate([a.SeEntryModule("merchandisingsmarteditContainer"),o.NgModule({imports:[],declarations:[],entryComponents:[],providers:[{provide:r.HTTP_INTERCEPTORS,useClass:s.MerchandisingExperienceInterceptor,multi:true}]})],MerchandisingSmartEditContainerModule);return MerchandisingSmartEditContainerModule}()},1062:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(0);var o=n(49);var r=n(52);var a=n(93);(function(){var e=e||window.angular;var t=null;try{t=e.module("merchandisingsmarteditCommonTemplates")}catch(e){}t=t||e.module("merchandisingsmarteditCommonTemplates",[]);t.run(["$templateCache",function(e){}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}var s=function(){MerchandisingExperienceInterceptor.$inject=["sharedDataService"];function MerchandisingExperienceInterceptor(e){this.sharedDataService=e}e=MerchandisingExperienceInterceptor;MerchandisingExperienceInterceptor.prototype.intercept=function(t,n){if(e.MERCHCMSWEBSERVICES_PATH.test(t.url)){return o.from(this.sharedDataService.get("experience")).pipe(r.switchMap((function(e){if(e){if(t.url.indexOf(a.CONTEXT_SITE_ID)>-1){var i=t.params;if(i){i=i.delete("catalogId").delete("catalogVersion").delete("mask")}var o=t.clone({url:t.url.replace(a.CONTEXT_SITE_ID,e.catalogDescriptor.siteId),params:i});return n.handle(o)}}return n.handle(t)})))}else{return n.handle(t)}};MerchandisingExperienceInterceptor.prototype.intercept.$inject=["request","next"];var e;MerchandisingExperienceInterceptor.MERCHCMSWEBSERVICES_PATH=/\/merchandisingcmswebservices/;MerchandisingExperienceInterceptor=e=__decorate([i.Injectable(),__metadata("design:paramtypes",[a.ISharedDataService])],MerchandisingExperienceInterceptor);return MerchandisingExperienceInterceptor}();t.MerchandisingExperienceInterceptor=s},1063:function(e,t,n){},1064:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(1065);var o=n(93);var r=n(274);var a=n(132);var s=n(0);var c=n(22);var l=n(45);var d=n(137);function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var p=function(){function Smarteditloader(){}Smarteditloader=__decorate([o.SeModule({imports:[r.LegacySmarteditServicesModule,o.TemplateCacheDecoratorModule,"coretemplates","translationServiceModule"],config:["$logProvider",function(e){"ngInject";e.debugEnabled(false)}],providers:[r.BootstrapService],initialize:["ssoAuthenticationHelper","loadConfigManagerService","bootstrapService",function(e,t,n){"ngInject";if(e.isSSODialog()){e.completeDialog()}else{t.loadAsObject().then((function(e){n.bootstrapContainerModules(e).then((function(e){var t=document.querySelector(o.SMARTEDITLOADER_COMPONENT_NAME);t.parentNode.insertBefore(document.createElement(o.SMARTEDITCONTAINER_COMPONENT_NAME),t);i.platformBrowserDynamic().bootstrapModule(r.SmarteditContainerFactory(e),{ngZone:o.commonNgZone}).then((function(e){})).catch((function(e){return console.log(e)}))}))}))}}]})],Smarteditloader);return Smarteditloader}();var u="legacy-loader";window.__smartedit__.addDecoratorPayload("Component","SmarteditloaderComponent",{selector:o.SMARTEDITLOADER_COMPONENT_NAME,template:"<"+u+"></"+u+">"});var m=function(){function SmarteditloaderComponent(e,t,n){this.elementRef=e;this.upgrade=t}SmarteditloaderComponent.prototype.ngAfterViewInit=function(){this.upgrade.bootstrap(this.elementRef.nativeElement.querySelector(u),[p.moduleName],{strictDi:false})};SmarteditloaderComponent=__decorate([s.Component({selector:o.SMARTEDITLOADER_COMPONENT_NAME,template:"<"+u+"></"+u+">"}),__metadata("design:paramtypes",[s.ElementRef,d.UpgradeModule,s.Injector])],SmarteditloaderComponent);return SmarteditloaderComponent}();var SmarteditLoaderFactory=function(e){var t=function(){function Smarteditloader(){}Smarteditloader=__decorate([s.NgModule({schemas:[s.CUSTOM_ELEMENTS_SCHEMA],imports:__spreadArrays([l.BrowserModule,c.FormsModule,c.ReactiveFormsModule,a.HttpClientModule,d.UpgradeModule,o.SmarteditCommonsModule,o.SharedComponentsModule],e,[r.AlertServiceModule,o.HttpInterceptorModule.forRoot(o.UnauthorizedErrorInterceptor,o.RetryInterceptor,o.ResourceNotFoundErrorInterceptor),o.SeTranslationModule.forRoot(r.TranslationsFetchService)]),providers:[o.moduleUtils.provideValues({SSO_CLIENT_ID:o.DEFAULT_AUTHENTICATION_CLIENT_ID}),o.SSOAuthenticationHelper,r.ConfigurationExtractorService,{provide:s.ErrorHandler,useClass:o.SmarteditErrorHandler},r.DelegateRestService,o.RestServiceFactory,{provide:o.IAuthenticationService,useClass:o.AuthenticationService},{provide:o.ISessionService,useClass:r.SessionService},{provide:o.ISharedDataService,useClass:r.SharedDataService},{provide:o.IStorageService,useClass:r.StorageService},r.LoadConfigManagerService,o.moduleUtils.initialize((function(){o.diBridgeUtils.downgradeService("languageService",o.LanguageService);o.diBridgeUtils.downgradeService("httpClient",a.HttpClient);o.diBridgeUtils.downgradeService("restServiceFactory",o.RestServiceFactory);o.diBridgeUtils.downgradeService("ssoAuthenticationHelper",o.SSOAuthenticationHelper);o.diBridgeUtils.downgradeService("authenticationService",o.AuthenticationService,o.IAuthenticationService)}))],declarations:[m],entryComponents:[m],bootstrap:[m]})],Smarteditloader);return Smarteditloader}();return t};var setGlobalBasePathURL=function(){return __awaiter(void 0,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,3,,4]);return[4,window.fetch(o.SETTINGS_URI)];case 1:e=i.sent();return[4,e.json()];case 2:t=i.sent();if(t["smartedit.globalBasePath"]){o.RestServiceFactory.setGlobalBasePath(String(t["smartedit.globalBasePath"]))}return[3,4];case 3:n=i.sent();console.log("Failure on loading Settings URL");return[3,4];case 4:return[2,Promise.resolve()]}}))}))};window.smarteditJQuery(document).ready((function(){if(!o.nodeUtils.hasLegacyAngularJSBootsrap()){if(!document.querySelector(o.SMARTEDITLOADER_COMPONENT_NAME)){document.body.appendChild(document.createElement(o.SMARTEDITLOADER_COMPONENT_NAME))}var e=__spreadArrays(window.__smartedit__.pushedModules);setGlobalBasePathURL().then((function(){i.platformBrowserDynamic().bootstrapModule(SmarteditLoaderFactory(e),{ngZone:o.commonNgZone}).catch((function(e){return console.log(e)}))}))}}));t.legacy=p;t.ng=SmarteditLoaderFactory},1066:function(e,t,n){},1067:function(e,t,n){"use strict";var i=n(114);angular.module("personalizationsearchRestServiceModule",["smarteditServicesModule","personalizationsmarteditCommonsModule","personalizationsmarteditServicesModule"]).factory("personalizationsearchRestService",["restServiceFactory","personalizationsmarteditContextService","personalizationsmarteditUtils",function(e,t,n){var i="/adaptivesearchwebservices/v1/searchprofiles";var o="/personalizationwebservices/v1/query/cxUpdateSearchProfileActionRank";var r="/personalizationwebservices/v1/query/cxGetIndexTypesForSite";var a={};a.getSearchProfiles=function(n){var o=t.getSeData().seExperienceData;var r=(o.productCatalogVersions||[]).map((function(e){return e.catalog+":"+e.catalogVersion})).join(",");var a=e.get(i);var s={catalogVersions:r};n=angular.extend(n,s);return a.get(n)};a.updateSearchProfileActionRank=function(i){var r=t.getSeData().seExperienceData;var a=e.get(o);var s=[];n.pushToArrayIfValueExists(s,"customization",i.customizationCode);n.pushToArrayIfValueExists(s,"variation",i.variationCode);n.pushToArrayIfValueExists(s,"rankBeforeAction",i.rankBeforeAction);n.pushToArrayIfValueExists(s,"rankAfterAction",i.rankAfterAction);n.pushToArrayIfValueExists(s,"actions",i.actions);n.pushToArrayIfValueExists(s,"catalog",r.catalogDescriptor.catalogId);n.pushToArrayIfValueExists(s,"catalogVersion",r.catalogDescriptor.catalogVersion);var c={params:{entry:s}};return a.save(c)};a.getIndexTypesForCatalogVersion=function(i){var o=t.getSeData().seExperienceData;var a=e.get(r);var s=[];n.pushToArrayIfValueExists(s,"baseSiteId",o.catalogDescriptor.siteId);n.pushToArrayIfValueExists(s,"catalog",i.catalog);n.pushToArrayIfValueExists(s,"catalogVersion",i.catalogVersion);var c={params:{entry:s}};return a.save(c)};return a}]);angular.module("personalizationsearchSearchProfilesModule",["personalizationsmarteditCommonsModule","personalizationsmarteditCommerceCustomizationModule","personalizationsmarteditDataFactory","personalizationsearchRestServiceModule","smarteditServicesModule","personalizationsearchSearchProfilesContextServiceModule","ui.tree"]).constant("SEARCH_PROFILE_ACTION_TYPE","cxSearchProfileActionData").run(["$q","$filter","personalizationsearchRestService","personalizationsmarteditCommerceCustomizationService","personalizationsearchSearchProfilesContextService","personalizationsmarteditMessageHandler","SEARCH_PROFILE_ACTION_TYPE",function(e,t,n,i,o,r,a){i.registerType({type:a,text:"personalizationsearchsmartedit.commercecustomization.action.type.search",template:"personalizationsearchSearchProfilesTemplate.html",confProperty:"personalizationsearch.commercecustomization.search.profile.enabled",getName:function(e){return t("translate")("personalizationsearchsmartedit.commercecustomization.search.display.name")+" - "+e.searchProfileCode},updateActions:function(i,a,s,c){var l=e.defer();if(angular.isDefined(c)){o.updateSearchActionContext(c.actions)}var d=o.searchProfileContext;var p=d.searchProfilesOrder.splice(0,1)[0];var u=d.searchProfilesOrder.map((function(e){return e.code})).join(",");var m={customizationCode:d.customizationCode,variationCode:d.variationCode,rankAfterAction:p.code,actions:u};n.updateSearchProfileActionRank(m).then((function successCallback(){l.resolve()}),(function errorCallback(){r.sendError(t("translate")("personalization.error.updatingcustomization"));l.reject()}));return l.promise}})}]).controller("personalizationsearchSearchProfilesController",["$q","$scope","$filter","$timeout","personalizationsearchRestService","personalizationsmarteditMessageHandler","waitDialogService","personalizationsearchSearchProfilesContextService","personalizationsmarteditContextService","PaginationHelper","SEARCH_PROFILE_ACTION_TYPE","PERSONALIZATION_COMMERCE_CUSTOMIZATION_ACTION_STATUSES",function(e,t,n,i,o,r,a,s,c,l,d,p){t.selectedSearchProfile=null;t.availableSearchProfiles=[];t.searchProfileActions=[];t.helpTemplate="<span>"+n("translate")("personalizationsearchsmartedit.commercecustomization.search.helpmsg")+"</span>";t.searchProfileContext=s.searchProfileContext;t.searchProfilePagination=new l;t.searchProfilePagination.reset();t.searchProfileFilter={code:""};var getIndexTypes=function(){var t=e.defer();var n=c.getSeData().seExperienceData;var i=[];angular.forEach(n.productCatalogVersions||[],(function(e){i.push(o.getIndexTypesForCatalogVersion(e))}));e.all(i).then((function successCallback(e){var n={indexTypeIds:[]};angular.forEach(e,(function(e){n.indexTypeIds=n.indexTypeIds.concat(e.indexTypeIds.filter((function(e){return n.indexTypeIds.indexOf(e)<0})))}));t.resolve(n)}),(function errorCallback(e){t.reject(e)}));return t.promise};var getSearchProfileFilterObject=function(){return{code:t.searchProfileFilter.code,pageSize:t.searchProfilePagination.count,currentPage:t.searchProfilePagination.page+1}};var buildAction=function(e){return{type:d,searchProfileCode:e.code,searchProfileCatalog:e.catalogVersion.split(":")[0]}};var getWrapperActionForAction=function(e){return t.actions.filter((function(t){return s.searchProfileActionComparer(e,t.action)}))[0]};t.searchProfileSelected=function(e,n){var i=buildAction(e);t.addAction(i,s.searchProfileActionComparer);n.selected=null};t.isItemInSelectDisabled=function(e){var n=buildAction(e);return t.isItemInSelectedActions(n,s.searchProfileActionComparer)};t.initUiSelect=function(e){e.isActive=function(){return false}};t.removeSelectedSearchAction=function(e){var n=getWrapperActionForAction(e);t.removeSelectedAction(n)};var setStatusForUpdatedActions=function(e){e.forEach((function(e){if(e.status!==p.NEW){e.status=p.UPDATE}}))};t.setSearchActionRank=function(e,n){var i=getWrapperActionForAction(e);var o=getWrapperActionForAction(t.searchProfileActions[t.searchProfileActions.indexOf(e)+n]);var r=t.actions.indexOf(i);var a=t.actions.indexOf(o);t.actions.splice(a,0,t.actions.splice(r,1)[0]);setStatusForUpdatedActions([i,o])};t.isDirty=function(){return true};t.moreSearchProfilestRequestProcessing=false;t.addMoreSearchProfilesItems=function(){if(t.searchProfilePagination.page<t.searchProfilePagination.totalPages-1&&!t.moreSearchProfilestRequestProcessing){t.moreSearchProfilestRequestProcessing=true;getIndexTypes().then((function successCallback(e){var i=getSearchProfileFilterObject();var a={indexTypes:e.indexTypeIds||[]};i=angular.extend(i,a);o.getSearchProfiles(i).then((function successCallback(e){Array.prototype.push.apply(t.availableSearchProfiles,e.searchProfiles);t.searchProfilePagination=new l(e.pagination);t.moreSearchProfilestRequestProcessing=false}),(function errorCallback(){r.sendError(n("translate")("personalizationsearchsmartedit.commercecustomization.search.error.gettingsearchprofiles"));t.moreSearchProfilestRequestProcessing=false}))}),(function errorCallback(){r.sendError(n("translate")("personalizationsearchsmartedit.commercecustomization.search.error.gettingindextypes"))}))}};t.segmentSearchInputKeypress=function(e,n){if(e&&[37,38,39,40].indexOf(e.which)>-1){return}t.searchProfilePagination.reset();t.searchProfileFilter.code=n;t.availableSearchProfiles.length=0;t.addMoreSearchProfilesItems()};t.treeOptions={dropped:function(e){if(e.source.index!==e.dest.index){t.aaa=true;var n=e.source.nodeScope.$modelValue;var o=e.dest.nodesScope.$modelValue[e.dest.index];i((function(){t.actions.splice(o.baseIndex,0,t.actions.splice(n.baseIndex,1)[0])}),0);var r=e.source.index<e.dest.index?e.source.index:e.dest.index;var a=Math.abs(e.dest.index-e.source.index)+1;var s=t.searchProfileActions.slice(r,a);var c=s.map((function(e){return getWrapperActionForAction(e)}));setStatusForUpdatedActions(c);t.aaa=false}}};t.$watch("actions",(function(e){if(!t.aaa){var n=e||[];t.searchProfileActions=n.filter((function(e){return e.action.type===d})).map((function(e){var t=angular.extend(e.action,{baseIndex:n.indexOf(e)});return t}));t.searchProfileContext.searchProfilesOrder=t.searchProfileActions}}),true);t.$watch("customization",(function(e){if(angular.isDefined(e)){t.searchProfileContext.customizationCode=e.code}else{t.searchProfileContext.customizationCode=undefined}}),true);t.$watch("variation",(function(e){if(angular.isDefined(e)){t.searchProfileContext.variationCode=e.code}else{t.searchProfileContext.variationCode=undefined}}),true)}]);angular.module("personalizationsearchSearchProfilesContextServiceModule",[]).factory("personalizationsearchSearchProfilesContextService",(function(){var e=this;var SearchProfileActionContext=function(){this.customizationCode=undefined;this.variationCode=undefined;this.initialOrder=[];this.searchProfilesOrder=[]};this.searchProfileActionComparer=function(e,t){return e.type===t.type&&e.searchProfileCode===t.searchProfileCode&&e.searchProfileCatalog===t.searchProfileCatalog};this.getSearchProfileActionContext=function(){return new SearchProfileActionContext};this.searchProfileContext=this.getSearchProfileActionContext();this.updateSearchActionContext=function(t){t.forEach((function(t){var n=e.searchProfileContext.searchProfilesOrder.filter((function(n){return e.searchProfileActionComparer(t,n)}));if(n.length>0){n[0].code=t.code}}))};e.isDirty=function(){return false};return e}));(function(){var e=e||window.angular;var t=null;try{t=e.module("personalizationsearchsmarteditContainerTemplates")}catch(e){}t=t||e.module("personalizationsearchsmarteditContainerTemplates",[]);t.run(["$templateCache",function(e){e.put("personalizationsearchSearchProfilesTemplate.html",'<div ng-controller="personalizationsearchSearchProfilesController" class="ps-search-profile"><div class="form-group"><label for="search-profile-selector-1" class="control-label ps-control-label" data-translate="personalizationsearchsmartedit.commercecustomization.search.label"></label><ui-select data-ng-init="initUiSelect($select)" id="search-profile-selector-1" class="form-control" ng-model="selectedSearchProfile" ng-keyup="segmentSearchInputKeypress($event, $select.search)" on-select="searchProfileSelected($item, $select)" theme="select2" search-enabled="true" reset-search-input="false"><ui-select-match placeholder="{{\'personalizationsearchsmartedit.commercecustomization.search.placeholder\' | translate}}"><span>{{\'personalizationsearchsmartedit.commercecustomization.search.placeholder\' | translate}}</span></ui-select-match><ui-select-choices repeat="item in availableSearchProfiles" ui-disable-choice="isItemInSelectDisabled(item)" position="down" personalization-infinite-scroll="addMoreSearchProfilesItems()" personalization-infinite-scroll-distance="2"><div class="row ng-scope"><span class="col-md-8 ng-binding" ng-bind="item.name"></span> <span class="col-md-4 ng-binding" ng-bind="item.catalog"></span></div></ui-select-choices></ui-select><div class="ps-search-profile__selection" data-ng-if="searchProfileActions"><label data-ng-if="searchProfileActions.length" class="control-label ps-control-label"><span>{{\'personalizationsearchsmartedit.commercecustomization.search.selection.label\' | translate}}</span><y-help data-ng-if="searchProfileActions.length" data-template="helpTemplate"></y-help></label><div ui-tree="treeOptions" id="tree-root" class="ps-search-profile__sel-tree"><div ui-tree-nodes ng-model="searchProfileActions" class="ps-search-profile__sel-tbody"><div ng-repeat="action in searchProfileActions" ui-tree-node data-nodrop-enabled="true" class="ps-search-profile__sel-tree-row"><div class="ps-search-profile__sel-tree-row-wrapper"><div ui-tree-handle class="ps-search-profile__sel-profile"><span class="ps-search-profile__sel-profile-code" data-ng-bind="action.searchProfileCode"></span></div><div class="ps-search-profile__sel-menu" data-uib-dropdown><button type="button" data-uib-dropdown-toggle class="btn btn-link dropdown-toggle pull-right"><span class="hyicon hyicon-more"></span></button><ul class="dropdown-menu pull-right text-left" role="menu"><li ng-class="$first ? \'disabled\' : \'\' "><a data-ng-click="($first) ? $event.stopPropagation() : setSearchActionRank(action, -1)" data-translate="personalizationsearchsmartedit.commercecustomization.search.actions.grid.options.moveup"></a></li><li ng-class="$last ? \'disabled\' : \'\' "><a data-ng-click="($last) ? $event.stopPropagation() : setSearchActionRank(action, 1)" data-translate="personalizationsearchsmartedit.commercecustomization.search.actions.grid.options.movedown"></a></li><li role="separator" class="divider"></li><li><a data-ng-click="removeSelectedSearchAction(action)" data-translate="personalizationsearchsmartedit.commercecustomization.search.actions.grid.options.delete"></a></li></ul></div></div></div></div></div></div></div><label data-ng-if="searchProfileActions.length" class="control-label ps-control-label__cust" data-translate="personalizationsearchsmartedit.commercecustomization.search.label.cust"></label></div>')}])})();i.module("personalizationsearchsmarteditContainer",["smarteditServicesModule","personalizationsearchsmarteditContainerTemplates","personalizationsearchSearchProfilesModule","yjqueryModule"]).run(["yjQuery","domain",function(e,t){"ngInject"}])},1068:function(e,t,n){},1069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(93);var o=n(1070);(function(){var e=e||window.angular;var t=null;try{t=e.module("personalizationpromotionssmarteditContainerTemplates")}catch(e){}t=t||e.module("personalizationpromotionssmarteditContainerTemplates",[]);t.run(["$templateCache",function(e){e.put("personalizationpromotionssmarteditPromotionsTemplate.html",'<div><label for="promotion-selector-1" class="fd-form__label" data-translate="personalization.modal.commercecustomization.promotion.label"></label><ui-select data-ng-init="$ctrl.initUiSelect($select)" id="promotion-selector-1" class="form-control" data-ng-model="$ctrl.promotion" on-select="$ctrl.promotionSelected($item, $select)" theme="select2" search-enabled="true"><ui-select-match placeholder="{{\'personalization.modal.commercecustomization.promotion.search.placeholder\' | translate}}"><span>{{\'personalization.modal.commercecustomization.promotion.search.placeholder\' | translate}}</span></ui-select-match><ui-select-choices repeat="item in $ctrl.availablePromotions | filter: $select.search" ui-disable-choice="$ctrl.isItemInSelectDisabled(item)" position="down"><div class="row ng-scope"><span class="col-md-8 perso-wrap-ellipsis" data-ng-bind="item.code" title="{{item.code}}"></span> <span class="col-md-4" data-ng-bind="item.promotionGroup" title="{{item.promotionGroup}}"></span></div></ui-select-choices></ui-select></div>');e.put("personalizationpromotionssmarteditPromotionsWrapperTemplate.html","<personalizationpromotionssmartedit-promotions></personalizationpromotionssmartedit-promotions>")}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}var r=function(){PersonalizationpromotionssmarteditPromotionsComponent.$inject=["$q","$filter","personalizationpromotionssmarteditRestService","personalizationsmarteditMessageHandler","actionsDataFactory","experienceService"];function PersonalizationpromotionssmarteditPromotionsComponent(e,t,n,i,o,r){this.$q=e;this.$filter=t;this.personalizationpromotionssmarteditRestService=n;this.personalizationsmarteditMessageHandler=i;this.actionsDataFactory=o;this.experienceService=r;this.promotion=null;this.availablePromotions=[]}PersonalizationpromotionssmarteditPromotionsComponent.prototype.$onInit=function(){this.getAvailablePromotions()};PersonalizationpromotionssmarteditPromotionsComponent.prototype.getCatalogs=function(){var e=this.$q.defer();this.experienceService.getCurrentExperience().then((function(t){var n=[];n.push({catalog:t.catalogDescriptor.catalogId,catalogVersion:t.catalogDescriptor.catalogVersion});t.productCatalogVersions.forEach((function(e){n.push({catalog:e.catalog,catalogVersion:e.catalogVersion})}));e.resolve(n)}));return e.promise};PersonalizationpromotionssmarteditPromotionsComponent.prototype.getPromotions=function(){var e=this;var t=this.$q.defer();this.getCatalogs().then((function(n){e.personalizationpromotionssmarteditRestService.getPromotions(n).then((function(e){t.resolve(e)}),(function(e){t.reject(e)}))}));return t.promise};PersonalizationpromotionssmarteditPromotionsComponent.prototype.getAvailablePromotions=function(){var e=this;this.getPromotions().then((function(t){e.availablePromotions=t.promotions}),(function(){e.personalizationsmarteditMessageHandler.sendError(e.$filter("translate")("personalization.error.gettingpromotions"))}))};PersonalizationpromotionssmarteditPromotionsComponent.prototype.buildAction=function(e){return{type:"cxPromotionActionData",promotionId:e.code}};PersonalizationpromotionssmarteditPromotionsComponent.prototype.buildAction.$inject=["item"];PersonalizationpromotionssmarteditPromotionsComponent.prototype.comparer=function(e,t){return e.type===t.type&&e.promotionId===t.promotionId};PersonalizationpromotionssmarteditPromotionsComponent.prototype.comparer.$inject=["a1","a2"];PersonalizationpromotionssmarteditPromotionsComponent.prototype.promotionSelected=function(e,t){var n=this.buildAction(e);this.actionsDataFactory.addAction(n,this.comparer);t.selected=null};PersonalizationpromotionssmarteditPromotionsComponent.prototype.promotionSelected.$inject=["item","uiSelectObject"];PersonalizationpromotionssmarteditPromotionsComponent.prototype.isItemInSelectDisabled=function(e){var t=this.buildAction(e);return this.actionsDataFactory.isItemInSelectedActions(t,this.comparer)};PersonalizationpromotionssmarteditPromotionsComponent.prototype.isItemInSelectDisabled.$inject=["item"];PersonalizationpromotionssmarteditPromotionsComponent.prototype.initUiSelect=function(e){e.isActive=function(){return false}};PersonalizationpromotionssmarteditPromotionsComponent.prototype.initUiSelect.$inject=["uiSelectController"];PersonalizationpromotionssmarteditPromotionsComponent=__decorate([i.SeComponent({templateUrl:"personalizationpromotionssmarteditPromotionsTemplate.html"}),__metadata("design:paramtypes",[Function,Function,o.PersonalizationpromotionssmarteditRestService,Object,Object,i.IExperienceService])],PersonalizationpromotionssmarteditPromotionsComponent);return PersonalizationpromotionssmarteditPromotionsComponent}();var a=function(){function PersonalizationpromotionssmarteditPromotionsModule(){}PersonalizationpromotionssmarteditPromotionsModule=__decorate([i.SeModule({imports:["personalizationsmarteditCommonsModule","personalizationsmarteditCommerceCustomizationModule",o.PersonalizationpromotionssmarteditServiceModule,"smarteditServicesModule"],config:["$logProvider",function(e){"ngInject";e.debugEnabled(false)}],declarations:[r],initialize:["personalizationsmarteditCommerceCustomizationService","$filter",function(e,t){"ngInject";e.registerType({type:"cxPromotionActionData",text:"personalization.modal.commercecustomization.action.type.promotion",template:"personalizationpromotionssmarteditPromotionsWrapperTemplate.html",confProperty:"personalizationsmartedit.commercecustomization.promotions.enabled",getName:function(e){return t("translate")("personalization.modal.commercecustomization.promotion.display.name")+" - "+e.promotionId}})}]})],PersonalizationpromotionssmarteditPromotionsModule);return PersonalizationpromotionssmarteditPromotionsModule}();var s=function(){function PersonalizationpromotionssmarteditContainer(){}PersonalizationpromotionssmarteditContainer=__decorate([i.SeModule({imports:["personalizationpromotionssmarteditContainerTemplates","yjqueryModule",a],config:["$logProvider",function(e){"ngInject";e.debugEnabled(false)}],initialize:["yjQuery","domain",function(e,t){"ngInject"}]})],PersonalizationpromotionssmarteditContainer);return PersonalizationpromotionssmarteditContainer}();t.PersonalizationpromotionssmarteditContainer=s},1070:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(93);(function(){var e=e||window.angular;var t=null;try{t=e.module("personalizationpromotionssmarteditCommonTemplates")}catch(e){}t=t||e.module("personalizationpromotionssmarteditCommonTemplates",[]);t.run(["$templateCache",function(e){}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}var o=function(){PersonalizationpromotionssmarteditRestService.$inject=["restServiceFactory","personalizationsmarteditUtils"];function PersonalizationpromotionssmarteditRestService(e,t){this.restServiceFactory=e;this.personalizationsmarteditUtils=t}e=PersonalizationpromotionssmarteditRestService;PersonalizationpromotionssmarteditRestService.prototype.getPromotions=function(t){var n=this;var i=this.restServiceFactory.get(e.AVAILABLE_PROMOTIONS);var o=[];t=t||[];t.forEach((function(e,t){n.personalizationsmarteditUtils.pushToArrayIfValueExists(o,"catalog"+t,e.catalog);n.personalizationsmarteditUtils.pushToArrayIfValueExists(o,"version"+t,e.catalogVersion)}));var r={params:{entry:o}};return i.save(r)};PersonalizationpromotionssmarteditRestService.prototype.getPromotions.$inject=["catalogVersions"];var e;PersonalizationpromotionssmarteditRestService.AVAILABLE_PROMOTIONS="/personalizationwebservices/v1/query/cxpromotionsforcatalog";PersonalizationpromotionssmarteditRestService=e=__decorate([i.SeInjectable(),__metadata("design:paramtypes",[Object,Object])],PersonalizationpromotionssmarteditRestService);return PersonalizationpromotionssmarteditRestService}();var r=function(){function PersonalizationpromotionssmarteditServiceModule(){}PersonalizationpromotionssmarteditServiceModule=__decorate([i.SeModule({imports:["smarteditServicesModule","personalizationsmarteditCommonsModule"],providers:[o]})],PersonalizationpromotionssmarteditServiceModule);return PersonalizationpromotionssmarteditServiceModule}();t.PersonalizationpromotionssmarteditRestService=o;t.PersonalizationpromotionssmarteditServiceModule=r},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=n(0);var o=n(132);var r=n(114);var a=n(148);var s=n(93);var c=n(49);var l=n(52);var d=n(4);var p=n(198);var u=n(155);var m=n(156);var g=n(45);var h=n(22);var v=_interopDefault(n(5));var f=n(549);var _=n(137);var y=n(14);(function(){var e=e||window.angular;var t=null;try{t=e.module("coretemplates")}catch(e){}t=t||e.module("coretemplates",[]);t.run(["$templateCache",function(e){e.put("AnnouncementBoardComponent.html",'<ng-container *ngIf="(announcements$ | async) as announcements"><div class="se-announcement-board"><se-announcement *ngFor="                let announcement of (announcements | seReverse);                trackBy: annnouncementTrackBy;                let i = index            " id="se-announcement-{{ i }}" [announcement]="announcement"></se-announcement></div></ng-container>');e.put("AnnouncementComponent.html",'<div class="se-announcement-content"><span *ngIf="isCloseable()" class="sap-icon--decline se-announcement-close" (click)="closeAnnouncement()"></span><ng-container *ngIf="!isLegacyAngularJS; else legacyAngularJS"><div *ngIf="hasMessage()"><h4 *ngIf="hasMessageTitle()">{{ announcement.messageTitle | translate }}</h4><span>{{ announcement.message | translate }}</span></div><ng-container *ngIf="hasComponent()"><ng-container *ngComponentOutlet="announcement.component; injector: announcementInjector"></ng-container></ng-container></ng-container><ng-template #legacyAngularJS><div *ngIf="hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template" [compileHtmlNgController]="legacyCompileHtmlNgController"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl" [compileHtmlNgController]="legacyCompileHtmlNgController"></div></div><div *ngIf="!hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl"></div></div></ng-template></div>');e.put("yAnnouncementBoardComponentTemplate.html","<se-announcement-board></se-announcement-board>");e.put("yAnnouncementComponentTemplate.html",'<se-announcement [announcement]="$ctrl.announcement"></se-announcement>');e.put("ExperienceSelectorComponent.html",'<se-generic-editor *ngIf="isReady" [smarteditComponentType]="smarteditComponentType" [smarteditComponentId]="smarteditComponentId" [structureApi]="structureApi" [content]="content" [contentApi]="contentApi" (getApi)="getApi($event)"></se-generic-editor>');e.put("ConfigurationModalComponent.html",'<div id="editConfigurationsBody" class="se-config"><form #form="ngForm" novalidate><div class="se-config__sub-header"><span class="se-config__sub-title">{{\'se.configurationform.label.keyvalue\' | translate}}</span> <button class="se-config__add-entry-btn fd-button--compact" type="button" (click)="editor.addEntry()">{{ "se.general.configuration.add.button" | translate }}</button></div><div class="se-config__entry" *ngFor="let entry of editor.filterConfiguration(); let $index = index"><div class="se-config__entry-data"><div class="se-config__entry-key"><input type="text" [ngClass]="{                            \'is-invalid\': entry.errors &&  entry.errors.keys && entry.errors.keys.length > 0,                            \'se-config__entry-key--disabled\': !entry.isNew }" name="{{entry.key}}_{{entry.uuid}}_key" placeholder="{{\'se.configurationform.header.key.name\' | translate}}" [(ngModel)]="entry.key" [required]="true" [disabled]="!entry.isNew" class="se-config__entry-key-input fd-form__control" [title]="entry.key"/><ng-container *ngIf="entry.errors && entry.errors.keys"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.keys; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div><div class="se-config__entry-value"><textarea [ngClass]="{\'is-invalid\': entry.errors && entry.errors.values && entry.errors.values.length>0}" name="{{entry.key}}_{{entry.uuid}}_value" placeholder="{{\'se.configurationform.header.value.name\' | translate}}" [(ngModel)]="entry.value" [required]="true" class="se-config__entry-text-area fd-form__control" (change)="editor.validateUserInput(entry)"></textarea><div *ngIf="entry.requiresUserCheck"><input id="{{entry.key}}_absoluteUrl_check_{{$index}}" type="checkbox" name="{{entry.key}}_{{entry.uuid}}_isCheckedByUser" [(ngModel)]="entry.isCheckedByUser"/> <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}" [ngClass]="{                                \'warning-check-msg\': true,                                \'not-checked\': entry.hasErrors && !entry.isCheckedByUser                            }">{{\'se.configurationform.absoluteurl.check\' | translate}}</span></div><ng-container *ngIf="entry.errors && entry.errors.values && entry.errors.values"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.values; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div></div><button type="button" id="{{entry.key}}_removeButton_{{$index}}" class="se-config__entry-remove-btn fd-button--light sap-icon--delete" (click)="editor.removeEntry(entry, form);"></button></div></form></div>');e.put("HeartBeatAlertComponent.html","<div><span>{{ 'se.heartbeat.failure1' | translate }}</span> <span><a (click)=\"switchToPreviewMode()\">{{ 'se.heartbeat.failure2' | translate }}</a></span></div>");e.put("HotkeyNotificationComponentTemplate.html",'<div class="se-notification__hotkey"><div *ngFor="let key of hotkeyNames; let last = last"><div class="se-notification__hotkey--key"><span>{{ key }}</span></div><span *ngIf="!last" class="se-notification__hotkey__icon--add">+</span></div><div class="se-notification__hotkey--text"><div class="se-notification__hotkey--title">{{ title }}</div><div class="se-notification__hotkey--message">{{ message }}</div></div></div>');e.put("NotificationComponentTemplate.html",'<div class="se-notification" id="{{ id }}" *ngIf="notification"><div *ngIf="hasTemplate()" [seCompileHtml]="notification.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="notification.templateUrl"></div><div *ngIf="hasComponent()" [seCustomComponentOutlet]="notification.componentName"></div></div>');e.put("NotificationPanelComponentTemplate.html",'<ng-container *ngIf="(notifications$ | async) as notifications"><div class="se-notification-panel" *ngIf="notifications.length > 0" [ngClass]="{\'is-mouseover\': isMouseOver}" (mouseenter)="onMouseEnter()"><div><se-notification *ngFor="let notification of (notifications | seReverse)" [notification]="notification"></se-notification></div></div></ng-container>');e.put("ShortcutLinkTemplate.html",'<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class="se-shortcut-link"><a class="se-shortcut-link__item" [ngClass]="{\'se-shortcut-link__item--active\': shortcutLink.active}" (click)="onClick(shortcutLink)">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>');e.put("ShortcutLinkWrapperTemplate.html","<shortcut-link></shortcut-link>");e.put("sitesLinkTemplate.html",'<div (click)="goToSites()" class="se-sites-link {{cssClass}}"><a class="se-sites-link__text">{{\'se.toolbar.sites\' | translate}}</a> <span class="icon-navigation-right-arrow se-sites-link__arrow {{iconCssClass}}"></span></div>');e.put("sitesLinkWrapperTemplate.html","<sites-link/>");e.put("UserAccountComponent.html",'<div class="se-user-account-dropdown"><div class="se-user-account-dropdown__role">{{ \'se.toolbar.useraccount.role\' | translate }}</div><div class="user-account-dropdown__name">{{username}}</div><div class="divider"></div><a class="se-sign-out__link fd-menu__item" (click)="signOut()">{{\'se.toolbar.useraccount.signout\' | translate}}</a></div>');e.put("ExperienceSelectorButtonComponent.html",'<fd-popover class="se-experience-selector" [(isOpen)]="status.isOpen" (isOpenChange)="resetExperienceSelector()" [closeOnOutsideClick]="false" [triggers]="[\'click\']" [placement]="\'bottom-end\'"><fd-popover-control><div class="se-experience-selector__control"><se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isCurrentPageFromParent" class="se-experience-selector__tooltip"><span se-tooltip-trigger class="se-experience-selector__btn--globe"><span class="hyicon hyicon-globe se-experience-selector__btn--globe--icon"></span></span><div se-tooltip-body>{{ parentCatalogVersion }}</div></se-tooltip><button class="se-experience-selector__btn" id="experience-selector-btn"><span [attr.title]="buildExperienceText()" class="se-experience-selector__btn-text se-nowrap-ellipsis">{{ buildExperienceText() }} </span><span class="se-experience-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><div class="se-experience-selector__dropdown fd-modal fd-modal__content" role="menu"><se-experience-selector [experience]="experience" [dropdownStatus]="status" [(resetExperienceSelector)]="resetExperienceSelector"></se-experience-selector></div></fd-popover-body></fd-popover>');e.put("inflectionPointSelectorWidgetComponentTemplate.html",'<div class="se-inflection-point dropdown" [class.open]="isOpen" id="inflectionPtDropdown"><button type="button" class="se-inflection-point__toggle" (click)="toggleDropdown($event)" aria-pressed="false" [attr.aria-expanded]="isOpen"><span [ngClass]="getIconClass()" class="se-inflection-point___selected"></span></button><div class="se-inflection-point-dropdown"><nav class="fd-menu"><ul class="fd-menu__list" role="menu"><li *ngFor="let choice of points" class="fd-menu__item inflection-point__device" [ngClass]="{selected: isSelected(choice)}" id="se-device-{{choice.type}}" (click)="selectPoint(choice)"><span [ngClass]="getIconClass(choice)"></span></li></ul></nav></div></div>');e.put("PerspectiveSelectorComponent.html",'<fd-popover [(isOpen)]="isOpen" [closeOnOutsideClick]="false" [triggers]="[\'click\']" *ngIf="hasActivePerspective()" class="se-perspective-selector" [placement]="\'bottom-end\'" [disabled]="isDisabled" [options]="popperOptions"><fd-popover-control><div class="se-perspective-selector__trigger"><se-tooltip [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isTooltipVisible()"><span se-tooltip-trigger id="perspectiveTooltip" class="hyicon hyicon-info se-perspective-selector__hotkey-tooltip--icon"></span><div se-tooltip-body>{{ activePerspective.descriptionI18nKey | translate }}</div></se-tooltip><button class="se-perspective-selector__btn" [disabled]="isDisabled">{{getActivePerspectiveName() | translate}} <span class="se-perspective-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><ul class="se-perspective__list fd-list-group" [ngClass]="{\'se-perspective__list--tooltip\': isTooltipVisible()}" role="menu"><li *ngFor="let choice of getDisplayedPerspectives()" class="fd-list-group__item se-perspective__list-item fd-has-padding-none"><a class="item se-perspective__list-item-text" (click)="selectPerspective($event, choice.key);">{{choice.nameI18nKey | translate}}</a></li></ul></fd-popover-body></fd-popover>');e.put("PerspectiveSelectorHotkeyNotificationComponentTemplate.html","<se-hotkey-notification [hotkeyNames]=\"['esc']\" [title]=\"'se.application.status.hotkey.title' | translate\" [message]=\"'se.application.status.hotkey.message' | translate\"></se-hotkey-notification>");e.put("LandingPageComponent.html",'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar></div><div class="se-landing-page"><div class="se-landing-page-actions"><div class="se-landing-page-container"><h1 class="se-landing-page-title">{{ \'se.landingpage.title\' | translate }}</h1><div class="se-landing-page-site-selection" *ngIf="model"><se-generic-editor-dropdown [field]="field" [qualifier]="qualifier" [model]="model" [id]="sitesId"></se-generic-editor-dropdown></div><p class="se-landing-page-label">{{ \'se.landingpage.label\' | translate }}</p></div></div><p class="se-landing-page-container se-landing-page-sub-header">Content Catalogs</p><div class="se-landing-page-container se-landing-page-catalogs"><div class="se-landing-page-catalog" *ngFor="let catalog of catalogs; let isLast = last"><se-catalog-details [catalog]="catalog" [siteId]="model.site" [isCatalogForCurrentSite]="isLast"></se-catalog-details></div></div><img src="static-resources/images/best-run-sap-logo.svg" class="se-landing-page-footer-logo"/></div>');e.put("StorefrontPageComponent.html",'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--experience" imageRoot="imageRoot" toolbarName="smartEditExperienceToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--perspective" imageRoot="imageRoot" toolbarName="smartEditPerspectiveToolbar"></se-toolbar></div><div id="js_iFrameWrapper" class="iframeWrapper"><iframe id="ySmartEditFrame" src=""></iframe><div id="ySmartEditFrameDragArea"></div></div>');e.put("MultiProductCatalogVersionConfigurationComponent.html",'<div class="form-group se-multi-product-catalog-version-selector__label">{{\'se.product.catalogs.multiple.list.header\' | translate}}</div><div class="se-multi-product-catalog-version-selector__catalog form-group" *ngFor="let productCatalog of productCatalogs"><label class="se-control-label se-multi-product-catalog-version-selector__catalog-name" id="{{ productCatalog.catalogId }}-label">{{ productCatalog.name | seL10n | async }}</label><div class="se-multi-product-catalog-version-selector__catalog-version"><se-select [id]="productCatalog.catalogId" [(model)]="productCatalog.selectedItem" [onChange]="updateModel()" [fetchStrategy]="productCatalog.fetchStrategy"></se-select></div></div>');e.put("MultiProductCatalogVersionSelectorComponent.html",'<se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" class="se-products-catalog-select-multiple__tooltip"><div id="multi-product-catalog-versions-selector" se-tooltip-trigger (click)="onClickSelector()" class="se-products-catalog-select-multiple"><input type="text" [value]="multiProductCatalogVersionsSelectedOptions$ | async" class="form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis" [name]="\'productCatalogVersions\'" readonly="readonly"/> <span class="hyicon hyicon-optionssm se-products-catalog-select-multiple__icon"></span></div><div class="se-product-catalogs-tooltip" se-tooltip-body><div class="se-product-catalogs-tooltip__h">{{ (\'se.product.catalogs.selector.headline.tooltip\' || \'\') | translate }}</div><div class="se-product-catalog-info" *ngFor="let productCatalog of productCatalogs">{{ getCatalogNameCatalogVersionLabel(productCatalog.catalogId) | async }}</div></div></se-tooltip>');e.put("ToolbarActionComponent.html",'<div *ngIf="item.isPermissionGranted"><div *ngIf="item.type == type.ACTION" class="toolbar-action"><button type="button" [ngClass]="{                \'toolbar-action--button--compact\': isCompact,                \'toolbar-action--button\': !isCompact            }" class="btn" (click)="toolbar.triggerAction(item, $event)" [attr.aria-pressed]="false" [attr.aria-haspopup]="true" [attr.aria-expanded]="false" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn"><span *ngIf="item.iconClassName" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_iconclass" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_lbl">{{item.name | translate}}</span></button></div><fd-popover class="se-toolbar-action__wrapper toolbar-action toolbar-action--hybrid" *ngIf="item.type === type.HYBRID_ACTION" [attr.data-item-key]="item.key" [triggers]="[\'click\']" [noArrow]="false" [isOpen]="item.isOpen" (isOpenChange)="onOpenChange()" [placement]="placement" seClickOutside (clickOutside)="onOutsideClicked()"><fd-popover-control><button *ngIf="item.iconClassName || item.icons" type="button" class="btn" [ngClass]="{                    \'toolbar-action--button--compact\': isCompact,                    \'toolbar-action--button\': !isCompact                }" [disabled]="disabled" [attr.aria-pressed]="false " (click)="toolbar.triggerAction(item, $event)"><span *ngIf="item.iconClassName" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt">{{item.name | translate}}</span></button></fd-popover-control><fd-popover-body class="se-toolbar-action__body" [ngClass]="{                \'toolbar-action--include--compact\': isCompact,                \'toolbar-action--include\': !isCompact                          }"><se-prevent-vertical-overflow><div *ngIf="toolbar.getItemVisibility(item) && item.include" [ngInclude]="item.include" [scope]="{ item: item }" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="toolbar.getItemVisibility(item) && item.component"><ng-container *ngComponentOutlet="item.component; injector: actionInjector"></ng-container></ng-container></se-prevent-vertical-overflow></fd-popover-body></fd-popover></div>');e.put("ToolbarComponent.html",'<div class="se-toolbar" [ngClass]="cssClass"><div class="se-toolbar__left"><div *ngFor="let item of aliases | seProperty:{section:\'left\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__left {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__middle"><div *ngFor="let item of aliases | seProperty:{section:\'middle\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__middle {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__right"><div *ngFor="let item of aliases | seProperty:{section:\'right\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__right {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div></div>');e.put("ProductCatalogVersionsSelectorComponent.html",'<ng-container *ngIf="isReady"><se-select *ngIf="isSingleVersionSelector" [id]="geData.qualifier" [(model)]="geData.model.productCatalogVersions[0]" [(reset)]="reset" [fetchStrategy]="fetchStrategy"></se-select><se-multi-product-catalog-version-selector *ngIf="isMultiVersionSelector" [productCatalogs]="productCatalogs" [(selectedProductCatalogVersions)]="geData.model[geData.qualifier]"></se-multi-product-catalog-version-selector></ng-container>');e.put("LegacyClientPagedListComponentTemplate.html",'<div class="fluid-container ySEPageListResult"><p class="se-page-list__page-count" ng-if="$ctrl.displayCount"><span>({{ $ctrl.totalItems }} {{ \'se.pagelist.countsearchresult\' | translate }})</span></p><table class="se-paged-list-table table table-striped table-hover techne-table"><thead><tr><th data-ng-repeat="key in $ctrl.keys" data-ng-click="$ctrl.orderByColumn(key.property)" data-ng-style="{ \'width\': $ctrl.columnWidth + \'%\' }" class="se-paged-list__header" data-ng-class="\'se-paged-list__header-\' + key.property" ng-if="key.i18n">{{ key.i18n | translate }} <span class="header-icon" ng-show="$ctrl.visibleSortingHeader === key.property" ng-class="{ \'down\': $ctrl.headersSortingState[key.property] === true, \'up\': $ctrl.headersSortingState[key.property] === false }"></span></th><th class="se-paged-list__header"></th><th class="se-paged-list__header" data-ng-if="$ctrl.dropdownItems !== undefined"></th></tr></thead><tbody class="se-paged-list__table-body"><tr data-ng-repeat="item in $ctrl.items | filterByField: $ctrl.query : $ctrl.getFilterKeys() : $ctrl.filterCallback | startFrom:($ctrl.currentPage - 1) * $ctrl.itemsPerPage | limitTo: $ctrl.itemsPerPage" class="techne-table-xs-right techne-table-xs-left se-paged-list-item"><td ng-repeat="key in $ctrl.keys" ng-class="\'se-paged-list-item-\' + key.property"><div data-ng-if="$ctrl.renderers[key.property]" compile-html="$ctrl.renderers[key.property](item, key)"></div><span data-ng-if="!$ctrl.renderers[key.property]">{{ item[key.property] }}</span></td><td><img data-ng-src="{{ item.visibilityIconSrc }}" tooltip-placement="bottom" tooltip="{{                            \'se.icon.tooltip.visibility\' | translate: item.translationData                        }}"/></td><td data-ng-if="$ctrl.dropdownItems !== undefined" has-operation-permission="\'se.edit.page\'" class="paged-list-table__body__td paged-list-table__body__td-menu"><se-dropdown-menu [dropdown-items]="$ctrl.dropdownItems" [selected-item]="item" class="pull-right"></se-dropdown-menu></td></tr></tbody></table><div class="pagination-container"><ul data-uib-pagination boundary-links="true " total-items="$ctrl.totalItems " items-per-page="$ctrl.itemsPerPage " ng-model="$ctrl.currentPage " class="pagination-lg" previous-text="&lsaquo; " next-text="&rsaquo; " first-text="&laquo; " last-text="&raquo; "></ul></div></div>');e.put("CatalogDetailsComponent.html",'<div class="se-catalog-details" [attr.data-catalog]="catalog.name | seL10n | async"><div class="se-catalog-header"><div class="se-catalog-header-flex"><div class="se-catalog-details__header">{{ catalog.name | seL10n | async }}</div><div *ngIf="catalog.parents?.length"><a href="javascript:void(0)" (click)="onOpenCatalogHierarchy()">{{ \'se.landingpage.catalog.hierarchy\' | translate }}</a></div></div></div><div class="se-catalog-details__content"><se-catalog-version-details *ngFor="let catalogVersion of sortedCatalogVersions" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion" [siteId]="siteId"></se-catalog-version-details></div></div>');e.put("CatalogHierarchyModalComponent.html",'<div class="se-catalog-hierarchy-header"><span>{{ \'se.catalog.hierarchy.modal.tree.header\' | translate }}</span></div><div *ngIf="this.catalogs$ | async as catalogs" class="se-catalog-hierarchy-body"><se-catalog-hierarchy-node *ngFor="let catalog of catalogs; let i = index" [catalog]="catalog" [index]="i" [isLast]="i === catalogs.length - 1" [siteId]="siteId" (siteSelect)="onSiteSelected()"></se-catalog-hierarchy-node></div>');e.put("CatalogHierarchyNodeComponent.html",'<div class="se-cth-node-name" [style.padding-left.px]="15 * index" [style.padding-right.px]="15 * index" [class.se-cth-node-name__last]="isLast"><fd-icon glyph="navigation-down-arrow"></fd-icon>{{ (isLast ? catalog.name : catalog.catalogName) | seL10n | async }}&nbsp; <span *ngIf="isLast">({{ \'se.catalog.hierarchy.modal.tree.this.catalog\' | translate}})</span></div><div class="se-cth-node-sites"><ng-container><ng-container *ngIf="hasOneSite; else hasManySites"><a class="se-cth-node-anchor" href="" (click)="onNavigateToSite(catalog.sites[0].uid)">{{ catalog.sites[0].name | seL10n | async }}<fd-icon glyph="navigation-right-arrow"></fd-icon></a></ng-container><ng-template #hasManySites><se-dropdown-menu [dropdownItems]="dropdownItems" useProjectedAnchor="1" (click)="onSiteSelect($event)"><span class="se-cth-node-anchor">{{ this.catalog.sites.length }} Sites<fd-icon glyph="navigation-down-arrow"></fd-icon></span></se-dropdown-menu></ng-template></ng-container></div>');e.put("CatalogVersionDetailsComponent.html",'<div class="se-catalog-version-container" [attr.data-catalog-version]="catalogVersion.version"><div class="se-catalog-version-container__left"><se-catalog-versions-thumbnail-carousel [catalogVersion]="catalogVersion" [catalog]="catalog" [siteId]="siteId"></se-catalog-versions-thumbnail-carousel><div><div class="se-catalog-version-container__name">{{catalogVersion.version}}</div><div class="se-catalog-version-container__left__templates"><div class="se-catalog-version-container__left__template" *ngFor="let item of leftItems; let isLast = last"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer><div class="se-catalog-version-container__divider" *ngIf="!isLast"></div></div></div></div></div><div class="se-catalog-version-container__right"><div class="se-catalog-version-container__right__template" *ngFor="let item of rightItems"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer></div></div></div>');e.put("CatalogVersionsThumbnailCarouselComponent.html",'<div class="se-active-catalog-thumbnail"><div class="se-active-catalog-version-container__thumbnail" (click)="onClick()"><div class="se-active-catalog-version-container__thumbnail__default-img"><div class="se-active-catalog-version-container__thumbnail__img" [ngStyle]="{\'background-image\': \'url(\' + catalogVersion.thumbnailUrl + \')\'}"></div></div></div></div>');e.put("HomePageLinkComponent.html",'<div class="home-link-container"><a href="javascript:void(0)" class="home-link-item__link se-catalog-version__link" (click)="onClick()">{{ \'se.landingpage.homepage\' | translate }}</a></div>')}])})();var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};function __extends(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return __assign.apply(this,arguments)};function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var C;(function(e){e[e["SMARTEDITCONTAINER"]=0]="SMARTEDITCONTAINER";e[e["SMARTEDIT"]=1]="SMARTEDIT"})(C||(C={}));var S=function(){ConfigurationExtractorService.$inject=["logService"];function ConfigurationExtractorService(e){this.logService=e}ConfigurationExtractorService.prototype.extractSEContainerModules=function(e){return this._getAppsAndLocations(e,C.SMARTEDITCONTAINER)};ConfigurationExtractorService.prototype.extractSEContainerModules.$inject=["configurations"];ConfigurationExtractorService.prototype.extractSEModules=function(e){return this._getAppsAndLocations(e,C.SMARTEDIT)};ConfigurationExtractorService.prototype.extractSEModules.$inject=["configurations"];ConfigurationExtractorService.prototype.orderApplications=function(e){var t=this;var n=e.filter((function(e){return!e.extends}));var i=e.filter((function(e){return!!e.extends})).filter((function(n){var i=e.findIndex((function(e){return e.name===n.extends}));if(i===-1){t.logService.error("Application "+n.name+" located at "+n.location+" is ignored because it extends an unknown application '"+n.extends+"'; SmartEdit functionality may be compromised.")}return i>-1}));return this._addExtendingAppsInOrder(n,i)};ConfigurationExtractorService.prototype.orderApplications.$inject=["applications"];ConfigurationExtractorService.prototype._addExtendingAppsInOrder=function(e,t,n){n=n||1;var i=[];t.forEach((function(t){var o=e.findIndex((function(e){return e.name===t.extends}));if(o>-1){console.debug("pass "+n+", "+t.name+" requiring "+t.extends+" found it at index "+o+" ("+e.map((function(e){return e.name}))+")");e.splice(o+1,0,t)}else{console.debug("pass "+n+", "+t.name+" requiring "+t.extends+" did not find it  ("+e.map((function(e){return e.name}))+")");i.push(t)}}));if(i.length){return this._addExtendingAppsInOrder(e,i,++n)}else{return e}};ConfigurationExtractorService.prototype._addExtendingAppsInOrder.$inject=["simpleApps","extendingApps","pass"];ConfigurationExtractorService.prototype._getAppsAndLocations=function(e,t){var n;switch(t){case C.SMARTEDITCONTAINER:n="smartEditContainerLocation";break;case C.SMARTEDIT:n="smartEditLocation";break}var i=a.map(e,(function(e,t){return{key:t,value:e}})).reduce((function(t,i){if(i.key.indexOf("applications")===0&&typeof i.value[n]==="string"){var o={};o.name=i.key.split(".")[1];var r=i.value[n];if(/^https?\:\/\//.test(r)){o.location=r}else{o.location=e.domain+r}var s=i.value.extends;if(s){o.extends=s}t.applications.push(o);t.authenticationMap=a.merge(t.authenticationMap,i.value.authenticationMap)}else if(i.key==="authenticationMap"){t.authenticationMap=a.merge(t.authenticationMap,i.value)}return t}),{applications:[],authenticationMap:{}});return i};ConfigurationExtractorService.prototype._getAppsAndLocations.$inject=["configurations","applicationLayer"];ConfigurationExtractorService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.LogService])],ConfigurationExtractorService);return ConfigurationExtractorService}();var b=function(){BootstrapService.$inject=["configurationExtractorService","sharedDataService","logService","httpClient","promiseUtils","smarteditBootstrapGateway","moduleUtils","SMARTEDIT_INNER_FILES","SMARTEDIT_INNER_FILES_POST"];function BootstrapService(e,t,n,i,o,r,a,s,c){this.configurationExtractorService=e;this.sharedDataService=t;this.logService=n;this.httpClient=i;this.promiseUtils=o;this.smarteditBootstrapGateway=r;this.moduleUtils=a;this.SMARTEDIT_INNER_FILES=s;this.SMARTEDIT_INNER_FILES_POST=c}BootstrapService.prototype.bootstrapContainerModules=function(e){var t=this;var n=this.promiseUtils.defer();var i=this.configurationExtractorService.extractSEContainerModules(e);var o=this.configurationExtractorService.orderApplications(i.applications);this.logService.debug("outerAppLocations are:",o);this.sharedDataService.set("authenticationMap",i.authenticationMap);this.sharedDataService.set("credentialsMap",e["authentication.credentials"]);var r=this._getConstants(e);Object.keys(r).forEach((function(e){t._getLegacyContainerModule().constant(e,r[e])}));this._getValidApplications(o).then((function(e){s.scriptUtils.injectJS().execute({srcs:e.map((function(e){return e.location})),callback:function(){var i=__spreadArrays(window.__smartedit__.pushedModules);["cmssmarteditContainer","personalizationsmarteditContainer","merchandisingsmarteditContainer","personalizationsearchsmarteditContainer","personalizationpromotionssmarteditContainer"].forEach((function(t){e.push({name:t,location:""})}));e.forEach((function(e){t.moduleUtils.addModuleToAngularJSApp("smarteditcontainer",e.name);var n=t.moduleUtils.getNgModule(e.name);if(n){i.push(n)}}));n.resolve({modules:i,constants:r})}})}));return n.promise};BootstrapService.prototype.bootstrapContainerModules.$inject=["configurations"];BootstrapService.prototype.bootstrapSEApp=function(e){var t=this;var n=this.configurationExtractorService.extractSEModules(e);var i=this.configurationExtractorService.orderApplications(n.applications);this.sharedDataService.set("authenticationMap",n.authenticationMap);this.sharedDataService.set("credentialsMap",e["authentication.credentials"]);var o={properties:this._getConstants(e),js:[{src:e.smarteditroot+"/static-resources/thirdparties/blockumd/blockumd.js"},{src:e.smarteditroot+"/static-resources/dist/smartedit-new/vendors.js"},{src:e.smarteditroot+"/static-resources/thirdparties/ckeditor/ckeditor.js"},{src:e.smarteditroot+"/static-resources/dist/smartedit-new/smartedit.js"}]};return this._getValidApplications(i).then((function(e){["cmssmartedit","personalizationsmartedit","merchandisingsmartedit","personalizationsearchsmartedit","personalizationpromotionssmartedit"].forEach((function(t){e.push({name:t,location:""})}));if(false){}o.js=o.js.concat(e.map((function(e){var t={src:e.location};return t})));if(false){}o.properties.applications=e.map((function(e){return e.name}));t.smarteditBootstrapGateway.getInstance().publish("bundle",{resources:o})}))};BootstrapService.prototype.bootstrapSEApp.$inject=["configurations"];BootstrapService.prototype._getLegacyContainerModule=function(){return r.module("smarteditcontainer")};BootstrapService.prototype._getConstants=function(e){return{domain:e.domain,smarteditroot:e.smarteditroot}};BootstrapService.prototype._getConstants.$inject=["configurations"];BootstrapService.prototype._getValidApplications=function(e){var t=this;return Promise.all(e.map((function(e){var n=t.promiseUtils.defer();t.httpClient.get(e.location,{responseType:"text"}).subscribe((function(){n.resolve(e)}),(function(i){t.logService.error("Failed to load application '"+e.name+"' from location "+e.location+"; SmartEdit functionality may be compromised.");n.resolve()}));return n.promise}))).then((function(e){return a.merge(a.compact(e))}))};BootstrapService.prototype._getValidApplications.$inject=["applications"];BootstrapService=__decorate([s.SeDowngradeService(),__param(7,i.Inject("SMARTEDIT_INNER_FILES")),__param(8,i.Inject("SMARTEDIT_INNER_FILES_POST")),__metadata("design:paramtypes",[S,s.ISharedDataService,s.LogService,o.HttpClient,s.PromiseUtils,s.SmarteditBootstrapGateway,s.ModuleUtils,Array,Array])],BootstrapService);return BootstrapService}();var I=function(){LoadConfigManagerService.$inject=["restServicefactory","sharedDataService","logService","promiseUtils","SMARTEDIT_RESOURCE_URI_REGEXP","SMARTEDIT_ROOT"];function LoadConfigManagerService(e,t,n,i,o,r){this.sharedDataService=t;this.logService=n;this.promiseUtils=i;this.SMARTEDIT_RESOURCE_URI_REGEXP=o;this.SMARTEDIT_ROOT=r;this.restService=e.get(s.CONFIGURATION_URI)}LoadConfigManagerService.prototype.loadAsArray=function(){var e=this;var t=this.promiseUtils.defer();this.restService.query().then((function(n){t.resolve(e._parse(n))}),(function(n){e.logService.log("Fail to load the configurations.",n);t.reject()}));return t.promise};LoadConfigManagerService.prototype.loadAsObject=function(){var e=this;var t=this.promiseUtils.defer();this.loadAsArray().then((function(n){try{var i=e._convertToObject(n);e.sharedDataService.set("configuration",i);t.resolve(i)}catch(i){e.logService.error("LoadConfigManager.loadAsObject - _convertToObject failed to load configuration:",n);e.logService.error(i);t.reject()}}));return t.promise};LoadConfigManagerService.prototype._convertToObject=function(e){var t=this;var n=e.reduce((function(e,n){try{if(typeof e[n.key]!=="undefined"){t.logService.error("LoadConfigManager._convertToObject() - duplicate configuration keys found: "+n.key)}e[n.key]=JSON.parse(n.value)}catch(e){t.logService.error("item _key_ from configuration contains unparsable JSON data _value_ and was ignored".replace("_key_",n.key).replace("_value_",n.value))}return e}),{});try{n.domain=this.SMARTEDIT_RESOURCE_URI_REGEXP.exec(this._getLocation())[1]}catch(e){throw new Error("location "+this._getLocation()+" doesn't match the expected pattern "+this.SMARTEDIT_RESOURCE_URI_REGEXP)}n.smarteditroot=n.domain+"/"+this.SMARTEDIT_ROOT;return n};LoadConfigManagerService.prototype._convertToObject.$inject=["configuration"];LoadConfigManagerService.prototype._getLocation=function(){return document.location.href};LoadConfigManagerService.prototype._parse=function(e){var t=a.cloneDeep(e);Object.keys(t).forEach((function(e){try{t[e]=JSON.parse(t[e])}catch(e){}}));return t};LoadConfigManagerService.prototype._parse.$inject=["configuration"];LoadConfigManagerService=__decorate([s.SeDowngradeService(),s.OperationContextRegistered(s.CONFIGURATION_URI,"TOOLING"),i.Injectable(),__param(4,i.Inject("SMARTEDIT_RESOURCE_URI_REGEXP")),__param(5,i.Inject("SMARTEDIT_ROOT")),__metadata("design:paramtypes",[s.RestServiceFactory,s.ISharedDataService,s.LogService,s.PromiseUtils,RegExp,String])],LoadConfigManagerService);return LoadConfigManagerService}();var w={timeout:5e3,closeable:true};var E=function(e){__extends(AnnouncementService,e);AnnouncementService.$inject=["logService"];function AnnouncementService(t){var n=e.call(this)||this;n.logService=t;n.announcements$=new c.BehaviorSubject([]);return n}AnnouncementService.prototype.showAnnouncement=function(e){var t=this;this.validateAnnouncementConfig(e);var n=a.clone(e);n.id=s.stringUtils.encode(e);n.timeout=!!n.timeout&&n.timeout>0?n.timeout:w.timeout;if(n.timeout>0){n.timer=setTimeout((function(){t._closeAnnouncement(n)}),n.timeout)}this.announcements$.next(__spreadArrays(this.announcements$.getValue(),[n]));return Promise.resolve(n.id)};AnnouncementService.prototype.showAnnouncement.$inject=["announcementConfig"];AnnouncementService.prototype.getAnnouncements=function(){return this.announcements$.asObservable()};AnnouncementService.prototype.closeAnnouncement=function(e){var t=this.announcements$.getValue().find((function(t){return t.id===e}));if(t){this._closeAnnouncement(t)}return Promise.resolve()};AnnouncementService.prototype.closeAnnouncement.$inject=["announcementId"];AnnouncementService.prototype._closeAnnouncement=function(e){if(e.timer){clearTimeout(e.timer)}var t=this.announcements$.getValue();var n=t.filter((function(t){return t.id!==e.id}));this.announcements$.next(n)};AnnouncementService.prototype._closeAnnouncement.$inject=["announcement"];AnnouncementService.prototype.validateAnnouncementConfig=function(e){var t=e.message,n=e.template,i=e.templateUrl,o=e.component;if(!t&&!n&&!i&&!o){this.logService.warn("AnnouncementService._validateAnnouncementConfig - announcement must contain at least a message, template, templateUrl or component property",e)}if(t&&(n||i||o)||n&&(t||i||o)||i&&(t||n||o)||o&&(t||n||i)){throw new Error("AnnouncementService._validateAnnouncementConfig - only one template type is allowed for an announcement: message, template, templateUrl or component")}};AnnouncementService.prototype.validateAnnouncementConfig.$inject=["announcementConfig"];AnnouncementService=__decorate([s.SeDowngradeService(s.IAnnouncementService),s.GatewayProxied("showAnnouncement","closeAnnouncement"),i.Injectable(),__metadata("design:paramtypes",[s.LogService])],AnnouncementService);return AnnouncementService}(s.IAnnouncementService);var P=function(){NotificationService.$inject=["systemEventService","logService"];function NotificationService(e,t){this.systemEventService=e;this.logService=t;this.notificationsChangeAction=new c.BehaviorSubject(undefined);this.notifications=new c.BehaviorSubject([]);this.initNotificationsChangeAction()}NotificationService.prototype.ngOnDestroy=function(){this.notifications.unsubscribe();this.notificationsChangeAction.unsubscribe()};NotificationService.prototype.pushNotification=function(e){this._validate(e);var t={type:"PUSH",payload:e};this.notificationsChangeAction.next(t);return Promise.resolve()};NotificationService.prototype.pushNotification.$inject=["configuration"];NotificationService.prototype.removeNotification=function(e){var t={type:"REMOVE",payload:{id:e}};this.notificationsChangeAction.next(t);return Promise.resolve()};NotificationService.prototype.removeNotification.$inject=["notificationId"];NotificationService.prototype.removeAllNotifications=function(){var e={type:"REMOVE_ALL"};this.notificationsChangeAction.next(e);return Promise.resolve()};NotificationService.prototype.isNotificationDisplayed=function(e){return!!this.getNotification(e)};NotificationService.prototype.isNotificationDisplayed.$inject=["notificationId"];NotificationService.prototype.getNotification=function(e){return this.notifications.getValue().find((function(t){return t.id===e}))};NotificationService.prototype.getNotification.$inject=["notificationId"];NotificationService.prototype.getNotifications=function(){return this.notifications.asObservable()};NotificationService.prototype.initNotificationsChangeAction=function(){var e=this;this.notificationsChangeAction.pipe(l.distinctUntilChanged((function(t,n){return e.emitWhenActionIsAvailable(n)})),l.skip(1),l.map((function(t){return e.resolveNotifications(t)}))).subscribe((function(t){e.notifications.next(t);e.systemEventService.publishAsync(s.EVENT_NOTIFICATION_CHANGED)}))};NotificationService.prototype.emitWhenActionIsAvailable=function(e){var t=e.payload;var n=(e.type==="PUSH"||e.type==="REMOVE")&&this.getNotification(t.id);switch(e.type){case"PUSH":if(n){this.logService.debug('Notification already exists for id:"'+t.id+'"');return true}return false;case"REMOVE":if(!n){this.logService.debug('Attempt to remove a non existing notification for id:"'+t.id+'"');return true}return false;case"REMOVE_ALL":return false}};NotificationService.prototype.emitWhenActionIsAvailable.$inject=["action"];NotificationService.prototype.resolveNotifications=function(e){var t=e.payload;switch(e.type){case"PUSH":return __spreadArrays(this.notifications.getValue(),[t]);case"REMOVE":return this.notifications.getValue().filter((function(e){return e.id!==t.id}));case"REMOVE_ALL":return[]}};NotificationService.prototype.resolveNotifications.$inject=["action"];NotificationService.prototype._validate=function(e){var t=e||{},n=t.id,i=t.template,o=t.templateUrl,r=t.componentName;if(!e){throw new Error("notificationService.pushNotification: Configuration is required")}if(!n){throw new Error("notificationService.pushNotification: Notification ID cannot be undefined or null or empty")}if(!i&&!o&&!r){throw new Error("notificationService.pushNotification: Configuration must contain a componentName, template, templateUrl")}if(i&&(o||r)||o&&(i||r)||r&&(i||o)){throw new Error("notificationService.pushNotification: Only one template type is allowed for Configuration: componentName, template, templateUrl")}};NotificationService.prototype._validate.$inject=["configuration"];NotificationService=__decorate([s.SeDowngradeService(s.INotificationService),s.GatewayProxied("pushNotification","removeNotification","removeAllNotifications"),__metadata("design:paramtypes",[s.SystemEventService,s.LogService])],NotificationService);return NotificationService}();var T=function(e){__extends(NotificationMouseLeaveDetectionService,e);NotificationMouseLeaveDetectionService.$inject=["document","windowUtils"];function NotificationMouseLeaveDetectionService(t,n){var i=e.call(this)||this;i.document=t;i.windowUtils=n;i.notificationPanelBounds=null;i.mouseLeaveCallback=null;i._onMouseMove=i._onMouseMove.bind(i);return i}NotificationMouseLeaveDetectionService.prototype.startDetection=function(e,t,n){this.validateBounds(e);if(!n){throw new Error("Callback function is required")}this.notificationPanelBounds=e;this.mouseLeaveCallback=n;this.document.addEventListener("mousemove",this._onMouseMove);if(t){this.validateBounds(t);this._remoteStartDetection(t)}return Promise.resolve()};NotificationMouseLeaveDetectionService.prototype.startDetection.$inject=["outerBounds","innerBounds","callback"];NotificationMouseLeaveDetectionService.prototype.stopDetection=function(){this.document.removeEventListener("mousemove",this._onMouseMove);this.notificationPanelBounds=null;this.mouseLeaveCallback=null;if(this.windowUtils.getGatewayTargetFrame()){this._remoteStopDetection()}return Promise.resolve()};NotificationMouseLeaveDetectionService.prototype._callCallback=function(){this._getCallback().then((function(e){if(e){e()}}));return Promise.resolve()};NotificationMouseLeaveDetectionService.prototype._getBounds=function(){return Promise.resolve(this.notificationPanelBounds)};NotificationMouseLeaveDetectionService.prototype._getCallback=function(){return Promise.resolve(this.mouseLeaveCallback)};NotificationMouseLeaveDetectionService.prototype.validateBounds=function(e){if(!e){throw new Error("Bounds are required for mouse leave detection")}if(!e.hasOwnProperty("x")){throw new Error("Bounds must contain the x coordinate")}if(!e.hasOwnProperty("y")){throw new Error("Bounds must contain the y coordinate")}if(!e.hasOwnProperty("width")){throw new Error("Bounds must contain the width dimension")}if(!e.hasOwnProperty("height")){throw new Error("Bounds must contain the height dimension")}};NotificationMouseLeaveDetectionService.prototype.validateBounds.$inject=["bounds"];NotificationMouseLeaveDetectionService=__decorate([s.SeDowngradeService(s.INotificationMouseLeaveDetectionService),s.GatewayProxied("stopDetection","_remoteStartDetection","_remoteStopDetection","_callCallback"),i.Injectable(),__param(0,i.Inject(d.DOCUMENT)),__metadata("design:paramtypes",[Document,s.WindowUtils])],NotificationMouseLeaveDetectionService);return NotificationMouseLeaveDetectionService}(s.INotificationMouseLeaveDetectionService);var A=function(){DelegateRestService.$inject=["restServiceFactory"];function DelegateRestService(e){this.restServiceFactory=e}DelegateRestService.prototype.delegateForSingleInstance=function(e,t,n,i,o,r){var a=this.restServiceFactory.get(n,i);if(o){a.activateMetadata()}return a.getMethodForSingleInstance(e)(t,r)};DelegateRestService.prototype.delegateForSingleInstance.$inject=["methodName","params","uri","identifier","metadataActivated","options"];DelegateRestService.prototype.delegateForArray=function(e,t,n,i,o,r){var a=this.restServiceFactory.get(n,i);if(o){a.activateMetadata()}return a.getMethodForArray(e)(t,r)};DelegateRestService.prototype.delegateForArray.$inject=["methodName","params","uri","identifier","metadataActivated","options"];DelegateRestService.prototype.delegateForPage=function(e,t,n,i,o){var r=this.restServiceFactory.get(t,n);if(i){r.activateMetadata()}return r.page(e,o)};DelegateRestService.prototype.delegateForPage.$inject=["pageable","uri","identifier","metadataActivated","options"];DelegateRestService.prototype.delegateForQueryByPost=function(e,t,n,i,o,r){var a=this.restServiceFactory.get(n,i);if(o){a.activateMetadata()}return a.queryByPost(e,t,r)};DelegateRestService.prototype.delegateForQueryByPost.$inject=["payload","params","uri","identifier","metadataActivated","options"];DelegateRestService=__decorate([s.GatewayProxied(),i.Injectable(),__metadata("design:paramtypes",[s.RestServiceFactory])],DelegateRestService);return DelegateRestService}();var D=[{orientation:"vertical",key:"se.deviceorientation.vertical.label",default:true},{orientation:"horizontal",key:"se.deviceorientation.horizontal.label"}];var O=[{iconClass:"sap-icon--iphone",type:"phone",width:480},{iconClass:"sap-icon--iphone-2",type:"wide-phone",width:600},{iconClass:"sap-icon--ipad",type:"tablet",width:700},{iconClass:"sap-icon--ipad-2",type:"wide-tablet",width:1024},{iconClass:"sap-icon--sys-monitor",type:"desktop",width:1200},{iconClass:"hyicon hyicon-wide-screen",type:"wide-desktop",width:"100%",default:true}];var R=function(){IframeManagerService.$inject=["logService","httpClient","yjQuery","windowUtils","sharedDataService"];function IframeManagerService(e,t,n,i,o){this.logService=e;this.httpClient=t;this.yjQuery=n;this.windowUtils=i;this.sharedDataService=o}e=IframeManagerService;IframeManagerService.prototype.setCurrentLocation=function(e){this.currentLocation=e};IframeManagerService.prototype.setCurrentLocation.$inject=["location"];IframeManagerService.prototype.getIframe=function(){return this.yjQuery(this.windowUtils.getSmarteditIframe())};IframeManagerService.prototype.isCrossOrigin=function(){return this.windowUtils.isCrossOrigin(this.currentLocation)};IframeManagerService.prototype.load=function(e,t,n){var i=this;if(t){return this._getPageAsync(e).then((function(){i.getIframe().attr("src",e)}),(function(e){if(e.status===404){i.getIframe().attr("src",n);return}i.logService.error("IFrameManagerService.load - _getPageAsync failed with error "+e)}))}else{this.logService.debug("iframeManagerService::load - loading storefront url:",e);this.getIframe().attr("src",e);return Promise.resolve()}};IframeManagerService.prototype.load.$inject=["url","checkIfFailingHTML","pageInPreviewMode"];IframeManagerService.prototype.loadPreview=function(e,t){var n=this;this.windowUtils.setTrustedIframeDomain(e);this.logService.debug("loading storefront iframe with preview ticket:",t);var i;if(!/.+\.html/.test(e)){i=this._appendURISuffix(e)}else{i=Promise.resolve(e)}return i.then((function(i){var o=i+(i.indexOf("?")===-1?"?":"&")+"cmsTicketId="+t;if(n._mustLoadAsSuch(e)){return n.load(o)}else{var r=n.isCrossOrigin();return(r?Promise.resolve({}):n._getPageAsync(o)).then((function(){return n.load(n.currentLocation,!r,o)}),(function(e){return n.logService.error("failed to load preview",e)}))}}))};IframeManagerService.prototype.loadPreview.$inject=["homePageOrPageFromPageList","previewTicket"];IframeManagerService.prototype.apply=function(e,t){var n;var i;var o=true;if(t&&t.orientation){o=t.orientation==="vertical"}if(e){n=o?e.width:e.height;i=o?e.height:e.width;this.getIframe().removeClass().addClass("device-"+(o?"vertical":"horizontal")+" device-default")}else{this.getIframe().removeClass()}this.getIframe().css({width:n||"100%",height:i||"100%",display:"block",margin:"auto"})};IframeManagerService.prototype.apply.$inject=["deviceSupport","deviceOrientation"];IframeManagerService.prototype.applyDefault=function(){var e=O.find((function(e){return e.default}));var t=D.find((function(e){return e.default}));this.apply(e,t)};IframeManagerService.prototype._mustLoadAsSuch=function(e){return!this.currentLocation||s.urlUtils.getURI(e)===s.urlUtils.getURI(this.currentLocation)||"cmsTicketId"in s.urlUtils.parseQuery(this.currentLocation)};IframeManagerService.prototype._mustLoadAsSuch.$inject=["homePageOrPageFromPageList"];IframeManagerService.prototype._getPageAsync=function(e){return this.httpClient.get(e,{observe:"body",responseType:"text"}).toPromise()};IframeManagerService.prototype._getPageAsync.$inject=["url"];IframeManagerService.prototype._appendURISuffix=function(t){var n=this;var i=t.split("?");return this.sharedDataService.get("configuration").then((function(t){if(!t||!t.storefrontPreviewRoute){n.logService.debug("SmartEdit configuration for 'storefrontPreviewRoute' is not found. Fallback to default value: '"+e.DEFAULT_PREVIEW_ROUTE+"'");return e.DEFAULT_PREVIEW_ROUTE}return t.storefrontPreviewRoute})).then((function(e){return i[0].replace(/(.+)([^\/])$/g,"$1$2/"+e).replace(/(.+)\/$/g,"$1/"+e)+(i.length===2?"?"+i[1]:"")}))};IframeManagerService.prototype._appendURISuffix.$inject=["url"];var e;IframeManagerService.DEFAULT_PREVIEW_ROUTE="cx-preview";IframeManagerService=e=__decorate([s.SeDowngradeService(),__param(2,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[s.LogService,o.HttpClient,Function,s.WindowUtils,s.ISharedDataService])],IframeManagerService);return IframeManagerService}();var M=function(e){__extends(DragAndDropCrossOrigin,e);DragAndDropCrossOrigin.$inject=["yjQuery","crossFrameEventService","iframeManagerService"];function DragAndDropCrossOrigin(t,n,i){var o=e.call(this)||this;o.yjQuery=t;o.crossFrameEventService=n;o.iframeManagerService=i;o.onDragStart=function(){if(!o.isEnabled()){return}o.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_CROSS_ORIGIN_START);o.syncIframeDragArea().show().off("dragover").on("dragover",(function(e){e.preventDefault();var t=o.getPositionRelativeToIframe(e.pageX,e.pageY);o.throttledSendMousePosition(t);return false})).off("drop").on("drop",(function(e){e.preventDefault();e.stopPropagation();var t=o.getPositionRelativeToIframe(e.pageX,e.pageY);o.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DROP_ELEMENT,t);return false}))};o.onDragEnd=function(){if(!o.isEnabled()){return}o.getIframeDragArea().off("dragover").off("drop").hide()};o.sendMousePosition=function(e){o.crossFrameEventService.publish(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.TRACK_MOUSE_POSITION,e)};return o}DragAndDropCrossOrigin.prototype.initialize=function(){var e=this;this.throttledSendMousePosition=a.throttle(this.sendMousePosition,s.SEND_MOUSE_POSITION_THROTTLE);this.crossFrameEventService.subscribe(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_START,this.onDragStart);this.crossFrameEventService.subscribe(s.SMARTEDIT_DRAG_AND_DROP_EVENTS.DRAG_DROP_END,this.onDragEnd);this.crossFrameEventService.subscribe(s.DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME.START,(function(){if(e.isEnabled()){e.iframeManagerService.getIframe().css("pointer-events","none")}}));this.crossFrameEventService.subscribe(s.DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME.END,(function(){if(e.isEnabled()){e.iframeManagerService.getIframe().css("pointer-events","auto")}}))};DragAndDropCrossOrigin.prototype.isEnabled=function(){return this.iframeManagerService.isCrossOrigin()};DragAndDropCrossOrigin.prototype.getIframeDragArea=function(){return this.yjQuery("#"+s.SMARTEDIT_IFRAME_DRAG_AREA)};DragAndDropCrossOrigin.prototype.getPositionRelativeToIframe=function(e,t){var n=this.getIframeDragArea().offset();return{x:e-n.left,y:t-n.top}};DragAndDropCrossOrigin.prototype.getPositionRelativeToIframe.$inject=["posX","posY"];DragAndDropCrossOrigin.prototype.syncIframeDragArea=function(){this.getIframeDragArea().width(this.iframeManagerService.getIframe().width());this.getIframeDragArea().height(this.iframeManagerService.getIframe().height());var e=this.iframeManagerService.getIframe().offset();this.getIframeDragArea().css({top:e.top,left:e.left});return this.getIframeDragArea()};DragAndDropCrossOrigin=__decorate([s.SeDowngradeService(s.IDragAndDropCrossOrigin),__param(0,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[Function,s.CrossFrameEventService,R])],DragAndDropCrossOrigin);return DragAndDropCrossOrigin}(s.IDragAndDropCrossOrigin);var x=function(){SiteService.$inject=["restServiceFactory"];function SiteService(e){this.SITES_FOR_CATALOGS_URI="/cmswebservices/v1/sites/catalogs";this.cache=null;this.siteRestService=e.get(s.SITES_RESOURCE_URI);this.sitesForCatalogsRestService=e.get(this.SITES_FOR_CATALOGS_URI)}SiteService.prototype.getAccessibleSites=function(){return this.siteRestService.get({}).then((function(e){return e.sites}))};SiteService.prototype.getSites=function(){var e=this;return this.getAccessibleSites().then((function(t){var n=t.reduce((function(e,t){return __spreadArrays(e||[],t.contentCatalogs)}),[]);return e.sitesForCatalogsRestService.save({catalogIds:n}).then((function(t){e.cache=t.sites;return e.cache}))}))};SiteService.prototype.getSiteById=function(e){return this.getSites().then((function(t){return t.find((function(t){return t.uid===e}))}))};SiteService.prototype.getSiteById.$inject=["uid"];__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.authorizationEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SiteService.prototype,"getAccessibleSites",null);__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.authorizationEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SiteService.prototype,"getSites",null);SiteService=__decorate([s.SeDowngradeService(),s.OperationContextRegistered("SITES_RESOURCE_URI","CMS"),__metadata("design:paramtypes",[s.RestServiceFactory])],SiteService);return SiteService}();var N=function(e){__extends(ExperienceService,e);ExperienceService.$inject=["seStorageManager","storagePropertiesService","logService","crossFrameEventService","siteService","previewService","catalogService","languageService","sharedDataService","iframeManagerService","routingService"];function ExperienceService(t,n,i,o,r,a,l,d,p,u,m){var g=e.call(this)||this;g.seStorageManager=t;g.storagePropertiesService=n;g.logService=i;g.crossFrameEventService=o;g.siteService=r;g.previewService=a;g.catalogService=l;g.languageService=d;g.sharedDataService=p;g.iframeManagerService=u;g.routingService=m;g.storageLoaded$=new c.BehaviorSubject(false);t.getStorage({storageId:s.EXPERIENCE_STORAGE_KEY,storageType:n.getProperty("STORAGE_TYPE_SESSION_STORAGE")}).then((function(e){g.experienceStorage=e;g.storageLoaded$.next(true)}));return g}ExperienceService.prototype.buildAndSetExperience=function(e){var t=this;var n=e.siteId;var i=e.catalogId;var o=e.catalogVersion;var r=e.productCatalogVersions;return Promise.all([this.siteService.getSiteById(n),this.catalogService.getContentCatalogsForSite(n),this.catalogService.getProductCatalogsForSite(n),this.languageService.getLanguagesForSite(n)]).then((function(s){var c=s[0],l=s[1],d=s[2],p=s[3];var u=l.find((function(e){return e.catalogId===i}));var m=u?u.versions.find((function(e){return e.version===o})):null;if(!m){return Promise.reject("no catalogVersionDescriptor found for "+i+" catalogId and "+o+" catalogVersion")}var g=[];d.forEach((function(e){var t=e.versions.find((function(e){return r?r.indexOf(e.uuid)>-1:e.active===true}));g.push({catalog:e.catalogId,catalogName:e.name,catalogVersion:t.version,active:t.active,uuid:t.uuid})}));var h=e.language?p.find((function(t){return t.isocode===e.language})):p[0];var v=a.cloneDeep(e);delete v.siteId;delete v.catalogId;delete v.catalogVersion;v.siteDescriptor=c;v.catalogDescriptor={catalogId:i,catalogVersion:m.version,catalogVersionUuid:m.uuid,name:u.name,siteId:n,active:m.active};v.languageDescriptor=h;v.time=v.time||null;v.productCatalogVersions=g;return t.setCurrentExperience(v)}))};ExperienceService.prototype.buildAndSetExperience.$inject=["params"];ExperienceService.prototype.updateExperiencePageId=function(e){var t=this;return this.getCurrentExperience().then((function(n){if(!n){return null}n.pageId=e;t.setCurrentExperience(n);t.reloadPage()}))};ExperienceService.prototype.updateExperiencePageId.$inject=["newPageID"];ExperienceService.prototype.loadExperience=function(e){var t=this;return this.buildAndSetExperience(e).then((function(){return t.reloadPage()}))};ExperienceService.prototype.loadExperience.$inject=["params"];ExperienceService.prototype.reloadPage=function(){this.routingService.reload(""+s.NG_ROUTE_PREFIX+s.STORE_FRONT_CONTEXT)};ExperienceService.prototype.updateExperiencePageContext=function(e,t){var n=this;return this.getCurrentExperience().then((function(i){return n.catalogService.getContentCatalogsForSite(i.catalogDescriptor.siteId).then((function(o){if(!i){return null}var r=o.reduce((function(e,t){if(t.parents&&t.parents.length){t.parents.forEach((function(t){e.push(t)}))}return e}),__spreadArrays(o));var s=a.flatten(r.map((function(e){return e.versions.map((function(t){t.catalogName=e.name||e.catalogName;t.catalogId=e.catalogId;return t}))}))).find((function(t){return t.uuid===e}));return n.catalogService.getCurrentSiteID().then((function(e){i.pageId=t;i.pageContext={catalogId:s.catalogId,catalogName:s.catalogName,catalogVersion:s.version,catalogVersionUuid:s.uuid,siteId:e,active:s.active};return n.setCurrentExperience(i)}))}))})).then((function(e){n.crossFrameEventService.publish(s.EVENTS.PAGE_CHANGE,e);return e}))};ExperienceService.prototype.updateExperiencePageContext.$inject=["pageCatalogVersionUuid","pageId"];ExperienceService.prototype.getCurrentExperience=function(){var e=this;return this.storageLoaded$.pipe(l.filter((function(e){return e})),l.take(1),l.mergeMap((function(){return e.experienceStorage.get(s.EXPERIENCE_STORAGE_KEY)}))).toPromise()};ExperienceService.prototype.setCurrentExperience=function(e){var t=this;return this.getCurrentExperience().then((function(n){t.previousExperience=n;return t.experienceStorage.put(e,s.EXPERIENCE_STORAGE_KEY).then((function(){t.sharedDataService.set(s.EXPERIENCE_STORAGE_KEY,e);return Promise.resolve(e)}))}))};ExperienceService.prototype.setCurrentExperience.$inject=["experience"];ExperienceService.prototype.hasCatalogVersionChanged=function(){var e=this;return this.getCurrentExperience().then((function(t){return e.previousExperience===undefined||t.catalogDescriptor.catalogId!==e.previousExperience.catalogDescriptor.catalogId||t.catalogDescriptor.catalogVersion!==e.previousExperience.catalogDescriptor.catalogVersion}))};ExperienceService.prototype.initializeExperience=function(){var e=this;this.iframeManagerService.setCurrentLocation(null);return this.getCurrentExperience().then((function(t){if(!t){e.routingService.go(s.NG_ROUTE_PREFIX);return null}return e.updateExperience()}),(function(t){e.logService.error("ExperienceService.initializeExperience() - failed to retrieve experience");return Promise.reject(t)}))};ExperienceService.prototype.updateExperience=function(e){var t=this;return this.getCurrentExperience().then((function(n){n=a.cloneDeep(n);a.merge(n,e);t.previewService.getResourcePathFromPreviewUrl(n.siteDescriptor.previewUrl).then((function(e){var i=t._convertExperienceToPreviewData(n,e);return t.previewService.createPreview(i).then((function(e){window.__smartedit__.smartEditBootstrapped={};t.iframeManagerService.loadPreview(e.resourcePath,e.ticketId);return t.setCurrentExperience(n)}),(function(e){t.logService.error("iframeManagerService.updateExperience() - failed to update experience");return Promise.reject(e)}))}),(function(e){t.logService.error("ExperienceService.updateExperience() - failed to retrieve resource path");return Promise.reject(e)}))}),(function(e){t.logService.error("ExperienceService.updateExperience() - failed to retrieve current experience");return Promise.reject(e)}))};ExperienceService.prototype.updateExperience.$inject=["newExperience"];ExperienceService.prototype.compareWithCurrentExperience=function(e){if(!e){return Promise.resolve(false)}return this.getCurrentExperience().then((function(t){if(!t){return Promise.resolve(false)}if(t.pageId===e.pageId&&t.siteDescriptor.uid===e.siteId&&t.catalogDescriptor.catalogId===e.catalogId&&t.catalogDescriptor.catalogVersion===e.catalogVersion){return Promise.resolve(true)}return Promise.resolve(false)}))};ExperienceService.prototype.compareWithCurrentExperience.$inject=["experience"];ExperienceService=__decorate([s.SeDowngradeService(s.IExperienceService),s.GatewayProxied("loadExperience","updateExperiencePageContext","getCurrentExperience","hasCatalogVersionChanged","buildRefreshedPreviewUrl","compareWithCurrentExperience"),__param(3,i.Inject(s.EVENT_SERVICE)),__metadata("design:paramtypes",[s.IStorageManager,s.IStoragePropertiesService,s.LogService,s.CrossFrameEventService,x,s.IPreviewService,s.ICatalogService,s.LanguageService,s.ISharedDataService,R,s.SmarteditRoutingService])],ExperienceService);return ExperienceService}(s.IExperienceService);var k=function(e){__extends(FeatureService,e);FeatureService.$inject=["toolbarServiceFactory","cloneableUtils"];function FeatureService(t,n){var i=e.call(this,n)||this;i.toolbarServiceFactory=t;i.features=[];return i}FeatureService.prototype.getFeatureProperty=function(e,t){var n=this._getFeatureByKey(e);return Promise.resolve(n?n[t]:null)};FeatureService.prototype.getFeatureProperty.$inject=["featureKey","propertyName"];FeatureService.prototype.getFeatureKeys=function(){return this.features.map((function(e){return e.key}))};FeatureService.prototype.addToolbarItem=function(e){var t=this.toolbarServiceFactory.getToolbarService(e.toolbarId);e.enablingCallback=function(){this.addItems([e])}.bind(t);e.disablingCallback=function(){this.removeItemByKey(e.key)}.bind(t);return this.register(e)};FeatureService.prototype.addToolbarItem.$inject=["configuration"];FeatureService.prototype._registerAliases=function(e){var t=this._getFeatureByKey(e.key);if(!t){e.id=btoa(e.key);this.features.push(e)}return Promise.resolve()};FeatureService.prototype._registerAliases.$inject=["configuration"];FeatureService.prototype._getFeatureByKey=function(e){return this.features.find((function(t){return t.key===e}))};FeatureService.prototype._getFeatureByKey.$inject=["key"];FeatureService=__decorate([s.SeDowngradeService(s.IFeatureService),s.GatewayProxied("_registerAliases","addToolbarItem","register","enable","disable","_remoteEnablingFromInner","_remoteDisablingFromInner","addDecorator","getFeatureProperty","addContextualMenuButton"),__metadata("design:paramtypes",[s.IToolbarServiceFactory,s.CloneableUtils])],FeatureService);return FeatureService}(s.IFeatureService);var F=function(e){__extends(PageInfoService,e);function PageInfoService(){return e.call(this)||this}PageInfoService=__decorate([s.SeDowngradeService(s.IPageInfoService),s.GatewayProxied("getPageUID","getPageUUID","getCatalogVersionUUIDFromPage"),__metadata("design:paramtypes",[])],PageInfoService);return PageInfoService}(s.IPageInfoService);var z=function(e){__extends(PreviewService,e);PreviewService.$inject=["log","loadConfigManagerService","restServiceFactory","urlUtils"];function PreviewService(t,n,i,o){var r=e.call(this,o)||this;r.log=t;r.loadConfigManagerService=n;r.restServiceFactory=i;r.ticketIdIdentifier="ticketId";return r}PreviewService.prototype.createPreview=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=["catalogVersions","resourcePath"];this.validatePreviewDataAttributes(e,t);return[4,this.prepareRestService()];case 1:o.sent();o.label=2;case 2:o.trys.push([2,4,,5]);return[4,this.previewRestService.save(e)];case 3:n=o.sent();return[2,s.objectUtils.copy(n)];case 4:i=o.sent();this.log.error("PreviewService.createPreview() - Error creating preview");return[2,Promise.reject(i)];case 5:return[2]}}))}))};PreviewService.prototype.createPreview.$inject=["previewData"];PreviewService.prototype.updatePreview=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:t=["catalogVersions","resourcePath","ticketId"];this.validatePreviewDataAttributes(e,t);return[4,this.prepareRestService()];case 1:i.sent();i.label=2;case 2:i.trys.push([2,4,,5]);return[4,this.previewByticketRestService.update(e)];case 3:return[2,i.sent()];case 4:n=i.sent();this.log.error("PreviewService.updatePreview() - Error updating preview");return[2,Promise.reject(n)];case 5:return[2]}}))}))};PreviewService.prototype.updatePreview.$inject=["previewData"];PreviewService.prototype.getResourcePathFromPreviewUrl=function(e){var t=this;return this.prepareRestService().then((function(){return t.urlUtils.getAbsoluteURL(t.domain,e)}))};PreviewService.prototype.getResourcePathFromPreviewUrl.$inject=["previewUrl"];PreviewService.prototype.prepareRestService=function(){var e=this;if(!this.previewRestService||!this.previewByticketRestService){return this.loadConfigManagerService.loadAsObject().then((function(t){var n=t.previewTicketURI||s.PREVIEW_RESOURCE_URI;e.previewRestService=e.restServiceFactory.get(n);e.previewByticketRestService=e.restServiceFactory.get(n,e.ticketIdIdentifier);e.domain=t.domain}),(function(t){e.log.error("PreviewService.getRestService() - Error loading configuration");return Promise.reject(t)}))}return Promise.resolve()};PreviewService.prototype.validatePreviewDataAttributes=function(e,t){if(t){t.forEach((function(t){if(a.isEmpty(e[t])){throw new Error("ValidatePreviewDataAttributes - "+t+" is empty")}}))}};PreviewService.prototype.validatePreviewDataAttributes.$inject=["previewData","requiredFields"];PreviewService=__decorate([s.GatewayProxied(),s.SeDowngradeService(s.IPreviewService),__metadata("design:paramtypes",[s.LogService,I,s.RestServiceFactory,s.UrlUtils])],PreviewService);return PreviewService}(s.IPreviewService);var L=function(e){__extends(PerspectiveService,e);PerspectiveService.$inject=["routingService","logService","systemEventService","featureService","waitDialogService","storageService","crossFrameEventService","permissionService"];function PerspectiveService(t,n,i,o,r,a,c,l){var d=e.call(this)||this;d.routingService=t;d.logService=n;d.systemEventService=i;d.featureService=o;d.waitDialogService=r;d.storageService=a;d.crossFrameEventService=c;d.permissionService=l;d.PERSPECTIVE_COOKIE_NAME="smartedit-perspectives";d.INITIAL_SWITCHTO_ARG="INITIAL_SWITCHTO_ARG";d.data={activePerspective:undefined,previousPerspective:undefined,previousSwitchToArg:d.INITIAL_SWITCHTO_ARG};d.immutablePerspectives=[];d.perspectives=[];d._addDefaultPerspectives();d._registerEventHandlers();d.NON_PERSPECTIVE_OBJECT={key:s.NONE_PERSPECTIVE,nameI18nKey:"",features:[]};return d}PerspectiveService.prototype.register=function(e){this._validate(e);var t=this._findByKey(e.key);if(!t){this._addPerspectiveSelectorWidget(e);t=e;t.isHotkeyDisabled=!!e.isHotkeyDisabled;this.immutablePerspectives.push(t);this.perspectives.push(t);this.systemEventService.publishAsync(s.EVENT_PERSPECTIVE_ADDED)}else{t.features=s.objectUtils.uniqueArray(t.features||[],e.features||[]);t.perspectives=s.objectUtils.uniqueArray(t.perspectives||[],e.perspectives||[]);t.permissions=s.objectUtils.uniqueArray(t.permissions||[],e.permissions||[]);this.systemEventService.publishAsync(s.EVENT_PERSPECTIVE_UPDATED)}return Promise.resolve()};PerspectiveService.prototype.register.$inject=["configuration"];PerspectiveService.prototype.getPerspectives=function(){var e=this;var t=[];this.immutablePerspectives.forEach((function(n){var i;if(n.permissions&&n.permissions.length>0){i=e.permissionService.isPermitted([{names:n.permissions}])}else{i=Promise.resolve(true)}t.push(i)}));return Promise.all(t).then((function(t){return e.immutablePerspectives.filter((function(e,n){return t[n]}))}))};PerspectiveService.prototype.hasActivePerspective=function(){return Promise.resolve(Boolean(this.data.activePerspective))};PerspectiveService.prototype.getActivePerspective=function(){return this.data.activePerspective?__assign({},this._findByKey(this.data.activePerspective.key)):null};PerspectiveService.prototype.isEmptyPerspectiveActive=function(){return Promise.resolve(!!this.data.activePerspective&&this.data.activePerspective.key===s.NONE_PERSPECTIVE)};PerspectiveService.prototype.switchTo=function(e){var t=this;if(!this._changeActivePerspective(e)){this.waitDialogService.hideWaitModal();return Promise.resolve()}this._handleUnloadEvent(e);this.waitDialogService.showWaitModal();var n=[];if(this.data.previousPerspective){this._fetchAllFeatures(this.data.previousPerspective,n)}var i=[];this._fetchAllFeatures(this.data.activePerspective,i);n.filter((function(e){return!i.some((function(t){return e===t}))})).forEach((function(e){t.featureService.disable(e)}));var o=[];i.filter((function(e){return!n.some((function(t){return e===t}))})).forEach((function(e){o.push(t._enableOrDisableFeature(e))}));return Promise.all(o).then((function(){if(t.data.activePerspective.key===s.NONE_PERSPECTIVE){t.waitDialogService.hideWaitModal()}t.crossFrameEventService.publish(s.EVENT_PERSPECTIVE_CHANGED,t.data.activePerspective.key!==s.NONE_PERSPECTIVE)}))};PerspectiveService.prototype.switchTo.$inject=["key"];PerspectiveService.prototype.selectDefault=function(){var e=this;return this.getPerspectives().then((function(t){return e.storageService.getValueFromLocalStorage(e.PERSPECTIVE_COOKIE_NAME,true).then((function(n){var i=t.find((function(e){return e.key===n}));var o;var r;if(!i){e.logService.warn('Cannot select mode "'+n+'" It might not exist or is restricted.');var a=e._findByKey(n);if(!!a){e._disableAllFeaturesForPerspective(a)}o=e.NON_PERSPECTIVE_OBJECT;r=e.NON_PERSPECTIVE_OBJECT}else{var a=e._findByKey(n);o=a?a:e.NON_PERSPECTIVE_OBJECT;r=e.data.previousPerspective?e.data.previousPerspective:o}if(o.key!==e.NON_PERSPECTIVE_OBJECT.key){e._disableAllFeaturesForPerspective(o)}return e.switchTo(r.key)}))}))};PerspectiveService.prototype.refreshPerspective=function(){var e=this;return this.getPerspectives().then((function(t){var n=e.getActivePerspective();if(!n){return e.selectDefault()}else{e.perspectives=t;if(!e._findByKey(n.key)){return e.switchTo(s.NONE_PERSPECTIVE)}else{var i=[];var o=[];e._fetchAllFeatures(n,i);i.forEach((function(t){o.push(e._enableOrDisableFeature(t))}));return Promise.all(o).then((function(){e.waitDialogService.hideWaitModal();e.crossFrameEventService.publish(s.EVENT_PERSPECTIVE_REFRESHED,n.key!==s.NONE_PERSPECTIVE)}))}}}))};PerspectiveService.prototype.getActivePerspectiveKey=function(){var e=this.getActivePerspective();return Promise.resolve(e?e.key:null)};PerspectiveService.prototype.isHotkeyEnabledForActivePerspective=function(){var e=this.getActivePerspective();return Promise.resolve(e&&!e.isHotkeyDisabled)};PerspectiveService.prototype._addPerspectiveSelectorWidget=function(e){e.features=e.features||[];if(e.features.indexOf(s.PERSPECTIVE_SELECTOR_WIDGET_KEY)===-1){e.features.unshift(s.PERSPECTIVE_SELECTOR_WIDGET_KEY)}};PerspectiveService.prototype._addPerspectiveSelectorWidget.$inject=["configuration"];PerspectiveService.prototype._addDefaultPerspectives=function(){this.register({key:s.NONE_PERSPECTIVE,nameI18nKey:"se.perspective.none.name",isHotkeyDisabled:true,descriptionI18nKey:"se.perspective.none.description.disabled"});this.register({key:s.ALL_PERSPECTIVE,nameI18nKey:"se.perspective.all.name",descriptionI18nKey:"se.perspective.all.description"})};PerspectiveService.prototype._registerEventHandlers=function(){var e=this;this.systemEventService.subscribe(s.EVENTS.LOGOUT,this._clearPerspectiveFeatures.bind(this));this.crossFrameEventService.subscribe(s.EVENTS.USER_HAS_CHANGED,this._clearPerspectiveFeatures.bind(this));this.routingService.routeChangeSuccess().subscribe((function(t){var n=e.routingService.getCurrentUrlFromEvent(t);if((n||"").includes(s.STORE_FRONT_CONTEXT)){e._clearPerspectiveFeatures()}}))};PerspectiveService.prototype._validate=function(e){if(s.stringUtils.isBlank(e.key)){throw new Error("perspectiveService.configuration.key.error.required")}if(s.stringUtils.isBlank(e.nameI18nKey)){throw new Error("perspectiveService.configuration.nameI18nKey.error.required")}if([s.NONE_PERSPECTIVE,s.ALL_PERSPECTIVE].indexOf(e.key)===-1&&(s.stringUtils.isBlank(e.features)||e.features.length===0)){throw new Error("perspectiveService.configuration.features.error.required")}};PerspectiveService.prototype._validate.$inject=["configuration"];PerspectiveService.prototype._findByKey=function(e){return this.perspectives.find((function(t){return t.key===e}))};PerspectiveService.prototype._findByKey.$inject=["key"];PerspectiveService.prototype._fetchAllFeatures=function(e,t){var n=this;if(!t){t=[]}if(e.key===s.ALL_PERSPECTIVE){s.objectUtils.uniqueArray(t,this.featureService.getFeatureKeys()||[])}else{s.objectUtils.uniqueArray(t,e.features||[]);(e.perspectives||[]).forEach((function(e){var i=n._findByKey(e);if(i){n._fetchAllFeatures(i,t)}else{n.logService.debug("nested perspective "+e+" was not found in the registry")}}))}};PerspectiveService.prototype._fetchAllFeatures.$inject=["perspective","holder"];PerspectiveService.prototype._enableOrDisableFeature=function(e){var t=this;return this.featureService.getFeatureProperty(e,"permissions").then((function(n){if(!Array.isArray(n)){n=[]}return t.permissionService.isPermitted([{names:n}]).then((function(n){if(n){t.featureService.enable(e)}else{t.featureService.disable(e)}}))}))};PerspectiveService.prototype._enableOrDisableFeature.$inject=["featureKey"];PerspectiveService.prototype._handleUnloadEvent=function(e){if(e!==this.data.previousSwitchToArg&&this.data.previousSwitchToArg!==this.INITIAL_SWITCHTO_ARG){this.crossFrameEventService.publish(s.EVENT_PERSPECTIVE_UNLOADING,this.data.previousSwitchToArg)}this.data.previousSwitchToArg=e};PerspectiveService.prototype._handleUnloadEvent.$inject=["nextPerspectiveKey"];PerspectiveService.prototype._retrievePerspective=function(e){if(this.data.activePerspective&&this.data.activePerspective.key===e){return null}var t=this._findByKey(e);if(!t){throw new Error("switchTo() - Couldn't find perspective with key "+e)}return t};PerspectiveService.prototype._retrievePerspective.$inject=["key"];PerspectiveService.prototype._changeActivePerspective=function(e){var t=this._retrievePerspective(e);if(t){this.data.previousPerspective=this.data.activePerspective;this.data.activePerspective=t;this.storageService.setValueInLocalStorage(this.PERSPECTIVE_COOKIE_NAME,t.key,true)}return t};PerspectiveService.prototype._changeActivePerspective.$inject=["newPerspectiveKey"];PerspectiveService.prototype._disableAllFeaturesForPerspective=function(e){var t=this;var n=[];this._fetchAllFeatures(e,n);n.forEach((function(e){t.featureService.disable(e)}))};PerspectiveService.prototype._disableAllFeaturesForPerspective.$inject=["perspective"];PerspectiveService.prototype._clearPerspectiveFeatures=function(){var e=this;var t=[];if(this.data&&this.data.activePerspective){this._fetchAllFeatures(this.data.activePerspective,t)}t.forEach((function(t){e.featureService.disable(t)}));return Promise.resolve()};PerspectiveService=__decorate([s.SeDowngradeService(s.IPerspectiveService),s.GatewayProxied("register","switchTo","hasActivePerspective","isEmptyPerspectiveActive","selectDefault","refreshPerspective","getActivePerspectiveKey","isHotkeyEnabledForActivePerspective"),__metadata("design:paramtypes",[s.SmarteditRoutingService,s.LogService,s.SystemEventService,s.IFeatureService,s.IWaitDialogService,s.IStorageService,s.CrossFrameEventService,s.IPermissionService])],PerspectiveService);return PerspectiveService}(s.IPerspectiveService);var V=function(e){__extends(SessionService,e);SessionService.$inject=["$log","restServiceFactory","storageService","cryptographicUtils"];function SessionService(t,n,i,o){var r=e.call(this)||this;r.$log=t;r.storageService=i;r.cryptographicUtils=o;r.USER_DATA_URI="/cmswebservices/v1/users/:userUid";r.whoAmIService=n.get(s.WHO_AM_I_RESOURCE_URI);r.userRestService=n.get(r.USER_DATA_URI);return r}SessionService.prototype.getCurrentUserDisplayName=function(){return this.getCurrentUserData().then((function(e){return e.displayName}))};SessionService.prototype.getCurrentUsername=function(){return this.getCurrentUserData().then((function(e){return e.uid}))};SessionService.prototype.getCurrentUser=function(){return this.getCurrentUserData()};SessionService.prototype.hasUserChanged=function(){var e=this;var t=Promise.resolve(this.cachedUserHash?this.cachedUserHash:this.storageService.getItem(s.PREVIOUS_USERNAME_HASH));return t.then((function(t){return e.whoAmIService.get({}).then((function(n){return!!t&&t!==e.cryptographicUtils.sha1Hash(n.uid)}))}))};SessionService.prototype.setCurrentUsername=function(){var e=this;return this.whoAmIService.get({}).then((function(t){e.cachedUserHash=e.cryptographicUtils.sha1Hash(t.uid);e.storageService.setItem(s.PREVIOUS_USERNAME_HASH,e.cachedUserHash)}))};SessionService.prototype.getCurrentUserData=function(){var e=this;return this.whoAmIService.get({}).then((function(t){return e.userRestService.get({userUid:t.uid}).then((function(e){return{uid:e.uid,displayName:t.displayName,readableLanguages:e.readableLanguages,writeableLanguages:e.writeableLanguages}}))})).catch((function(t){e.$log.warn("[SessionService]: Can't load session information",t);return null}))};__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.userEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SessionService.prototype,"getCurrentUserData",null);SessionService=__decorate([s.SeDowngradeService(s.ISessionService),s.GatewayProxied("getCurrentUsername","getCurrentUserDisplayName","hasUserChanged","setCurrentUsername","getCurrentUser"),__metadata("design:paramtypes",[s.LogService,s.RestServiceFactory,s.IStorageService,s.CryptographicUtils])],SessionService);return SessionService}(s.ISessionService);var $=function(e){__extends(SharedDataService,e);function SharedDataService(){var t=e.call(this)||this;t.storage={};return t}SharedDataService.prototype.get=function(e){return Promise.resolve(this.storage[e])};SharedDataService.prototype.get.$inject=["key"];SharedDataService.prototype.set=function(e,t){this.storage[e]=t;return Promise.resolve()};SharedDataService.prototype.set.$inject=["key","value"];SharedDataService.prototype.update=function(e,t){var n=this;return this.get(e).then((function(i){return t(i).then((function(t){return n.set(e,t)}))}))};SharedDataService.prototype.update.$inject=["key","modifyingCallback"];SharedDataService.prototype.remove=function(e){var t=this.storage[e];delete this.storage[e];return Promise.resolve(t)};SharedDataService.prototype.remove.$inject=["key"];SharedDataService.prototype.containsKey=function(e){return Promise.resolve(a.has(this.storage,e))};SharedDataService.prototype.containsKey.$inject=["key"];SharedDataService=__decorate([s.SeDowngradeService(s.ISharedDataService),s.GatewayProxied(),i.Injectable(),__metadata("design:paramtypes",[])],SharedDataService);return SharedDataService}(s.ISharedDataService);var U=function(e){__extends(StorageService,e);StorageService.$inject=["logService","windowUtils","cryptographicUtils","fingerPrintingService"];function StorageService(t,n,i,o){var r=e.call(this)||this;r.logService=t;r.windowUtils=n;r.cryptographicUtils=i;r.fingerPrintingService=o;r.SMARTEDIT_SESSIONS="smartedit-sessions";r.CUSTOM_PROPERTIES="custom_properties";return r}StorageService.prototype.isInitialized=function(){var e=this.getAuthTokens();return Promise.resolve(a.values(a.omit(e,[this.CUSTOM_PROPERTIES])).length>0)};StorageService.prototype.storeAuthToken=function(e,t){var n=this.getAuthTokens();n[e]=t;this._setSmarteditSessions(n);return Promise.resolve()};StorageService.prototype.storeAuthToken.$inject=["authURI","auth"];StorageService.prototype.getAuthToken=function(e){var t=this.getAuthTokens();return Promise.resolve(t[e])};StorageService.prototype.getAuthToken.$inject=["authURI"];StorageService.prototype.removeAuthToken=function(e){var t=this.getAuthTokens();delete t[e];this._setSmarteditSessions(t);return Promise.resolve()};StorageService.prototype.removeAuthToken.$inject=["authURI"];StorageService.prototype.removeAllAuthTokens=function(){this._removeAllAuthTokens();return Promise.resolve()};StorageService.prototype.getValueFromCookie=function(e,t){throw new Error("getValueFromCookie deprecated since 1905, use getValueFromLocalStorage")};StorageService.prototype.getValueFromCookie.$inject=["cookieName","isEncoded"];StorageService.prototype.getValueFromLocalStorage=function(e,t){return Promise.resolve(this._getValueFromLocalStorage(e,t))};StorageService.prototype.getValueFromLocalStorage.$inject=["cookieName","isEncoded"];StorageService.prototype.getAuthTokens=function(){var e=this.windowUtils.getWindow().localStorage.getItem(this.SMARTEDIT_SESSIONS);var t;if(e){try{var n=this.cryptographicUtils.aesDecrypt(e,this.fingerPrintingService.getFingerprint());t=JSON.parse(decodeURIComponent(escape(n)))}catch(e){this.logService.info("Failed to read authentication token. Forcing a re-authentication.")}}return t||{}};StorageService.prototype.putValueInCookie=function(e,t,n){throw new Error("putValueInCookie deprecated since 1905, use setValueInLocalStorage")};StorageService.prototype.putValueInCookie.$inject=["cookieName","value","encode"];StorageService.prototype.setValueInLocalStorage=function(e,t,n){return Promise.resolve(this._setValueInLocalStorage(e,t,n))};StorageService.prototype.setValueInLocalStorage.$inject=["cookieName","value","encode"];StorageService.prototype.setItem=function(e,t){var n=this.getAuthTokens();n[this.CUSTOM_PROPERTIES]=n[this.CUSTOM_PROPERTIES]||{};n[this.CUSTOM_PROPERTIES][e]=t;this._setSmarteditSessions(n);return Promise.resolve()};StorageService.prototype.setItem.$inject=["key","value"];StorageService.prototype.getItem=function(e){var t=this.getAuthTokens();t[this.CUSTOM_PROPERTIES]=t[this.CUSTOM_PROPERTIES]||{};return Promise.resolve(t[this.CUSTOM_PROPERTIES][e])};StorageService.prototype.getItem.$inject=["key"];StorageService.prototype._removeAllAuthTokens=function(){var e=this.getAuthTokens();var t=a.pick(e,[this.CUSTOM_PROPERTIES]);this._setSmarteditSessions(t)};StorageService.prototype._getValueFromLocalStorage=function(e,t){var n=this.windowUtils.getWindow().localStorage.getItem(e);var i=null;if(n){try{i=JSON.parse(t?decodeURIComponent(escape(window.atob(n))):n)}catch(e){this.logService.error("Failed during deserialization ",e)}}return i};StorageService.prototype._getValueFromLocalStorage.$inject=["cookieName","isEncoded"];StorageService.prototype._setSmarteditSessions=function(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));var n=this.cryptographicUtils.aesBase64Encrypt(t,this.fingerPrintingService.getFingerprint());this.windowUtils.getWindow().localStorage.setItem(this.SMARTEDIT_SESSIONS,n)};StorageService.prototype._setSmarteditSessions.$inject=["sessions"];StorageService.prototype._setValueInLocalStorage=function(e,t,n){var i=JSON.stringify(t);i=n?btoa(unescape(encodeURIComponent(i))):i;this.windowUtils.getWindow().localStorage.setItem(e,i)};StorageService.prototype._setValueInLocalStorage.$inject=["cookieName","value","encode"];StorageService=__decorate([s.SeDowngradeService(s.IStorageService),s.GatewayProxied("isInitialized","storeAuthToken","getAuthToken","removeAuthToken","removeAllAuthTokens","storePrincipalIdentifier","getPrincipalIdentifier","removePrincipalIdentifier","getValueFromCookie","getValueFromLocalStorage"),i.Injectable(),__metadata("design:paramtypes",[s.LogService,s.WindowUtils,s.CryptographicUtils,s.FingerPrintingService])],StorageService);return StorageService}(s.IStorageService);var j=function(){PermissionsRegistrationService.$inject=["permissionService","sharedDataService"];function PermissionsRegistrationService(e,t){this.permissionService=e;this.sharedDataService=t}PermissionsRegistrationService.prototype.registerRulesAndPermissions=function(){var e=this;this.permissionService.registerRule({names:["se.slot.belongs.to.page"],verify:function(t){return e.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY).then((function(e){return e.pageContext&&e.pageContext.catalogVersionUuid===t[0].context.slotCatalogVersionUuid}))}});this.permissionService.registerPermission({aliases:["se.slot.not.external"],rules:["se.slot.belongs.to.page"]})};PermissionsRegistrationService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.IPermissionService,s.ISharedDataService])],PermissionsRegistrationService);return PermissionsRegistrationService}();var B=function(e){__extends(CatalogService,e);CatalogService.$inject=["logService","sharedDataService","siteService","urlService","contentCatalogRestService","productCatalogRestService","storageService"];function CatalogService(t,n,i,o,r,a,s){var c=e.call(this)||this;c.logService=t;c.sharedDataService=n;c.siteService=i;c.urlService=o;c.contentCatalogRestService=r;c.productCatalogRestService=a;c.storageService=s;c.SELECTED_SITE_COOKIE_NAME="seselectedsite";return c}CatalogService.prototype.getContentCatalogsForSite=function(e){return this.contentCatalogRestService.get({siteUID:e}).then((function(e){return e.catalogs}))};CatalogService.prototype.getContentCatalogsForSite.$inject=["siteUID"];CatalogService.prototype.getCatalogByVersion=function(e,t){return this.getContentCatalogsForSite(e).then((function(e){return e.filter((function(e){return e.versions.some((function(e){return e.version===t}))}))}))};CatalogService.prototype.getCatalogByVersion.$inject=["siteUID","catalogVersionName"];CatalogService.prototype.isContentCatalogVersionNonActive=function(e){var t=this;return this._getContext(e).then((function(e){return t.getContentCatalogsForSite(e[s.CONTEXT_SITE_ID]).then((function(t){var n=t.find((function(t){return t.catalogId===e[s.CONTEXT_CATALOG]}));var i=n?n.versions.find((function(t){return t.version===e[s.CONTEXT_CATALOG_VERSION]})):null;if(!i){throw new Error("Invalid uriContext "+e+", cannot find catalog version.")}return!i.active}))}))};CatalogService.prototype.isContentCatalogVersionNonActive.$inject=["_uriContext"];CatalogService.prototype.getContentCatalogActiveVersion=function(e){var t=this;return this._getContext(e).then((function(e){return t.getContentCatalogsForSite(e[s.CONTEXT_SITE_ID]).then((function(t){var n=t.find((function(t){return t.catalogId===e[s.CONTEXT_CATALOG]}));var i=n?n.versions.find((function(e){return e.active})):null;if(!i){throw new Error("Invalid uriContext "+e+", cannot find catalog version.")}return i.version}))}))};CatalogService.prototype.getContentCatalogActiveVersion.$inject=["_uriContext"];CatalogService.prototype.getActiveContentCatalogVersionByCatalogId=function(e){var t=this;return this._getContext().then((function(n){return t.getContentCatalogsForSite(n[s.CONTEXT_SITE_ID]).then((function(t){var n=t.find((function(t){return t.catalogId===e}));var i=n?n.versions.find((function(e){return e.active})):null;if(!i){throw new Error("Invalid content catalog "+e+", cannot find any active catalog version.")}return i.version}))}))};CatalogService.prototype.getActiveContentCatalogVersionByCatalogId.$inject=["contentCatalogId"];CatalogService.prototype.getContentCatalogVersion=function(e){var t=this;return this._getContext(e).then((function(e){return t.getContentCatalogsForSite(e[s.CONTEXT_SITE_ID]).then((function(t){var n=t.find((function(t){return t.catalogId===e[s.CONTEXT_CATALOG]}));if(!n){throw new Error("no catalog "+e[s.CONTEXT_CATALOG]+" found for site "+e[s.CONTEXT_SITE_ID])}var i=n.versions.find((function(t){return t.version===e[s.CONTEXT_CATALOG_VERSION]}));if(!i){throw new Error("no catalogVersion "+e[s.CONTEXT_CATALOG_VERSION]+" for catalog "+e[s.CONTEXT_CATALOG]+" and site "+e[s.CONTEXT_SITE_ID])}i.catalogName=n.name;i.catalogId=n.catalogId;return i}))}))};CatalogService.prototype.getContentCatalogVersion.$inject=["_uriContext"];CatalogService.prototype.getCurrentSiteID=function(){return this.storageService.getValueFromLocalStorage(this.SELECTED_SITE_COOKIE_NAME,false)};CatalogService.prototype.getDefaultSiteForContentCatalog=function(e){var t=this;return this.siteService.getSites().then((function(n){var i=n.filter((function(t){var n=a.last(t.contentCatalogs);return n&&n===e}));if(i.length===0){t.logService.warn("[catalogService] - No default site found for content catalog "+e)}else if(i.length>1){t.logService.warn("[catalogService] - Many default sites found for content catalog "+e)}return i[0]}))};CatalogService.prototype.getDefaultSiteForContentCatalog.$inject=["contentCatalogId"];CatalogService.prototype.getCatalogVersionByUuid=function(e,t){var n=this;return this.getAllContentCatalogsGroupedById().then((function(i){var o=a.reduce(i,(function(e,t){return e.concat(t)}),[]);var r=a.flatten(o.map((function(e){return a.cloneDeep(e.versions).map((function(t){t.catalogName=e.name;t.catalogId=e.catalogId;return t}))}))).filter((function(n){return e===n.uuid&&(!t||t===n.siteDescriptor.uid)}))[0];if(!r){var s="Cannot find catalog version with UUID "+e+(t?" in site "+t:"");throw new Error(s)}return n.getCurrentSiteID().then((function(e){r.siteId=e;return r}))}))};CatalogService.prototype.getCatalogVersionByUuid.$inject=["catalogVersionUuid","siteId"];CatalogService.prototype.getAllContentCatalogsGroupedById=function(){var e=this;return this.siteService.getSites().then((function(t){var n=t.map((function(t){return e.getContentCatalogsForSite(t.uid).then((function(e){e.forEach((function(e){e.versions=e.versions.map((function(e){e.siteDescriptor=t;return e}))}));return e}))}));return Promise.all(n)}))};CatalogService.prototype.getProductCatalogsBySiteKey=function(e){var t=this;return this._getContext().then((function(n){return t.getProductCatalogsForSite(n[e])}))};CatalogService.prototype.getProductCatalogsBySiteKey.$inject=["siteUIDKey"];CatalogService.prototype.getProductCatalogsForSite=function(e){return this.productCatalogRestService.get({siteUID:e}).then((function(e){return e.catalogs}))};CatalogService.prototype.getProductCatalogsForSite.$inject=["siteUIDValue"];CatalogService.prototype.getActiveProductCatalogVersionByCatalogId=function(e){return this.getProductCatalogsBySiteKey(s.CONTEXT_SITE_ID).then((function(t){var n=t.find((function(t){return t.catalogId===e}));var i=n?n.versions.find((function(e){return e.active})):null;if(!i){throw new Error("Invalid product catalog "+e+", cannot find any active catalog version.")}return i.version}))};CatalogService.prototype.getActiveProductCatalogVersionByCatalogId.$inject=["productCatalogId"];CatalogService.prototype.getCatalogVersionUUid=function(e){return this.getContentCatalogVersion(e).then((function(e){return e.uuid}))};CatalogService.prototype.getCatalogVersionUUid.$inject=["_uriContext"];CatalogService.prototype.retrieveUriContext=function(e){return this._getContext(e)};CatalogService.prototype.retrieveUriContext.$inject=["_uriContext"];CatalogService.prototype.returnActiveCatalogVersionUIDs=function(e){return e.reduce((function(e,t){e.push(t.versions.find((function(e){return e.active})).uuid);return e}),[])};CatalogService.prototype.returnActiveCatalogVersionUIDs.$inject=["catalogs"];CatalogService.prototype.isCurrentCatalogMultiCountry=function(){var e=this;return this.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY).then((function(t){if(t&&t.siteDescriptor&&t.catalogDescriptor){var n=t.siteDescriptor.uid;var i=t.catalogDescriptor.catalogId;return e.getContentCatalogsForSite(n).then((function(e){var t=e.find((function(e){return e.catalogId===i}));return Promise.resolve(t&&t.parents&&t.parents.length?true:false)}))}return false}))};CatalogService.prototype._getContext=function(e){var t=this;return e?Promise.resolve(e):this.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY).then((function(e){if(!e){throw new Error("catalogService was not provided with a uriContext and could not retrive an experience from sharedDataService")}return t.urlService.buildUriContext(e.siteDescriptor.uid,e.catalogDescriptor.catalogId,e.catalogDescriptor.catalogVersion)}))};CatalogService.prototype._getContext.$inject=["_uriContext"];__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.catalogEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],CatalogService.prototype,"getProductCatalogsForSite",null);__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.pageChangeEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],CatalogService.prototype,"isCurrentCatalogMultiCountry",null);CatalogService=__decorate([s.SeDowngradeService(s.ICatalogService),s.GatewayProxied(),__metadata("design:paramtypes",[s.LogService,s.ISharedDataService,x,s.IUrlService,s.ContentCatalogRestService,s.ProductCatalogRestService,s.IStorageService])],CatalogService);return CatalogService}(s.ICatalogService);var H=function(e){__extends(UrlService,e);UrlService.$inject=["router","location","windowUtils"];function UrlService(t,n,i){var o=e.call(this)||this;o.router=t;o.location=n;o.windowUtils=i;return o}UrlService.prototype.openUrlInPopup=function(e){var t=this.windowUtils.getWindow().open(e,"_blank","toolbar=no, scrollbars=yes, resizable=yes");t.focus()};UrlService.prototype.openUrlInPopup.$inject=["url"];UrlService.prototype.path=function(e){this.location.go(e);this.router.navigateByUrl(e)};UrlService.prototype.path.$inject=["url"];UrlService=__decorate([s.SeDowngradeService(s.IUrlService),s.GatewayProxied("openUrlInPopup","path"),i.Injectable(),__metadata("design:paramtypes",[p.Router,d.Location,s.WindowUtils])],UrlService);return UrlService}(s.IUrlService);var G=function(e){__extends(WaitDialogService,e);WaitDialogService.$inject=["modalService"];function WaitDialogService(t){var n=e.call(this)||this;n.modalService=t;n.modalRef=null;return n}WaitDialogService.prototype.showWaitModal=function(e){var t={component:s.WaitDialogComponent,data:{customLoadingMessageLocalizedKey:e},config:{backdropClickCloseable:false,modalPanelClass:"se-wait-spinner-dialog",focusTrapped:false}};if(this.modalRef===null){this.modalRef=this.modalService.open(t)}};WaitDialogService.prototype.showWaitModal.$inject=["customLoadingMessageLocalizedKey"];WaitDialogService.prototype.hideWaitModal=function(){if(this.modalRef!=null){this.modalRef.close();this.modalRef=null}};WaitDialogService=__decorate([s.SeDowngradeService(s.IWaitDialogService),s.GatewayProxied(),__metadata("design:paramtypes",[s.ModalService])],WaitDialogService);return WaitDialogService}(s.IWaitDialogService);var W=function(){CatalogAwareRouteResolverHelper.$inject=["logService","route","systemEventService","experienceService","sharedDataService","catalogVersionPermissionService"];function CatalogAwareRouteResolverHelper(e,t,n,i,o,r){this.logService=e;this.route=t;this.systemEventService=n;this.experienceService=i;this.sharedDataService=o;this.catalogVersionPermissionService=r}e=CatalogAwareRouteResolverHelper;CatalogAwareRouteResolverHelper.executeAndCheckCatalogPermissions=function(e,t,n,i,o){return o().then((function(){return e.hasReadPermissionOnCurrent().then((function(e){if(!e){t.info("no permission to access the storefront view with this experience");return Promise.reject()}return n.hasCatalogVersionChanged().then((function(e){if(e){i.publishAsync(s.EVENTS.EXPERIENCE_UPDATE)}return true}))}),(function(){t.info("failed to evaluate permissions to access the storefront view with this experience");return Promise.reject()}))}),(function(e){t.error("could not retrieve experience from storage or route params",e);throw new Error(e)}))};CatalogAwareRouteResolverHelper.executeAndCheckCatalogPermissions.$inject=["catalogVersionPermissionService","logService","experienceService","systemEventService","operation"];CatalogAwareRouteResolverHelper.checkExperienceIsSet=function(e,t){return new Promise((function(n,i){e.getCurrentExperience().then((function(e){if(!e){return i()}t.set(s.EXPERIENCE_STORAGE_KEY,e);return n(e)}))}))};CatalogAwareRouteResolverHelper.checkExperienceIsSet.$inject=["experienceService","sharedDataService"];CatalogAwareRouteResolverHelper.buildExperienceFromRoute=function(e,t){return e.buildAndSetExperience(t).then((function(e){if(!e){return Promise.reject()}return e}))};CatalogAwareRouteResolverHelper.buildExperienceFromRoute.$inject=["experienceService","params"];CatalogAwareRouteResolverHelper.prototype.storefrontResolve=function(){var e=this;return this.executeAndCheckCatalogPermissions((function(){return e.checkExperienceIsSet()}))};CatalogAwareRouteResolverHelper.prototype.experienceFromPathResolve=function(e){var t=this;return this.executeAndCheckCatalogPermissions((function(){return t.buildExperienceFromRoute(e)}))};CatalogAwareRouteResolverHelper.prototype.experienceFromPathResolve.$inject=["params"];CatalogAwareRouteResolverHelper.prototype.executeAndCheckCatalogPermissions=function(t){return e.executeAndCheckCatalogPermissions(this.catalogVersionPermissionService,this.logService,this.experienceService,this.systemEventService,t)};CatalogAwareRouteResolverHelper.prototype.executeAndCheckCatalogPermissions.$inject=["operation"];CatalogAwareRouteResolverHelper.prototype.checkExperienceIsSet=function(){return e.checkExperienceIsSet(this.experienceService,this.sharedDataService)};CatalogAwareRouteResolverHelper.prototype.buildExperienceFromRoute=function(t){return e.buildExperienceFromRoute(this.experienceService,t||this.route.snapshot.params)};CatalogAwareRouteResolverHelper.prototype.buildExperienceFromRoute.$inject=["params"];var e;CatalogAwareRouteResolverHelper=e=__decorate([i.Injectable(),__metadata("design:paramtypes",[s.LogService,p.ActivatedRoute,s.SystemEventService,s.IExperienceService,s.ISharedDataService,s.ICatalogVersionPermissionService])],CatalogAwareRouteResolverHelper);return CatalogAwareRouteResolverHelper}();var q=function(){function CatalogAwareRouteResolverFunctions(){}CatalogAwareRouteResolverFunctions.storefrontResolve=["$log","$location","experienceService","sharedDataService","systemEventService","catalogVersionPermissionService",function(e,t,n,i,o,r){"ngInject";return W.executeAndCheckCatalogPermissions(r,e,n,o,(function(){return W.checkExperienceIsSet(n,i)})).catch((function(){t.url(s.LANDING_PAGE_PATH)}))}];CatalogAwareRouteResolverFunctions.experienceFromPathResolve=["$route","$log","$location","experienceService","systemEventService","catalogVersionPermissionService",function(e,t,n,i,o,r){"ngInject";return W.executeAndCheckCatalogPermissions(r,t,i,o,(function(){return W.buildExperienceFromRoute(i,e.current.params)})).catch((function(){n.url(s.LANDING_PAGE_PATH)}))}];return CatalogAwareRouteResolverFunctions}();var K=function(){function CatalogAwareRouteResolverModule(){}CatalogAwareRouteResolverModule=__decorate([s.SeModule({providers:[{provide:"catalogAwareRouteResolverFunctions",useValue:q}]})],CatalogAwareRouteResolverModule);return CatalogAwareRouteResolverModule}();var Y=function(){function MemoryStorage(){this.data={}}MemoryStorage.prototype.clear=function(){this.data={};return Promise.resolve(true)};MemoryStorage.prototype.dispose=function(){return Promise.resolve(true)};MemoryStorage.prototype.find=function(e){return this.get(e).then((function(e){return[e]}))};MemoryStorage.prototype.get=function(e){return Promise.resolve(this.data[this.getKey(e)])};MemoryStorage.prototype.getLength=function(){return Promise.resolve(Object.keys(this.data).length)};MemoryStorage.prototype.put=function(e,t){this.data[this.getKey(t)]=e;return Promise.resolve(true)};MemoryStorage.prototype.remove=function(e){var t=this.data[this.getKey(e)];delete this.data[this.getKey(e)];return Promise.resolve(t)};MemoryStorage.prototype.entries=function(){var e=this;var t=[];Object.keys(this.data).forEach((function(n){t.push([JSON.parse(n),e.data[n]])}));return Promise.resolve(t)};MemoryStorage.prototype.getKey=function(e){return JSON.stringify(e)};return MemoryStorage}();var X=function(){function MemoryStorageController(e){this.storages={};this.storageType=e.getProperty("STORAGE_TYPE_IN_MEMORY")}MemoryStorageController.prototype.getStorage=function(e){var t=this.storages[e.storageId];if(!t){t=new Y}this.storages[e.storageId]=t;return Promise.resolve(t)};MemoryStorageController.prototype.deleteStorage=function(e){delete this.storages[e];return Promise.resolve(true)};MemoryStorageController.prototype.getStorageIds=function(){return Promise.resolve(Object.keys(this.storages))};return MemoryStorageController}();var Z=function(){function WebStorage(e,t){this.controller=e;this.storageConfiguration=t}WebStorage.ERR_INVALID_QUERY_OBJECT=function(e,t){return new Error("WebStorage exception for storage ["+t+"]. Invalid key ["+e+"]")};WebStorage.prototype.clear=function(){this.controller.saveStorageData({});return Promise.resolve(true)};WebStorage.prototype.find=function(e){if(e===undefined){throw WebStorage.ERR_INVALID_QUERY_OBJECT(e,this.storageConfiguration.storageId)}return this.get(e).then((function(e){return[e]}))};WebStorage.prototype.get=function(e){var t=this;return this.controller.getStorageData().then((function(n){var i=t.getKeyFromQueryObj(e);return Promise.resolve(n[i])}))};WebStorage.prototype.put=function(e,t){var n=this;return this.controller.getStorageData().then((function(i){i[n.getKeyFromQueryObj(t)]=e;n.controller.saveStorageData(i);return Promise.resolve(true)}))};WebStorage.prototype.remove=function(e){var t=this;if(e===undefined){throw WebStorage.ERR_INVALID_QUERY_OBJECT(e,this.storageConfiguration.storageId)}var n=this.get(e);return this.controller.getStorageData().then((function(i){delete i[t.getKeyFromQueryObj(e)];t.controller.saveStorageData(i);return n}))};WebStorage.prototype.getLength=function(){return this.controller.getStorageData().then((function(e){return Promise.resolve(Object.keys(e).length)}))};WebStorage.prototype.dispose=function(){return Promise.resolve(true)};WebStorage.prototype.entries=function(){var e=this;var t=[];return new Promise((function(n){e.controller.getStorageData().then((function(e){Object.keys(e).forEach((function(n){t.push([JSON.parse(n),e[n]])}));n(t)}))}))};WebStorage.prototype.getKeyFromQueryObj=function(e){return JSON.stringify(e)};return WebStorage}();var Q=function(){function WebStorageBridge(e,t){this.controller=e;this.configuration=t}WebStorageBridge.prototype.saveStorageData=function(e){return this.controller.saveStorageData(this.configuration.storageId,e)};WebStorageBridge.prototype.getStorageData=function(){return this.controller.getStorageData(this.configuration.storageId)};return WebStorageBridge}();var J=function(){function AbstractWebStorageController(){}AbstractWebStorageController.prototype.getStorage=function(e){var t=this;var n=new Q(this,e);var i=new Z(n,e);var o=i.dispose;i.dispose=function(){return t.deleteStorage(e.storageId).then((function(){return o()}))};return Promise.resolve(i)};AbstractWebStorageController.prototype.deleteStorage=function(e){var t=this.getWebStorageContainer();delete t[e];this.setWebStorageContainer(t);return Promise.resolve(true)};AbstractWebStorageController.prototype.getStorageIds=function(){var e=Object.keys(this.getWebStorageContainer());return Promise.resolve(e)};AbstractWebStorageController.prototype.saveStorageData=function(e,t){var n=this.getWebStorageContainer();n[e]=t;this.setWebStorageContainer(n);return Promise.resolve(true)};AbstractWebStorageController.prototype.getStorageData=function(e){var t=this.getWebStorageContainer();if(t[e]){return Promise.resolve(t[e])}return Promise.resolve({})};AbstractWebStorageController.prototype.setWebStorageContainer=function(e){this.getStorageApi().setItem(this.getStorageRootKey(),JSON.stringify(e))};AbstractWebStorageController.prototype.getWebStorageContainer=function(){var e=this.getStorageApi().getItem(this.getStorageRootKey());if(!e){return{}}return JSON.parse(e)};return AbstractWebStorageController}();var ee=function(e){__extends(LocalStorageController,e);function LocalStorageController(t){var n=e.call(this)||this;n.storagePropertiesService=t;n.storageType=n.storagePropertiesService.getProperty("STORAGE_TYPE_LOCAL_STORAGE");return n}LocalStorageController.prototype.getStorageApi=function(){return window.localStorage};LocalStorageController.prototype.getStorageRootKey=function(){return this.storagePropertiesService.getProperty("LOCAL_STORAGE_ROOT_KEY")};return LocalStorageController}(J);var te=function(e){__extends(SessionStorageController,e);function SessionStorageController(t){var n=e.call(this)||this;n.storagePropertiesService=t;n.storageType=n.storagePropertiesService.getProperty("STORAGE_TYPE_SESSION_STORAGE");return n}SessionStorageController.prototype.getStorageApi=function(){return window.sessionStorage};SessionStorageController.prototype.getStorageRootKey=function(){return this.storagePropertiesService.getProperty("SESSION_STORAGE_ROOT_KEY")};return SessionStorageController}(J);var ne=function(){StorageManagerGateway.$inject=["storageManager"];function StorageManagerGateway(e){this.storageManager=e}StorageManagerGateway.prototype.getStorageSanitityCheck=function(e){return this.storageManager.getStorage(e).then((function(){return true}),(function(){return false}))};StorageManagerGateway.prototype.getStorageSanitityCheck.$inject=["storageConfiguration"];StorageManagerGateway.prototype.deleteExpiredStorages=function(e){return this.storageManager.deleteExpiredStorages(e)};StorageManagerGateway.prototype.deleteExpiredStorages.$inject=["force"];StorageManagerGateway.prototype.deleteStorage=function(e,t){return this.storageManager.deleteStorage(e,t)};StorageManagerGateway.prototype.deleteStorage.$inject=["storageId","force"];StorageManagerGateway.prototype.hasStorage=function(e){return this.storageManager.hasStorage(e)};StorageManagerGateway.prototype.hasStorage.$inject=["storageId"];StorageManagerGateway.prototype.getStorage=function(e){throw new Error("getStorage() is not supported from the StorageManagerGateway, please use the storage manager directly")};StorageManagerGateway.prototype.getStorage.$inject=["storageConfiguration"];StorageManagerGateway.prototype.registerStorageController=function(e){throw new Error("registerStorageController() is not supported from the StorageManagerGateway, please use the storage manager directly")};StorageManagerGateway.prototype.registerStorageController.$inject=["controller"];StorageManagerGateway=__decorate([s.SeDowngradeService(s.IStorageManagerGateway),s.GatewayProxied("getStorageSanitityCheck","deleteExpiredStorages","deleteStorage","hasStorage"),__param(0,i.Inject(s.DO_NOT_USE_STORAGE_MANAGER_TOKEN)),__metadata("design:paramtypes",[s.IStorageManager])],StorageManagerGateway);return StorageManagerGateway}();var ie=function(){StorageGateway.$inject=["storageManager"];function StorageGateway(e){this.storageManager=e}StorageGateway.prototype.handleStorageRequest=function(e,t,n){var i=this;return new Promise((function(o,r){i.storageManager.getStorage(e).then((function(e){return o(e[t].apply(e,n))}),(function(e){return r(e)}))}))};StorageGateway.prototype.handleStorageRequest.$inject=["storageConfiguration","method","args"];StorageGateway=__decorate([s.SeDowngradeService(s.IStorageGateway),s.GatewayProxied(),__param(0,i.Inject(s.DO_NOT_USE_STORAGE_MANAGER_TOKEN)),__metadata("design:paramtypes",[s.IStorageManager])],StorageGateway);return StorageGateway}();var oe=function(){function MetaDataMapStorage(e){this.storageKey=e}MetaDataMapStorage.prototype.getAll=function(){var e=[];var t=this.getDataFromStore();Object.keys(t).forEach((function(n){e.push(t[n])}));return e};MetaDataMapStorage.prototype.get=function(e){return this.getDataFromStore()[e]};MetaDataMapStorage.prototype.put=function(e,t){var n=this.getDataFromStore();n[e]=t;this.setDataInStore(n)};MetaDataMapStorage.prototype.remove=function(e){var t=this.getDataFromStore();delete t[e];this.setDataInStore(t)};MetaDataMapStorage.prototype.removeAll=function(){window.localStorage.removeItem(this.storageKey)};MetaDataMapStorage.prototype.getDataFromStore=function(){try{var e=window.localStorage.getItem(this.storageKey);if(e===null){return{}}return JSON.parse(e)}catch(e){return{}}};MetaDataMapStorage.prototype.setDataInStore=function(e){window.localStorage.setItem(this.storageKey,JSON.stringify(e))};return MetaDataMapStorage}();var re=function(){StorageManager.$inject=["logService","storagePropertiesService"];function StorageManager(e,t){this.logService=e;this.storagePropertiesService=t;this.storageControllers={};this.storages={};this.storageMetaDataMap=new oe(this.storagePropertiesService.getProperty("LOCAL_STORAGE_KEY_STORAGE_MANAGER_METADATA"))}e=StorageManager;StorageManager.ERR_NO_STORAGE_TYPE_CONTROLLER=function(e){return new Error("StorageManager Error: Cannot create storage. No Controller available to handle type ["+e+"]")};StorageManager.ERR_NO_STORAGE_TYPE_CONTROLLER.$inject=["storageType"];StorageManager.prototype.registerStorageController=function(e){this.storageControllers[e.storageType]=e};StorageManager.prototype.registerStorageController.$inject=["controller"];StorageManager.prototype.getStorage=function(e){var t=this;this.setDefaultStorageOptions(e);var n=this.hasStorage(e.storageId);var i=Promise.resolve(true);if(n){var o=this.storageMetaDataMap.get(e.storageId);i=this.verifyMetaData(o,e)}return new Promise((function(n,o){i.then((function(){if(t.storages[e.storageId]){t.updateStorageMetaData(e);n(t.storages[e.storageId])}else{t.getStorageController(e.storageType).getStorage(e).then((function(i){t.applyDisposeDecorator(e.storageId,i);t.updateStorageMetaData(e);t.storages[e.storageId]=i;n(i)}))}})).catch((function(e){return o(e)}))}))};StorageManager.prototype.getStorage.$inject=["storageConfiguration"];StorageManager.prototype.hasStorage=function(e){return!!this.storageMetaDataMap.get(e)};StorageManager.prototype.hasStorage.$inject=["storageId"];StorageManager.prototype.deleteStorage=function(e,t){var n=this;if(t===void 0){t=false}delete this.storages[e];if(!this.hasStorage(e)){return Promise.resolve(true)}var i=this.storageMetaDataMap.get(e);if(i){var o=void 0;try{o=this.getStorageController(i.storageType)}catch(n){if(t){this.storageMetaDataMap.remove(e)}return Promise.resolve(true)}return o.deleteStorage(e).then((function(){n.storageMetaDataMap.remove(e);return Promise.resolve(true)}))}else{return Promise.resolve(true)}};StorageManager.prototype.deleteStorage.$inject=["storageId","force"];StorageManager.prototype.deleteExpiredStorages=function(e){var t=this;if(e===void 0){e=false}var n=[];var i=this.storageMetaDataMap.getAll();i.forEach((function(i){if(t.isStorageExpired(i)){n.push(t.deleteStorage(i.storageId,e))}}));return Promise.all(n).then((function(){return true}),(function(){return false}))};StorageManager.prototype.deleteExpiredStorages.$inject=["force"];StorageManager.prototype.updateStorageMetaData=function(e){this.storageMetaDataMap.put(e.storageId,{storageId:e.storageId,storageType:e.storageType,storageVersion:e.storageVersion,lastAccess:Date.now()})};StorageManager.prototype.updateStorageMetaData.$inject=["storageConfiguration"];StorageManager.prototype.isStorageExpired=function(e){var t=Date.now()-e.lastAccess;var n=e.expiresAfterIdle;if(n===undefined){n=this.storagePropertiesService.getProperty("STORAGE_IDLE_EXPIRY")}return t>=n};StorageManager.prototype.isStorageExpired.$inject=["metaData"];StorageManager.prototype.applyDisposeDecorator=function(e,t){var n=this;var i=t.dispose;t.dispose=function(){return n.deleteStorage(e).then((function(){return i()}))}};StorageManager.prototype.applyDisposeDecorator.$inject=["storageId","storage"];StorageManager.prototype.getStorageController=function(t){var n=this.storageControllers[t];if(!n){throw e.ERR_NO_STORAGE_TYPE_CONTROLLER(t)}return n};StorageManager.prototype.getStorageController.$inject=["storageType"];StorageManager.prototype.verifyMetaData=function(e,t){if(e.storageVersion!==t.storageVersion){this.logService.warn("StorageManager - Removing old storage version for storage "+e.storageId);return this.deleteStorage(e.storageId)}if(e.storageType!==t.storageType){this.logService.warn("StorageManager - Detected a change in storage type for existing storage. Removing old storage with id "+t.storageId);return this.deleteStorage(e.storageId)}return Promise.resolve(true)};StorageManager.prototype.verifyMetaData.$inject=["metadata","configuration"];StorageManager.prototype.setDefaultStorageOptions=function(e){if(!e.storageVersion||e.storageVersion.length<=0){e.storageVersion="0"}};StorageManager.prototype.setDefaultStorageOptions.$inject=["options"];var e;StorageManager=e=__decorate([i.Injectable(),__metadata("design:paramtypes",[s.LogService,s.IStoragePropertiesService])],StorageManager);return StorageManager}();var ae={STORAGE_IDLE_EXPIRY:1e3*60*60*24*30,STORAGE_TYPE_LOCAL_STORAGE:"se.storage.type.localstorage",STORAGE_TYPE_SESSION_STORAGE:"se.storage.type.sessionstorage",STORAGE_TYPE_IN_MEMORY:"se.storage.type.inmemory",LOCAL_STORAGE_KEY_STORAGE_MANAGER_METADATA:"se.storage.storagemanager.metadata",LOCAL_STORAGE_ROOT_KEY:"se.storage.root",SESSION_STORAGE_ROOT_KEY:"se.storage.root"};var se=function(){StoragePropertiesService.$inject=["storageProperties"];function StoragePropertiesService(e){var t=this;this.properties=a.cloneDeep(ae);e.forEach((function(e){a.merge(t.properties,e)}))}StoragePropertiesService.prototype.getProperty=function(e){return this.properties[e]};StoragePropertiesService.prototype.getProperty.$inject=["propertyName"];StoragePropertiesService=__decorate([s.SeDowngradeService(s.IStoragePropertiesService),__param(0,i.Inject(s.STORAGE_PROPERTIES_TOKEN)),__metadata("design:paramtypes",[Array])],StoragePropertiesService);return StoragePropertiesService}();var ce=function(){function StorageModule(){}e=StorageModule;StorageModule.forRoot=function(t){if(t===void 0){t={}}return{ngModule:e,providers:[{provide:s.STORAGE_PROPERTIES_TOKEN,multi:true,useValue:t}]}};var e;StorageModule=e=__decorate([i.NgModule({providers:[{provide:s.IStoragePropertiesService,useClass:se},{provide:s.DO_NOT_USE_STORAGE_MANAGER_TOKEN,useClass:re},{provide:s.IStorageGateway,useClass:ie},{provide:s.IStorageManagerGateway,useClass:ne},{provide:s.IStorageManagerFactory,useFactory:function(e,t){return new s.StorageManagerFactory(t)},deps:[s.LogService,s.DO_NOT_USE_STORAGE_MANAGER_TOKEN]},{provide:s.IStorageManager,useFactory:function(e){return e.getStorageManager("se.nsp")},deps:[s.IStorageManagerFactory]},s.moduleUtils.initialize((function(e,t){t.registerStorageController(new ee(e));t.registerStorageController(new te(e));t.registerStorageController(new X(e));s.diBridgeUtils.downgradeService("storageManagerFactory",s.IStorageManagerFactory);s.diBridgeUtils.downgradeService("seStorageManager",s.IStorageManager)}),[s.IStoragePropertiesService,s.IStorageManager])]})],StorageModule);return StorageModule}();var le="se.permission.service.default.rule";var de=function(e){__extends(PermissionService,e);PermissionService.$inject=["logService","systemEventService","crossFrameEventService"];function PermissionService(t,n,i){var o=e.call(this)||this;o.logService=t;o.systemEventService=n;o.crossFrameEventService=i;o._registerEventHandlers();return o}t=PermissionService;PermissionService.resetForTests=function(){t.rules=[];t.permissionsRegistry=[];t.cachedResults={}};PermissionService.hasCacheRegion=function(e){return t.cachedResults.hasOwnProperty(e)};PermissionService.hasCacheRegion.$inject=["ruleName"];PermissionService.getCacheRegion=function(e){return t.cachedResults[e]};PermissionService.getCacheRegion.$inject=["ruleName"];PermissionService.prototype.getPermission=function(e){return t.permissionsRegistry.find((function(t){return t.aliases.indexOf(e)>-1}))};PermissionService.prototype.getPermission.$inject=["permissionName"];PermissionService.prototype.unregisterDefaultRule=function(){var e=this._getRule(le);if(e){t.rules.splice(t.rules.indexOf(e),1)}};PermissionService.prototype.registerPermission=function(e){this._validatePermission(e);t.permissionsRegistry.push({aliases:e.aliases,rules:e.rules})};PermissionService.prototype.registerPermission.$inject=["permission"];PermissionService.prototype.hasCachedResult=function(e,n){return t.hasCacheRegion(e)&&t.getCacheRegion(e).hasOwnProperty(n)};PermissionService.prototype.hasCachedResult.$inject=["ruleName","key"];PermissionService.prototype.clearCache=function(){t.cachedResults={};this.crossFrameEventService.publish(s.EVENTS.PERMISSION_CACHE_CLEANED)};PermissionService.prototype.isPermitted=function(e){var t=this;var n=this._mapRuleNameToPermissionNames(e);var i=this._getRulePromises(n);var o=Object.keys(i);var r=o.map((function(e){return i[e]}));var onSuccess=function(e){var i=o.reduce((function(t,n,i){t[n]=e[i];return t}),{});t._updateCache(n,i);return true};var onError=function(e){if(e===false){return e}t.logService.error(e);return e===undefined?false:e};return Promise.all(r).then(onSuccess,onError)};PermissionService.prototype.isPermitted.$inject=["permissions"];PermissionService.prototype._addRulePromise=function(e,t,n){var i=this._getRule(n);var o=t[n];var r=this._generateCacheKey(o);var a;if(this.hasCachedResult(n,r)){a=Promise.resolve(this._getCachedResult(n,r))}else{a=this._callRuleVerify(i.names.join("-"),o).then((function(e){return e?Promise.resolve(true):Promise.reject(false)}))}e[n]=a};PermissionService.prototype._addRulePromise.$inject=["rulePromises","rulePermissionNames","ruleName"];PermissionService.prototype._isPermissionNameValid=function(e){var t=/^[A-Za-z0-9_\-]+\.[A-Za-z0-9_\-\.]+/;return t.test(e)};PermissionService.prototype._isPermissionNameValid.$inject=["permissionName"];PermissionService.prototype._getRulePromises=function(e){var t=this;var n={};Object.keys(e).forEach((function(i){t._addRulePromise.call(t,n,e,i)}));return n};PermissionService.prototype._getRulePromises.$inject=["rulePermissionNames"];PermissionService.prototype._hasDefaultRule=function(){return!!this._getRule(le)};PermissionService.prototype._getCachedResult=function(e,n){return t.hasCacheRegion(e)?t.getCacheRegion(e)[n]:null};PermissionService.prototype._getCachedResult.$inject=["ruleName","key"];PermissionService.prototype._generateCacheKey=function(e){return JSON.stringify(e.sort((function(e,t){var n=e.name;var i=t.name;return n===i?0:n<i?-1:1})))};PermissionService.prototype._generateCacheKey.$inject=["permissions"];PermissionService.prototype._removeDuplicatePermissionNames=function(e){Object.keys(e).forEach((function(t){e[t]=e[t].filter((function(n){var i=e[t].find((function(e){return e.name===n.name}));if(i===n){return true}else{var o=i.context;var r=n.context;return JSON.stringify(o)!==JSON.stringify(r)}}))}))};PermissionService.prototype._removeDuplicatePermissionNames.$inject=["rulePermissionNames"];PermissionService.prototype._mapRuleNameToPermissionNames=function(e){var t=this;var n={};e.forEach((function(e){if(!e.names){throw Error("Requested Permission requires at least one name")}var i=e.names;var o=e.context;i.forEach((function(e){t._populateRulePermissionNames(n,e,o)}))}));this._removeDuplicatePermissionNames(n);return n};PermissionService.prototype._mapRuleNameToPermissionNames.$inject=["permissions"];PermissionService.prototype._populateRulePermissionNames=function(e,t,n){var i=this;var o=this.getPermission(t);var r=!!o&&!!o.rules&&o.rules.length>0;if(r){o.rules.forEach((function(o){i._addPermissionName(e,o,t,n)}))}else if(this._hasDefaultRule()){this._addPermissionName(e,le,t,n)}else{throw Error("Permission has no rules")}};PermissionService.prototype._populateRulePermissionNames.$inject=["rulePermissionNames","permissionName","permissionContext"];PermissionService.prototype._addPermissionName=function(e,t,n,i){var o=this._getRule(t);if(!o){throw Error("Permission found but no rule found named: "+t)}t=o.names[0];if(!e.hasOwnProperty(t)){e[t]=[]}e[t].push({name:n,context:i})};PermissionService.prototype._addPermissionName.$inject=["rulePermissionNames","ruleName","permissionName","permissionContext"];PermissionService.prototype._getRule=function(e){return t.rules.find((function(t){return t.names.indexOf(e)>-1}))};PermissionService.prototype._getRule.$inject=["ruleName"];PermissionService.prototype._validationRule=function(e){var t=this;e.names.forEach((function(e){if(t._getRule(e)){throw Error("Rule already exists: "+e)}}))};PermissionService.prototype._validationRule.$inject=["ruleConfiguration"];PermissionService.prototype._validatePermission=function(e){var t=this;if(!(e.aliases instanceof Array)){throw Error("Permission aliases must be an array")}if(e.aliases.length<1){throw Error("Permission requires at least one alias")}if(!(e.rules instanceof Array)){throw Error("Permission rules must be an array")}if(e.rules.length<1){throw Error("Permission requires at least one rule")}e.aliases.forEach((function(e){if(t.getPermission(e)){throw Error("Permission already exists: "+e)}if(!t._isPermissionNameValid(e)){throw Error("Permission aliases must be prefixed with namespace and a full stop")}}));e.rules.forEach((function(e){if(!t._getRule(e)){throw Error("Permission found but no rule found named: "+e)}}))};PermissionService.prototype._validatePermission.$inject=["permissionConfiguration"];PermissionService.prototype._updateCache=function(e,t){var n=this;Object.keys(t).forEach((function(i){var o=n._generateCacheKey(e[i]);var r=t[i];n._addCachedResult(i,o,r)}))};PermissionService.prototype._updateCache.$inject=["rulePermissionNames","permissionResults"];PermissionService.prototype._addCachedResult=function(e,n,i){if(!t.hasCacheRegion(e)){t.cachedResults[e]={}}t.cachedResults[e][n]=i};PermissionService.prototype._addCachedResult.$inject=["ruleName","key","result"];PermissionService.prototype._registerRule=function(e){this._validationRule(e);if(e.names&&e.names.length&&e.names.indexOf(le)>-1){throw Error("Register default rule using permissionService.registerDefaultRule()")}t.rules.push({names:e.names})};PermissionService.prototype._registerRule.$inject=["ruleConfiguration"];PermissionService.prototype._registerDefaultRule=function(e){this._validationRule(e);if(e.names&&e.names.length&&e.names.indexOf(le)===-1){throw Error("Default rule name must be DEFAULT_RULE_NAME")}t.rules.push({names:e.names})};PermissionService.prototype._registerDefaultRule.$inject=["ruleConfiguration"];PermissionService.prototype._callRuleVerify=function(e,t){if(this.ruleVerifyFunctions&&this.ruleVerifyFunctions[e]){return this.ruleVerifyFunctions[e].verify(t)}return this._remoteCallRuleVerify(e,t)};PermissionService.prototype._callRuleVerify.$inject=["ruleKey","permissionNameObjs"];PermissionService.prototype._registerEventHandlers=function(){this.crossFrameEventService.subscribe(s.EVENTS.USER_HAS_CHANGED,this.clearCache.bind(this));this.systemEventService.subscribe(s.EVENTS.EXPERIENCE_UPDATE,this.clearCache.bind(this));this.crossFrameEventService.subscribe(s.EVENTS.PAGE_CHANGE,this.clearCache.bind(this));this.crossFrameEventService.subscribe(s.EVENT_PERSPECTIVE_CHANGED,this.clearCache.bind(this))};PermissionService.prototype._remoteCallRuleVerify=function(e,t){"proxyFunction";return null};PermissionService.prototype._remoteCallRuleVerify.$inject=["name","permissionNameObjs"];var t;PermissionService.rules=[];PermissionService.permissionsRegistry=[];PermissionService.cachedResults={};PermissionService=t=__decorate([s.SeDowngradeService(s.IPermissionService),s.GatewayProxied("isPermitted","clearCache","registerPermission","unregisterDefaultRule","registerDefaultRule","registerRule","_registerRule","_remoteCallRuleVerify","_registerDefaultRule"),__metadata("design:paramtypes",[s.LogService,s.SystemEventService,s.CrossFrameEventService])],PermissionService);return PermissionService}(s.IPermissionService);var pe=function(){CatalogVersionPermissionRestService.$inject=["restServiceFactory","sessionService"];function CatalogVersionPermissionRestService(e,t){this.restServiceFactory=e;this.sessionService=t;this.URI="/permissionswebservices/v1/permissions/catalogs/search"}CatalogVersionPermissionRestService.prototype.getCatalogVersionPermissions=function(e,t){var n=this;this.validateParams(e,t);return this.sessionService.getCurrentUsername().then((function(i){var o=n.restServiceFactory.get(n.URI);return o.queryByPost({principalUid:i},{catalogId:e,catalogVersion:t}).then((function(e){var t=e.permissionsList;return t[0]||{}}))}))};CatalogVersionPermissionRestService.prototype.getCatalogVersionPermissions.$inject=["catalogId","catalogVersion"];CatalogVersionPermissionRestService.prototype.validateParams=function(e,t){if(!e){throw new Error("catalog.version.permission.service.catalogid.is.required")}if(!t){throw new Error("catalog.version.permission.service.catalogversion.is.required")}};CatalogVersionPermissionRestService.prototype.validateParams.$inject=["catalogId","catalogVersion"];__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.userEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String,String]),__metadata("design:returntype",Promise)],CatalogVersionPermissionRestService.prototype,"getCatalogVersionPermissions",null);CatalogVersionPermissionRestService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.RestServiceFactory,s.ISessionService])],CatalogVersionPermissionRestService);return CatalogVersionPermissionRestService}();window.__smartedit__.addDecoratorPayload("Component","HeartBeatAlertComponent",{selector:"se-heartbeat-alert",template:"<div><span>{{ 'se.heartbeat.failure1' | translate }}</span> <span><a (click)=\"switchToPreviewMode()\">{{ 'se.heartbeat.failure2' | translate }}</a></span></div>"});var ue=function(){function HeartBeatAlertComponent(e,t,n){this.alertRef=e;this.perspectiveService=t;this.crossFrameEventService=n}HeartBeatAlertComponent.prototype.switchToPreviewMode=function(){this.alertRef.dismiss();this.perspectiveService.switchTo(s.NONE_PERSPECTIVE);this.crossFrameEventService.publish(s.EVENT_STRICT_PREVIEW_MODE_REQUESTED,true)};HeartBeatAlertComponent=__decorate([i.Component({selector:"se-heartbeat-alert",template:"<div><span>{{ 'se.heartbeat.failure1' | translate }}</span> <span><a (click)=\"switchToPreviewMode()\">{{ 'se.heartbeat.failure2' | translate }}</a></span></div>"}),__param(2,i.Inject(s.EVENT_SERVICE)),__metadata("design:paramtypes",[m.AlertRef,s.IPerspectiveService,s.CrossFrameEventService])],HeartBeatAlertComponent);return HeartBeatAlertComponent}();window.__smartedit__.addDecoratorPayload("Component","AlertTemplateComponent",{selector:"fundamental-alert-template",template:'\n        <div\n            *ngIf="data.templateUrl"\n            [ngInclude]="data.templateUrl"\n            [compileHtmlNgController]="data.controller"\n            [scope]="data"\n        ></div>\n        <div\n            *ngIf="data.template"\n            [seCompileHtml]="data.template"\n            [compileHtmlNgController]="data.controller"\n            [scope]="data"\n        ></div>\n    '});var me=function(){function AlertTemplateComponent(e){this.data=e.data}AlertTemplateComponent=__decorate([i.Component({selector:"fundamental-alert-template",template:'\n        <div\n            *ngIf="data.templateUrl"\n            [ngInclude]="data.templateUrl"\n            [compileHtmlNgController]="data.controller"\n            [scope]="data"\n        ></div>\n        <div\n            *ngIf="data.template"\n            [seCompileHtml]="data.template"\n            [compileHtmlNgController]="data.controller"\n            [scope]="data"\n        ></div>\n    '}),__metadata("design:paramtypes",[m.AlertRef])],AlertTemplateComponent);return AlertTemplateComponent}();var ge=function(e){__extends(AlertFactory,e);AlertFactory.$inject=["logService","domSanitizer","fundamentalAlertService","translateService","ALERT_CONFIG_DEFAULTS"];function AlertFactory(t,n,i,o,r){var a=e.call(this,i,o,r)||this;a.logService=t;a.domSanitizer=n;return a}AlertFactory.prototype.createAlert=function(t){t=this.getAlertConfigFromStringOrConfig(t);return e.prototype.createAlert.call(this,t)};AlertFactory.prototype.createAlert.$inject=["alertConf"];AlertFactory.prototype.createInfo=function(t){t=this.getAlertConfigFromStringOrConfig(t);t.type=s.IAlertServiceType.INFO;return e.prototype.createInfo.call(this,t)};AlertFactory.prototype.createInfo.$inject=["alertConf"];AlertFactory.prototype.createDanger=function(t){t=this.getAlertConfigFromStringOrConfig(t);t.type=s.IAlertServiceType.DANGER;return e.prototype.createDanger.call(this,t)};AlertFactory.prototype.createDanger.$inject=["alertConf"];AlertFactory.prototype.createWarning=function(t){t=this.getAlertConfigFromStringOrConfig(t);t.type=s.IAlertServiceType.WARNING;return e.prototype.createWarning.call(this,t)};AlertFactory.prototype.createWarning.$inject=["alertConf"];AlertFactory.prototype.createSuccess=function(t){t=this.getAlertConfigFromStringOrConfig(t);t.type=s.IAlertServiceType.SUCCESS;return e.prototype.createSuccess.call(this,t)};AlertFactory.prototype.createSuccess.$inject=["alertConf"];AlertFactory.prototype.getAlertConfigFromStringOrConfig=function(e){if(typeof e==="string"){return{message:e}}var t=e;if(this.isFundamentalAlertConfig(t)){return __assign({},t)}return this.validateAndGetAlertConfigFromLegacyConfig(t)};AlertFactory.prototype.getAlertConfigFromStringOrConfig.$inject=["strOrConf"];AlertFactory.prototype.isFundamentalAlertConfig=function(e){var t={template:undefined,templateUrl:undefined,closeable:undefined,timeout:undefined,successful:undefined};var n=Object.keys(e).some((function(e){return t.hasOwnProperty(e)}));return!n};AlertFactory.prototype.isFundamentalAlertConfig.$inject=["config"];AlertFactory.prototype.validateAndGetAlertConfigFromLegacyConfig=function(e){this.validateLegacyAlertConfig(e);this.sanitizeTemplates(e);return this.getAlertConfigFromLegacyConfig(e)};AlertFactory.prototype.validateAndGetAlertConfigFromLegacyConfig.$inject=["alertConf"];AlertFactory.prototype.getAlertConfigFromLegacyConfig=function(e){var t={message:e.message,messagePlaceholders:e.messagePlaceholders,dismissible:e.closeable,type:e.type,id:e.id,duration:e.timeout};if(e.template||e.templateUrl){t.component=me;t.data={template:e.template,templateUrl:e.templateUrl};if(e.controller){t.data.controller={alias:"$alertInjectedCtrl",value:e.controller}}}return t};AlertFactory.prototype.getAlertConfigFromLegacyConfig.$inject=["alertConf"];AlertFactory.prototype.validateLegacyAlertConfig=function(e){this.fixLegacyAlert(e);if(!e.message&&!e.template&&!e.templateUrl){this.logService.warn("alertService._validateAlertConfig - alert must contain at least a message, template, or templateUrl property",e)}if(e.messagePlaceholders&&!a.isObject(e.messagePlaceholders)){throw new Error("alertService._validateAlertConfig - property messagePlaceholders should be an object")}if(e.message&&(e.template||e.templateUrl)||e.template&&(e.message||e.templateUrl)||e.templateUrl&&(e.message||e.template)){throw new Error("alertService._validateAlertConfig - only one template type is allowed for the alert: message, template, or templateUrl")}};AlertFactory.prototype.validateLegacyAlertConfig.$inject=["alertConf"];AlertFactory.prototype.sanitizeTemplates=function(e){if(e.message){e.message=this.domSanitizer.sanitize(i.SecurityContext.HTML,e.message)}};AlertFactory.prototype.sanitizeTemplates.$inject=["alertConf"];AlertFactory.prototype.fixLegacyAlert=function(e){if(e.successful){if(e.type){this.logService.warn("alertService validation warning: alert contains both legacy successful "+"property and an alert type for alert: ",e)}else{if(typeof e.successful!=="boolean"){this.logService.warn("alertService validation warning: legacyAlertConf.successful not a boolean value for alert: ",e)}e.type=e.successful?s.IAlertServiceType.SUCCESS:s.IAlertServiceType.DANGER}delete e.successful}};AlertFactory.prototype.fixLegacyAlert.$inject=["legacyAlertConf"];AlertFactory=__decorate([s.SeDowngradeService(),i.Injectable(),__param(2,i.Inject(s.ALERT_SERVICE_TOKEN)),__param(4,i.Inject(s.ALERT_CONFIG_DEFAULTS_TOKEN)),__metadata("design:paramtypes",[s.LogService,g.DomSanitizer,m.AlertService,u.TranslateService,m.AlertConfig])],AlertFactory);return AlertFactory}(s.BaseAlertFactory);var he=function(e){__extends(AlertService,e);AlertService.$inject=["_alertFactory"];function AlertService(t){var n=e.call(this,t)||this;n._alertFactory=t;return n}AlertService.prototype.showAlert=function(t){t=this._alertFactory.getAlertConfigFromStringOrConfig(t);e.prototype.showAlert.call(this,t)};AlertService.prototype.showAlert.$inject=["alertConf"];AlertService.prototype.showInfo=function(t){t=this._alertFactory.getAlertConfigFromStringOrConfig(t);e.prototype.showInfo.call(this,t)};AlertService.prototype.showInfo.$inject=["alertConf"];AlertService.prototype.showDanger=function(t){t=this._alertFactory.getAlertConfigFromStringOrConfig(t);e.prototype.showDanger.call(this,t)};AlertService.prototype.showDanger.$inject=["alertConf"];AlertService.prototype.showWarning=function(t){t=this._alertFactory.getAlertConfigFromStringOrConfig(t);e.prototype.showWarning.call(this,t)};AlertService.prototype.showWarning.$inject=["alertConf"];AlertService.prototype.showSuccess=function(t){t=this._alertFactory.getAlertConfigFromStringOrConfig(t);e.prototype.showSuccess.call(this,t)};AlertService.prototype.showSuccess.$inject=["alertConf"];AlertService=__decorate([s.SeDowngradeService(s.IAlertService),s.GatewayProxied(),i.Injectable(),__metadata("design:paramtypes",[ge])],AlertService);return AlertService}(s.BaseAlertService);var ve=function(){function AlertServiceModule(){}AlertServiceModule=__decorate([i.NgModule({imports:[m.AlertModule,d.CommonModule,s.CompileHtmlModule,s.SharedComponentsModule,s.AlertServiceProvidersModule.forRoot(s.IAlertService,he),m.ModalModule],declarations:[me],entryComponents:[me],providers:[ge,{provide:s.ALERT_SERVICE_TOKEN,useClass:m.AlertService},{provide:s.ALERT_CONFIG_DEFAULTS_TOKEN,useValue:s.ALERT_CONFIG_DEFAULTS}]})],AlertServiceModule);return AlertServiceModule}();var fe=function(){HeartBeatService.$inject=["HEART_BEAT_TIMEOUT_THRESHOLD_MS","translate","routingService","windowUtils","alertFactory","crossFrameEventService","gatewayFactory","sharedDataService"];function HeartBeatService(t,n,i,o,r,a,c,l){var d=this;this.HEART_BEAT_TIMEOUT_THRESHOLD_MS=t;this.routingService=i;this.windowUtils=o;this.crossFrameEventService=a;this.sharedDataService=l;this.reconnectingInProgress=false;this.resetAndStop=function(){d.reconnectingInProgress=false;if(d.cancellableTimeoutTimer){clearTimeout(d.cancellableTimeoutTimer);d.cancellableTimeoutTimer=null}d.reconnectingAlert.hide();d.reconnectedAlert.hide()};this.connectionLost=function(){d.resetAndStop();if(!!d.windowUtils.getGatewayTargetFrame()){d.reconnectingAlert.show()}d.reconnectingInProgress=true};this.reconnectingAlert=r.createInfo({component:ue,duration:-1,dismissible:false});this.reconnectedAlert=r.createInfo({message:n.instant("se.heartbeat.reconnection"),timeout:3e3});var p=c.createGateway(e.HEART_BEAT_GATEWAY_ID);p.subscribe(e.HEART_BEAT_MSG_ID,(function(){return d.heartBeatReceived()}));this.crossFrameEventService.subscribe(s.EVENTS.PAGE_CHANGE,(function(){d.resetAndStop();return d.heartBeatReceived()}));this.routingService.routeChangeSuccess().subscribe((function(e){var t=d.routingService.getCurrentUrlFromEvent(e);if(t==="/"+s.NG_ROUTE_PREFIX+s.STORE_FRONT_CONTEXT){return d.heartBeatReceived()}return Promise.resolve()}));this.routingService.routeChangeStart().subscribe((function(){d.resetAndStop()}))}e=HeartBeatService;HeartBeatService.prototype.heartBeatReceived=function(){var e=this;var t=this.reconnectingInProgress;this.resetAndStop();if(t){if(!!this.windowUtils.getGatewayTargetFrame()){this.reconnectedAlert.show()}this.reconnectingInProgress=false;this.crossFrameEventService.publish(s.EVENT_STRICT_PREVIEW_MODE_REQUESTED,false)}return this.sharedDataService.get("configuration").then((function(t){var n=t.heartBeatTimeoutThreshold;if(!n){n=e.HEART_BEAT_TIMEOUT_THRESHOLD_MS}e.cancellableTimeoutTimer=e.windowUtils.runTimeoutOutsideAngular(e.connectionLost,+n)}))};var e;HeartBeatService.HEART_BEAT_GATEWAY_ID="heartBeatGateway";HeartBeatService.HEART_BEAT_MSG_ID="heartBeat";HeartBeatService=e=__decorate([s.SeDowngradeService(),__param(0,i.Inject(s.HEART_BEAT_TIMEOUT_THRESHOLD_MS_TOKEN)),__metadata("design:paramtypes",[Number,u.TranslateService,s.SmarteditRoutingService,s.WindowUtils,ge,s.CrossFrameEventService,s.GatewayFactory,s.ISharedDataService])],HeartBeatService);return HeartBeatService}();var _e=function(){ConfigurationService.$inject=["logService","loadConfigManagerService","restServiceFactory"];function ConfigurationService(e,t,n){this.logService=e;this.loadConfigManagerService=t;this.restServiceFactory=n;this.ABSOLUTE_URI_NOT_APPROVED="URI_EXCEPTION";this.ABSOLUTE_URI_REGEX=/(\"[A-Za-z]+:\/|\/\/)/;this.configuration=[];this.editorCRUDService=this.restServiceFactory.get(s.CONFIGURATION_URI,"key")}ConfigurationService.prototype.addEntry=function(){var e={key:"",value:"",isNew:true,uuid:a.uniqueId()};this.configuration=__spreadArrays([e],this.configuration||[])};ConfigurationService.prototype.removeEntry=function(e,t){if(e.isNew){this.configuration=this.configuration.filter((function(t){return!t.isNew||t.key!==e.key}))}else{t.form.markAsDirty();e.toDelete=true}};ConfigurationService.prototype.removeEntry.$inject=["entry","configurationForm"];ConfigurationService.prototype.filterConfiguration=function(){return(this.configuration||[]).filter((function(e){return!e.toDelete}))};ConfigurationService.prototype.validateUserInput=function(e){if(!e.value){return}e.requiresUserCheck=!!e.value.match(this.ABSOLUTE_URI_REGEX)};ConfigurationService.prototype.validateUserInput.$inject=["entry"];ConfigurationService.prototype.submit=function(e){var t=this;if(!e.dirty||!this.isValid(e)){return Promise.reject([])}e.form.markAsPristine();return Promise.all(this.configuration.map((function(e,n){try{var i=s.objectUtils.copy(e);delete i.toDelete;delete i.errors;delete i.uuid;var o=e.toDelete===true?"remove":i.isNew===true?"save":"update";i.secured=false;delete i.isNew;switch(o){case"save":i.value=t.validate(i);break;case"update":i.value=t.validate(i);break;case"remove":break}e.hasErrors=false;return t.editorCRUDService[o](i).then(function(e,t,n){switch(n){case"save":delete e.isNew;break;case"remove":this.configuration.splice(t,1);break}}.bind(t,e,n,o),(function(){t.addValueError(e,"configurationform.save.error");return Promise.reject({})}))}catch(n){e.hasErrors=true;if(n instanceof s.Errors.ParseError){t.addValueError(e,"se.configurationform.json.parse.error");return Promise.reject({})}}})))};ConfigurationService.prototype.submit.$inject=["configurationForm"];ConfigurationService.prototype.init=function(e){this.loadCallback=e||a.noop;return this.loadAndPresent()};ConfigurationService.prototype.init.$inject=["_loadCallback"];ConfigurationService.prototype.reset=function(e){this.configuration=s.objectUtils.copy(this.pristine);if(e){e.form.markAsPristine()}if(this.loadCallback){this.loadCallback()}};ConfigurationService.prototype.reset.$inject=["configurationForm"];ConfigurationService.prototype.addError=function(e,t,n){e.errors=e.errors||{};e.errors[t]=e.errors[t]||[];e.errors[t].push({message:n})};ConfigurationService.prototype.addError.$inject=["entry","type","message"];ConfigurationService.prototype.addKeyError=function(e,t){this.addError(e,"keys",t)};ConfigurationService.prototype.addKeyError.$inject=["entry","message"];ConfigurationService.prototype.addValueError=function(e,t){this.addError(e,"values",t)};ConfigurationService.prototype.addValueError.$inject=["entry","message"];ConfigurationService.prototype.prettify=function(e){var t=this;var n=s.objectUtils.copy(e);n.forEach((function(e){try{e.value=JSON.stringify(JSON.parse(e.value),null,2)}catch(n){t.addValueError(e,"se.configurationform.json.parse.error")}}));return n};ConfigurationService.prototype.prettify.$inject=["array"];ConfigurationService.prototype.loadAndPresent=function(){var e=this;return new Promise((function(t,n){return e.loadConfigManagerService.loadAsArray().then((function(n){e.pristine=e.prettify(n.map((function(e){return __assign(__assign({},e),{uuid:a.uniqueId()})})));e.reset();t()}),(function(){e.logService.log("load failed");n()}))}))};ConfigurationService.prototype.isValid=function(e){var t=this;this.configuration.forEach((function(e){delete e.errors}));if(e.invalid){this.configuration.forEach((function(e){if(s.stringUtils.isBlank(e.key)){t.addKeyError(e,"se.configurationform.required.entry.error");e.hasErrors=true}if(s.stringUtils.isBlank(e.value)){t.addValueError(e,"se.configurationform.required.entry.error");e.hasErrors=true}}))}return e.valid&&!this.configuration.reduce((function(e,n){if(e.keys.indexOf(n.key)>-1){t.addKeyError(n,"se.configurationform.duplicate.entry.error");e.errors=true}else{e.keys.push(n.key)}return e}),{keys:[],errors:false}).errors};ConfigurationService.prototype.isValid.$inject=["configurationForm"];ConfigurationService.prototype.validate=function(e){try{if(e.requiresUserCheck&&!e.isCheckedByUser){throw new Error(this.ABSOLUTE_URI_NOT_APPROVED)}return JSON.stringify(JSON.parse(e.value))}catch(t){throw new s.Errors.ParseError(e.value)}};ConfigurationService.prototype.validate.$inject=["entry"];ConfigurationService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.LogService,I,s.RestServiceFactory])],ConfigurationService);return ConfigurationService}();var ye=function(e){__extends(IframeClickDetectionService,e);function IframeClickDetectionService(){var t=e.call(this)||this;t.callbacks={};return t}IframeClickDetectionService.prototype.registerCallback=function(e,t){this.callbacks[e]=t;return this.removeCallback.bind(this,e)};IframeClickDetectionService.prototype.registerCallback.$inject=["id","callback"];IframeClickDetectionService.prototype.removeCallback=function(e){if(this.callbacks[e]){delete this.callbacks[e];return true}return false};IframeClickDetectionService.prototype.removeCallback.$inject=["id"];IframeClickDetectionService.prototype.onIframeClick=function(){for(var e in this.callbacks){if(this.callbacks.hasOwnProperty(e)){this.callbacks[e]()}}};IframeClickDetectionService=__decorate([s.SeDowngradeService(s.IIframeClickDetectionService),s.GatewayProxied("onIframeClick"),i.Injectable(),__metadata("design:paramtypes",[])],IframeClickDetectionService);return IframeClickDetectionService}(s.IIframeClickDetectionService);var Ce=function(e){__extends(RenderService,e);RenderService.$inject=["yjQuery","crossFrameEventService","systemEventService","notificationService","pageInfoService","perspectiveService","windowUtils","modalService"];function RenderService(t,n,i,o,r,a,s,c){var l=e.call(this,t,i,o,r,a,n,s,c)||this;l.yjQuery=t;l.crossFrameEventService=n;l.systemEventService=i;return l}RenderService.prototype.blockRendering=function(e){this.renderingBlocked=e};RenderService.prototype.blockRendering.$inject=["block"];RenderService.prototype.isRenderingBlocked=function(){return Promise.resolve(this.renderingBlocked||false)};RenderService=__decorate([s.GatewayProxied("blockRendering","isRenderingBlocked","renderSlots","renderComponent","renderRemoval","toggleOverlay","refreshOverlayDimensions","renderPage"),s.SeDowngradeService(s.IRenderService),__param(0,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[Function,s.CrossFrameEventService,s.SystemEventService,s.INotificationService,s.IPageInfoService,s.IPerspectiveService,s.WindowUtils,s.ModalService])],RenderService);return RenderService}(s.IRenderService);window.__smartedit__.addDecoratorPayload("Injectable","TranslationsFetchService",{providedIn:"root"});var Se=function(e){__extends(TranslationsFetchService,e);TranslationsFetchService.$inject=["httpClient","promiseUtils"];function TranslationsFetchService(t,n){var i=e.call(this)||this;i.httpClient=t;i.promiseUtils=n;i.ready=false;return i}TranslationsFetchService.prototype.get=function(e){var t=this;return this.httpClient.get(""+s.RestServiceFactory.getGlobalBasePath()+s.I18N_RESOURCE_URI+"/"+e,{responseType:"json"}).pipe(l.map((function(e){return e.value?e.value:e}))).toPromise().then((function(e){t.ready=true;return e}))};TranslationsFetchService.prototype.get.$inject=["lang"];TranslationsFetchService.prototype.isReady=function(){return Promise.resolve(this.ready)};TranslationsFetchService.prototype.waitToBeReady=function(){var e=this;return this.promiseUtils.resolveToCallbackWhenCondition((function(){return e.ready}),(function(){}))};__decorate([s.Cached({actions:[s.rarelyChangingContent]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],TranslationsFetchService.prototype,"get",null);TranslationsFetchService=__decorate([s.SeDowngradeService(s.ITranslationsFetchService),s.GatewayProxied(),i.Injectable({providedIn:"root"}),__metadata("design:paramtypes",[o.HttpClient,s.PromiseUtils])],TranslationsFetchService);return TranslationsFetchService}(s.ITranslationsFetchService);var be;(function(e){e["READ"]="read";e["WRITE"]="write"})(be||(be={}));var Ie=function(e){__extends(CatalogVersionPermissionService,e);CatalogVersionPermissionService.$inject=["catalogVersionPermissionRestService","catalogService"];function CatalogVersionPermissionService(t,n){var i=e.call(this)||this;i.catalogVersionPermissionRestService=t;i.catalogService=n;return i}CatalogVersionPermissionService.prototype.hasPermission=function(e,t,n,i){return __awaiter(this,void 0,void 0,(function(){var o,r,a,s,c;return __generator(this,(function(l){switch(l.label){case 0:return[4,Promise.all([this.shouldIgnoreCatalogPermissions(e,t,n,i),this.catalogVersionPermissionRestService.getCatalogVersionPermissions(t,n)])];case 1:o=l.sent(),r=o[0],a=o[1];if(this.isCatalogVersionPermissionResponse(a)){s=a.permissions.find((function(t){return t.key===e}));c=s?s.value:"false";return[2,c==="true"||r]}return[2,false]}}))}))};CatalogVersionPermissionService.prototype.hasPermission.$inject=["accessType","catalogId","catalogVersion","siteId"];CatalogVersionPermissionService.prototype.hasSyncPermissionFromCurrentToActiveCatalogVersion=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=t.sent();return[4,this.hasSyncPermissionToActiveCatalogVersion(e[s.CONTEXT_CATALOG],e[s.CONTEXT_CATALOG_VERSION])];case 2:return[2,t.sent()]}}))}))};CatalogVersionPermissionService.prototype.hasSyncPermissionToActiveCatalogVersion=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.getActiveContentCatalogVersionByCatalogId(e)];case 1:n=i.sent();return[4,this.hasSyncPermission(e,t,n)];case 2:return[2,i.sent()]}}))}))};CatalogVersionPermissionService.prototype.hasSyncPermissionToActiveCatalogVersion.$inject=["catalogId","catalogVersion"];CatalogVersionPermissionService.prototype.hasSyncPermission=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.catalogVersionPermissionRestService.getCatalogVersionPermissions(e,t)];case 1:i=r.sent();if(this.isCatalogVersionPermissionResponse(i)&&i.syncPermissions&&i.syncPermissions.length>0){o=i.syncPermissions.some((function(e){return e?e.canSynchronize===true&&e.targetCatalogVersion===n:false}));return[2,o]}return[2,false]}}))}))};CatalogVersionPermissionService.prototype.hasSyncPermission.$inject=["catalogId","sourceCatalogVersion","targetCatalogVersion"];CatalogVersionPermissionService.prototype.hasWritePermissionOnCurrent=function(){return this.hasCurrentCatalogPermission(be.WRITE)};CatalogVersionPermissionService.prototype.hasReadPermissionOnCurrent=function(){return this.hasCurrentCatalogPermission(be.READ)};CatalogVersionPermissionService.prototype.hasWritePermission=function(e,t){return this.hasPermission(be.WRITE,e,t)};CatalogVersionPermissionService.prototype.hasWritePermission.$inject=["catalogId","catalogVersion"];CatalogVersionPermissionService.prototype.hasReadPermission=function(e,t){return this.hasPermission(be.READ,e,t)};CatalogVersionPermissionService.prototype.hasReadPermission.$inject=["catalogId","catalogVersion"];CatalogVersionPermissionService.prototype.shouldIgnoreCatalogPermissions=function(e,t,n,i){return __awaiter(this,void 0,void 0,(function(){var o,r;return __generator(this,(function(a){switch(a.label){case 0:o=i&&e===be.READ?this.catalogService.getActiveContentCatalogVersionByCatalogId(t):Promise.resolve();return[4,o];case 1:r=a.sent();return[2,r===n]}}))}))};CatalogVersionPermissionService.prototype.shouldIgnoreCatalogPermissions.$inject=["accessType","catalogId","catalogVersion","siteId"];CatalogVersionPermissionService.prototype.hasCurrentCatalogPermission=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:t=n.sent();return[4,this.hasPermission(e,t[s.CONTEXT_CATALOG],t[s.CONTEXT_CATALOG_VERSION],t[s.CONTEXT_SITE_ID])];case 2:return[2,n.sent()]}}))}))};CatalogVersionPermissionService.prototype.hasCurrentCatalogPermission.$inject=["accessType"];CatalogVersionPermissionService.prototype.isCatalogVersionPermissionResponse=function(e){return!a.isEmpty(e)};CatalogVersionPermissionService.prototype.isCatalogVersionPermissionResponse.$inject=["response"];CatalogVersionPermissionService=__decorate([s.SeDowngradeService(s.ICatalogVersionPermissionService),s.GatewayProxied("hasWritePermission","hasReadPermission","hasWritePermissionOnCurrent","hasReadPermissionOnCurrent"),__metadata("design:paramtypes",[pe,s.ICatalogService])],CatalogVersionPermissionService);return CatalogVersionPermissionService}(s.ICatalogVersionPermissionService);var we=function(e){__extends(PreviewDatalanguageDropdownPopulator,e);PreviewDatalanguageDropdownPopulator.$inject=["languageService"];function PreviewDatalanguageDropdownPopulator(t){return e.call(this,a,t)||this}PreviewDatalanguageDropdownPopulator.prototype.fetchAll=function(e){if(e.model[e.field.dependsOn]){var t=e.model[e.field.dependsOn].split("|")[0];return this.getLanguageDropdownChoices(t,e.search)}return Promise.resolve([])};PreviewDatalanguageDropdownPopulator.prototype.fetchAll.$inject=["payload"];PreviewDatalanguageDropdownPopulator.prototype.getLanguageDropdownChoices=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.languageService.getLanguagesForSite(e)];case 1:n=r.sent();i=n.map((function(e){var t=e.isocode,n=e.nativeName;var i={};i.id=t;i.label=n;return i}));if(t){i=i.filter((function(e){return e.label.toUpperCase().indexOf(t.toUpperCase())>-1}))}return[2,i];case 2:o=r.sent();throw new Error(o);case 3:return[2]}}))}))};PreviewDatalanguageDropdownPopulator.prototype.getLanguageDropdownChoices.$inject=["siteUid","search"];PreviewDatalanguageDropdownPopulator=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.LanguageService])],PreviewDatalanguageDropdownPopulator);return PreviewDatalanguageDropdownPopulator}(s.DropdownPopulatorInterface);var Ee=function(e){__extends(PreviewDatapreviewCatalogDropdownPopulator,e);PreviewDatapreviewCatalogDropdownPopulator.$inject=["catalogService","sharedDataService","languageService","crossFrameEventService"];function PreviewDatapreviewCatalogDropdownPopulator(t,n,i,o){var r=e.call(this,a,i)||this;r.catalogService=t;r.sharedDataService=n;r.l10nFn=s.setupL10nFilter(i,o);return r}PreviewDatapreviewCatalogDropdownPopulator.prototype.fetchAll=function(e){return this.initCatalogVersionDropdownChoices(e.search)};PreviewDatapreviewCatalogDropdownPopulator.prototype.fetchAll.$inject=["payload"];PreviewDatapreviewCatalogDropdownPopulator.prototype.initCatalogVersionDropdownChoices=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,r;return __generator(this,(function(c){switch(c.label){case 0:c.trys.push([0,3,,4]);return[4,this.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY)];case 1:t=c.sent();n=t.siteDescriptor;return[4,this.getDropdownChoices(n,e)];case 2:i=c.sent();o=a.flatten(i).sort((function(e,t){return e.label.localeCompare(t.label)}));return[2,o];case 3:r=c.sent();throw new Error(r);case 4:return[2]}}))}))};PreviewDatapreviewCatalogDropdownPopulator.prototype.initCatalogVersionDropdownChoices.$inject=["search"];PreviewDatapreviewCatalogDropdownPopulator.prototype.getDropdownChoices=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;var o=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.catalogService.getContentCatalogsForSite(e.uid)];case 1:n=r.sent();i=a.flatten(n).map((function(t){return t.versions.map((function(n){return{id:e.uid+"|"+t.catalogId+"|"+n.version,label:o.l10nFn(t.name)+" - "+n.version}}))}));return[2,a.flatten(i).filter((function(e){return t?e.label.toUpperCase().includes(t.toUpperCase()):true}))]}}))}))};PreviewDatapreviewCatalogDropdownPopulator.prototype.getDropdownChoices.$inject=["siteDescriptor","search"];PreviewDatapreviewCatalogDropdownPopulator=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.ICatalogService,s.ISharedDataService,s.LanguageService,s.CrossFrameEventService])],PreviewDatapreviewCatalogDropdownPopulator);return PreviewDatapreviewCatalogDropdownPopulator}(s.DropdownPopulatorInterface);var Pe=function(){StorefrontPageGuard.$inject=["catalogAwareResolverHelper","routing"];function StorefrontPageGuard(e,t){this.catalogAwareResolverHelper=e;this.routing=t}StorefrontPageGuard.prototype.canActivate=function(){var e=this;return this.catalogAwareResolverHelper.storefrontResolve().catch((function(){e.routing.go(s.NG_ROUTE_PREFIX);return false}))};StorefrontPageGuard=__decorate([i.Injectable(),__metadata("design:paramtypes",[W,s.SmarteditRoutingService])],StorefrontPageGuard);return StorefrontPageGuard}();var Te=function(){ProductService.$inject=["restServiceFactory","languageService"];function ProductService(e,t){this.restServiceFactory=e;this.languageService=t;this.productService=this.restServiceFactory.get(s.PRODUCT_RESOURCE_API);this.productListService=this.restServiceFactory.get(s.PRODUCT_LIST_RESOURCE_API)}ProductService.prototype.findProducts=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:this._validateProductCatalogInfo(e);return[4,this.languageService.getResolveLocale()];case 1:n=o.sent();return[4,this.productListService.get({catalogId:e.catalogId,catalogVersion:e.catalogVersion,text:t.mask,pageSize:t.pageSize,currentPage:t.currentPage,langIsoCode:n})];case 2:i=o.sent();return[2,i]}}))}))};ProductService.prototype.findProducts.$inject=["productSearch","pageable"];ProductService.prototype.getProductById=function(e,t){return this.productService.get({siteUID:e,productUID:t})};ProductService.prototype.getProductById.$inject=["siteUID","productUID"];ProductService.prototype._validateProductCatalogInfo=function(e){if(!e.catalogId){throw new Error("[productService] - catalog ID missing.")}if(!e.catalogVersion){throw new Error("[productService] - catalog version missing.")}};ProductService.prototype._validateProductCatalogInfo.$inject=["productSearch"];__decorate([s.Cached({actions:[s.rarelyChangingContent],tags:[s.userEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],ProductService.prototype,"findProducts",null);ProductService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.RestServiceFactory,s.LanguageService])],ProductService);return ProductService}();var Ae=function(){function YAnnouncementBoardComponent(){}YAnnouncementBoardComponent=__decorate([s.SeComponent({templateUrl:"yAnnouncementBoardComponentTemplate.html",inputs:[]})],YAnnouncementBoardComponent);return YAnnouncementBoardComponent}();var De=function(){function YAnnouncementComponent(){}YAnnouncementComponent=__decorate([s.SeComponent({templateUrl:"yAnnouncementComponentTemplate.html",inputs:["announcement"]})],YAnnouncementComponent);return YAnnouncementComponent}();var Oe=function(){function FilterByFieldFilter(){}FilterByFieldFilter.transform=function(){return function(e,t,n,i){return s.FilterByFieldPipe.transform(e,t,n,i)}};FilterByFieldFilter=__decorate([s.SeFilter()],FilterByFieldFilter);return FilterByFieldFilter}();var Re=n(939);var Me=function(){function LegacySmarteditServicesModule(){}LegacySmarteditServicesModule=__decorate([s.SeModule({declarations:[Oe,Ae,De],imports:["seConstantsModule",s.LegacySmarteditCommonsModule,Re,"functionsModule","resourceLocationsModule","yLoDashModule",s.ModalServiceModule],providers:[s.diNameUtils.makeValueProvider({CATALOG_VERSION_PERMISSIONS_RESOURCE_URI:s.CATALOG_VERSION_PERMISSIONS_RESOURCE_URI_CONSTANT}),s.diNameUtils.makeValueProvider({DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME:s.DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME})]})],LegacySmarteditServicesModule);return LegacySmarteditServicesModule}();window.__smartedit__.addDecoratorPayload("Component","ConfigurationModalComponent",{selector:"se-configuration-modal",template:'<div id="editConfigurationsBody" class="se-config"><form #form="ngForm" novalidate><div class="se-config__sub-header"><span class="se-config__sub-title">{{\'se.configurationform.label.keyvalue\' | translate}}</span> <button class="se-config__add-entry-btn fd-button--compact" type="button" (click)="editor.addEntry()">{{ "se.general.configuration.add.button" | translate }}</button></div><div class="se-config__entry" *ngFor="let entry of editor.filterConfiguration(); let $index = index"><div class="se-config__entry-data"><div class="se-config__entry-key"><input type="text" [ngClass]="{\n                            \'is-invalid\': entry.errors &&  entry.errors.keys && entry.errors.keys.length > 0,\n                            \'se-config__entry-key--disabled\': !entry.isNew }" name="{{entry.key}}_{{entry.uuid}}_key" placeholder="{{\'se.configurationform.header.key.name\' | translate}}" [(ngModel)]="entry.key" [required]="true" [disabled]="!entry.isNew" class="se-config__entry-key-input fd-form__control" [title]="entry.key"/><ng-container *ngIf="entry.errors && entry.errors.keys"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.keys; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div><div class="se-config__entry-value"><textarea [ngClass]="{\'is-invalid\': entry.errors && entry.errors.values && entry.errors.values.length>0}" name="{{entry.key}}_{{entry.uuid}}_value" placeholder="{{\'se.configurationform.header.value.name\' | translate}}" [(ngModel)]="entry.value" [required]="true" class="se-config__entry-text-area fd-form__control" (change)="editor.validateUserInput(entry)"></textarea><div *ngIf="entry.requiresUserCheck"><input id="{{entry.key}}_absoluteUrl_check_{{$index}}" type="checkbox" name="{{entry.key}}_{{entry.uuid}}_isCheckedByUser" [(ngModel)]="entry.isCheckedByUser"/> <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}" [ngClass]="{\n                                \'warning-check-msg\': true,\n                                \'not-checked\': entry.hasErrors && !entry.isCheckedByUser\n                            }">{{\'se.configurationform.absoluteurl.check\' | translate}}</span></div><ng-container *ngIf="entry.errors && entry.errors.values && entry.errors.values"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.values; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div></div><button type="button" id="{{entry.key}}_removeButton_{{$index}}" class="se-config__entry-remove-btn fd-button--light sap-icon--delete" (click)="editor.removeEntry(entry, form);"></button></div></form></div>'});var xe=function(){function ConfigurationModalComponent(e,t,n){this.editor=e;this.modalManager=t;this.confirmationModalService=n}ConfigurationModalComponent.prototype.ngOnInit=function(){var e=this;this.editor.init();this.form.statusChanges.subscribe((function(){if(e.form.valid&&e.form.dirty){e.modalManager.enableButton("save")}if(e.form.invalid||!e.form.dirty){e.modalManager.disableButton("save")}}));this.modalManager.addButtons([{id:"cancel",label:"se.cms.component.confirmation.modal.cancel",style:s.FundamentalModalButtonStyle.Default,action:s.FundamentalModalButtonAction.Dismiss,callback:function(){return c.from(e.onCancel())}},{id:"save",style:s.FundamentalModalButtonStyle.Primary,label:"se.cms.component.confirmation.modal.save",callback:function(){return c.from(e.onSave())},disabled:true}])};ConfigurationModalComponent.prototype.trackByFn=function(e,t){return t.uuid};ConfigurationModalComponent.prototype.onCancel=function(){var e=this;var t=this.form.dirty;var n={description:"se.editor.cancel.confirm"};if(!t){return Promise.resolve()}return this.confirmationModalService.confirm(n).then((function(){return e.modalManager.close(null)}))};ConfigurationModalComponent.prototype.onSave=function(){var e=this;return this.editor.submit(this.form).then((function(){e.modalManager.close(null)}))};__decorate([i.ViewChild("form",{static:true}),__metadata("design:type",h.NgForm)],ConfigurationModalComponent.prototype,"form",void 0);ConfigurationModalComponent=__decorate([i.Component({selector:"se-configuration-modal",template:'<div id="editConfigurationsBody" class="se-config"><form #form="ngForm" novalidate><div class="se-config__sub-header"><span class="se-config__sub-title">{{\'se.configurationform.label.keyvalue\' | translate}}</span> <button class="se-config__add-entry-btn fd-button--compact" type="button" (click)="editor.addEntry()">{{ "se.general.configuration.add.button" | translate }}</button></div><div class="se-config__entry" *ngFor="let entry of editor.filterConfiguration(); let $index = index"><div class="se-config__entry-data"><div class="se-config__entry-key"><input type="text" [ngClass]="{\n                            \'is-invalid\': entry.errors &&  entry.errors.keys && entry.errors.keys.length > 0,\n                            \'se-config__entry-key--disabled\': !entry.isNew }" name="{{entry.key}}_{{entry.uuid}}_key" placeholder="{{\'se.configurationform.header.key.name\' | translate}}" [(ngModel)]="entry.key" [required]="true" [disabled]="!entry.isNew" class="se-config__entry-key-input fd-form__control" [title]="entry.key"/><ng-container *ngIf="entry.errors && entry.errors.keys"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.keys; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div><div class="se-config__entry-value"><textarea [ngClass]="{\'is-invalid\': entry.errors && entry.errors.values && entry.errors.values.length>0}" name="{{entry.key}}_{{entry.uuid}}_value" placeholder="{{\'se.configurationform.header.value.name\' | translate}}" [(ngModel)]="entry.value" [required]="true" class="se-config__entry-text-area fd-form__control" (change)="editor.validateUserInput(entry)"></textarea><div *ngIf="entry.requiresUserCheck"><input id="{{entry.key}}_absoluteUrl_check_{{$index}}" type="checkbox" name="{{entry.key}}_{{entry.uuid}}_isCheckedByUser" [(ngModel)]="entry.isCheckedByUser"/> <span id="{{entry.key}}_absoluteUrl_msg_{{$index}}" [ngClass]="{\n                                \'warning-check-msg\': true,\n                                \'not-checked\': entry.hasErrors && !entry.isCheckedByUser\n                            }">{{\'se.configurationform.absoluteurl.check\' | translate}}</span></div><ng-container *ngIf="entry.errors && entry.errors.values && entry.errors.values"><span id="{{entry.key}}_error_{{$index}}" *ngFor="let error of entry.errors.values; let $index = index" class="error-input help-block">{{error.message|translate}}</span></ng-container></div></div><button type="button" id="{{entry.key}}_removeButton_{{$index}}" class="se-config__entry-remove-btn fd-button--light sap-icon--delete" (click)="editor.removeEntry(entry, form);"></button></div></form></div>'}),__metadata("design:paramtypes",[_e,s.FundamentalModalManagerService,s.IConfirmationModalService])],ConfigurationModalComponent);return ConfigurationModalComponent}();var Ne=function(){ConfigurationModalService.$inject=["modalService"];function ConfigurationModalService(e){this.modalService=e}ConfigurationModalService.prototype.editConfiguration=function(){this.modalService.open({templateConfig:{title:"se.modal.administration.configuration.edit.title"},component:xe,config:{focusTrapped:false,backdropClickCloseable:false}})};ConfigurationModalService=__decorate([s.SeDowngradeService(),__metadata("design:paramtypes",[s.IModalService])],ConfigurationModalService);return ConfigurationModalService}();var ke=function(){function SmarteditServicesModule(){}SmarteditServicesModule=__decorate([i.NgModule({imports:[s.DragAndDropServiceModule,s.SmarteditCommonsModule],providers:[fe,b,S,A,s.RestServiceFactory,_e,Ne,we,Ee,pe,Ie,W,Pe,s.SmarteditRoutingService,{provide:s.ICatalogVersionPermissionService,useClass:Ie},{provide:s.IPermissionService,useClass:de},{provide:s.IPageInfoService,useClass:F},{provide:s.IRestServiceFactory,useClass:s.RestServiceFactory},{provide:s.IRenderService,useClass:Ce},{provide:s.IAnnouncementService,useClass:E},{provide:s.IPerspectiveService,useClass:L},{provide:s.IFeatureService,useClass:k},{provide:s.INotificationMouseLeaveDetectionService,useClass:T},{provide:s.IWaitDialogService,useClass:G},{provide:s.IPreviewService,useClass:z},{provide:s.IDragAndDropCrossOrigin,useClass:M},j,{provide:s.INotificationService,useClass:P},Te,s.moduleUtils.initialize((function(e){}),[s.IPreviewService])]})],SmarteditServicesModule);return SmarteditServicesModule}();var Fe=function(){ConfirmationModalService.$inject=["modalService"];function ConfirmationModalService(e){this.modalService=e}ConfirmationModalService.prototype.confirm=function(e){var t=this._validateConfirmationParameters(e.description,e.template,e.templateUrl);if(t){return Promise.reject(t)}return this.isLegacyConfirm(e)?this.angularJsConfirm(e):this.angularConfirm(e)};ConfirmationModalService.prototype.confirm.$inject=["configuration"];ConfirmationModalService.prototype.angularConfirm=function(e){var t=this.modalService.open({component:s.ConfirmDialogComponent,data:{description:e.description,descriptionPlaceholders:e.descriptionPlaceholders},config:{focusTrapped:false,modalPanelClass:"se-confirmation-dialog",container:document.querySelector("[uib-modal-window]")||"body"},templateConfig:{title:e.title||"se.confirmation.modal.title",buttons:this.getButtons(e),isDismissButtonVisible:true}});return new Promise((function(e,n){t.afterClosed.subscribe(e,n)}))};ConfirmationModalService.prototype.angularConfirm.$inject=["configuration"];ConfirmationModalService.prototype.angularJsConfirm=function(e){return this.modalService.open({size:"md",title:e.title||"se.confirmation.modal.title",templateInline:e.template,templateUrl:e.templateUrl,controller:this._initializeControllerObjectWithScope(e),cssClasses:"yFrontModal",buttons:this.getLegacyButtons(e)})};ConfirmationModalService.prototype.angularJsConfirm.$inject=["configuration"];ConfirmationModalService.prototype.isLegacyConfirm=function(e){var t=e;return!!t.template||!!t.templateUrl||!!t.scope};ConfirmationModalService.prototype.isLegacyConfirm.$inject=["configuration"];ConfirmationModalService.prototype.getLegacyButtons=function(e){return[!e.showOkButtonOnly&&{id:"confirmCancel",label:"se.confirmation.modal.cancel",style:s.ModalButtonStyles.Default,action:s.ModalButtonActions.Dismiss},{id:"confirmOk",label:"se.confirmation.modal.ok",action:s.ModalButtonActions.Close}].filter((function(e){return!!e}))};ConfirmationModalService.prototype.getLegacyButtons.$inject=["configuration"];ConfirmationModalService.prototype.getButtons=function(e){return[!e.showOkButtonOnly&&{id:"confirmCancel",label:"se.confirmation.modal.cancel",style:s.FundamentalModalButtonStyle.Default,action:s.FundamentalModalButtonAction.Dismiss},{id:"confirmOk",label:"se.confirmation.modal.ok",style:s.FundamentalModalButtonStyle.Primary,action:s.FundamentalModalButtonAction.Close}].filter((function(e){return!!e}))};ConfirmationModalService.prototype.getButtons.$inject=["configuration"];ConfirmationModalService.prototype._validateConfirmationParameters=function(e,t,n){var i=[e,t,n];var o=i.filter((function(e){return e!==undefined})).length;if(o===0){return"You must have one of the following configuration properties configured: description, template, or templateUrl"}else if(o>1){return"You have more than one of the following configuration properties configured: description, template, or templateUrl"}return undefined};ConfirmationModalService.prototype._validateConfirmationParameters.$inject=["description","template","templateUrl"];ConfirmationModalService.prototype._initializeControllerObjectWithScope=function(e){var t=e;return t.scope?function(){for(var e in t.scope){if(t.scope.hasOwnProperty(e)){this[e]=t.scope[e]}}}:undefined};ConfirmationModalService.prototype._initializeControllerObjectWithScope.$inject=["configuration"];ConfirmationModalService=__decorate([s.SeDowngradeService(s.IConfirmationModalService),s.GatewayProxied("confirm"),__metadata("design:paramtypes",[s.IModalService])],ConfirmationModalService);return ConfirmationModalService}();var ze=function(e){__extends(ToolbarService,e);function ToolbarService(t,n,i,o,r){var a=e.call(this,i,o,r)||this;a.gatewayId=t;a.onAliasesChange=null;n.initForService(a,["addAliases","removeItemByKey","removeAliasByKey","_removeItemOnInner","triggerActionOnInner"]);return a}ToolbarService.prototype.addAliases=function(e){var t=this;this.aliases=this.aliases.map((function(n){return t.get(e,n)||n}));this.aliases=__spreadArrays(this.aliases||[],(e||[]).filter((function(e){return!t.get(t.aliases,e)})));this.aliases=this.sortAliases(this.aliases);if(this.onAliasesChange){this.onAliasesChange(this.aliases)}};ToolbarService.prototype.removeItemByKey=function(e){if(e in this.actions){delete this.actions[e]}else{this._removeItemOnInner(e)}this.removeAliasByKey(e)};ToolbarService.prototype.removeAliasByKey=function(e){var t=0;for(;t<this.aliases.length;t++){if(this.aliases[t].key===e){break}}if(t<this.aliases.length){this.aliases.splice(t,1)}if(this.onAliasesChange){this.onAliasesChange(this.aliases)}};ToolbarService.prototype.setOnAliasesChange=function(e){this.onAliasesChange=e};ToolbarService.prototype.triggerAction=function(e){if(e&&this.actions[e.key]){this.actions[e.key].call(e);return}this.triggerActionOnInner(e)};ToolbarService.prototype.get=function(e,t){return e.find((function(e){var n=e.key;return n===t.key}))};ToolbarService.prototype.sortAliases=function(e){var t=false;var n="In "+this.gatewayId+" the items ";var i=null;var o=__spreadArrays(e||[]).sort((function(e,o){if(e.priority===o.priority&&e.section===o.section){i=e.section;n+=e.key+" and "+o.key+" ";t=true;return e.key>o.key?1:-1}return e.priority-o.priority}));if(t){this.logService.warn("WARNING: "+n+"have the same priority withing section:"+i)}return o};return ToolbarService}(s.IToolbarService);var Le=function(){ToolbarServiceFactory.$inject=["gatewayProxy","logService","lazy","permissionService"];function ToolbarServiceFactory(e,t,n,i){this.gatewayProxy=e;this.logService=t;this.lazy=n;this.permissionService=i;this.toolbarServicesByGatewayId={}}ToolbarServiceFactory.prototype.getToolbarService=function(e){if(!this.toolbarServicesByGatewayId[e]){this.toolbarServicesByGatewayId[e]=new ze(e,this.gatewayProxy,this.logService,this.lazy.$templateCache(),this.permissionService)}return this.toolbarServicesByGatewayId[e]};ToolbarServiceFactory.prototype.getToolbarService.$inject=["gatewayId"];ToolbarServiceFactory=__decorate([s.SeDowngradeService(s.IToolbarServiceFactory),__metadata("design:paramtypes",[s.GatewayProxy,s.LogService,s.AngularJSLazyDependenciesService,s.IPermissionService])],ToolbarServiceFactory);return ToolbarServiceFactory}();window.__smartedit__.addDecoratorPayload("Component","ToolbarComponent",{selector:"se-toolbar",template:'<div class="se-toolbar" [ngClass]="cssClass"><div class="se-toolbar__left"><div *ngFor="let item of aliases | seProperty:{section:\'left\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__left {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__middle"><div *ngFor="let item of aliases | seProperty:{section:\'middle\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__middle {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__right"><div *ngFor="let item of aliases | seProperty:{section:\'right\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__right {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div></div>'});var Ve=function(){ToolbarComponent.$inject=["toolbarServiceFactory","iframeClickDetectionService","systemEventService","injector","cdr","routingService"];function ToolbarComponent(e,t,n,i,o,r){this.toolbarServiceFactory=e;this.iframeClickDetectionService=t;this.systemEventService=n;this.injector=i;this.cdr=o;this.routingService=r;this.imageRoot="";this.aliases=[];this.unregCloseActions=null;this.unregCloseAll=null;this.unregRecalcPermissions=null}e=ToolbarComponent;ToolbarComponent.prototype.ngOnInit=function(){this.setup()};ToolbarComponent.prototype.ngOnDestroy=function(){this.unregCloseActions();this.unregCloseAll();this.unregRecalcPermissions()};ToolbarComponent.prototype.triggerAction=function(e,t){t.preventDefault();this.toolbarService.triggerAction(e)};ToolbarComponent.prototype.triggerAction.$inject=["action","$event"];ToolbarComponent.prototype.getItemVisibility=function(e){return(e.include||e.component)&&(e.isOpen||e.keepAliveOnClose)};ToolbarComponent.prototype.getItemVisibility.$inject=["item"];ToolbarComponent.prototype.isOnStorefront=function(){return this.routingService.absUrl().includes(s.STORE_FRONT_CONTEXT)};ToolbarComponent.prototype.createLegacyController=function(){var e=this;return{alias:"$ctrl",value:function(){return e}}};ToolbarComponent.prototype.createInjector=function(e){return i.Injector.create({parent:this.injector,providers:[{provide:s.TOOLBAR_ITEM,useValue:e}]})};ToolbarComponent.prototype.createInjector.$inject=["item"];ToolbarComponent.prototype.trackByFn=function(e,t){return t.key};ToolbarComponent.prototype.trackByFn.$inject=["_","item"];ToolbarComponent.prototype.closeAllActionItems=function(){this.aliases.forEach((function(e){e.isOpen=false}))};ToolbarComponent.prototype.populatePermissions=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:e=this.aliases.map((function(e){return n.toolbarService._populateIsPermissionGranted(e)}));t=this;return[4,Promise.all(e)];case 1:t.aliases=i.sent();return[2]}}))}))};ToolbarComponent.prototype.setup=function(){this.buildAliases();this.populatePermissions();this.registerCallbacks()};ToolbarComponent.prototype.buildAliases=function(){var e=this;this.toolbarService=this.toolbarServiceFactory.getToolbarService(this.toolbarName);this.toolbarService.setOnAliasesChange((function(t){e.aliases=t;if(!e.cdr.destroyed){e.cdr.detectChanges()}}));this.aliases=this.toolbarService.getAliases()};ToolbarComponent.prototype.registerCallbacks=function(){var t=this;this.unregCloseActions=this.iframeClickDetectionService.registerCallback(e.CLOSE_ALL_ACTION_ITEMS+this.toolbarName,(function(){return t.closeAllActionItems()}));this.unregCloseAll=this.systemEventService.subscribe(s.EVENTS.PAGE_SELECTED,(function(){return t.closeAllActionItems()}));this.unregRecalcPermissions=this.systemEventService.subscribe(s.EVENTS.PERMISSION_CACHE_CLEANED,(function(){return t.populatePermissions()}))};var e;ToolbarComponent.CLOSE_ALL_ACTION_ITEMS="closeAllActionItems";__decorate([i.Input(),__metadata("design:type",String)],ToolbarComponent.prototype,"cssClass",void 0);__decorate([i.Input(),__metadata("design:type",String)],ToolbarComponent.prototype,"toolbarName",void 0);__decorate([i.Input(),__metadata("design:type",Object)],ToolbarComponent.prototype,"imageRoot",void 0);ToolbarComponent=e=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-toolbar",template:'<div class="se-toolbar" [ngClass]="cssClass"><div class="se-toolbar__left"><div *ngFor="let item of aliases | seProperty:{section:\'left\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__left {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__middle"><div *ngFor="let item of aliases | seProperty:{section:\'middle\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__middle {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div><div class="se-toolbar__right"><div *ngFor="let item of aliases | seProperty:{section:\'right\'}; trackBy: trackByFn" class="se-template-toolbar se-template-toolbar__right {{item.className}}"><se-toolbar-section-item [item]="item"></se-toolbar-section-item></div></div></div>'}),__metadata("design:paramtypes",[s.IToolbarServiceFactory,s.IIframeClickDetectionService,s.SystemEventService,i.Injector,i.ChangeDetectorRef,s.SmarteditRoutingService])],ToolbarComponent);return ToolbarComponent}();window.__smartedit__.addDecoratorPayload("Component","ToolbarActionComponent",{selector:"se-toolbar-action",template:'<div *ngIf="item.isPermissionGranted"><div *ngIf="item.type == type.ACTION" class="toolbar-action"><button type="button" [ngClass]="{\n                \'toolbar-action--button--compact\': isCompact,\n                \'toolbar-action--button\': !isCompact\n            }" class="btn" (click)="toolbar.triggerAction(item, $event)" [attr.aria-pressed]="false" [attr.aria-haspopup]="true" [attr.aria-expanded]="false" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn"><span *ngIf="item.iconClassName" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_iconclass" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_lbl">{{item.name | translate}}</span></button></div><fd-popover class="se-toolbar-action__wrapper toolbar-action toolbar-action--hybrid" *ngIf="item.type === type.HYBRID_ACTION" [attr.data-item-key]="item.key" [triggers]="[\'click\']" [noArrow]="false" [isOpen]="item.isOpen" (isOpenChange)="onOpenChange()" [placement]="placement" seClickOutside (clickOutside)="onOutsideClicked()"><fd-popover-control><button *ngIf="item.iconClassName || item.icons" type="button" class="btn" [ngClass]="{\n                    \'toolbar-action--button--compact\': isCompact,\n                    \'toolbar-action--button\': !isCompact\n                }" [disabled]="disabled" [attr.aria-pressed]="false " (click)="toolbar.triggerAction(item, $event)"><span *ngIf="item.iconClassName" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt">{{item.name | translate}}</span></button></fd-popover-control><fd-popover-body class="se-toolbar-action__body" [ngClass]="{\n                \'toolbar-action--include--compact\': isCompact,\n                \'toolbar-action--include\': !isCompact\n              \n            }"><se-prevent-vertical-overflow><div *ngIf="toolbar.getItemVisibility(item) && item.include" [ngInclude]="item.include" [scope]="{ item: item }" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="toolbar.getItemVisibility(item) && item.component"><ng-container *ngComponentOutlet="item.component; injector: actionInjector"></ng-container></ng-container></se-prevent-vertical-overflow></fd-popover-body></fd-popover></div>'});var $e=function(){function ToolbarActionComponent(e){this.toolbar=e;this.type=s.ToolbarItemType}ToolbarActionComponent.prototype.ngOnInit=function(){this.setup()};ToolbarActionComponent.prototype.ngOnChanges=function(e){if(e.item){this.setup()}};Object.defineProperty(ToolbarActionComponent.prototype,"isCompact",{get:function(){return this.item.actionButtonFormat==="compact"},enumerable:false,configurable:true});Object.defineProperty(ToolbarActionComponent.prototype,"placement",{get:function(){if(this.item.section===s.ToolbarSection.left||this.item.section===s.ToolbarSection.middle){return"bottom-start"}else if(this.item.section===s.ToolbarSection.right){return"bottom-end"}switch(this.item.dropdownPosition){case s.ToolbarDropDownPosition.left:return"bottom-start";case s.ToolbarDropDownPosition.right:return"bottom-end";default:return"bottom"}},enumerable:false,configurable:true});ToolbarActionComponent.prototype.onOutsideClicked=function(){this.item.isOpen=false};ToolbarActionComponent.prototype.onOpenChange=function(){this.item.isOpen=!this.item.isOpen};ToolbarActionComponent.prototype.setup=function(){this.legacyController=this.toolbar.createLegacyController();this.actionInjector=this.toolbar.createInjector(this.item)};__decorate([i.Input(),__metadata("design:type",Object)],ToolbarActionComponent.prototype,"item",void 0);ToolbarActionComponent=__decorate([i.Component({selector:"se-toolbar-action",template:'<div *ngIf="item.isPermissionGranted"><div *ngIf="item.type == type.ACTION" class="toolbar-action"><button type="button" [ngClass]="{\n                \'toolbar-action--button--compact\': isCompact,\n                \'toolbar-action--button\': !isCompact\n            }" class="btn" (click)="toolbar.triggerAction(item, $event)" [attr.aria-pressed]="false" [attr.aria-haspopup]="true" [attr.aria-expanded]="false" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn"><span *ngIf="item.iconClassName" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_iconclass" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt" id="{{toolbar.toolbarName}}_option_{{item.key}}_btn_lbl">{{item.name | translate}}</span></button></div><fd-popover class="se-toolbar-action__wrapper toolbar-action toolbar-action--hybrid" *ngIf="item.type === type.HYBRID_ACTION" [attr.data-item-key]="item.key" [triggers]="[\'click\']" [noArrow]="false" [isOpen]="item.isOpen" (isOpenChange)="onOpenChange()" [placement]="placement" seClickOutside (clickOutside)="onOutsideClicked()"><fd-popover-control><button *ngIf="item.iconClassName || item.icons" type="button" class="btn" [ngClass]="{\n                    \'toolbar-action--button--compact\': isCompact,\n                    \'toolbar-action--button\': !isCompact\n                }" [disabled]="disabled" [attr.aria-pressed]="false " (click)="toolbar.triggerAction(item, $event)"><span *ngIf="item.iconClassName" class="{{item.iconClassName}}" [ngClass]="{ \'se-toolbar-actions__icon\': isCompact }"></span> <img *ngIf="!item.iconClassName && item.icons" id="{{toolbar.toolbarName}}_option_{{item.key}}" src="{{toolbar.imageRoot}}{{item.icons[0]}}" class="file" title="{{item.name | translate}}" alt="{{item.name | translate}}"/> <span *ngIf="!isCompact" class="toolbar-action-button__txt">{{item.name | translate}}</span></button></fd-popover-control><fd-popover-body class="se-toolbar-action__body" [ngClass]="{\n                \'toolbar-action--include--compact\': isCompact,\n                \'toolbar-action--include\': !isCompact\n              \n            }"><se-prevent-vertical-overflow><div *ngIf="toolbar.getItemVisibility(item) && item.include" [ngInclude]="item.include" [scope]="{ item: item }" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="toolbar.getItemVisibility(item) && item.component"><ng-container *ngComponentOutlet="item.component; injector: actionInjector"></ng-container></ng-container></se-prevent-vertical-overflow></fd-popover-body></fd-popover></div>'}),__param(0,i.Inject(i.forwardRef((function(){return Ve})))),__metadata("design:paramtypes",[Ve])],ToolbarActionComponent);return ToolbarActionComponent}();window.__smartedit__.addDecoratorPayload("Component","ToolbarActionOutletComponent",{selector:"se-toolbar-action-outlet",template:'\n        <div\n            class="se-template-toolbar__action-template"\n            [ngClass]="{\n                \'se-toolbar-action\': isSectionRight,\n                \'se-toolbar-action--active\': isSectionRight && isPermitionGranted\n            }"\n        >\n            \x3c!-- AngularJS TEMPLATE type--\x3e\n\n            <div\n                *ngIf="item.include && item.type === type.TEMPLATE"\n                [ngInclude]="item.include"\n                [compileHtmlNgController]="legacyController"\n                [scope]="{ item: item }"\n            ></div>\n\n            \x3c!-- Angular TEMPLATE type--\x3e\n\n            <ng-container *ngIf="item.component && item.type === type.TEMPLATE">\n                <ng-container\n                    *ngComponentOutlet="item.component; injector: actionInjector"\n                ></ng-container>\n            </ng-container>\n\n            \x3c!--ACTION and HYBRID_ACTION types--\x3e\n\n            <div *ngIf="!item.include || item.type !== type.TEMPLATE">\n                <se-toolbar-action [item]="item"></se-toolbar-action>\n            </div>\n        </div>\n    '});var Ue=function(){function ToolbarActionOutletComponent(e){this.toolbar=e;this.type=s.ToolbarItemType}ToolbarActionOutletComponent.prototype.ngOnInit=function(){this.setup()};ToolbarActionOutletComponent.prototype.ngOnChanges=function(e){if(e.item){this.setup()}};Object.defineProperty(ToolbarActionOutletComponent.prototype,"isSectionRight",{get:function(){return this.item.section===s.ToolbarSection.right},enumerable:false,configurable:true});Object.defineProperty(ToolbarActionOutletComponent.prototype,"isPermitionGranted",{get:function(){return this.item.isPermissionGranted},enumerable:false,configurable:true});ToolbarActionOutletComponent.prototype.setup=function(){this.legacyController=this.toolbar.createLegacyController();this.actionInjector=this.toolbar.createInjector(this.item)};__decorate([i.Input(),__metadata("design:type",Object)],ToolbarActionOutletComponent.prototype,"item",void 0);ToolbarActionOutletComponent=__decorate([i.Component({selector:"se-toolbar-action-outlet",template:'\n        <div\n            class="se-template-toolbar__action-template"\n            [ngClass]="{\n                \'se-toolbar-action\': isSectionRight,\n                \'se-toolbar-action--active\': isSectionRight && isPermitionGranted\n            }"\n        >\n            \x3c!-- AngularJS TEMPLATE type--\x3e\n\n            <div\n                *ngIf="item.include && item.type === type.TEMPLATE"\n                [ngInclude]="item.include"\n                [compileHtmlNgController]="legacyController"\n                [scope]="{ item: item }"\n            ></div>\n\n            \x3c!-- Angular TEMPLATE type--\x3e\n\n            <ng-container *ngIf="item.component && item.type === type.TEMPLATE">\n                <ng-container\n                    *ngComponentOutlet="item.component; injector: actionInjector"\n                ></ng-container>\n            </ng-container>\n\n            \x3c!--ACTION and HYBRID_ACTION types--\x3e\n\n            <div *ngIf="!item.include || item.type !== type.TEMPLATE">\n                <se-toolbar-action [item]="item"></se-toolbar-action>\n            </div>\n        </div>\n    '}),__param(0,i.Inject(i.forwardRef((function(){return Ve})))),__metadata("design:paramtypes",[Ve])],ToolbarActionOutletComponent);return ToolbarActionOutletComponent}();window.__smartedit__.addDecoratorPayload("Component","ToolbarItemContextComponent",{selector:"se-toolbar-item-context",template:'\n        <div\n            *ngIf="displayContext"\n            id="toolbar_item_context_{{ itemKey }}_btn"\n            class="se-toolbar-actionable-item-context"\n            [ngClass]="{ \'se-toolbar-actionable-item-context--open\': isOpen }"\n        >\n            \x3c!-- AngularJS --\x3e\n\n            <div\n                *ngIf="contextTemplateUrl"\n                class="se-toolbar-actionable-context__btn"\n                [ngInclude]="contextTemplateUrl"\n            ></div>\n\n            \x3c!-- Angular --\x3e\n\n            <div *ngIf="contextComponent" class="se-toolbar-actionable-context__btn">\n                <ng-container *ngComponentOutlet="contextComponent"></ng-container>\n            </div>\n        </div>\n    '});var je=function(){function ToolbarItemContextComponent(e){this.crossFrameEventService=e;this.displayContext=false}ToolbarItemContextComponent.prototype.ngOnInit=function(){this.registerCallbacks()};ToolbarItemContextComponent.prototype.ngOnDestroy=function(){this.unregShowContext();this.unregHideContext()};ToolbarItemContextComponent.prototype.showContext=function(e){this.displayContext=e};ToolbarItemContextComponent.prototype.registerCallbacks=function(){var e=this;this.unregShowContext=this.crossFrameEventService.subscribe(s.SHOW_TOOLBAR_ITEM_CONTEXT,(function(t,n){if(n===e.itemKey){e.showContext(true)}}));this.unregHideContext=this.crossFrameEventService.subscribe(s.HIDE_TOOLBAR_ITEM_CONTEXT,(function(t,n){if(n===e.itemKey){e.showContext(false)}}))};__decorate([i.Input(),__metadata("design:type",String)],ToolbarItemContextComponent.prototype,"itemKey",void 0);__decorate([i.Input(),__metadata("design:type",Boolean)],ToolbarItemContextComponent.prototype,"isOpen",void 0);__decorate([i.Input(),__metadata("design:type",String)],ToolbarItemContextComponent.prototype,"contextTemplateUrl",void 0);__decorate([i.Input(),__metadata("design:type",i.Type)],ToolbarItemContextComponent.prototype,"contextComponent",void 0);ToolbarItemContextComponent=__decorate([i.Component({selector:"se-toolbar-item-context",template:'\n        <div\n            *ngIf="displayContext"\n            id="toolbar_item_context_{{ itemKey }}_btn"\n            class="se-toolbar-actionable-item-context"\n            [ngClass]="{ \'se-toolbar-actionable-item-context--open\': isOpen }"\n        >\n            \x3c!-- AngularJS --\x3e\n\n            <div\n                *ngIf="contextTemplateUrl"\n                class="se-toolbar-actionable-context__btn"\n                [ngInclude]="contextTemplateUrl"\n            ></div>\n\n            \x3c!-- Angular --\x3e\n\n            <div *ngIf="contextComponent" class="se-toolbar-actionable-context__btn">\n                <ng-container *ngComponentOutlet="contextComponent"></ng-container>\n            </div>\n        </div>\n    '}),__param(0,i.Inject(s.EVENT_SERVICE)),__metadata("design:paramtypes",[s.CrossFrameEventService])],ToolbarItemContextComponent);return ToolbarItemContextComponent}();window.__smartedit__.addDecoratorPayload("Component","ToolbarSectionItemComponent",{selector:"se-toolbar-section-item",host:{class:"se-toolbar-section-item"},template:'\n        <se-toolbar-action-outlet [item]="item"></se-toolbar-action-outlet>\n        <se-toolbar-item-context\n            *ngIf="item.contextTemplateUrl || item.contextComponent"\n            class="se-template-toolbar__context-template"\n            [attr.data-item-key]="item.key"\n            [itemKey]="item.key"\n            [isOpen]="item.isOpen"\n            [contextTemplateUrl]="item.contextTemplateUrl"\n            [contextComponent]="item.contextComponent"\n        ></se-toolbar-item-context>\n    '});var Be=function(){function ToolbarSectionItemComponent(){}__decorate([i.Input(),__metadata("design:type",Object)],ToolbarSectionItemComponent.prototype,"item",void 0);ToolbarSectionItemComponent=__decorate([i.Component({selector:"se-toolbar-section-item",host:{class:"se-toolbar-section-item"},template:'\n        <se-toolbar-action-outlet [item]="item"></se-toolbar-action-outlet>\n        <se-toolbar-item-context\n            *ngIf="item.contextTemplateUrl || item.contextComponent"\n            class="se-template-toolbar__context-template"\n            [attr.data-item-key]="item.key"\n            [itemKey]="item.key"\n            [isOpen]="item.isOpen"\n            [contextTemplateUrl]="item.contextTemplateUrl"\n            [contextComponent]="item.contextComponent"\n        ></se-toolbar-item-context>\n    '})],ToolbarSectionItemComponent);return ToolbarSectionItemComponent}();window.__smartedit__.addDecoratorPayload("Component","DeviceSupportWrapperComponent",{selector:"se-device-support-wrapper",template:'\n        <inflection-point-selector\n            *ngIf="toolbar.isOnStorefront()"\n            class="toolbar-action"\n        ></inflection-point-selector>\n    '});var He=function(){function DeviceSupportWrapperComponent(e){this.toolbar=e}DeviceSupportWrapperComponent=__decorate([i.Component({selector:"se-device-support-wrapper",template:'\n        <inflection-point-selector\n            *ngIf="toolbar.isOnStorefront()"\n            class="toolbar-action"\n        ></inflection-point-selector>\n    '}),__param(0,i.Inject(i.forwardRef((function(){return Ve})))),__metadata("design:paramtypes",[Ve])],DeviceSupportWrapperComponent);return DeviceSupportWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","ExperienceSelectorButtonComponent",{selector:"se-experience-selector-button",template:'<fd-popover class="se-experience-selector" [(isOpen)]="status.isOpen" (isOpenChange)="resetExperienceSelector()" [closeOnOutsideClick]="false" [triggers]="[\'click\']" [placement]="\'bottom-end\'"><fd-popover-control><div class="se-experience-selector__control"><se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isCurrentPageFromParent" class="se-experience-selector__tooltip"><span se-tooltip-trigger class="se-experience-selector__btn--globe"><span class="hyicon hyicon-globe se-experience-selector__btn--globe--icon"></span></span><div se-tooltip-body>{{ parentCatalogVersion }}</div></se-tooltip><button class="se-experience-selector__btn" id="experience-selector-btn"><span [attr.title]="buildExperienceText()" class="se-experience-selector__btn-text se-nowrap-ellipsis">{{ buildExperienceText() }} </span><span class="se-experience-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><div class="se-experience-selector__dropdown fd-modal fd-modal__content" role="menu"><se-experience-selector [experience]="experience" [dropdownStatus]="status" [(resetExperienceSelector)]="resetExperienceSelector"></se-experience-selector></div></fd-popover-body></fd-popover>'});var Ge=function(){ExperienceSelectorButtonComponent.$inject=["systemEventService","crossFrameEventService","locale","sharedDataService","languageService"];function ExperienceSelectorButtonComponent(e,t,n,i,o){this.systemEventService=e;this.crossFrameEventService=t;this.locale=n;this.sharedDataService=i;this.languageService=o;this.status={isOpen:false};this.isCurrentPageFromParent=false;this.l10nFilter=s.setupL10nFilter(this.languageService,t)}ExperienceSelectorButtonComponent.prototype.ngOnInit=function(){var e=this;this.updateExperience();this.unregFn=this.systemEventService.subscribe(s.EVENTS.EXPERIENCE_UPDATE,(function(){return e.updateExperience()}));this.unRegNewPageContextEventFn=this.crossFrameEventService.subscribe(s.EVENTS.PAGE_CHANGE,(function(t,n){return e.setPageFromParent(n)}))};ExperienceSelectorButtonComponent.prototype.ngOnDestroy=function(){this.unregFn();this.unRegNewPageContextEventFn()};ExperienceSelectorButtonComponent.prototype.updateExperience=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY)];case 1:e.experience=t.sent();return[2]}}))}))};ExperienceSelectorButtonComponent.prototype.buildExperienceText=function(){if(!this.experience){return""}var e=this.experience,t=e.catalogDescriptor,n=t.name,i=t.catalogVersion,o=e.languageDescriptor.nativeName,r=e.time;var a=new d.DatePipe(this.locale);var c=r?"  |  "+a.transform(v(r).isValid()?r:v.now(),s.DATE_CONSTANTS.ANGULAR_SHORT):"";return this.l10nFilter(n)+" - "+i+"  |  "+o+c+this._returnProductCatalogVersionTextByUuids()};ExperienceSelectorButtonComponent.prototype.setPageFromParent=function(e){var t=e.pageContext,n=t.catalogName,i=t.catalogVersion,o=t.catalogVersionUuid,r=e.catalogDescriptor.catalogVersionUuid;this.parentCatalogVersion=this.l10nFilter(n)+" ("+i+")";this.isCurrentPageFromParent=r!==o};ExperienceSelectorButtonComponent.prototype.setPageFromParent.$inject=["data"];ExperienceSelectorButtonComponent.prototype._returnProductCatalogVersionTextByUuids=function(){var e=this;var t=this.experience.productCatalogVersions;return t.reduce((function(t,n){var i=n.catalogName,o=n.catalogVersion;return t+" | "+e.l10nFilter(i)+" ("+o+")"}),"")};ExperienceSelectorButtonComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-experience-selector-button",template:'<fd-popover class="se-experience-selector" [(isOpen)]="status.isOpen" (isOpenChange)="resetExperienceSelector()" [closeOnOutsideClick]="false" [triggers]="[\'click\']" [placement]="\'bottom-end\'"><fd-popover-control><div class="se-experience-selector__control"><se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isCurrentPageFromParent" class="se-experience-selector__tooltip"><span se-tooltip-trigger class="se-experience-selector__btn--globe"><span class="hyicon hyicon-globe se-experience-selector__btn--globe--icon"></span></span><div se-tooltip-body>{{ parentCatalogVersion }}</div></se-tooltip><button class="se-experience-selector__btn" id="experience-selector-btn"><span [attr.title]="buildExperienceText()" class="se-experience-selector__btn-text se-nowrap-ellipsis">{{ buildExperienceText() }} </span><span class="se-experience-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><div class="se-experience-selector__dropdown fd-modal fd-modal__content" role="menu"><se-experience-selector [experience]="experience" [dropdownStatus]="status" [(resetExperienceSelector)]="resetExperienceSelector"></se-experience-selector></div></fd-popover-body></fd-popover>'}),__param(2,i.Inject(i.LOCALE_ID)),__metadata("design:paramtypes",[s.SystemEventService,s.CrossFrameEventService,String,s.ISharedDataService,s.LanguageService])],ExperienceSelectorButtonComponent);return ExperienceSelectorButtonComponent}();window.__smartedit__.addDecoratorPayload("Component","InflectionPointSelectorComponent",{selector:"inflection-point-selector",template:'<div class="se-inflection-point dropdown" [class.open]="isOpen" id="inflectionPtDropdown"><button type="button" class="se-inflection-point__toggle" (click)="toggleDropdown($event)" aria-pressed="false" [attr.aria-expanded]="isOpen"><span [ngClass]="getIconClass()" class="se-inflection-point___selected"></span></button><div class="se-inflection-point-dropdown"><nav class="fd-menu"><ul class="fd-menu__list" role="menu"><li *ngFor="let choice of points" class="fd-menu__item inflection-point__device" [ngClass]="{selected: isSelected(choice)}" id="se-device-{{choice.type}}" (click)="selectPoint(choice)"><span [ngClass]="getIconClass(choice)"></span></li></ul></nav></div></div>'});var We=function(){InflectionPointSelectorComponent.$inject=["systemEventService","iframeManagerService","iframeClickDetectionService","yjQuery"];function InflectionPointSelectorComponent(e,t,n,i){this.systemEventService=e;this.iframeManagerService=t;this.iframeClickDetectionService=n;this.yjQuery=i;this.currentPointSelected=O.find((function(e){return e.default}));this.points=O;this.isOpen=false}InflectionPointSelectorComponent.prototype.ngOnInit=function(){var e=this;this.iframeClickDetectionService.registerCallback("inflectionPointClose",(function(){return e.isOpen=false}));var t=s.windowUtils.getWindow();this.documentClick$=c.fromEvent(t.document,"click").pipe(l.filter((function(t){return e.yjQuery(t.target).parents("inflection-point-selector").length<=0&&e.isOpen}))).subscribe((function(t){return e.isOpen=false}));this.unRegFn=this.systemEventService.subscribe(s.OVERLAY_DISABLED_EVENT,(function(){return e.isOpen=false}))};InflectionPointSelectorComponent.prototype.ngOnDestroy=function(){this.unRegFn();this.documentClick$.unsubscribe()};InflectionPointSelectorComponent.prototype.selectPoint=function(e){this.currentPointSelected=e;this.isOpen=!this.isOpen;if(e!==undefined){this.iframeManagerService.apply(e)}};InflectionPointSelectorComponent.prototype.selectPoint.$inject=["choice"];InflectionPointSelectorComponent.prototype.toggleDropdown=function(e){e.preventDefault();e.stopPropagation();this.isOpen=!this.isOpen};InflectionPointSelectorComponent.prototype.toggleDropdown.$inject=["event"];InflectionPointSelectorComponent.prototype.getIconClass=function(e){if(e!==undefined){return e.iconClass}else{return this.currentPointSelected.iconClass}};InflectionPointSelectorComponent.prototype.getIconClass.$inject=["choice"];InflectionPointSelectorComponent.prototype.isSelected=function(e){if(e!==undefined){return e.type===this.currentPointSelected.type}return false};InflectionPointSelectorComponent.prototype.isSelected.$inject=["choice"];InflectionPointSelectorComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"inflection-point-selector",template:'<div class="se-inflection-point dropdown" [class.open]="isOpen" id="inflectionPtDropdown"><button type="button" class="se-inflection-point__toggle" (click)="toggleDropdown($event)" aria-pressed="false" [attr.aria-expanded]="isOpen"><span [ngClass]="getIconClass()" class="se-inflection-point___selected"></span></button><div class="se-inflection-point-dropdown"><nav class="fd-menu"><ul class="fd-menu__list" role="menu"><li *ngFor="let choice of points" class="fd-menu__item inflection-point__device" [ngClass]="{selected: isSelected(choice)}" id="se-device-{{choice.type}}" (click)="selectPoint(choice)"><span [ngClass]="getIconClass(choice)"></span></li></ul></nav></div></div>'}),__param(2,i.Inject(s.IIframeClickDetectionService)),__param(3,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[s.SystemEventService,R,ye,Function])],InflectionPointSelectorComponent);return InflectionPointSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","ExperienceSelectorComponent",{selector:"se-experience-selector",template:'<se-generic-editor *ngIf="isReady" [smarteditComponentType]="smarteditComponentType" [smarteditComponentId]="smarteditComponentId" [structureApi]="structureApi" [content]="content" [contentApi]="contentApi" (getApi)="getApi($event)"></se-generic-editor>',providers:[s.L10nPipe]});var qe=function(){ExperienceSelectorComponent.$inject=["systemEventService","siteService","sharedDataService","iframeClickDetectionService","iframeManagerService","experienceService","catalogService","l10nPipe"];function ExperienceSelectorComponent(e,t,n,o,r,a,s,c){this.systemEventService=e;this.siteService=t;this.sharedDataService=n;this.iframeClickDetectionService=o;this.iframeManagerService=r;this.experienceService=a;this.catalogService=s;this.l10nPipe=c;this.resetExperienceSelectorChange=new i.EventEmitter;this.modalHeaderTitle="se.experience.selector.header";this.siteCatalogs={}}ExperienceSelectorComponent.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.resetExperienceSelectorChange.emit((function(){return e.resetExperienceSelectorFn()}))}));this.unRegCloseExperienceFn=this.iframeClickDetectionService.registerCallback("closeExperienceSelector",(function(){if(e.dropdownStatus&&e.dropdownStatus.isOpen){e.dropdownStatus.isOpen=false}}));this.unRegFn=this.systemEventService.subscribe("OVERLAY_DISABLED",(function(){if(e.dropdownStatus&&e.dropdownStatus.isOpen){e.dropdownStatus.isOpen=false}}))};ExperienceSelectorComponent.prototype.ngOnDestroy=function(){if(this.unRegFn){this.unRegFn()}if(this.unRegCloseExperienceFn){this.unRegCloseExperienceFn()}};ExperienceSelectorComponent.prototype.preparePayload=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,r,a,c,l,d;var p;return __generator(this,(function(u){switch(u.label){case 0:p=e.previewCatalog.split("|"),this.siteCatalogs.siteId=p[0],this.siteCatalogs.catalogId=p[1],this.siteCatalogs.catalogVersion=p[2];return[4,this.catalogService.getProductCatalogsForSite(this.siteCatalogs.siteId)];case 1:t=u.sent();return[4,this.sharedDataService.get("configuration")];case 2:n=u.sent().domain;return[4,this.siteService.getSiteById(this.siteCatalogs.siteId)];case 3:i=u.sent(),o=i.previewUrl,r=i.uid;a=e.language,c=e.time,l=e.pageId,d=e.productCatalogVersions;this.siteCatalogs.productCatalogs=t;this.siteCatalogs.productCatalogVersions=d;return[2,__assign(__assign({},e),{resourcePath:s.urlUtils.getAbsoluteURL(n,o),catalogVersions:__spreadArrays(this._getProductCatalogsByUuids(d),[{catalog:this.siteCatalogs.catalogId,catalogVersion:this.siteCatalogs.catalogVersion}]),siteId:r,language:a,time:c,pageId:l})]}}))}))};ExperienceSelectorComponent.prototype.preparePayload.$inject=["experienceContent"];ExperienceSelectorComponent.prototype.updateCallback=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,r,a,c,l,d,p,u,m;return __generator(this,(function(g){switch(g.label){case 0:n=this.siteCatalogs,i=n.siteId,o=n.catalogId,r=n.catalogVersion,a=n.productCatalogVersions;c=e.time;l=t.pageId,d=t.language,p=t.ticketId;this.smarteditComponentId=null;this.dropdownStatus.isOpen=false;u=__assign(__assign({},t),{siteId:i,catalogId:o,catalogVersion:r,productCatalogVersions:a,time:s.dateUtils.formatDateAsUtc(c),pageId:l,language:d});return[4,this.experienceService.buildAndSetExperience(u)];case 1:m=g.sent();return[4,this.sharedDataService.set(s.EXPERIENCE_STORAGE_KEY,m)];case 2:g.sent();this.systemEventService.publishAsync(s.EVENTS.EXPERIENCE_UPDATE);this.iframeManagerService.loadPreview(m.siteDescriptor.previewUrl,p);return[2]}}))}))};ExperienceSelectorComponent.prototype.updateCallback.$inject=["payload","response"];ExperienceSelectorComponent.prototype.getApi=function(e){var t=this;e.setPreparePayload(this.preparePayload.bind(this));e.setUpdateCallback(this.updateCallback.bind(this));e.setAlwaysShowSubmit(true);e.setAlwaysShowReset(true);e.setSubmitButtonText("se.componentform.actions.apply");e.setCancelButtonText("se.componentform.actions.cancel");e.setOnReset((function(){t.dropdownStatus.isOpen=false;return t.dropdownStatus.isOpen}))};ExperienceSelectorComponent.prototype.getApi.$inject=["$api"];ExperienceSelectorComponent.prototype._getProductCatalogsByUuids=function(e){return this.siteCatalogs.productCatalogs.map((function(t){var n=t.versions,i=t.catalogId;return{catalogVersion:n.find((function(t){var n=t.uuid;return e.indexOf(n)>-1})).version,catalog:i}}))};ExperienceSelectorComponent.prototype._getProductCatalogsByUuids.$inject=["versionUuids"];ExperienceSelectorComponent.prototype.resetExperienceSelectorFn=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.sharedDataService.get(s.EXPERIENCE_STORAGE_KEY)];case 1:e=i.sent();return[4,this.sharedDataService.get("configuration")];case 2:t=i.sent();this.smarteditComponentType="PreviewData";this.smarteditComponentId=null;this.structureApi=s.TYPES_RESOURCE_URI+"?code=:smarteditComponentType&mode=DEFAULT";this.contentApi=t&&t.previewTicketURI||s.PREVIEW_RESOURCE_URI;return[4,this.l10nPipe.transform(e.siteDescriptor.name).pipe(l.take(1)).toPromise()];case 3:n=i.sent();this.content=__assign(__assign({},e),{activeSite:n,time:e.time,pageId:e.pageId,productCatalogVersions:e.productCatalogVersions.map((function(e){return e.uuid})),language:e.languageDescriptor.isocode,previewCatalog:e.siteDescriptor.uid+"|"+e.catalogDescriptor.catalogId+"|"+e.catalogDescriptor.catalogVersion});if(!this.isReady){this.isReady=true}return[2]}}))}))};__decorate([i.Input(),__metadata("design:type",Object)],ExperienceSelectorComponent.prototype,"experience",void 0);__decorate([i.Input(),__metadata("design:type",Object)],ExperienceSelectorComponent.prototype,"dropdownStatus",void 0);__decorate([i.Input(),__metadata("design:type",Function)],ExperienceSelectorComponent.prototype,"resetExperienceSelector",void 0);__decorate([i.Output(),__metadata("design:type",i.EventEmitter)],ExperienceSelectorComponent.prototype,"resetExperienceSelectorChange",void 0);ExperienceSelectorComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-experience-selector",template:'<se-generic-editor *ngIf="isReady" [smarteditComponentType]="smarteditComponentType" [smarteditComponentId]="smarteditComponentId" [structureApi]="structureApi" [content]="content" [contentApi]="contentApi" (getApi)="getApi($event)"></se-generic-editor>',providers:[s.L10nPipe]}),__metadata("design:paramtypes",[s.SystemEventService,x,s.ISharedDataService,s.IIframeClickDetectionService,R,s.IExperienceService,s.ICatalogService,s.L10nPipe])],ExperienceSelectorComponent);return ExperienceSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","ShortcutLinkComponent",{selector:"shortcut-link",template:'<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class="se-shortcut-link"><a class="se-shortcut-link__item" [ngClass]="{\'se-shortcut-link__item--active\': shortcutLink.active}" (click)="onClick(shortcutLink)">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>'});var Ke=function(){ShortcutLinkComponent.$inject=["router","location","resolver","experienceService","priorityService","systemEventService"];function ShortcutLinkComponent(e,t,n,i,o,r){this.router=e;this.location=t;this.resolver=n;this.experienceService=i;this.priorityService=o;this.systemEventService=r}ShortcutLinkComponent.prototype.ngOnInit=function(){var e=this;this.unregFn=this.systemEventService.subscribe(s.EVENTS.EXPERIENCE_UPDATE,(function(){return e._createShortcutLink()}))};ShortcutLinkComponent.prototype.ngOnDestroy=function(){this.unregFn()};ShortcutLinkComponent.prototype.ngAfterViewInit=function(){this._createShortcutLink()};ShortcutLinkComponent.prototype.onClick=function(e){this.location.go(e.fullPath);this.router.navigateByUrl(e.fullPath)};ShortcutLinkComponent.prototype.onClick.$inject=["shortcutLink"];ShortcutLinkComponent.prototype._createShortcutLink=function(){var e=this;var t=this.experienceService.getCurrentExperience();t.then((function(t){var n=e._getShortcutLinks(t);var i=e._orderByPriority(n);e._createShortcutLinkDynamicComponents(i)}))};ShortcutLinkComponent.prototype._createShortcutLinkDynamicComponents=function(e){var t=this;this.containerEntry.clear();e.forEach((function(e){if(e&&e.titleI18nKey){t.containerEntry.createEmbeddedView(t.defaultTemplate,{$implicit:e})}else if(e&&e.shortcutComponent){var n=t.resolver.resolveComponentFactory(e.shortcutComponent);var i=t.containerEntry.createComponent(n);i.instance.shortcutLink=e}}))};ShortcutLinkComponent.prototype._createShortcutLinkDynamicComponents.$inject=["shortcutLinks"];ShortcutLinkComponent.prototype._getShortcutLinks=function(e){var t=this.location.path();return s.SeRouteService.routeShortcutConfigs.map((function(n){var i;var o=n.fullPath.replace(":siteId",e.catalogDescriptor.siteId).replace(":catalogId",e.catalogDescriptor.catalogId).replace(":catalogVersion",e.catalogDescriptor.catalogVersion);if(o.startsWith("/")){i=o===t}else{i="/"+o===t}var r=__assign({},n);r.fullPath=o;r.active=i;return r}))};ShortcutLinkComponent.prototype._getShortcutLinks.$inject=["experience"];ShortcutLinkComponent.prototype._orderByPriority=function(e){e.forEach((function(e){return e.priority=e.priority||500}));return this.priorityService.sort(e)};ShortcutLinkComponent.prototype._orderByPriority.$inject=["shortcutLinks"];__decorate([i.ViewChild("container",{read:i.ViewContainerRef,static:false}),__metadata("design:type",i.ViewContainerRef)],ShortcutLinkComponent.prototype,"containerEntry",void 0);__decorate([i.ViewChild("defaultTemplate",{read:i.TemplateRef,static:false}),__metadata("design:type",i.TemplateRef)],ShortcutLinkComponent.prototype,"defaultTemplate",void 0);ShortcutLinkComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"shortcut-link",template:'<ng-container #container><ng-template #defaultTemplate let-shortcutLink><div class="se-shortcut-link"><a class="se-shortcut-link__item" [ngClass]="{\'se-shortcut-link__item--active\': shortcutLink.active}" (click)="onClick(shortcutLink)">{{shortcutLink.titleI18nKey | translate}}</a></div></ng-template></ng-container>'}),__metadata("design:paramtypes",[p.Router,d.Location,i.ComponentFactoryResolver,s.IExperienceService,s.PriorityService,s.SystemEventService])],ShortcutLinkComponent);return ShortcutLinkComponent}();window.__smartedit__.addDecoratorPayload("Component","UserAccountComponent",{selector:"se-user-account",template:'<div class="se-user-account-dropdown"><div class="se-user-account-dropdown__role">{{ \'se.toolbar.useraccount.role\' | translate }}</div><div class="user-account-dropdown__name">{{username}}</div><div class="divider"></div><a class="se-sign-out__link fd-menu__item" (click)="signOut()">{{\'se.toolbar.useraccount.signout\' | translate}}</a></div>'});var Ye=function(){UserAccountComponent.$inject=["authenticationService","iframeManagerService","crossFrameEventService","sessionService"];function UserAccountComponent(e,t,n,i){this.authenticationService=e;this.iframeManagerService=t;this.crossFrameEventService=n;this.sessionService=i}UserAccountComponent.prototype.ngOnInit=function(){var e=this;this.unregUserChanged=this.crossFrameEventService.subscribe(s.EVENTS.USER_HAS_CHANGED,(function(){return e.getUsername()}));this.getUsername()};UserAccountComponent.prototype.ngOnDestroy=function(){this.unregUserChanged()};UserAccountComponent.prototype.signOut=function(){this.authenticationService.logout();this.iframeManagerService.setCurrentLocation(null)};UserAccountComponent.prototype.getUsername=function(){var e=this;this.sessionService.getCurrentUserDisplayName().then((function(t){e.username=t}))};UserAccountComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-user-account",template:'<div class="se-user-account-dropdown"><div class="se-user-account-dropdown__role">{{ \'se.toolbar.useraccount.role\' | translate }}</div><div class="user-account-dropdown__name">{{username}}</div><div class="divider"></div><a class="se-sign-out__link fd-menu__item" (click)="signOut()">{{\'se.toolbar.useraccount.signout\' | translate}}</a></div>'}),__metadata("design:paramtypes",[s.IAuthenticationService,R,s.CrossFrameEventService,s.ISessionService])],UserAccountComponent);return UserAccountComponent}();window.__smartedit__.addDecoratorPayload("Component","ExperienceSelectorWrapperComponent",{selector:"se-experience-selector-wrapper",template:'\n        <se-experience-selector-button\n            *ngIf="toolbar.isOnStorefront()"\n        ></se-experience-selector-button>\n    '});var Xe=function(){function ExperienceSelectorWrapperComponent(e){this.toolbar=e}ExperienceSelectorWrapperComponent=__decorate([i.Component({selector:"se-experience-selector-wrapper",template:'\n        <se-experience-selector-button\n            *ngIf="toolbar.isOnStorefront()"\n        ></se-experience-selector-button>\n    '}),__param(0,i.Inject(i.forwardRef((function(){return Ve})))),__metadata("design:paramtypes",[Ve])],ExperienceSelectorWrapperComponent);return ExperienceSelectorWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","LogoComponent",{selector:"se-logo",template:'\n        <div class="se-app-logo">\n            <img src="static-resources/images/SAP_scrn_R.png" class="se-logo-image" />\n            <div class="se-logo-text">{{ \'se.application.name\' | translate }}</div>\n        </div>\n    '});var Ze=function(){function LogoComponent(){}LogoComponent=__decorate([i.Component({selector:"se-logo",template:'\n        <div class="se-app-logo">\n            <img src="static-resources/images/SAP_scrn_R.png" class="se-logo-image" />\n            <div class="se-logo-text">{{ \'se.application.name\' | translate }}</div>\n        </div>\n    '})],LogoComponent);return LogoComponent}();var Qe=function(){function TopToolbarsModule(){}TopToolbarsModule=__decorate([i.NgModule({schemas:[i.CUSTOM_ELEMENTS_SCHEMA],imports:[m.PopoverModule,d.CommonModule,s.SeGenericEditorModule,u.TranslateModule.forChild(),s.TooltipModule],declarations:[s.HeaderLanguageDropdownComponent,Ke,Ye,We,Ge,qe,He,Xe,Ze],entryComponents:[s.HeaderLanguageDropdownComponent,Ye,Ke,We,Ge,qe,He,Xe,Ze],exports:[s.HeaderLanguageDropdownComponent,Ye,Ke,We,Ge,qe,He,Xe,Ze]})],TopToolbarsModule);return TopToolbarsModule}();var Je=function(){function ToolbarModule(){}ToolbarModule=__decorate([i.NgModule({imports:[Qe,d.CommonModule,u.TranslateModule.forChild(),s.CompileHtmlModule,s.PropertyPipeModule,s.ResizeObserverModule,m.PopoverModule,s.ClickOutsideModule,s.PreventVerticalOverflowModule],providers:[{provide:s.IToolbarServiceFactory,useClass:Le}],declarations:[$e,Ue,Ve,je,Be],entryComponents:[$e,Ue,Ve,je,Be],exports:[$e,Ue,Ve,je,Be]})],ToolbarModule);return ToolbarModule}();window.__smartedit__.addDecoratorPayload("Component","AnnouncementBoardComponent",{selector:"se-announcement-board",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="(announcements$ | async) as announcements"><div class="se-announcement-board"><se-announcement *ngFor="\n                let announcement of (announcements | seReverse);\n                trackBy: annnouncementTrackBy;\n                let i = index\n            " id="se-announcement-{{ i }}" [announcement]="announcement"></se-announcement></div></ng-container>'});var et=function(){function AnnouncementBoardComponent(e){this.announcementService=e}AnnouncementBoardComponent.prototype.ngOnInit=function(){this.announcements$=this.announcementService.getAnnouncements()};AnnouncementBoardComponent.prototype.annnouncementTrackBy=function(e,t){return t.id};AnnouncementBoardComponent=__decorate([i.Component({selector:"se-announcement-board",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="(announcements$ | async) as announcements"><div class="se-announcement-board"><se-announcement *ngFor="\n                let announcement of (announcements | seReverse);\n                trackBy: annnouncementTrackBy;\n                let i = index\n            " id="se-announcement-{{ i }}" [announcement]="announcement"></se-announcement></div></ng-container>'}),__param(0,i.Inject(s.IAnnouncementService)),__metadata("design:paramtypes",[E])],AnnouncementBoardComponent);return AnnouncementBoardComponent}();window.__smartedit__.addDecoratorPayload("Component","AnnouncementComponent",{selector:"se-announcement",changeDetection:i.ChangeDetectionStrategy.OnPush,animations:[y.trigger("fadeAnimation",[y.transition(":enter",[y.style({opacity:0,transform:"rotateY(90deg)"}),y.animate("0.5s"),y.style({opacity:1,transform:"translateX(0px)"})]),y.transition(":leave",[y.animate("0.25s"),y.style({opacity:"0",transform:"translateX(100%)"})])])],template:'<div class="se-announcement-content"><span *ngIf="isCloseable()" class="sap-icon--decline se-announcement-close" (click)="closeAnnouncement()"></span><ng-container *ngIf="!isLegacyAngularJS; else legacyAngularJS"><div *ngIf="hasMessage()"><h4 *ngIf="hasMessageTitle()">{{ announcement.messageTitle | translate }}</h4><span>{{ announcement.message | translate }}</span></div><ng-container *ngIf="hasComponent()"><ng-container *ngComponentOutlet="announcement.component; injector: announcementInjector"></ng-container></ng-container></ng-container><ng-template #legacyAngularJS><div *ngIf="hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template" [compileHtmlNgController]="legacyCompileHtmlNgController"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl" [compileHtmlNgController]="legacyCompileHtmlNgController"></div></div><div *ngIf="!hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl"></div></div></ng-template></div>'});var tt=function(){function AnnouncementComponent(e,t){this.announcementService=e;this.injector=t}Object.defineProperty(AnnouncementComponent.prototype,"fadeAnimation",{get:function(){return true},enumerable:false,configurable:true});AnnouncementComponent.prototype.ngOnChanges=function(){this.isLegacyAngularJS=typeof this.announcement.template!=="undefined"||typeof this.announcement.templateUrl!=="undefined";this.legacyCompileHtmlNgController=this.hasController()?{alias:"$announcementCtrl",value:this.announcement.controller}:undefined;if(!this.isLegacyAngularJS){this.createAnnouncementInjector()}};AnnouncementComponent.prototype.hasTemplate=function(){return this.announcement.hasOwnProperty("template")};AnnouncementComponent.prototype.hasTemplateUrl=function(){return this.announcement.hasOwnProperty("templateUrl")};AnnouncementComponent.prototype.hasComponent=function(){return this.announcement.hasOwnProperty("component")};AnnouncementComponent.prototype.hasMessage=function(){return this.announcement.hasOwnProperty("message")};AnnouncementComponent.prototype.hasMessageTitle=function(){return this.announcement.hasOwnProperty("messageTitle")};AnnouncementComponent.prototype.isCloseable=function(){return this.announcement.hasOwnProperty("closeable")?this.announcement.closeable:w.closeable};AnnouncementComponent.prototype.closeAnnouncement=function(){this.announcementService.closeAnnouncement(this.announcement.id)};AnnouncementComponent.prototype.hasController=function(){return this.announcement.hasOwnProperty("controller")};AnnouncementComponent.prototype.createAnnouncementInjector=function(){this.announcementInjector=i.Injector.create({parent:this.injector,providers:[{provide:s.ANNOUNCEMENT_DATA,useValue:__assign({id:this.announcement.id},this.announcement.data)}]})};__decorate([i.Input(),__metadata("design:type",Object)],AnnouncementComponent.prototype,"announcement",void 0);__decorate([i.HostBinding("@fadeAnimation"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],AnnouncementComponent.prototype,"fadeAnimation",null);AnnouncementComponent=__decorate([i.Component({selector:"se-announcement",changeDetection:i.ChangeDetectionStrategy.OnPush,animations:[y.trigger("fadeAnimation",[y.transition(":enter",[y.style({opacity:0,transform:"rotateY(90deg)"}),y.animate("0.5s"),y.style({opacity:1,transform:"translateX(0px)"})]),y.transition(":leave",[y.animate("0.25s"),y.style({opacity:"0",transform:"translateX(100%)"})])])],template:'<div class="se-announcement-content"><span *ngIf="isCloseable()" class="sap-icon--decline se-announcement-close" (click)="closeAnnouncement()"></span><ng-container *ngIf="!isLegacyAngularJS; else legacyAngularJS"><div *ngIf="hasMessage()"><h4 *ngIf="hasMessageTitle()">{{ announcement.messageTitle | translate }}</h4><span>{{ announcement.message | translate }}</span></div><ng-container *ngIf="hasComponent()"><ng-container *ngComponentOutlet="announcement.component; injector: announcementInjector"></ng-container></ng-container></ng-container><ng-template #legacyAngularJS><div *ngIf="hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template" [compileHtmlNgController]="legacyCompileHtmlNgController"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl" [compileHtmlNgController]="legacyCompileHtmlNgController"></div></div><div *ngIf="!hasController()"><div *ngIf="hasTemplate()" [seCompileHtml]="announcement.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="announcement.templateUrl"></div></div></ng-template></div>'}),__metadata("design:paramtypes",[s.IAnnouncementService,i.Injector])],AnnouncementComponent);return AnnouncementComponent}();window.__smartedit__.addDecoratorPayload("Component","HotkeyNotificationComponent",{selector:"se-hotkey-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<div class="se-notification__hotkey"><div *ngFor="let key of hotkeyNames; let last = last"><div class="se-notification__hotkey--key"><span>{{ key }}</span></div><span *ngIf="!last" class="se-notification__hotkey__icon--add">+</span></div><div class="se-notification__hotkey--text"><div class="se-notification__hotkey--title">{{ title }}</div><div class="se-notification__hotkey--message">{{ message }}</div></div></div>'});var nt=function(){function HotkeyNotificationComponent(){}__decorate([i.Input(),__metadata("design:type",Array)],HotkeyNotificationComponent.prototype,"hotkeyNames",void 0);__decorate([i.Input(),__metadata("design:type",String)],HotkeyNotificationComponent.prototype,"title",void 0);__decorate([i.Input(),__metadata("design:type",String)],HotkeyNotificationComponent.prototype,"message",void 0);HotkeyNotificationComponent=__decorate([i.Component({selector:"se-hotkey-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<div class="se-notification__hotkey"><div *ngFor="let key of hotkeyNames; let last = last"><div class="se-notification__hotkey--key"><span>{{ key }}</span></div><span *ngIf="!last" class="se-notification__hotkey__icon--add">+</span></div><div class="se-notification__hotkey--text"><div class="se-notification__hotkey--title">{{ title }}</div><div class="se-notification__hotkey--message">{{ message }}</div></div></div>'})],HotkeyNotificationComponent);return HotkeyNotificationComponent}();window.__smartedit__.addDecoratorPayload("Component","PerspectiveSelectorHotkeyNotificationComponent",{selector:"se-perspective-selector-hotkey-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:"<se-hotkey-notification [hotkeyNames]=\"['esc']\" [title]=\"'se.application.status.hotkey.title' | translate\" [message]=\"'se.application.status.hotkey.message' | translate\"></se-hotkey-notification>"});var it=function(){function PerspectiveSelectorHotkeyNotificationComponent(){}PerspectiveSelectorHotkeyNotificationComponent=__decorate([s.SeCustomComponent(),i.Component({selector:"se-perspective-selector-hotkey-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:"<se-hotkey-notification [hotkeyNames]=\"['esc']\" [title]=\"'se.application.status.hotkey.title' | translate\" [message]=\"'se.application.status.hotkey.message' | translate\"></se-hotkey-notification>"})],PerspectiveSelectorHotkeyNotificationComponent);return PerspectiveSelectorHotkeyNotificationComponent}();var ot=function(){function HotkeyNotificationModule(){}HotkeyNotificationModule=__decorate([i.NgModule({imports:[d.CommonModule,s.TranslationModule.forChild()],declarations:[nt,it],entryComponents:[nt,it]})],HotkeyNotificationModule);return HotkeyNotificationModule}();window.__smartedit__.addDecoratorPayload("Component","InvalidRouteComponent",{selector:"empty",template:"<div>This page doesn't exist</div>"});var rt=function(){function InvalidRouteComponent(){}InvalidRouteComponent=__decorate([i.Component({selector:"empty",template:"<div>This page doesn't exist</div>"})],InvalidRouteComponent);return InvalidRouteComponent}();function deprecatedSince1811(){r.module("permissionServiceModule",["legacySmarteditServicesModule"]);r.module("iFrameManagerModule",["legacySmarteditServicesModule"]).service("iFrameManager",["iframeManagerService","waitDialogService",function(e,t){e.showWaitModal=function(e){t.showWaitModal(e)};e.hideWaitModal=function(){t.hideWaitModal()};return e}]);r.module("catalogVersionPermissionRestServiceModule",["legacySmarteditServicesModule"]);r.module("catalogVersionDetailsModule",["catalogDetailsModule"]);r.module("catalogVersionsThumbnailCarouselModule",["catalogDetailsModule"]);r.module("homePageLinkModule",["catalogDetailsModule"])}function deprecatedSince1905(){r.module("heartBeatServiceModule",["legacySmarteditServicesModule"]);r.module("alertCollectionModule",["legacySmarteditCommonsModule"]);r.module("alertCollectionFacadesModule",["legacySmarteditCommonsModule"]);r.module("alertFactoryModule",["legacySmarteditCommonsModule"]);r.module("renderServiceModule",["legacySmarteditServicesModule"]);r.module("alertServiceModule",["legacySmarteditCommonsModule"])}function deprecatedSince1911(){r.module("perspectiveSelectorModule",["smarteditServicesModule"])}function deprecatedSince2005(){r.module("confirmationModalServiceModule",["legacySmarteditServicesModule"]);r.module("smarteditServicesModule",["legacySmarteditServicesModule"]);r.module("pageSensitiveDirectiveModule",["legacySmarteditcontainer"]);r.module("yCollapsibleContainerModule",["legacySmarteditcontainer"]);r.module("inflectionPointSelectorModule",["legacySmarteditcontainer"]);r.module("toolbarModule",["legacySmarteditServicesModule"]);r.module("filterByFieldFilterModule",["legacySmarteditServicesModule"]);r.module("resizeComponentServiceModule",["legacySmartedit"]);r.module("systemAlertsModule",["legacySmarteditcontainer"]);r.module("alertsBoxModule",[]);r.module("catalogVersionPermissionModule",["legacySmarteditServicesModule"]);r.module("previewDataDropdownPopulatorModule",["legacySmarteditServicesModule"]);r.module("catalogDetailsModule",["legacyCatalogDetailsModule"])}var deprecate=function(){deprecatedSince1811();deprecatedSince1905();deprecatedSince1911();deprecatedSince2005()};var at=function(){function LegacyCatalogDetailsComponent(){}LegacyCatalogDetailsComponent=__decorate([s.SeComponent({selector:"catalog-details",template:'\n        <se-catalog-details [catalog]="$ctrl.catalog" [is-catalog-for-current-site]="$ctrl.isCatalogForCurrentSite"></se-catalog-details>\n    ',inputs:["catalog","isCatalogForCurrentSite"]})],LegacyCatalogDetailsComponent);return LegacyCatalogDetailsComponent}();var st=function(){function LegacyCatalogVersionDetailsComponent(){}LegacyCatalogVersionDetailsComponent=__decorate([s.SeComponent({selector:"catalog-version-details",template:'\n        <se-catalog-version-details \n            [catalog]="$ctrl.catalog" \n            [site-id]="$ctrl.siteId" \n            [catalog-version]="$ctrl.catalogVersion" \n            [active-catalog-version]="$ctrl.activeCatalogVersion">\n        </se-catalog-version-details>\n    ',inputs:["catalog","catalogVersion","activeCatalogVersion","siteId"]})],LegacyCatalogVersionDetailsComponent);return LegacyCatalogVersionDetailsComponent}();var ct=function(){function LegacyHomePageLinkComponent(){}LegacyHomePageLinkComponent=__decorate([s.SeComponent({selector:"home-page-link",template:'\n        <se-home-page-link \n            [catalog]="$ctrl.catalog" \n            [catalog-version]="$ctrl.catalogVersion" \n            [site-id]="$ctrl.siteId"> \n        </se-home-page-link>\n    ',inputs:["catalog","catalogVersion","siteId"]})],LegacyHomePageLinkComponent);return LegacyHomePageLinkComponent}();var lt=function(){function LegacyCatalogDetailsModule(){}LegacyCatalogDetailsModule=__decorate([s.SeModule({declarations:[at,ct,st]})],LegacyCatalogDetailsModule);return LegacyCatalogDetailsModule}();var dt=function(){LegacyClientPagedListComponent.$inject=["$scope","$filter"];function LegacyClientPagedListComponent(e,t){var n=this;this.$scope=e;this.$filter=t;this.currentPage=1;this.filterCallback=function(e){n.totalItems=e.length};this.getFilterKeys=function(){return n.itemFilterKeys||[]};this.orderByColumn=function(e){n.columnToggleReversed=!n.columnToggleReversed;n.headersSortingState[e]=n.columnToggleReversed;n.visibleSortingHeader=e;n.items=n.$filter("orderBy")(n.items,e,n.columnToggleReversed)}}LegacyClientPagedListComponent.prototype.$onInit=function(){var e;var t=this;this.totalItems=0;this.columnWidth=100/(this.keys.length||1);this.columnToggleReversed=this.reversed;this.headersSortingState=(e={},e[this.sortBy]=this.reversed,e);this.visibleSortingHeader=this.sortBy;var n=this.$scope.$watch("sortBy",(function(){t.items=t.$filter("orderBy")(t.items,t.sortBy,t.columnToggleReversed);if(t.sortBy){n()}}));this.$scope.$watch("items",(function(){t.totalItems=t.items.length}))};LegacyClientPagedListComponent=__decorate([s.SeComponent({selector:"client-paged-list",templateUrl:"LegacyClientPagedListComponentTemplate.html",inputs:["items:=","itemsPerPage:=","totalItems:=?","keys:=","renderers:=","injectedContext:=","identifier:=","sortBy:=","reversed:=","query:=","displayCount:=","dropdownItems:=","selectedItem:=","itemFilterKeys:?"]}),__metadata("design:paramtypes",[Object,Function])],LegacyClientPagedListComponent);return LegacyClientPagedListComponent}();var pt=function(){function ClientPagedListModule(){}ClientPagedListModule=__decorate([s.SeModule({imports:["pascalprecht.translate","ui.bootstrap",s.LegacySmarteditCommonsModule,Me],declarations:[dt]})],ClientPagedListModule);return ClientPagedListModule}();deprecate();var ut=n(941);var mt=n(550);var gt="smarteditcontainer";var ht=function(){function Smarteditcontainer(){}Smarteditcontainer=__decorate([s.SeModule({declarations:[s.PageSensitiveDirective,s.YCollapsibleContainerComponent],imports:[Me,lt,s.TemplateCacheDecoratorModule,ut,mt,"coretemplates","modalServiceModule",pt,"paginationFilterModule","resourceLocationsModule",s.TreeModule,"ySelectModule",s.YHelpModule,K,"seConstantsModule",s.GenericEditorModule,"recompileDomModule","ngHrefDirectiveModule"],providers:[],config:["$provide","readObjectStructureFactory","LANDING_PAGE_PATH","STORE_FRONT_CONTEXT","$routeProvider","$logProvider",function(e,t,n,i,o,r){"ngInject";e.decorator("ngHrefDirective",["$delegate",function(e){e.shift();return e}]);s.instrument(e,t(),gt);s.SeRouteService.init(o);s.SeRouteService.provideLegacyRoute({path:n,route:{redirectTo:s.NG_ROUTE_PREFIX}});s.SeRouteService.provideLegacyRoute({path:n+"sites/:siteId",route:{redirectTo:s.NG_ROUTE_PREFIX+"/sites/:siteId"}});s.SeRouteService.provideLegacyRoute({path:i,route:{redirectTo:""+s.NG_ROUTE_PREFIX+i}});r.debugEnabled(false)}]})],Smarteditcontainer);return Smarteditcontainer}();var vt="legacyApp";window.__smartedit__.addDecoratorPayload("Component","SmarteditcontainerComponent",{selector:s.SMARTEDITCONTAINER_COMPONENT_NAME,template:'\n        <router-outlet></router-outlet>\n        <div ng-attr-id="'+vt+'">\n            <se-announcement-board></se-announcement-board>\n            <se-notification-panel></se-notification-panel>\n            <div ng-view></div>\n        </div>\n    '});var ft=function(){function SmarteditcontainerComponent(e,t,n,i,o){this.translateService=e;this.upgrade=n;this.elementRef=i;this.bootstrapIndicator=o;this.legacyAppName=vt;this.legacyAppName=vt;this.setApplicationTitle();s.registerCustomComponents(t)}SmarteditcontainerComponent.prototype.ngOnInit=function(){var e=this;Array.prototype.slice.call(document.body.childNodes).filter((function(t){return!e.isAppComponent(t)&&!e.isSmarteditLoader(t)})).forEach((function(t){e.legacyAppNode.appendChild(t)}))};SmarteditcontainerComponent.prototype.ngAfterViewInit=function(){this.upgrade.bootstrap(this.legacyAppNode,[ht.moduleName],{strictDi:false});this.bootstrapIndicator.setSmarteditContainerReady()};SmarteditcontainerComponent.prototype.setApplicationTitle=function(){this.translateService.get("se.application.name").subscribe((function(e){document.title=e}))};Object.defineProperty(SmarteditcontainerComponent.prototype,"legacyAppNode",{get:function(){return this.elementRef.nativeElement.querySelector('div[ng-attr-id="'+this.legacyAppName+'"]')},enumerable:false,configurable:true});SmarteditcontainerComponent.prototype.isAppComponent=function(e){return e.nodeType===Node.ELEMENT_NODE&&e.tagName===s.SMARTEDITCONTAINER_COMPONENT_NAME.toUpperCase()};SmarteditcontainerComponent.prototype.isSmarteditLoader=function(e){return e.nodeType===Node.ELEMENT_NODE&&(e.id==="smarteditloader"||e.tagName===s.SMARTEDITLOADER_COMPONENT_NAME.toUpperCase())};SmarteditcontainerComponent=__decorate([i.Component({selector:s.SMARTEDITCONTAINER_COMPONENT_NAME,template:'\n        <router-outlet></router-outlet>\n        <div ng-attr-id="'+vt+'">\n            <se-announcement-board></se-announcement-board>\n            <se-notification-panel></se-notification-panel>\n            <div ng-view></div>\n        </div>\n    '}),__metadata("design:paramtypes",[u.TranslateService,i.Injector,_.UpgradeModule,i.ElementRef,s.AngularJSBootstrapIndicatorService])],SmarteditcontainerComponent);return SmarteditcontainerComponent}();window.__smartedit__.addDecoratorPayload("Component","NotificationComponent",{selector:"se-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<div class="se-notification" id="{{ id }}" *ngIf="notification"><div *ngIf="hasTemplate()" [seCompileHtml]="notification.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="notification.templateUrl"></div><div *ngIf="hasComponent()" [seCustomComponentOutlet]="notification.componentName"></div></div>'});var _t=function(){function NotificationComponent(){}NotificationComponent.prototype.ngOnInit=function(){this.id=this.notification&&this.notification.id?"se-notification-"+this.notification.id:""};NotificationComponent.prototype.hasTemplate=function(){return this.notification.hasOwnProperty("template")};NotificationComponent.prototype.hasTemplateUrl=function(){return this.notification.hasOwnProperty("templateUrl")};NotificationComponent.prototype.hasComponent=function(){return!!this.notification.componentName};__decorate([i.Input(),__metadata("design:type",Object)],NotificationComponent.prototype,"notification",void 0);NotificationComponent=__decorate([i.Component({selector:"se-notification",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<div class="se-notification" id="{{ id }}" *ngIf="notification"><div *ngIf="hasTemplate()" [seCompileHtml]="notification.template"></div><div *ngIf="hasTemplateUrl()" [ngInclude]="notification.templateUrl"></div><div *ngIf="hasComponent()" [seCustomComponentOutlet]="notification.componentName"></div></div>'})],NotificationComponent);return NotificationComponent}();window.__smartedit__.addDecoratorPayload("Component","NotificationPanelComponent",{selector:"se-notification-panel",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="(notifications$ | async) as notifications"><div class="se-notification-panel" *ngIf="notifications.length > 0" [ngClass]="{\'is-mouseover\': isMouseOver}" (mouseenter)="onMouseEnter()"><div><se-notification *ngFor="let notification of (notifications | seReverse)" [notification]="notification"></se-notification></div></div></ng-container>'});var yt=function(){function NotificationPanelComponent(e,t,n,i,o,r,a,s){this.notificationService=e;this.notificationMouseLeaveDetectionService=t;this.systemEventService=n;this.iframeManagerService=i;this.windowUtils=o;this.element=r;this.yjQuery=a;this.cd=s;this.notificationPanelBounds=null;this.iFrameNotificationPanelBounds=null;this.addMouseMoveEventListenerTimeout=null}NotificationPanelComponent.prototype.ngOnInit=function(){var e=this;this.notifications$=this.notificationService.getNotifications();this.isMouseOver=false;this.windowUtils.getWindow().addEventListener("resize",(function(){return e.onResize()}));this.unRegisterNotificationChangedEventHandler=this.systemEventService.subscribe(s.EVENT_NOTIFICATION_CHANGED,(function(){return e.onNotificationChanged()}))};NotificationPanelComponent.prototype.ngAfterViewInit=function(){this.$element=this.yjQuery(this.element.nativeElement)};NotificationPanelComponent.prototype.ngOnDestroy=function(){var e=this;this.windowUtils.getWindow().removeEventListener("resize",(function(){return e.onResize()}));this.notificationMouseLeaveDetectionService.stopDetection();this.unRegisterNotificationChangedEventHandler()};NotificationPanelComponent.prototype.onMouseEnter=function(){var e=this;this.isMouseOver=true;this.cd.detectChanges();if(!this.hasBounds()){this.calculateBounds()}this.addMouseMoveEventListenerTimeout=this.addMouseMoveEventListenerTimeout||setTimeout((function(){return e.addMouseMoveEventListener()}),10)};NotificationPanelComponent.prototype.onMouseLeave=function(){this.isMouseOver=false;this.cd.detectChanges()};NotificationPanelComponent.prototype.getIFrame=function(){return this.iframeManagerService.getIframe()[0]};NotificationPanelComponent.prototype.getNotificationPanel=function(){return this.$element.find(".se-notification-panel")};NotificationPanelComponent.prototype.calculateNotificationPanelBounds=function(){var e=this.getNotificationPanel();var t=e.position();this.notificationPanelBounds={x:Math.floor(t.left),y:Math.floor(t.top),width:Math.floor(e.width()),height:Math.floor(e.height())}};NotificationPanelComponent.prototype.calculateIFrameNotificationPanelBounds=function(){var e=this.getIFrame();if(e){this.iFrameNotificationPanelBounds={x:this.notificationPanelBounds.x-e.offsetLeft,y:this.notificationPanelBounds.y-e.offsetTop,width:this.notificationPanelBounds.width,height:this.notificationPanelBounds.height}}};NotificationPanelComponent.prototype.calculateBounds=function(){this.calculateNotificationPanelBounds();this.calculateIFrameNotificationPanelBounds()};NotificationPanelComponent.prototype.invalidateBounds=function(){this.notificationPanelBounds=null;this.iFrameNotificationPanelBounds=null};NotificationPanelComponent.prototype.hasBounds=function(){var e=!!this.notificationPanelBounds;var t=this.getIFrame()?!!this.iFrameNotificationPanelBounds:true;return e&&t};NotificationPanelComponent.prototype.cancelDetection=function(){this.invalidateBounds();this.notificationMouseLeaveDetectionService.stopDetection();if(this.isMouseOver){this.onMouseLeave()}};NotificationPanelComponent.prototype.onResize=function(){this.cancelDetection()};NotificationPanelComponent.prototype.onNotificationChanged=function(){if(!this.isMouseOver){this.cancelDetection()}};NotificationPanelComponent.prototype.addMouseMoveEventListener=function(){var e=this;this.addMouseMoveEventListenerTimeout=null;this.notificationMouseLeaveDetectionService.startDetection(this.notificationPanelBounds,this.iFrameNotificationPanelBounds,(function(){return e.onMouseLeave()}))};NotificationPanelComponent=__decorate([i.Component({selector:"se-notification-panel",changeDetection:i.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="(notifications$ | async) as notifications"><div class="se-notification-panel" *ngIf="notifications.length > 0" [ngClass]="{\'is-mouseover\': isMouseOver}" (mouseenter)="onMouseEnter()"><div><se-notification *ngFor="let notification of (notifications | seReverse)" [notification]="notification"></se-notification></div></div></ng-container>'}),__param(0,i.Inject(s.INotificationService)),__param(1,i.Inject(s.INotificationMouseLeaveDetectionService)),__param(6,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[P,T,s.SystemEventService,R,s.WindowUtils,i.ElementRef,Function,i.ChangeDetectorRef])],NotificationPanelComponent);return NotificationPanelComponent}();var Ct=function(){function NotificationPanelModule(){}NotificationPanelModule=__decorate([i.NgModule({imports:[ke,s.SharedComponentsModule,d.CommonModule,s.CustomComponentOutletDirectiveModule],declarations:[yt,_t],exports:[yt]})],NotificationPanelModule);return NotificationPanelModule}();var St="sites-id";window.__smartedit__.addDecoratorPayload("Component","LandingPageComponent",{selector:"se-landing-page",template:'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar></div><div class="se-landing-page"><div class="se-landing-page-actions"><div class="se-landing-page-container"><h1 class="se-landing-page-title">{{ \'se.landingpage.title\' | translate }}</h1><div class="se-landing-page-site-selection" *ngIf="model"><se-generic-editor-dropdown [field]="field" [qualifier]="qualifier" [model]="model" [id]="sitesId"></se-generic-editor-dropdown></div><p class="se-landing-page-label">{{ \'se.landingpage.label\' | translate }}</p></div></div><p class="se-landing-page-container se-landing-page-sub-header">Content Catalogs</p><div class="se-landing-page-container se-landing-page-catalogs"><div class="se-landing-page-catalog" *ngFor="let catalog of catalogs; let isLast = last"><se-catalog-details [catalog]="catalog" [siteId]="model.site" [isCatalogForCurrentSite]="isLast"></se-catalog-details></div></div><img src="static-resources/images/best-run-sap-logo.svg" class="se-landing-page-footer-logo"/></div>'});var bt=function(){LandingPageComponent.$inject=["siteService","catalogService","systemEventService","storageService","alertService","route","location","yjQuery"];function LandingPageComponent(e,t,n,i,o,r,a,s){this.siteService=e;this.catalogService=t;this.systemEventService=n;this.storageService=i;this.alertService=o;this.route=r;this.location=a;this.yjQuery=s;this.sitesId=St;this.qualifier="site";this.catalogs=[];this.SELECTED_SITE_COOKIE_NAME="seselectedsite"}LandingPageComponent.prototype.ngOnInit=function(){var e=this;this.route.paramMap.subscribe((function(t){e.getCurrentSiteId(t.get("siteId")).then((function(t){e.setModel(t)}))}));this.siteService.getAccessibleSites().then((function(t){e.field={idAttribute:"uid",labelAttributes:["name"],editable:true,paged:false,options:t}}));this.removeStorefrontCssClass();this.unregisterSitesDropdownEventHandler=this.systemEventService.subscribe(this.sitesId+s.LINKED_DROPDOWN,this.selectedSiteDropdownEventHandler.bind(this))};LandingPageComponent.prototype.ngOnDestroy=function(){this.unregisterSitesDropdownEventHandler()};LandingPageComponent.prototype.getCurrentSiteId=function(e){var t=this;return this.storageService.getValueFromLocalStorage(this.SELECTED_SITE_COOKIE_NAME,false).then((function(n){return t.siteService.getAccessibleSites().then((function(i){var o=i.some((function(t){return t.uid===e}));if(o){t.setSelectedSite(e);t.updateRouteToRemoveSite();return e}else{if(e){t.alertService.showInfo("se.landingpage.site.url.error");t.updateRouteToRemoveSite()}var r=i.some((function(e){return e.uid===n}));if(!r){var a=i.length>0?i[0].uid:null;return a}else{return n}}}))}))};LandingPageComponent.prototype.getCurrentSiteId.$inject=["siteIdFromUrl"];LandingPageComponent.prototype.updateRouteToRemoveSite=function(){this.location.replaceState(s.NG_ROUTE_PREFIX)};LandingPageComponent.prototype.removeStorefrontCssClass=function(){var e=this.yjQuery(document.querySelector("body"));if(e.hasClass("is-storefront")){e.removeClass("is-storefront")}};LandingPageComponent.prototype.selectedSiteDropdownEventHandler=function(e,t){if(t.optionObject){var n=t.optionObject.id;this.setSelectedSite(n);this.loadCatalogsBySite(n);this.setModel(n)}else{this.catalogs=[]}};LandingPageComponent.prototype.selectedSiteDropdownEventHandler.$inject=["_eventId","data"];LandingPageComponent.prototype.setSelectedSite=function(e){this.storageService.setValueInLocalStorage(this.SELECTED_SITE_COOKIE_NAME,e,false)};LandingPageComponent.prototype.setSelectedSite.$inject=["siteId"];LandingPageComponent.prototype.loadCatalogsBySite=function(e){var t=this;this.catalogService.getContentCatalogsForSite(e).then((function(e){return t.catalogs=e}))};LandingPageComponent.prototype.loadCatalogsBySite.$inject=["siteId"];LandingPageComponent.prototype.setModel=function(e){var t;if(this.model){this.model[this.qualifier]=e}else{this.model=(t={},t[this.qualifier]=e,t)}};LandingPageComponent.prototype.setModel.$inject=["siteId"];LandingPageComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-landing-page",template:'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar></div><div class="se-landing-page"><div class="se-landing-page-actions"><div class="se-landing-page-container"><h1 class="se-landing-page-title">{{ \'se.landingpage.title\' | translate }}</h1><div class="se-landing-page-site-selection" *ngIf="model"><se-generic-editor-dropdown [field]="field" [qualifier]="qualifier" [model]="model" [id]="sitesId"></se-generic-editor-dropdown></div><p class="se-landing-page-label">{{ \'se.landingpage.label\' | translate }}</p></div></div><p class="se-landing-page-container se-landing-page-sub-header">Content Catalogs</p><div class="se-landing-page-container se-landing-page-catalogs"><div class="se-landing-page-catalog" *ngFor="let catalog of catalogs; let isLast = last"><se-catalog-details [catalog]="catalog" [siteId]="model.site" [isCatalogForCurrentSite]="isLast"></se-catalog-details></div></div><img src="static-resources/images/best-run-sap-logo.svg" class="se-landing-page-footer-logo"/></div>'}),__param(7,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[x,s.ICatalogService,s.SystemEventService,s.IStorageService,s.IAlertService,p.ActivatedRoute,d.Location,Function])],LandingPageComponent);return LandingPageComponent}();window.__smartedit__.addDecoratorPayload("Component","StorefrontPageComponent",{selector:"se-storefront-page",template:'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--experience" imageRoot="imageRoot" toolbarName="smartEditExperienceToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--perspective" imageRoot="imageRoot" toolbarName="smartEditPerspectiveToolbar"></se-toolbar></div><div id="js_iFrameWrapper" class="iframeWrapper"><iframe id="ySmartEditFrame" src=""></iframe><div id="ySmartEditFrameDragArea"></div></div>'});var It=function(){StorefrontPageComponent.$inject=["iframeManagerService","experienceService","yjQuery"];function StorefrontPageComponent(e,t,n){this.iframeManagerService=e;this.experienceService=t;this.yjQuery=n}StorefrontPageComponent.prototype.ngOnInit=function(){this.iframeManagerService.applyDefault();this.experienceService.initializeExperience();this.yjQuery(document.body).addClass("is-storefront")};StorefrontPageComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-storefront-page",template:'<div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--experience" imageRoot="imageRoot" toolbarName="smartEditExperienceToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--perspective" imageRoot="imageRoot" toolbarName="smartEditPerspectiveToolbar"></se-toolbar></div><div id="js_iFrameWrapper" class="iframeWrapper"><iframe id="ySmartEditFrame" src=""></iframe><div id="ySmartEditFrameDragArea"></div></div>'}),__param(2,i.Inject(s.YJQUERY_TOKEN)),__metadata("design:paramtypes",[R,s.IExperienceService,Function])],StorefrontPageComponent);return StorefrontPageComponent}();var wt="MULTI_PRODUCT_CATALOGS_UPDATED";window.__smartedit__.addDecoratorPayload("Component","MultiProductCatalogVersionConfigurationComponent",{selector:"se-multi-product-catalog-version-configuration",changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-multi-product-catalog-version-configuration]":"true"},template:'<div class="form-group se-multi-product-catalog-version-selector__label">{{\'se.product.catalogs.multiple.list.header\' | translate}}</div><div class="se-multi-product-catalog-version-selector__catalog form-group" *ngFor="let productCatalog of productCatalogs"><label class="se-control-label se-multi-product-catalog-version-selector__catalog-name" id="{{ productCatalog.catalogId }}-label">{{ productCatalog.name | seL10n | async }}</label><div class="se-multi-product-catalog-version-selector__catalog-version"><se-select [id]="productCatalog.catalogId" [(model)]="productCatalog.selectedItem" [onChange]="updateModel()" [fetchStrategy]="productCatalog.fetchStrategy"></se-select></div></div>'});var Et=function(){function MultiProductCatalogVersionConfigurationComponent(e,t){this.modalManager=e;this.systemEventService=t;this.doneButtonId="done"}MultiProductCatalogVersionConfigurationComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.getModalData().pipe(l.take(1)).subscribe((function(t){e.selectedCatalogVersions=t.selectedCatalogVersions;e.productCatalogs=t.productCatalogs.map((function(t){var n=t.versions.map((function(e){return __assign(__assign({},e),{id:e.uuid,label:e.version})}));return __assign(__assign({},t),{versions:n,fetchStrategy:{fetchAll:function(){return Promise.resolve(n)}},selectedItem:t.versions.find((function(t){return e.selectedCatalogVersions.includes(t.uuid)})).uuid})}))}));this.modalManager.setDismissCallback((function(){return e.onCancel()}));this.modalManager.addButtons([{id:"cancel",label:"se.confirmation.modal.cancel",style:s.FundamentalModalButtonStyle.Default,action:s.FundamentalModalButtonAction.Dismiss,callback:function(){return c.from(e.onCancel())}},{id:this.doneButtonId,label:"se.confirmation.modal.done",style:s.FundamentalModalButtonStyle.Primary,action:s.FundamentalModalButtonAction.None,disabled:true,callback:function(){return c.from(e.onSave())}}])};MultiProductCatalogVersionConfigurationComponent.prototype.updateModel=function(){var e=this;return function(){var t=e.productCatalogs.map((function(e){return e.selectedItem}));e.updateSelection(t)}};MultiProductCatalogVersionConfigurationComponent.prototype.updateSelection=function(e){if(!a.isEqual(e,this.selectedCatalogVersions)){this.updatedCatalogVersions=e;this.modalManager.enableButton(this.doneButtonId)}else{this.modalManager.disableButton(this.doneButtonId)}};MultiProductCatalogVersionConfigurationComponent.prototype.onCancel=function(){this.modalManager.close(null);return Promise.resolve()};MultiProductCatalogVersionConfigurationComponent.prototype.onSave=function(){this.systemEventService.publishAsync(wt,this.updatedCatalogVersions);this.modalManager.close(null);return Promise.resolve()};MultiProductCatalogVersionConfigurationComponent=__decorate([i.Component({selector:"se-multi-product-catalog-version-configuration",changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-multi-product-catalog-version-configuration]":"true"},template:'<div class="form-group se-multi-product-catalog-version-selector__label">{{\'se.product.catalogs.multiple.list.header\' | translate}}</div><div class="se-multi-product-catalog-version-selector__catalog form-group" *ngFor="let productCatalog of productCatalogs"><label class="se-control-label se-multi-product-catalog-version-selector__catalog-name" id="{{ productCatalog.catalogId }}-label">{{ productCatalog.name | seL10n | async }}</label><div class="se-multi-product-catalog-version-selector__catalog-version"><se-select [id]="productCatalog.catalogId" [(model)]="productCatalog.selectedItem" [onChange]="updateModel()" [fetchStrategy]="productCatalog.fetchStrategy"></se-select></div></div>'}),__metadata("design:paramtypes",[s.FundamentalModalManagerService,s.SystemEventService])],MultiProductCatalogVersionConfigurationComponent);return MultiProductCatalogVersionConfigurationComponent}();window.__smartedit__.addDecoratorPayload("Component","MultiProductCatalogVersionSelectorComponent",{selector:"se-multi-product-catalog-version-selector",providers:[s.L10nPipe],changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-multi-product-catalog-version-selector]":"true"},template:'<se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" class="se-products-catalog-select-multiple__tooltip"><div id="multi-product-catalog-versions-selector" se-tooltip-trigger (click)="onClickSelector()" class="se-products-catalog-select-multiple"><input type="text" [value]="multiProductCatalogVersionsSelectedOptions$ | async" class="form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis" [name]="\'productCatalogVersions\'" readonly="readonly"/> <span class="hyicon hyicon-optionssm se-products-catalog-select-multiple__icon"></span></div><div class="se-product-catalogs-tooltip" se-tooltip-body><div class="se-product-catalogs-tooltip__h">{{ (\'se.product.catalogs.selector.headline.tooltip\' || \'\') | translate }}</div><div class="se-product-catalog-info" *ngFor="let productCatalog of productCatalogs">{{ getCatalogNameCatalogVersionLabel(productCatalog.catalogId) | async }}</div></div></se-tooltip>'});var Pt=function(){function MultiProductCatalogVersionSelectorComponent(e,t,n){this.l10nPipe=e;this.modalService=t;this.systemEventService=n;this.selectedProductCatalogVersionsChange=new i.EventEmitter;this.multiProductCatalogVersionsSelectedOptions$=new c.BehaviorSubject("")}MultiProductCatalogVersionSelectorComponent.prototype.ngOnInit=function(){var e=this;this.$unRegEventForMultiProducts=this.systemEventService.subscribe(wt,(function(t,n){return e.updateProductCatalogVersionsModel(t,n)}))};MultiProductCatalogVersionSelectorComponent.prototype.ngOnDestroy=function(){if(this.$unRegEventForMultiProducts){this.$unRegEventForMultiProducts()}};MultiProductCatalogVersionSelectorComponent.prototype.ngOnChanges=function(){this.setMultiVersionSelectorTexts(this.productCatalogs)};MultiProductCatalogVersionSelectorComponent.prototype.onClickSelector=function(){this.modalService.open({component:Et,data:{productCatalogs:this.productCatalogs,selectedCatalogVersions:this.selectedProductCatalogVersions},templateConfig:{title:"se.modal.product.catalog.configuration"},config:{modalPanelClass:"modal-md modal-stretched"}})};MultiProductCatalogVersionSelectorComponent.prototype.getCatalogNameCatalogVersionLabel=function(e){var t=this.catalogNameCatalogVersionLabelMap.get(e);return this.l10nPipe.transform(t.name).pipe(l.map((function(e){return e+" ("+t.version+")"})))};MultiProductCatalogVersionSelectorComponent.prototype.setMultiVersionSelectorTexts=function(e){this.catalogNameCatalogVersionLabelMap=this.buildCatalogNameCatalogVersionLabelMap(e,this.selectedProductCatalogVersions);this.setMultiProductCatalogVersionsSelectedOptions(e)};MultiProductCatalogVersionSelectorComponent.prototype.buildCatalogNameCatalogVersionLabelMap=function(e,t){var n=new Map;e.forEach((function(e){var i=e.versions.find((function(e){return t&&t.includes(e.uuid)}));if(i){n.set(e.catalogId,{name:e.name,version:i.version})}}));return n};MultiProductCatalogVersionSelectorComponent.prototype.setMultiProductCatalogVersionsSelectedOptions=function(e){var t=this;if(e){var n=Array.from(this.catalogNameCatalogVersionLabelMap).map((function(e){return t.getCatalogNameCatalogVersionLabel(e[0])}));c.combineLatest(n).pipe(l.take(1),l.map((function(e){return e.join(", ")}))).subscribe((function(e){return t.multiProductCatalogVersionsSelectedOptions$.next(e)}))}else{this.multiProductCatalogVersionsSelectedOptions$.next("")}};MultiProductCatalogVersionSelectorComponent.prototype.updateProductCatalogVersionsModel=function(e,t){this.selectedProductCatalogVersionsChange.emit(t)};__decorate([i.Input(),__metadata("design:type",Array)],MultiProductCatalogVersionSelectorComponent.prototype,"productCatalogs",void 0);__decorate([i.Input(),__metadata("design:type",Array)],MultiProductCatalogVersionSelectorComponent.prototype,"selectedProductCatalogVersions",void 0);__decorate([i.Output(),__metadata("design:type",Object)],MultiProductCatalogVersionSelectorComponent.prototype,"selectedProductCatalogVersionsChange",void 0);MultiProductCatalogVersionSelectorComponent=__decorate([i.Component({selector:"se-multi-product-catalog-version-selector",providers:[s.L10nPipe],changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-multi-product-catalog-version-selector]":"true"},template:'<se-tooltip [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" class="se-products-catalog-select-multiple__tooltip"><div id="multi-product-catalog-versions-selector" se-tooltip-trigger (click)="onClickSelector()" class="se-products-catalog-select-multiple"><input type="text" [value]="multiProductCatalogVersionsSelectedOptions$ | async" class="form-control se-products-catalog-select-multiple__catalogs se-nowrap-ellipsis" [name]="\'productCatalogVersions\'" readonly="readonly"/> <span class="hyicon hyicon-optionssm se-products-catalog-select-multiple__icon"></span></div><div class="se-product-catalogs-tooltip" se-tooltip-body><div class="se-product-catalogs-tooltip__h">{{ (\'se.product.catalogs.selector.headline.tooltip\' || \'\') | translate }}</div><div class="se-product-catalog-info" *ngFor="let productCatalog of productCatalogs">{{ getCatalogNameCatalogVersionLabel(productCatalog.catalogId) | async }}</div></div></se-tooltip>'}),__metadata("design:paramtypes",[s.L10nPipe,s.IModalService,s.SystemEventService])],MultiProductCatalogVersionSelectorComponent);return MultiProductCatalogVersionSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","ProductCatalogVersionsSelectorComponent",{selector:"se-product-catalog-versions-selector",changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-product-catalog-versions-selector]":"true"},template:'<ng-container *ngIf="isReady"><se-select *ngIf="isSingleVersionSelector" [id]="geData.qualifier" [(model)]="geData.model.productCatalogVersions[0]" [(reset)]="reset" [fetchStrategy]="fetchStrategy"></se-select><se-multi-product-catalog-version-selector *ngIf="isMultiVersionSelector" [productCatalogs]="productCatalogs" [(selectedProductCatalogVersions)]="geData.model[geData.qualifier]"></se-multi-product-catalog-version-selector></ng-container>'});var Tt=function(){function ProductCatalogVersionsSelectorComponent(e,t,n,i){this.geData=e;this.catalogService=t;this.systemEventService=n;this.cdr=i}ProductCatalogVersionsSelectorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:this.contentCatalogVersionId=a.cloneDeep(this.geData.model.previewCatalog);if(!this.contentCatalogVersionId)return[3,2];this.isReady=false;this.isSingleVersionSelector=false;this.isMultiVersionSelector=false;e=(this.geData.id||"")+s.LINKED_DROPDOWN;this.$unRegSiteChangeEvent=this.systemEventService.subscribe(e,(function(e,n){return t.resetSelector(e,n)}));return[4,this.setContent()];case 1:n.sent();n.label=2;case 2:return[2,Promise.resolve()]}}))}))};ProductCatalogVersionsSelectorComponent.prototype.ngOnDestroy=function(){if(this.$unRegSiteChangeEvent){this.$unRegSiteChangeEvent()}};ProductCatalogVersionsSelectorComponent.prototype.resetSelector=function(e,t){return __awaiter(this,void 0,void 0,(function(){var e,n,i;return __generator(this,(function(o){switch(o.label){case 0:if(!(t.qualifier==="previewCatalog"&&t.optionObject&&this.contentCatalogVersionId!==t.optionObject.id))return[3,3];this.contentCatalogVersionId=t.optionObject.id;e=this.getSiteUIDFromContentCatalogVersionId(this.contentCatalogVersionId);return[4,this.catalogService.getProductCatalogsForSite(e)];case 1:n=o.sent();return[4,this.catalogService.returnActiveCatalogVersionUIDs(n)];case 2:i=o.sent();this.geData.model[this.geData.qualifier]=i;if(this.isSingleVersionSelector){this.reset()}this.setContent();o.label=3;case 3:return[2]}}))}))};ProductCatalogVersionsSelectorComponent.prototype.setContent=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:e=function(){return __awaiter(t,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:e=this;return[4,this.catalogService.getProductCatalogsForSite(this.getSiteUIDFromContentCatalogVersionId(this.contentCatalogVersionId))];case 1:e.productCatalogs=n.sent();if(this.productCatalogs.length===0){return[2]}if(this.productCatalogs.length===1){this.fetchStrategy={fetchAll:function(){var e=t.parseSingleCatalogVersion(t.productCatalogs[0].versions);return Promise.resolve(e)}};this.isSingleVersionSelector=true;this.isMultiVersionSelector=false;this.isReady=true;return[2]}this.isSingleVersionSelector=false;this.isMultiVersionSelector=true;this.isReady=true;return[2]}}))}))};return[4,e()];case 1:n.sent();this.cdr.detectChanges();return[2]}}))}))};ProductCatalogVersionsSelectorComponent.prototype.getSiteUIDFromContentCatalogVersionId=function(e){return e.split("|")[0]};ProductCatalogVersionsSelectorComponent.prototype.parseSingleCatalogVersion=function(e){return e.map((function(e){return{id:e.uuid,label:e.version}}))};ProductCatalogVersionsSelectorComponent=__decorate([i.Component({selector:"se-product-catalog-versions-selector",changeDetection:i.ChangeDetectionStrategy.OnPush,host:{"[class.se-product-catalog-versions-selector]":"true"},template:'<ng-container *ngIf="isReady"><se-select *ngIf="isSingleVersionSelector" [id]="geData.qualifier" [(model)]="geData.model.productCatalogVersions[0]" [(reset)]="reset" [fetchStrategy]="fetchStrategy"></se-select><se-multi-product-catalog-version-selector *ngIf="isMultiVersionSelector" [productCatalogs]="productCatalogs" [(selectedProductCatalogVersions)]="geData.model[geData.qualifier]"></se-multi-product-catalog-version-selector></ng-container>'}),__param(0,i.Inject(s.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,s.ICatalogService,s.SystemEventService,i.ChangeDetectorRef])],ProductCatalogVersionsSelectorComponent);return ProductCatalogVersionsSelectorComponent}();var At=function(){function ProductCatalogVersionModule(){}ProductCatalogVersionModule=__decorate([i.NgModule({imports:[d.CommonModule,h.FormsModule,s.L10nPipeModule,s.TranslationModule.forChild(),s.SelectModule,s.TooltipModule],declarations:[Tt,Et,Pt],entryComponents:[Tt,Et,Pt],providers:[s.moduleUtils.initialize((function(e){e.addFieldMapping("ProductCatalogVersionsSelector",null,null,{component:Tt})}),[s.EditorFieldMappingService])]})],ProductCatalogVersionModule);return ProductCatalogVersionModule}();window.__smartedit__.addDecoratorPayload("Component","SitesLinkComponent",{selector:"sites-link",template:'<div (click)="goToSites()" class="se-sites-link {{cssClass}}"><a class="se-sites-link__text">{{\'se.toolbar.sites\' | translate}}</a> <span class="icon-navigation-right-arrow se-sites-link__arrow {{iconCssClass}}"></span></div>'});var Dt=function(){function SitesLinkComponent(e,t){this.routingService=e;this.iframeManagerService=t;this.iconCssClass="sap-icon--navigation-right-arrow"}SitesLinkComponent.prototype.goToSites=function(){this.iframeManagerService.setCurrentLocation(null);this.routingService.go(s.NG_ROUTE_PREFIX)};__decorate([i.Input(),__metadata("design:type",String)],SitesLinkComponent.prototype,"cssClass",void 0);__decorate([i.Input(),__metadata("design:type",Object)],SitesLinkComponent.prototype,"iconCssClass",void 0);__decorate([i.Input(),__metadata("design:type",Object)],SitesLinkComponent.prototype,"shortcutLink",void 0);SitesLinkComponent=__decorate([i.Component({selector:"sites-link",template:'<div (click)="goToSites()" class="se-sites-link {{cssClass}}"><a class="se-sites-link__text">{{\'se.toolbar.sites\' | translate}}</a> <span class="icon-navigation-right-arrow se-sites-link__arrow {{iconCssClass}}"></span></div>'}),__metadata("design:paramtypes",[s.SmarteditRoutingService,R])],SitesLinkComponent);return SitesLinkComponent}();window.__smartedit__.addDecoratorPayload("Component","PerspectiveSelectorComponent",{selector:"se-perspective-selector",template:'<fd-popover [(isOpen)]="isOpen" [closeOnOutsideClick]="false" [triggers]="[\'click\']" *ngIf="hasActivePerspective()" class="se-perspective-selector" [placement]="\'bottom-end\'" [disabled]="isDisabled" [options]="popperOptions"><fd-popover-control><div class="se-perspective-selector__trigger"><se-tooltip [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isTooltipVisible()"><span se-tooltip-trigger id="perspectiveTooltip" class="hyicon hyicon-info se-perspective-selector__hotkey-tooltip--icon"></span><div se-tooltip-body>{{ activePerspective.descriptionI18nKey | translate }}</div></se-tooltip><button class="se-perspective-selector__btn" [disabled]="isDisabled">{{getActivePerspectiveName() | translate}} <span class="se-perspective-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><ul class="se-perspective__list fd-list-group" [ngClass]="{\'se-perspective__list--tooltip\': isTooltipVisible()}" role="menu"><li *ngFor="let choice of getDisplayedPerspectives()" class="fd-list-group__item se-perspective__list-item fd-has-padding-none"><a class="item se-perspective__list-item-text" (click)="selectPerspective($event, choice.key);">{{choice.nameI18nKey | translate}}</a></li></ul></fd-popover-body></fd-popover>'});var Ot=function(){PerspectiveSelectorComponent.$inject=["logService","yjQuery","perspectiveService","iframeClickDetectionService","systemEventService","crossFrameEventService","testModeService"];function PerspectiveSelectorComponent(e,t,n,i,o,r,a){this.logService=e;this.yjQuery=t;this.perspectiveService=n;this.iframeClickDetectionService=i;this.systemEventService=o;this.crossFrameEventService=r;this.testModeService=a;this.isOpen=false;this.popperOptions={placement:"bottom-start",modifiers:{preventOverflow:{enabled:true,escapeWithReference:true,boundariesElement:"viewport"},applyStyle:{gpuAcceleration:false}}};this.isDisabled=false;this.perspectives=[];this.displayedPerspectives=[];this.activePerspective=null}PerspectiveSelectorComponent.prototype.onDocumentClick=function(e){this.onClickHandler(e)};PerspectiveSelectorComponent.prototype.onDocumentClick.$inject=["event"];PerspectiveSelectorComponent.prototype.ngOnInit=function(){var e=this;this.activePerspective=null;this.iframeClickDetectionService.registerCallback("perspectiveSelectorClose",(function(){return e.closeDropdown()}));this.unRegOverlayDisabledFn=this.systemEventService.subscribe("OVERLAY_DISABLED",(function(){return e.closeDropdown()}));this.unRegPerspectiveAddedFn=this.systemEventService.subscribe(s.EVENT_PERSPECTIVE_ADDED,(function(){return e.onPerspectiveAdded()}));this.unRegPerspectiveChgFn=this.crossFrameEventService.subscribe(s.EVENT_PERSPECTIVE_CHANGED,(function(){return e.refreshPerspectives()}));this.unRegPerspectiveRefreshFn=this.crossFrameEventService.subscribe(s.EVENT_PERSPECTIVE_REFRESHED,(function(){return e.refreshPerspectives()}));this.unRegUserHasChanged=this.crossFrameEventService.subscribe(s.EVENTS.USER_HAS_CHANGED,(function(){return e.onPerspectiveAdded()}));this.unRegStrictPreviewModeToggleFn=this.crossFrameEventService.subscribe(s.EVENT_STRICT_PREVIEW_MODE_REQUESTED,(function(t,n){return e.togglePerspectiveSelector(n)}));this.onPerspectiveAdded()};PerspectiveSelectorComponent.prototype.ngOnDestroy=function(){this.unRegOverlayDisabledFn();this.unRegPerspectiveAddedFn();this.unRegPerspectiveChgFn();this.unRegPerspectiveRefreshFn();this.unRegUserHasChanged();this.unRegStrictPreviewModeToggleFn()};PerspectiveSelectorComponent.prototype.selectPerspective=function(e,t){e.preventDefault();try{this.perspectiveService.switchTo(t);this.closeDropdown()}catch(e){this.logService.error("selectPerspective() - Cannot select perspective.",e)}};PerspectiveSelectorComponent.prototype.selectPerspective.$inject=["event","choice"];PerspectiveSelectorComponent.prototype.getDisplayedPerspectives=function(){return this.displayedPerspectives};PerspectiveSelectorComponent.prototype.getActivePerspectiveName=function(){return this.activePerspective?this.activePerspective.nameI18nKey:""};PerspectiveSelectorComponent.prototype.hasActivePerspective=function(){return this.activePerspective!==null};PerspectiveSelectorComponent.prototype.isTooltipVisible=function(){return!!this.activePerspective&&!!this.activePerspective.descriptionI18nKey&&this.checkTooltipVisibilityCondition()};PerspectiveSelectorComponent.prototype.checkTooltipVisibilityCondition=function(){if(this.activePerspective.key!==s.NONE_PERSPECTIVE||this.activePerspective.key===s.NONE_PERSPECTIVE&&this.isDisabled){return true}return false};PerspectiveSelectorComponent.prototype.filterPerspectives=function(e){var t=this;return e.filter((function(e){var n=t.activePerspective&&e.key===t.activePerspective.key;var i=e.key===s.ALL_PERSPECTIVE;return!n&&(!i||t.testModeService.isE2EMode())}))};PerspectiveSelectorComponent.prototype.filterPerspectives.$inject=["perspectives"];PerspectiveSelectorComponent.prototype.closeDropdown=function(){this.isOpen=false};PerspectiveSelectorComponent.prototype.onPerspectiveAdded=function(){var e=this;this.perspectiveService.getPerspectives().then((function(t){e.perspectives=t;e.displayedPerspectives=e.filterPerspectives(e.perspectives)}))};PerspectiveSelectorComponent.prototype.refreshPerspectives=function(){var e=this;this.perspectiveService.getPerspectives().then((function(t){e.perspectives=t;e._refreshActivePerspective();e.displayedPerspectives=e.filterPerspectives(e.perspectives)}))};PerspectiveSelectorComponent.prototype._refreshActivePerspective=function(){this.activePerspective=this.perspectiveService.getActivePerspective()};PerspectiveSelectorComponent.prototype.onClickHandler=function(e){if(this.yjQuery(e.target).parents(".se-perspective-selector").length<=0&&this.isOpen){this.closeDropdown()}};PerspectiveSelectorComponent.prototype.onClickHandler.$inject=["event"];PerspectiveSelectorComponent.prototype.togglePerspectiveSelector=function(e){this.isDisabled=e};PerspectiveSelectorComponent.prototype.togglePerspectiveSelector.$inject=["value"];__decorate([i.Input(),__metadata("design:type",Object)],PerspectiveSelectorComponent.prototype,"isOpen",void 0);__decorate([i.HostListener("document:click",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Event]),__metadata("design:returntype",void 0)],PerspectiveSelectorComponent.prototype,"onDocumentClick",null);PerspectiveSelectorComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-perspective-selector",template:'<fd-popover [(isOpen)]="isOpen" [closeOnOutsideClick]="false" [triggers]="[\'click\']" *ngIf="hasActivePerspective()" class="se-perspective-selector" [placement]="\'bottom-end\'" [disabled]="isDisabled" [options]="popperOptions"><fd-popover-control><div class="se-perspective-selector__trigger"><se-tooltip [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']" *ngIf="isTooltipVisible()"><span se-tooltip-trigger id="perspectiveTooltip" class="hyicon hyicon-info se-perspective-selector__hotkey-tooltip--icon"></span><div se-tooltip-body>{{ activePerspective.descriptionI18nKey | translate }}</div></se-tooltip><button class="se-perspective-selector__btn" [disabled]="isDisabled">{{getActivePerspectiveName() | translate}} <span class="se-perspective-selector__btn-arrow icon-navigation-down-arrow"></span></button></div></fd-popover-control><fd-popover-body><ul class="se-perspective__list fd-list-group" [ngClass]="{\'se-perspective__list--tooltip\': isTooltipVisible()}" role="menu"><li *ngFor="let choice of getDisplayedPerspectives()" class="fd-list-group__item se-perspective__list-item fd-has-padding-none"><a class="item se-perspective__list-item-text" (click)="selectPerspective($event, choice.key);">{{choice.nameI18nKey | translate}}</a></li></ul></fd-popover-body></fd-popover>'}),__param(1,i.Inject(s.YJQUERY_TOKEN)),__param(5,i.Inject(s.EVENT_SERVICE)),__metadata("design:paramtypes",[s.LogService,Function,s.IPerspectiveService,s.IIframeClickDetectionService,s.SystemEventService,s.CrossFrameEventService,s.TestModeService])],PerspectiveSelectorComponent);return PerspectiveSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogHierarchyModalComponent",{selector:"se-catalog-hierarchy-modal",template:'<div class="se-catalog-hierarchy-header"><span>{{ \'se.catalog.hierarchy.modal.tree.header\' | translate }}</span></div><div *ngIf="this.catalogs$ | async as catalogs" class="se-catalog-hierarchy-body"><se-catalog-hierarchy-node *ngFor="let catalog of catalogs; let i = index" [catalog]="catalog" [index]="i" [isLast]="i === catalogs.length - 1" [siteId]="siteId" (siteSelect)="onSiteSelected()"></se-catalog-hierarchy-node></div>'});var Rt=function(){function CatalogHierarchyModalComponent(e){this.modalService=e}CatalogHierarchyModalComponent.prototype.ngOnInit=function(){this.catalogs$=this.modalService.getModalData().pipe(l.take(1)).toPromise().then((function(e){var t=e.catalog;return __spreadArrays(t.parents,[t])}))};CatalogHierarchyModalComponent.prototype.onSiteSelected=function(){this.modalService.close()};CatalogHierarchyModalComponent=__decorate([i.Component({selector:"se-catalog-hierarchy-modal",template:'<div class="se-catalog-hierarchy-header"><span>{{ \'se.catalog.hierarchy.modal.tree.header\' | translate }}</span></div><div *ngIf="this.catalogs$ | async as catalogs" class="se-catalog-hierarchy-body"><se-catalog-hierarchy-node *ngFor="let catalog of catalogs; let i = index" [catalog]="catalog" [index]="i" [isLast]="i === catalogs.length - 1" [siteId]="siteId" (siteSelect)="onSiteSelected()"></se-catalog-hierarchy-node></div>'}),__metadata("design:paramtypes",[s.FundamentalModalManagerService])],CatalogHierarchyModalComponent);return CatalogHierarchyModalComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogDetailsComponent",{selector:"se-catalog-details",template:'<div class="se-catalog-details" [attr.data-catalog]="catalog.name | seL10n | async"><div class="se-catalog-header"><div class="se-catalog-header-flex"><div class="se-catalog-details__header">{{ catalog.name | seL10n | async }}</div><div *ngIf="catalog.parents?.length"><a href="javascript:void(0)" (click)="onOpenCatalogHierarchy()">{{ \'se.landingpage.catalog.hierarchy\' | translate }}</a></div></div></div><div class="se-catalog-details__content"><se-catalog-version-details *ngFor="let catalogVersion of sortedCatalogVersions" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion" [siteId]="siteId"></se-catalog-version-details></div></div>'});var Mt=function(){CatalogDetailsComponent.$inject=["modalService"];function CatalogDetailsComponent(e){this.modalService=e;this.catalogDividerImage="static-resources/images/icon_catalog_arrow.png"}CatalogDetailsComponent.prototype.ngOnInit=function(){this.activeCatalogVersion=this.catalog.versions.find((function(e){return e.active}));this.sortedCatalogVersions=this.getSortedCatalogVersions();this.collapsibleConfiguration={expandedByDefault:this.isCatalogForCurrentSite}};CatalogDetailsComponent.prototype.onOpenCatalogHierarchy=function(){this.modalService.open({component:Rt,data:{catalog:this.catalog},templateConfig:{title:"se.catalog.hierarchy.modal.title",isDismissButtonVisible:true}})};CatalogDetailsComponent.prototype.getSortedCatalogVersions=function(){return __spreadArrays([this.activeCatalogVersion],this.catalog.versions.filter((function(e){return!e.active})))};__decorate([i.Input(),__metadata("design:type",Object)],CatalogDetailsComponent.prototype,"catalog",void 0);__decorate([i.Input(),__metadata("design:type",Boolean)],CatalogDetailsComponent.prototype,"isCatalogForCurrentSite",void 0);__decorate([i.Input(),__metadata("design:type",String)],CatalogDetailsComponent.prototype,"siteId",void 0);CatalogDetailsComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-catalog-details",template:'<div class="se-catalog-details" [attr.data-catalog]="catalog.name | seL10n | async"><div class="se-catalog-header"><div class="se-catalog-header-flex"><div class="se-catalog-details__header">{{ catalog.name | seL10n | async }}</div><div *ngIf="catalog.parents?.length"><a href="javascript:void(0)" (click)="onOpenCatalogHierarchy()">{{ \'se.landingpage.catalog.hierarchy\' | translate }}</a></div></div></div><div class="se-catalog-details__content"><se-catalog-version-details *ngFor="let catalogVersion of sortedCatalogVersions" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion" [siteId]="siteId"></se-catalog-version-details></div></div>'}),__metadata("design:paramtypes",[s.ModalService])],CatalogDetailsComponent);return CatalogDetailsComponent}();var xt=function(){CatalogNavigateToSite.$inject=["systemEvent"];function CatalogNavigateToSite(e){this.systemEvent=e}CatalogNavigateToSite.prototype.navigate=function(e){this.systemEvent.publishAsync(St+s.LINKED_DROPDOWN,{qualifier:"site",optionObject:{contentCatalogs:[],uid:e,id:e,label:{},name:{},previewUrl:""}})};CatalogNavigateToSite.prototype.navigate.$inject=["siteId"];CatalogNavigateToSite=__decorate([i.Injectable(),__metadata("design:paramtypes",[s.SystemEventService])],CatalogNavigateToSite);return CatalogNavigateToSite}();window.__smartedit__.addDecoratorPayload("Component","CatalogHierarchyNodeMenuItemComponent",{changeDetection:i.ChangeDetectionStrategy.OnPush,selector:"se-catalog-hierarchy-node-menu-item",template:'\n        <a class="se-dropdown-item fd-menu__item" (click)="onSiteSelect()">\n            {{ name | seL10n | async }}\n        </a>\n    '});var Nt=function(){function CatalogHierarchyNodeMenuItemComponent(e,t){this.activateSite=e;var n=t.dropdownItem,i=n.name,o=n.uid;this.name=i;this.uid=o}CatalogHierarchyNodeMenuItemComponent.prototype.onSiteSelect=function(){this.activateSite.navigate(this.uid)};CatalogHierarchyNodeMenuItemComponent=__decorate([i.Component({changeDetection:i.ChangeDetectionStrategy.OnPush,selector:"se-catalog-hierarchy-node-menu-item",template:'\n        <a class="se-dropdown-item fd-menu__item" (click)="onSiteSelect()">\n            {{ name | seL10n | async }}\n        </a>\n    '}),__param(1,i.Inject(s.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[xt,Object])],CatalogHierarchyNodeMenuItemComponent);return CatalogHierarchyNodeMenuItemComponent}();var kt="se-cth-node-anchor";window.__smartedit__.addDecoratorPayload("Component","CatalogHierarchyNodeComponent",{changeDetection:i.ChangeDetectionStrategy.OnPush,selector:"se-catalog-hierarchy-node",template:'<div class="se-cth-node-name" [style.padding-left.px]="15 * index" [style.padding-right.px]="15 * index" [class.se-cth-node-name__last]="isLast"><fd-icon glyph="navigation-down-arrow"></fd-icon>{{ (isLast ? catalog.name : catalog.catalogName) | seL10n | async }}&nbsp; <span *ngIf="isLast">({{ \'se.catalog.hierarchy.modal.tree.this.catalog\' | translate}})</span></div><div class="se-cth-node-sites"><ng-container><ng-container *ngIf="hasOneSite; else hasManySites"><a class="se-cth-node-anchor" href="" (click)="onNavigateToSite(catalog.sites[0].uid)">{{ catalog.sites[0].name | seL10n | async }}<fd-icon glyph="navigation-right-arrow"></fd-icon></a></ng-container><ng-template #hasManySites><se-dropdown-menu [dropdownItems]="dropdownItems" useProjectedAnchor="1" (click)="onSiteSelect($event)"><span class="se-cth-node-anchor">{{ this.catalog.sites.length }} Sites<fd-icon glyph="navigation-down-arrow"></fd-icon></span></se-dropdown-menu></ng-template></ng-container></div>'});var Ft=function(){function CatalogHierarchyNodeComponent(e){this.navigateToSite=e;this.siteSelect=new i.EventEmitter}CatalogHierarchyNodeComponent.prototype.ngOnChanges=function(){this.dropdownItems=this.getDropdownItems()};CatalogHierarchyNodeComponent.prototype.onNavigateToSite=function(e){this.navigateToSite.navigate(e);this.siteSelect.emit()};CatalogHierarchyNodeComponent.prototype.onSiteSelect=function(e){var t=e.target;if(!t.classList.contains(kt)&&!t.closest("."+kt)){this.siteSelect.emit()}};Object.defineProperty(CatalogHierarchyNodeComponent.prototype,"hasOneSite",{get:function(){return this.catalog.sites.length===1},enumerable:false,configurable:true});CatalogHierarchyNodeComponent.prototype.getDropdownItems=function(){return this.catalog.sites.map((function(e){return __assign(__assign({},e),{component:Nt})}))};__decorate([i.Input(),__metadata("design:type",Number)],CatalogHierarchyNodeComponent.prototype,"index",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogHierarchyNodeComponent.prototype,"catalog",void 0);__decorate([i.Input(),__metadata("design:type",String)],CatalogHierarchyNodeComponent.prototype,"siteId",void 0);__decorate([i.Input(),__metadata("design:type",Boolean)],CatalogHierarchyNodeComponent.prototype,"isLast",void 0);__decorate([i.Output(),__metadata("design:type",Object)],CatalogHierarchyNodeComponent.prototype,"siteSelect",void 0);CatalogHierarchyNodeComponent=__decorate([i.Component({changeDetection:i.ChangeDetectionStrategy.OnPush,selector:"se-catalog-hierarchy-node",template:'<div class="se-cth-node-name" [style.padding-left.px]="15 * index" [style.padding-right.px]="15 * index" [class.se-cth-node-name__last]="isLast"><fd-icon glyph="navigation-down-arrow"></fd-icon>{{ (isLast ? catalog.name : catalog.catalogName) | seL10n | async }}&nbsp; <span *ngIf="isLast">({{ \'se.catalog.hierarchy.modal.tree.this.catalog\' | translate}})</span></div><div class="se-cth-node-sites"><ng-container><ng-container *ngIf="hasOneSite; else hasManySites"><a class="se-cth-node-anchor" href="" (click)="onNavigateToSite(catalog.sites[0].uid)">{{ catalog.sites[0].name | seL10n | async }}<fd-icon glyph="navigation-right-arrow"></fd-icon></a></ng-container><ng-template #hasManySites><se-dropdown-menu [dropdownItems]="dropdownItems" useProjectedAnchor="1" (click)="onSiteSelect($event)"><span class="se-cth-node-anchor">{{ this.catalog.sites.length }} Sites<fd-icon glyph="navigation-down-arrow"></fd-icon></span></se-dropdown-menu></ng-template></ng-container></div>'}),__metadata("design:paramtypes",[xt])],CatalogHierarchyNodeComponent);return CatalogHierarchyNodeComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogVersionDetailsComponent",{selector:"se-catalog-version-details",template:'<div class="se-catalog-version-container" [attr.data-catalog-version]="catalogVersion.version"><div class="se-catalog-version-container__left"><se-catalog-versions-thumbnail-carousel [catalogVersion]="catalogVersion" [catalog]="catalog" [siteId]="siteId"></se-catalog-versions-thumbnail-carousel><div><div class="se-catalog-version-container__name">{{catalogVersion.version}}</div><div class="se-catalog-version-container__left__templates"><div class="se-catalog-version-container__left__template" *ngFor="let item of leftItems; let isLast = last"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer><div class="se-catalog-version-container__divider" *ngIf="!isLast"></div></div></div></div></div><div class="se-catalog-version-container__right"><div class="se-catalog-version-container__right__template" *ngFor="let item of rightItems"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer></div></div></div>'});var zt=function(){CatalogVersionDetailsComponent.$inject=["catalogDetailsService"];function CatalogVersionDetailsComponent(e){this.catalogDetailsService=e}CatalogVersionDetailsComponent.prototype.ngOnInit=function(){var e=this.catalogDetailsService.getItems(),t=e.left,n=e.right;this.leftItems=t;this.rightItems=n};__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionDetailsComponent.prototype,"catalog",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionDetailsComponent.prototype,"catalogVersion",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionDetailsComponent.prototype,"activeCatalogVersion",void 0);__decorate([i.Input(),__metadata("design:type",String)],CatalogVersionDetailsComponent.prototype,"siteId",void 0);CatalogVersionDetailsComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-catalog-version-details",template:'<div class="se-catalog-version-container" [attr.data-catalog-version]="catalogVersion.version"><div class="se-catalog-version-container__left"><se-catalog-versions-thumbnail-carousel [catalogVersion]="catalogVersion" [catalog]="catalog" [siteId]="siteId"></se-catalog-versions-thumbnail-carousel><div><div class="se-catalog-version-container__name">{{catalogVersion.version}}</div><div class="se-catalog-version-container__left__templates"><div class="se-catalog-version-container__left__template" *ngFor="let item of leftItems; let isLast = last"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer><div class="se-catalog-version-container__divider" *ngIf="!isLast"></div></div></div></div></div><div class="se-catalog-version-container__right"><div class="se-catalog-version-container__right__template" *ngFor="let item of rightItems"><se-catalog-version-item-renderer [item]="item" [siteId]="siteId" [catalog]="catalog" [catalogVersion]="catalogVersion" [activeCatalogVersion]="activeCatalogVersion"></se-catalog-version-item-renderer></div></div></div>'}),__metadata("design:paramtypes",[s.ICatalogDetailsService])],CatalogVersionDetailsComponent);return CatalogVersionDetailsComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogVersionItemRendererComponent",{selector:"se-catalog-version-item-renderer",template:'\n        <ng-container>\n            <div *ngIf="item.component">\n                <ng-container\n                    *ngComponentOutlet="item.component; injector: itemInjector"\n                ></ng-container>\n            </div>\n\n            \x3c!--  AngularJS Support--\x3e\n\n            <div\n                *ngIf="item.include"\n                [ngInclude]="item.include"\n                [compileHtmlNgController]="legacyController"\n            ></div>\n        </ng-container>\n    '});var Lt=function(){CatalogVersionItemRendererComponent.$inject=["injector"];function CatalogVersionItemRendererComponent(e){this.injector=e}CatalogVersionItemRendererComponent.prototype.ngOnInit=function(){this.createLegacyController();this.createInjector()};CatalogVersionItemRendererComponent.prototype.ngOnChanges=function(){this.createLegacyController();this.createInjector()};CatalogVersionItemRendererComponent.prototype.createLegacyController=function(){var e=this;if(!this.item.include){return}this.legacyController={alias:"$ctrl",value:function(){return e}}};CatalogVersionItemRendererComponent.prototype.createInjector=function(){if(!this.item.component){return}this.itemInjector=i.Injector.create({parent:this.injector,providers:[{provide:s.CATALOG_DETAILS_ITEM_DATA,useValue:{siteId:this.siteId,catalog:this.catalog,catalogVersion:this.catalogVersion,activeCatalogVersion:this.activeCatalogVersion}}]})};__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionItemRendererComponent.prototype,"item",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionItemRendererComponent.prototype,"catalog",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionItemRendererComponent.prototype,"catalogVersion",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionItemRendererComponent.prototype,"activeCatalogVersion",void 0);__decorate([i.Input(),__metadata("design:type",String)],CatalogVersionItemRendererComponent.prototype,"siteId",void 0);CatalogVersionItemRendererComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-catalog-version-item-renderer",template:'\n        <ng-container>\n            <div *ngIf="item.component">\n                <ng-container\n                    *ngComponentOutlet="item.component; injector: itemInjector"\n                ></ng-container>\n            </div>\n\n            \x3c!--  AngularJS Support--\x3e\n\n            <div\n                *ngIf="item.include"\n                [ngInclude]="item.include"\n                [compileHtmlNgController]="legacyController"\n            ></div>\n        </ng-container>\n    '}),__metadata("design:paramtypes",[i.Injector])],CatalogVersionItemRendererComponent);return CatalogVersionItemRendererComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogVersionsThumbnailCarouselComponent",{selector:"se-catalog-versions-thumbnail-carousel",template:'<div class="se-active-catalog-thumbnail"><div class="se-active-catalog-version-container__thumbnail" (click)="onClick()"><div class="se-active-catalog-version-container__thumbnail__default-img"><div class="se-active-catalog-version-container__thumbnail__img" [ngStyle]="{\'background-image\': \'url(\' + catalogVersion.thumbnailUrl + \')\'}"></div></div></div></div>'});var Vt=function(){CatalogVersionsThumbnailCarouselComponent.$inject=["experienceService"];function CatalogVersionsThumbnailCarouselComponent(e){this.experienceService=e}CatalogVersionsThumbnailCarouselComponent.prototype.onClick=function(){this.experienceService.loadExperience({siteId:this.siteId,catalogId:this.catalog.catalogId,catalogVersion:this.catalogVersion.version})};__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionsThumbnailCarouselComponent.prototype,"catalog",void 0);__decorate([i.Input(),__metadata("design:type",Object)],CatalogVersionsThumbnailCarouselComponent.prototype,"catalogVersion",void 0);__decorate([i.Input(),__metadata("design:type",String)],CatalogVersionsThumbnailCarouselComponent.prototype,"siteId",void 0);CatalogVersionsThumbnailCarouselComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-catalog-versions-thumbnail-carousel",template:'<div class="se-active-catalog-thumbnail"><div class="se-active-catalog-version-container__thumbnail" (click)="onClick()"><div class="se-active-catalog-version-container__thumbnail__default-img"><div class="se-active-catalog-version-container__thumbnail__img" [ngStyle]="{\'background-image\': \'url(\' + catalogVersion.thumbnailUrl + \')\'}"></div></div></div></div>'}),__metadata("design:paramtypes",[s.IExperienceService])],CatalogVersionsThumbnailCarouselComponent);return CatalogVersionsThumbnailCarouselComponent}();window.__smartedit__.addDecoratorPayload("Component","HomePageLinkComponent",{selector:"se-home-page-link",template:'<div class="home-link-container"><a href="javascript:void(0)" class="home-link-item__link se-catalog-version__link" (click)="onClick()">{{ \'se.landingpage.homepage\' | translate }}</a></div>'});var $t=function(){HomePageLinkComponent.$inject=["experienceService","data"];function HomePageLinkComponent(e,t){this.experienceService=e;this.data=t}HomePageLinkComponent.prototype.onClick=function(){var e=this.data,t=e.siteId,n=e.catalog.catalogId,i=e.catalogVersion.version;this.experienceService.loadExperience({siteId:t,catalogId:n,catalogVersion:i})};HomePageLinkComponent=__decorate([s.SeDowngradeComponent(),i.Component({selector:"se-home-page-link",template:'<div class="home-link-container"><a href="javascript:void(0)" class="home-link-item__link se-catalog-version__link" (click)="onClick()">{{ \'se.landingpage.homepage\' | translate }}</a></div>'}),__param(1,i.Inject(s.CATALOG_DETAILS_ITEM_DATA)),__metadata("design:paramtypes",[s.IExperienceService,Object])],HomePageLinkComponent);return HomePageLinkComponent}();var Ut=function(){function CatalogDetailsService(){this._customItems={left:[{component:$t}],right:[]}}CatalogDetailsService.prototype.addItems=function(e,t){var n;if(t===s.CATALOG_DETAILS_COLUMNS.RIGHT){this._customItems.right=this._customItems.right.concat(e)}else{this._customItems.left=this._customItems.left.splice(0);(n=this._customItems.left).splice.apply(n,__spreadArrays([this._customItems.left.length-1,0],e))}};CatalogDetailsService.prototype.addItems.$inject=["items","column"];CatalogDetailsService.prototype.getItems=function(){return this._customItems};CatalogDetailsService=__decorate([s.SeDowngradeService(s.ICatalogDetailsService)],CatalogDetailsService);return CatalogDetailsService}();var jt=function(){function CatalogDetailsModule(){}CatalogDetailsModule=__decorate([i.NgModule({imports:[d.CommonModule,s.CollapsibleContainerModule,s.CompileHtmlModule,s.L10nPipeModule,s.SharedComponentsModule,m.IconModule,u.TranslateModule.forChild()],providers:[{provide:s.ICatalogDetailsService,useClass:Ut},xt],declarations:[$t,Mt,zt,Vt,Lt,Rt,Ft,Nt],entryComponents:[Vt,zt,$t,Mt,Lt,Rt,Ft,Nt],exports:[Mt]})],CatalogDetailsModule);return CatalogDetailsModule}();var SmarteditContainerFactory=function(e){var t=function(){function Smarteditcontainer(){}Smarteditcontainer=__decorate([i.NgModule({schemas:[i.CUSTOM_ELEMENTS_SCHEMA],imports:__spreadArrays([g.BrowserModule,f.BrowserAnimationsModule,h.FormsModule,h.ReactiveFormsModule,_.UpgradeModule,o.HttpClientModule,ve,s.FundamentalsModule,s.SeGenericEditorModule,s.SharedComponentsModule,s.ClientPagedListModule,s.FilterByFieldPipeModule,Ct,ce.forRoot(),Je,jt,s.SelectModule,ot,At,s.HttpInterceptorModule.forRoot(s.UnauthorizedErrorInterceptor,s.ResourceNotFoundErrorInterceptor,s.RetryInterceptor,s.NonValidationErrorInterceptor,s.PreviewErrorInterceptor,s.PermissionErrorInterceptor),s.SeTranslationModule.forRoot(Se),ke],e.modules,[s.SeRouteService.provideNgRoute([{path:s.NG_ROUTE_PREFIX,shortcutComponent:Dt,component:bt},{path:s.NG_ROUTE_PREFIX+"/sites/:siteId",component:bt},{path:s.NG_ROUTE_PREFIX+"/storefront",canActivate:[Pe],priority:30,titleI18nKey:"se.route.storefront.title",component:It},{path:s.NG_ROUTE_WILDCARD,component:rt}],{useHash:true,initialNavigation:true,onSameUrlNavigation:"reload"})]),declarations:[ft,rt,Dt,s.ConfirmDialogComponent,tt,et,xe,Ot,ue,bt,It],entryComponents:[ft,Dt,s.ConfirmDialogComponent,tt,xe,Ot,ue,bt,It],providers:[{provide:i.ErrorHandler,useClass:s.SmarteditErrorHandler},x,s.SSOAuthenticationHelper,s.moduleUtils.provideValues(e.constants),{provide:p.UrlHandlingStrategy,useClass:s.CustomHandlingStrategy},{provide:d.APP_BASE_HREF,useValue:"!"},s.LegacyGEWidgetToCustomElementConverter,R,{provide:s.IAuthenticationManagerService,useClass:s.AuthenticationManager},{provide:s.IAuthenticationService,useClass:s.AuthenticationService},{provide:s.IConfirmationModalService,useClass:Fe},{provide:s.ISharedDataService,useClass:$},s.SeRouteService,{provide:s.ISessionService,useClass:V},{provide:s.IStorageService,useClass:U},{provide:s.IUrlService,useClass:H},{provide:s.IIframeClickDetectionService,useClass:ye},{provide:s.ICatalogService,useClass:B},{provide:s.IExperienceService,useClass:N},s.SmarteditRoutingService,s.ContentCatalogRestService,s.ProductCatalogRestService,I,s.moduleUtils.bootstrap((function(e,t,n,i,o,r,a,c,l,d,p,u,m,g,h,v,f,_,y){t.initForService(e,["filterEntryPoints","isAuthEntryPoint","authenticate","logout","isReAuthInProgress","setReAuthInProgress","isAuthenticated"],s.diNameUtils.buildServiceName(s.AuthenticationService));c.initListener();n.onSmarteditContainerReady().subscribe((function(){y.init();y.routeChangeSuccess().subscribe((function(e){v.dismissAll()}));a.loadAsObject().then((function(e){h.set("defaultToolingLanguage",e.defaultToolingLanguage);if(!!e.typeAheadDebounce){h.set("typeAheadDebounce",e.typeAheadDebounce)}if(!!e.typeAheadMiniSearchTermLength){h.set("typeAheadMiniSearchTermLength",e.typeAheadMiniSearchTermLength)}}));i.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:s.PERSPECTIVE_SELECTOR_WIDGET_KEY,nameI18nKey:"se.perspective.selector.widget",type:"TEMPLATE",priority:1,section:"left",component:Ot});var e=r.getToolbarService("smartEditHeaderToolbar");e.addItems([{key:"headerToolbar.logoTemplate",type:s.ToolbarItemType.TEMPLATE,component:Ze,priority:1,section:s.ToolbarSection.left},{key:"headerToolbar.userAccountTemplate",type:s.ToolbarItemType.HYBRID_ACTION,iconClassName:"sap-icon--customer",component:Ye,priority:1,actionButtonFormat:"compact",section:s.ToolbarSection.right,dropdownPosition:s.ToolbarDropDownPosition.right},{key:"headerToolbar.languageSelectorTemplate",type:s.ToolbarItemType.HYBRID_ACTION,iconClassName:"sap-icon--world",component:s.HeaderLanguageDropdownComponent,priority:2,actionButtonFormat:"compact",section:s.ToolbarSection.right,dropdownPosition:s.ToolbarDropDownPosition.center},{key:"headerToolbar.configurationTemplate",type:s.ToolbarItemType.ACTION,actionButtonFormat:"compact",iconClassName:"icon-action-settings",callback:function(){o.editConfiguration()},priority:3,section:s.ToolbarSection.right,permissions:["smartedit.configurationcenter.read"]}]);var t=r.getToolbarService("smartEditExperienceToolbar");t.addItems([{key:"se.cms.shortcut",type:s.ToolbarItemType.TEMPLATE,component:Ke,priority:1,section:s.ToolbarSection.left},{key:"experienceToolbar.deviceSupportTemplate",type:s.ToolbarItemType.TEMPLATE,component:He,priority:1,section:s.ToolbarSection.right},{type:s.ToolbarItemType.TEMPLATE,key:"experienceToolbar.experienceSelectorTemplate",component:Xe,priority:1,section:s.ToolbarSection.middle}]);function offSetStorefront(){d(s.SMARTEDIT_IFRAME_WRAPPER_ID).css("padding-top",d(".se-toolbar-group").height()+"px")}function getBootstrapNamespace(){if(window.__smartedit__.smartEditBootstrapped){window.__smartedit__.smartEditBootstrapped={}}return window.__smartedit__.smartEditBootstrapped}l.getInstance().subscribe("loading",(function(e,t){var n=m.defer();p.setCurrentLocation(t.location);u.showWaitModal();var i=getBootstrapNamespace();delete i[t.location];return n.promise}));l.getInstance().subscribe("unloading",(function(e,t){var n=m.defer();u.showWaitModal();return n.promise}));l.getInstance().subscribe("bootstrapSmartEdit",(function(e,t){offSetStorefront();var n=m.defer();var i=getBootstrapNamespace();if(!i[t.location]){i[t.location]=true;a.loadAsObject().then((function(e){g.bootstrapSEApp(e);n.resolve()}))}else{n.resolve()}return n.promise}));l.getInstance().subscribe("smartEditReady",(function(){var e=m.defer();e.resolve();u.hideWaitModal();return e.promise}))}))}),[s.IAuthenticationService,s.GatewayProxy,s.AngularJSBootstrapIndicatorService,s.IFeatureService,Ne,s.IToolbarServiceFactory,I,s.GatewayFactory,s.SmarteditBootstrapGateway,s.YJQUERY_TOKEN,R,s.IWaitDialogService,s.PromiseUtils,b,s.ISharedDataService,s.IModalService,s.IRenderService,fe,s.SmarteditRoutingService]),s.moduleUtils.initialize((function(e,t,n,i,r,a,c,l){s.diBridgeUtils.downgradeService("httpClient",o.HttpClient);s.diBridgeUtils.downgradeService("restServiceFactory",s.RestServiceFactory);s.diBridgeUtils.downgradeService("authenticationService",s.AuthenticationService,s.IAuthenticationService);a.registerDefaultRule({names:[le],verify:function(e){var t=e.map((function(e){return e.name}));return c.hasGlobalPermissions(t)}});e.convert();r.registerRulesAndPermissions();return l.resolveLanguage()}),[s.LegacyGEWidgetToCustomElementConverter,A,o.HttpClient,s.RestServiceFactory,j,s.IPermissionService,s.AuthorizationService,s.L10nService])],bootstrap:[ft]})],Smarteditcontainer);return Smarteditcontainer}();return t};if(true){i.enableProdMode()}t.AlertServiceModule=ve;t.BootstrapService=b;t.CatalogAwareRouteResolverHelper=W;t.ConfigurationExtractorService=S;t.DelegateRestService=A;t.LegacySmarteditServicesModule=Me;t.LoadConfigManagerService=I;t.ProductService=Te;t.SessionService=V;t.SharedDataService=$;t.SmarteditContainerFactory=SmarteditContainerFactory;t.StorageService=U;t.ToolbarModule=Je;t.TranslationsFetchService=Se},495:function(e,t){function webpackEmptyAsyncContext(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}))}webpackEmptyAsyncContext.keys=function(){return[]};webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext;e.exports=webpackEmptyAsyncContext;webpackEmptyAsyncContext.id=495},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(114);var o=n(552);var r=n(93);var a=n(0);var s=n(148);var c=n(274);var l=n(198);var d=n(155);var p=n(52);var u=n(49);var m=n(156);var g=n(4);var h=n(22);var v=n(132);var f=n(45);var _=n(137);var y=n(944);var C=n(57);angular.module("cmsItemDropdownModule",["smarteditServicesModule","genericEditorModule"]).constant("ON_EDIT_NESTED_COMPONENT_EVENT","ON_EDIT_NESTED_COMPONENT").controller("cmsItemDropdownController",["CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","ON_EDIT_NESTED_COMPONENT_EVENT","systemEventService","genericEditorStackService","nestedComponentManagementService","selectComponentTypeModalService","$log",function(e,t,n,i,o,r,a,s){const c="CREATE_NESTED_COMPONENT_BUTTON_PRESSED_EVENT";this.$onInit=function(){this.itemTemplateUrl="cmsItemSearchTemplate.html";this.field.params=this.field.params||{};this.field.editorStackId=this.editorStackId;this.field.params.catalogId=e;this.field.params.catalogVersion=t;this._recompileDom=function(){};this.componentButtonPressedEventId=c+"_"+this.qualifier;this.createComponentButtonUnRegFn=i.subscribe(this.componentButtonPressedEventId,this.onCreateComponentButtonPressed.bind(this));this.editComponentClickedUnRegFn=i.subscribe(n,this.onEditComponentClicked.bind(this))};this.$onDestroy=function(){this.createComponentButtonUnRegFn();this.editComponentClickedUnRegFn()};this.onCreateComponentButtonPressed=function(e,t){this.textTyped=t;if(o.isTopEditorInStack(this.editorStackId,this.id)){if(this.field.subTypes){const e=Object.keys(this.field.subTypes);if(e.length>1){a.open(this.field.subTypes).then(function(e){if(!!e){this.createNestedComponent(e)}}.bind(this))}else{this.createNestedComponent(e[0])}}}};this.onEditComponentClicked=function(e,t){if(o.isTopEditorInStack(this.editorStackId,this.id)){if(this.qualifier===t.qualifier){this.editComponent(t.item)}}};this.configureSeDropdown=function(e){if(Object.keys(this.field.subTypes).length){const t="<y-actionable-search-item data-event-id='"+this.componentButtonPressedEventId+"'></y-actionable-search-item>";e.setResultsHeaderTemplate(t)}}.bind(this);this.createNestedComponent=function(e){const t={componentId:null,componentUuid:null,componentType:e,content:{name:this.textTyped,catalogVersion:this.model.catalogVersion}};return r.openNestedComponentEditor(t,this.editorStackId).then(function(e){if(this.field.collection){if(!this.model[this.qualifier]){this.model[this.qualifier]=[]}this.model[this.qualifier].push(e.uuid)}else{this.model[this.qualifier]=e.uuid}this._recompileDom();this.textTyped=""}.bind(this)).catch(e=>{s.warn("Something went wrong with openNestedComponentEditor method.",e)})};this.editComponent=function(e){const t={componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode||e.itemtype,content:e};r.openNestedComponentEditor(t,this.editorStackId).then(function(){this._recompileDom()}.bind(this))}}]).component("cmsItemDropdown",{templateUrl:"cmsItemDropdownTemplate.html",controller:"cmsItemDropdownController",controllerAs:"cmsItemDropdownCtrl",bindings:{field:"=",qualifier:"=",editorStackId:"=",model:"=",id:"="}});angular.module("componentMenuModule",["smarteditServicesModule","componentTypesTabModule","componentsTabModule"]).controller("componentMenuController",["$q","crossFrameEventService","componentMenuService","SMARTEDIT_DRAG_AND_DROP_EVENTS","EVENTS","DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME",function(e,t,n,i,o,r){const a="ySEComponentMenuOpen";const s="OVERLAY_DISABLED";const c="RESET_COMPONENT_MENU_EVENT";const l={COMPONENT_TYPES_TAB_ID:"componentTypesTab",COMPONENTS_TAB_ID:"componentsTab"};this.isDragging=false;this.model={};this.$onInit=function(){this._recompileDom=function(){};this._initializeComponentMenu();this.removePageChangeEventHandler=t.subscribe(o.PAGE_CHANGE,this._initializeComponentMenu);this.removeOpenComponentEventHandler=t.subscribe(a,this._resetComponentMenu);this.removeDropdownEvent=t.subscribe(i.DRAG_DROP_START,function(){this.isDragging=true;this._closeMenu()}.bind(this));this.removeOverlapEvent=t.subscribe(s,this._closeMenu);this.removeDragEndEvent=t.subscribe(i.DRAG_DROP_END,function(){this.isDragging=false;t.publish(r.END)}.bind(this))};this.$onDestroy=function(){this.removePageChangeEventHandler();this.removeOpenComponentEventHandler();this.removeDropdownEvent();this.removeOverlapEvent();this.removeDragEndEvent()};this._initializeComponentMenu=function(){this.tabsList=null;this._recompileDom();n.hasMultipleContentCatalogs().then(function(e){this.hasMultipleContentCatalogs=e;const t={id:l.COMPONENT_TYPES_TAB_ID,title:"se.cms.compomentmenu.tabs.componenttypes",templateUrl:"componentTypesTabWrapperTemplate.html"};const n={id:l.COMPONENTS_TAB_ID,title:"se.cms.compomentmenu.tabs.customizedcomp",templateUrl:"componentsTabWrapperTemplate.html"};this.model={componentsTab:{hasMultipleContentCatalogs:e},isOpen:this.actionItem.isOpen};this.tabsList=[t,n];this._resetComponentMenu()}.bind(this))}.bind(this);this._resetComponentMenu=function(){if(this.tabsList){if(!this.actionItem.isOpen){this.tabsList=this.tabsList.map((function(e){return Object.assign(e,{active:e.id===l.COMPONENT_TYPES_TAB_ID})}))}t.publish(c)}}.bind(this);this._closeMenu=function(){if(this.actionItem){this.actionItem.isOpen=false}}.bind(this);this.$onChanges=function(){this.model.isOpen=this.actionItem.isOpen;if(this.actionItem.isOpen){t.publish(r.START)}else if(!this.actionItem.isOpen&&!this.isDragging){t.publish(r.END)}}}]).component("componentMenu",{templateUrl:"componentMenuTemplate.html",controller:"componentMenuController",bindings:{actionItem:"<"}});angular.module("componentItemModule",["cmsSmarteditServicesModule","translationServiceModule"]).controller("componentItemController",["assetsService","componentSharedService","$translate",function(e,t,n){this.$onInit=function(){t.isComponentShared(this.componentInfo).then(function(e){this.isSharedComponent=e}.bind(this))};this.getTemplateInfoForNonCloneableComponent=function(){const e=n.instant("se.cms.component.non.cloneable.tooltip",{componentName:this.componentInfo.name});return"<div class='se-popover--inner-content'>"+e+"</div>"};this.$onChanges=function(e){if(e.cloneOnDrop){this.componentDisabled=this.cloneOnDrop&&!this.componentInfo.cloneable}}}]).component("componentItem",{templateUrl:"componentItemTemplate.html",controller:"componentItemController",bindings:{componentInfo:"<",cloneOnDrop:"<"}});angular.module("componentSearchModule",["smarteditServicesModule"]).controller("componentSearchController",["systemEventService",function(e){const t="RESET_COMPONENT_MENU_EVENT";this.$onInit=function(){this._oldValue="";this._resetSearchBox();this.removeResetEventListener=e.subscribe(t,this._resetSearchBox)};this.$onDestroy=function(){this.removeResetEventListener()};this.$doCheck=function(){if(this.searchTerm!==this._oldValue){this._oldValue=this.searchTerm;this.showResetButton=this.searchTerm!=="";this.onChange({searchTerm:this.searchTerm})}};this._resetSearchBox=function(){this.searchTerm=""}.bind(this)}]).component("componentSearch",{templateUrl:"componentSearchTemplate.html",controller:"componentSearchController",bindings:{onChange:"&",placeholder:"@"}});angular.module("componentTypeModule",["cmsSmarteditServicesModule"]).controller("componentTypeController",(function(){this.$onInit=function(){}})).component("componentType",{templateUrl:"componentTypeTemplate.html",controller:"componentTypeController",bindings:{typeInfo:"<"}});angular.module("componentTypesTabModule",["smarteditServicesModule","componentSearchModule","componentTypeModule","cmsSmarteditServicesModule"]).controller("componentTypesTabController",["$q","$log","componentService","pageService","catalogService","languageService","crossFrameEventService",function(e,t,n,i,o,r,a){this.pageInfo=null;this.uriContext=null;const s="SWITCH_LANGUAGE_EVENT";this.onSearchTermChanged=function(e){this.searchTerm=e}.bind(this);this.$onInit=function(){this.unRegisterEventService=a.subscribe(s,function(){this.searchTerm=this.searchTerm!==undefined?undefined:""}.bind(this))};this.loadPageContext=function(){if(this.pageInfo){return e.when()}return e.all([i.getCurrentPageInfo(),e.when(o.retrieveUriContext())]).then(function(e){this.pageInfo=e[0];this.uriContext=e[1]}.bind(this))};this.loadComponentTypes=function(i,o,a){return e.all([r.getResolveLocale(),this.loadPageContext()]).then(function(e){const t={pageId:this.pageInfo.uid,catalogId:this.uriContext.CURRENT_CONTEXT_CATALOG,catalogVersion:this.uriContext.CURRENT_CONTEXT_CATALOG_VERSION,mask:i,langIsoCode:e[0],pageSize:o,currentPage:a};return n.getSupportedComponentTypesForCurrentPage(t)}.bind(this)).then(function(e){return e}.bind(this)).catch((function(e){t.error("ComponentMenuController.$onInit() - error loading types. "+e)}))}.bind(this);this.$onDestroy=function(){this.unRegisterEventService()}}]).component("componentTypesTab",{templateUrl:"componentTypesTabTemplate.html",controller:"componentTypesTabController",bindings:{isTabActive:"<",isMenuOpen:"<"}});angular.module("componentsTabModule",["componentItemModule"]).constant("ENABLE_CLONE_ON_DROP","enableCloneComponentOnDrop").controller("componentsTabController",["$q","lodash","componentMenuService","componentService","sharedDataService","ENABLE_CLONE_ON_DROP",function(e,t,n,i,o,r){this.$onInit=function(){this.catalogVersions=null;this.selectedCatalogVersionId=null;this.selectedCatalogVersion=null;this.catalogVersionTemplate="catalogVersionTemplate.html";o.get(r).then(function(e){this.cloneOnDrop=e||false}.bind(this));if(this.hasMultipleContentCatalogs){this.catalogVersionsFetchStrategy={fetchAll:this.fetchCatalogVersions}}else{this.fetchCatalogVersions().then(function(){this.onCatalogVersionChange()}.bind(this))}this.resetComponentsList=function(){};this.searchTerm=""};this.onCatalogVersionChange=function(){if(this.selectedCatalogVersionId){this.selectedCatalogVersion=this.catalogVersions.filter(function(e){return e.id===this.selectedCatalogVersionId}.bind(this))[0];n.persistCatalogVersion(this.selectedCatalogVersionId);this.resetComponentsList()}}.bind(this);this.onSearchTermChanged=function(e){this.searchTerm=e}.bind(this);this.fetchCatalogVersions=function(){return n.getValidContentCatalogVersions().then(function(e){this.catalogVersions=e;return n.getInitialCatalogVersion(this.catalogVersions).then(function(t){this.selectedCatalogVersion=t;this.selectedCatalogVersionId=this.selectedCatalogVersion?this.selectedCatalogVersion.id:undefined;return e}.bind(this))}.bind(this))}.bind(this);this.loadComponentItems=function(n,o,r){if(!this.selectedCatalogVersion){return e.when({results:[]})}const a={catalogId:this.selectedCatalogVersion.catalogId,catalogVersion:this.selectedCatalogVersion.catalogVersionId,mask:n,pageSize:o,page:r};return i.loadPagedComponentItemsByCatalogVersion(a).then(function(e){const n=t.cloneDeep(e);n.results=n.response;delete n.response;return n}.bind(this))}.bind(this);this.onComponentCloneOnDropChange=function(){o.set(r,this.cloneOnDrop)}}]).component("componentsTab",{templateUrl:"componentsTabTemplate.html",controller:"componentsTabController",bindings:{hasMultipleContentCatalogs:"<",isActive:"<"}});angular.module("genericTabModule",["genericEditorModule","resourceLocationsModule","componentEditorModule","smarteditServicesModule"]).controller("genericTabCtrl",["TYPES_RESOURCE_URI","systemEventService",function(e,t){const n="cms-link-to-reload-structure";const i=e+"?code=:smarteditComponentType&mode=:structureApiMode";this.$onInit=function(){this.structureApi=this.getStructureApiByMode("DEFAULT");this.changeStructureEventListener=t.subscribe(n,this.onChangeStructureEvent.bind(this))};this.onChangeStructureEvent=function(e,t){if(t.structureApiMode){this.tabStructure=null;this.structureApi=this.getStructureApiByMode(t.structureApiMode)}else if(t.structure){this.structureApi=null;this.tabStructure=t.structure.attributes}this.content=t.content};this.$onDestroy=function(){this.changeStructureEventListener()};this.getStructureApiByMode=function(e){return i.replace(/:structureApiMode/gi,e)}}]).component("genericTab",{transclude:false,templateUrl:"componentEditorWrapperTemplate.html",controller:"genericTabCtrl",bindings:{saveTab:"=",resetTab:"=",cancelTab:"=",isDirtyTab:"=",componentId:"<",componentType:"<",tabId:"<",componentInfo:"<",content:"<"}});angular.module("catalogAwareSelectorModule",["yEditableListModule"]).controller("CatalogAwareSelectorController",["$q","$log","$translate","lodash",function(e,t,n,i){const o="se.cms.catalogaware.catalogitemtype.default";this.model=[];this.currentOptions={};this.itemsList=[];this.$onInit=function(){if(this.editable===undefined){this.editable=true}this.exposedModel.$viewChangeListeners.push(this._syncFromExternalModel);this.exposedModel.$render=this._syncFromExternalModel;this.catalogItemTypeKey=this.catalogItemTypeKey?this.catalogItemTypeKey:o;n(this.catalogItemTypeKey).then(function(e){this.catalogItemType=e}.bind(this))};this._syncFromExternalModel=function(){if(this.model.length===0){this.model.push.apply(this.model,this.exposedModel.$modelValue);this._syncFromModelToItemsList()}}.bind(this);this._syncFromItemsListToModel=function(){this.model.length=0;this.itemsList.map(function(e){this.model.push(e.id)}.bind(this))};this._syncFromModelToItemsList=function(){const e={};const n=[];this.model.map(function(t){const o=i.find(this.itemsList,(function(e){return e.id===t}));if(o){e[t]=o}else{n.push(t)}}.bind(this));this._fetchItems(n,e).then(function(){this.itemsList.length=0;this.model.map(function(n){const i=e[n];if(!i){t.warn("[seCatalogAwareSelector] - Cannot find item with key ",n)}else{this.itemsList.push(i)}}.bind(this));if(this._refreshListWidget&&i.isFunction(this._refreshListWidget)){this._refreshListWidget()}}.bind(this))};this._fetchItems=function(t,n){let i=e.when(null);if(t.length>0){if(this.itemsFetchStrategy.fetchAll){i=this.itemsFetchStrategy.fetchAll().then((function(e){t.map(function(t){n[t]=e.find((function(e){return e.id===t}))}.bind(this))}))}else if(this.itemsFetchStrategy.fetchEntities){i=this.itemsFetchStrategy.fetchEntities(this.model).then(function(e){e.map((function(e){n[e.id]=e}))}.bind(this))}else if(this.itemsFetchStrategy.fetchEntity){const i=[];t.map(function(e){i.push(this.itemsFetchStrategy.fetchEntity(e))}.bind(this));return e.all(i).then((function(e){e.map((function(e){n[e.id]=e}))}))}else{throw Error("[seCatalogAwareSelector] Invalid items fetch strategy. Cannot retrieve information.")}}return i};this.listIsEmpty=function(){return this.model.length===0};this.openEditingPanel=function(){this.showPanel()};this.setShowPanel=function(e){this.showPanel=e};this.onPanelChange=function(e){this._syncFromModelToItemsList();this.exposedModel.$setViewValue(this.model)}.bind(this);this.onListChange=function(){this._syncFromItemsListToModel();this.exposedModel.$setViewValue(this.model)}.bind(this)}]).component("seCatalogAwareSelector",{templateUrl:"catalogAwareSelectorTemplate.html",controller:"CatalogAwareSelectorController",controllerAs:"ctrl",require:{exposedModel:"ngModel"},bindings:{id:"@",getCatalogs:"<",itemsFetchStrategy:"<",itemComponent:"<?",nodeComponent:"<?",catalogItemTypeKey:"@?",editable:"<?",maxNumItems:"<?"}});(function(){var e=e||window.angular;var t=null;try{t=e.module("cmssmarteditContainerTemplates")}catch(e){}t=t||e.module("cmssmarteditContainerTemplates",[]);t.run(["$templateCache",function(e){e.put("ItemManagerComponent.html",'<div><se-generic-editor [id]="editorId" [smarteditComponentId]="itemId" [smarteditComponentType]="componentType" [structureApi]="structureApi" [content]="item" [contentApi]="contentApi" [(isDirty)]="isDirtyInternal" [(submit)]="submit" [uriContext]="uriContext" [reset]="reset"></se-generic-editor></div>');e.put("NavigationManagementPageComponent.html",'<div class="se-navigation-management-page-list-template"><div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditNavigationToolbar"></se-toolbar></div><div class="se-navigation-editor-wrapper" *ngIf="readOnly !== undefined"><div class="se-navigation-editor-header"><h1 class="se-navigation-editor-header__title" translate="se.cms.navigationmanagement.title"></h1><h4 class="se-navigation-editor-header__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</h4></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="readOnly"></se-navigation-editor-tree></div></div>');e.put("revertBackSlotConfirmationTemplate.html",'<se-message [type]="\'info\'" [message-id]="\'revertBackSlotYMessage\'"><ng-container se-message-description><translate>se.cms.slot.revert.sync.ymessage</translate></ng-container></se-message><div data-translate="se.cms.slot.revert.description" class="fd-has-margin-top-small"></div>');e.put("pageInWorkflowNotificationTemplate.html",'<div><span data-translate="se.cms.workflow.page.in.workflow"></span></div>');e.put("cmsItemDropdownTemplate.html",'<div class="cms-nested-component-template"><div data-recompile-dom="cmsItemDropdownCtrl._recompileDom" class="cms-nested-component-select"><se-dropdown data-field="cmsItemDropdownCtrl.field" data-qualifier="cmsItemDropdownCtrl.qualifier" data-model="cmsItemDropdownCtrl.model" data-id="cmsItemDropdownCtrl.id" data-item-template-url="cmsItemDropdownCtrl.itemTemplateUrl" data-get-api="cmsItemDropdownCtrl.configureSeDropdown($api)" data-show-remove-button="true"></se-dropdown></div></div>');e.put("cmsItemDropdownWrapperTemplate.html",'<cms-item-dropdown data-field="field" data-qualifier="qualifier" data-model="model" data-editor-stack-id="editorStackId" data-id="id"></cms-item-dropdown>');e.put("componentMenuTemplate.html",'<div class="se-component-menu" data-recompile-dom="$ctrl._recompileDom" data-ng-class="{ \'se-component-menu__localized\': $ctrl.hasMultipleContentCatalogs }"><div data-translate="se.cms.componentmenu.dropdown.header" class="se-component-menu__title"></div><div class="se-component-menu__tip" data-translate="se.cms.componentmenu.label.draganddrop"></div><se-tabs class="se-component-menu__tabs" [tabs-list]="$ctrl.tabsList" [model]="$ctrl.model" [num-tabs-displayed]="2"></se-tabs></div>');e.put("componentMenuWrapperTemplate.html",'<component-menu data-action-item="item"></component-menu>');e.put("CmsLinkToSelectComponent.html",'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="qualifier" [model]="optionModel"></se-generic-editor-dropdown>');e.put("RestrictionsListComponent.html",'<div class="restrictions-list"><div class="restrictions-list__info"><label translate="se.cms.restrictions.criteria"></label> <span>&nbsp;{{ pageInfo.restrictionsCriteria }}</span></div><div class="restrictions-list__items" *ngFor="let restriction of restrictions"><div class="restrictions-list__item"><div class="restrictions-list__item-name">{{ restriction.name }}</div><div class="restrictions-list__item-type">{{ restriction.type | seL10n | async }}</div><div class="restrictions-list__item-description">{{ restriction.description }}</div></div></div></div>');e.put("SlotSharedCloneActionFieldComponent.html",'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="components-in-slot-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot\'"></label><div id="components-in-slot-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="clone-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.clone"/> <label for="clone-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.cloneall\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="remove-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.remove"/> <label for="remove-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.removeall\'"></label></div></div></div></div>');e.put("SlotSharedSlotTypeFieldComponent.html",'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="slot-replacement-type-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype\'"></label><div id="slot-replacement-type-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-custom" [(ngModel)]="page.isSlotCustom" [value]="true"/> <label for="slot-type-custom" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.custom\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-local" [(ngModel)]="page.isSlotCustom" [value]="false"/> <label for="slot-type-local" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.local\'"></label></div></div></div></div>');e.put("WorkflowCreateVersionFieldComponent.html",'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label class="fd-form__label"><input type="checkbox" class="fd-form__control" name="createVersion" [(ngModel)]="model.createVersion"/> {{ \'se.cms.workflow.editor.create.version\' | translate }}</label></div><div class="fd-form__item" *ngIf="model.createVersion"><label class="fd-form__label version-label__title" for="versionLabel" translate="se.cms.workflow.editor.create.version.label"></label> <input type="text" name="versionLabel" class="fd-form__control" [class.has-error]="field.hasErrors" [(ngModel)]="model.versionLabel"/></div></div>');e.put("InfoPageNameComponent.html",'<div class="se-page-info__name"><se-homepage-icon *ngIf="field.qualifier === \'name\'" [cmsPage]="cmsPage" [uriContext]="uriContext"></se-homepage-icon><div id="{{ field.qualifier }}-homepage" class="se-page-info__name-value fd-form-control" [title]="field.qualifier">{{ model[qualifier] }}</div></div>');e.put("LinkToggleComponent.html",'<div class="se-link-toggle"><div class="se-link-toggle__row"><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="external-link"><input class="fd-form__control se-link-toggle__input" id="external-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="true"/> {{ \'se.editor.linkto.external.label\' | translate}}</label></div><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="internal-link"><input class="fd-form__control se-link-toggle__input" id="internal-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="false"/> {{ \'se.editor.linkto.internal.label\' | translate}}</label></div></div><input class="fd-form-control" id="urlLink" name="urlLink" type="text" [(ngModel)]="model.linkToggle.urlLink" [ngClass]="{ \'has-error\': field.hasErrors }"/></div>');e.put("PageTypeEditorComponent.html",'<div class="se-edit-page-info__basic-tab"><div class="se-edit-page-info__page-type"><label class="se-control-label" translate="se.cms.pageinfo.page.type"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.typeCode }}</div></div><div class="se-edit-page-info__page-template"><label class="se-control-label" translate="se.cms.pageinfo.page.template"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.template }}</div></div></div>');e.put("NavigationEditorTreeComponent.html",'<div class="se-navigation-editor-tree__header" *ngIf="!readOnly"><button class="se-navigation-editor-tree__btn fd-button" (click)="actions.addTopLevelNode()"><span [translate]="\'se.cms.navigationmanagement.add.top.level.node\'" class="se-navigation-editor-tree__btn--text"></span></button></div><div class="se-navigation-editor-tree categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div [translate]="\'se.ytree.template.header.name\'" class="se-navigation-editor-tree__name col-xs-3"></div><div [translate]="\'se.ytree.template.header.title\'" class="se-navigation-editor-tree__title col-xs-3"></div><div class="col-xs-1 pull-right"></div><div [translate]="\'se.ytree.template.header.entry\'" class="se-navigation-editor-tree__entry col-xs-5 pull-right"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodeComponent" [removeDefaultTemplate]="true" [nodeActions]="actions" [dragOptions]="dragOptions"></se-tree></div>');e.put("NavigationNodeComponent.html",'<div class="pull-right dropdown tree-node se-tree-node__actions col-sm-1" [hidden]="isReadOnly"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div><div class="se-tree-node__name col-xs-3" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="pull-right tree-node se-tree-node__entry col-xs-5"><se-tooltip class="se-dropdown-item__delete-page-popover" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="se-tree-node__popover"><span>{{ entryString }} </span></span><span se-tooltip-body>{{ entryString }}</span></se-tooltip></div><div class="se-tree-node__title col-xs-2"><span [hidden]="!node.title">{{ node.title | seL10n | async }}</span></div>');e.put("SingleActiveCatalogAwareItemSelectorComponent.html",'<div *ngIf="propertyType"><div id="product-catalog"><label class="se-control-label" [ngClass]="{ \'required\': field.required }" *ngIf="catalogs.length === 1">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id="se-catalog-selector-dropdown" *ngIf="catalogs.length > 1" [field]="productCatalogField" [qualifier]="\'productCatalog\'" [model]="model"></se-generic-editor-dropdown></div><div><label class="se-control-label" [translate]="mainDropDownI18nKey"></label><se-generic-editor-dropdown id="se-items-selector-dropdown" [field]="field" [qualifier]="qualifier" [model]="model" [itemComponent]="itemComponent" [(reset)]="reset"></se-generic-editor-dropdown></div></div><div class="product-catalog-item-type-missing" *ngIf="!propertyType" translate="se.cms.catalogawareitem.itemtype.notsupported"></div>');e.put("DeletePageToolbarItemComponent.html",'<div class="toolbar-action" *ngIf="isReady" [attr.data-item-key]="toolbarItem.key"><button type="button" class="btn toolbar-action--button" [disabled]="isDeletePageDisabled" [ngClass]="{ \'toolbar-action__disabled\' : isDeletePageDisabled }" (click)="deletePage()"><span class="icon-delete se-toolbar-menu-ddlb--button__icon"></span><div class="toolbar-action-button__txt" translate="se.cms.actionitem.page.trash"></div></button><se-tooltip *ngIf="isDeletePageDisabled" [appendTo]="\'body\'" [isChevronVisible]="true" [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [additionalClasses]="[\'se-tooltip--stretched\']"><div se-tooltip-body><span [translate]="tooltipMessage"></span></div></se-tooltip></div>');e.put("HomepageIconComponent.html",'<se-tooltip *ngIf="isVisible()" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><span se-tooltip-trigger class="sap-icon--home se-homepage-icon" [ngClass]="getIconClass()"></span> <span se-tooltip-body [translate]="getTooltipMessage()"></span></se-tooltip>');e.put("PageInfoMenuComponent.html",'<div class="toolbar-action" data-item-key="se.cms.pageInfoMenu"><fd-popover [(isOpen)]="toolbarItem.isOpen" (isOpenChange)="onDropdownToggle($event)" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-pressed]="toolbarItem.isOpen"><span class="hyicon hyicon-pageinfo se-toolbar-menu-ddlb--button__icon"></span><div class="se-toolbar-page-info-wrapper"><span class="toolbar-action-button__txt" [translate]="toolbarItem.name"></span></div></button></fd-popover-control><fd-popover-body><div class="se-page-info__dropdown-menu toolbar-action--include"><div class="se-page-info-menu" *ngIf="toolbarItem.isOpen"><se-prevent-vertical-overflow><div class="se-page-info-menu__header"><span class="se-page-info-menu__header-title" translate="se.cms.pageinfo.information.title"></span><div *seHasOperationPermission="editPagePermission"><button class="se-page-info__edit-btn fd-button--compact" *ngIf="isReady" translate="se.cms.contextmenu.title.edit" (click)="onEditPageClick()"></button></div></div><div *ngIf="isReady" class="se-page-info-menu__body"><se-generic-editor [smarteditComponentId]="pageInfo.uid" [smarteditComponentType]="pageInfo.typeCode" [structure]="pageStructure" [content]="pageInfo"></se-generic-editor></div></se-prevent-vertical-overflow></div></div></fd-popover-body></fd-popover></div>');e.put("PageListComponent.html",'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditPagesToolbar"></se-toolbar><div *ngIf="isReady"><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.pagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="se-page-list__table-header--right"><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" maxlength="255" name="query" [ngModel]="query" (ngModelChange)="onQueryChange($event)" [placeholder]="\'se.cms.pagelist.searchplaceholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="query" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div><button class="fd-button se-page-list__add" (click)="openAddPageWizard()" translate="se.cms.addpagewizard.addpage"></button></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list [config]="pageListConfig" [mask]="query" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div></div>');e.put("PageListLinkComponent.html",'<div><a class="page-list-link-item__link" [href]="getLink()" translate="se.cms.cataloginfo.pagelist"></a></div>');e.put("PagesLinkComponent.html",'<div class="se-page-list__page-link--left" (click)="backToPagelist()"><span class="se-page-list__page-link-icon icon-navigation-left-arrow"></span> <a class="se-page-list__page-link-anchor">{{ \'se.cms.back.to.pagelist\' | translate }}</a></div>');e.put("RestrictionsModalComponent.html",'<div class="se-restrictions-list fd-menu__list fd-menu__list--separated"><div class="se-restriction__item fd-menu__item" *ngFor="let restriction of restrictions"><div class="se-restrictions-list__item-content"><div class="se-restriction__item-name">{{ restriction.name }}</div><div class="se-restriction__item-type-and-id">{{ restriction.type | seL10n | async }}</div><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>');e.put("RestrictionsViewerComponent.html",'<div *ngIf="restrictions?.length > 0; else noRestrictions"><a href="" class="show-restrictions-btn" (click)="showRestrictions($event)">{{restrictions.length}}</a></div><ng-template #noRestrictions><div>-</div></ng-template>');e.put("TrashLinkComponent.html",'<div *ngIf="isNonActiveCatalog" (click)="goToTrash()" class="se-page-list__page-link--right"><a translate="se.cms.pagelist.trashcan.link.text" [translateParams]="trashedPagesTranslationData" class="se-page-list__page-link-anchor"></a> <span class="se-page-list__page-link-icon sap-icon--navigation-right-arrow"></span></div>');e.put("TrashedPageListComponent.html",'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell ySmartEditTrashPageToolbar" imageRoot="imageRoot" toolbarName="smartEditTrashPageToolbar"></se-toolbar><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.trashedpagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}" [ngModel]="mask" (ngModelChange)="onMaskChange($event)" name="mask"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="mask" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list class="se-trashed-pages" [config]="trashedPageListConfig" [mask]="mask" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div>');e.put("catalogDetailsSyncTemplate.html",'<se-synchronize-catalog [catalog]="$ctrl.catalog" [catalog-version]="$ctrl.catalogVersion" [active-catalog-version]="$ctrl.activeCatalogVersion"></se-synchronize-catalog>');e.put("CmsDropdownItemComponent.html",'<div class="cms-nested-component" *ngIf="item" [attr.data-component-id]="item.uid"><span class="cms-nested-component__item" *ngIf="isSelected" (click)="onClick($event);"><span class="sap-icon--card cms-nested-component__item-icon"></span><div class="cms-nested-component__item-data"><p class="cms-nested-component__item-name" [title]="item.name">{{ item.name }}</p><p class="cms-nested-component__item-type" [title]="item.typeCode">{{ item.typeCode }}</p></div></span><div class="cms-nested-component__result-item" *ngIf="!isSelected"><span class="cms-nested-component__result-name" [title]="item.name">{{ item.name }}</span> <span class="cms-nested-component__result-code" [title]="item.typeCode">{{ item.typeCode }}</span></div></div>');e.put("cmsItemSearchTemplate.html",'<se-cms-dropdown-item [item]="item" [qualifier]="ySelect.id" [is-selected]="selected"></se-cms-dropdown-item>');e.put("catalogVersionTemplate.html",'<div class="se-component-menu__select-local"><span class="hyicon hyicon-globe se-component-menu__select-globe" data-ng-if="item.isCurrentCatalog == false"></span> <span class="se-component-menu__select-text">{{item.catalogName | l10n}} - {{item.catalogVersionId}}</span></div>');e.put("componentInfoPopoverTemplate.html",'<div data-translate="se.cms.component.display.off.tooltip"></div>');e.put("componentItemTemplate.html",'<div class="se-component-item" data-ng-class=\'{        "se-component-item--disabled": $ctrl.componentDisabled,        "smartEditComponent": !$ctrl.componentDisabled }\' data-smartedit-component-id="{{$ctrl.componentInfo.uid}}" data-smartedit-component-uuid="{{$ctrl.componentInfo.uuid}}" data-smartedit-component-type="{{$ctrl.componentInfo.typeCode}}"><div class="se-component-item--disabled-overlay" data-ng-if="$ctrl.componentDisabled" data-y-popover data-trigger="\'hover\'" data-placement="\'bottom\'" data-template="$ctrl.getTemplateInfoForNonCloneableComponent()"></div><div class="se-component-item--image"><span class="sap-icon--card"></span><div data-ng-if="$ctrl.isSharedComponent"><span class="se-component-item--image-shared--background"></span> <span class="glyphicon glyphicon-link se-component-item--image-shared"></span></div></div><div class="se-component-item--details-container"><div class="se-component-item--details" title="{{$ctrl.componentInfo.name}} - {{$ctrl.componentInfo.typeCode}}"><div class="se-component-item--details-name">{{$ctrl.componentInfo.name}}</div><div class="se-component-item--details-type">{{$ctrl.componentInfo.typeCode}}</div></div><div data-ng-if="!$ctrl.componentInfo.visible" class="se-component-item--visibility" data-y-popover data-trigger="\'hover\'" data-placement="\'bottom\'" data-template-url="\'componentInfoPopoverTemplate.html\'"><span class="hyicon hyicon-unpowered"></span></div></div></div>');e.put("componentSearchTemplate.html",'<div class="se-input-group se-component-menu__input-group"><input type="text" class="se-input-group__input-area" name="search-term" data-ng-model="$ctrl.searchTerm" data-ng-model-options="{debounce: 500}" placeholder="{{$ctrl.placeholder | translate}}"/> <span class="sap-icon--search se-input-group__addon"></span><div data-ng-show="$ctrl.showResetButton" class="se-input-group__addon se-input-group__clear-btn" data-ng-click="$ctrl._resetSearchBox()"><span class="sap-icon--decline"></span></div></div>');e.put("componentTypeTemplate.html",'<div class="se-component-item smartEditComponent" data-smartedit-component-type="{{$ctrl.typeInfo.code}}"><div class="se-component-item--image"><span class="sap-icon--card"></span></div><div class="se-component-item--details-type" title="{{$ctrl.typeInfo.i18nKey | translate}}">{{$ctrl.typeInfo.name}}</div></div>');e.put("componentTypesTabTemplate.html",'<div class="se-component-menu__types-header"><component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)" class="se-component-menu__type-search" data-placeholder="se.cms.componentmenu.search.type.placeholder"></component-search></div><div class="se-component-menu__result-container"><se-infinite-scrolling class="se-component-menu__infinite-scroll" data-ng-if="$ctrl.isMenuOpen || $ctrl.isTabActive" drop-down-class="ySEComponents" [page-size]="10" [mask]="$ctrl.searchTerm" [fetch-page]="$ctrl.loadComponentTypes" [context]="$ctrl"><div class="se-component-menu__result se-component-menu__result--types"><div class="se-component-menu__item-wrap" data-ng-repeat="componentType in $ctrl.items"><component-type data-type-info="componentType"></component-type></div></div></se-infinite-scrolling></div>');e.put("componentTypesTabWrapperTemplate.html",'<component-types-tab is-tab-active="tab.active" is-menu-open="model.isOpen"></component-types-tab>');e.put("componentsTabTemplate.html",'<div class="se-component-menu__tabs-header"><div class="se-component-menu__tabs-header--upper" data-ng-if="$ctrl.hasMultipleContentCatalogs == true"><y-select class="se-component-menu__select" data-id="uuid" data-ng-model="$ctrl.selectedCatalogVersionId" data-on-change="$ctrl.onCatalogVersionChange" data-fetch-strategy="$ctrl.catalogVersionsFetchStrategy" data-item-template="::$ctrl.catalogVersionTemplate" data-search-enabled="false"/></div><div class="se-component-menu__tabs-header--lower"><component-search data-on-change="$ctrl.onSearchTermChanged(searchTerm)" class="se-component-menu__tabs-search" data-placeholder="se.cms.componentmenu.search.placeholder"></component-search><fieldset class="fd-form__set"><div class="fd-form__item fd-form__item--check se-component-menu__clone-on-drop"><input type="checkbox" class="fd-form__control se-component-menu__clone-check-box" id="component-clone-checkbox" name="clone-on-drop" data-ng-model="$ctrl.cloneOnDrop" data-ng-change="$ctrl.onComponentCloneOnDropChange()"/> <label class="fd-form__label se-component-menu__clone-label" for="component-clone-checkbox" data-translate="se.cms.component.clone.on.drop.label"></label></div></fieldset></div></div><div class="se-component-menu__result-container" recompile-dom="$ctrl.resetComponentsList"><se-infinite-scrolling data-ng-if="$ctrl.isActive" class="se-component-menu__infinite-scroll" data-ng-class="{\'se-component-menu__infinite-scroll--short\': $ctrl.hasMultipleContentCatalogs == true}" drop-down-class="ySEComponents" [page-size]="10" [mask]="$ctrl.searchTerm" [fetch-page]="$ctrl.loadComponentItems" [context]="$ctrl"><div class="se-component-menu__result"><component-item class="se-component-menu__item-wrap" data-component-info="item" data-clone-on-drop="$ctrl.cloneOnDrop" data-ng-repeat="item in $ctrl.items track by item.uid"></component-item></div></se-infinite-scrolling></div>');e.put("componentsTabWrapperTemplate.html",'<div><components-tab has-multiple-content-catalogs="model.componentsTab.hasMultipleContentCatalogs" is-active="tab.active"></components-tab></div>');e.put("basicTabTemplate.html",'<basic-tab class="sm-tab-content" save-tab="onSave" reset-tab="onReset" cancel-tab="onCancel" is-dirty-tab="isDirty" data-tab-id="tabId" data-component-info="model" data-content="model.content" component-id="model.componentUuid" component-type="model.componentType"></basic-tab>');e.put("ComponentRestrictionsEditorComponent.html",'<se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="model" [restrictionUuids]="model.restrictions" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>');e.put("DuplicatePrimaryContentPageLabelComponent.html",'<div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="overwritePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.overwritePage)" [value]="RESOLUTION_OPTIONS.overwritePage"/> <label for="overwritePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.overwrite\'"></label></div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="renamePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.renamePageLabel)" [value]="RESOLUTION_OPTIONS.renamePageLabel"/> <label for="renamePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.rename\'"></label></div><div class="rename-label-section" *ngIf="conflictResolution === RESOLUTION_OPTIONS.renamePageLabel"><label [translate]="\'se.cms.page.restore.page.label\'"></label> <input type="text" class="form-control" [(ngModel)]="page[\'label\']"/></div></div>');e.put("DuplicatePrimaryNonContentPageComponent.html",'<div><label [translate]="label"></label></div>');e.put("MissingPrimaryContentPageComponent.html",'<div><div><label class="missing-primary-content-page-message__label" [translate]="\'se.cms.page.restore.content.page.noprimaryforvariation.msg\'"></label></div><se-select id="se-page-restore-change-primary-selector-dropdown" [(model)]="cmsPage.label" [fetchStrategy]="fetchStrategy"></se-select></div>');e.put("RestrictionManagementComponent.html",'<div *ngIf="isReady"><div *ngIf="isEditMode"><se-restriction-management-edit [restriction]="config?.restriction" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-edit></div><div *ngIf="!isEditMode"><se-restriction-management-select [existingRestrictions]="config?.existingRestrictions" [fetchRestrictionTypes]="config?.getRestrictionTypesFn" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-select></div></div>');e.put("RestrictionManagementEditComponent.html",'<div *ngIf="ready"><div *ngIf="isTypeSupported"><div class="se-restriction-management-edit__header"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]="restriction" [mode]="itemManagementMode" [structureApi]="structureApi" [contentApi]="contentApi" [uriContext]="uriContext" [componentType]="restriction.itemtype" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div></div><div *ngIf="!isTypeSupported"><div class="se-restrictions-list__item-content"><div translate="se.cms.restriction.management.select.type.not.supported.warning"></div><p class="se-restriction__item-name">{{ restriction.name }}</p><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>');e.put("RestrictionManagementSelectComponent.html",'<div><se-message [style.display]="showWarningMessage() ? \'block\' : \'none\'" [type]="\'warning\'"><span se-message-title translate="se.cms.restriction.management.select.type.not.supported.warning"></span></se-message><div class="se-restriction-management-select__select"><label class="se-control-label">{{ \'se.cms.restriction.management.select.type.label\' | translate }}</label><se-select id="restriction-type" [fetchStrategy]="fetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restriction.management.select.type.placeholder\'" [(model)]="selectModel.selectedIds.restrictionType" (modelChange)="selectRestrictionType()" [searchEnabled]="false"></se-select></div><div *ngIf="viewConfig.showRestrictionSelector" class="se-restriction-management-select__restriction-info"><label class="se-control-label" translate="se.cms.restriction.management.select.restriction.label"></label><se-select id="restriction-name" [fetchStrategy]="fetchOptions" [(model)]="selectModel.selectedIds.restriction" (modelChange)="selectRestriction()" [placeholder]="\'se.cms.restriction.management.select.restriction.placeholder\'" [disableChoiceFn]="disableRestrictionChoice" [itemComponent]="itemComponent" [resultsHeaderLabel]="resultsHeaderLabel" [actionableSearchItem]="{ eventId: RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID }" [(reset)]="reset"></se-select></div><div class="se-restriction-management-select__restriction-editor" *ngIf="viewConfig.showRestrictionEditor"><p class="se-restriction-management-select__new-restriction-message" [translate]="editorHeader"></p><div *ngIf="selectModel.isTypeSupported()"><se-item-manager [item]="selectModel.getRestriction()" [mode]="viewConfig.mode" [structureApi]="viewConfig.structureApi" [contentApi]="viewConfig.contentApi" [uriContext]="uriContext" [componentType]="selectModel.getRestrictionTypeCode()" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div><div *ngIf="!selectModel.isTypeSupported()"><p class="se-restriction__item-name">{{ selectModel.getRestriction().name }}</p><div class="se-restriction__item-description">{{ selectModel.getRestriction().description }}</div></div></div></div>');e.put("RestrictionsEditorComponent.html",'<div class="se-restrictions-container"><div class="se-restrictions-container__header" [ngClass]="{ \'se-restrictions-container__header--empty\': restrictions.length === 0 }"><label class="se-restrictions__sub-header" translate="se.cms.restrictions.list.title"></label><div class="se-restrictions-container__header--right"><div *ngIf="restrictions.length > 1"><div *ngIf="editable"><se-select id="criteria-type" [fetchStrategy]="criteriaFetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restrictions.picker.type.placeholder\'" [model]="criteria.id" (modelChange)="matchCriteriaChanged($event)" [searchEnabled]="false"></se-select></div><div *ngIf="!editable">{{ \'se.cms.restrictions.criteria\' | translate }} {{ criteria.label | translate }}</div></div><button class="cms-clean-btn se-restriction__clear-all__btn fd-button--light fd-button--compact" *ngIf="showRemoveAllButton()" (click)="removeAllRestrictions()" translate="se.cms.restrictions.list.clear.all"></button> <button *ngIf="!showRestrictionPicker" type="button" class="se-restrictions__add-restriction-btn fd-button--compact" [disabled]="!editable" (click)="onAddRestriction()"><span translate="se.cms.restrictions.editor.button.add.new"></span></button></div></div><se-slider-panel [sliderPanelConfiguration]="sliderPanelConfiguration" [(sliderPanelHide)]="sliderPanelHide" [(sliderPanelShow)]="sliderPanelShow" (isShownChange)="onSliderVisibilityChange($event)" class="se-add-restriction-panel"><se-restriction-management *ngIf="isSliderVisible" class="se-se-add-restriction-panel__restriction-management" [config]="restrictionManagement.config" [uriContext]="restrictionManagement.uriContext" [(submitFn)]="restrictionManagement.submitFn" [(isDirtyFn)]="restrictionManagement.isDirtyFn"></se-restriction-management></se-slider-panel><div *ngIf="errors.length > 0"><span class="se-help-block--has-error help-block fd-form__message fd-form__message--error" *ngFor="let error of errors" [translate]="error.message"></span></div><se-restrictions-table *ngIf="isRestrictionsReady" [editable]="editable" [restrictions]="restrictions" [restrictionCriteria]="criteria" [errors]="errors" [customClass]="\'ySERestrictionListLink\'" (onEdit)="onEditRestriction($event)" (onRemove)="onRemoveRestriction($event)"></se-restrictions-table></div>');e.put("RestrictionsTableComponent.html",'<div class="se-restriction-table-wrapper se-restriction-table-left" [ngClass]="customClass"><div class="se-restrictions-list fd-menu__list fd-menu__list--separated" *ngIf="restrictions.length > 0"><div id="restriction-{{ index + 1 }}" *ngFor="let restriction of restrictions; let index = index" class="se-restriction__item fd-menu__item"><div class="se-restrictions-list__item-content"><p class="se-restriction__item-name" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.name }}</p><div class="se-restriction__item-type-and-id" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.typeCode }}</div><div class="se-restriction__item-description" [ngClass]="{ \'error-input\': isInError(index) }" [title]="restriction.description">{{ restriction.description }}</div><div id="restrictionPartOfWorkflow" *ngIf="!restriction.canBeEdited" translate="se.cms.restrictions.editor.part.of.workflow"></div></div><div *ngIf="editable"><se-dropdown-menu [dropdownItems]="restriction.actions || defaultActions" [selectedItem]="restriction" [placement]="\'bottom-start\'"></se-dropdown-menu></div></div></div><div *ngIf="restrictions.length === 0" class="se-restrictions-list--empty"><span class="se-restrictions-list--empty__message" translate="se.cms.restrictions.emptylist.message"></span></div></div>');e.put("clonePageInfoStepTemplate.html",'<se-component-clone-info-form data-ng-if="clonePageWizardCtrl.isPageInfoActive()" [structure]="clonePageWizardCtrl.getPageInfoStructure()" [content]="clonePageWizardCtrl.getPageInfo()" [(submit)]="clonePageWizardCtrl.callbacks.savePageInfo" [(reset)]="clonePageWizardCtrl.callbacks.resetPageInfo" [(is-dirty)]="clonePageWizardCtrl.callbacks.isDirtyPageInfo" [(is-valid)]="clonePageWizardCtrl.callbacks.isValidPageInfo" [page-template]="clonePageWizardCtrl.getPageTemplate()" [page-type-code]="clonePageWizardCtrl.getPageTypeCode()" [uri-context]="clonePageWizardCtrl.uriContext" [target-catalog-version]="clonePageWizardCtrl.getTargetCatalogVersion()"></se-component-clone-info-form>');e.put("clonePageOptionsStepTemplate.html",'<se-event-message class="existing-homepage__ymessage" [show-event]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'" [hide-event]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"></se-event-message><se-select-target-catalog-version data-ng-if="clonePageWizardCtrl.isBasePageInfoAvailable()" [page-type-code]="clonePageWizardCtrl.getPageTypeCode()" [page-label]="clonePageWizardCtrl.getPageLabel()" [uri-context]="clonePageWizardCtrl.uriContext" (on-target-catalog-version-selected)="clonePageWizardCtrl.onTargetCatalogVersionSelected($event)"></se-select-target-catalog-version><se-new-page-display-condition [page-type-code]="clonePageWizardCtrl.getPageTypeCode()" [uri-context]="clonePageWizardCtrl.uriContext" [result-fn]="clonePageWizardCtrl.variationResult" [initial-condition-selected-key]="\'page.displaycondition.variation\'" [initial-primary-page-selected-label]="clonePageWizardCtrl.getPageLabel()" [target-catalog-version]="clonePageWizardCtrl.getTargetCatalogVersion()"></se-new-page-display-condition><se-component-clone-option-form (on-selection-change)="clonePageWizardCtrl.triggerUpdateCloneOptionResult($event)"></se-component-clone-option-form>');e.put("clonePageRestrictionsStepTemplate.html",'<span data-ng-if="clonePageWizardCtrl.isRestrictionsActive()" class="se-clone-page-restriction-step"><div data-ng-if="clonePageWizardCtrl.getPageRestrictions().length > 1"><se-page-restrictions-info-message></se-page-restrictions-info-message></div><se-restrictions-editor [editable]="true" [(reset-fn)]="clonePageWizardCtrl.restrictionsEditorFunctionBindings.reset" [(cancel-fn)]="clonePageWizardCtrl.restrictionsEditorFunctionBindings.cancel" [(is-dirty-fn)]="clonePageWizardCtrl.restrictionsEditorFunctionBindings.isDirty" (on-restrictions-change)="clonePageWizardCtrl.restrictionsResult($event)" [get-restriction-types]="clonePageWizardCtrl.getRestrictionTypes" [get-supported-restriction-types]="clonePageWizardCtrl.getSupportedRestrictionTypes" [item]="clonePageWizardCtrl.getBasePageInfo()" [restrictionUuids]="clonePageWizardCtrl.model.restrictions"></se-restrictions-editor></span>');e.put("DisplayConditionsEditorComponent.html",'<div><se-event-message class="existing-homepage__ymessage" [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'" [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"></se-event-message><se-display-conditions-page-info [pageName]="getPageName()" [pageType]="getPageType()" [isPrimary]="isPagePrimary()"></se-display-conditions-page-info><se-display-conditions-page-variations *ngIf="isPagePrimary()" [variations]="getVariations()"></se-display-conditions-page-variations><se-display-conditions-primary-page *ngIf="!isPagePrimary()" [readOnly]="getIsAssociatedPrimaryReadOnly()" [associatedPrimaryPage]="getAssociatedPrimaryPage()" [pageType]="getPageType()" (onPrimaryPageSelect)="onPrimaryPageSelect($event)"></se-display-conditions-primary-page><div *ngIf="showHomePageWidget()"><div class="se-component-homepage"><label class="se-control-label"><input type="checkbox" id="set-homepage-checkbox" class="fd-form__control se-display-conditions__homepage-input" name="clone-on-drop" [disabled]="disableHomepageCheckbox()" (ngModelChange)="homePageChanged($event)" [ngModel]="page.homepage"/> <span translate="se.cms.display.conditions.homepage.set"></span><se-help *ngIf="disableHomepageCheckbox()"><span translate="se.cms.display.conditions.homepage.disabled"></span></se-help></label></div><div class="se-display-conditions__replace-home-message" *ngIf="showReplaceLabel" translate="se.cms.display.conditions.homepage.replace" [translateParams]="{ currentHomepage: currentHomePageName }"></div></div></div>');e.put("DisplayConditionsPageInfoComponent.html",'<div class="se-edit-page-info__display-conditions"><div class="se-edit-page-info-display-conditions__basic-info"><div><label class="se-control-label" translate="se.cms.pagelist.headerpagename"></label><div class="form-readonly-text form-readonly-text__tight dc-page-name">{{ pageName }}</div></div><div><label class="se-control-label" translate="se.cms.pagelist.headerpagetype"></label><div class="form-readonly-text form-readonly-text__tight dc-page-type">{{ pageType }}</div></div></div><label class="se-control-label"><span translate="se.cms.display.conditions.label"></span><se-help><span [translate]="getPageDisplayConditionDescriptionI18nKey()"></span></se-help></label><p class="form-readonly-text form-readonly-text__tight dc-page-display-condition" [translate]="getPageDisplayConditionI18nKey()"></p></div>');e.put("DisplayConditionsPageVariationsComponent.html",'<div class="form-group dc-page-variations"><label class="se-control-label control-label__margin"><span translate="se.cms.display.conditions.variation.pages.title"></span><se-help *ngIf="variations.length > 0"><span translate="se.cms.display.conditions.variations.description"></span></se-help></label><div *ngIf="variations.length === 0" class="dc-no-variations form-readonly-text form-readonly-text__tight form-readonly-text__inline" translate="se.cms.display.conditions.no.variations"></div><div *ngIf="variations.length > 0"><se-client-paged-list [items]="variations" [keys]="keys" [itemsPerPage]="itemsPerPage" class="dc-page-variations-list"></se-client-paged-list></div></div>');e.put("DisplayConditionsPrimaryPageComponent.html",'<div class="form-group form-group__inline"><label class="se-control-label control-label__margin" translate="se.cms.display.conditions.primary.page.label"></label><div *ngIf="readOnly" class="dc-associated-primary-page form-readonly-text form-readonly-text__tight">{{ associatedPrimaryPage?.name }}</div><div *ngIf="!readOnly"><se-select id="display-conditions-primary-association-selector" [model]="associatedPrimaryPageUid" (modelChange)="associatedPrimaryPageUidOnChange($event)" [fetchStrategy]="fetchStrategy"></se-select><span *ngIf="associatedPrimaryPage?.name" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ associatedPrimaryPage.label }}</span></span></div></div>');e.put("ClonePageItemComponent.html",'<div *seHasOperationPermission="clonePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnClone()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.clone"></span></a></div>');e.put("DeletePageItemComponent.html",'<div *seHasOperationPermission="deletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': !isDeletePageEnabled}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': !isDeletePageEnabled}" (click)="isDeletePageEnabled && onClickOnDeletePage()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.trash"></span></a></div><se-tooltip *ngIf="!isDeletePageEnabled" class="se-dropdown-item__delete-page-popover" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span><div se-tooltip-body class="popover-tooltip"><span [translate]="tooltipMessage"></span></div></se-tooltip></div></div>');e.put("EditPageItemComponent.html",'<div *seHasOperationPermission="editPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnEdit()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.edit"></span></a></div>');e.put("PermanentlyDeletePageItemComponent.html",'<div *seHasOperationPermission="permanentlyDeletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': isDeleteButtonDisabled()}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': isDeleteButtonDisabled()}" (click)="permanentlyDelete()"><span [translate]="\'se.cms.actionitem.page.permanently.delete\'"></span></a></div><se-tooltip class="se-dropdown-item__delete-page-popover" *ngIf="isDeleteButtonDisabled()" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span> <span se-tooltip-body [translate]="\'se.cms.actionitem.page.permanently.delete.blocked\'"></span></se-tooltip></div></div>');e.put("RestorePageItemComponent.html",'<div *seHasOperationPermission="restorePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="restorePage()"><span [translate]="\'se.cms.actionitem.page.restore\'"></span></a></div>');e.put("SyncPageItemComponent.html",'<div *seHasOperationPermission="syncPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="sync()" translate="se.cms.actionitem.page.sync"></a></div>');e.put("UpdatePageStatusComponent.html",'<div *ngIf="showButton"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnSync()"><span [translate]="\'se.cms.actionitem.page.sync\'"></span></a></div>');e.put("PageSyncMenuToolbarItemComponent.html",'<ng-container *seHasOperationPermission="\'se.sync.catalog\'"><fd-popover [(isOpen)]="toolbarItem.isOpen" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-expanded]="toolbarItem.isOpen"><span class="icon-synchronize se-toolbar-menu-ddlb--button__icon"><span *ngIf="isNotInSync" class="hyicon hyicon-caution se-toolbar-menu-ddlb--button__caution"></span> </span><span class="toolbar-action-button__txt" [ngClass]="{\'se-toolbar-menu-ddlb--button__txt\': isNotInSync }" [translate]="toolbarItem.name"></span></button></fd-popover-control><fd-popover-body><div *ngIf="toolbarItem.isOpen && isReady" class="toolbar-action--include se-sync-menu-content__dropdown"><se-prevent-vertical-overflow><div class="se-sync-menu-content__header"><span class="se-sync-menu-content__header-title" translate="se.cms.synchronization.page.title"></span><se-help *ngIf="!syncPageConditions?.canSyncHomepage && !syncPageConditions?.pageHasNoDepOrNoSyncStatus" class="se-page-sync__y-help"><span>{{ helpText }}</span></se-help></div><se-page-synchronization-panel [cmsPage]="cmsPage" [uriContext]="uriContext"></se-page-synchronization-panel></se-prevent-vertical-overflow></div></fd-popover-body></fd-popover></ng-container>');e.put("PageSynchronizationHeaderComponent.html",'<ng-container *ngIf="ready"><div class="se-sync-panel-header"><span class="se-sync-panel-header__sub-header" [translate]="getSubHeaderText()"></span></div><div *ngIf="isNewPage()" class="se-sync-panel-new-page"><div class="se-sync-panel-new-page__header" translate="se.cms.synchronization.page.new.header"></div><div class="se-sync-panel-new-page__message">{{ headerText }}</div></div><div class="se-sync-panel-header__timestamp" *ngIf="!isNewPage()"><div translate="se.cms.synchronization.panel.lastsync.text"></div><span class="se-sync-panel-header__timestamp-text">{{ syncStatus.lastSyncStatus | date: \'M/d/yy h:mm a\' }}</span></div></ng-container>');e.put("PageSynchronizationPanelComponent.html",'<se-page-synchronization-header class="se-sync-panel__sync-status" [syncStatus]="syncStatus" [pageSyncConditions]="pageSyncConditions"></se-page-synchronization-header><se-synchronization-panel *ngIf="!showFooter" [itemId]="cmsPage.uuid" [showFooter]="false" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (selectedItemsUpdate)="onSelectedItemsUpdate($event)" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel><se-synchronization-panel *ngIf="showFooter" [itemId]="cmsPage.uuid" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel>');e.put("SynchronizeCatalogComponent.html",'<div class="se-synchronize-catalog"><div class="se-synchronize-catalog__sync-info"><div *ngIf="isSyncJobFinished()"><label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="catalogVersion.active"><span translate="se.cms.cataloginfo.lastsyncedfrom"></span>&nbsp; <span>{{ syncJobStatus.source }}</span></label> <label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="!catalogVersion.active" translate="se.cms.cataloginfo.lastsynced"></label> <span class="se-synchronize-catalog__sync-info__last-synched">{{ syncJobStatus.syncEndTime | date: \'M/d/yy h:mm a\' }}</span></div><span class="se-synchronize-catalog__in-progress" *ngIf="isSyncJobInProgress()" translate="se.sync.status.synced.inprogress"></span> <span class="label-error se-synchronize-catalog__sync-failed" *ngIf="isSyncJobFailed()" translate="se.sync.status.synced.syncfailed"></span></div><ng-container *seHasOperationPermission="syncCatalogPermission"><ng-container *ngIf="!catalogVersion.active"><button class="se-synchronize-catalog__sync-btn fd-button--emphasized" [disabled]="!isSyncButtonEnabled()" (click)="syncCatalog()" translate="se.cms.cataloginfo.btn.sync"></button></ng-container></ng-container></div>');e.put("VersionItemContextComponent.html",'<div class="se-version-item-context"><span class="sap-icon--navigation-right-arrow"></span><se-tooltip *ngIf="(pageVersion$ | async) as pageVersion" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [isChevronVisible]="true"><div se-tooltip-trigger class="se-version-item-context__info"><div class="se-version-item-context__info-label" [title]="pageVersion.label">{{ pageVersion.label }}</div><div class="se-version-item-context__info-date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div></div><div se-tooltip-body class="se-version-item-context__description-wrapper"><span class="se-version-item-context__description">{{ pageVersion.description || (EMPTY_DESCRIPTION_MSG_KEY | translate) }}</span></div></se-tooltip><button type="button" (click)="deselectPageVersion()" class="se-version-item-context__remove-btn fd-button--light sap-icon--decline"></button></div>');e.put("VersionsPanelComponent.html",'<div class="se-toolbar-menu-content--wrapper"><div class="se-toolbar-menu-content__header"><div class="se-toolbar-menu-content__header-title" translate="se.cms.actionitem.page.versions"></div><button class="se-versions-panel__manage-btn fd-button fd-button--compact" *ngIf="showManageButton" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversions.name"></button></div><div class="se-versions-toolbar-menu-content__body" [ngClass]="{ \'se-versions-toolbar-menu-content__body--narrow\': showManageButton }"><se-versions-search [versionsFoundCount]="versionsFound" [showSearchControls]="pageHasVersions()" (searchTermChange)="onSearchTermChanged($event)"></se-versions-search><div><se-infinite-scrolling class="se-versions-panel__infinite-scroll" *ngIf="pageHasVersionsOrIsLoading()" [pageSize]="10" [mask]="searchTerm" [fetchPage]="fetchPageOfVersions" (itemsChange)="onVersionItemsLoaded($event)"><div *ngFor="let item of versionItems; let isLast = last"><se-version-item [ngClass]="{ \'se-version-item--last\': isLast }" [pageVersion]="item"></se-version-item></div></se-infinite-scrolling><div class="se-versions-panel__empty-list" *ngIf="!pageHasVersionsOrIsLoading()"><img src="static-resources/images/emptyVersions.svg" alt="no versions"/> <span class="se-versions-panel__no-versions-message" translate="se.cms.toolbaritem.versioning.noversionsfound"></span> <a class="se-versions-panel__manage-link fd-link" *ngIf="showManageLink" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversionslink.name"></a></div></div></div></div>');e.put("PageApprovalSelectorComponent.html",'<se-dropdown-menu *ngIf="showDropdown" [useProjectedAnchor]="true" [dropdownItems]="pageApprovalOptions$ | async" [(isOpen)]="isOpen" (isOpenChange)="onDropdownToggle($event)" [additionalClasses]="[\'se-page-approval-selector-list\']"><button class="se-page-approval-selector__toggle-btn fd-button--light sap-icon--navigation-down-arrow"></button></se-dropdown-menu>');e.put("PageDisplayStatusComponent.html",'<ng-container *ngIf="showLastSyncTime; else pageStatus"><se-tooltip [triggers]="[\'click\']" [placement]="\'left\'" [isChevronVisible]="true"><ng-container se-tooltip-trigger *ngTemplateOutlet="pageStatus"></ng-container><div se-tooltip-body class="popover-tooltip"><ng-container *ngIf="hasBeenSynchedBefore(); else notPublished"><span [translate]="\'se.cms.page.displaystatus.lastpublished.date\'"></span> <span>&ngsp;{{ lastSynchedDate | date: \'M/d/yy h:mm a\' }}</span></ng-container><ng-template #notPublished><span [translate]="\'se.cms.page.displaystatus.not.published\'"></span></ng-template></div></se-tooltip></ng-container><ng-template #pageStatus><se-page-status [uuid]="page?.uuid" [displayStatus]="page?.displayStatus"></se-page-status></ng-template>');e.put("PageWorkflowMenuComponent.html",'<div *ngIf="isReady"><div *ngIf="!pageHasWorkflow && isWorkflowEnabled"><ng-container *seHasOperationPermission="\'se.start.page.workflow\'"><button id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn" class="btn toolbar-action--button" type="button" (click)="startWorkflow()" aria-expanded="false"><span id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn_lbl" class="toolbar-action-button__txt" translate="se.cms.workflow.toolbar.start.workflow"></span></button></ng-container></div><div *seHasOperationPermission="\'se.view.page.workflowMenu\'"><fd-popover *ngIf="pageHasWorkflow" class="toolbar-action" [closeOnOutsideClick]="true" [isOpen]="actionItem.isOpen" (isOpenChange)="onDropdownToggle($event)"><fd-popover-control><button type="button" class="page-tasks-btn toolbar-action--button" [attr.aria-expanded]="actionItem.isOpen"><span class="page-tasks-btn__icon sap-icon--workflow-tasks"></span> <span class="page-tasks-btn__label" translate="se.cms.workflow.toolbar.view.workflow.menu"></span></button></fd-popover-control><fd-popover-body><div *ngIf="actionItem.isOpen" class="toolbar-action--include se-page-workflow-menu"><div class="se-page-workflow-menu__header"><div class="se-page-workflow-menu__header-text" translate="se.cms.workflow.toolbar.view.workflow.menu"></div><div class="se-page-workflow-menu__header-menu"><se-workflow-item-menu [workflowInfo]="workflow"></se-workflow-item-menu></div></div><div class="se-version-toolbar-menu-content__body"><div class="se-page-workflow-menu-tabs"><se-tabs *ngIf="areTabsReady; else spinner" [tabsList]="tabsList" [model]="tabsData" [numTabsDisplayed]="2"></se-tabs><ng-template #spinner><se-spinner [isSpinning]="true"></se-spinner></ng-template></div></div></div></fd-popover-body></fd-popover></div></div>');e.put("WorkflowInboxComponent.html",'<fd-popover class="toolbar-action se-workflow-inbox-container dropdown" [class.open]="actionItem.isOpen" [(isOpen)]="actionItem.isOpen" (isOpenChange)="onDropdownToggle(isOpen)" [closeOnOutsideClick]="true" [triggers]="[\'click\']" [placement]="\'bottom-\' + actionItem.dropdownPosition"><fd-popover-control class="se-workflow-inbox-toggle-control"><button type="button" class="se-workflow-inbox-toggle toolbar-action--button--compact" [attr.aria-pressed]="actionItem.isOpen"><span class="se-toolbar-actions__icon sap-icon--task"></span><se-workflow-inbox-badge></se-workflow-inbox-badge></button></fd-popover-control><fd-popover-body><div [ngClass]="{                \'se-toolbar__dropdown--right\': actionItem.dropdownPosition === \'right\',                \'se-toolbar__dropdown--center\': actionItem.dropdownPosition === \'center\',                \'se-toolbar__dropdown--left\': actionItem.dropdownPosition === \'left\'            }" class="toolbar-action--include--compact"><div *ngIf="actionItem.isOpen" class="se-workflow-inbox"><div class="se-workflow-inbox"><div class="se-workflow-inbox-header"><div class="se-workflow-inbox-header__title" [translate]="\'se.cms.workflow.toolbar.inbox\'"></div></div><div class="se-workflow-inbox-tasks se-cms-dev-workflow-inbox-tasks fd-panel__body"><div *ngIf="!tasksNotReady && totalNumberOfTasks === 0" class="se-workflow-inbox-tasks__no-tasks"><img src="static-resources/images/Inbox.svg" alt="empty-inbox"/> <span class="se-workflow-inbox__empty-inbox-message" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message\'"></span> <span class="se-workflow-inbox__empty-inbox-message-alt" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message.alt\'"></span></div><se-infinite-scrolling class="se-version-panel__infinite-scroll se-infinite-scrolling--narrowed" [pageSize]="pageSize" [fetchPage]="fetchPageOfInboxTasks" (itemsChange)="onInboxTasksLoaded($event)"><div *ngFor="let task of workflowTasks; let i = index; let last = last; trackBy: trackByIndex" class="se-workflow-inbox-task se-cms-dev-workflow-inbox-task"><se-workflow-inbox-task id="workflow-inbox-task-{{i}}" [class.se-workflow-inbox-task-last]="last" [task]="task"></se-workflow-inbox-task></div></se-infinite-scrolling></div></div></div></div></fd-popover-body></fd-popover>');e.put("WorkflowInboxBadgeComponent.html",'<ng-container *ngIf="inboxCount$ | async as count"><div *ngIf="count > 0" aria-label="Notifications"><div class="fd-counter fd-counter--notification se-inbox-badge" aria-label="Unread count">{{ stringifyCount(count) }}</div></div></ng-container>');e.put("WorkflowInboxMultipleTasksAnnouncementComponent.html",'<div (click)="onClick($event)" class="se-announcement__message--multi">{{ \'se.cms.workflow.tasks.announcement\' | translate: count }}</div>');e.put("WorkflowInboxSingleTaskAnnouncementComponent.html",'<div (click)="onClick($event)"><div class="se-announcement__title">{{ task.action.name | seL10n | async }}</div><div class="se-announcement__message">{{ task.attachments[0].catalogName | seL10n | async }} | {{ task.attachments[0].pageName }}</div><div class="se-announcement__time-stamp">{{ startedAgo }}</div></div>');e.put("WorkflowItemMenuComponent.html",'<se-popup-overlay class="popup-anchor" [ngClass]="{ \'popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><span *ngIf="menuItems.length > 0" (click)="toggleMenu()" class="workflow-item-menu__toggle-btn sap-icon--overflow"></span><div se-popup-overlay-body><div class="workflow-item-menu"><div class="workflow-item-menu__item" *ngFor="let dropdownItem of menuItems"><ng-container class="container" [ngSwitch]="dropdownItem.i18nKey"><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.description\'" class="workflow-description"><div class="se-dropdown-item--label"><div class="workflow-description__label fd-has-type-1 fd-has-margin-bottom-tiny"><div [translate]="dropdownItem.i18nKey"></div><div *seHasOperationPermission="\'se.edit.workflow.workflowMenu\'"><a title="Edit" class="workflow-description__edit-btn sap-icon--edit fd-has-float-right" (click)="editDescription()"></a></div></div><div *ngIf="workflowInfo.description; else noDescription" class="workflow-description__text">{{ workflowInfo.description }}</div><ng-template #noDescription><div translate="se.cms.actionitem.page.workflow.no.description"></div></ng-template></div></div><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.cancel\'" class="workflow-cancel-btn fd-has-color-status-3" [translate]="dropdownItem.i18nKey" (click)="cancelWorkflow()"></div></ng-container></div></div></div></se-popup-overlay>');e.put("WorkflowInboxTaskComponent.html",'<div class="se-workflow-inbox-task-header"><a href="#" (click)="onClick($event)">{{ taskName | async }}</a></div><div class="se-workflow-inbox-task-desc">{{ taskDescription | async }}</div><div class="se-workflow-inbox-task-body">{{ getTaskCreatedAgo() }}</div>');e.put("SubTypeSelectorComponent.html",'<ul class="se-sub-type__selector fd-menu__list"><li class="cms-sub-type__selector-link fd-menu__item" *ngFor="let subType of subTypes" (click)="select(subType)" [translate]="subType.label"></li></ul>');e.put("PageRestrictionsEditorComponent.html",'<se-page-restrictions-info-message *ngIf="page.restrictions?.length > 1"></se-page-restrictions-info-message><se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="page" [restrictionUuids]="page.restrictions" [removeValidationMessages]="onRemoveValidationMessages" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>');e.put("PageRestrictionsInfoMessageComponent.html","<se-message [type]=\"'info'\" class=\"se-restrictions-info__message\"><ng-container se-message-title>{{ 'se.cms.restrictions.editor.ymessage.title' | translate }}</ng-container><ng-container se-message-description>{{ 'se.cms.restrictions.editor.ymessage.description' | translate }}</ng-container></se-message>");e.put("ItemSelectorPanelComponent.html",'<se-slider-panel [sliderPanelConfiguration]="panelConfig" [(sliderPanelHide)]="hidePanel" [(sliderPanelShow)]="showPanel" class="se-item-selector-panel"><div class="se-item-selector-panel__content" *ngIf="catalogs.length > 0"><div *ngIf="catalogs.length > 1" class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogs.label"></label><se-select id="se-catalog-selector-dropdown" class="se-item-selector-panel__content__catalogs__yselect" [(model)]="catalogInfo.catalogId" [fetchStrategy]="catalogSelectorFetchStrategy" [onChange]="onCatalogSelectorChange"></se-select><label>{{ catalogInfo.name | seL10n | async }}</label></div><div class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogsversion.label"></label><se-select id="se-catalog-version-selector-dropdown" class="se-item-selector-panel__content__catalog-version__yselect" [(model)]="catalogInfo.catalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onCatalogVersionSelectorChange" [searchEnabled]="false" [(reset)]="resetCatalogVersionSelector"></se-select></div><div class="se-item-selector-panel__content__item" *ngIf="catalogInfo.catalogVersion"><label class="se-control-label">{{ catalogItemTypeI18nKey }}</label><se-select id="se-items-selector-dropdown" [multiSelect]="true" [controls]="true" [(model)]="internalItemsSelected" [onChange]="onItemsSelectorChange" [fetchStrategy]="itemsSelectorFetchStrategy" [(reset)]="resetItemsListSelector" [itemComponent]="itemComponent" [isReadOnly]="!isItemSelectorEnabled()"></se-select></div></div></se-slider-panel>');e.put("MediaComponent.html",'<div class="se-media"><se-media-selector *ngIf="!image" [id]="mediaSelectorId" [isDisabled]="isFieldDisabled" [mediaId]="mediaIdByLang[lang]" (mediaIdChange)="onMediaIdChange($event)"></se-media-selector><se-media-file-selector *ngIf="canShowFileSelector()" [labelI18nKey]="\'se.upload.image.to.library\'" [acceptedFileTypes]="acceptedFileTypes" [selectionMode]="\'upload\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelect($event)"></se-media-file-selector><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper" [image]="image" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onMediaUploaded($event)"></se-media-upload-form><se-media-errors *ngIf="fileErrors.length > 0" [errors]="fileErrors"></se-media-errors></div>');e.put("MediaActionLabelComponent.html",'<span class="se-media-action-label" [ngClass]="{ \'se-media-action-label--disabled\': state === \'disabled\' }" [translate]="i18nKey"></span>');e.put("MediaAdvancedPropertiesComponent.html",'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']" class="se-media-advanced-info"><span se-tooltip-trigger class="se-media-advanced-info__trigger"><span class="sap-icon--message-information se-media__action-icon se-media__action-icon--basic" [title]="i18nKeys.INFORMATION | translate"></span><se-media-action-label [i18nKey]="i18nKeys.INFORMATION"></se-media-action-label></span><div se-tooltip-body><div class="se-media-advanced-info-body"><div class="se-media-advanced-info-row advanced-information-description" *ngIf="description"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.DESCRIPTION"></div><div class="se-media-advanced-info-row__description">{{ description }}</div></div><div class="se-media-advanced-info-row advanced-information-code"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.CODE"></div><div class="se-media-advanced-info-row__description">{{ code }}</div></div><div class="se-media-advanced-info-row advanced-information-alt-text" *ngIf="altText"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.ALT_TEXT"></div><div class="se-media-advanced-info-row__description">{{ altText }}</div></div></div></div></se-tooltip>');e.put("MediaContainerComponent.html",'<div *ngIf="hasReadPermissionOnMediaRelatedTypes && advancedMediaContainerManagementEnabled"><se-media-container-selector [eventNameAffix]="selectorEventNameAffix" [isAdvancedCloning]="isAdvancedCloning()" [initialName]="initialMediaContainerName" [name]="getMediaContainerName()" (nameChange)="onMediaContainerNameChange($event)" (onCreate)="onMediaContainerCreate($event)" (onRemove)="onMediaContainerRemove()" (onSelect)="setMediaContainer($event)" (onCreationInProgressChange)="onMediaContainerCreationInProgressChange($event)"></se-media-container-selector></div><div class="se-media-container-field" *ngIf="canShowMediaFormatWithUploadForm()"><div class="se-media-container-field__media-list"><se-media-format class="se-media-container-cell" *ngFor="let format of field.options" [ngClass]="getMediaContainerCellClassName(format.id)" [errorMessages]="field.messages" [isEditable]="field.editable" [isUnderEdit]="isMediaFormatUnderEdit(format.id)" [isFieldDisabled]="isFieldDisabled()" [mediaUuid]="model[lang].medias[format.id]" [mediaFormat]="format.id" (onFileSelect)="onFileSelect($event, format.id)" (onDelete)="removeMediaByFormat(format.id)"></se-media-format></div><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper se-media-upload-form-wrapper--spaced" [image]="image.file" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onFileUploadSuccess($event, image.format)"></se-media-upload-form><se-media-errors [errors]="fileValidationErrors"></se-media-errors></div><div *ngIf="!hasReadPermissionOnMediaRelatedTypes"><span translate="se.cms.media.typepermissions.error" [translateParams]="{ containedTypes: field.containedTypes }"></span></div>');e.put("MediaErrorsComponent.html",'<div class="field-errors"><div *ngFor="let error of errors">{{ error.message | translate }}</div></div>');e.put("MediaFileSelectorComponent.html",'<div class="se-file-selector" [ngClass]="customClass"><label *ngIf="!disabled" class="se-file-selector__btn se-button se-button--text" [ngClass]="{ \'se-button--disabled\': disabled }"><span class="sap-icon--share se-media__action-icon" [ngClass]="{                \'sap-icon--share\': isReplaceMode(),                \'sap-icon--upload\': !isReplaceMode()            }"></span> <span class="se-file-selector__label" [translate]="labelI18nKey"></span> <input type="file" class="hide se-file-selector__input" [accept]="buildAcceptedFileTypesList()" (change)="onSelect($event.target.files)"/></label></div>');e.put("MediaFormatComponent.html",'<div class="se-media-format" [ngClass]="mediaFormat"><div class="se-media-format__screen-type" [translate]="mediaFormatI18nKey"></div><se-media-format-uploaded *ngIf="isMediaPreviewEnabled()" [media]="media" [replaceLabelI18nKey]="mediaSelectorI18nKeys.REPLACE" [acceptedFileTypes]="acceptedFileTypes" [isFieldDisabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)" (onDelete)="onRemoveButtonClick()"></se-media-format-uploaded><div class="se-media--absent" *ngIf="isMediaAbsent()"><se-media-file-selector *ngIf="isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="isFieldDisabled ? \'file-selector-disabled\' : \'\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-file-selector *ngIf="!isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="!isEditable ? \'file-selector-disabled\' : \'\'" [disabled]="!isEditable" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector></div><div *ngIf="isUnderEdit" class="se-media--edit-wrapper"><se-media-file-selector class="se-media--edit" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'file-selector-disabled\'" [disabled]="true" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><span class="se-media-preview--edit" [translate]="mediaSelectorI18nKeys.UNDER_EDIT"></span></div><ng-container *ngIf="!isUnderEdit"><div class="error-input se-media-format__error" *ngFor="let error of getErrors()"><span>{{ error }}</span></div></ng-container></div>');e.put("MediaPreviewComponent.html",'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']"><span se-tooltip-trigger><div class="sap-icon--search se-media-preview__icon"></div></span><div se-tooltip-body><img class="se-media-preview__image" [src]="imageUrl"/></div></se-tooltip>');e.put("MediaRemoveButtonComponent.html",'<button type="button" class="se-media-action-btn se-media-remove-btn" [disabled]="isDisabled" (click)="clickHandler.emit($event)"><span class="se-media__action-icon se-media__action-icon--delete sap-icon--delete"></span> <span class="se-media-remove-btn-txt" [ngClass]="{ \'se-media-remove-btn-txt--disabled\': isDisabled }" translate="se.media.format.remove"></span></button>');e.put("MediaSelectorComponent.html",'<div class="media-selector"><se-select [id]="id" [model]="mediaId" (modelChange)="onMediaIdChange($event)" [fetchStrategy]="fetchStrategy" [isReadOnly]="isFieldDisabled" [itemComponent]="mediaPrinterComponent"></se-select></div>');e.put("MediaUploadFormComponent.html",'<div class="se-media-upload-form"><div class="se-media-upload-form__header"><div class="se-media-upload-form__header-title" translate="se.upload.image.to.library"></div><div class="se-media-upload-form__header-actions"><button type="button" class="fd-button--light se-media-upload-btn__cancel fd-button--compact" translate="se.upload.image.cancel" (click)="cancel()"></button> <button type="button" class="fd-button se-media-upload-btn__submit fd-button--compact" translate="se.upload.image.submit" (click)="uploadMedia()"></button></div></div><div class="se-media-upload-form__replace-file"><div class="se-media-upload-form__file-name">{{ image.name }}</div><se-media-file-selector [labelI18nKey]="\'se.upload.image.replace\'" [acceptedFileTypes]="acceptedFileTypes" (onFileSelect)="onFileSelect($event)"></se-media-file-selector></div><form class="se-media-upload-form__file-info"><se-media-upload-field [fieldName]="\'code\'" [fieldValue]="imageParams.code" [fieldErrors]="getErrorsForFieldByCode(\'code\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.code\'" (fieldValueChange)="onChangeFieldValue($event, \'code\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'description\'" [fieldValue]="imageParams.description" [fieldErrors]="getErrorsForFieldByCode(\'description\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.description\'" (fieldValueChange)="onChangeFieldValue($event, \'description\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'alt-text\'" [fieldValue]="imageParams.altText" [fieldErrors]="getErrorsForFieldByCode(\'altText\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.alt.text\'" (fieldValueChange)="onChangeFieldValue($event, \'altText\')"></se-media-upload-field></form><se-spinner [isSpinning]="isUploading"></se-spinner></div>');e.put("catalogAwareSelectorTemplate.html",'<div data-ng-if="ctrl.listIsEmpty()"><button id="catalog-aware-selector-add-item" type="button" data-ng-if="ctrl.editable" class="fd-button fd-button--compact se-catalog-aware-selector__add-item-btn" data-ng-click="ctrl.openEditingPanel()"><span translate="se.cms.catalogaware.newbutton.title" translate-values="{catalogItemType: ctrl.catalogItemType}" class="se-catalog-aware-selector__add-item-btn-text"></span></button></div><div data-ng-if="!ctrl.listIsEmpty()" class="se-catalog-aware-selector__content"><div class="se-catalog-aware-selector__content__btn-wrapper" data-ng-if="ctrl.editable"><button type="button" class="fd-button--light se-catalog-aware-selector__content__btn" data-ng-click="ctrl.openEditingPanel()">{{\'se.cms.catalogaware.list.addmore\' | translate}}</button></div><se-editable-list [id]="ctrl.id + \'_list\'" [item-component]="ctrl.nodeComponent" [(items)]="ctrl.itemsList" [on-change]="ctrl.onListChange" [editable]="ctrl.editable" [(refresh)]="ctrl._refreshListWidget" class="se-catalog-aware-selector__list"></se-editable-list></div><se-item-selector-panel [default-items-selected]="ctrl.model" [item-component]="ctrl.itemComponent" [get-catalogs]="ctrl.getCatalogs" [items-fetch-strategy]="ctrl.itemsFetchStrategy" [catalog-item-type-i18n-key]="ctrl.catalogItemType" [max-num-items]="ctrl.maxNumItems || 0" (show-panel-change)="ctrl.setShowPanel($event)" (on-change)="ctrl.onPanelChange($event)"></se-item-selector-panel>');e.put("BreadcrumbComponent.html",'<div class="se-breadcrumb"><div *ngFor="let node of breadcrumb; index as idx; last as isLast" class="se-breadcrumb__node"><div class="se-breadcrumb__info" [ngClass]="{\'se-breadcrumb__info--last\': isLast}"><span class="se-breadcrumb__info--level">{{ node.formattedLevel | translate: node }}</span> <span class="se-breadcrumb__info--name">{{ node.name }}</span></div><div class="se-breadcrumb__divider" *ngIf="idx < breadcrumb.length - 1"><span class="sap-icon--navigation-right-arrow"></span></div></div></div>');e.put("multiProductSelectorTemplate.html",'<se-product-selector data-id="{{field.qualifier}}" data-model="model" data-qualifier="qualifier" data-editable="field.editable"></se-product-selector>');e.put("productSelectorTemplate.html",'<se-catalog-aware-selector data-id="{{$ctrl.id}}" data-ng-model="$ctrl.model[$ctrl.qualifier]" data-item-component="$ctrl.productSelectorItemComponent" data-node-component="$ctrl.productNodeComponent" data-get-catalogs="$ctrl.getCatalogs" data-items-fetch-strategy="$ctrl.itemsFetchStrategy" data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.product" data-max-num-items="$ctrl.maxNumItems" data-editable="$ctrl.editable"></se-catalog-aware-selector>');e.put("categorySelectorTemplate.html",'<se-catalog-aware-selector data-id="{{$ctrl.id}}" data-ng-model="$ctrl.model[$ctrl.qualifier]" data-item-component="$ctrl.categorySelectorItemComponent" data-node-component="$ctrl.categoryNodeComponent" data-get-catalogs="$ctrl.getCatalogs" data-items-fetch-strategy="$ctrl.itemsFetchStrategy" data-catalog-item-type-key="se.cms.catalogaware.catalogitemtype.category" data-editable="$ctrl.editable"></se-catalog-aware-selector>');e.put("multiCategorySelectorTemplate.html",'<se-category-selector data-id="{{field.qualifier}}" data-model="model" data-qualifier="qualifier" data-editable="field.editable"></se-category-selector>');e.put("NavigationNodePickerComponent.html",'<div class="categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div translate="se.ytree.template.header.name" class="se-navigation-editor-tree__name col-md-offset-1 col-sm-5"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodePickerRenderComponent" [removeDefaultTemplate]="removeDefaultTemplate" [nodeActions]="actions"></se-tree></div>');e.put("NavigationNodePickerRenderComponent.html",'<div class="se-tree-node__name col-xs-6" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="col-sm-4 pull-right tree-node se-navigation-picker-renderer" (click)="pick(node)" *ngIf="isEditable()"><a translate="se.cms.navigationcomponent.management.node.selection.select.action" class="btn btn-link se-navigation-picker-renderer__btn"></a></div>');e.put("NavigationNodeSelectorComponent.html",'<div *ngIf="isReady"><div *ngIf="cmsItem[qualifier]" class="se-navigation-mode"><div class="se-navigation__node"><se-breadcrumb class="se-navigation__node-breadcrumb" [nodeUuid]="cmsItem[qualifier]" [uriContext]="uriContext"></se-breadcrumb><div class="se-navigation__node-button"><button class="btn btn-link btn-block se-navigation__button" (click)="remove($event)" [disabled]="!field.editable" translate="se.cms.navigationcomponent.management.node.selection.remove.action"></button></div></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="true" [rootNodeUid]="nodeUid"></se-navigation-editor-tree></div><div *ngIf="!cmsItem[qualifier]"><label translate="se.cms.navigationcomponent.management.node.selection.invite.action"></label><se-navigation-node-picker [uriContext]="uriContext" [editable]="field.editable"></se-navigation-node-picker></div></div>');e.put("NewPageDisplayConditionComponent.html",'<div *ngIf="isReady"><div class="form-group"><label for="page-condition-selector-id" class="se-control-label" translate="se.cms.page.condition.selection.label"></label><se-select id="page-condition-selector-id" [model]="conditionSelected.label" (modelChange)="onConditionChange($event)" [fetchStrategy]="conditionSelectorFetchStrategy" [onChange]="onDataChange" [searchEnabled]="false"></se-select><span class="se-form-help-message"><span [translate]="conditionSelected.description"></span></span></div><div *ngIf="showPrimarySelector()" class="form-group"><label for="page-condition-primary-selector-id" class="se-control-label" translate="se.cms.page.condition.primary.association.label"></label><se-select id="page-condition-primary-selector-id" [model]="primarySelectedModel" (modelChange)="primarySelectedModelOnChange($event)" [fetchStrategy]="primaryPageChoicesFetchStrategy" [onChange]="onDataChange"></se-select><span *ngIf="primarySelected?.label" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ primarySelected.label }}</span></span></div><div *ngIf="showHomePageWidget()"><div class="fd-form__item"><input type="checkbox" id="set-homepage-checkbox" class="se-component-item--details se-component-homepage__checkbox-input fd-form__control" name="clone-on-drop" (ngModelChange)="onHomePageChange($event)" [ngModel]="homepage"/> <label class="se-control-label se-component-homepage--label fd-form__label" for="set-homepage-checkbox" translate="se.cms.display.conditions.homepage.set"></label></div><label class="se-control-label se-component-homepage--label" for="set-homepage-checkbox" *ngIf="showReplaceLabel">{{ "se.cms.display.conditions.homepage.replace" | translate: { currentHomepage: currentHomePageName } }}</label></div></div>');e.put("SelectPageTemplateComponent.html",'<div class="se-page-type-step-template"><div class="se-add-page__sub-header"><div class="se-add-page__sub-header-title">{{ \'se.cms.addpagewizard.pagetemplate.description\' | translate }}</div><div class="se-input-group se-page-type-step-template-list-search"><input type="text" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagewizard.templatestep.searchplaceholder\' | translate }}" [ngModel]="searchString" (ngModelChange)="onSearchChange($event)" name="query"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="searchString" class="se-input-group__addon se-input-group__clear-btn" (click)="clearSearch()"><span class="sap-icon--decline"></span></div></div></div><div class="se-add-page__list fd-menu" *ngIf="pageTemplates.length > 0"><div *ngFor="let template of filteredPageTemplates" [ngClass]="{ \'is-selected\': isSelected(template)}" (click)="templateSelected(template)" class="se-add-page__item se-add-page__item--page-template fd-menu__item"><div class="se-add-page__item-title">{{ template.name }}</div></div></div></div>');e.put("SelectPageTypeComponent.html",'<div><div class="se-add-page__sub-header">{{ \'se.cms.addpagewizard.pagetype.description\' | translate }}</div><div class="se-add-page__list fd-menu" *ngIf="pageTypes.length > 0"><div class="se-add-page__item fd-menu__item" *ngFor="let pageType of pageTypes" [ngClass]="{ \'is-selected\': isSelected(pageType)}" (click)="selectType(pageType)"><div class="se-add-page__item-title">{{ pageType.name | seL10n | async }}</div><div class="se-add-page__item-description">{{ pageType.description | seL10n | async }}</div></div></div></div>');e.put("SelectTargetCatalogVersionComponent.html",'<div class="target-catalog-version-selector-wrapper form-group"><label for="target-catalog-version-selector-id" class="se-control-label" translate="se.cms.clonepagewizard.options.targetcatalogversion.label"></label><se-select *ngIf="!!catalogVersions.length" id="se-catalog-version-selector-dropdown" [(model)]="selectedCatalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onSelectionChange" [searchEnabled]="false" (getApi)="setSelectApi($event)"></se-select><div *ngIf="catalogVersionContainsPageWithSameLabel"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.label.exists.message"></span></div><div *ngIf="pageAlreadyExists()"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.pagetype.exists.message"></span></div></div>');e.put("ComponentCloneInfoComponent.html",'<se-message *ngIf="catalogVersionContainsPageWithSameTypeCode" type="warning"><span se-message-description translate="se.cms.clonepagewizard.pageinfo.targetcatalogversion.pagetype.exists.message" [translateParams]="{ typeCode: pageTypeCode }"></span></se-message><se-generic-editor [id]="genericEditorId" [structure]="structure" [content]="content" [(submit)]="submitInternal" [(reset)]="resetInternal" [(isDirty)]="isDirtyInternal" [(isValid)]="isValidInternal" (getApi)="setGenericEditorApi($event)"></se-generic-editor>');e.put("ComponentCloneOptionFormComponent.html",'<label for="components-cloned-selector-id" class="se-control-label"><span translate="se.cms.clonepagewizard.options.title"></span><se-help><span translate="se.cms.clonepagewizard.options.tooltip"></span></se-help></label><div id="components-cloned-selector-id"><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" name="componentsclone" id="reference-cloning" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING"/> <label for="reference-cloning" translate="se.cms.clonepagewizard.options.existing"></label></div><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" id="deep-cloning" name="componentsclone" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE"/> <label for="deep-cloning" translate="se.cms.clonepagewizard.options.copies"></label></div></div>');e.put("VersionItemComponent.html",'<div class="se-version-item" [ngClass]="{ \'se-version-item--selected\': isSelectedVersion() }"><div class="se-version-item__header" [title]="pageVersion.label"><button class="se-version-item__label se-button--text" (click)="selectVersion()">{{ pageVersion.label }}</button><se-version-item-menu *ngIf="isVersionMenuEnabled()" [item]="pageVersion"></se-version-item-menu></div><div class="se-version-item__date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div><div class="se-version-item__description" *ngIf="pageVersion.description"><se-more-text class="se-version-item__description-text" [text]="pageVersion.description" [limit]="32" [ellipsis]="\'...\'" [capitalizeLabel]="true"></se-more-text></div></div>');e.put("VersionItemMenuComponent.html",'<se-popup-overlay class="se-version-item-menu__popup-anchor" [ngClass]="{ \'se-version-item-menu__popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><div *ngIf="menuItems.length > 0" (click)="onButtonClick($event)" class="sap-icon--overflow se-version-item-menu__toggle"></div><div se-popup-overlay-body class="se-version-item-menu fd-menu"><div class="se-version-item-menu__item fd-menu__list" *ngFor="let item of menuItems" (click)="executeItemCallback(item)"><span class="se-version-item-menu__item-link fd-menu__item">{{ item.i18nKey | translate }}</span></div></div></se-popup-overlay>');e.put("VersionsSearchComponent.html",'<div class="se-versions-panel__search" *ngIf="showSearchControls"><div class="se-input-group"><input type="text" class="se-input-group__input-area" name="search-term" [ngModel]="searchTerm" (ngModelChange)="onChange($event)" [placeholder]="\'se.cms.versions.search.placeholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span> <button class="se-input-group__addon se-input-group__clear-btn se-button--text" [style.visibility]="showResetButton ? \'visible\' : \'hidden\'" (click)="resetSearchBox()"><span class="sap-icon--decline"></span></button></div><span class="se-versions-panel__count" [translate]="\'se.cms.versions.search.versions.found\'" [translateParams]="{ versionsFound: versionsFoundCount }"></span></div>');e.put("PageStatusComponent.html",'<div class="se-page-status"><div class="se-page-status__icon" [ngClass]="statusIconCssClass"></div><div class="se-page-status__label">{{ statusLabel | translate }}</div></div>');e.put("WorkflowActionItemComponent.html",'<div class="se-workflow-action-item" [ngClass]="getWorkflowActionStatusClass()"><se-collapsible-container class="se-catalog-details__collapse se-collapsible-container--noshadow fd-panel" [id]="workflowAction.code" (getApi)="setCollapsibleContainerApi($event)"><se-collapsible-container-header><div class="fd-panel__header"><div class="fd-panel__head"><h1 class="fd-panel__title">{{ workflowAction.name | seL10n | async }}</h1><p class="fd-panel__description">{{ getReadableStatus() | translate }} {{ getActiveSince() }}</p></div></div><div class="fd-panel__body">{{ workflowAction.description | seL10n | async }}<div *ngIf="canShowDecisionButtons()" class="se-workflow-action-item__decision-buttons fd-dropdown"><div class="fd-popover"><div class="fd-popover__control"><div [ngClass]="{ \'fd-button-split\': workflowAction.decisions.length > 1 }"><button class="se-workflow-action-item__decision-button fd-button--compact" [id]="workflowAction.code + \'-decision-button\'" (click)="onMainButtonClick($event, workflowAction.decisions[0])" type="button">{{ workflowAction.decisions[0].name | seL10n | async }}</button><se-popup-overlay [popupOverlay]="{                                        halign: \'right\',                                        valign: \'bottom\'                                    }" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="onMenuHide()"><button *ngIf="workflowAction.decisions.length > 1" [id]="workflowAction.code + \'-decision-split-button\'" class="fd-button--compact menu-button sap-icon--slim-arrow-down" (click)="onSplitButtonClick($event)"></button><div se-popup-overlay-body class="fd-popover__body fd-popover__body--right fd-popover__body--no-arrow se-workflow-action-item__decision-list"><nav class="fd-menu"><ul class="fd-menu__list"><li *ngFor="let decision of workflowAction.decisions"><a class="fd-menu__item se-workflow-action-item__decision" (click)="onMainButtonClick($event, decision)">{{ decision.name | seL10n | async }}</a></li></ul></nav></div></se-popup-overlay></div></div></div></div></div></se-collapsible-container-header><se-collapsible-container-content><div class="se-workflow-action-item__content" *ngIf="canShowComments()"><span *ngIf="!hasComments" class="se-workflow-action-item__comment-list fd-has-font-style-italic fd-has-color-text-4" [translate]="\'se.cms.actionitem.page.workflow.action.no.comments.available\'"></span><se-infinite-scrolling [pageSize]="pageSize" [fetchPage]="fetchPageOfComments" (itemsChange)="onCommentsLoaded($event)"><div *ngFor="let actionComment of workflowActionComments; trackBy: trackByIndex"><se-workflow-action-comment [workflowAction]="workflowAction" [actionComment]="actionComment"></se-workflow-action-comment></div></se-infinite-scrolling></div></se-collapsible-container-content></se-collapsible-container></div>');e.put("WorkflowActionCommentComponent.html",'<ng-container *ngIf="isDecisionComment; then decisionComment; else generalComment"></ng-container><ng-template #decisionComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-tile__title se-workflow-action-comment__header sap-icon--workflow-tasks sap-icon--m" [class.sap-icon--flip-h]="!isIncomingDecision()">{{ actionComment.decisionName }}</h2><p class="fd-has-type-minus-1">{{ actionComment.authorName }} | {{ createdAgo }}</p><p *ngIf="!!actionComment.text"><strong>{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}:</strong><ng-container *ngTemplateOutlet="comment"></ng-container></p></div></div></div></ng-template><ng-template #generalComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-panel__title">{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}</h2><p>{{ createdAgo }}</p><p class="se-workflow-action-comment__author">{{ actionComment.authorName }}</p><ng-container *ngTemplateOutlet="comment"></ng-container></div></div></div></ng-template><ng-template #comment><se-more-text class="se-workflow-action-comment__body" [ellipsis]="\'...\'" [text]="actionComment.text"></se-more-text></ng-template>');e.put("MediaContainerSelectorItemComponent.html",'<div class="media-container-selector-item__row"><img class="media-container-selector-item__img" [ngClass]="{ \'media-container-selector-item__img--selected\': isSelected }" [src]="getThumbnailUrl(item.thumbnailUrl)"/><div class="media-container-selector-item__label">{{ item.qualifier }}</div></div>');e.put("MediaContainerSelectorComponent.html",'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="field.qualifier" [model]="mediaContainerNameModel" [showRemoveButton]="true" [itemComponent]="itemComponent" [actionableSearchItem]="actionableSearchItem"></se-generic-editor-dropdown><div *ngIf="isSelected() || creationInProgress"><label class="se-control-label required se-media-container-name-label">{{ \'se.cms.media.responsive.name\' | lowercase | translate }}</label> <input type="text" name="media-container-qualifier" [id]="\'media-container-qualifier-\' + id" class="fd-form-control" [ngModel]="name" (ngModelChange)="onNameChange($event)" [readOnly]="isNameReadOnly()"/></div>');e.put("MediaFormatUploadedComponent.html",'<div class="se-media--present"><div class="se-media--present-img-container se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><div class="se-media-preview__image-wrapper"><img class="se-media-preview__image-thumbnail" [src]="media.url"/></div></div><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><se-media-file-selector [labelI18nKey]="replaceLabelI18nKey" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'media-format-present-replace\' + (isFieldDisabled ? \' file-selector-disabled\' : \'\')" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-remove-button [isDisabled]="isFieldDisabled" (clickHandler)="onRemoveButtonClick()"></se-media-remove-button></div>');e.put("MediaPrinterComponent.html",'<div class="se-media-selector" *ngIf="isSelected"><span class="se-media-selector__left-section se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><img class="se-media-preview__image-thumbnail" [src]="media.url"/> </span><span class="se-media-selector__right-section"><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><button class="se-media-action-btn replace-image" [disabled]="isDisabled()"><span class="sap-icon--share se-media__action-icon"></span><se-media-action-label [state]="isDisabled() ? \'disabled\' : null" [i18nKey]="\'se.upload.image.replace\'"></se-media-action-label></button><se-media-remove-button [isDisabled]="isDisabled()" (clickHandler)="select.removeSelectedOption($event, media)"></se-media-remove-button></span></div><div class="se-media-selector__search" *ngIf="!isSelected"><div class="se-media-selector__search-img-wrapper"><img [src]="media.url" class="se-media-selector__search-img"/></div><div class="se-media-selector__search-name">{{ media.code }}</div></div>');e.put("MediaUploadFieldComponent.html",'<div class="se-media-upload__file-info-field" [ngClass]="getContainerClassName()"><label class="se-control-label" [ngClass]="{ \'se-media-upload-has-error\': hasError(), required: isRequired }" [translate]="labelI18nKey"></label> <input type="text" [ngClass]="{ \'is-invalid\': hasError() }" class="fd-form__control" [attr.name]="fieldName" [ngModel]="fieldValue" (ngModelChange)="onChangeValue($event)"/> <span class="upload-field-error fd-form__message fd-form__message--error" [ngClass]="getErrorClassName()" *ngFor="let error of fieldErrors">{{ error | translate }}</span></div>');e.put("ProductNodeComponent.html",'<div class="se-product-row"><div class="se-product-node" [ngClass]="{            \'se-product-node--no-drag\' : !parent.dragEnabled,            \'se-product-node--drag\': parent.dragEnabled         }"><img class="se-product-row__img" [src]="node.thumbnail.url || \'/cmssmartedit/images/product_thumbnail_default.png\'" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.name | seL10n  | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog se-nowrap-ellipsis" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div>');e.put("ProductSelectorItemComponent.html",'<div class="se-product-row"><div class="se-product-node"><img class="se-product-row__img" [src]="getThumbnailUrl(item.thumbnail?.url)" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog"><div class="se-nowrap-ellipsis" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div></div>');e.put("CategoryNodeComponent.html",'<div class="se-product-row"><div class="se-category-node" [ngClass]="{          \'se-category-node--no-drag\': !parent.dragEnabled,          \'se-category-node--drag\': parent.dragEnabled        }"><div class="se-product-row__product" [title]="node.name | seL10n | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div></div>');e.put("CategorySelectorItemComponent.html",'<div class="se-product-row"><div class="se-category-row-container--item"><div class="se-product-row__product" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div>')}])})();var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};function __extends(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return __assign.apply(this,arguments)};function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var deprecatedSince1905=function(){i.module("oldModule",["newModule"]);i.module("pageServiceModule",["cmsSmarteditServicesModule"])};var deprecatedSince1911=function(){i.module("cmsitemsRestService",["cmsSmarteditServicesModule"])};var deprecatedSince2005=function(){i.module("catalogVersionRestServiceModule",["cmssmarteditContainer"])};var deprecate=function(){deprecatedSince1905();deprecatedSince1911();deprecatedSince2005()};var S=function(){function GenericEditorWidgetsModule(){}GenericEditorWidgetsModule=__decorate([r.SeModule({imports:[r.YEditableListModule]})],GenericEditorWidgetsModule);return GenericEditorWidgetsModule}();window.__smartedit__.addDecoratorPayload("Component","ProductNodeComponent",{selector:"se-product-node",template:'<div class="se-product-row"><div class="se-product-node" [ngClass]="{\n            \'se-product-node--no-drag\' : !parent.dragEnabled,\n            \'se-product-node--drag\': parent.dragEnabled \n        }"><img class="se-product-row__img" [src]="node.thumbnail.url || \'/cmssmartedit/images/product_thumbnail_default.png\'" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.name | seL10n  | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog se-nowrap-ellipsis" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div>',styles:[".se-product-node{display:grid;grid-template-columns:1fr 5fr 5fr 7fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.se-product-node--no-drag{grid-template-columns:1fr 6fr 6fr 7fr;cursor:default}.se-product-node--drag{grid-template-columns:1fr 5fr 5fr 7fr .5fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var b=function(){ProductNodeComponent.$inject=["node","parent"];function ProductNodeComponent(e,t){this.node=e;this.parent=t;var n=this.parent.nodeActions.getDropdownItems;this.dropdownItems=n()}ProductNodeComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-product-node",template:'<div class="se-product-row"><div class="se-product-node" [ngClass]="{\n            \'se-product-node--no-drag\' : !parent.dragEnabled,\n            \'se-product-node--drag\': parent.dragEnabled \n        }"><img class="se-product-row__img" [src]="node.thumbnail.url || \'/cmssmartedit/images/product_thumbnail_default.png\'" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.name | seL10n  | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog se-nowrap-ellipsis" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div>',styles:[".se-product-node{display:grid;grid-template-columns:1fr 5fr 5fr 7fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.se-product-node--no-drag{grid-template-columns:1fr 6fr 6fr 7fr;cursor:default}.se-product-node--drag{grid-template-columns:1fr 5fr 5fr 7fr .5fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.TREE_NODE)),__param(1,a.Inject(a.forwardRef((function(){return r.TreeComponent})))),__metadata("design:paramtypes",[Object,r.TreeComponent])],ProductNodeComponent);return ProductNodeComponent}();window.__smartedit__.addDecoratorPayload("Component","ProductSelectorItemComponent",{selector:"se-product-selector-item",template:'<div class="se-product-row"><div class="se-product-node"><img class="se-product-row__img" [src]="getThumbnailUrl(item.thumbnail?.url)" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog"><div class="se-nowrap-ellipsis" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div></div>',styles:[".se-product-node{display:grid;grid-template-columns:1fr 5fr 5fr 7fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.se-product-node--no-drag{grid-template-columns:1fr 6fr 6fr 7fr;cursor:default}.se-product-node--drag{grid-template-columns:1fr 5fr 5fr 7fr .5fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var I=function(){ProductSelectorItemComponent.$inject=["data"];function ProductSelectorItemComponent(e){this.data=e;this.defaultThumbnail=o.IMAGES_URL+"/product_thumbnail_default.png";this.item=e.item}ProductSelectorItemComponent.prototype.getThumbnailUrl=function(e){return e||this.defaultThumbnail};ProductSelectorItemComponent.prototype.getThumbnailUrl.$inject=["url"];ProductSelectorItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-product-selector-item",template:'<div class="se-product-row"><div class="se-product-node"><img class="se-product-row__img" [src]="getThumbnailUrl(item.thumbnail?.url)" alt="product image"/><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product se-nowrap-ellipsis" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog"><div class="se-nowrap-ellipsis" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div></div>',styles:[".se-product-node{display:grid;grid-template-columns:1fr 5fr 5fr 7fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.se-product-node--no-drag{grid-template-columns:1fr 6fr 6fr 7fr;cursor:default}.se-product-node--drag{grid-template-columns:1fr 5fr 5fr 7fr .5fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],ProductSelectorItemComponent);return ProductSelectorItemComponent}();var w="/cmssmarteditwebservices/v1/sites/:siteUID/categories";var E=w+"/:categoryUID";var P="/cmssmarteditwebservices/v1/productcatalogs/:catalogId/versions/:catalogVersion/categories";var T=function(){ProductCategoryService.$inject=["restServiceFactory","languageService"];function ProductCategoryService(e,t){this.languageService=t;this.productCategoryService=e.get(E);this.productCategorySearchService=e.get(P)}ProductCategoryService.prototype.getCategoryById=function(e,t){return this.productCategoryService.get({siteUID:e,categoryUID:t})};ProductCategoryService.prototype.getCategoryById.$inject=["siteUID","categoryUID"];ProductCategoryService.prototype.getCategories=function(e){var t=this;this._validateProductCatalogInfo(e);return this.languageService.getResolveLocale().then((function(n){return t.productCategorySearchService.page({catalogId:e.catalogId,catalogVersion:e.catalogVersion,text:e.mask,pageSize:e.pageSize,currentPage:e.currentPage,langIsoCode:n})}))};ProductCategoryService.prototype.getCategories.$inject=["payload"];ProductCategoryService.prototype._validateProductCatalogInfo=function(e){if(!e.siteUID){throw Error("[productService] - site UID missing.")}if(!e.catalogId){throw Error("[productService] - catalog ID missing.")}if(!e.catalogVersion){throw Error("[productService] - catalog version  missing.")}};ProductCategoryService.prototype._validateProductCatalogInfo.$inject=["productCatalogInfo"];ProductCategoryService=__decorate([r.SeDowngradeService(),a.Injectable(),__metadata("design:paramtypes",[r.RestServiceFactory,r.LanguageService])],ProductCategoryService);return ProductCategoryService}();var A=function(){CatalogInformationService.$inject=["catalogService","sharedDataService","productCategoryService","productService"];function CatalogInformationService(e,t,n,i){this.catalogService=e;this.sharedDataService=t;this.productCategoryService=n;this.productService=i;this.init()}Object.defineProperty(CatalogInformationService.prototype,"productsFetchStrategy",{get:function(){return this._productsFetchStrategy},enumerable:false,configurable:true});Object.defineProperty(CatalogInformationService.prototype,"categoriesFetchStrategy",{get:function(){return this._categoriesFetchStrategy},enumerable:false,configurable:true});CatalogInformationService.prototype.makeGetProductCatalogsInformation=function(){var e=this;return function(){return e.getProductCatalogsInformation()}};CatalogInformationService.prototype.getProductCatalogsInformation=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getSiteUid()];case 1:e=i.sent();if(!(this.cachedSiteUid===e&&this.parsedCatalogs))return[3,2];return[2,this.parsedCatalogs];case 2:this.cachedSiteUid=e;return[4,this.catalogService.getProductCatalogsForSite(e)];case 3:t=i.sent();n=this.catalogsToProductCatalogById(t);this.parsedCatalogs=s.values(n);return[2,this.parsedCatalogs]}}))}))};CatalogInformationService.prototype.init=function(){var e=this;this._productsFetchStrategy={fetchPage:function(t,n,i,o){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.productsFetchPage(t,n,i,o)]}))}))},fetchEntity:function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.productsFetchEntity(t)]}))}))}};this._categoriesFetchStrategy={fetchPage:function(t,n,i,o){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.categoriesFetchPage(t,n,i,o)]}))}))},fetchEntity:function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.categoriesFetchEntity(t)]}))}))}}};CatalogInformationService.prototype.productsFetchPage=function(e,t,n,i){return __awaiter(this,void 0,void 0,(function(){var o,r,a,s,c;return __generator(this,(function(l){switch(l.label){case 0:return[4,this.getSiteUid()];case 1:o=l.sent();e.siteUID=o;return[4,this.productService.findProducts(e,{mask:t,pageSize:n,currentPage:i})];case 2:r=l.sent(),a=r.products,s=r.pagination;c=a.map((function(e){return __assign(__assign({},e),{id:e.uid})}));return[2,{pagination:s,results:c}]}}))}))};CatalogInformationService.prototype.productsFetchPage.$inject=["catalogInfo","mask","pageSize","currentPage"];CatalogInformationService.prototype.productsFetchEntity=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getSiteUid()];case 1:t=i.sent();return[4,this.productService.getProductById(t,e)];case 2:n=i.sent();return[2,__assign(__assign({},n),{id:n.uid})]}}))}))};CatalogInformationService.prototype.productsFetchEntity.$inject=["productUid"];CatalogInformationService.prototype.categoriesFetchPage=function(e,t,n,i){return __awaiter(this,void 0,void 0,(function(){var o,r,a,s,c;return __generator(this,(function(l){switch(l.label){case 0:return[4,this.getSiteUid()];case 1:o=l.sent();e.siteUID=o;return[4,this.productCategoryService.getCategories({catalogId:e.catalogId,catalogVersion:e.catalogVersion,siteUID:e.siteUID,mask:t,pageSize:n,currentPage:i})];case 2:r=l.sent(),a=r.productCategories,s=r.pagination;c=a.map((function(e){return __assign(__assign({},e),{id:e.uid})}));return[2,{pagination:s,results:c}]}}))}))};CatalogInformationService.prototype.categoriesFetchPage.$inject=["catalogInfo","mask","pageSize","currentPage"];CatalogInformationService.prototype.categoriesFetchEntity=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getSiteUid()];case 1:t=i.sent();return[4,this.productCategoryService.getCategoryById(t,e)];case 2:n=i.sent();n.id=n.uid;return[2,n]}}))}))};CatalogInformationService.prototype.categoriesFetchEntity.$inject=["categoryUID"];CatalogInformationService.prototype.getSiteUid=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY).then((function(e){var t=e.siteDescriptor.uid;return t}))]}))}))};CatalogInformationService.prototype.catalogsToProductCatalogById=function(e){var t={};e.forEach((function(e){t[e.catalogId]={id:e.catalogId,name:e.name,versions:e.versions.map((function(e){var t=e.version;return{id:t,label:t}}))}}));return t};CatalogInformationService.prototype.catalogsToProductCatalogById.$inject=["catalogs"];CatalogInformationService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,r.ISharedDataService,T,c.ProductService])],CatalogInformationService);return CatalogInformationService}();var D=function(){ProductSelectorComponent.$inject=["catalogInformationService"];function ProductSelectorComponent(e){this.catalogInformationService=e;this.maxNumItems=10;this.productNodeComponent=b;this.productSelectorItemComponent=I}ProductSelectorComponent.prototype.$onInit=function(){this.getCatalogs=this.catalogInformationService.makeGetProductCatalogsInformation();this.itemsFetchStrategy=this.catalogInformationService.productsFetchStrategy;if(this.editable===undefined){this.editable=true}};ProductSelectorComponent=__decorate([r.SeComponent({selector:"se-product-selector",templateUrl:"productSelectorTemplate.html",inputs:["id:@","model:=","qualifier","editable:?"]}),__metadata("design:paramtypes",[A])],ProductSelectorComponent);return ProductSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","CategoryNodeComponent",{selector:"se-category-node",template:'<div class="se-product-row"><div class="se-category-node" [ngClass]="{\n          \'se-category-node--no-drag\': !parent.dragEnabled,\n          \'se-category-node--drag\': parent.dragEnabled\n        }"><div class="se-product-row__product" [title]="node.name | seL10n | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div></div>',styles:[".se-category-node{padding:0 16px;display:grid;grid-column-gap:12px;align-items:center}.se-category-node--no-drag{grid-template-columns:6fr 6fr 8fr}.se-category-node--drag{grid-template-columns:6fr 6fr 7fr 1fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var O=function(){CategoryNodeComponent.$inject=["node","parent"];function CategoryNodeComponent(e,t){this.node=e;this.parent=t;var n=this.parent.nodeActions.getDropdownItems;this.dropdownItems=n()}CategoryNodeComponent=__decorate([r.SeDowngradeService(),a.Component({selector:"se-category-node",template:'<div class="se-product-row"><div class="se-category-node" [ngClass]="{\n          \'se-category-node--no-drag\': !parent.dragEnabled,\n          \'se-category-node--drag\': parent.dragEnabled\n        }"><div class="se-product-row__product" [title]="node.name | seL10n | async">{{ node.name | seL10n | async }}</div><div class="se-product-row__product" [title]="node.code">{{ node.code }}</div><div class="se-product-row__catalog" title="{{ node.catalogId }} - {{ node.catalogVersion }}">{{ node.catalogId }} - {{ node.catalogVersion }}</div><div><se-dropdown-menu *ngIf="parent.dragEnabled" [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div></div></div>',styles:[".se-category-node{padding:0 16px;display:grid;grid-column-gap:12px;align-items:center}.se-category-node--no-drag{grid-template-columns:6fr 6fr 8fr}.se-category-node--drag{grid-template-columns:6fr 6fr 7fr 1fr}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.TREE_NODE)),__param(1,a.Inject(a.forwardRef((function(){return r.TreeComponent})))),__metadata("design:paramtypes",[Object,r.TreeComponent])],CategoryNodeComponent);return CategoryNodeComponent}();window.__smartedit__.addDecoratorPayload("Component","CategorySelectorItemComponent",{selector:"se-category-selector-item",template:'<div class="se-product-row"><div class="se-category-row-container--item"><div class="se-product-row__product" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div>',styles:[".se-category-row-container--item{display:grid;grid-template-columns:6fr 6fr 8fr;grid-column-gap:12px;width:100%;padding:0 8px}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var R=function(){CategorySelectorItemComponent.$inject=["data"];function CategorySelectorItemComponent(e){this.data=e;this.item=e.item}CategorySelectorItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-category-selector-item",template:'<div class="se-product-row"><div class="se-category-row-container--item"><div class="se-product-row__product" [title]="item.name | seL10n | async">{{ item.name | seL10n | async }}</div><div class="se-product-row__product" [title]="item.code">{{ item.code }}</div><div class="se-product-row__catalog" title="{{ item.catalogId }} - {{ item.catalogVersion }}">{{ item.catalogId }} - {{ item.catalogVersion }}</div></div></div>',styles:[".se-category-row-container--item{display:grid;grid-template-columns:6fr 6fr 8fr;grid-column-gap:12px;width:100%;padding:0 8px}",".se-product-row__catalog,.se-product-row__product{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;text-align:left}.se-product-row__img{padding:2px;width:36px;height:36px;font-size:.35rem}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],CategorySelectorItemComponent);return CategorySelectorItemComponent}();var M=function(){CategorySelectorComponent.$inject=["catalogInformationService"];function CategorySelectorComponent(e){this.catalogInformationService=e;this.categoryNodeComponent=O;this.categorySelectorItemComponent=R}CategorySelectorComponent.prototype.$onInit=function(){this.getCatalogs=this.catalogInformationService.makeGetProductCatalogsInformation();this.itemsFetchStrategy=this.catalogInformationService.categoriesFetchStrategy;if(this.editable===undefined){this.editable=true}};CategorySelectorComponent=__decorate([r.SeComponent({selector:"se-category-selector",templateUrl:"categorySelectorTemplate.html",inputs:["id:@","model:=","qualifier","editable:?"]}),__metadata("design:paramtypes",[A])],CategorySelectorComponent);return CategorySelectorComponent}();var x={provide:"NAVIGATION_NODE_ROOT_NODE_UID",useValue:"root"};var N={provide:"NAVIGATION_NODE_TYPECODE",useValue:"CMSNavigationNode"};var k=function(){function LegacyNavigationModule(){}LegacyNavigationModule=__decorate([r.SeModule({imports:["smarteditServicesModule","functionsModule","resourceLocationsModule","confirmationModalServiceModule","yLoDashModule"],providers:[N,x]})],LegacyNavigationModule);return LegacyNavigationModule}();var F=function(){function CmsSmarteditComponentsModule(){}CmsSmarteditComponentsModule=__decorate([r.SeModule({imports:[S,k,"catalogAwareSelectorModule"],declarations:[D,M]})],CmsSmarteditComponentsModule);return CmsSmarteditComponentsModule}();var z=function(){function CmsSmarteditServicesModule(){}CmsSmarteditServicesModule=__decorate([r.SeModule({imports:["smarteditServicesModule"],providers:[r.diNameUtils.makeValueProvider({cmsitemsUri:o.cmsitemsUri})]})],CmsSmarteditServicesModule);return CmsSmarteditServicesModule}();var L=function(){CatalogVersionRestService.$inject=["restServiceFactory"];function CatalogVersionRestService(e){this.restServiceFactory=e;this.URI="/cmswebservices/v1/sites/:"+r.CONTEXT_SITE_ID+"/catalogs/:"+r.CONTEXT_CATALOG+"/versions/:"+r.CONTEXT_CATALOG_VERSION+"/targets?mode=cloneableTo"}CatalogVersionRestService.prototype.getCloneableTargets=function(e){var t=this.restServiceFactory.get(this.URI);return t.get(e)};CatalogVersionRestService.prototype.getCloneableTargets.$inject=["uriContext"];CatalogVersionRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],CatalogVersionRestService);return CatalogVersionRestService}();var V=function(){PageRestrictionsRestService.$inject=["restServiceFactory"];function PageRestrictionsRestService(e){this.restServiceFactory=e;this.contextualPageRestrictionsRestService=this.restServiceFactory.get(o.CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI);this.pageRestrictionsRestService=this.restServiceFactory.get(o.PAGES_RESTRICTIONS_RESOURCE_URI)}PageRestrictionsRestService.prototype.getPagesRestrictionsForPageId=function(e){return this.contextualPageRestrictionsRestService.get({pageId:e})};PageRestrictionsRestService.prototype.getPagesRestrictionsForPageId.$inject=["pageId"];PageRestrictionsRestService.prototype.getPagesRestrictionsForCatalogVersion=function(e,t,n){return this.pageRestrictionsRestService.get({siteUID:e,catalogId:t,catalogVersion:n})};PageRestrictionsRestService.prototype.getPagesRestrictionsForCatalogVersion.$inject=["siteUID","catalogId","catalogVersion"];PageRestrictionsRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PageRestrictionsRestService);return PageRestrictionsRestService}();var $=function(){PageTypesRestrictionTypesRestService.$inject=["restServiceFactory"];function PageTypesRestrictionTypesRestService(e){this.restServiceFactory=e;this.restService=this.restServiceFactory.get(o.PAGE_TYPES_RESTRICTION_TYPES_URI)}PageTypesRestrictionTypesRestService.prototype.getPageTypesRestrictionTypes=function(){return this.restService.get()};PageTypesRestrictionTypesRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PageTypesRestrictionTypesRestService);return PageTypesRestrictionTypesRestService}();var U=function(){PagesVariationsRestService.$inject=["restServiceFactory"];function PagesVariationsRestService(e){this.URI="/cmswebservices/v1/sites/"+r.PAGE_CONTEXT_SITE_ID+"/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/pages/:pageId/variations";this.resource=e.get(this.URI)}PagesVariationsRestService.prototype.getVariationsForPrimaryPageId=function(e){return this.resource.get({pageId:e}).then((function(e){return e.uids}))};PagesVariationsRestService.prototype.getVariationsForPrimaryPageId.$inject=["pageId"];PagesVariationsRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PagesVariationsRestService);return PagesVariationsRestService}();var j=function(){PageRestrictionsService.$inject=["pageRestrictionsRestService"];function PageRestrictionsService(e){this.pageRestrictionsRestService=e}PageRestrictionsService.prototype.getPageRestrictionsCountForPageUID=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pageRestrictionsRestService.getPagesRestrictionsForPageId(e)];case 1:t=n.sent();return[2,t.pageRestrictionList.length]}}))}))};PageRestrictionsService.prototype.getPageRestrictionsCountForPageUID.$inject=["pageUID"];PageRestrictionsService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[V])],PageRestrictionsService);return PageRestrictionsService}();var B=function(){DisplayConditionsFacade.$inject=["pageService","pageRestrictionsService","logService"];function DisplayConditionsFacade(e,t,n){this.pageService=e;this.pageRestrictionsService=t;this.logService=n}DisplayConditionsFacade.prototype.getPageInfoForPageUid=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:t=this.pageService.getPageById(e);n=this.pageService.isPagePrimary(e);return[4,Promise.all([t,n])];case 1:i=a.sent(),o=i[0],r=i[1];return[2,{pageName:o.name,pageType:o.typeCode,isPrimary:r}]}}))}))};DisplayConditionsFacade.prototype.getPageInfoForPageUid.$inject=["pageId"];DisplayConditionsFacade.prototype.getVariationsForPageUid=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;var i=this;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.pageService.getVariationPages(e)];case 1:t=o.sent();if(t.length===0){return[2,[]]}return[4,Promise.all(t.map((function(e){return i.pageRestrictionsService.getPageRestrictionsCountForPageUID(e.uid)})))];case 2:n=o.sent();return[2,t.map((function(e,t){return{pageName:e.name,creationDate:e.creationtime,restrictions:n[t]}}))]}}))}))};DisplayConditionsFacade.prototype.getVariationsForPageUid.$inject=["primaryPageId"];DisplayConditionsFacade.prototype.updatePage=function(e,t){return this.pageService.updatePageById(e,t)};DisplayConditionsFacade.prototype.updatePage.$inject=["pageId","pageData"];DisplayConditionsFacade.prototype.isPagePrimary=function(e){return this.pageService.isPagePrimary(e)};DisplayConditionsFacade.prototype.isPagePrimary.$inject=["pageId"];DisplayConditionsFacade.prototype.getPrimaryPageForVariationPage=function(e){return this.pageService.getPrimaryPage(e).then((function(e){return{uid:e.uid,name:e.name,label:e.label}}))};DisplayConditionsFacade.prototype.getPrimaryPageForVariationPage.$inject=["variationPageId"];DisplayConditionsFacade.prototype.getPrimaryPagesForPageType=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.pageService.getPaginatedPrimaryPagesForPageType(e,t,n)];case 1:i=r.sent();return[2,{pagination:i.pagination,results:i.response.map((function(e){return{id:e.uid,label:e.name||e.label}}))}];case 2:o=r.sent();this.logService.warn("[getPrimaryPagesForPageType] - Cannot retrieve list of primary pages. "+o);return[3,3];case 3:return[2]}}))}))};DisplayConditionsFacade.prototype.getPrimaryPagesForPageType.$inject=["pageTypeCode","uriParams","fetchPageParams"];DisplayConditionsFacade=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.IPageService,j,r.LogService])],DisplayConditionsFacade);return DisplayConditionsFacade}();var H=function(){DisplayConditionsEditorModel.$inject=["displayConditionsFacade"];function DisplayConditionsEditorModel(e){this.displayConditionsFacade=e;this.variations=[]}DisplayConditionsEditorModel.prototype.initModel=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:this.pageUid=e;return[4,this.displayConditionsFacade.getPageInfoForPageUid(e)];case 1:t=n.sent();this.pageName=t.pageName,this.pageType=t.pageType,this.isPrimary=t.isPrimary;if(this.isPrimary){return[2,this.initModelForPrimary(e)]}return[2,this.initModelForVariation(e)]}}))}))};DisplayConditionsEditorModel.prototype.initModel.$inject=["pageUid"];DisplayConditionsEditorModel.prototype.initModelForPrimary=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this;return[4,this.displayConditionsFacade.getVariationsForPageUid(e)];case 1:t.variations=n.sent();return[2]}}))}))};DisplayConditionsEditorModel.prototype.initModelForPrimary.$inject=["pageUid"];DisplayConditionsEditorModel.prototype.initModelForVariation=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:this.isAssociatedPrimaryReadOnly=this.pageType!=="ContentPage";return[4,this.displayConditionsFacade.getPrimaryPageForVariationPage(e)];case 1:t=n.sent();this.associatedPrimaryPage=t;this.originalPrimaryPage=t;return[2]}}))}))};DisplayConditionsEditorModel.prototype.initModelForVariation.$inject=["pageUid"];DisplayConditionsEditorModel=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[B])],DisplayConditionsEditorModel);return DisplayConditionsEditorModel}();var G="CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO";var W="CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO";(function(e){e["PENDING"]="PENDING";e["NO_HOMEPAGE"]="NO_HOMEPAGE";e["LOCAL"]="LOCAL";e["OLD"]="OLD";e["PARENT"]="PARENT"})(t.CatalogHomepageDetailsStatus||(t.CatalogHomepageDetailsStatus={}));(function(e){e["OLD"]="old";e["CURRENT"]="current";e["FALLBACK"]="fallback"})(t.HomepageType||(t.HomepageType={}));var q=function(){HomepageService.$inject=["catalogService","systemEventService"];function HomepageService(e,t){this.catalogService=e;this.systemEventService=t}HomepageService.prototype.sendEventHideReplaceParentHomePageInfo=function(e){this.systemEventService.publish(W,e)};HomepageService.prototype.sendEventHideReplaceParentHomePageInfo.$inject=["data"];HomepageService.prototype.sendEventShowReplaceParentHomePageInfo=function(e){this.systemEventService.publish(G,e)};HomepageService.prototype.sendEventShowReplaceParentHomePageInfo.$inject=["data"];HomepageService.prototype.getHomepageDetailsForContext=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.getContentCatalogVersion(e)];case 1:t=i.sent();n=t.homepage?t.homepage.current:null;return[2,this.buildHomepageDetailsForContext(n,e)]}}))}))};HomepageService.prototype.getHomepageDetailsForContext.$inject=["uriContext"];HomepageService.prototype.isCurrentHomepage=function(e,n){return this.isHomepageType(e,n,t.HomepageType.CURRENT)};HomepageService.prototype.isCurrentHomepage.$inject=["cmsPage","uriContext"];HomepageService.prototype.isOldHomepage=function(e,n){return this.isHomepageType(e,n,t.HomepageType.OLD)};HomepageService.prototype.isOldHomepage.$inject=["cmsPage","uriContext"];HomepageService.prototype.getHomepageType=function(e,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.catalogService.getContentCatalogVersion(n)];case 1:i=o.sent();if(!i||!i.homepage){return[2,null]}if(i.homepage.current&&i.homepage.current.uid===e.uid&&i.homepage.current.catalogVersionUuid===e.catalogVersion){return[2,t.HomepageType.CURRENT]}else if(i.homepage.old&&i.homepage.old.uid===e.uid){return[2,this.compareCatalogVersions(i.homepage.old.catalogVersionUuid,e.catalogVersion,(function(e,n){return e.catalogId===n.catalogId?t.HomepageType.OLD:null}))]}else if(i.homepage.fallback&&i.homepage.fallback.uid===e.uid){return[2,this.compareCatalogVersions(i.homepage.fallback.catalogVersionUuid,e.catalogVersion,(function(e,n){return e.uuid===n.uuid?t.HomepageType.FALLBACK:null}))]}return[2,null]}}))}))};HomepageService.prototype.getHomepageType.$inject=["cmsPage","uriContext"];HomepageService.prototype.hasFallbackHomePage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.getContentCatalogVersion(e)];case 1:t=n.sent();if(!t||!t.homepage){throw Error("HomepageService.hasFallbackHomePage - Catalog does not have homepage fallback property")}return[2,!!t.homepage.fallback]}}))}))};HomepageService.prototype.hasFallbackHomePage.$inject=["uriContext"];HomepageService.prototype.canSyncHomepage=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.isOldHomepage(e,t)];case 1:n=o.sent();if(!n){return[2,true]}return[4,this.catalogService.getContentCatalogVersion(t)];case 2:i=o.sent();return[2,this.compareCatalogVersions(i.homepage.current.catalogVersionUuid,e.catalogVersion,(function(t,n){return e.uid!==i.homepage.current.uid&&t.catalogId!==n.catalogId}))]}}))}))};HomepageService.prototype.canSyncHomepage.$inject=["cmsPage","uriContext"];HomepageService.prototype.compareCatalogVersions=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r;return __generator(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.catalogService.getCatalogVersionByUuid(e),this.catalogService.getCatalogVersionByUuid(t)])];case 1:i=a.sent(),o=i[0],r=i[1];return[2,n(o,r)]}}))}))};HomepageService.prototype.compareCatalogVersions.$inject=["catalogAUuid","catalogBUuid","compare"];HomepageService.prototype.isHomepageType=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.getHomepageType(e,t)];case 1:i=o.sent();return[2,i===n]}}))}))};HomepageService.prototype.isHomepageType.$inject=["cmsPage","uriContext","type"];HomepageService.prototype.buildHomepageDetailsForContext=function(e,n){return __awaiter(this,void 0,void 0,(function(){var i,r,a;return __generator(this,(function(s){switch(s.label){case 0:if(!e){return[2,{status:t.CatalogHomepageDetailsStatus.NO_HOMEPAGE}]}return[4,this.catalogService.getCatalogVersionByUuid(e.catalogVersionUuid)];case 1:i=s.sent();r=i.catalogId!==n[o.CONTEXT_CATALOG];return[4,this.catalogService.getContentCatalogVersion(n)];case 2:a=s.sent();if(r){return[2,{status:t.CatalogHomepageDetailsStatus.PARENT,parentCatalogName:i.catalogName,parentCatalogVersion:i.version,targetCatalogName:a.catalogName,targetCatalogVersion:a.version}]}return[2,{status:t.CatalogHomepageDetailsStatus.LOCAL,currentHomepageName:e.name,currentHomepageUid:e.uid,oldHomepageUid:i.homepage?i.homepage.old?i.homepage.old.uid:null:null}]}}))}))};HomepageService.prototype.buildHomepageDetailsForContext.$inject=["homepageForCurrentCatalog","uriContext"];HomepageService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,r.SystemEventService])],HomepageService);return HomepageService}();var K=function(){PageDisplayConditionsService.$inject=["catalogService"];function PageDisplayConditionsService(e){this.catalogService=e}PageDisplayConditionsService.prototype.getNewPageConditions=function(e,t){return this.getPageDisplayConditionsByPageType(e,t)};PageDisplayConditionsService.prototype.getNewPageConditions.$inject=["pageTypeCode","uriContext"];PageDisplayConditionsService.prototype.fetchDisplayConditionsForPageType=function(e,t){return this.catalogService.getContentCatalogVersion(t).then((function(t){return t.pageDisplayConditions.find((function(t){return t.typecode===e}))}))};PageDisplayConditionsService.prototype.fetchDisplayConditionsForPageType.$inject=["pageType","uriContext"];PageDisplayConditionsService.prototype.getPageDisplayConditionsByPageType=function(e,t){return this.fetchDisplayConditionsForPageType(e,t).then((function(e){if(!e||!e.options){return[]}return e.options.map((function(e){return{label:e.label,description:e.label+".description",isPrimary:e.id==="PRIMARY"}}))}))};PageDisplayConditionsService.prototype.getPageDisplayConditionsByPageType.$inject=["pageType","uriContext"];PageDisplayConditionsService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService])],PageDisplayConditionsService);return PageDisplayConditionsService}();var Y="cms-link-to-reload-structure";window.__smartedit__.addDecoratorPayload("Component","GenericEditorModalComponent",{selector:"se-generic-editor-modal",template:'\n        <se-message\n            class="se-ge-modal--messages"\n            *ngIf="showDisclaimer"\n            type="info"\n            messageId="VisibilityTab.DisplayComponentOffDisclaimer"\n        >\n            <ng-container se-message-description>\n                {{ \'se.cms.editortabset.visibilitytab.disclaimer\' | translate }}\n            </ng-container>\n        </se-message>\n\n        <ng-container *ngIf="data && data.messages">\n            <se-message\n                class="se-ge-modal--messages"\n                *ngFor="let msg of data.messages; let i = index"\n                [type]="msg.type"\n                messageId="generic-editor-model-message-{{ i }}"\n            >\n                <ng-container se-message-description> {{ msg.message }} </ng-container>\n            </se-message>\n        </ng-container>\n\n        <se-generic-editor\n            *ngIf="isSetupCompleted"\n            [id]="genericEditorId"\n            [smarteditComponentId]="data.componentUuid"\n            [smarteditComponentType]="data.componentType"\n            [structure]="structure"\n            [structureApi]="structureApi"\n            [content]="data.content"\n            [contentApi]="contentApi"\n            [(submit)]="controls.submit"\n            [(reset)]="controls.reset"\n            [(isDirty)]="controls.isDirty"\n            [editorStackId]="editorStackId"\n            (getApi)="getApi($event)"\n        >\n        </se-generic-editor>\n    '});var X=function(){GenericEditorModalComponent.$inject=["modalManager","confirmationModalService","crossFrameEventService","systemEventService"];function GenericEditorModalComponent(e,t,n,i){this.modalManager=e;this.confirmationModalService=t;this.crossFrameEventService=n;this.systemEventService=i;this.data={};this.controls={};this.genericEditorId=r.stringUtils.generateIdentifier();this.showDisclaimer=false;this.STRUCTURE_API_BASE_URL=o.TYPES_RESOURCE_URI+"?code=:smarteditComponentType&mode=:structureApiMode";this.isSetupCompleted=false;this.isReset=false;this.isEscapeInProgress=false}GenericEditorModalComponent.prototype.onEscapeDown=function(){if(this.isEscapeInProgress){return}this.onEscapeClicked()};GenericEditorModalComponent.prototype.getApi=function(e){this.controls.genericEditorAPI=e;if(this.data.targetedQualifier){e.switchToTabContainingQualifier(this.data.targetedQualifier)}if(this.data.initialDirty){e.considerFormDirty()}};GenericEditorModalComponent.prototype.getApi.$inject=["genericEditorAPI"];GenericEditorModalComponent.prototype.onSave=function(){var e=this;return this.controls.submit().then((function(t){e.crossFrameEventService.publish(o.CMSITEMS_UPDATE_EVENT);if(e.saveCallback){e.saveCallback(t)}e.removeEventListeners();return t}))};GenericEditorModalComponent.prototype.onCancel=function(){var e=this;return new Promise((function(t,n){if(e.genericEditorIsDirty()&&!e.isReset){e.confirmationModalService.confirm({description:"se.editor.cancel.confirm"}).then((function(){e.controls.reset().then((function(){e.markAsReset();e.removeEventListeners();t()}),(function(){n()}));e.crossFrameEventService.publish("GENERIC_EDITOR_CANCEL",{confirmed:true})}),(function(){n();e.crossFrameEventService.publish("GENERIC_EDITOR_CANCEL",{confirmed:false})}))}else{e.removeEventListeners();t()}}))};GenericEditorModalComponent.prototype.setup=function(){var e=this;this.structure=this.data.structure;if(!this.structure){this.structureApi=this.getStructureApiByMode("DEFAULT");if(this.isGenericEditorInReadOnlyMode()){this.structureApi=this.applyReadOnlyModeToStructureApiUrl(this.structureApi)}}else if(this.isGenericEditorInReadOnlyMode()){this.structure=this.makeStructureReadOnly(this.structure)}this.changeStructureEventListener=this.systemEventService.subscribe(Y,(function(t,n){return e.onChangeStructureEvent(t,n)}));this.unrelatedValidationErrorsEvent=this.systemEventService.subscribe(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,(function(t,n){return e.onUnrelatedErrors(t,n)}));this.contentApi=this.data.contentApi||"/cmswebservices/v1/sites/"+r.CONTEXT_SITE_ID+"/cmsitems";this.modalManager.setDismissCallback((function(){return e.onCancel()}));this.modalManager.addButtons([{id:"cancel",label:this.data.cancelLabel||"se.cms.component.confirmation.modal.cancel",style:r.FundamentalModalButtonStyle.Default,action:r.FundamentalModalButtonAction.Dismiss,callback:function(){return u.from(e.onCancel())}},{id:"save",label:this.data.saveLabel||"se.cms.component.confirmation.modal.save",style:r.FundamentalModalButtonStyle.Primary,action:r.FundamentalModalButtonAction.Close,callback:function(){return u.from(e.onSave())},disabledFn:function(){return e.controls.genericEditorAPI&&e.controls.genericEditorAPI.isSubmitDisabled()||e.isGenericEditorInReadOnlyMode()}}]);this.isSetupCompleted=true};GenericEditorModalComponent.prototype.makeStructureReadOnly=function(e){e.attributes=e.attributes||[];e.attributes.forEach((function(e){e.editable=false}));return e};GenericEditorModalComponent.prototype.makeStructureReadOnly.$inject=["structure"];GenericEditorModalComponent.prototype.isGenericEditorInReadOnlyMode=function(){return!!this.data.readOnlyMode};GenericEditorModalComponent.prototype.getGenericEditorContent=function(){return this.controls.genericEditorAPI&&this.controls.genericEditorAPI.getContent()};GenericEditorModalComponent.prototype.genericEditorIsDirty=function(){return this.controls.isDirty&&this.controls.isDirty()};GenericEditorModalComponent.prototype.onChangeStructureEvent=function(e,t){if(this.genericEditorId===t.editorId){if(t.structureApiMode){this.structure=null;this.structureApi=this.getStructureApiByMode(t.structureApiMode)}else if(t.structure){this.structureApi=null;this.structure=t.structure}this.data.content=t.content}};GenericEditorModalComponent.prototype.onChangeStructureEvent.$inject=["eventId","payload"];GenericEditorModalComponent.prototype.onUnrelatedErrors=function(e,t){if(t.sourceGenericEditorId===this.data.componentUuid&&this.errorCallback){this.errorCallback(t.messages,this)}};GenericEditorModalComponent.prototype.onUnrelatedErrors.$inject=["eventId","eventData"];GenericEditorModalComponent.prototype.applyReadOnlyModeToStructureApiUrl=function(e){return e+"&readOnly=true"};GenericEditorModalComponent.prototype.applyReadOnlyModeToStructureApiUrl.$inject=["structureApiUrl"];GenericEditorModalComponent.prototype.getStructureApiByMode=function(e){return this.STRUCTURE_API_BASE_URL.replace(/:structureApiMode/gi,e)};GenericEditorModalComponent.prototype.getStructureApiByMode.$inject=["structureApiMode"];GenericEditorModalComponent.prototype.removeEventListeners=function(){this.unrelatedValidationErrorsEvent();this.changeStructureEventListener()};GenericEditorModalComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.getModalData().subscribe((function(t){e.data=t.data;e.saveCallback=t.saveCallback;e.errorCallback=t.errorCallback;e.editorStackId=t.data.editorStackId;if(!e.isSetupCompleted){e.setup()}}))};GenericEditorModalComponent.prototype.markAsReset=function(){this.isReset=true};GenericEditorModalComponent.prototype.onEscapeClicked=function(){var e=this;this.isEscapeInProgress=true;this.onCancel().then((function(){return e.modalManager.dismiss()})).finally((function(){e.isEscapeInProgress=false}))};__decorate([a.HostListener("document:keyup.escape"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],GenericEditorModalComponent.prototype,"onEscapeDown",null);GenericEditorModalComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-generic-editor-modal",template:'\n        <se-message\n            class="se-ge-modal--messages"\n            *ngIf="showDisclaimer"\n            type="info"\n            messageId="VisibilityTab.DisplayComponentOffDisclaimer"\n        >\n            <ng-container se-message-description>\n                {{ \'se.cms.editortabset.visibilitytab.disclaimer\' | translate }}\n            </ng-container>\n        </se-message>\n\n        <ng-container *ngIf="data && data.messages">\n            <se-message\n                class="se-ge-modal--messages"\n                *ngFor="let msg of data.messages; let i = index"\n                [type]="msg.type"\n                messageId="generic-editor-model-message-{{ i }}"\n            >\n                <ng-container se-message-description> {{ msg.message }} </ng-container>\n            </se-message>\n        </ng-container>\n\n        <se-generic-editor\n            *ngIf="isSetupCompleted"\n            [id]="genericEditorId"\n            [smarteditComponentId]="data.componentUuid"\n            [smarteditComponentType]="data.componentType"\n            [structure]="structure"\n            [structureApi]="structureApi"\n            [content]="data.content"\n            [contentApi]="contentApi"\n            [(submit)]="controls.submit"\n            [(reset)]="controls.reset"\n            [(isDirty)]="controls.isDirty"\n            [editorStackId]="editorStackId"\n            (getApi)="getApi($event)"\n        >\n        </se-generic-editor>\n    '}),__metadata("design:paramtypes",[r.FundamentalModalManagerService,r.IConfirmationModalService,r.CrossFrameEventService,r.SystemEventService])],GenericEditorModalComponent);return GenericEditorModalComponent}();var Z=function(){GenericEditorModalService.$inject=["modalService"];function GenericEditorModalService(e){this.modalService=e}GenericEditorModalService.prototype.open=function(e,t,n,i){var o=i?__assign({},i):{};o.modalPanelClass=("modal-lg "+(o.modalPanelClass||"")).trimRight();o.escKeyCloseable=false;var r=this.modalService.open({component:X,data:{data:e,saveCallback:t,errorCallback:n},config:o,templateConfig:{title:e.title,isDismissButtonVisible:true,titleSuffix:"se.cms.editor.title.suffix"}});return new Promise((function(e,t){return r.afterClosed.subscribe(e,t)}))};GenericEditorModalService.prototype.open.$inject=["data","saveCallback","errorCallback","config"];GenericEditorModalService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IModalService])],GenericEditorModalService);return GenericEditorModalService}();var Q=function(e){__extends(EditorModalService,e);EditorModalService.$inject=["genericEditorModalService","componentService","renderService","contextAwareEditableItemService","cmsitemsRestService","translateService","genericEditorStackService"];function EditorModalService(t,n,i,o,r,a,s){var c=e.call(this)||this;c.genericEditorModalService=t;c.componentService=n;c.renderService=i;c.contextAwareEditableItemService=o;c.cmsitemsRestService=r;c.translateService=a;c.genericEditorStackService=s;return c}EditorModalService.prototype.openAndRerenderSlot=function(e,t,n,i,o){return __awaiter(this,void 0,void 0,(function(){var a,s,c;return __generator(this,(function(l){switch(l.label){case 0:a={smarteditComponentType:e,smarteditComponentUuid:t};return[4,this.preloadContent(t,a)];case 1:s=l.sent();c=this.createComponentData(s,{targetedQualifier:n},o||r.stringUtils.generateIdentifier());return[2,this.markAndOpenGenericEditor(c,i)]}}))}))};EditorModalService.prototype.openAndRerenderSlot.$inject=["componentType","componentUuid","targetedQualifier","saveCallback","editorStackId"];EditorModalService.prototype.open=function(e,t,n,i,o,a,s){return __awaiter(this,void 0,void 0,(function(){var c,l;return __generator(this,(function(d){switch(d.label){case 0:return[4,this.preloadContent(e.smarteditComponentUuid,e)];case 1:c=d.sent();l=this.createComponentData(c,{slotId:t,position:n,targetedQualifier:i},a||r.stringUtils.generateIdentifier());return[2,this.markAndOpenGenericEditor(l,o,s)]}}))}))};EditorModalService.prototype.open.$inject=["componentAttributes","targetSlotId","position","targetedQualifier","saveCallback","editorStackId","config"];EditorModalService.prototype.openGenericEditor=function(e,t,n,i){return this.genericEditorModalService.open(e,t,n,i)};EditorModalService.prototype.openGenericEditor.$inject=["data","saveCallback","errorCallback","config"];EditorModalService.prototype.preloadContent=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getContentByUuid(e)];case 1:n=i.sent();if(n!==null&&s.isNil(t.content)){t.content=n}return[2,t]}}))}))};EditorModalService.prototype.preloadContent.$inject=["uuid","componentAttributes"];EditorModalService.prototype.markAndOpenGenericEditor=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i=this;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.markComponentAsShared(e.content,e)];case 1:o.sent();return[2,this.genericEditorModalService.open(e,(function(n){if(t){t(n)}if(e.editorStackId){var o=i.genericEditorStackService.getEditorsStack(e.editorStackId)[0];var r=o.component.uuid;i.componentService.getSlotsForComponent(r).then((function(e){i.renderService.renderSlots(e)}))}}),null,n)]}}))}))};EditorModalService.prototype.markAndOpenGenericEditor.$inject=["componentData","saveCallback","config"];EditorModalService.prototype.getContentByUuid=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(!s.isNil(e)){return[2,this.cmsitemsRestService.getById(e)]}return[2,null]}))}))};EditorModalService.prototype.getContentByUuid.$inject=["uuid"];EditorModalService.prototype.markComponentAsShared=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(!(e===null||e===void 0?void 0:e.uid)){return[2]}return[4,this.contextAwareEditableItemService.isItemEditable(e.uid)];case 1:n=i.sent();t.readOnlyMode=!n;if(t.readOnlyMode){this.addComponentInfoMessage("se.cms.component.workflow.shared.component",t)}else if(this.componentIsShared(e)){this.addComponentInfoMessage("se.cms.component.shared.component",t)}return[2]}}))}))};EditorModalService.prototype.markComponentAsShared.$inject=["componentContent","modelServiceParameters"];EditorModalService.prototype.componentIsShared=function(e){var t;return((t=e.slots)===null||t===void 0?void 0:t.length)>1};EditorModalService.prototype.componentIsShared.$inject=["componentContent"];EditorModalService.prototype.addComponentInfoMessage=function(e,t){t.messages=t.messages||[];t.messages.push({type:"info",message:this.translateService.instant(e)})};EditorModalService.prototype.addComponentInfoMessage.$inject=["message","modelServiceParameters"];EditorModalService.prototype.prepareContentForCreate=function(e,t,n,i,o){var a=e?Object.assign({},e):{};a.position=!r.stringUtils.isBlank(a.position)?a.position:o;a.slotId=a.slotId||i;a.typeCode=a.typeCode||t;a.itemtype=a.itemtype||t;a.catalogVersion=a.catalogVersion||n;a.visible=!r.stringUtils.isBlank(a.visible)?a.visible:true;return a};EditorModalService.prototype.prepareContentForCreate.$inject=["content","componentType","catalogVersionUuid","slotId","position"];EditorModalService.prototype.createComponentData=function(e,t,n){var i;try{i=e.smarteditComponentType.toLowerCase()}catch(e){throw new Error("editorModalService.createComponentData - invalid component type in componentAttributes. "+e)}var o=s.isNil(e.smarteditComponentUuid);var r;if(o){r=this.prepareContentForCreate(e.content,e.smarteditComponentType,e.catalogVersionUuid,t.slotId,t.position)}else{r=e.content}return{componentUuid:e.smarteditComponentUuid,componentType:e.smarteditComponentType,title:"type."+i+".name",targetedQualifier:t.targetedQualifier,initialDirty:e.initialDirty,content:r,editorStackId:n}};EditorModalService.prototype.createComponentData.$inject=["componentAttributes","params","editorStackId"];EditorModalService=__decorate([r.SeDowngradeService(o.IEditorModalService),r.GatewayProxied("open","openAndRerenderSlot","openGenericEditor"),__metadata("design:paramtypes",[Z,o.ComponentService,r.IRenderService,o.IContextAwareEditableItemService,o.CmsitemsRestService,d.TranslateService,r.GenericEditorStackService])],EditorModalService);return EditorModalService}(o.IEditorModalService);var J=function(){TypeStructureRestService.$inject=["restServiceFactory"];function TypeStructureRestService(e){this.structureRestService=e.get(r.TYPES_RESOURCE_URI)}TypeStructureRestService.prototype.getStructureByType=function(e){return this.structureRestService.getById(e).then((function(e){return e.attributes}))};TypeStructureRestService.prototype.getStructureByType.$inject=["typeCode"];TypeStructureRestService.prototype.getStructureByTypeAndMode=function(e,t,n){if(n===void 0){n=false}return this.structureRestService.get({code:e,mode:t}).then((function(e){var t=e.componentTypes[0];return!t||n?t:t.attributes}))};TypeStructureRestService.prototype.getStructureByTypeAndMode.$inject=["typeCode","mode","getWholeStructure"];TypeStructureRestService.prototype.getStructuresByCategory=function(e){return this.structureRestService.get({category:e}).then((function(e){return e.componentTypes}))};TypeStructureRestService.prototype.getStructuresByCategory.$inject=["category"];TypeStructureRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],TypeStructureRestService);return TypeStructureRestService}();var ee=["typeCode","template","name","description","label","uid","title","fromName","fromEmail"];var te=["creationtime","modifiedtime"];var ne=function(){ContextAwarePageStructureService.$inject=["typeStructureRestService","pageService"];function ContextAwarePageStructureService(e,t){this.typeStructureRestService=e;this.pageService=t}ContextAwarePageStructureService.prototype.getPageStructureForNewPage=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getFields(e)];case 1:n=i.sent();if(e==="ContentPage"){this.setLabelEditability(n,t)}this.removeField(n,"creationtime");this.removeField(n,"modifiedtime");this.removeField(n,"displayCondition");this.removeField(n,"restrictions");return[2,{attributes:this.getOrderedFields(n),category:o.StructureTypeCategory.PAGE}]}}))}))};ContextAwarePageStructureService.prototype.getPageStructureForNewPage.$inject=["pageTypeCode","isPrimary"];ContextAwarePageStructureService.prototype.getPageStructureForPageEditing=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.getFields(e)];case 1:n=a.sent();i=["uid","creationtime","modifiedtime"];n.filter((function(e){return i.indexOf(e.qualifier)>=0})).forEach((function(e){e.editable=false}));if(!(e==="ContentPage"))return[3,3];return[4,this.pageService.isPagePrimary(t)];case 2:r=a.sent();this.setLabelEditability(n,r);return[2,{attributes:this.getOrderedFields(n),category:o.StructureTypeCategory.PAGE}];case 3:return[2,{attributes:this.getOrderedFields(n),category:o.StructureTypeCategory.PAGE}]}}))}))};ContextAwarePageStructureService.prototype.getPageStructureForPageEditing.$inject=["pageTypeCode","pageId"];ContextAwarePageStructureService.prototype.getPageStructureForViewing=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getFields(e)];case 1:t=n.sent();t.forEach((function(e){e.editable=false}));this.removeField(t,"typeCode");this.removeField(t,"template");this.removeField(t,"displayCondition");this.removeField(t,"restrictions");return[2,{attributes:this.getOrderedFields(t),category:o.StructureTypeCategory.PAGE}]}}))}))};ContextAwarePageStructureService.prototype.getPageStructureForViewing.$inject=["pageTypeCode"];ContextAwarePageStructureService.prototype.moveElement=function(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length){return e}e.splice(n,0,e.splice(t,1)[0]);return e};ContextAwarePageStructureService.prototype.moveElement.$inject=["array","oldPosition","newPosition"];ContextAwarePageStructureService.prototype.getOrderedFields=function(e){var t;var _loop_1=function(i){t=e.findIndex((function(e){return e.qualifier===ee[i]}));n.moveElement(e,t,0)};var n=this;for(var i=ee.length-1;i>=0;i--){_loop_1(i)}var _loop_2=function(n){t=e.findIndex((function(e){return e.qualifier===te[n]}));o.moveElement(e,t,e.length-1)};var o=this;for(var i=0;i<te.length;i++){_loop_2(i)}return e};ContextAwarePageStructureService.prototype.getOrderedFields.$inject=["unorderedFields"];ContextAwarePageStructureService.prototype.setLabelEditability=function(e,t){var n=e.findIndex((function(e){return e.qualifier==="label"}));if(n!==-1&&e[n].editable!==false){e[n].editable=t}};ContextAwarePageStructureService.prototype.setLabelEditability.$inject=["fields","isPrimary"];ContextAwarePageStructureService.prototype.getFields=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.typeStructureRestService.getStructureByType(e)];case 1:t=n.sent();t.push({cmsStructureType:"DisplayConditionEditor",i18nKey:"type.abstractpage.displayCondition.name",qualifier:"displayCondition",editable:false},{cmsStructureType:"ShortString",i18nKey:"se.cms.pageinfo.page.type",qualifier:"typeCode",editable:false});return[2,t]}}))}))};ContextAwarePageStructureService.prototype.getFields.$inject=["pageTypeCode"];ContextAwarePageStructureService.prototype.removeField=function(e,t){var n=e.findIndex((function(e){return e.qualifier===t}));if(n!==-1){e.splice(n,1)}};ContextAwarePageStructureService.prototype.removeField.$inject=["fields","fieldQualifier"];ContextAwarePageStructureService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[J,o.IPageService])],ContextAwarePageStructureService);return ContextAwarePageStructureService}();var ie;(function(e){e["INFO"]="showInfo";e["ALERT"]="showAlert";e["DANGER"]="showDanger";e["WARNING"]="showWarning";e["SUCCESS"]="showSuccess"})(ie||(ie={}));var oe=function(){ActionableAlertService.$inject=["alertService"];function ActionableAlertService(e){this.alertService=e}ActionableAlertService.prototype.displayActionableAlertAngularJS=function(e,t){var n=this.getMethodNameByAlertType(t);return this.alertService[n]({closeable:true,controller:e.controller,template:o.ACTIONABLE_ALERT_CONSTANTS.ALERT_TEMPLATE,timeout:e.timeoutDuration||o.ACTIONABLE_ALERT_CONSTANTS.TIMEOUT_DURATION})};ActionableAlertService.prototype.displayActionableAlertAngularJS.$inject=["alertContent","alertType"];ActionableAlertService.prototype.displayActionableAlert=function(e,t){var n=this.getMethodNameByAlertType(t);return this.alertService[n](e)};ActionableAlertService.prototype.displayActionableAlert.$inject=["alertContent","alertType"];ActionableAlertService.prototype.getMethodNameByAlertType=function(e){if(e&&ie[e]){return ie[e]}return ie.INFO};ActionableAlertService.prototype.getMethodNameByAlertType.$inject=["alertType"];ActionableAlertService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IAlertService])],ActionableAlertService);return ActionableAlertService}();window.__smartedit__.addDecoratorPayload("Component","PageRestoredAlertComponent",{selector:"se-page-restored-alert-component",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<se-actionable-alert\n        [description]="message"\n        [hyperlinkLabel]="hyperlinkLabel"\n        [hyperlinkDetails]="hyperLinkDetails"\n        (hyperLinkClick)="onClick()"\n    ></se-actionable-alert>'});var re=function(){PageRestoredAlertComponent.$inject=["alertRef","experienceService"];function PageRestoredAlertComponent(e,t){this.alertRef=e;this.experienceService=t;this.hyperlinkLabel="se.cms.page.restored.alert.info.hyperlink";this.message="se.cms.page.restored.alert.info.description"}PageRestoredAlertComponent.prototype.ngOnInit=function(){var e=this.alertRef.data.pageInfo;this.hyperLinkDetails={pageName:e.name}};PageRestoredAlertComponent.prototype.onClick=function(){var e=this.alertRef.data,t=e.catalogVersion,n=e.pageInfo;this.alertRef.dismiss();this.experienceService.loadExperience({siteId:t.siteId,catalogId:t.catalogId,catalogVersion:t.version,pageId:n.uid})};PageRestoredAlertComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-restored-alert-component",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<se-actionable-alert\n        [description]="message"\n        [hyperlinkLabel]="hyperlinkLabel"\n        [hyperlinkDetails]="hyperLinkDetails"\n        (hyperLinkClick)="onClick()"\n    ></se-actionable-alert>'}),__metadata("design:paramtypes",[m.AlertRef,r.IExperienceService])],PageRestoredAlertComponent);return PageRestoredAlertComponent}();var ae=function(){PageRestoredAlertService.$inject=["catalogService","actionableAlertService"];function PageRestoredAlertService(e,t){this.catalogService=e;this.actionableAlertService=t}PageRestoredAlertService.prototype.displayPageRestoredSuccessAlert=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!e){throw new Error("[pageRestoredAlertService] - page info not provided.")}return[4,this.catalogService.getCatalogVersionByUuid(e.catalogVersion)];case 1:t=i.sent();n={component:re,data:{catalogVersion:t,pageInfo:e}};return[2,this.actionableAlertService.displayActionableAlert(n,o.ACTIONABLE_ALERT_CONSTANTS.ALERT_TYPES.SUCCESS)]}}))}))};PageRestoredAlertService.prototype.displayPageRestoredSuccessAlert.$inject=["pageInfo"];PageRestoredAlertService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,oe])],PageRestoredAlertService);return PageRestoredAlertService}();var se;(function(e){e["HIDDEN"]="se.cms.component.visibility.alert.description.hidden";e["RESTRICTED"]="se.cms.component.visibility.alert.description.restricted"})(se||(se={}));var ce=function(e){__extends(ComponentVisibilityAlertService,e);ComponentVisibilityAlertService.$inject=["sharedDataService","alertService","actionableAlertService"];function ComponentVisibilityAlertService(t,n,i){var o=e.call(this)||this;o.sharedDataService=t;o.alertService=n;o.actionableAlertService=i;return o}ComponentVisibilityAlertService.prototype.checkAndAlertOnComponentVisibility=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,a,s;return __generator(this,(function(c){switch(c.label){case 0:t=!e.visible||e.restricted;if(!t){return[2]}return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:n=c.sent();i=!e.visible?se.HIDDEN:se.RESTRICTED;a=e.catalogVersion!==n.pageContext.catalogVersionUuid;if(a){this.alertService.showAlert({message:i})}else{s={component:o.ComponentVisibilityAlertComponent,duration:6e3,data:{component:e,message:i}};this.actionableAlertService.displayActionableAlert(s,r.IAlertServiceType.INFO)}return[2]}}))}))};ComponentVisibilityAlertService.prototype.checkAndAlertOnComponentVisibility.$inject=["component"];ComponentVisibilityAlertService=__decorate([r.SeDowngradeService(o.IComponentVisibilityAlertService),r.GatewayProxied("checkAndAlertOnComponentVisibility"),__metadata("design:paramtypes",[r.ISharedDataService,r.IAlertService,oe])],ComponentVisibilityAlertService);return ComponentVisibilityAlertService}(o.IComponentVisibilityAlertService);var le="enableCloneComponentOnDrop";var de=function(){CmsDragAndDropService.$inject=["dragAndDropService","gatewayFactory","sharedDataService","systemEventService","yjQuery"];function CmsDragAndDropService(e,t,n,i,o){this.dragAndDropService=e;this.gatewayFactory=t;this.sharedDataService=n;this.systemEventService=i;this.yjQuery=o;this.gateway=this.gatewayFactory.createGateway("cmsDragAndDrop")}e=CmsDragAndDropService;CmsDragAndDropService.prototype.register=function(){var t=this;this.dragAndDropService.register({id:e.CMS_DRAG_AND_DROP_ID,sourceSelector:e.SOURCE_SELECTOR,targetSelector:e.TARGET_SELECTOR,startCallback:function(e){return t.onStart(e)},stopCallback:function(){return t.onStop()},enableScrolling:false})};CmsDragAndDropService.prototype.unregister=function(){this.dragAndDropService.unregister([e.CMS_DRAG_AND_DROP_ID])};CmsDragAndDropService.prototype.apply=function(){this.dragAndDropService.apply(null)};CmsDragAndDropService.prototype.update=function(){this.dragAndDropService.update(e.CMS_DRAG_AND_DROP_ID)};CmsDragAndDropService.prototype.onStart=function(t){return __awaiter(this,void 0,void 0,(function(){var n,i,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.sharedDataService.get(le)];case 1:n=s.sent();i=this.getSelector(t.target).closest(e.COMPONENT_SELECTOR);a={componentId:i.attr(r.ID_ATTRIBUTE),componentUuid:i.attr(r.UUID_ATTRIBUTE),componentType:i.attr(r.TYPE_ATTRIBUTE),slotUuid:null,slotId:null,cloneOnDrop:n};this.gateway.publish(o.DRAG_AND_DROP_EVENTS.DRAG_STARTED,a);this.systemEventService.publishAsync(o.DRAG_AND_DROP_EVENTS.DRAG_STARTED);return[2]}}))}))};CmsDragAndDropService.prototype.onStart.$inject=["event"];CmsDragAndDropService.prototype.onStop=function(){this.gateway.publish(o.DRAG_AND_DROP_EVENTS.DRAG_STOPPED,null)};CmsDragAndDropService.prototype.getSelector=function(e){return this.yjQuery(e)};CmsDragAndDropService.prototype.getSelector.$inject=["selector"];var e;CmsDragAndDropService.CMS_DRAG_AND_DROP_ID="se.cms.dragAndDrop";CmsDragAndDropService.TARGET_SELECTOR="";CmsDragAndDropService.SOURCE_SELECTOR=".smartEditComponent[data-smartedit-component-type!='ContentSlot']";CmsDragAndDropService.COMPONENT_SELECTOR=".smartEditComponent";CmsDragAndDropService=e=__decorate([r.SeDowngradeService(),__param(4,a.Inject(r.YJQUERY_TOKEN)),__metadata("design:paramtypes",[r.DragAndDropService,r.GatewayFactory,r.ISharedDataService,r.SystemEventService,Function])],CmsDragAndDropService);return CmsDragAndDropService}();var pe=function(){ContextAwareCatalogService.$inject=["catalogService","sharedDataService"];function ContextAwareCatalogService(e,t){this.catalogService=e;this.sharedDataService=t}ContextAwareCatalogService.prototype.getProductCategorySearchUri=function(e){return this.getSearchUriByProductCatalogIdAndUriConstant(e,P)};ContextAwareCatalogService.prototype.getProductCategorySearchUri.$inject=["productCatalogId"];ContextAwareCatalogService.prototype.getProductCategoryItemUri=function(){return this.getItemUriByUriConstant(w)};ContextAwareCatalogService.prototype.getProductSearchUri=function(e){return this.getSearchUriByProductCatalogIdAndUriConstant(e,r.PRODUCT_LIST_RESOURCE_API)};ContextAwareCatalogService.prototype.getProductSearchUri.$inject=["productCatalogId"];ContextAwareCatalogService.prototype.getProductItemUri=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getItemUriByUriConstant(r.PRODUCT_RESOURCE_API)];case 1:e=t.sent();return[2,e.replace("/:productUID","")]}}))}))};ContextAwareCatalogService.prototype.getContentPageSearchUri=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getContentPageUri()];case 1:e=t.sent();return[2,e+"?typeCode=ContentPage"]}}))}))};ContextAwareCatalogService.prototype.getContentPageItemUri=function(){return this.getContentPageUri()};ContextAwareCatalogService.prototype.getSearchUriByProductCatalogIdAndUriConstant=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.getActiveProductCatalogVersionByCatalogId(e)];case 1:n=i.sent();return[2,t.replace(/:catalogId/gi,e).replace(/:catalogVersion/gi,n)]}}))}))};ContextAwareCatalogService.prototype.getSearchUriByProductCatalogIdAndUriConstant.$inject=["productCatalogId","uriConstant"];ContextAwareCatalogService.prototype.getItemUriByUriConstant=function(e){return Promise.resolve(e.replace(/:siteUID/gi,"CURRENT_CONTEXT_SITE_ID"))};ContextAwareCatalogService.prototype.getItemUriByUriConstant.$inject=["uriConstant"];ContextAwareCatalogService.prototype.getContentPageUri=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:e=n.sent().catalogDescriptor.catalogId;return[4,this.catalogService.getActiveContentCatalogVersionByCatalogId(e)];case 2:t=n.sent();return[2,o.PAGES_LIST_RESOURCE_URI.replace(/CURRENT_CONTEXT_CATALOG/gi,e).replace(/CURRENT_CONTEXT_CATALOG_VERSION/gi,t)]}}))}))};ContextAwareCatalogService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,r.ISharedDataService])],ContextAwareCatalogService);return ContextAwareCatalogService}();var ue={INBOX_POLLING_TIMEOUT:2e4,INBOX_POLLING_PAGESIZE:10,INBOX_POLLING_CURRENTPAGE:0};var me=function(){WorkflowTasksPollingService.$inject=["timerService","restServiceFactory","crossFrameEventService"];function WorkflowTasksPollingService(e,t,n){var i=this;this.timerService=e;this.restServiceFactory=t;this.crossFrameEventService=n;this.resourceInboxURI="/cmssmarteditwebservices/v1/inbox/workflowtasks";this.subscribers=[];this.syncPollingTimer=null;this.savedHashedTasks=[];this.inboxRESTService=this.restServiceFactory.get(this.resourceInboxURI);this.crossFrameEventService.subscribe(r.EVENTS.AUTHORIZATION_SUCCESS,(function(){return i.initPolling()}));this.crossFrameEventService.subscribe(r.EVENTS.LOGOUT,(function(){return i.stopPolling()}));this.crossFrameEventService.subscribe(r.EVENTS.REAUTH_STARTED,(function(){return i.stopPolling()}));this.initPolling()}WorkflowTasksPollingService.prototype.stopPolling=function(){if(this.syncPollingTimer.isActive()){this.syncPollingTimer.stop()}};WorkflowTasksPollingService.prototype.startPolling=function(){if(!this.syncPollingTimer.isActive()){this.syncPollingTimer.restart(ue.INBOX_POLLING_TIMEOUT)}};WorkflowTasksPollingService.prototype.addSubscriber=function(e,t){var n=this;this.subscribers.push({subscriber:e,callOnInit:t});var unsubscribeFn=function(){return n.unsubscribe(e)};return unsubscribeFn};WorkflowTasksPollingService.prototype.addSubscriber.$inject=["subscriber","callOnInit"];WorkflowTasksPollingService.prototype.initPolling=function(){var e=this;this.syncPollingTimer=this.timerService.createTimer((function(){return e.fetchInboxTasks(false)}),ue.INBOX_POLLING_TIMEOUT);this.fetchInboxTasks(true);this.startPolling()};WorkflowTasksPollingService.prototype.unsubscribe=function(e){var t=this.subscribers.findIndex((function(t){return t.subscriber===e}));if(t>-1){this.subscribers.splice(t,1)}};WorkflowTasksPollingService.prototype.unsubscribe.$inject=["subscriber"];WorkflowTasksPollingService.prototype.getNewTasks=function(e){var t=this;var n=e.filter((function(e){var n=t.encodeTask(e);return!t.savedHashedTasks.includes(n)}));return n};WorkflowTasksPollingService.prototype.getNewTasks.$inject=["tasks"];WorkflowTasksPollingService.prototype.saveNewHashedTasks=function(e){var t=this;e.forEach((function(e){return t.savedHashedTasks.push(t.encodeTask(e))}));var n=this.savedHashedTasks.length-ue.INBOX_POLLING_PAGESIZE;if(n>0){for(var i=0;i<n;i++){this.savedHashedTasks.shift()}}};WorkflowTasksPollingService.prototype.saveNewHashedTasks.$inject=["newTasks"];WorkflowTasksPollingService.prototype.encodeTask=function(e){var t=s.cloneDeep(e);if(t.action){delete t.action.startedAgoInMillis}return btoa(JSON.stringify(t))};WorkflowTasksPollingService.prototype.encodeTask.$inject=["task"];WorkflowTasksPollingService.prototype.fetchInboxTasks=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.fetchTaskList()];case 1:t=i.sent();if(!t){this.stopPolling();return[2]}n=this.getNewTasks(t.tasks);this.saveNewHashedTasks(n);this.subscribers.forEach((function(i){if(!e||e&&!!i.callOnInit){i.subscriber(n,t.pagination)}}));return[2]}}))}))};WorkflowTasksPollingService.prototype.fetchInboxTasks.$inject=["isInit"];WorkflowTasksPollingService.prototype.fetchTaskList=function(){try{return this.inboxRESTService.get({pageSize:ue.INBOX_POLLING_PAGESIZE,currentPage:ue.INBOX_POLLING_CURRENTPAGE})}catch(e){return}};WorkflowTasksPollingService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.TimerService,r.IRestServiceFactory,r.CrossFrameEventService])],WorkflowTasksPollingService);return WorkflowTasksPollingService}();var ge="OPEN_PAGE_WORKFLOW_MENU";var he="CMS_EVENT_OPEN_PAGE_WORKFLOW_MENU";var ve="WORKFLOW_TASKS_MENU_OPENED_EVENT";var fe="WORKFLOW_DECISION_SELECTED_EVENT";var _e="CMS_EVENT_OPEN_WORKFLOW_INBOX_DROPDOWN";var ye="WORKFLOW_ITEM_MENU_OPENED_EVENT";var Ce="WORKFLOW_REFRESH_EVENT";window.__smartedit__.addDecoratorPayload("Component","WorkflowInboxMultipleTasksAnnouncementComponent",{selector:"se-workflow-inbox-multiple-tasks-announcement",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div (click)="onClick($event)" class="se-announcement__message--multi">{{ \'se.cms.workflow.tasks.announcement\' | translate: count }}</div>'});var Se=function(){function WorkflowInboxMultipleTasksAnnouncementComponent(e,t,n){this.systemEventService=e;this.announcementService=t;this.count={announcementCount:null};this.announcementId=n.id,this.tasks=n.tasks}WorkflowInboxMultipleTasksAnnouncementComponent.prototype.ngOnInit=function(){this.count.announcementCount=String(this.tasks.length)};WorkflowInboxMultipleTasksAnnouncementComponent.prototype.onClick=function(e){e.stopPropagation();this.systemEventService.publish(_e);this.announcementService.closeAnnouncement(this.announcementId)};WorkflowInboxMultipleTasksAnnouncementComponent=__decorate([a.Component({selector:"se-workflow-inbox-multiple-tasks-announcement",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div (click)="onClick($event)" class="se-announcement__message--multi">{{ \'se.cms.workflow.tasks.announcement\' | translate: count }}</div>'}),__param(2,a.Inject(r.ANNOUNCEMENT_DATA)),__metadata("design:paramtypes",[r.SystemEventService,r.IAnnouncementService,Object])],WorkflowInboxMultipleTasksAnnouncementComponent);return WorkflowInboxMultipleTasksAnnouncementComponent}();var be;(function(e){e["PENDING"]="pending";e["IN_PROGRESS"]="in_progress";e["PAUSED"]="paused";e["COMPLETED"]="completed";e["DISABLED"]="disabled";e["ENDED_THROUGH_END_OF_WORKFLOW"]="ended_through_end_of_workflow";e["TERMINATED"]="terminated"})(be||(be={}));var Ie;(function(e){e["CANCEL"]="CANCEL_WORKFLOW";e["MAKE_DECISION"]="MAKE_DECISION"})(Ie||(Ie={}));var we;(function(e){e["CONTINUED"]="continued";e["RUNNING"]="running";e["PAUSED"]="paused";e["FINISHED"]="finished";e["ABORTED"]="aborted";e["NEW"]="new"})(we||(we={}));var Ee;(function(e){e["Default"]="Default";e["SwitchPerspective"]="SwitchPerspective"})(Ee||(Ee={}));var Pe=function(){WorkflowService.$inject=["restServiceFactory","crossFrameEventService","systemEventService","sharedDataService","perspectiveService","catalogService","experienceService","workflowTasksPollingService"];function WorkflowService(e,t,n,i,o,a,s,c){var l=this;this.restServiceFactory=e;this.crossFrameEventService=t;this.systemEventService=n;this.sharedDataService=i;this.perspectiveService=o;this.catalogService=a;this.experienceService=s;this.workflowTasksPollingService=c;this.workflowTasksCountSubject=new u.BehaviorSubject(0);this.resourceWorkflowURI="/cmswebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workflows";this.resourceWorkflowActionsURI="/cmswebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workflows/:workflowCode/actions";this.resourceWorkflowTemplateURI="/cmswebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workflowtemplates";this.resourceWorkflowOperationsURI="/cmswebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workflows/:workflowCode/operations";this.resourceWorkflowActionCommentsURI="/cmswebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workflows/:workflowCode/actions/:actionCode/comments";this.resourceWorkflowEditableItemsURI="/cmssmarteditwebservices/v1/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/workfloweditableitems";this.resourceWorkflowInboxTasksURI="/cmssmarteditwebservices/v1/inbox/workflowtasks";this.workflowRESTService=this.restServiceFactory.get(this.resourceWorkflowURI);this.workflowTemplateRESTService=this.restServiceFactory.get(this.resourceWorkflowTemplateURI);this.workflowActionsRESTService=this.restServiceFactory.get(this.resourceWorkflowActionsURI);this.workflowInboxTasksRESTService=this.restServiceFactory.get(this.resourceWorkflowInboxTasksURI);this.workflowEditableItemsRESTService=this.restServiceFactory.get(this.resourceWorkflowEditableItemsURI);this.crossFrameEventService.subscribe(r.EVENT_PERSPECTIVE_REFRESHED,(function(){return l.openPageWorkflowMenu()}));this.crossFrameEventService.subscribe(r.EVENT_PERSPECTIVE_CHANGED,(function(){return l.openPageWorkflowMenu()}));this.workflowTasksPollingService.addSubscriber((function(e,t){var n=t.totalCount||0;l.updateWorkflowTasksCount(n)}),true)}WorkflowService.prototype.getWorkflows=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowRESTService.get(e)];case 1:t=n.sent();return[2,t.workflows]}}))}))};WorkflowService.prototype.getWorkflows.$inject=["queryParams"];WorkflowService.prototype.getWorkflowTemplates=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowTemplateRESTService.get(e)];case 1:t=n.sent();return[2,t.templates]}}))}))};WorkflowService.prototype.getWorkflowTemplates.$inject=["queryParams"];WorkflowService.prototype.getAllActionsForWorkflowCode=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowActionsRESTService.get({workflowCode:e})];case 1:t=n.sent();return[2,t.actions]}}))}))};WorkflowService.prototype.getAllActionsForWorkflowCode.$inject=["workflowCode"];WorkflowService.prototype.cancelWorflow=function(e){this.workflowOperationsRESTService=this.restServiceFactory.get(this.resourceWorkflowOperationsURI.replace(":workflowCode",e.workflowCode));return this.workflowOperationsRESTService.save({operation:Ie.CANCEL})};WorkflowService.prototype.cancelWorflow.$inject=["workflow"];WorkflowService.prototype.getWorkflowTemplateByCode=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getWorkflowTemplates({})];case 1:t=i.sent();n=t.find((function(t){return t.code===e}));return[2,n]}}))}))};WorkflowService.prototype.getWorkflowTemplateByCode.$inject=["code"];WorkflowService.prototype.areWorkflowsEnabledOnCurrentCatalogVersion=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getWorkflowTemplates({})];case 1:e=t.sent();return[2,e&&e.length>0]}}))}))};WorkflowService.prototype.getActiveWorkflowForPageUuid=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getWorkflows({pageSize:1,currentPage:0,attachment:e,statuses:we.RUNNING+","+we.PAUSED})];case 1:t=n.sent();return[2,t[0]===undefined?null:t[0]]}}))}))};WorkflowService.prototype.getActiveWorkflowForPageUuid.$inject=["pageUuid"];WorkflowService.prototype.isPageInWorkflow=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getActiveWorkflowForPageUuid(e.uuid)];case 1:return[2,!!t.sent()]}}))}))};WorkflowService.prototype.isPageInWorkflow.$inject=["page"];WorkflowService.prototype.isUserParticipanInActiveAction=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getActiveActionsForWorkflowCode(e)];case 1:t=n.sent();return[2,t.length>0]}}))}))};WorkflowService.prototype.isUserParticipanInActiveAction.$inject=["workflowCode"];WorkflowService.prototype.getActiveActionsForWorkflowCode=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getAllActionsForWorkflowCode(e)];case 1:t=n.sent();return[2,t.filter((function(e){return e.isCurrentUserParticipant&&(be.IN_PROGRESS===e.status.toLowerCase()||be.PAUSED===e.status.toLowerCase())}))]}}))}))};WorkflowService.prototype.getActiveActionsForWorkflowCode.$inject=["workflowCode"];WorkflowService.prototype.getCommentsForWorkflowAction=function(e,t,n){this.workflowActionCommentsRESTService=this.restServiceFactory.get(this.resourceWorkflowActionCommentsURI.replace(":workflowCode",e).replace(":actionCode",t));return this.workflowActionCommentsRESTService.page(n)};WorkflowService.prototype.getCommentsForWorkflowAction.$inject=["workflowCode","workflowActionCode","payload"];WorkflowService.prototype.getWorkflowInboxTasks=function(e){return this.workflowInboxTasksRESTService.page(e)};WorkflowService.prototype.getWorkflowInboxTasks.$inject=["payload"];WorkflowService.prototype.getTotalNumberOfActiveWorkflowTasks=function(){return this.workflowTasksCountSubject.asObservable()};WorkflowService.prototype.updateWorkflowTasksCount=function(e){this.workflowTasksCountSubject.next(e)};WorkflowService.prototype.updateWorkflowTasksCount.$inject=["count"];WorkflowService.prototype.getWorkflowEditableItems=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowEditableItemsRESTService.get({itemUids:e})];case 1:t=n.sent();return[2,t.editableItems]}}))}))};WorkflowService.prototype.getWorkflowEditableItems.$inject=["itemUids"];WorkflowService.prototype.getResourceWorkflowURI=function(){return this.resourceWorkflowURI};WorkflowService.prototype.getResourceWorkflowOperationsURI=function(){return this.resourceWorkflowOperationsURI};WorkflowService.prototype.openPageWorkflowMenu=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.sharedDataService.get(ge)];case 1:e=n.sent();if(!(e===Ee.Default))return[3,6];return[4,this.perspectiveService.getActivePerspectiveKey()];case 2:t=n.sent();if(!(t===o.CMSModesService.BASIC_PERSPECTIVE_KEY||t===o.CMSModesService.ADVANCED_PERSPECTIVE_KEY))return[3,3];this.systemEventService.publish(he,true);this.sharedDataService.remove(ge);return[3,5];case 3:return[4,this.sharedDataService.set(ge,Ee.SwitchPerspective)];case 4:n.sent();this.perspectiveService.switchTo(o.CMSModesService.ADVANCED_PERSPECTIVE_KEY);n.label=5;case 5:return[3,7];case 6:if(e===Ee.SwitchPerspective){this.systemEventService.publish(he,true);this.sharedDataService.remove(ge)}n.label=7;case 7:return[2]}}))}))};WorkflowService.prototype.loadExperienceAndOpenPageWorkflowMenu=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:if(!e)return[3,7];return[4,this.catalogService.getDefaultSiteForContentCatalog(e.attachments[0].catalogId)];case 1:t=o.sent();n={siteId:t.uid,catalogId:e.attachments[0].catalogId,catalogVersion:e.attachments[0].catalogVersion,pageId:e.attachments[0].pageUid};if(!!!r.windowUtils.getGatewayTargetFrame())return[3,6];return[4,this.experienceService.compareWithCurrentExperience(n)];case 2:i=o.sent();if(!i)return[3,4];return[4,this.sharedDataService.set(ge,Ee.Default)];case 3:o.sent();this.openPageWorkflowMenu();return[3,5];case 4:this._loadExperience(n);o.label=5;case 5:return[3,7];case 6:this._loadExperience(n);o.label=7;case 7:return[2]}}))}))};WorkflowService.prototype.loadExperienceAndOpenPageWorkflowMenu.$inject=["task"];WorkflowService.prototype._loadExperience=function(e){var t=this;this.experienceService.loadExperience(e).then((function(){t.sharedDataService.set(ge,Ee.Default)}))};WorkflowService.prototype._loadExperience.$inject=["experience"];__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageChangeEvictionTag,r.perspectiveChangedEvictionTag,o.workflowTasksMenuOpenedEvictionTag,o.workflowCompletedEvictionTag,o.workflowCreatedEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],WorkflowService.prototype,"getWorkflows",null);__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageChangeEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],WorkflowService.prototype,"getWorkflowTemplates",null);__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageChangeEvictionTag,o.workflowTasksMenuOpenedEvictionTag,o.workflowCompletedEvictionTag,o.workflowCreatedEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],WorkflowService.prototype,"getAllActionsForWorkflowCode",null);WorkflowService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IRestServiceFactory,r.CrossFrameEventService,r.SystemEventService,r.ISharedDataService,r.IPerspectiveService,r.ICatalogService,r.IExperienceService,me])],WorkflowService);return WorkflowService}();window.__smartedit__.addDecoratorPayload("Component","WorkflowInboxSingleTaskAnnouncementComponent",{selector:"se-workflow-inbox-single-task-announcement",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div (click)="onClick($event)"><div class="se-announcement__title">{{ task.action.name | seL10n | async }}</div><div class="se-announcement__message">{{ task.attachments[0].catalogName | seL10n | async }} | {{ task.attachments[0].pageName }}</div><div class="se-announcement__time-stamp">{{ startedAgo }}</div></div>'});var Te=function(){function WorkflowInboxSingleTaskAnnouncementComponent(e,t,n,i){this.workflowService=e;this.cmsTimeService=t;this.announcementService=n;this.announcementId=i.id,this.task=i.task}WorkflowInboxSingleTaskAnnouncementComponent.prototype.ngOnInit=function(){this.startedAgo=this.getStartedAgo()};WorkflowInboxSingleTaskAnnouncementComponent.prototype.onClick=function(e){e.stopPropagation();this.workflowService.loadExperienceAndOpenPageWorkflowMenu(this.task);this.announcementService.closeAnnouncement(this.announcementId)};WorkflowInboxSingleTaskAnnouncementComponent.prototype.getStartedAgo=function(){if(!!this.task.action.startedAgoInMillis){return this.cmsTimeService.getTimeAgo(this.task.action.startedAgoInMillis)}return null};WorkflowInboxSingleTaskAnnouncementComponent=__decorate([a.Component({selector:"se-workflow-inbox-single-task-announcement",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div (click)="onClick($event)"><div class="se-announcement__title">{{ task.action.name | seL10n | async }}</div><div class="se-announcement__message">{{ task.attachments[0].catalogName | seL10n | async }} | {{ task.attachments[0].pageName }}</div><div class="se-announcement__time-stamp">{{ startedAgo }}</div></div>'}),__param(3,a.Inject(r.ANNOUNCEMENT_DATA)),__metadata("design:paramtypes",[Pe,o.CMSTimeService,r.IAnnouncementService,Object])],WorkflowInboxSingleTaskAnnouncementComponent);return WorkflowInboxSingleTaskAnnouncementComponent}();var Ae=function(){WorkflowInboxAnnouncementService.$inject=["workflowTasksPollingService","announcementService"];function WorkflowInboxAnnouncementService(e,t){var n=this;this.workflowTasksPollingService=e;this.announcementService=t;this.unsubscribePollingService=this.workflowTasksPollingService.addSubscriber((function(e,t){if(e){n.displayAnnouncement(e)}}),false)}WorkflowInboxAnnouncementService.prototype.ngOnDestroy=function(){this.unsubscribePollingService()};WorkflowInboxAnnouncementService.prototype.displayAnnouncement=function(e){if(e.length===1){this.showSingleTaskAnnouncement(e[0])}else if(e.length>1){this.showMultipleTasksAnnouncement(e)}};WorkflowInboxAnnouncementService.prototype.displayAnnouncement.$inject=["tasks"];WorkflowInboxAnnouncementService.prototype.showSingleTaskAnnouncement=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.showAnnouncement(Te,{task:e})];case 1:t.sent();return[2]}}))}))};WorkflowInboxAnnouncementService.prototype.showSingleTaskAnnouncement.$inject=["task"];WorkflowInboxAnnouncementService.prototype.showMultipleTasksAnnouncement=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.showAnnouncement(Se,{tasks:e})];case 1:t.sent();return[2]}}))}))};WorkflowInboxAnnouncementService.prototype.showMultipleTasksAnnouncement.$inject=["tasks"];WorkflowInboxAnnouncementService.prototype.showAnnouncement=function(e,t){return this.announcementService.showAnnouncement({component:e,data:t})};WorkflowInboxAnnouncementService.prototype.showAnnouncement.$inject=["component","data"];WorkflowInboxAnnouncementService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[me,r.IAnnouncementService])],WorkflowInboxAnnouncementService);return WorkflowInboxAnnouncementService}();var De=function(){WorkflowFacade.$inject=["alertService","workflowService","confirmationModalService","genericEditorModalService","pageInfoService","systemEventService","l10nPipe"];function WorkflowFacade(e,t,n,i,o,r,a){this.alertService=e;this.workflowService=t;this.confirmationModalService=n;this.genericEditorModalService=i;this.pageInfoService=o;this.systemEventService=r;this.l10nPipe=a;this.VERSION_LABEL_QUALIFIER="versionLabel";this.CREATE_VERSION_QUALIFIER="createVersion";this.SYNC_POLLING_SPEED_PREFIX="workflow-";this.startWorkflowStructureAttributes=[{cmsStructureType:"EditableDropdown",qualifier:"templateCode",i18nKey:"se.cms.workflow.editor.template",localized:false,required:true,idAttribute:"code",labelAttributes:["name"]},{cmsStructureType:"LongString",qualifier:"description",i18nKey:"se.cms.workflow.editor.description",required:false},{cmsStructureType:"WorkflowCreateVersionField",qualifier:this.CREATE_VERSION_QUALIFIER,required:false}];this.editWorkflowStructureAttributes=[{cmsStructureType:"LongString",qualifier:"description",i18nKey:"se.cms.workflow.editor.description",required:false}];this.makeDecisionStructureAttributes=[{cmsStructureType:"LongString",qualifier:"comment",i18nKey:"se.cms.workflow.editor.comment",required:false},{cmsStructureType:"WorkflowCreateVersionField",qualifier:this.CREATE_VERSION_QUALIFIER,required:false}]}WorkflowFacade.prototype.startWorkflow=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getWorkflowDataForEditor()];case 1:e=i.sent();t=this.systemEventService.subscribe(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,(function(e,t){return n.handleUnrelatedValidationErrors(e,t)}));try{return[2,this.genericEditorModalService.open(e,(function(e){n.alertService.showSuccess("se.cms.workflow.create.alert.success");n.systemEventService.publish(o.WORKFLOW_CREATED_EVENT);n.updateWorkflowTasksCount();return e}))]}finally{t()}return[2]}}))}))};WorkflowFacade.prototype.cancelWorflow=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.confirmationModalService.confirm({title:"se.cms.workflow.cancel.confirmation.title",description:"se.cms.workflow.cancel.confirmation.description"})];case 1:t.sent();t.label=2;case 2:t.trys.push([2,,4,5]);return[4,this.workflowService.cancelWorflow(e)];case 3:t.sent();this.alertService.showSuccess("se.cms.workflow.cancel.alert.success");return[3,5];case 4:this.systemEventService.publish(o.WORKFLOW_FINISHED_EVENT);this.updateWorkflowTasksCount();return[7];case 5:return[2]}}))}))};WorkflowFacade.prototype.cancelWorflow.$inject=["workflow"];WorkflowFacade.prototype.editWorkflow=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getWorkflowDataForEditor(e)];case 1:t=n.sent();return[2,this.genericEditorModalService.open(t,(function(e){return e}))]}}))}))};WorkflowFacade.prototype.editWorkflow.$inject=["workflow"];WorkflowFacade.prototype.updateWorkflowTasksCount=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,typeof e==="undefined"?this.getTotalNumberOfTasks():e];case 1:t=n.sent();this.workflowService.updateWorkflowTasksCount(t);return[2]}}))}))};WorkflowFacade.prototype.updateWorkflowTasksCount.$inject=["count"];WorkflowFacade.prototype.getAllActionsForWorkflow=function(e){return this.workflowService.getAllActionsForWorkflowCode(e)};WorkflowFacade.prototype.getAllActionsForWorkflow.$inject=["workflowCode"];WorkflowFacade.prototype.getActiveActionsForWorkflow=function(e){return this.workflowService.getActiveActionsForWorkflowCode(e)};WorkflowFacade.prototype.getActiveActionsForWorkflow.$inject=["workflowCode"];WorkflowFacade.prototype.getCommentsForWorkflowAction=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.workflowService.getCommentsForWorkflowAction(e,t,n)];case 1:i=o.sent();i.results=i.comments;delete i.comments;return[2,i]}}))}))};WorkflowFacade.prototype.getCommentsForWorkflowAction.$inject=["workflowCode","workflowActionCode","payload"];WorkflowFacade.prototype.getWorkflowInboxTasks=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowService.getWorkflowInboxTasks(e)];case 1:t=n.sent();t.results=t.tasks;delete t.tasks;return[2,t]}}))}))};WorkflowFacade.prototype.getWorkflowInboxTasks.$inject=["payload"];WorkflowFacade.prototype.getTotalNumberOfTasks=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getWorkflowInboxTasks({pageSize:1,currentPage:0})];case 1:e=t.sent();return[2,e.pagination.totalCount]}}))}))};WorkflowFacade.prototype.makeDecision=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;var r=this;return __generator(this,(function(a){switch(a.label){case 0:o={};return[4,this.l10nPipe.transform(n.name).pipe(p.take(1)).toPromise()];case 1:i=(o.title=a.sent(),o.structure={attributes:this.makeDecisionStructureAttributes},o.contentApi=this.workflowService.getResourceWorkflowOperationsURI(),o.saveLabel="se.cms.workflow.editor.button.submit",o.content={operation:Ie.MAKE_DECISION,workflowCode:e,actionCode:t.code,decisionCode:n.code},o.initialDirty=true,o);return[2,this.genericEditorModalService.open(i,(function(e){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,this.confirmDecision(e.status,t,n)];case 1:i.sent();return[2,e]}}))}))}),null)]}}))}))};WorkflowFacade.prototype.makeDecision.$inject=["workflowCode","workflowAction","decision"];WorkflowFacade.prototype.confirmDecision=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,r,a,s,c,l;return __generator(this,(function(d){switch(d.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:i=d.sent();return[4,this.systemEventService.publish(o.DEFAULT_SYNCHRONIZATION_POLLING.SPEED_UP,this.SYNC_POLLING_SPEED_PREFIX+i)];case 2:d.sent();if(!(e.toLowerCase()===we.FINISHED))return[3,3];this.alertService.showSuccess("se.cms.workflow.completed.alert.success");this.systemEventService.publishAsync(o.WORKFLOW_FINISHED_EVENT);return[3,6];case 3:a=(r=this.alertService).showSuccess;s={message:"se.cms.workflow.make.decision.success"};c={};return[4,this.l10nPipe.transform(n.name).pipe(p.take(1)).toPromise()];case 4:c.workflowDecisionName=d.sent();return[4,this.l10nPipe.transform(t.name).pipe(p.take(1)).toPromise()];case 5:a.apply(r,[(s.messagePlaceholders=(c.workflowActionName=d.sent(),c),s)]);d.label=6;case 6:this.systemEventService.publish(o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_DOWN,this.SYNC_POLLING_SPEED_PREFIX+i);return[4,this.getTotalNumberOfTasks()];case 7:l=d.sent();this.updateWorkflowTasksCount(l);return[2]}}))}))};WorkflowFacade.prototype.confirmDecision.$inject=["status","workflowAction","decision"];WorkflowFacade.prototype.getWorkflowDataForEditor=function(e){if(e===void 0){e=null}return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){t=e===null;n={title:null,contentApi:this.workflowService.getResourceWorkflowURI()};return[2,t?this.getComponentDataForStartingWorkflow(n):this.getComponentDataForNonStartingWorkflow(n,e.workflowCode)]}))}))};WorkflowFacade.prototype.getWorkflowDataForEditor.$inject=["workflow"];WorkflowFacade.prototype.getComponentDataForStartingWorkflow=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=this.startWorkflowStructureAttributes.find((function(e){return e.qualifier==="templateCode"}));return[4,this.workflowService.getWorkflowTemplates({})];case 1:n=o.sent();t.options=n;e.title="se.cms.workflow.editor.start.workflow.title";e.saveLabel="se.cms.workflow.editor.button.start";e.structure={attributes:this.startWorkflowStructureAttributes};return[4,this.pageInfoService.getPageUUID()];case 2:i=o.sent();e.content={attachments:[i]};return[2,e]}}))}))};WorkflowFacade.prototype.getComponentDataForStartingWorkflow.$inject=["componentData"];WorkflowFacade.prototype.getComponentDataForNonStartingWorkflow=function(e,t){e.title="se.cms.workflow.editor.edit.workflow.title";e.saveLabel="se.cms.workflow.editor.button.save";e.structure={attributes:this.editWorkflowStructureAttributes};e.componentUuid=t;e.componentType="workflow";return e};WorkflowFacade.prototype.getComponentDataForNonStartingWorkflow.$inject=["componentData","workflowCode"];WorkflowFacade.prototype.handleUnrelatedValidationErrors=function(e,t){var n=this;if(!t.sourceGenericEditorId){return}var i="";var o=[];t.messages.forEach((function(e){if(e.subject===n.VERSION_LABEL_QUALIFIER){e.subject=n.CREATE_VERSION_QUALIFIER;o.push(e)}else{i+=e.message+" "}}));if(i){this.alertService.showDanger(i)}if(o.length>0){this.systemEventService.publishAsync(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:o})}};WorkflowFacade.prototype.handleUnrelatedValidationErrors.$inject=["key","eventData"];WorkflowFacade=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IAlertService,Pe,r.IConfirmationModalService,Z,r.IPageInfoService,r.SystemEventService,r.L10nPipe])],WorkflowFacade);return WorkflowFacade}();var Oe=function(){RulesAndPermissionsRegistrationService.$inject=["attributePermissionsRestService","catalogService","catalogVersionPermissionService","catalogVersionRestService","cMSModesService","experienceService","pageService","permissionService","sharedDataService","typePermissionsRestService","workflowService"];function RulesAndPermissionsRegistrationService(e,t,n,i,o,r,a,s,c,l,d){this.attributePermissionsRestService=e;this.catalogService=t;this.catalogVersionPermissionService=n;this.catalogVersionRestService=i;this.cMSModesService=o;this.experienceService=r;this.pageService=a;this.permissionService=s;this.sharedDataService=c;this.typePermissionsRestService=l;this.workflowService=d}RulesAndPermissionsRegistrationService.prototype.register=function(){this.registerRules();this.registerRulesForTypeCodeFromContext();this.registerRulesForCurrentPage();this.registerRulesForTypeCode();this.registerRulesForTypeAndQualifier();this.registerPermissions()};RulesAndPermissionsRegistrationService.prototype.onSuccess=function(e){return e.every((function(e){return e}))};RulesAndPermissionsRegistrationService.prototype.onSuccess.$inject=["results"];RulesAndPermissionsRegistrationService.prototype.onError=function(){return false};RulesAndPermissionsRegistrationService.prototype.getCurrentPageActiveWorkflow=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(!r.windowUtils.getGatewayTargetFrame()){return[2,null]}return[4,this.pageService.getCurrentPageInfo()];case 1:e=t.sent().uuid;return[2,this.workflowService.getActiveWorkflowForPageUuid(e)]}}))}))};RulesAndPermissionsRegistrationService.prototype.registerRules=function(){var e=this;this.permissionService.registerRule({names:["se.write.page","se.write.slot","se.write.component","se.write.to.current.catalog.version"],verify:function(t){var n=t.map((function(t){if(t.context){return e.catalogVersionPermissionService.hasWritePermission(t.context.catalogId,t.context.catalogVersion)}else{return e.catalogVersionPermissionService.hasWritePermissionOnCurrent()}}));return Promise.all(n).then(e.onSuccess,e.onError)}});this.permissionService.registerRule({names:["se.current.user.can.act.on.page.in.workflow"],verify:function(t){var isAvailableForCurrentPrincipal=function(e){return e===null?true:e.isAvailableForCurrentPrincipal};var n=t.map((function(t){if(t.context){return e.workflowService.getActiveWorkflowForPageUuid(t.context.pageInfo.uuid).then((function(e){return isAvailableForCurrentPrincipal(e)}))}else{return e.getCurrentPageActiveWorkflow().then((function(e){return isAvailableForCurrentPrincipal(e)}),(function(){return true}))}}));return Promise.all(n).then(e.onSuccess,e.onError)}});this.permissionService.registerRule({names:["se.current.user.can.act.on.workflow.current.action"],verify:function(t){var isUserParticipant=function(t){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){return[2,t===null?true:this.workflowService.isUserParticipanInActiveAction(t.workflowCode)]}))}))};var n=t.map((function(t){if(t.context){return e.workflowService.getActiveWorkflowForPageUuid(t.context.pageInfo.uuid).then((function(e){return isUserParticipant(e)}))}else{return e.getCurrentPageActiveWorkflow().then((function(e){return isUserParticipant(e)}),(function(){return true}))}}));return Promise.all(n).then(e.onSuccess,e.onError)}});this.permissionService.registerRule({names:["se.sync.catalog"],verify:function(t){var n=t.map((function(t){if(t.context){return e.catalogVersionPermissionService.hasSyncPermission(t.context.catalogId,t.context.catalogVersion,t.context.targetCatalogVersion)}else{return e.catalogVersionPermissionService.hasSyncPermissionFromCurrentToActiveCatalogVersion()}}));return Promise.all(n).then(e.onSuccess,e.onError)}});this.permissionService.registerRule({names:["se.approval.status.page"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:e=t.sent().approvalStatus;return[2,e==="APPROVED"]}}))}))}});this.permissionService.registerRule({names:["se.read.page","se.read.slot","se.read.component","se.read.current.catalog.version"],verify:function(){return e.catalogVersionPermissionService.hasReadPermissionOnCurrent()}});this.permissionService.registerRule({names:["se.page.belongs.to.experience"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:e=t.sent();return[2,e.pageContext&&e.pageContext.catalogVersionUuid===e.catalogDescriptor.catalogVersionUuid]}}))}))}});this.permissionService.registerRule({names:["se.cloneable.page"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:e=o.sent();if(!e.pageContext){return[2,false]}t={CURRENT_CONTEXT_SITE_ID:e.pageContext.siteId,CURRENT_CONTEXT_CATALOG:e.pageContext.catalogId,CURRENT_CONTEXT_CATALOG_VERSION:e.pageContext.catalogVersion};return[4,this.pageService.getCurrentPageInfo()];case 2:n=o.sent();return[4,this.catalogVersionRestService.getCloneableTargets(t)];case 3:i=o.sent();if(e.pageContext.active){return[2,i.versions.length>0&&n.defaultPage&&!n.copyToCatalogsDisabled]}return[2,i.versions.length>0]}}))}))}});this.permissionService.registerRule({names:["se.content.catalog.non.active"],verify:function(){return e.catalogService.isContentCatalogVersionNonActive()}});this.permissionService.registerRule({names:["se.not.versioning.perspective"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.cMSModesService.isVersioningPerspectiveActive()];case 1:e=t.sent();return[2,!e]}}))}))}});this.permissionService.registerRule({names:["se.version.page.selected"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.experienceService.getCurrentExperience()];case 1:e=t.sent();return[2,!!e.versionId]}}))}))}});this.permissionService.registerRule({names:["se.version.page.not.selected"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.experienceService.getCurrentExperience()];case 1:e=t.sent();return[2,!e.versionId]}}))}))}});this.permissionService.registerRule({names:["se.catalogversion.has.workflows.enabled"],verify:function(){return e.workflowService.areWorkflowsEnabledOnCurrentCatalogVersion()}});this.permissionService.registerRule({names:["se.current.page.has.active.workflow"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getCurrentPageActiveWorkflow()];case 1:e=t.sent();return[2,e!==null]}}))}))}});this.permissionService.registerRule({names:["se.current.page.has.no.active.workflow"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getCurrentPageActiveWorkflow()];case 1:e=t.sent();return[2,e===null]}}))}))}});this.permissionService.registerRule({names:["se.has.change.permission.on.page.approval.status"],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:e="approvalStatus";return[4,this.pageService.getCurrentPageInfo()];case 1:t=i.sent();return[4,this.attributePermissionsRestService.hasChangePermissionOnAttributesInType(t.typeCode,[e])];case 2:n=i.sent();return[2,n[e]]}}))}))}})};RulesAndPermissionsRegistrationService.prototype.registerRulesForTypeCodeFromContext=function(){var e=this;var registerTypePermissionRuleForTypeCodeFromContext=function(t,n){e.permissionService.registerRule({names:[t],verify:function(t){var i=t.map((function(e){return n([e.context.typeCode]).then((function(t){return t[e.context.typeCode]}))}));return Promise.all(i).then(e.onSuccess,e.onError)}})};registerTypePermissionRuleForTypeCodeFromContext("se.has.change.permissions.on.type",(function(t){return e.typePermissionsRestService.hasUpdatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCodeFromContext("se.has.create.permissions.on.type",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCodeFromContext("se.has.remove.permissions.on.type",(function(t){return e.typePermissionsRestService.hasDeletePermissionForTypes(t)}))};RulesAndPermissionsRegistrationService.prototype.registerRulesForCurrentPage=function(){var e=this;var registerTypePermissionRuleOnCurrentPage=function(t,n){e.permissionService.registerRule({names:[t],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e,t;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:e=i.sent();return[4,n([e.typeCode])];case 2:t=i.sent();return[2,t[e.typeCode]]}}))}))}})};registerTypePermissionRuleOnCurrentPage("se.has.change.type.permissions.on.current.page",(function(t){return e.typePermissionsRestService.hasUpdatePermissionForTypes(t)}));registerTypePermissionRuleOnCurrentPage("se.has.create.type.permissions.on.current.page",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleOnCurrentPage("se.has.read.type.permissions.on.current.page",(function(t){return e.typePermissionsRestService.hasReadPermissionForTypes(t)}))};RulesAndPermissionsRegistrationService.prototype.registerRulesForTypeCode=function(){var e=this;var registerTypePermissionRuleForTypeCode=function(t,n,i){e.permissionService.registerRule({names:[t],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,i([n])];case 1:e=t.sent();return[2,e[n]]}}))}))}})};registerTypePermissionRuleForTypeCode("se.has.read.permission.on.version.type","CMSVersion",(function(t){return e.typePermissionsRestService.hasReadPermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.create.permission.on.version.type","CMSVersion",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.remove.permission.on.version.type","CMSVersion",(function(t){return e.typePermissionsRestService.hasDeletePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.change.permission.on.version.type","CMSVersion",(function(t){return e.typePermissionsRestService.hasUpdatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.create.permission.on.abstractcomponent.type","AbstractCMSComponent",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.change.permission.on.contentslotforpage.type","ContentSlotForPage",(function(t){return e.typePermissionsRestService.hasUpdatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.create.permission.on.workflow.type","Workflow",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.change.permission.on.workflow.type","Workflow",(function(t){return e.typePermissionsRestService.hasUpdatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.read.permission.on.workflow.type","Workflow",(function(t){return e.typePermissionsRestService.hasReadPermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.create.permission.on.contentslot.type","ContentSlot",(function(t){return e.typePermissionsRestService.hasCreatePermissionForTypes(t)}));registerTypePermissionRuleForTypeCode("se.has.delete.permission.on.contentslot.type","ContentSlot",(function(t){return e.typePermissionsRestService.hasDeletePermissionForTypes(t)}))};RulesAndPermissionsRegistrationService.prototype.registerRulesForTypeAndQualifier=function(){var e=this;var registerAttributePermissionRuleForTypeAndQualifier=function(t,n,i,o){e.permissionService.registerRule({names:[t],verify:function(){return __awaiter(e,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,o(n,[i])];case 1:e=t.sent();return[2,e[i]]}}))}))}})};registerAttributePermissionRuleForTypeAndQualifier("se.has.change.permission.on.workflow.status","Workflow","status",(function(t,n){return e.attributePermissionsRestService.hasChangePermissionOnAttributesInType(t,n)}));registerAttributePermissionRuleForTypeAndQualifier("se.has.change.permission.on.workflow.description","Workflow","description",(function(t,n){return e.attributePermissionsRestService.hasChangePermissionOnAttributesInType(t,n)}))};RulesAndPermissionsRegistrationService.prototype.registerPermissions=function(){this.permissionService.registerPermission({aliases:["se.add.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience","se.has.change.type.permissions.on.current.page","se.current.user.can.act.on.page.in.workflow","se.current.user.can.act.on.workflow.current.action","se.has.create.permission.on.abstractcomponent.type"]});this.permissionService.registerPermission({aliases:["se.read.page"],rules:["se.read.page"]});this.permissionService.registerPermission({aliases:["se.edit.page"],rules:["se.write.page","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.sync.catalog"],rules:["se.sync.catalog"]});this.permissionService.registerPermission({aliases:["se.sync.slot.context.menu","se.sync.slot.indicator"],rules:["se.sync.catalog","se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.sync.page"],rules:["se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.edit.navigation"],rules:["se.write.component"]});this.permissionService.registerPermission({aliases:["se.context.menu.remove.component"],rules:["se.write.slot","se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow","se.current.user.can.act.on.workflow.current.action"]});this.permissionService.registerPermission({aliases:["se.slot.context.menu.shared.icon","se.slot.context.menu.unshared.icon"],rules:["se.read.slot","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.slot.context.menu.visibility"],rules:["se.page.belongs.to.experience"]});this.permissionService.registerPermission({aliases:["se.clone.page"],rules:["se.cloneable.page","se.has.create.type.permissions.on.current.page"]});this.permissionService.registerPermission({aliases:["se.context.menu.edit.component"],rules:["se.write.component","se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.context.menu.drag.and.drop.component"],rules:["se.write.slot","se.write.component","se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow","se.current.user.can.act.on.workflow.current.action","se.has.change.permission.on.contentslotforpage.type"]});this.permissionService.registerPermission({aliases:["se.edit.page.link","se.delete.page.menu"],rules:["se.write.page","se.page.belongs.to.experience","se.not.versioning.perspective","se.has.change.type.permissions.on.current.page","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.shared.slot.override.options"],rules:["se.write.page","se.page.belongs.to.experience","se.not.versioning.perspective","se.current.user.can.act.on.page.in.workflow","se.has.create.permission.on.contentslot.type"]});this.permissionService.registerPermission({aliases:["se.revert.to.global.or.shared.slot.link"],rules:["se.write.page","se.page.belongs.to.experience","se.not.versioning.perspective","se.current.user.can.act.on.page.in.workflow","se.has.delete.permission.on.contentslot.type"]});this.permissionService.registerPermission({aliases:["se.clone.component"],rules:["se.write.component","se.page.belongs.to.experience","se.current.user.can.act.on.page.in.workflow","se.current.user.can.act.on.workflow.current.action"]});this.permissionService.registerPermission({aliases:["se.edit.page.type","se.delete.page.type","se.restore.page.type"],rules:["se.has.change.permissions.on.type"]});this.permissionService.registerPermission({aliases:["se.clone.page.type"],rules:["se.has.create.permissions.on.type"]});this.permissionService.registerPermission({aliases:["se.permanently.delete.page.type"],rules:["se.has.remove.permissions.on.type"]});this.permissionService.registerPermission({aliases:["se.version.page"],rules:["se.write.page","se.page.belongs.to.experience","se.content.catalog.non.active","se.has.read.permission.on.version.type","se.has.read.type.permissions.on.current.page"]});this.permissionService.registerPermission({aliases:["se.edit.version.page"],rules:["se.write.to.current.catalog.version","se.has.change.permission.on.version.type","se.current.user.can.act.on.page.in.workflow"]});this.permissionService.registerPermission({aliases:["se.create.version.page"],rules:["se.version.page.not.selected","se.page.belongs.to.experience","se.has.create.permission.on.version.type","se.has.read.type.permissions.on.current.page"]});var e=["se.version.page.selected","se.page.belongs.to.experience","se.has.read.permission.on.version.type","se.has.create.permission.on.version.type","se.has.change.type.permissions.on.current.page"];this.permissionService.registerPermission({aliases:["se.rollback.version.page"],rules:e});this.permissionService.registerPermission({aliases:["se.rollback.version.page.versions.menu"],rules:e.filter((function(e){return e!=="se.version.page.selected"}))});this.permissionService.registerPermission({aliases:["se.delete.version.page"],rules:["se.has.remove.permission.on.version.type"]});this.permissionService.registerPermission({aliases:["se.start.page.workflow"],rules:["se.has.create.permission.on.workflow.type","se.catalogversion.has.workflows.enabled","se.current.page.has.no.active.workflow"]});this.permissionService.registerPermission({aliases:["se.view.page.workflowMenu"],rules:["se.has.read.permission.on.workflow.type","se.current.page.has.active.workflow"]});this.permissionService.registerPermission({aliases:["se.cancel.page.workflowMenu"],rules:["se.has.change.permission.on.workflow.type","se.current.page.has.active.workflow","se.has.change.permission.on.workflow.status"]});this.permissionService.registerPermission({aliases:["se.edit.workflow.workflowMenu"],rules:["se.has.change.permission.on.workflow.type","se.current.page.has.active.workflow","se.has.change.permission.on.workflow.description"]});this.permissionService.registerPermission({aliases:["se.force.page.approval"],rules:["se.sync.catalog","se.has.change.permission.on.page.approval.status","se.page.belongs.to.experience"]});this.permissionService.registerPermission({aliases:["se.show.page.status"],rules:["se.content.catalog.non.active","se.page.belongs.to.experience"]});this.permissionService.registerPermission({aliases:["se.act.on.page.in.workflow"],rules:["se.current.user.can.act.on.page.in.workflow"]})};RulesAndPermissionsRegistrationService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.AttributePermissionsRestService,r.ICatalogService,r.ICatalogVersionPermissionService,L,o.CMSModesService,r.IExperienceService,o.IPageService,r.IPermissionService,r.ISharedDataService,o.TypePermissionsRestService,Pe])],RulesAndPermissionsRegistrationService);return RulesAndPermissionsRegistrationService}();var Re;(function(e){e["PENDING"]="PENDING";e["NO_HOMEPAGE"]="NO_HOMEPAGE";e["LOCAL"]="LOCAL";e["OLD"]="OLD";e["PARENT"]="PARENT"})(Re||(Re={}));window.__smartedit__.addDecoratorPayload("Component","DisplayConditionsEditorComponent",{selector:"se-display-conditions-editor",template:'<div><se-event-message class="existing-homepage__ymessage" [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'" [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"></se-event-message><se-display-conditions-page-info [pageName]="getPageName()" [pageType]="getPageType()" [isPrimary]="isPagePrimary()"></se-display-conditions-page-info><se-display-conditions-page-variations *ngIf="isPagePrimary()" [variations]="getVariations()"></se-display-conditions-page-variations><se-display-conditions-primary-page *ngIf="!isPagePrimary()" [readOnly]="getIsAssociatedPrimaryReadOnly()" [associatedPrimaryPage]="getAssociatedPrimaryPage()" [pageType]="getPageType()" (onPrimaryPageSelect)="onPrimaryPageSelect($event)"></se-display-conditions-primary-page><div *ngIf="showHomePageWidget()"><div class="se-component-homepage"><label class="se-control-label"><input type="checkbox" id="set-homepage-checkbox" class="fd-form__control se-display-conditions__homepage-input" name="clone-on-drop" [disabled]="disableHomepageCheckbox()" (ngModelChange)="homePageChanged($event)" [ngModel]="page.homepage"/> <span translate="se.cms.display.conditions.homepage.set"></span><se-help *ngIf="disableHomepageCheckbox()"><span translate="se.cms.display.conditions.homepage.disabled"></span></se-help></label></div><div class="se-display-conditions__replace-home-message" *ngIf="showReplaceLabel" translate="se.cms.display.conditions.homepage.replace" [translateParams]="{ currentHomepage: currentHomePageName }"></div></div></div>',styles:[".se-display-conditions__homepage-input{margin:0 4px 0 0}.se-display-conditions__replace-home-message{padding-top:8px}"],changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]});var Me=function(){DisplayConditionsEditorComponent.$inject=["data","route","displayConditionsEditorModel","homepageService","pageService","logService","l10n","translateService","cdr"];function DisplayConditionsEditorComponent(e,t,n,i,o,r,a,s,c){this.data=e;this.route=t;this.displayConditionsEditorModel=n;this.homepageService=i;this.pageService=o;this.logService=r;this.l10n=a;this.translateService=s;this.cdr=c;this.page=this.data.model;this.hasFallback=false;this.isPrimaryPage=false;this.showReplaceLabel=false;this.homepageDetails={status:Re.PENDING}}DisplayConditionsEditorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,r,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.displayConditionsEditorModel.initModel(this.page.uid)];case 1:s.sent();e=this.getRouteParams();s.label=2;case 2:s.trys.push([2,5,,6]);return[4,this.pageService.buildUriContextForCurrentPage(e.siteId,e.catalogId,e.catalogVersion)];case 3:t=s.sent();return[4,Promise.all([this.pageService.isPagePrimaryWithContext(this.page.uid,t),this.homepageService.hasFallbackHomePage(t),this.homepageService.getHomepageDetailsForContext(t)])];case 4:n=s.sent(),i=n[0],o=n[1],r=n[2];this.isPrimaryPage=i;this.hasFallback=o;this.homepageDetails=r;this.cdr.detectChanges();return[3,6];case 5:a=s.sent();this.logService.error("DisplayConditionsEditorComponent::ngOnInit - unable to retrieve uriContext");return[3,6];case 6:return[2]}}))}))};DisplayConditionsEditorComponent.prototype.disableHomepageCheckbox=function(){if(this.hasFallback){return false}if(this.homepageDetails.status===Re.LOCAL){if(this.homepageDetails.currentHomepageUid===this.page.uid){return true}if(this.homepageDetails.oldHomepageUid===this.page.uid){return false}return false}return true};DisplayConditionsEditorComponent.prototype.homePageChanged=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(r){switch(r.label){case 0:this.page.homepage=e;if(!this.page.homepage)return[3,7];t=this.homepageDetails.status;switch(t){case Re.NO_HOMEPAGE:return[3,1];case Re.PARENT:return[3,2];case Re.LOCAL:return[3,4]}return[3,5];case 1:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.showReplaceLabel=false;return[3,6];case 2:return[4,this.getTranslatedNames(this.homepageDetails.parentCatalogName,this.homepageDetails.targetCatalogName)];case 3:n=r.sent(),i=n[0],o=n[1];this.homepageService.sendEventShowReplaceParentHomePageInfo({description:this.translateService.instant("se.cms.display.conditions.homepage.replace.parent.info.header",{parentCatalogName:i,parentCatalogVersion:this.homepageDetails.parentCatalogVersion,targetCatalogName:o,targetCatalogVersion:this.homepageDetails.targetCatalogVersion})});this.showReplaceLabel=false;return[3,6];case 4:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.currentHomePageName=this.homepageDetails.currentHomepageName;this.showReplaceLabel=this.page.uid!==this.homepageDetails.currentHomepageUid;return[3,6];case 5:return[3,6];case 6:return[3,8];case 7:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.showReplaceLabel=false;r.label=8;case 8:return[2]}}))}))};DisplayConditionsEditorComponent.prototype.homePageChanged.$inject=["isHomepage"];DisplayConditionsEditorComponent.prototype.showHomePageWidget=function(){return this.homepageDetails.status!==Re.PENDING&&this.page.typeCode==="ContentPage"&&this.isPrimaryPage};DisplayConditionsEditorComponent.prototype.getPageName=function(){return this.displayConditionsEditorModel.pageName};DisplayConditionsEditorComponent.prototype.getPageType=function(){return this.displayConditionsEditorModel.pageType};DisplayConditionsEditorComponent.prototype.isPagePrimary=function(){return this.displayConditionsEditorModel.isPrimary};DisplayConditionsEditorComponent.prototype.getVariations=function(){return this.displayConditionsEditorModel.variations};DisplayConditionsEditorComponent.prototype.getAssociatedPrimaryPage=function(){return this.displayConditionsEditorModel.associatedPrimaryPage};DisplayConditionsEditorComponent.prototype.getIsAssociatedPrimaryReadOnly=function(){return this.displayConditionsEditorModel.isAssociatedPrimaryReadOnly};DisplayConditionsEditorComponent.prototype.onPrimaryPageSelect=function(e){this.page.label=e.label};DisplayConditionsEditorComponent.prototype.onPrimaryPageSelect.$inject=["primaryPage"];DisplayConditionsEditorComponent.prototype.getRouteParams=function(){var e=this.route.firstChild?this.route.firstChild:this.route;while(!!e.firstChild){e=e.firstChild}return e.snapshot.params};DisplayConditionsEditorComponent.prototype.getTranslatedNames=function(e,t){return Promise.all([this.l10n.transform(e).pipe(p.take(1)).toPromise(),this.l10n.transform(t).pipe(p.take(1)).toPromise()])};DisplayConditionsEditorComponent.prototype.getTranslatedNames.$inject=["name","secondName"];DisplayConditionsEditorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-display-conditions-editor",template:'<div><se-event-message class="existing-homepage__ymessage" [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'" [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"></se-event-message><se-display-conditions-page-info [pageName]="getPageName()" [pageType]="getPageType()" [isPrimary]="isPagePrimary()"></se-display-conditions-page-info><se-display-conditions-page-variations *ngIf="isPagePrimary()" [variations]="getVariations()"></se-display-conditions-page-variations><se-display-conditions-primary-page *ngIf="!isPagePrimary()" [readOnly]="getIsAssociatedPrimaryReadOnly()" [associatedPrimaryPage]="getAssociatedPrimaryPage()" [pageType]="getPageType()" (onPrimaryPageSelect)="onPrimaryPageSelect($event)"></se-display-conditions-primary-page><div *ngIf="showHomePageWidget()"><div class="se-component-homepage"><label class="se-control-label"><input type="checkbox" id="set-homepage-checkbox" class="fd-form__control se-display-conditions__homepage-input" name="clone-on-drop" [disabled]="disableHomepageCheckbox()" (ngModelChange)="homePageChanged($event)" [ngModel]="page.homepage"/> <span translate="se.cms.display.conditions.homepage.set"></span><se-help *ngIf="disableHomepageCheckbox()"><span translate="se.cms.display.conditions.homepage.disabled"></span></se-help></label></div><div class="se-display-conditions__replace-home-message" *ngIf="showReplaceLabel" translate="se.cms.display.conditions.homepage.replace" [translateParams]="{ currentHomepage: currentHomePageName }"></div></div></div>',styles:[".se-display-conditions__homepage-input{margin:0 4px 0 0}.se-display-conditions__replace-home-message{padding-top:8px}"],changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,l.ActivatedRoute,H,q,o.IPageService,r.LogService,r.L10nPipe,d.TranslateService,a.ChangeDetectorRef])],DisplayConditionsEditorComponent);return DisplayConditionsEditorComponent}();window.__smartedit__.addDecoratorPayload("Component","SubTypeSelectorComponent",{selector:"se-sub-type-selector",template:'<ul class="se-sub-type__selector fd-menu__list"><li class="cms-sub-type__selector-link fd-menu__item" *ngFor="let subType of subTypes" (click)="select(subType)" [translate]="subType.label"></li></ul>',styles:[".cms-sub-type__selector-link{display:flex;flex-direction:row;align-items:center;color:#0a6ed1;height:46px}.cms-sub-type__selector-link:hover{color:#085caf}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var xe=function(){function SubTypeSelectorComponent(){this.onSubTypeSelect=new a.EventEmitter}SubTypeSelectorComponent.prototype.select=function(e){var t=e.id;this.onSubTypeSelect.emit(t)};SubTypeSelectorComponent.prototype.select.$inject=["_a"];__decorate([a.Input(),__metadata("design:type",Array)],SubTypeSelectorComponent.prototype,"subTypes",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],SubTypeSelectorComponent.prototype,"onSubTypeSelect",void 0);SubTypeSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-sub-type-selector",template:'<ul class="se-sub-type__selector fd-menu__list"><li class="cms-sub-type__selector-link fd-menu__item" *ngFor="let subType of subTypes" (click)="select(subType)" [translate]="subType.label"></li></ul>',styles:[".cms-sub-type__selector-link{display:flex;flex-direction:row;align-items:center;color:#0a6ed1;height:46px}.cms-sub-type__selector-link:hover{color:#085caf}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],SubTypeSelectorComponent);return SubTypeSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","SelectComponentTypeModalComponent",{selector:"se-select-component-type-modal",template:'\n        <se-sub-type-selector\n            class="sub-type-selector"\n            [subTypes]="subTypes"\n            (onSubTypeSelect)="closeWithSelectedId($event)"\n        >\n        </se-sub-type-selector>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush});var Ne=function(){function SelectComponentTypeModalComponent(e){this.modalManager=e}SelectComponentTypeModalComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.getModalData().pipe(p.take(1)).subscribe((function(t){var n=t.subTypes;return e.subTypes=e.mapSubTypesToIdWithLabel(n)}))};SelectComponentTypeModalComponent.prototype.closeWithSelectedId=function(e){this.modalManager.close(e)};SelectComponentTypeModalComponent.prototype.mapSubTypesToIdWithLabel=function(e){return Object.keys(e).map((function(t){return{id:t,label:e[t]}}))};SelectComponentTypeModalComponent=__decorate([a.Component({selector:"se-select-component-type-modal",template:'\n        <se-sub-type-selector\n            class="sub-type-selector"\n            [subTypes]="subTypes"\n            (onSubTypeSelect)="closeWithSelectedId($event)"\n        >\n        </se-sub-type-selector>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.FundamentalModalManagerService])],SelectComponentTypeModalComponent);return SelectComponentTypeModalComponent}();var ke="ON_EDIT_NESTED_COMPONENT";window.__smartedit__.addDecoratorPayload("Component","CmsDropdownItemComponent",{selector:"se-cms-dropdown-item",template:'<div class="cms-nested-component" *ngIf="item" [attr.data-component-id]="item.uid"><span class="cms-nested-component__item" *ngIf="isSelected" (click)="onClick($event);"><span class="sap-icon--card cms-nested-component__item-icon"></span><div class="cms-nested-component__item-data"><p class="cms-nested-component__item-name" [title]="item.name">{{ item.name }}</p><p class="cms-nested-component__item-type" [title]="item.typeCode">{{ item.typeCode }}</p></div></span><div class="cms-nested-component__result-item" *ngIf="!isSelected"><span class="cms-nested-component__result-name" [title]="item.name">{{ item.name }}</span> <span class="cms-nested-component__result-code" [title]="item.typeCode">{{ item.typeCode }}</span></div></div>',styles:[".cms-nested-component__item{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;color:#0a6ed1}.cms-nested-component__item-icon{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#0a6ed1;height:28px;flex:0 0 28px;color:#fff;border-radius:4px;margin-right:16px}.cms-nested-component__item-data{width:100%;display:grid;grid-template-columns:auto auto;grid-gap:0 16px}.cms-nested-component__item-name,.cms-nested-component__item-type{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;margin-bottom:0}.cms-nested-component__result-item{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:0 16px}.cms-nested-component__result-code,.cms-nested-component__result-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all}.cms-nested-component__item[draggable=true],.ui-select-match-item[draggable=true]{cursor:move}.y-select-item-printer{width:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var Fe=function(){CmsDropdownItemComponent.$inject=["systemEventService"];function CmsDropdownItemComponent(e){this.systemEventService=e}CmsDropdownItemComponent.prototype.onClick=function(e){e.stopPropagation();if(this.isSelected){this.systemEventService.publishAsync(ke,{qualifier:this.qualifier,item:this.item})}};CmsDropdownItemComponent.prototype.onClick.$inject=["event"];__decorate([a.Input(),__metadata("design:type",Object)],CmsDropdownItemComponent.prototype,"item",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],CmsDropdownItemComponent.prototype,"isSelected",void 0);__decorate([a.Input(),__metadata("design:type",String)],CmsDropdownItemComponent.prototype,"qualifier",void 0);CmsDropdownItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-cms-dropdown-item",template:'<div class="cms-nested-component" *ngIf="item" [attr.data-component-id]="item.uid"><span class="cms-nested-component__item" *ngIf="isSelected" (click)="onClick($event);"><span class="sap-icon--card cms-nested-component__item-icon"></span><div class="cms-nested-component__item-data"><p class="cms-nested-component__item-name" [title]="item.name">{{ item.name }}</p><p class="cms-nested-component__item-type" [title]="item.typeCode">{{ item.typeCode }}</p></div></span><div class="cms-nested-component__result-item" *ngIf="!isSelected"><span class="cms-nested-component__result-name" [title]="item.name">{{ item.name }}</span> <span class="cms-nested-component__result-code" [title]="item.typeCode">{{ item.typeCode }}</span></div></div>',styles:[".cms-nested-component__item{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;color:#0a6ed1}.cms-nested-component__item-icon{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#0a6ed1;height:28px;flex:0 0 28px;color:#fff;border-radius:4px;margin-right:16px}.cms-nested-component__item-data{width:100%;display:grid;grid-template-columns:auto auto;grid-gap:0 16px}.cms-nested-component__item-name,.cms-nested-component__item-type{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;margin-bottom:0}.cms-nested-component__result-item{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:0 16px}.cms-nested-component__result-code,.cms-nested-component__result-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all}.cms-nested-component__item[draggable=true],.ui-select-match-item[draggable=true]{cursor:move}.y-select-item-printer{width:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[r.SystemEventService])],CmsDropdownItemComponent);return CmsDropdownItemComponent}();var ze=function(){ComponentMenuService.$inject=["catalogService","experienceService","storageService"];function ComponentMenuService(e,t,n){this.catalogService=e;this.experienceService=t;this.storageService=n;this.SELECTED_CATALOG_VERSION_COOKIE_NAME="se_catalogmenu_catalogversion_cookie"}ComponentMenuService.prototype.hasMultipleContentCatalogs=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getPageContext()];case 1:e=i.sent();return[4,this.getContentCatalogs()];case 2:t=i.sent();n=t.find((function(t){return t.catalogId===e.catalogId}));return[2,!!n.parents&&n.parents.length>0]}}))}))};ComponentMenuService.prototype.getContentCatalogs=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.getPageContext()];case 1:e=t.sent();return[2,e?this.catalogService.getContentCatalogsForSite(e.siteId):[]]}}))}))};ComponentMenuService.prototype.getValidContentCatalogVersions=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o;var r=this;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.getPageContext()];case 1:e=a.sent();return[4,this.getContentCatalogs()];case 2:t=a.sent();n=[];i=t.find((function(t){return t.catalogId===e.catalogId}));n.push(this.getActiveOrCurrentVersionForCatalog(e,i));o=i.parents.map((function(t){return r.getActiveOrCurrentVersionForCatalog(e,t)}));n=__spreadArrays(o,n);return[2,n]}}))}))};ComponentMenuService.prototype.getInitialCatalogVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.storageService.getValueFromLocalStorage(this.SELECTED_CATALOG_VERSION_COOKIE_NAME,false)];case 1:t=o.sent();n=typeof t==="string"?t:null;i=e.find((function(e){return e.id===n}));return[2,i?i:e[e.length-1]]}}))}))};ComponentMenuService.prototype.getInitialCatalogVersion.$inject=["catalogVersions"];ComponentMenuService.prototype.persistCatalogVersion=function(e){return this.storageService.setValueInLocalStorage(this.SELECTED_CATALOG_VERSION_COOKIE_NAME,e,false)};ComponentMenuService.prototype.persistCatalogVersion.$inject=["catalogVersionId"];ComponentMenuService.prototype.getActiveOrCurrentVersionForCatalog=function(e,t){var n=t.versions.find((function(n){if(e.catalogId===t.catalogId){return e.catalogVersion===n.version}return n.active}));return{isCurrentCatalog:e.catalogVersion===n.version,catalogName:t.name?t.name:t.catalogName,catalogId:t.catalogId,catalogVersionId:n.version,id:n.uuid}};ComponentMenuService.prototype.getActiveOrCurrentVersionForCatalog.$inject=["pageContext","catalog"];ComponentMenuService.prototype.getPageContext=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.experienceService.getCurrentExperience()];case 1:e=t.sent();return[2,e.pageContext]}}))}))};ComponentMenuService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,r.IExperienceService,r.IStorageService])],ComponentMenuService);return ComponentMenuService}();var Le=function(){function ComponentMenuModule(){}ComponentMenuModule=__decorate([a.NgModule({providers:[ze]})],ComponentMenuModule);return ComponentMenuModule}();var Ve=function(){RestrictionTypesRestService.$inject=["restServiceFactory"];function RestrictionTypesRestService(e){this.restServiceFactory=e;this.restrictionTypesRestService=this.restServiceFactory.get(o.RESTRICTION_TYPES_URI)}RestrictionTypesRestService.prototype.getRestrictionTypes=function(){return this.restrictionTypesRestService.get()};RestrictionTypesRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],RestrictionTypesRestService);return RestrictionTypesRestService}();var $e=function(){PageTypesRestrictionTypesService.$inject=["pageTypesRestrictionTypesRestService"];function PageTypesRestrictionTypesService(e){this.pageTypesRestrictionTypesRestService=e}PageTypesRestrictionTypesService.prototype.getRestrictionTypeCodesForPageType=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getPageTypesRestrictionTypes()];case 1:t=n.sent();return[2,t.filter((function(t){return t.pageType===e})).map((function(e){return e.restrictionType}))]}}))}))};PageTypesRestrictionTypesService.prototype.getRestrictionTypeCodesForPageType.$inject=["pageType"];PageTypesRestrictionTypesService.prototype.getPageTypesRestrictionTypes=function(){if(this.cache){return this.cache}else{this.cache=this.pageTypesRestrictionTypesRestService.getPageTypesRestrictionTypes().then((function(e){return e.pageTypeRestrictionTypeList}))}return this.cache};PageTypesRestrictionTypesService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[$])],PageTypesRestrictionTypesService);return PageTypesRestrictionTypesService}();var Ue=function(){RestrictionTypesService.$inject=["pageTypesRestrictionTypesService","restrictionTypesRestService"];function RestrictionTypesService(e,t){this.pageTypesRestrictionTypesService=e;this.restrictionTypesRestService=t}RestrictionTypesService.prototype.getRestrictionTypesByPageType=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getRestrictionTypes()];case 1:t=i.sent();return[4,this.pageTypesRestrictionTypesService.getRestrictionTypeCodesForPageType(e)];case 2:n=i.sent();return[2,t.filter((function(e){return n.indexOf(e.code)>=0}))]}}))}))};RestrictionTypesService.prototype.getRestrictionTypesByPageType.$inject=["pageType"];RestrictionTypesService.prototype.getRestrictionTypeForTypeCode=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getRestrictionTypes()];case 1:t=n.sent();return[2,t.find((function(t){return t.code===e}))]}}))}))};RestrictionTypesService.prototype.getRestrictionTypeForTypeCode.$inject=["typeCode"];RestrictionTypesService.prototype.getRestrictionTypes=function(){if(this.cache){return this.cache}else{this.cache=this.restrictionTypesRestService.getRestrictionTypes().then((function(e){return e.restrictionTypes}))}return this.cache};RestrictionTypesService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[$e,Ve])],RestrictionTypesService);return RestrictionTypesService}();var je=function(){function ModeManager(e){this.modes=e}ModeManager.prototype.validateMode=function(e){if(!this.modes.includes(e)){throw new Error("ModeManager.validateMode() - mode ["+e+"] not in list of supported modes: "+this.modes)}return true};return ModeManager}();var Be=function(){function StructureModeManagerFactory(){}StructureModeManagerFactory.prototype.createModeManager=function(e){return new je(e)};StructureModeManagerFactory.prototype.createModeManager.$inject=["modes"];StructureModeManagerFactory=__decorate([r.SeDowngradeService()],StructureModeManagerFactory);return StructureModeManagerFactory}();var He=function(){StructuresRestService.$inject=["operationContextService"];function StructuresRestService(e){this.TYPE_PLACEHOLDER=":smarteditComponentType";this.URI=r.TYPES_RESOURCE_URI+"/";e.register(this.URI,r.OPERATION_CONTEXT.CMS)}StructuresRestService.prototype.getUriForContext=function(e,t){var n=t||this.TYPE_PLACEHOLDER;var i=r.TYPES_RESOURCE_URI+"?code="+n+"&mode="+e.toUpperCase();return i};StructuresRestService.prototype.getUriForContext.$inject=["mode","type"];StructuresRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.OperationContextService])],StructuresRestService);return StructuresRestService}();var Ge=function(){RestrictionsService.$inject=["structuresRestService","typeStructureRestService","structureModeManagerFactory"];function RestrictionsService(e,t,n){this.structuresRestService=e;this.typeStructureRestService=t;this.modeManager=n.createModeManager(["add","edit","create"])}RestrictionsService.prototype.getStructureApiUri=function(e){this.modeManager.validateMode(e);return this.structuresRestService.getUriForContext(e)};RestrictionsService.prototype.getStructureApiUri.$inject=["mode"];RestrictionsService.prototype.getSupportedRestrictionTypeCodes=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.typeStructureRestService.getStructuresByCategory(o.StructureTypeCategory.RESTRICTION)];case 1:e=t.sent();return[2,e.map((function(e){return e.code}))]}}))}))};RestrictionsService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[He,J,Be])],RestrictionsService);return RestrictionsService}();window.__smartedit__.addDecoratorPayload("Component","ComponentRestrictionsEditorComponent",{selector:"se-component-restrictions-editor",template:'<se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="model" [restrictionUuids]="model.restrictions" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>',changeDetection:a.ChangeDetectionStrategy.OnPush});var We=function(){ComponentRestrictionsEditorComponent.$inject=["data","restrictionsService","restrictionTypesService"];function ComponentRestrictionsEditorComponent(e,t,n){this.data=e;this.restrictionsService=t;this.restrictionTypesService=n;this.editor=e.editor,this.field=e.field,this.model=e.model;this.isEditable=!e.isFieldDisabled()}ComponentRestrictionsEditorComponent.prototype.ngOnInit=function(){this.initGetRestrictionTypes();this.initGetSupportedRestrictionTypes();if(this.model.restrictions===undefined){this.editor.form.pristine.restrictions=[];this.editor.form.pristine.onlyOneRestrictionMustApply=false}};ComponentRestrictionsEditorComponent.prototype.onRestrictionsChange=function(e){var t=e.onlyOneRestrictionMustApply,n=e.restrictionUuids,i=e.alwaysEnableSubmit;this.model.onlyOneRestrictionMustApply=t;this.model.restrictions=n;this.editor.api.setAlwaysEnableSubmit(i)};ComponentRestrictionsEditorComponent.prototype.onRestrictionsChange.$inject=["_a"];ComponentRestrictionsEditorComponent.prototype.initGetRestrictionTypes=function(){var e=this;this.getRestrictionTypes=function(){return e.restrictionTypesService.getRestrictionTypes()}};ComponentRestrictionsEditorComponent.prototype.initGetSupportedRestrictionTypes=function(){var e=this;this.getSupportedRestrictionTypes=function(){return e.restrictionsService.getSupportedRestrictionTypeCodes()}};ComponentRestrictionsEditorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-component-restrictions-editor",template:'<se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="model" [restrictionUuids]="model.restrictions" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,Ge,Ue])],ComponentRestrictionsEditorComponent);return ComponentRestrictionsEditorComponent}();window.__smartedit__.addDecoratorPayload("Component","ItemManagementComponent",{selector:"se-item-manager",template:'<div><se-generic-editor [id]="editorId" [smarteditComponentId]="itemId" [smarteditComponentType]="componentType" [structureApi]="structureApi" [content]="item" [contentApi]="contentApi" [(isDirty)]="isDirtyInternal" [(submit)]="submit" [uriContext]="uriContext" [reset]="reset"></se-generic-editor></div>'});var qe=function(){function ItemManagementComponent(){this.supportedModes=["add","edit","create"];this.editorId="se-item-management-editor";this.isDirtyChange=new a.EventEmitter;this.submitFunctionChange=new a.EventEmitter;this.reset=true}ItemManagementComponent.prototype.ngOnInit=function(){var e=this;this.validateMode();this.submitFunctionChange.emit((function(){return e.submitInternal()}));this.isDirtyChange.emit((function(){return e.isDirtyLocal()}));if(!this.componentType&&this.item){this.componentType=this.item.typeCode}if(!this.item){this.itemId=null}if(this.item&&this.item.uuid){this.itemId=this.item.uuid}else if(this.item&&this.item.uid){this.itemId=this.item.uid}};ItemManagementComponent.prototype.ngOnChanges=function(e){var t=e.item;if(t){this.itemId=null;if(this.item&&this.item.uuid){this.itemId=this.item.uuid}else if(this.item&&this.item.uid){this.itemId=this.item.uid}}};ItemManagementComponent.prototype.ngOnChanges.$inject=["changes"];ItemManagementComponent.prototype.validateMode=function(){if(!this.supportedModes.includes(this.mode)){throw"ItemManagementComponent.ngOnInit() - Mode not supported: "+this.mode}};ItemManagementComponent.prototype.submitInternal=function(){switch(this.mode.toLowerCase()){case"add":return Promise.resolve(this.item);case"edit":return this.submit();case"create":return this.submit().then((function(e){return e}));default:throw"ItemManagementController - The given mode ["+this.mode+"] has not been implemented for this component"}};ItemManagementComponent.prototype.isDirtyLocal=function(){if(this.isDirtyInternal){return this.isDirtyInternal()}return false};__decorate([a.Input(),__metadata("design:type",Object)],ItemManagementComponent.prototype,"item",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ItemManagementComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",String)],ItemManagementComponent.prototype,"mode",void 0);__decorate([a.Input(),__metadata("design:type",String)],ItemManagementComponent.prototype,"contentApi",void 0);__decorate([a.Input(),__metadata("design:type",String)],ItemManagementComponent.prototype,"structureApi",void 0);__decorate([a.Input(),__metadata("design:type",String)],ItemManagementComponent.prototype,"componentType",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ItemManagementComponent.prototype,"isDirty",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ItemManagementComponent.prototype,"submitFunction",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ItemManagementComponent.prototype,"isDirtyChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ItemManagementComponent.prototype,"submitFunctionChange",void 0);ItemManagementComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-item-manager",template:'<div><se-generic-editor [id]="editorId" [smarteditComponentId]="itemId" [smarteditComponentType]="componentType" [structureApi]="structureApi" [content]="item" [contentApi]="contentApi" [(isDirty)]="isDirtyInternal" [(submit)]="submit" [uriContext]="uriContext" [reset]="reset"></se-generic-editor></div>'}),__metadata("design:paramtypes",[])],ItemManagementComponent);return ItemManagementComponent}();var Ke=function(){function RestrictionManagementSelectModel(e,t,n,i){this.cmsitemsRestService=e;this.catalogService=t;this.fetchRestrictionTypes=n;this.getSupportedRestrictionTypes=i;this.selectedIds={};this.model={restrictionTypes:[],selectedRestrictionType:null};this.restrictions=[];this.supportedRestrictionTypes=[]}RestrictionManagementSelectModel.prototype.initialize=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.fetchRestrictionTypes()];case 1:e=n.sent();this.model.restrictionTypes=e.map((function(e,t){return __assign(__assign({},e),{id:t})}));if(!(typeof this.getSupportedRestrictionTypes==="function"))return[3,3];t=this;return[4,this.getSupportedRestrictionTypes()];case 2:t.supportedRestrictionTypes=n.sent();return[3,4];case 3:this.supportedRestrictionTypes=this.model.restrictionTypes.map((function(e){return e.code}));n.label=4;case 4:return[2]}}))}))};RestrictionManagementSelectModel.prototype.getRestrictionsPaged=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r;return __generator(this,(function(a){switch(a.label){case 0:i={pageSize:t,currentPage:n,typeCode:this.model.selectedRestrictionType.code,mask:e,itemSearchParams:""};if(n===0){this.restrictions=[]}return[4,this.cmsitemsRestService.get(i)];case 1:o=a.sent();r=o.response.map((function(e){return __assign(__assign({},e),{id:e.uid})}));this.restrictions=this.restrictions.concat(r);return[2,{pagination:o.pagination,results:r}]}}))}))};RestrictionManagementSelectModel.prototype.getRestrictionFromBackend=function(){return Promise.resolve({})};RestrictionManagementSelectModel.prototype.getRestrictionTypes=function(){return Promise.resolve(this.model.restrictionTypes)};RestrictionManagementSelectModel.prototype.restrictionSelected=function(){var e=this;if(this.selectedIds.restriction){this.selectedRestriction=this.restrictions.find((function(t){return t.id===e.selectedIds.restriction}));return true}return false};RestrictionManagementSelectModel.prototype.restrictionTypeSelected=function(){var e=this;this.selectedIds.restriction=null;this.model.selectedRestrictionType=(this.model.restrictionTypes||[]).find((function(t){return t.id===e.selectedIds.restrictionType}))||null;if(this.model.selectedRestrictionType){this.selectedRestriction={typeCode:this.model.selectedRestrictionType.code};return true}return false};RestrictionManagementSelectModel.prototype.createRestrictionSelected=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:this.selectedRestriction={itemtype:this.model.selectedRestrictionType.code,name:e};return[4,this.catalogService.getCatalogVersionUUid(t)];case 1:n=i.sent();this.selectedRestriction.catalogVersion=n;return[2]}}))}))};RestrictionManagementSelectModel.prototype.getRestrictionTypeCode=function(){var e;return(e=this.model.selectedRestrictionType)===null||e===void 0?void 0:e.code};RestrictionManagementSelectModel.prototype.getRestriction=function(){return this.selectedRestriction};RestrictionManagementSelectModel.prototype.isTypeSupported=function(){if(this.getRestrictionTypeCode()){return this.supportedRestrictionTypes.includes(this.model.selectedRestrictionType.code)}return false};return RestrictionManagementSelectModel}();var Ye=function(){RestrictionManagementSelectModelFactory.$inject=["cmsitemsRestService","catalogService"];function RestrictionManagementSelectModelFactory(e,t){this.cmsitemsRestService=e;this.catalogService=t}RestrictionManagementSelectModelFactory.prototype.createRestrictionManagementSelectModel=function(e,t){var n=new Ke(this.cmsitemsRestService,this.catalogService,e,t);n.initialize();return n};RestrictionManagementSelectModelFactory.prototype.createRestrictionManagementSelectModel.$inject=["fetchRestrictionTypes","getSupportedRestrictionTypes"];RestrictionManagementSelectModelFactory=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.CmsitemsRestService,r.ICatalogService])],RestrictionManagementSelectModelFactory);return RestrictionManagementSelectModelFactory}();var Xe=function(){function RestrictionPickerConfigService(){this.MODE_EDITING="editing";this.MODE_SELECT="select"}RestrictionPickerConfigService.prototype.getConfigForEditing=function(e,t){return{mode:this.MODE_EDITING,restriction:e,getSupportedRestrictionTypesFn:t}};RestrictionPickerConfigService.prototype.getConfigForEditing.$inject=["existingRestriction","getSupportedRestrictionTypesFn"];RestrictionPickerConfigService.prototype.getConfigForSelecting=function(e,t,n){return{mode:this.MODE_SELECT,getRestrictionTypesFn:t,getSupportedRestrictionTypesFn:n,existingRestrictions:e}};RestrictionPickerConfigService.prototype.getConfigForSelecting.$inject=["existingRestrictions","getRestrictionTypesFn","getSupportedRestrictionTypesFn"];RestrictionPickerConfigService.prototype.isEditingMode=function(e){return e.mode===this.MODE_EDITING};RestrictionPickerConfigService.prototype.isEditingMode.$inject=["config"];RestrictionPickerConfigService.prototype.isSelectMode=function(e){return e.mode===this.MODE_SELECT};RestrictionPickerConfigService.prototype.isSelectMode.$inject=["config"];RestrictionPickerConfigService.prototype.isValidConfig=function(e){switch(e.mode){case this.MODE_EDITING:return s.isObject(e.restriction);case this.MODE_SELECT:if(e.getSupportedRestrictionTypesFn){return s.isFunction(e.getRestrictionTypesFn)&&s.isFunction(e.getSupportedRestrictionTypesFn)}return s.isFunction(e.getRestrictionTypesFn);default:return false}};RestrictionPickerConfigService.prototype.isValidConfig.$inject=["config"];RestrictionPickerConfigService=__decorate([r.SeDowngradeService()],RestrictionPickerConfigService);return RestrictionPickerConfigService}();window.__smartedit__.addDecoratorPayload("Component","RestrictionManagementComponent",{selector:"se-restriction-management",template:'<div *ngIf="isReady"><div *ngIf="isEditMode"><se-restriction-management-edit [restriction]="config?.restriction" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-edit></div><div *ngIf="!isEditMode"><se-restriction-management-select [existingRestrictions]="config?.existingRestrictions" [fetchRestrictionTypes]="config?.getRestrictionTypesFn" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-select></div></div>'});var Ze=function(){RestrictionManagementComponent.$inject=["restrictionPickerConfigService"];function RestrictionManagementComponent(e){this.restrictionPickerConfigService=e;this.submitFnChange=new a.EventEmitter;this.isDirtyFnChange=new a.EventEmitter;this.isReady=false;this.isEditMode=false}RestrictionManagementComponent.prototype.ngOnInit=function(){var e=this;setTimeout((function(){e.submitFnChange.emit((function(){return e.submitInternal().then((function(e){return e}))}));e.isDirtyFnChange.emit((function(){return e.isDirtyInternal&&e.isDirtyInternal()}))}))};RestrictionManagementComponent.prototype.ngOnChanges=function(){if(!this.config){return}if(this.restrictionPickerConfigService.isValidConfig(this.config)){this.isReady=true;this.isEditMode=this.restrictionPickerConfigService.isEditingMode(this.config)}else{throw"RestrictionManagementComponent - invalid restrictionPickerConfig"}};__decorate([a.Input(),__metadata("design:type",Object)],RestrictionManagementComponent.prototype,"config",void 0);__decorate([a.Input(),__metadata("design:type",Object)],RestrictionManagementComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementComponent.prototype,"submitFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementComponent.prototype,"isDirtyFn",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementComponent.prototype,"submitFnChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementComponent.prototype,"isDirtyFnChange",void 0);RestrictionManagementComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restriction-management",template:'<div *ngIf="isReady"><div *ngIf="isEditMode"><se-restriction-management-edit [restriction]="config?.restriction" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-edit></div><div *ngIf="!isEditMode"><se-restriction-management-select [existingRestrictions]="config?.existingRestrictions" [fetchRestrictionTypes]="config?.getRestrictionTypesFn" [getSupportedRestrictionTypes]="config?.getSupportedRestrictionTypesFn" [uriContext]="uriContext" [(isDirtyFn)]="isDirtyInternal" [(submitFn)]="submitInternal"></se-restriction-management-select></div></div>'}),__metadata("design:paramtypes",[Xe])],RestrictionManagementComponent);return RestrictionManagementComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionManagementEditComponent",{selector:"se-restriction-management-edit",template:'<div *ngIf="ready"><div *ngIf="isTypeSupported"><div class="se-restriction-management-edit__header"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]="restriction" [mode]="itemManagementMode" [structureApi]="structureApi" [contentApi]="contentApi" [uriContext]="uriContext" [componentType]="restriction.itemtype" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div></div><div *ngIf="!isTypeSupported"><div class="se-restrictions-list__item-content"><div translate="se.cms.restriction.management.select.type.not.supported.warning"></div><p class="se-restriction__item-name">{{ restriction.name }}</p><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>',styles:[".se-restriction-management-edit__header{margin-bottom:16px}","#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}"]});var Qe=function(){RestrictionManagementEditComponent.$inject=["restrictionsService"];function RestrictionManagementEditComponent(e){this.restrictionsService=e;this.isDirtyFnChange=new a.EventEmitter;this.submitFnChange=new a.EventEmitter;this.ready=false;this.itemManagementMode="edit";this.structureApi=this.restrictionsService.getStructureApiUri(this.itemManagementMode)}RestrictionManagementEditComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:e=o.cmsitemsUri+"/:identifier";this.restriction=this.restriction||{};this.contentApi=new r.URIBuilder(e).replaceParams(this.uriContext).build();if(!(typeof this.getSupportedRestrictionTypes!=="undefined"))return[3,2];return[4,this.getSupportedRestrictionTypes()];case 1:t=n.sent();this.emitActions(t.includes(this.restriction.itemtype));return[3,3];case 2:return[2,this.emitActions(true)];case 3:return[2]}}))}))};RestrictionManagementEditComponent.prototype.emitActions=function(e){var t=this;this.isTypeSupported=e;if(e){this.submitFnChange.emit((function(){return t.submitInternal().then((function(e){return Promise.resolve(e)}))}));this.isDirtyFnChange.emit((function(){return t.isDirtyLocal()}))}else{this.submitFnChange.emit((function(){return Promise.resolve(null)}));this.isDirtyFnChange.emit((function(){return false}))}this.ready=true};RestrictionManagementEditComponent.prototype.emitActions.$inject=["isRestrictionTypeSupported"];RestrictionManagementEditComponent.prototype.isDirtyLocal=function(){if(this.isDirtyInternal){return this.isDirtyInternal()}return false};__decorate([a.Input(),__metadata("design:type",Object)],RestrictionManagementEditComponent.prototype,"restriction",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementEditComponent.prototype,"getSupportedRestrictionTypes",void 0);__decorate([a.Input(),__metadata("design:type",Object)],RestrictionManagementEditComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementEditComponent.prototype,"isDirtyFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementEditComponent.prototype,"submitFn",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementEditComponent.prototype,"isDirtyFnChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementEditComponent.prototype,"submitFnChange",void 0);RestrictionManagementEditComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restriction-management-edit",template:'<div *ngIf="ready"><div *ngIf="isTypeSupported"><div class="se-restriction-management-edit__header"><div>{{ restriction.name }}</div><div>{{ restriction.typeCode }}</div></div><div><se-item-manager [item]="restriction" [mode]="itemManagementMode" [structureApi]="structureApi" [contentApi]="contentApi" [uriContext]="uriContext" [componentType]="restriction.itemtype" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div></div><div *ngIf="!isTypeSupported"><div class="se-restrictions-list__item-content"><div translate="se.cms.restriction.management.select.type.not.supported.warning"></div><p class="se-restriction__item-name">{{ restriction.name }}</p><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>',styles:[".se-restriction-management-edit__header{margin-bottom:16px}","#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}"]}),__metadata("design:paramtypes",[Ge])],RestrictionManagementEditComponent);return RestrictionManagementEditComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionManagementSelectItemComponent",{selector:"se-restriction-management-select-item",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<span class="se-restriction-management-item-name">{{\n        data.item.name | seL10n | async\n    }}</span>'});var Je=function(){function RestrictionManagementSelectItemComponent(e){this.data=e}RestrictionManagementSelectItemComponent=__decorate([a.Component({selector:"se-restriction-management-select-item",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<span class="se-restriction-management-item-name">{{\n        data.item.name | seL10n | async\n    }}</span>'}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],RestrictionManagementSelectItemComponent);return RestrictionManagementSelectItemComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionManagementSelectComponent",{selector:"se-restriction-management-select",template:'<div><se-message [style.display]="showWarningMessage() ? \'block\' : \'none\'" [type]="\'warning\'"><span se-message-title translate="se.cms.restriction.management.select.type.not.supported.warning"></span></se-message><div class="se-restriction-management-select__select"><label class="se-control-label">{{ \'se.cms.restriction.management.select.type.label\' | translate }}</label><se-select id="restriction-type" [fetchStrategy]="fetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restriction.management.select.type.placeholder\'" [(model)]="selectModel.selectedIds.restrictionType" (modelChange)="selectRestrictionType()" [searchEnabled]="false"></se-select></div><div *ngIf="viewConfig.showRestrictionSelector" class="se-restriction-management-select__restriction-info"><label class="se-control-label" translate="se.cms.restriction.management.select.restriction.label"></label><se-select id="restriction-name" [fetchStrategy]="fetchOptions" [(model)]="selectModel.selectedIds.restriction" (modelChange)="selectRestriction()" [placeholder]="\'se.cms.restriction.management.select.restriction.placeholder\'" [disableChoiceFn]="disableRestrictionChoice" [itemComponent]="itemComponent" [resultsHeaderLabel]="resultsHeaderLabel" [actionableSearchItem]="{ eventId: RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID }" [(reset)]="reset"></se-select></div><div class="se-restriction-management-select__restriction-editor" *ngIf="viewConfig.showRestrictionEditor"><p class="se-restriction-management-select__new-restriction-message" [translate]="editorHeader"></p><div *ngIf="selectModel.isTypeSupported()"><se-item-manager [item]="selectModel.getRestriction()" [mode]="viewConfig.mode" [structureApi]="viewConfig.structureApi" [contentApi]="viewConfig.contentApi" [uriContext]="uriContext" [componentType]="selectModel.getRestrictionTypeCode()" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div><div *ngIf="!selectModel.isTypeSupported()"><p class="se-restriction__item-name">{{ selectModel.getRestriction().name }}</p><div class="se-restriction__item-description">{{ selectModel.getRestriction().description }}</div></div></div></div>',styles:["se-restriction-management-select .se-restriction-management-select__restriction-info,se-restriction-management-select .se-restriction-management-select__select{margin-bottom:16px}se-restriction-management-select .se-restriction-management-select__restriction-editor{border-top:1px solid #d9d9d9;padding-top:16px}se-restriction-management-select .se-restriction-management-select__new-restriction-message{font-weight:700}se-restriction-management-select .fd-menu__list-header{font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding:8px 12px;border-bottom:1px solid #d9d9d9;color:#51555a;list-style:none;padding-left:24px}se-restriction-management-select .se-select-list__item.is-disabled{opacity:.65}se-restriction-management-select .se-select-list__item.is-disabled .fd-menu__item{cursor:not-allowed}se-restriction-management-select div.se-actionable-search-item{display:flex;align-items:center;justify-content:space-between;padding:0 0 0 13px}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var et=function(){RestrictionManagementSelectComponent.$inject=["restrictionManagementSelectModelFactory","restrictionsService","systemEventService","cdr"];function RestrictionManagementSelectComponent(e,t,n,i){this.restrictionManagementSelectModelFactory=e;this.restrictionsService=t;this.systemEventService=n;this.cdr=i;this.RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID="RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID";this.resultsHeaderLabel="se.cms.restrictionmanagement.restrictionresults.header";this.itemComponent=Je;this.editorHeader="";this.isDirtyFnChange=new a.EventEmitter;this.submitFnChange=new a.EventEmitter}RestrictionManagementSelectComponent.prototype.ngOnInit=function(){var e=this;this.selectModel=this.restrictionManagementSelectModelFactory.createRestrictionManagementSelectModel(this.fetchRestrictionTypes,this.getSupportedRestrictionTypes);var t=o.cmsitemsUri+"/:identifier";this.viewConfig={showRestrictionSelector:false,showRestrictionEditor:false,mode:"add",contentApi:new r.URIBuilder(t).replaceParams(this.uriContext).build()};this.fetchOptions={fetchPage:function(t,n,i){return e.selectModel.getRestrictionsPaged(t,n,i)},fetchEntity:function(){return e.selectModel.getRestrictionFromBackend()}};this.fetchStrategy={fetchAll:function(){return e.selectModel.getRestrictionTypes()}};this.disableRestrictionChoice=function(t){return!!e.existingRestrictions.find((function(e){return t.uid===e.uid}))};setTimeout((function(){e.submitFnChange.emit((function(){return __awaiter(e,void 0,void 0,(function(){return __generator(this,(function(e){if(this.selectModel.isTypeSupported()){return[2,this.submitInternal().then((function(e){return e}))]}return[2,this.selectModel.getRestriction()]}))}))}));e.isDirtyFnChange.emit((function(){if(e.viewConfig.mode==="add"){return e.viewConfig.showRestrictionEditor}else if(e.isDirtyInternal){return e.isDirtyInternal()}return false}))}));this.createButtonUnsubscribe=this.systemEventService.subscribe(this.RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID,(function(t,n){return e.createButtonEventHandler(n)}))};RestrictionManagementSelectComponent.prototype.ngOnDestroy=function(){if(this.createButtonUnsubscribe){this.createButtonUnsubscribe()}};RestrictionManagementSelectComponent.prototype.selectRestrictionType=function(){if(this.selectModel.restrictionTypeSelected()){if(this.viewConfig.showRestrictionSelector){this.resetSelector()}else{this.viewConfig.showRestrictionSelector=true}this.viewConfig.showRestrictionEditor=false}};RestrictionManagementSelectComponent.prototype.selectRestriction=function(){if(this.selectModel.restrictionSelected()){this.setViewConfig("se.cms.restriction.management.select.editor.header.add","add");if(!this.viewConfig.showRestrictionEditor){this.viewConfig.showRestrictionEditor=true}}};RestrictionManagementSelectComponent.prototype.createRestriction=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.selectModel.createRestrictionSelected(e,this.uriContext)];case 1:t.sent();this.setViewConfig("se.cms.restriction.management.select.editor.header.create","create");if(this.viewConfig.showRestrictionEditor){this.resetSelector()}else{this.viewConfig.showRestrictionEditor=true}this.cdr.detectChanges();return[2]}}))}))};RestrictionManagementSelectComponent.prototype.createRestriction.$inject=["name"];RestrictionManagementSelectComponent.prototype.showWarningMessage=function(){return this.selectModel.getRestriction()&&!this.selectModel.isTypeSupported()};RestrictionManagementSelectComponent.prototype.createButtonEventHandler=function(e){this.createRestriction(e)};RestrictionManagementSelectComponent.prototype.createButtonEventHandler.$inject=["name"];RestrictionManagementSelectComponent.prototype.resetSelector=function(){if(typeof this.reset==="function"){this.reset(true)}};RestrictionManagementSelectComponent.prototype.setViewConfig=function(e,t){this.editorHeader=e;this.viewConfig.mode=t;this.viewConfig.structureApi=this.restrictionsService.getStructureApiUri(this.viewConfig.mode)};RestrictionManagementSelectComponent.prototype.setViewConfig.$inject=["editorHeader","mode"];__decorate([a.Input(),__metadata("design:type",Object)],RestrictionManagementSelectComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Array)],RestrictionManagementSelectComponent.prototype,"existingRestrictions",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementSelectComponent.prototype,"fetchRestrictionTypes",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementSelectComponent.prototype,"getSupportedRestrictionTypes",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementSelectComponent.prototype,"isDirtyFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionManagementSelectComponent.prototype,"submitFn",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementSelectComponent.prototype,"isDirtyFnChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionManagementSelectComponent.prototype,"submitFnChange",void 0);RestrictionManagementSelectComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restriction-management-select",template:'<div><se-message [style.display]="showWarningMessage() ? \'block\' : \'none\'" [type]="\'warning\'"><span se-message-title translate="se.cms.restriction.management.select.type.not.supported.warning"></span></se-message><div class="se-restriction-management-select__select"><label class="se-control-label">{{ \'se.cms.restriction.management.select.type.label\' | translate }}</label><se-select id="restriction-type" [fetchStrategy]="fetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restriction.management.select.type.placeholder\'" [(model)]="selectModel.selectedIds.restrictionType" (modelChange)="selectRestrictionType()" [searchEnabled]="false"></se-select></div><div *ngIf="viewConfig.showRestrictionSelector" class="se-restriction-management-select__restriction-info"><label class="se-control-label" translate="se.cms.restriction.management.select.restriction.label"></label><se-select id="restriction-name" [fetchStrategy]="fetchOptions" [(model)]="selectModel.selectedIds.restriction" (modelChange)="selectRestriction()" [placeholder]="\'se.cms.restriction.management.select.restriction.placeholder\'" [disableChoiceFn]="disableRestrictionChoice" [itemComponent]="itemComponent" [resultsHeaderLabel]="resultsHeaderLabel" [actionableSearchItem]="{ eventId: RESTRICTION_CREATE_BUTTON_PRESSED_EVENT_ID }" [(reset)]="reset"></se-select></div><div class="se-restriction-management-select__restriction-editor" *ngIf="viewConfig.showRestrictionEditor"><p class="se-restriction-management-select__new-restriction-message" [translate]="editorHeader"></p><div *ngIf="selectModel.isTypeSupported()"><se-item-manager [item]="selectModel.getRestriction()" [mode]="viewConfig.mode" [structureApi]="viewConfig.structureApi" [contentApi]="viewConfig.contentApi" [uriContext]="uriContext" [componentType]="selectModel.getRestrictionTypeCode()" [(submitFunction)]="submitInternal" [(isDirty)]="isDirtyInternal"></se-item-manager></div><div *ngIf="!selectModel.isTypeSupported()"><p class="se-restriction__item-name">{{ selectModel.getRestriction().name }}</p><div class="se-restriction__item-description">{{ selectModel.getRestriction().description }}</div></div></div></div>',styles:["se-restriction-management-select .se-restriction-management-select__restriction-info,se-restriction-management-select .se-restriction-management-select__select{margin-bottom:16px}se-restriction-management-select .se-restriction-management-select__restriction-editor{border-top:1px solid #d9d9d9;padding-top:16px}se-restriction-management-select .se-restriction-management-select__new-restriction-message{font-weight:700}se-restriction-management-select .fd-menu__list-header{font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding:8px 12px;border-bottom:1px solid #d9d9d9;color:#51555a;list-style:none;padding-left:24px}se-restriction-management-select .se-select-list__item.is-disabled{opacity:.65}se-restriction-management-select .se-select-list__item.is-disabled .fd-menu__item{cursor:not-allowed}se-restriction-management-select div.se-actionable-search-item{display:flex;align-items:center;justify-content:space-between;padding:0 0 0 13px}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Ye,Ge,r.SystemEventService,a.ChangeDetectorRef])],RestrictionManagementSelectComponent);return RestrictionManagementSelectComponent}();var tt=function(){function PageRestrictionsCriteriaService(){this.ALL={};this.ANY={};this.restrictionCriteriaOptions=[this.ALL,this.ANY];this.setupCriteria(this.ALL,"all",false);this.setupCriteria(this.ANY,"any",true)}PageRestrictionsCriteriaService.prototype.getMatchCriteriaLabel=function(e){if(e){return this.ANY.label}return this.ALL.label};PageRestrictionsCriteriaService.prototype.getMatchCriteriaLabel.$inject=["onlyOneRestrictionMustApply"];PageRestrictionsCriteriaService.prototype.getRestrictionCriteriaOptions=function(){return this.restrictionCriteriaOptions};PageRestrictionsCriteriaService.prototype.getRestrictionCriteriaOptionFromPage=function(e){if(e&&typeof e.onlyOneRestrictionMustApply==="boolean"){if(e.onlyOneRestrictionMustApply){return this.ANY}}return this.ALL};PageRestrictionsCriteriaService.prototype.getRestrictionCriteriaOptionFromPage.$inject=["page"];PageRestrictionsCriteriaService.prototype.setupCriteria=function(e,t,n){Object.defineProperty(e,"id",{writable:false,value:t});Object.defineProperty(e,"label",{writable:false,value:"se.cms.restrictions.criteria."+t});Object.defineProperty(e,"editLabel",{writable:false,value:"se.cms.restrictions.criteria.select."+t});Object.defineProperty(e,"value",{writable:false,value:n})};PageRestrictionsCriteriaService.prototype.setupCriteria.$inject=["criteria","id","boolValue"];PageRestrictionsCriteriaService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[])],PageRestrictionsCriteriaService);return PageRestrictionsCriteriaService}();window.__smartedit__.addDecoratorPayload("Component","RestrictionsTableComponent",{selector:"se-restrictions-table",template:'<div class="se-restriction-table-wrapper se-restriction-table-left" [ngClass]="customClass"><div class="se-restrictions-list fd-menu__list fd-menu__list--separated" *ngIf="restrictions.length > 0"><div id="restriction-{{ index + 1 }}" *ngFor="let restriction of restrictions; let index = index" class="se-restriction__item fd-menu__item"><div class="se-restrictions-list__item-content"><p class="se-restriction__item-name" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.name }}</p><div class="se-restriction__item-type-and-id" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.typeCode }}</div><div class="se-restriction__item-description" [ngClass]="{ \'error-input\': isInError(index) }" [title]="restriction.description">{{ restriction.description }}</div><div id="restrictionPartOfWorkflow" *ngIf="!restriction.canBeEdited" translate="se.cms.restrictions.editor.part.of.workflow"></div></div><div *ngIf="editable"><se-dropdown-menu [dropdownItems]="restriction.actions || defaultActions" [selectedItem]="restriction" [placement]="\'bottom-start\'"></se-dropdown-menu></div></div></div><div *ngIf="restrictions.length === 0" class="se-restrictions-list--empty"><span class="se-restrictions-list--empty__message" translate="se.cms.restrictions.emptylist.message"></span></div></div>',styles:[".se-restrictions-list .se-restriction__item{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-top-color:#eeeeef!important;cursor:default}.se-restrictions-list .se-restriction__item:last-child{margin-bottom:42px}.se-restriction__item-name{font-weight:700;color:#32363a;margin:0}.se-restriction__item-type-and-id{color:#51555a;margin-top:0}.se-restriction__item-description{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#6a6d70;width:90%}.se-restrictions-list--empty__message{color:#6a6d70}.error-input.se-restriction__item-description,.error-input.se-restriction__item-name,.error-input.se-restriction__item-type-and-id{color:#b00}"]});var nt=function(){RestrictionsTableComponent.$inject=["pageRestrictionsCriteriaService"];function RestrictionsTableComponent(e){this.pageRestrictionsCriteriaService=e;this.REMOVE_RESTRICTION_KEY="se.cms.restrictions.item.remove";this.EDIT_RESTRICTION_KEY="se.cms.restrictions.item.edit";this.onEdit=new a.EventEmitter;this.onRemove=new a.EventEmitter;this.errors=[];this.criteriaOptions=[];this.defaultActions=[];this.oldRestrictionsEditability=[]}RestrictionsTableComponent.prototype.ngOnInit=function(){this.oldRestrictionsEditability=this.getRestrictionsEditability(this.restrictions);this.defaultActions=this.getDefaultActions();this.provideActionsForRestrictions();this.criteriaOptions=this.pageRestrictionsCriteriaService.getRestrictionCriteriaOptions();this.resetRestrictionCriteria()};RestrictionsTableComponent.prototype.ngOnChanges=function(){if(this.restrictionsEditabilityChanged(this.restrictions)){this.provideActionsForRestrictions();this.oldRestrictionsEditability=this.getRestrictionsEditability(this.restrictions)}this.resetRestrictionCriteria()};RestrictionsTableComponent.prototype.resetRestrictionCriteria=function(){if(!this.restrictions||this.restrictions.length<2){this.restrictionCriteria=this.criteriaOptions[0]}};RestrictionsTableComponent.prototype.removeRestriction=function(e){var t=this.restrictions.findIndex((function(t){return t.uuid===e.uuid}));this.onRemove.emit(t);this.removeUnnecessaryError(t);this.modifyErrorPositions(t)};RestrictionsTableComponent.prototype.removeRestriction.$inject=["restrictionToRemove"];RestrictionsTableComponent.prototype.editRestriction=function(e){this.onEdit.emit(e)};RestrictionsTableComponent.prototype.editRestriction.$inject=["restriction"];RestrictionsTableComponent.prototype.isInError=function(e){var t;return!!((t=this.errors)===null||t===void 0?void 0:t.some((function(t){return t.position===e})))};RestrictionsTableComponent.prototype.isInError.$inject=["index"];RestrictionsTableComponent.prototype.getRestrictionsEditability=function(e){return(e||[]).map((function(e){return e.canBeEdited}))};RestrictionsTableComponent.prototype.getRestrictionsEditability.$inject=["restrictions"];RestrictionsTableComponent.prototype.modifyErrorPositions=function(e){this.errors=this.errors.map((function(t){if(t.position>=e){t.position=t.position-1}return t}))};RestrictionsTableComponent.prototype.modifyErrorPositions.$inject=["removedRestrictionIndex"];RestrictionsTableComponent.prototype.removeUnnecessaryError=function(e){var t=this.errors.findIndex((function(t){return t.position===e}));if(t>-1){this.errors=this.errors.filter((function(e,n){return n!==t}))}};RestrictionsTableComponent.prototype.removeUnnecessaryError.$inject=["removedRestrictionIndex"];RestrictionsTableComponent.prototype.getDefaultActions=function(){var e=this;return[{key:this.EDIT_RESTRICTION_KEY,callback:function(t){return e.editRestriction(t)}},{key:this.REMOVE_RESTRICTION_KEY,callback:function(t){return e.removeRestriction(t)},customCss:"se-dropdown-item__delete"}]};RestrictionsTableComponent.prototype.getRestrictionActions=function(e){var t=this;var n=this.getDefaultActions();if(!e.canBeEdited){return n.filter((function(e){return e.key!==t.EDIT_RESTRICTION_KEY}))}return n};RestrictionsTableComponent.prototype.getRestrictionActions.$inject=["restriction"];RestrictionsTableComponent.prototype.provideActionsForRestrictions=function(){var e=this;(this.restrictions||[]).forEach((function(t){t.actions=e.getRestrictionActions(t)}))};RestrictionsTableComponent.prototype.restrictionsEditabilityChanged=function(e){var t=this.getRestrictionsEditability(e);return!s.isEqual(t,this.oldRestrictionsEditability)};RestrictionsTableComponent.prototype.restrictionsEditabilityChanged.$inject=["restrictions"];__decorate([a.Input(),__metadata("design:type",Array)],RestrictionsTableComponent.prototype,"restrictions",void 0);__decorate([a.Input(),__metadata("design:type",String)],RestrictionsTableComponent.prototype,"customClass",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],RestrictionsTableComponent.prototype,"editable",void 0);__decorate([a.Input(),__metadata("design:type",Object)],RestrictionsTableComponent.prototype,"restrictionCriteria",void 0);__decorate([a.Input(),__metadata("design:type",Array)],RestrictionsTableComponent.prototype,"errors",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsTableComponent.prototype,"onEdit",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsTableComponent.prototype,"onRemove",void 0);RestrictionsTableComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restrictions-table",template:'<div class="se-restriction-table-wrapper se-restriction-table-left" [ngClass]="customClass"><div class="se-restrictions-list fd-menu__list fd-menu__list--separated" *ngIf="restrictions.length > 0"><div id="restriction-{{ index + 1 }}" *ngFor="let restriction of restrictions; let index = index" class="se-restriction__item fd-menu__item"><div class="se-restrictions-list__item-content"><p class="se-restriction__item-name" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.name }}</p><div class="se-restriction__item-type-and-id" [ngClass]="{ \'error-input\': isInError(index) }">{{ restriction.typeCode }}</div><div class="se-restriction__item-description" [ngClass]="{ \'error-input\': isInError(index) }" [title]="restriction.description">{{ restriction.description }}</div><div id="restrictionPartOfWorkflow" *ngIf="!restriction.canBeEdited" translate="se.cms.restrictions.editor.part.of.workflow"></div></div><div *ngIf="editable"><se-dropdown-menu [dropdownItems]="restriction.actions || defaultActions" [selectedItem]="restriction" [placement]="\'bottom-start\'"></se-dropdown-menu></div></div></div><div *ngIf="restrictions.length === 0" class="se-restrictions-list--empty"><span class="se-restrictions-list--empty__message" translate="se.cms.restrictions.emptylist.message"></span></div></div>',styles:[".se-restrictions-list .se-restriction__item{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-top-color:#eeeeef!important;cursor:default}.se-restrictions-list .se-restriction__item:last-child{margin-bottom:42px}.se-restriction__item-name{font-weight:700;color:#32363a;margin:0}.se-restriction__item-type-and-id{color:#51555a;margin-top:0}.se-restriction__item-description{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#6a6d70;width:90%}.se-restrictions-list--empty__message{color:#6a6d70}.error-input.se-restriction__item-description,.error-input.se-restriction__item-name,.error-input.se-restriction__item-type-and-id{color:#b00}"]}),__metadata("design:paramtypes",[tt])],RestrictionsTableComponent);return RestrictionsTableComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionEditorCriteriaSelectItemComponent",{selector:"se-restriction-editor-criteria-select-item",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<span [translate]="data.item.editLabel"></span>'});var it=function(){function RestrictionEditorCriteriaSelectItemComponent(e){this.data=e}RestrictionEditorCriteriaSelectItemComponent=__decorate([a.Component({selector:"se-restriction-editor-criteria-select-item",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<span [translate]="data.item.editLabel"></span>'}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],RestrictionEditorCriteriaSelectItemComponent);return RestrictionEditorCriteriaSelectItemComponent}();var ot="se-item-management-editor";window.__smartedit__.addDecoratorPayload("Component","RestrictionsEditorComponent",{selector:"se-restrictions-editor",template:'<div class="se-restrictions-container"><div class="se-restrictions-container__header" [ngClass]="{ \'se-restrictions-container__header--empty\': restrictions.length === 0 }"><label class="se-restrictions__sub-header" translate="se.cms.restrictions.list.title"></label><div class="se-restrictions-container__header--right"><div *ngIf="restrictions.length > 1"><div *ngIf="editable"><se-select id="criteria-type" [fetchStrategy]="criteriaFetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restrictions.picker.type.placeholder\'" [model]="criteria.id" (modelChange)="matchCriteriaChanged($event)" [searchEnabled]="false"></se-select></div><div *ngIf="!editable">{{ \'se.cms.restrictions.criteria\' | translate }} {{ criteria.label | translate }}</div></div><button class="cms-clean-btn se-restriction__clear-all__btn fd-button--light fd-button--compact" *ngIf="showRemoveAllButton()" (click)="removeAllRestrictions()" translate="se.cms.restrictions.list.clear.all"></button> <button *ngIf="!showRestrictionPicker" type="button" class="se-restrictions__add-restriction-btn fd-button--compact" [disabled]="!editable" (click)="onAddRestriction()"><span translate="se.cms.restrictions.editor.button.add.new"></span></button></div></div><se-slider-panel [sliderPanelConfiguration]="sliderPanelConfiguration" [(sliderPanelHide)]="sliderPanelHide" [(sliderPanelShow)]="sliderPanelShow" (isShownChange)="onSliderVisibilityChange($event)" class="se-add-restriction-panel"><se-restriction-management *ngIf="isSliderVisible" class="se-se-add-restriction-panel__restriction-management" [config]="restrictionManagement.config" [uriContext]="restrictionManagement.uriContext" [(submitFn)]="restrictionManagement.submitFn" [(isDirtyFn)]="restrictionManagement.isDirtyFn"></se-restriction-management></se-slider-panel><div *ngIf="errors.length > 0"><span class="se-help-block--has-error help-block fd-form__message fd-form__message--error" *ngFor="let error of errors" [translate]="error.message"></span></div><se-restrictions-table *ngIf="isRestrictionsReady" [editable]="editable" [restrictions]="restrictions" [restrictionCriteria]="criteria" [errors]="errors" [customClass]="\'ySERestrictionListLink\'" (onEdit)="onEditRestriction($event)" (onRemove)="onRemoveRestriction($event)"></se-restrictions-table></div>',styles:[".se-restrictions-container__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;padding-bottom:12px}.se-restrictions-container__header--right{display:flex;flex-direction:row;align-items:center}.se-restrictions-container__header--right>div,.se-restrictions-container__header--right>span{margin-left:12px}.se-restrictions-container__header--empty{border-bottom:none}.se-restrictions__sub-header{font-weight:700;align-self:flex-start;color:#51555a;margin:0}.se-restriction__clear-all__btn{text-transform:capitalize}"]});var rt=function(){RestrictionsEditorComponent.$inject=["logService","systemEventService","restrictionPickerConfigService","pageRestrictionsCriteriaService","contextAwareEditableItemService","cmsitemsRestService","cdr"];function RestrictionsEditorComponent(e,t,n,i,o,r,s){this.logService=e;this.systemEventService=t;this.restrictionPickerConfigService=n;this.pageRestrictionsCriteriaService=i;this.contextAwareEditableItemService=o;this.cmsitemsRestService=r;this.cdr=s;this.cancelFnChange=new a.EventEmitter;this.isDirtyFnChange=new a.EventEmitter;this.onRestrictionsChange=new a.EventEmitter;this.resetFnChange=new a.EventEmitter;this.errors=[];this.restrictions=[];this.originalRestrictions=[];this.restrictionUuids=[];this.isRestrictionsReady=false;this.restrictionsArrayIsDirty=false;this.showRestrictionPicker=false;this.disableAddButton=false;this.criteriaOptions=[];this.criteria={};this.itemComponent=it;this.matchCriteriaIsDirty=false}RestrictionsEditorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:this.restrictionUuids=this.restrictionUuids||[];return[4,this.cmsitemsRestService.getByIdsNoCache(this.restrictionUuids,"FULL")];case 1:e=i.sent();t=2;this.restrictions=e.response?e.response:[e];this.criteriaFetchStrategy={fetchAll:function(){return Promise.resolve(n.criteriaOptions)}};this.prepareRestrictionsCriteria();return[4,this.setupResults()];case 2:i.sent();this.sliderPanelConfiguration={modal:{showDismissButton:true,title:"",dismiss:{label:"se.cms.restriction.management.panel.button.cancel",onClick:function(){n.sliderPanelHide()},isDisabledFn:function(){return false}},save:{onClick:function(){},label:"",isDisabledFn:function(){return false}}},cssSelector:"#y-modal-dialog"};this.restrictionManagement={uriContext:this.item.uriContext,submitFn:null,isDirtyFn:null,config:null};this.isDirtyFnChange.emit((function(){return n.restrictionsArrayIsDirty||n.matchCriteriaIsDirty&&n.restrictionUuids.length>=t}));this.resetFnChange.emit((function(){return true}));this.cancelFnChange.emit((function(){return Promise.resolve(true)}));this.initEvents();this.cdr.detectChanges();return[2]}}))}))};RestrictionsEditorComponent.prototype.ngOnDestroy=function(){this.clearEvents()};RestrictionsEditorComponent.prototype.ngOnChanges=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){if(!e.restrictionUuids){return[2,Promise.resolve()]}this.restrictionsArrayIsDirty=!e.restrictionUuids.firstChange&&JSON.stringify(this.originalRestrictions)!==JSON.stringify(this.restrictions);t=!s.isEqual(e.restrictionUuids.previousValue,e.restrictionUuids.currentValue);if(t){this.indexRestrictions()}return[2,this.applyIsRestrictionEditable()]}))}))};RestrictionsEditorComponent.prototype.ngOnChanges.$inject=["changes"];RestrictionsEditorComponent.prototype.onAddRestriction=function(){this.setSliderConfigForAddOrCreate();this.restrictionManagement.config=this.restrictionPickerConfigService.getConfigForSelecting(__spreadArrays(this.restrictions),this.getRestrictionTypes,this.getSupportedRestrictionTypes);this.sliderPanelShow()};RestrictionsEditorComponent.prototype.onEditRestriction=function(e){this.setSliderConfigForEditing();this.restrictionManagement.config=this.restrictionPickerConfigService.getConfigForEditing(__assign({},e),this.getSupportedRestrictionTypes);this.sliderPanelShow()};RestrictionsEditorComponent.prototype.onEditRestriction.$inject=["restriction"];RestrictionsEditorComponent.prototype.onRemoveRestriction=function(e){this.restrictions=this.restrictions.filter((function(t,n){return n!==e}));this.updateRestrictionsData()};RestrictionsEditorComponent.prototype.onRemoveRestriction.$inject=["restrictionIndex"];RestrictionsEditorComponent.prototype.removeAllRestrictions=function(){this.restrictions=[];if(this.removeValidationMessages){this.removeValidationMessages()}this.updateRestrictionsData()};RestrictionsEditorComponent.prototype.showRemoveAllButton=function(){return this.restrictionUuids.length>0&&this.editable};RestrictionsEditorComponent.prototype.matchCriteriaChanged=function(e){this.criteria=this.criteriaOptions.find((function(t){return t.id===e}));this.matchCriteriaIsDirty=this.criteria!==this.originalCriteria;this.updateRestrictionsData()};RestrictionsEditorComponent.prototype.matchCriteriaChanged.$inject=["selectedCriteriaId"];RestrictionsEditorComponent.prototype.onSliderVisibilityChange=function(e){this.isSliderVisible=e};RestrictionsEditorComponent.prototype.onSliderVisibilityChange.$inject=["isVisible"];RestrictionsEditorComponent.prototype.setupResults=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.indexRestrictions();this.originalRestrictions=this.cloneRestrictions(this.restrictions);this.updateRestrictionsData();return[4,this.applyIsRestrictionEditable()];case 1:e.sent();this.isRestrictionsReady=true;return[2]}}))}))};RestrictionsEditorComponent.prototype.updateRestrictionsData=function(e){if(e===void 0){e=false}this.onRestrictionsChange.emit({onlyOneRestrictionMustApply:this.criteria.value,restrictionUuids:this.restrictions.map((function(e){return e.uuid})),alwaysEnableSubmit:e})};RestrictionsEditorComponent.prototype.updateRestrictionsData.$inject=["alwaysEnableSubmit"];RestrictionsEditorComponent.prototype.prepareRestrictionsCriteria=function(){this.criteriaOptions=this.pageRestrictionsCriteriaService.getRestrictionCriteriaOptions();if(!!this.item.onlyOneRestrictionMustApply){this.criteria=this.criteriaOptions[1];this.originalCriteria=this.criteriaOptions[1]}else{this.criteria=this.criteriaOptions[0];this.originalCriteria=this.criteriaOptions[0]}};RestrictionsEditorComponent.prototype.isRestrictionRelatedError=function(e){return s.includes(e.subject,"restrictions")};RestrictionsEditorComponent.prototype.isRestrictionRelatedError.$inject=["validationError"];RestrictionsEditorComponent.prototype.formatRestrictionRelatedError=function(e){var t=s.clone(e);if(!r.stringUtils.isBlank(t.position)){t.position=parseInt(t.position,10)}if(!r.stringUtils.isBlank(t.subject)){t.subject=t.subject.split(".").pop()}return t};RestrictionsEditorComponent.prototype.formatRestrictionRelatedError.$inject=["validationError"];RestrictionsEditorComponent.prototype.handleUnrelatedValidationErrors=function(e){var t=this;this.errors=e.messages.filter((function(e){return t.isRestrictionRelatedError(e)})).map((function(e){return t.formatRestrictionRelatedError(e)}))};RestrictionsEditorComponent.prototype.handleUnrelatedValidationErrors.$inject=["validationData"];RestrictionsEditorComponent.prototype.propagateErrors=function(e){var t;return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:n=((t=this.restrictionManagement.config)===null||t===void 0?void 0:t.mode)===this.restrictionPickerConfigService.MODE_EDITING&&e===ot;if(!n){return[2]}i=this.restrictionManagement.config.restriction.restrictionIndex;o=this.errors.filter((function(e){return e.position===i}));this.clearEvents();return[4,this.systemEventService.publishAsync(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:o,targetGenericEditorId:e})];case 1:a.sent();this.initEvents();return[2]}}))}))};RestrictionsEditorComponent.prototype.propagateErrors.$inject=["genericEditorId"];RestrictionsEditorComponent.prototype.indexRestrictions=function(){this.restrictions=(this.restrictions||[]).map((function(e,t){return __assign(__assign({},e),{restrictionIndex:t})}))};RestrictionsEditorComponent.prototype.cloneRestrictions=function(e){return s.cloneDeep(e)};RestrictionsEditorComponent.prototype.cloneRestrictions.$inject=["restrictions"];RestrictionsEditorComponent.prototype.initEvents=function(){var e=this;this.unregisterErrorListener=this.systemEventService.subscribe(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,(function(t,n){return e.handleUnrelatedValidationErrors(n)}));this.unregisterErrorPropagationEvent=this.systemEventService.subscribe(r.GENERIC_EDITOR_LOADED_EVENT,(function(t,n){return e.propagateErrors(n)}))};RestrictionsEditorComponent.prototype.clearEvents=function(){this.unregisterErrorListener();this.unregisterErrorPropagationEvent()};RestrictionsEditorComponent.prototype.applyIsRestrictionEditable=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:e=this;return[4,Promise.all(this.restrictions.map((function(e){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!e.uid)return[3,2];t=e;return[4,this.contextAwareEditableItemService.isItemEditable(e.uid)];case 1:t.canBeEdited=n.sent();return[2,e];case 2:e.canBeEdited=true;return[2,e]}}))}))})))];case 1:e.restrictions=n.sent();return[2]}}))}))};RestrictionsEditorComponent.prototype.setSliderConfigForAddOrCreate=function(){var e=this;this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.add";this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.add";this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){if(e.disableAddButton){return true}if(e.restrictionManagement.isDirtyFn){return!e.restrictionManagement.isDirtyFn()}return true};this.sliderPanelConfiguration.modal.save.onClick=function(){return __awaiter(e,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);this.disableAddButton=true;return[4,this.restrictionManagement.submitFn()];case 1:e=n.sent();this.disableAddButton=false;this.restrictions=this.restrictions.concat(e);this.updateRestrictionsData();this.sliderPanelHide();return[3,3];case 2:t=n.sent();this.disableAddButton=false;this.logService.warn("RestrictionsEditorComponent.setSliderConfigForAddOrCreate - Failed to create restriction");return[3,3];case 3:return[2]}}))}))}};RestrictionsEditorComponent.prototype.setSliderConfigForEditing=function(){var e=this;this.sliderPanelConfiguration.modal.title="se.cms.restriction.management.panel.title.edit";this.sliderPanelConfiguration.modal.save.label="se.cms.restriction.management.panel.button.save";this.sliderPanelConfiguration.modal.save.isDisabledFn=function(){if(e.restrictionManagement.isDirtyFn){return!e.restrictionManagement.isDirtyFn()}return true};this.sliderPanelConfiguration.modal.save.onClick=function(){return __awaiter(e,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.restrictionManagement.submitFn()];case 1:e=i.sent();if(this.restrictionManagement.config){t=this.restrictionManagement.config.restriction;e.restrictionIndex=t.restrictionIndex}n=e.restrictionIndex;if(n!==-1){this.restrictions=this.restrictions.map((function(t,i){if(i===n){return e}return t}))}else{throw new Error("RestrictionsEditorComponent - edited restriction not found in list: "+e)}this.updateRestrictionsData(true);this.sliderPanelHide();return[2]}}))}))}};__decorate([a.Input(),__metadata("design:type",Object)],RestrictionsEditorComponent.prototype,"item",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],RestrictionsEditorComponent.prototype,"editable",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"resetFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"cancelFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"isDirtyFn",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"getRestrictionTypes",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"getSupportedRestrictionTypes",void 0);__decorate([a.Input(),__metadata("design:type",Function)],RestrictionsEditorComponent.prototype,"removeValidationMessages",void 0);__decorate([a.Input(),__metadata("design:type",Array)],RestrictionsEditorComponent.prototype,"restrictionUuids",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsEditorComponent.prototype,"onRestrictionsChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsEditorComponent.prototype,"resetFnChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsEditorComponent.prototype,"cancelFnChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],RestrictionsEditorComponent.prototype,"isDirtyFnChange",void 0);RestrictionsEditorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restrictions-editor",template:'<div class="se-restrictions-container"><div class="se-restrictions-container__header" [ngClass]="{ \'se-restrictions-container__header--empty\': restrictions.length === 0 }"><label class="se-restrictions__sub-header" translate="se.cms.restrictions.list.title"></label><div class="se-restrictions-container__header--right"><div *ngIf="restrictions.length > 1"><div *ngIf="editable"><se-select id="criteria-type" [fetchStrategy]="criteriaFetchStrategy" [itemComponent]="itemComponent" [placeholder]="\'se.cms.restrictions.picker.type.placeholder\'" [model]="criteria.id" (modelChange)="matchCriteriaChanged($event)" [searchEnabled]="false"></se-select></div><div *ngIf="!editable">{{ \'se.cms.restrictions.criteria\' | translate }} {{ criteria.label | translate }}</div></div><button class="cms-clean-btn se-restriction__clear-all__btn fd-button--light fd-button--compact" *ngIf="showRemoveAllButton()" (click)="removeAllRestrictions()" translate="se.cms.restrictions.list.clear.all"></button> <button *ngIf="!showRestrictionPicker" type="button" class="se-restrictions__add-restriction-btn fd-button--compact" [disabled]="!editable" (click)="onAddRestriction()"><span translate="se.cms.restrictions.editor.button.add.new"></span></button></div></div><se-slider-panel [sliderPanelConfiguration]="sliderPanelConfiguration" [(sliderPanelHide)]="sliderPanelHide" [(sliderPanelShow)]="sliderPanelShow" (isShownChange)="onSliderVisibilityChange($event)" class="se-add-restriction-panel"><se-restriction-management *ngIf="isSliderVisible" class="se-se-add-restriction-panel__restriction-management" [config]="restrictionManagement.config" [uriContext]="restrictionManagement.uriContext" [(submitFn)]="restrictionManagement.submitFn" [(isDirtyFn)]="restrictionManagement.isDirtyFn"></se-restriction-management></se-slider-panel><div *ngIf="errors.length > 0"><span class="se-help-block--has-error help-block fd-form__message fd-form__message--error" *ngFor="let error of errors" [translate]="error.message"></span></div><se-restrictions-table *ngIf="isRestrictionsReady" [editable]="editable" [restrictions]="restrictions" [restrictionCriteria]="criteria" [errors]="errors" [customClass]="\'ySERestrictionListLink\'" (onEdit)="onEditRestriction($event)" (onRemove)="onRemoveRestriction($event)"></se-restrictions-table></div>',styles:[".se-restrictions-container__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;padding-bottom:12px}.se-restrictions-container__header--right{display:flex;flex-direction:row;align-items:center}.se-restrictions-container__header--right>div,.se-restrictions-container__header--right>span{margin-left:12px}.se-restrictions-container__header--empty{border-bottom:none}.se-restrictions__sub-header{font-weight:700;align-self:flex-start;color:#51555a;margin:0}.se-restriction__clear-all__btn{text-transform:capitalize}"]}),__metadata("design:paramtypes",[r.LogService,r.SystemEventService,Xe,tt,o.IContextAwareEditableItemService,o.CmsitemsRestService,a.ChangeDetectorRef])],RestrictionsEditorComponent);return RestrictionsEditorComponent}();var at=function(){function RestrictionsModule(){}RestrictionsModule=__decorate([a.NgModule({imports:[g.CommonModule,d.TranslateModule.forChild(),r.SeGenericEditorModule,r.MessageModule,r.SelectModule,r.L10nPipeModule,r.DropdownMenuModule,r.SliderPanelModule],providers:[Xe,Ye],declarations:[Qe,qe,et,Je,Ze,nt,rt,it],entryComponents:[Qe,qe,et,Je,Ze,nt,rt,it],exports:[rt]})],RestrictionsModule);return RestrictionsModule}();window.__smartedit__.addDecoratorPayload("Component","PageRestrictionsEditorComponent",{selector:"se-page-restrictions-editor",template:'<se-page-restrictions-info-message *ngIf="page.restrictions?.length > 1"></se-page-restrictions-info-message><se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="page" [restrictionUuids]="page.restrictions" [removeValidationMessages]="onRemoveValidationMessages" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>'});var st=function(){PageRestrictionsEditorComponent.$inject=["data","restrictionsService","restrictionTypesService"];function PageRestrictionsEditorComponent(e,t,n){this.data=e;this.restrictionsService=t;this.restrictionTypesService=n;this.editor=e.editor,this.page=e.model;this.isEditable=!e.isFieldDisabled()}PageRestrictionsEditorComponent.prototype.ngOnInit=function(){this.initGetRestrictionTypes();this.initSupportedRestrictionTypes();this.initOnRemoveValidationMessages()};PageRestrictionsEditorComponent.prototype.onRestrictionsChange=function(e){var t=e.onlyOneRestrictionMustApply,n=e.restrictionUuids,i=e.alwaysEnableSubmit;this.page.onlyOneRestrictionMustApply=t;this.page.restrictions=n};PageRestrictionsEditorComponent.prototype.onRestrictionsChange.$inject=["_a"];PageRestrictionsEditorComponent.prototype.initGetRestrictionTypes=function(){var e=this;this.getRestrictionTypes=function(){return e.restrictionTypesService.getRestrictionTypesByPageType(e.page.typeCode)}};PageRestrictionsEditorComponent.prototype.initSupportedRestrictionTypes=function(){var e=this;this.getSupportedRestrictionTypes=function(){return e.restrictionsService.getSupportedRestrictionTypeCodes()}};PageRestrictionsEditorComponent.prototype.initOnRemoveValidationMessages=function(){var e=this;this.onRemoveValidationMessages=function(){return e.editor.api.clearMessages()}};PageRestrictionsEditorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-restrictions-editor",template:'<se-page-restrictions-info-message *ngIf="page.restrictions?.length > 1"></se-page-restrictions-info-message><se-restrictions-editor [editable]="isEditable" [getRestrictionTypes]="getRestrictionTypes" [getSupportedRestrictionTypes]="getSupportedRestrictionTypes" [item]="page" [restrictionUuids]="page.restrictions" [removeValidationMessages]="onRemoveValidationMessages" (onRestrictionsChange)="onRestrictionsChange($event)"></se-restrictions-editor>'}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,Ge,Ue])],PageRestrictionsEditorComponent);return PageRestrictionsEditorComponent}();window.__smartedit__.addDecoratorPayload("Component","PageRestrictionsInfoMessageComponent",{selector:"se-page-restrictions-info-message",template:"<se-message [type]=\"'info'\" class=\"se-restrictions-info__message\"><ng-container se-message-title>{{ 'se.cms.restrictions.editor.ymessage.title' | translate }}</ng-container><ng-container se-message-description>{{ 'se.cms.restrictions.editor.ymessage.description' | translate }}</ng-container></se-message>",styles:[".se-restrictions-info__message{margin-bottom:10px;display:block}"]});var ct=function(){function PageRestrictionsInfoMessageComponent(){}PageRestrictionsInfoMessageComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-restrictions-info-message",template:"<se-message [type]=\"'info'\" class=\"se-restrictions-info__message\"><ng-container se-message-title>{{ 'se.cms.restrictions.editor.ymessage.title' | translate }}</ng-container><ng-container se-message-description>{{ 'se.cms.restrictions.editor.ymessage.description' | translate }}</ng-container></se-message>",styles:[".se-restrictions-info__message{margin-bottom:10px;display:block}"]})],PageRestrictionsInfoMessageComponent);return PageRestrictionsInfoMessageComponent}();var lt=function(){function PageRestrictionsModule(){}PageRestrictionsModule=__decorate([a.NgModule({imports:[g.CommonModule,r.MessageModule,at,r.TranslationModule.forChild()],declarations:[st,ct],entryComponents:[st,ct],exports:[at,ct]})],PageRestrictionsModule);return PageRestrictionsModule}();window.__smartedit__.addDecoratorPayload("Component","ItemSelectorPanelComponent",{selector:"se-item-selector-panel",template:'<se-slider-panel [sliderPanelConfiguration]="panelConfig" [(sliderPanelHide)]="hidePanel" [(sliderPanelShow)]="showPanel" class="se-item-selector-panel"><div class="se-item-selector-panel__content" *ngIf="catalogs.length > 0"><div *ngIf="catalogs.length > 1" class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogs.label"></label><se-select id="se-catalog-selector-dropdown" class="se-item-selector-panel__content__catalogs__yselect" [(model)]="catalogInfo.catalogId" [fetchStrategy]="catalogSelectorFetchStrategy" [onChange]="onCatalogSelectorChange"></se-select><label>{{ catalogInfo.name | seL10n | async }}</label></div><div class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogsversion.label"></label><se-select id="se-catalog-version-selector-dropdown" class="se-item-selector-panel__content__catalog-version__yselect" [(model)]="catalogInfo.catalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onCatalogVersionSelectorChange" [searchEnabled]="false" [(reset)]="resetCatalogVersionSelector"></se-select></div><div class="se-item-selector-panel__content__item" *ngIf="catalogInfo.catalogVersion"><label class="se-control-label">{{ catalogItemTypeI18nKey }}</label><se-select id="se-items-selector-dropdown" [multiSelect]="true" [controls]="true" [(model)]="internalItemsSelected" [onChange]="onItemsSelectorChange" [fetchStrategy]="itemsSelectorFetchStrategy" [(reset)]="resetItemsListSelector" [itemComponent]="itemComponent" [isReadOnly]="!isItemSelectorEnabled()"></se-select></div></div></se-slider-panel>'});var dt=function(){function ItemSelectorPanelComponent(){this.onChange=new a.EventEmitter;this.showPanelChange=new a.EventEmitter;this.maxNumItems=0;this.catalogs=[];this.catalogInfo={};this.saveButtonDisabled=true;this.internalItemsSelected=[];this.initOnCatalogSelectorChange();this.initOnCatalogVersionSelectorChange();this.initOnItemsSelectorChange()}ItemSelectorPanelComponent.prototype.ngOnInit=function(){var e=this;this.panelConfig={cssSelector:"#y-modal-dialog",noGreyedOutOverlay:true,modal:{title:this.catalogItemTypeI18nKey,showDismissButton:false,cancel:{onClick:function(){return e.cancel()},label:"se.cms.catalogaware.panel.button.cancel",isDisabledFn:function(){return false}},save:{onClick:function(){return e.saveChanges()},label:"se.cms.catalogaware.panel.button.add",isDisabledFn:function(){return e.isSaveButtonDisabled()}}}};this.showPanelChange.emit((function(){return e.initAndShowPanel()}));return this.initCatalogs()};ItemSelectorPanelComponent.prototype.isItemSelectorEnabled=function(){return this.catalogInfo&&!!this.catalogInfo.catalogId&&!!this.catalogInfo.catalogVersion};ItemSelectorPanelComponent.prototype.initOnCatalogSelectorChange=function(){var e=this;this.onCatalogSelectorChange=function(){if(e.resetCatalogVersionSelector){e.resetCatalogVersionSelector()}}};ItemSelectorPanelComponent.prototype.initOnCatalogVersionSelectorChange=function(){var e=this;this.onCatalogVersionSelectorChange=function(){if(e.catalogInfo.catalogId&&e.catalogInfo.catalogVersion){if(e.resetItemsListSelector){e.resetItemsListSelector()}}}};ItemSelectorPanelComponent.prototype.initOnItemsSelectorChange=function(){var e=this;this.onItemsSelectorChange=function(){if(e.isItemSelectorEnabled()){e.saveButtonDisabled=false}}};ItemSelectorPanelComponent.prototype.initCatalogs=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.getCatalogs()];case 1:e.catalogs=t.sent();if(this.catalogs.length===1){this.catalogInfo.catalogId=this.catalogs[0].id}this.initCatalogSelector();this.initCatalogVersionSelector();this.initItemsSelector();return[2]}}))}))};ItemSelectorPanelComponent.prototype.initCatalogSelector=function(){var e=this;this.catalogSelectorFetchStrategy={fetchAll:function(){return Promise.resolve(e.catalogs)}}};ItemSelectorPanelComponent.prototype.initCatalogVersionSelector=function(){var e=this;this.catalogVersionSelectorFetchStrategy={fetchAll:function(){var t=[];if(e.catalogInfo.catalogId){var n=e.catalogs.find((function(t){var n=t.id;return n===e.catalogInfo.catalogId}));t=n.versions.slice(0)}return Promise.resolve(t)}}};ItemSelectorPanelComponent.prototype.initItemsSelector=function(){var e=this;this.itemsSelectorFetchStrategy={fetchPage:function(t,n,i){return e.itemsFetchPageAndFilter(t,n,i)},fetchEntity:function(t){return e.itemsFetchStrategy.fetchEntity(t)}}};ItemSelectorPanelComponent.prototype.initAndShowPanel=function(){this.catalogInfo={};this.initCatalogs();this.internalItemsSelected=this.defaultItemsSelected?s.clone(this.defaultItemsSelected):[];this.showPanel()};ItemSelectorPanelComponent.prototype.itemsFetchPageAndFilter=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.itemsFetchStrategy.fetchPage(this.catalogInfo,e,t,n)];case 1:i=o.sent();return[2,this.limitToNonSelectedItems(i)]}}))}))};ItemSelectorPanelComponent.prototype.itemsFetchPageAndFilter.$inject=["mask","pageSize","currentPage"];ItemSelectorPanelComponent.prototype.limitToNonSelectedItems=function(e){var t=e.results.length;while(t--){var n=e.results[t];if(this.internalItemsSelected.includes(n.uid)){e.results.splice(t,1);e.pagination.count--}}return e};ItemSelectorPanelComponent.prototype.limitToNonSelectedItems.$inject=["page"];ItemSelectorPanelComponent.prototype.isSaveButtonDisabled=function(){return this.saveButtonDisabled};ItemSelectorPanelComponent.prototype.cancel=function(){this.catalogInfo={};this.hidePanel()};ItemSelectorPanelComponent.prototype.saveChanges=function(){var e;(e=this.defaultItemsSelected).splice.apply(e,__spreadArrays([0,this.defaultItemsSelected.length],this.internalItemsSelected));this.onChange.emit();this.hidePanel()};__decorate([a.Input(),__metadata("design:type",Array)],ItemSelectorPanelComponent.prototype,"defaultItemsSelected",void 0);__decorate([a.Input(),__metadata("design:type",a.Type)],ItemSelectorPanelComponent.prototype,"itemComponent",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ItemSelectorPanelComponent.prototype,"getCatalogs",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ItemSelectorPanelComponent.prototype,"itemsFetchStrategy",void 0);__decorate([a.Input(),__metadata("design:type",String)],ItemSelectorPanelComponent.prototype,"catalogItemTypeI18nKey",void 0);__decorate([a.Input(),__metadata("design:type",Number)],ItemSelectorPanelComponent.prototype,"maxNumItems",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ItemSelectorPanelComponent.prototype,"onChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ItemSelectorPanelComponent.prototype,"showPanelChange",void 0);ItemSelectorPanelComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-item-selector-panel",template:'<se-slider-panel [sliderPanelConfiguration]="panelConfig" [(sliderPanelHide)]="hidePanel" [(sliderPanelShow)]="showPanel" class="se-item-selector-panel"><div class="se-item-selector-panel__content" *ngIf="catalogs.length > 0"><div *ngIf="catalogs.length > 1" class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogs.label"></label><se-select id="se-catalog-selector-dropdown" class="se-item-selector-panel__content__catalogs__yselect" [(model)]="catalogInfo.catalogId" [fetchStrategy]="catalogSelectorFetchStrategy" [onChange]="onCatalogSelectorChange"></se-select><label>{{ catalogInfo.name | seL10n | async }}</label></div><div class="se-item-selector-panel__content__item"><label class="se-control-label" translate="se.cms.catalogaware.panel.catalogsversion.label"></label><se-select id="se-catalog-version-selector-dropdown" class="se-item-selector-panel__content__catalog-version__yselect" [(model)]="catalogInfo.catalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onCatalogVersionSelectorChange" [searchEnabled]="false" [(reset)]="resetCatalogVersionSelector"></se-select></div><div class="se-item-selector-panel__content__item" *ngIf="catalogInfo.catalogVersion"><label class="se-control-label">{{ catalogItemTypeI18nKey }}</label><se-select id="se-items-selector-dropdown" [multiSelect]="true" [controls]="true" [(model)]="internalItemsSelected" [onChange]="onItemsSelectorChange" [fetchStrategy]="itemsSelectorFetchStrategy" [(reset)]="resetItemsListSelector" [itemComponent]="itemComponent" [isReadOnly]="!isItemSelectorEnabled()"></se-select></div></div></se-slider-panel>'}),__metadata("design:paramtypes",[])],ItemSelectorPanelComponent);return ItemSelectorPanelComponent}();var pt=function(){function CatalogModule(){}CatalogModule=__decorate([a.NgModule({imports:[g.CommonModule,h.FormsModule,r.DropdownMenuModule,r.SliderPanelModule,r.SelectModule,d.TranslateModule.forChild(),r.L10nPipeModule],providers:[A],declarations:[dt,b,O,I,R],entryComponents:[dt,b,O,I,R]})],CatalogModule);return CatalogModule}();var ut;(function(e){e["content"]="content";e["product"]="product";e["category"]="category";e["external"]="external"})(ut||(ut={}));var mt=[{id:ut.content,structureApiMode:"CONTENT"},{id:ut.product,structureApiMode:"PRODUCT",hasCatalog:true},{id:ut.category,structureApiMode:"CATEGORY",hasCatalog:true},{id:ut.external,structureApiMode:"EXTERNAL"}];window.__smartedit__.addDecoratorPayload("Component","CmsLinkToSelectComponent",{selector:"se-cms-link-to-select",template:'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="qualifier" [model]="optionModel"></se-generic-editor-dropdown>',changeDetection:a.ChangeDetectionStrategy.OnPush});var gt=function(){function CmsLinkToSelectComponent(e,t,n){this.cdr=e;this.systemEventService=t;this.id=n.id,this.field=n.field,this.optionModel=n.model,this.qualifier=n.qualifier}CmsLinkToSelectComponent.prototype.ngOnInit=function(){var e=this;var t=this.getLinkToValue(this.optionModel);if(t!==null){this.optionModel.linkTo=t}var n=""+this.id+r.LINKED_DROPDOWN;this.unRegSelectValueChanged=this.systemEventService.subscribe(n,(function(t,n){return e.onLinkToSelectValueChanged(n)}))};CmsLinkToSelectComponent.prototype.ngOnDestroy=function(){this.unRegSelectValueChanged()};CmsLinkToSelectComponent.prototype.onLinkToSelectValueChanged=function(e){var t=e.optionObject,n=e.qualifier;if(this.qualifier!==n){return}if(!t){return}var i=t.id;var o=mt.find((function(e){var t=e.id;return t===i}));if(!o){throw new Error("Selected option is not supported")}if(i===this.optionModel.currentSelectedOptionValue){return}this.optionModel.currentSelectedOptionValue=i;this.optionModel.external=i!==ut.external;this.clearModel(o);this.systemEventService.publishAsync(Y,{content:this.optionModel,structureApiMode:o.structureApiMode,editorId:this.id});this.cdr.detectChanges()};CmsLinkToSelectComponent.prototype.getLinkToValue=function(e){if(e.url){return ut.external}else if(e.product){return ut.product}else if(e.contentPage){return ut.content}else if(e.category){return ut.category}return null};CmsLinkToSelectComponent.prototype.clearModel=function(e){var t=e.id,n=e.hasCatalog;if(t!==ut.category){delete this.optionModel.category}if(t!==ut.product){delete this.optionModel.product}if(!n){delete this.optionModel.productCatalog}if(t!==ut.content){delete this.optionModel.contentPage}if(t!==ut.external){delete this.optionModel.url}};CmsLinkToSelectComponent=__decorate([a.Component({selector:"se-cms-link-to-select",template:'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="qualifier" [model]="optionModel"></se-generic-editor-dropdown>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(2,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[a.ChangeDetectorRef,r.SystemEventService,Object])],CmsLinkToSelectComponent);return CmsLinkToSelectComponent}();var ht=function(e){__extends(ProductDropdownPopulator,e);ProductDropdownPopulator.$inject=["contextAwareCatalogService","languageService","translateService","uriDropdownPopulator"];function ProductDropdownPopulator(t,n,i,o){var r=e.call(this,s,n,i)||this;r.contextAwareCatalogService=t;r.uriDropdownPopulator=o;return r}ProductDropdownPopulator.prototype.fetchPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.contextAwareCatalogService.getProductSearchUri(e.model.productCatalog)];case 1:t=n.sent();e.field.uri=t;return[2,this.uriDropdownPopulator.fetchPage(e)]}}))}))};ProductDropdownPopulator.prototype.fetchPage.$inject=["payload"];ProductDropdownPopulator.prototype.isPaged=function(){return true};ProductDropdownPopulator.prototype.getItem=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.contextAwareCatalogService.getProductItemUri()];case 1:t=n.sent();e.field.uri=t;return[2,this.uriDropdownPopulator.getItem(e)]}}))}))};ProductDropdownPopulator.prototype.getItem.$inject=["payload"];ProductDropdownPopulator=__decorate([a.Injectable(),__metadata("design:paramtypes",[pe,r.LanguageService,d.TranslateService,r.UriDropdownPopulator])],ProductDropdownPopulator);return ProductDropdownPopulator}(r.DropdownPopulatorInterface);var vt=function(e){__extends(ProductCatalogDropdownPopulator,e);ProductCatalogDropdownPopulator.$inject=["catalogService","languageService","optionsDropdownPopulator","translateService"];function ProductCatalogDropdownPopulator(t,n,i,o){var r=e.call(this,s,n,o)||this;r.catalogService=t;r.optionsDropdownPopulator=i;return r}ProductCatalogDropdownPopulator.prototype.fetchAll=function(e){return __awaiter(this,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.getProductCatalogsBySiteKey(r.CONTEXT_SITE_ID)];case 1:t=i.sent();e.field.options=t.filter((function(e){return n.hasCatalogOneActiveVersion(e)}));return[2,this.optionsDropdownPopulator.fetchAll(e)]}}))}))};ProductCatalogDropdownPopulator.prototype.fetchAll.$inject=["payload"];ProductCatalogDropdownPopulator.prototype.isPaged=function(){return false};ProductCatalogDropdownPopulator.prototype.hasCatalogOneActiveVersion=function(e){var t=e.versions.filter((function(e){return e.active===true}));return t.length===1};ProductCatalogDropdownPopulator.prototype.hasCatalogOneActiveVersion.$inject=["catalog"];ProductCatalogDropdownPopulator=__decorate([a.Injectable(),__metadata("design:paramtypes",[r.ICatalogService,r.LanguageService,r.OptionsDropdownPopulator,d.TranslateService])],ProductCatalogDropdownPopulator);return ProductCatalogDropdownPopulator}(r.DropdownPopulatorInterface);var ft=function(e){__extends(CategoryDropdownPopulator,e);CategoryDropdownPopulator.$inject=["contextAwareCatalogService","languageService","translateService","uriDropdownPopulator"];function CategoryDropdownPopulator(t,n,i,o){var r=e.call(this,s,n,i)||this;r.contextAwareCatalogService=t;r.uriDropdownPopulator=o;return r}CategoryDropdownPopulator.prototype.fetchPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(e.model.productCatalog===undefined){throw new Error('"productCatalog" is required but it was not provided.')}return[4,this.contextAwareCatalogService.getProductCategorySearchUri(e.model.productCatalog)];case 1:t=i.sent();e.field.uri=t;return[4,this.languageService.getResolveLocale()];case 2:n=i.sent();e.field.params.langIsoCode=n;return[2,this.uriDropdownPopulator.fetchPage(e)]}}))}))};CategoryDropdownPopulator.prototype.fetchPage.$inject=["payload"];CategoryDropdownPopulator.prototype.getItem=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.contextAwareCatalogService.getProductCategoryItemUri()];case 1:t=n.sent();e.field.uri=t;return[2,this.uriDropdownPopulator.getItem(e)]}}))}))};CategoryDropdownPopulator.prototype.getItem.$inject=["payload"];CategoryDropdownPopulator.prototype.isPaged=function(){return true};CategoryDropdownPopulator=__decorate([a.Injectable(),__metadata("design:paramtypes",[pe,r.LanguageService,d.TranslateService,r.UriDropdownPopulator])],CategoryDropdownPopulator);return CategoryDropdownPopulator}(r.DropdownPopulatorInterface);var _t=function(e){__extends(CmsLinkComponentContentPageDropdownPopulator,e);CmsLinkComponentContentPageDropdownPopulator.$inject=["contextAwareCatalogService","languageService","translateService","uriDropdownPopulator"];function CmsLinkComponentContentPageDropdownPopulator(t,n,i,o){var r=e.call(this,s,n,i)||this;r.contextAwareCatalogService=t;r.uriDropdownPopulator=o;return r}CmsLinkComponentContentPageDropdownPopulator.prototype.fetchPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.contextAwareCatalogService.getContentPageSearchUri()];case 1:t=n.sent();e.field.uri=t;return[2,this.uriDropdownPopulator.fetchPage(e)]}}))}))};CmsLinkComponentContentPageDropdownPopulator.prototype.fetchPage.$inject=["payload"];CmsLinkComponentContentPageDropdownPopulator.prototype.getItem=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.contextAwareCatalogService.getContentPageItemUri()];case 1:t=n.sent();e.field.uri=t;return[2,this.uriDropdownPopulator.getItem(e)]}}))}))};CmsLinkComponentContentPageDropdownPopulator.prototype.getItem.$inject=["payload"];CmsLinkComponentContentPageDropdownPopulator.prototype.isPaged=function(){return true};CmsLinkComponentContentPageDropdownPopulator=__decorate([a.Injectable(),__metadata("design:paramtypes",[pe,r.LanguageService,d.TranslateService,r.UriDropdownPopulator])],CmsLinkComponentContentPageDropdownPopulator);return CmsLinkComponentContentPageDropdownPopulator}(r.DropdownPopulatorInterface);window.__smartedit__.addDecoratorPayload("Component","MissingPrimaryContentPageComponent",{selector:"se-component-missing-primary-content-page",template:'<div><div><label class="missing-primary-content-page-message__label" [translate]="\'se.cms.page.restore.content.page.noprimaryforvariation.msg\'"></label></div><se-select id="se-page-restore-change-primary-selector-dropdown" [(model)]="cmsPage.label" [fetchStrategy]="fetchStrategy"></se-select></div>',styles:[".missing-primary-content-page-message__label{font-style:italic;padding-bottom:10px;display:block}"]});var yt=function(){function MissingPrimaryContentPageComponent(e,t,n){this.data=e;this.pageService=t;this.logService=n;this.CONTENT_PAGE_TYPE_CODE="ContentPage";this.ERROR_MSG="[MissingPrimaryContentPageComponent] - Cannot retrieve list of alternative content primary pages.";this.cmsPage=e.model}MissingPrimaryContentPageComponent.prototype.ngOnInit=function(){var e=this;this.fetchStrategy={fetchEntity:function(){return e.fetchEntity()},fetchPage:function(t,n,i){return e.fetchPage(t,n,i)}}};MissingPrimaryContentPageComponent.prototype.fetchEntity=function(){return Promise.resolve(this.getSelectItemFromPrimaryPage(this.cmsPage))};MissingPrimaryContentPageComponent.prototype.fetchPage=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r;var a=this;return __generator(this,(function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,this.pageService.getPaginatedPrimaryPagesForPageType(this.CONTENT_PAGE_TYPE_CODE,null,{search:e,pageSize:t,currentPage:n})];case 1:i=s.sent();o={pagination:i.pagination,results:null};o.results=i.response.map((function(e){return a.getSelectItemFromPrimaryPage(e)}));return[2,o];case 2:r=s.sent();this.logService.warn(this.ERROR_MSG,r);return[3,3];case 3:return[2]}}))}))};MissingPrimaryContentPageComponent.prototype.getSelectItemFromPrimaryPage=function(e){return{id:e.label,label:e.name}};MissingPrimaryContentPageComponent=__decorate([a.Component({selector:"se-component-missing-primary-content-page",template:'<div><div><label class="missing-primary-content-page-message__label" [translate]="\'se.cms.page.restore.content.page.noprimaryforvariation.msg\'"></label></div><se-select id="se-page-restore-change-primary-selector-dropdown" [(model)]="cmsPage.label" [fetchStrategy]="fetchStrategy"></se-select></div>',styles:[".missing-primary-content-page-message__label{font-style:italic;padding-bottom:10px;display:block}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,o.IPageService,r.LogService])],MissingPrimaryContentPageComponent);return MissingPrimaryContentPageComponent}();window.__smartedit__.addDecoratorPayload("Component","DuplicatePrimaryNonContentPageComponent",{selector:"se-component-duplicate-primary-non-content-page",template:'<div><label [translate]="label"></label></div>'});var Ct=function(){function DuplicatePrimaryNonContentPageComponent(e){this.data=e;this.PRODUCT_PAGE="ProductPage";this.labelI18nKeys={restoreCategory:"se.cms.page.restore.category.duplicate.primaryforvariation.error",restoreProduct:"se.cms.page.restore.product.duplicate.primaryforvariation.error"};this.page=e.model}DuplicatePrimaryNonContentPageComponent.prototype.ngOnInit=function(){this.page.replace=true;this.label=this.page.typeCode===this.PRODUCT_PAGE?this.labelI18nKeys.restoreProduct:this.labelI18nKeys.restoreCategory};DuplicatePrimaryNonContentPageComponent=__decorate([a.Component({selector:"se-component-duplicate-primary-non-content-page",template:'<div><label [translate]="label"></label></div>'}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],DuplicatePrimaryNonContentPageComponent);return DuplicatePrimaryNonContentPageComponent}();window.__smartedit__.addDecoratorPayload("Component","DuplicatePrimaryContentPageLabelComponent",{selector:"se-component-duplicate-primary-content-page-label",template:'<div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="overwritePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.overwritePage)" [value]="RESOLUTION_OPTIONS.overwritePage"/> <label for="overwritePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.overwrite\'"></label></div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="renamePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.renamePageLabel)" [value]="RESOLUTION_OPTIONS.renamePageLabel"/> <label for="renamePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.rename\'"></label></div><div class="rename-label-section" *ngIf="conflictResolution === RESOLUTION_OPTIONS.renamePageLabel"><label [translate]="\'se.cms.page.restore.page.label\'"></label> <input type="text" class="form-control" [(ngModel)]="page[\'label\']"/></div></div>',styles:[".rename-label-section{display:block}"]});var St=function(){function DuplicatePrimaryContentPageLabelComponent(e){this.data=e;this.conflictResolution=null;this.RESOLUTION_OPTIONS={overwritePage:1,renamePageLabel:2};this.page=e.model;this.conflictResolution=this.RESOLUTION_OPTIONS.overwritePage;this.page.replace=true}DuplicatePrimaryContentPageLabelComponent.prototype.selectResolution=function(e){this.page.replace=e===this.RESOLUTION_OPTIONS.overwritePage};DuplicatePrimaryContentPageLabelComponent=__decorate([a.Component({selector:"se-component-duplicate-primary-content-page-label",template:'<div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="overwritePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.overwritePage)" [value]="RESOLUTION_OPTIONS.overwritePage"/> <label for="overwritePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.overwrite\'"></label></div><div class="fd-form__item fd-form__item--check"><input class="fd-form__control" type="radio" name="duplicateResolution" id="renamePrimaryPageOption" [(ngModel)]="conflictResolution" (click)="selectResolution(RESOLUTION_OPTIONS.renamePageLabel)" [value]="RESOLUTION_OPTIONS.renamePageLabel"/> <label for="renamePrimaryPageOption" class="fd-form__label" [translate]="\'se.cms.page.restore.content.duplicate.primaryforvariation.option.rename\'"></label></div><div class="rename-label-section" *ngIf="conflictResolution === RESOLUTION_OPTIONS.renamePageLabel"><label [translate]="\'se.cms.page.restore.page.label\'"></label> <input type="text" class="form-control" [(ngModel)]="page[\'label\']"/></div></div>',styles:[".rename-label-section{display:block}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],DuplicatePrimaryContentPageLabelComponent);return DuplicatePrimaryContentPageLabelComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionsListComponent",{selector:"se-restrictions-list",template:'<div class="restrictions-list"><div class="restrictions-list__info"><label translate="se.cms.restrictions.criteria"></label> <span>&nbsp;{{ pageInfo.restrictionsCriteria }}</span></div><div class="restrictions-list__items" *ngFor="let restriction of restrictions"><div class="restrictions-list__item"><div class="restrictions-list__item-name">{{ restriction.name }}</div><div class="restrictions-list__item-type">{{ restriction.type | seL10n | async }}</div><div class="restrictions-list__item-description">{{ restriction.description }}</div></div></div></div>'});var bt=function(){RestrictionsListComponent.$inject=["data","cmsitemsRestService","cdr"];function RestrictionsListComponent(e,t,n){this.data=e;this.cmsitemsRestService=t;this.cdr=n;this.pageInfo=e.model;this.restrictions=[]}RestrictionsListComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.cmsitemsRestService.getByIdsNoCache(this.pageInfo.restrictions,"FULL")];case 1:e=t.sent();this.restrictions=e.response?e.response:[e];this.cdr.detectChanges();return[2]}}))}))};RestrictionsListComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restrictions-list",template:'<div class="restrictions-list"><div class="restrictions-list__info"><label translate="se.cms.restrictions.criteria"></label> <span>&nbsp;{{ pageInfo.restrictionsCriteria }}</span></div><div class="restrictions-list__items" *ngFor="let restriction of restrictions"><div class="restrictions-list__item"><div class="restrictions-list__item-name">{{ restriction.name }}</div><div class="restrictions-list__item-type">{{ restriction.type | seL10n | async }}</div><div class="restrictions-list__item-description">{{ restriction.description }}</div></div></div></div>'}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,o.CmsitemsRestService,a.ChangeDetectorRef])],RestrictionsListComponent);return RestrictionsListComponent}();var It;(function(e){e["clone"]="clone";e["useExisting"]="reference";e["remove"]="remove"})(It||(It={}));window.__smartedit__.addDecoratorPayload("Component","SlotSharedCloneActionFieldComponent",{changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"se-component-slot-shared-clone-action-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="components-in-slot-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot\'"></label><div id="components-in-slot-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="clone-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.clone"/> <label for="clone-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.cloneall\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="remove-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.remove"/> <label for="remove-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.removeall\'"></label></div></div></div></div>',styles:["slot-shared-clone-action-field .fd-form__item--check{display:flex;align-items:baseline;flex-direction:column}"]});var wt=function(){function SlotSharedCloneActionFieldComponent(e){this.data=e;this.cloneAction=It;this.page=e.model}SlotSharedCloneActionFieldComponent=__decorate([a.Component({changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"se-component-slot-shared-clone-action-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="components-in-slot-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot\'"></label><div id="components-in-slot-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="clone-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.clone"/> <label for="clone-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.cloneall\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="componentsInSlot" id="remove-all" [(ngModel)]="page.cloneAction" [value]="cloneAction.remove"/> <label for="remove-all" [translate]="\'se.cms.slot.shared.replace.editor.componentsinslot.removeall\'"></label></div></div></div></div>',styles:["slot-shared-clone-action-field .fd-form__item--check{display:flex;align-items:baseline;flex-direction:column}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],SlotSharedCloneActionFieldComponent);return SlotSharedCloneActionFieldComponent}();window.__smartedit__.addDecoratorPayload("Component","SlotSharedSlotTypeFieldComponent",{changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"se-component-slot-shared-slot-type-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="slot-replacement-type-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype\'"></label><div id="slot-replacement-type-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-custom" [(ngModel)]="page.isSlotCustom" [value]="true"/> <label for="slot-type-custom" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.custom\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-local" [(ngModel)]="page.isSlotCustom" [value]="false"/> <label for="slot-type-local" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.local\'"></label></div></div></div></div>',styles:["slot-shared-slot-type-field .fd-form__item--check{display:flex;align-items:baseline;flex-direction:column}"]});var Et=function(){function SlotSharedSlotTypeFieldComponent(e){this.data=e;this.page=e.model}SlotSharedSlotTypeFieldComponent=__decorate([a.Component({changeDetection:a.ChangeDetectionStrategy.OnPush,selector:"se-component-slot-shared-slot-type-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label for="slot-replacement-type-options" class="se-control-label" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype\'"></label><div id="slot-replacement-type-options"><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-custom" [(ngModel)]="page.isSlotCustom" [value]="true"/> <label for="slot-type-custom" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.custom\'"></label></div><div class="se-form-control-row"><input class="fd-form__control" type="radio" name="slotReplacementType" id="slot-type-local" [(ngModel)]="page.isSlotCustom" [value]="false"/> <label for="slot-type-local" [translate]="\'se.cms.slot.shared.replace.editor.slotreplacementtype.local\'"></label></div></div></div></div>',styles:["slot-shared-slot-type-field .fd-form__item--check{display:flex;align-items:baseline;flex-direction:column}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],SlotSharedSlotTypeFieldComponent);return SlotSharedSlotTypeFieldComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowCreateVersionFieldComponent",{selector:"se-workflow-create-version-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label class="fd-form__label"><input type="checkbox" class="fd-form__control" name="createVersion" [(ngModel)]="model.createVersion"/> {{ \'se.cms.workflow.editor.create.version\' | translate }}</label></div><div class="fd-form__item" *ngIf="model.createVersion"><label class="fd-form__label version-label__title" for="versionLabel" translate="se.cms.workflow.editor.create.version.label"></label> <input type="text" name="versionLabel" class="fd-form__control" [class.has-error]="field.hasErrors" [(ngModel)]="model.versionLabel"/></div></div>',providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush});var Pt=function(){function WorkflowCreateVersionFieldComponent(e,t,n,i){this.workflowService=e;this.data=t;this.cdr=n;this.l10nPipe=i;this.field=t.field,this.model=t.model,this.editor=t.editor}WorkflowCreateVersionFieldComponent.prototype.ngOnInit=function(){var e=this;this.unregisterOnChangeEvent=this.editor.api.addContentChangeEvent((function(){return e.onCreateVersionChange()}))};WorkflowCreateVersionFieldComponent.prototype.ngOnDestroy=function(){this.unregisterOnChangeEvent()};WorkflowCreateVersionFieldComponent.prototype.onCreateVersionChange=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,r,a,c;var l=this;return __generator(this,(function(d){switch(d.label){case 0:if(this.model.createVersion===false){this.model.versionLabel=null;this.cdr.detectChanges();return[2]}if(!s.isEmpty(this.model.versionLabel)){return[2]}if(!this.model.decisionCode)return[3,3];return[4,this.workflowService.getAllActionsForWorkflowCode(this.model.workflowCode)];case 1:e=d.sent();t=e.find((function(e){return e.code===l.model.actionCode}));n=t.decisions.find((function(e){return e.code===l.model.decisionCode}));return[4,Promise.all([this.l10nPipe.transform(n.name).pipe(p.take(1)).toPromise(),this.l10nPipe.transform(t.name).pipe(p.take(1)).toPromise()])];case 2:i=d.sent(),o=i[0],r=i[1];this.model.versionLabel=o+" for "+r;this.cdr.detectChanges();return[2];case 3:return[4,this.workflowService.getWorkflowTemplateByCode(this.model.templateCode)];case 4:a=d.sent();if(!a)return[3,6];return[4,this.l10nPipe.transform(a.name).pipe(p.take(1)).toPromise()];case 5:c=d.sent();this.model.versionLabel=c+" workflow started";this.cdr.detectChanges();d.label=6;case 6:return[2]}}))}))};WorkflowCreateVersionFieldComponent=__decorate([a.Component({selector:"se-workflow-create-version-field",template:'<div class="fd-form__set"><div class="fd-form__item fd-form__item--check"><label class="fd-form__label"><input type="checkbox" class="fd-form__control" name="createVersion" [(ngModel)]="model.createVersion"/> {{ \'se.cms.workflow.editor.create.version\' | translate }}</label></div><div class="fd-form__item" *ngIf="model.createVersion"><label class="fd-form__label version-label__title" for="versionLabel" translate="se.cms.workflow.editor.create.version.label"></label> <input type="text" name="versionLabel" class="fd-form__control" [class.has-error]="field.hasErrors" [(ngModel)]="model.versionLabel"/></div></div>',providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(1,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Pe,Object,a.ChangeDetectorRef,r.L10nPipe])],WorkflowCreateVersionFieldComponent);return WorkflowCreateVersionFieldComponent}();var Tt=function(){function GenericEditorWidgetsModule(){}GenericEditorWidgetsModule=__decorate([a.NgModule({imports:[r.TranslationModule.forChild(),h.FormsModule,g.CommonModule,r.L10nPipeModule,r.SelectModule,r.GenericEditorDropdownModule,pt],providers:[{provide:r.CustomDropdownPopulatorsToken,useClass:ht,multi:true},{provide:r.CustomDropdownPopulatorsToken,useClass:vt,multi:true},{provide:r.CustomDropdownPopulatorsToken,useClass:ft,multi:true},{provide:r.CustomDropdownPopulatorsToken,useClass:_t,multi:true}],declarations:[Pt,yt,Ct,St,bt,wt,Et,bt,gt],entryComponents:[Pt,yt,Ct,St,bt,wt,Et,bt,gt],exports:[Pt,pt]})],GenericEditorWidgetsModule);return GenericEditorWidgetsModule}();var At;(function(e){e["disabled"]="disabled"})(At||(At={}));window.__smartedit__.addDecoratorPayload("Component","MediaActionLabelComponent",{selector:"se-media-action-label",template:'<span class="se-media-action-label" [ngClass]="{ \'se-media-action-label--disabled\': state === \'disabled\' }" [translate]="i18nKey"></span>',styles:[".se-media-action-label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#0a6ed1}.se-media-action-label--disabled{color:#6a6d70}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Dt=function(){function MediaActionLabelComponent(){}__decorate([a.Input(),__metadata("design:type",String)],MediaActionLabelComponent.prototype,"i18nKey",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaActionLabelComponent.prototype,"state",void 0);MediaActionLabelComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-action-label",template:'<span class="se-media-action-label" [ngClass]="{ \'se-media-action-label--disabled\': state === \'disabled\' }" [translate]="i18nKey"></span>',styles:[".se-media-action-label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#0a6ed1}.se-media-action-label--disabled{color:#6a6d70}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaActionLabelComponent);return MediaActionLabelComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaComponent",{selector:"se-media",template:'<div class="se-media"><se-media-selector *ngIf="!image" [id]="mediaSelectorId" [isDisabled]="isFieldDisabled" [mediaId]="mediaIdByLang[lang]" (mediaIdChange)="onMediaIdChange($event)"></se-media-selector><se-media-file-selector *ngIf="canShowFileSelector()" [labelI18nKey]="\'se.upload.image.to.library\'" [acceptedFileTypes]="acceptedFileTypes" [selectionMode]="\'upload\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelect($event)"></se-media-file-selector><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper" [image]="image" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onMediaUploaded($event)"></se-media-upload-form><se-media-errors *ngIf="fileErrors.length > 0" [errors]="fileErrors"></se-media-errors></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var Ot=function(){function MediaComponent(e,t,n,i){this.cdr=e;this.fileValidationService=t;this.logService=n;this.field=i.field,this.mediaIdByLang=i.model,this.lang=i.qualifier;this.acceptedFileTypes=r.FILE_VALIDATION_CONFIG.ACCEPTED_FILE_TYPES;this.fileErrors=[];this.image=null;this.isFieldDisabled=i.isFieldDisabled();this.mediaSelectorId=this.field.qualifier}MediaComponent.prototype.onMediaIdChange=function(e){this.mediaIdByLang[this.lang]=e};MediaComponent.prototype.onFileSelect=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:this.resetImage();t=e[0];i.label=1;case 1:i.trys.push([1,3,,4]);return[4,this.fileValidationService.validate(t,this.fileErrors)];case 2:i.sent();this.image=t;return[3,4];case 3:n=i.sent();this.logService.warn("Invalid file");return[3,4];case 4:this.cdr.detectChanges();return[2]}}))}))};MediaComponent.prototype.onMediaUploaded=function(e){this.resetImage();this.onMediaIdChange(e);if(this.field.initiated){this.field.initiated.length=0}};MediaComponent.prototype.resetImage=function(){this.fileErrors=[];this.image=null};MediaComponent.prototype.canShowFileSelector=function(){return this.mediaIdByLang&&!this.mediaIdByLang[this.lang]&&!this.image};MediaComponent=__decorate([a.Component({selector:"se-media",template:'<div class="se-media"><se-media-selector *ngIf="!image" [id]="mediaSelectorId" [isDisabled]="isFieldDisabled" [mediaId]="mediaIdByLang[lang]" (mediaIdChange)="onMediaIdChange($event)"></se-media-selector><se-media-file-selector *ngIf="canShowFileSelector()" [labelI18nKey]="\'se.upload.image.to.library\'" [acceptedFileTypes]="acceptedFileTypes" [selectionMode]="\'upload\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelect($event)"></se-media-file-selector><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper" [image]="image" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onMediaUploaded($event)"></se-media-upload-form><se-media-errors *ngIf="fileErrors.length > 0" [errors]="fileErrors"></se-media-errors></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(3,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[a.ChangeDetectorRef,r.FileValidationService,r.LogService,Object])],MediaComponent);return MediaComponent}();var Rt="clone_";var Mt;(function(e){e["widescreen"]="widescreen";e["desktop"]="desktop";e["tablet"]="tablet";e["mobile"]="mobile"})(Mt||(Mt={}));window.__smartedit__.addDecoratorPayload("Component","MediaContainerComponent",{selector:"se-media-container",template:'<div *ngIf="hasReadPermissionOnMediaRelatedTypes && advancedMediaContainerManagementEnabled"><se-media-container-selector [eventNameAffix]="selectorEventNameAffix" [isAdvancedCloning]="isAdvancedCloning()" [initialName]="initialMediaContainerName" [name]="getMediaContainerName()" (nameChange)="onMediaContainerNameChange($event)" (onCreate)="onMediaContainerCreate($event)" (onRemove)="onMediaContainerRemove()" (onSelect)="setMediaContainer($event)" (onCreationInProgressChange)="onMediaContainerCreationInProgressChange($event)"></se-media-container-selector></div><div class="se-media-container-field" *ngIf="canShowMediaFormatWithUploadForm()"><div class="se-media-container-field__media-list"><se-media-format class="se-media-container-cell" *ngFor="let format of field.options" [ngClass]="getMediaContainerCellClassName(format.id)" [errorMessages]="field.messages" [isEditable]="field.editable" [isUnderEdit]="isMediaFormatUnderEdit(format.id)" [isFieldDisabled]="isFieldDisabled()" [mediaUuid]="model[lang].medias[format.id]" [mediaFormat]="format.id" (onFileSelect)="onFileSelect($event, format.id)" (onDelete)="removeMediaByFormat(format.id)"></se-media-format></div><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper se-media-upload-form-wrapper--spaced" [image]="image.file" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onFileUploadSuccess($event, image.format)"></se-media-upload-form><se-media-errors [errors]="fileValidationErrors"></se-media-errors></div><div *ngIf="!hasReadPermissionOnMediaRelatedTypes"><span translate="se.cms.media.typepermissions.error" [translateParams]="{ containedTypes: field.containedTypes }"></span></div>'});var xt=function(){MediaContainerComponent.$inject=["logService","typePermissionsRestService","loadConfigManagerService","fileValidationService","data"];function MediaContainerComponent(e,t,n,i,o){this.logService=e;this.typePermissionsRestService=t;this.loadConfigManagerService=n;this.fileValidationService=i;this.field=o.field,this.model=o.model,this.editor=o.editor,this.lang=o.qualifier,this.isFieldDisabled=o.isFieldDisabled;this.selectorEventNameAffix=this.field.qualifier+"_"+this.lang}MediaContainerComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(!this.model[this.lang]){this.setMediaContainer({catalogVersion:undefined,medias:{},qualifier:undefined,mediaContainerUuid:undefined})}return[4,this.initHasReadPermissionOnMediaRelatedTypes()];case 1:t.sent();return[4,this.initAdvancedMediaContainerManagementEnabled()];case 2:t.sent();this.initialMediaContainerName=this.getMediaContainerName();if(this.isAdvancedCloning()){e=""+Rt+this.initialMediaContainerName.trim();this.onMediaContainerNameChange(e)}return[2]}}))}))};MediaContainerComponent.prototype.getMediaContainerName=function(){var e;return((e=this.model[this.lang])===null||e===void 0?void 0:e.qualifier)||""};MediaContainerComponent.prototype.getMediaContainerCellClassName=function(e){return"se-media-container-cell--"+e};MediaContainerComponent.prototype.getMediaContainerCellClassName.$inject=["format"];MediaContainerComponent.prototype.setMediaContainer=function(e){this.model[this.lang]=e};MediaContainerComponent.prototype.setMediaContainer.$inject=["mediaContainer"];MediaContainerComponent.prototype.canShowMediaFormatWithUploadForm=function(){return this.hasReadPermissionOnMediaRelatedTypes&&(this.isMediaContainerSelected()||this.mediaContainerCreationInProgress||!this.advancedMediaContainerManagementEnabled)};MediaContainerComponent.prototype.isMediaFormatUnderEdit=function(e){var t;return e===((t=this.image)===null||t===void 0?void 0:t.format)};MediaContainerComponent.prototype.isMediaFormatUnderEdit.$inject=["format"];MediaContainerComponent.prototype.onFileSelect=function(e,t){var n;return __awaiter(this,void 0,void 0,(function(){var i,o,r;return __generator(this,(function(a){switch(a.label){case 0:this.resetImage();a.label=1;case 1:a.trys.push([1,3,,4]);i=e[0];return[4,this.fileValidationService.validate(i,this.fileValidationErrors)];case 2:a.sent();o=((n=this.image)===null||n===void 0?void 0:n.format)||t;this.image={file:i,format:o};return[3,4];case 3:r=a.sent();this.logService.warn("Invalid file");return[3,4];case 4:return[2]}}))}))};MediaContainerComponent.prototype.onFileSelect.$inject=["files","format"];MediaContainerComponent.prototype.onFileUploadSuccess=function(e,t){this.setMediaUuidForFormat(e,t);this.resetImage()};MediaContainerComponent.prototype.onFileUploadSuccess.$inject=["uuid","format"];MediaContainerComponent.prototype.onMediaContainerCreate=function(e){this.clearModel();this.onMediaContainerNameChange(e);this.model[this.lang].medias={}};MediaContainerComponent.prototype.onMediaContainerCreate.$inject=["name"];MediaContainerComponent.prototype.onMediaContainerRemove=function(){this.clearModel()};MediaContainerComponent.prototype.onMediaContainerNameChange=function(e){this.model[this.lang].qualifier=e};MediaContainerComponent.prototype.onMediaContainerNameChange.$inject=["name"];MediaContainerComponent.prototype.onMediaContainerCreationInProgressChange=function(e){this.mediaContainerCreationInProgress=e};MediaContainerComponent.prototype.onMediaContainerCreationInProgressChange.$inject=["inProgress"];MediaContainerComponent.prototype.removeMediaByFormat=function(e){delete this.model[this.lang].medias[e]};MediaContainerComponent.prototype.removeMediaByFormat.$inject=["format"];MediaContainerComponent.prototype.initAdvancedMediaContainerManagementEnabled=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.loadConfigManagerService.loadAsObject()];case 1:e=t.sent();this.advancedMediaContainerManagementEnabled=e.advancedMediaContainerManagement||false;return[2]}}))}))};MediaContainerComponent.prototype.initHasReadPermissionOnMediaRelatedTypes=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,this.typePermissionsRestService.hasAllPermissionsForTypes(this.field.containedTypes)];case 1:e=n.sent();this.hasReadPermissionOnMediaRelatedTypes=this.field.containedTypes.every((function(t){return e[t].read}));return[3,3];case 2:t=n.sent();this.hasReadPermissionOnMediaRelatedTypes=false;this.logService.warn("Failed to retrieve type permissions",t);return[3,3];case 3:return[2]}}))}))};MediaContainerComponent.prototype.setMediaUuidForFormat=function(e,t){this.model[this.lang].medias[t]=e};MediaContainerComponent.prototype.setMediaUuidForFormat.$inject=["uuid","format"];MediaContainerComponent.prototype.isAdvancedCloning=function(){var e=!!this.editor.initialContent.cloneComponent;return e&&this.advancedMediaContainerManagementEnabled};MediaContainerComponent.prototype.isMediaContainerSelected=function(){return!s.isEmpty(this.model[this.lang])};MediaContainerComponent.prototype.resetImage=function(){this.fileValidationErrors=[];this.image=null};MediaContainerComponent.prototype.clearModel=function(){var e=this;Object.keys(this.model[this.lang]).forEach((function(t){return delete e.model[e.lang][t]}))};MediaContainerComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-container",template:'<div *ngIf="hasReadPermissionOnMediaRelatedTypes && advancedMediaContainerManagementEnabled"><se-media-container-selector [eventNameAffix]="selectorEventNameAffix" [isAdvancedCloning]="isAdvancedCloning()" [initialName]="initialMediaContainerName" [name]="getMediaContainerName()" (nameChange)="onMediaContainerNameChange($event)" (onCreate)="onMediaContainerCreate($event)" (onRemove)="onMediaContainerRemove()" (onSelect)="setMediaContainer($event)" (onCreationInProgressChange)="onMediaContainerCreationInProgressChange($event)"></se-media-container-selector></div><div class="se-media-container-field" *ngIf="canShowMediaFormatWithUploadForm()"><div class="se-media-container-field__media-list"><se-media-format class="se-media-container-cell" *ngFor="let format of field.options" [ngClass]="getMediaContainerCellClassName(format.id)" [errorMessages]="field.messages" [isEditable]="field.editable" [isUnderEdit]="isMediaFormatUnderEdit(format.id)" [isFieldDisabled]="isFieldDisabled()" [mediaUuid]="model[lang].medias[format.id]" [mediaFormat]="format.id" (onFileSelect)="onFileSelect($event, format.id)" (onDelete)="removeMediaByFormat(format.id)"></se-media-format></div><se-media-upload-form *ngIf="image" class="se-media-upload-form-wrapper se-media-upload-form-wrapper--spaced" [image]="image.file" (onCancel)="resetImage()" (onSelect)="onFileSelect($event)" (onUploadSuccess)="onFileUploadSuccess($event, image.format)"></se-media-upload-form><se-media-errors [errors]="fileValidationErrors"></se-media-errors></div><div *ngIf="!hasReadPermissionOnMediaRelatedTypes"><span translate="se.cms.media.typepermissions.error" [translateParams]="{ containedTypes: field.containedTypes }"></span></div>'}),__param(4,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[r.LogService,o.TypePermissionsRestService,c.LoadConfigManagerService,r.FileValidationService,Object])],MediaContainerComponent);return MediaContainerComponent}();var Nt=o.IMAGES_URL+"/image_placeholder.png";window.__smartedit__.addDecoratorPayload("Component","MediaContainerSelectorItemComponent",{selector:"se-media-container-selector-item",template:'<div class="media-container-selector-item__row"><img class="media-container-selector-item__img" [ngClass]="{ \'media-container-selector-item__img--selected\': isSelected }" [src]="getThumbnailUrl(item.thumbnailUrl)"/><div class="media-container-selector-item__label">{{ item.qualifier }}</div></div>',styles:[".media-container-selector-item__row{display:grid;grid-template-columns:2fr 4fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.media-container-selector-item__img{max-width:90%;max-height:100%;margin:12px}.media-container-selector-item__img--selected{max-width:35%;height:30px;margin:0}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var kt=function(){function MediaContainerSelectorItemComponent(e){this.item=e.item,this.isSelected=e.selected}MediaContainerSelectorItemComponent.prototype.getThumbnailUrl=function(e){return e||Nt};MediaContainerSelectorItemComponent=__decorate([a.Component({selector:"se-media-container-selector-item",template:'<div class="media-container-selector-item__row"><img class="media-container-selector-item__img" [ngClass]="{ \'media-container-selector-item__img--selected\': isSelected }" [src]="getThumbnailUrl(item.thumbnailUrl)"/><div class="media-container-selector-item__label">{{ item.qualifier }}</div></div>',styles:[".media-container-selector-item__row{display:grid;grid-template-columns:2fr 4fr;grid-column-gap:12px;width:100%;align-items:center;padding:0 8px}.media-container-selector-item__img{max-width:90%;max-height:100%;margin:12px}.media-container-selector-item__img--selected{max-width:35%;height:30px;margin:0}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],MediaContainerSelectorItemComponent);return MediaContainerSelectorItemComponent}();var Ft="/cmswebservices/v1/catalogs/CURRENT_CONTEXT_CATALOG/versions/CURRENT_CONTEXT_CATALOG_VERSION/mediacontainers";var zt="mediaContainer";window.__smartedit__.addDecoratorPayload("Component","MediaContainerSelectorComponent",{selector:"se-media-container-selector",template:'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="field.qualifier" [model]="mediaContainerNameModel" [showRemoveButton]="true" [itemComponent]="itemComponent" [actionableSearchItem]="actionableSearchItem"></se-generic-editor-dropdown><div *ngIf="isSelected() || creationInProgress"><label class="se-control-label required se-media-container-name-label">{{ \'se.cms.media.responsive.name\' | lowercase | translate }}</label> <input type="text" name="media-container-qualifier" [id]="\'media-container-qualifier-\' + id" class="fd-form-control" [ngModel]="name" (ngModelChange)="onNameChange($event)" [readOnly]="isNameReadOnly()"/></div>',styles:["se-media-container-selector .se-media-container-name-label{margin-top:9px}se-media-container-selector .se-generic-editor-dropdown .se-item-printer{width:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var Lt=function(){function MediaContainerSelectorComponent(e,t){this.cdr=e;this.systemEventService=t;this.nameChange=new a.EventEmitter;this.onCreate=new a.EventEmitter;this.onRemove=new a.EventEmitter;this.onSelect=new a.EventEmitter;this.onCreationInProgressChange=new a.EventEmitter;this.field={cmsStructureType:"EditableDropdown",qualifier:zt,required:true,uri:Ft,idAttribute:"qualifier",editable:true,paged:true};this.creationInProgress=false;this.itemComponent=kt}MediaContainerSelectorComponent.prototype.ngOnInit=function(){var e;var t=this;this.id=zt+"_"+this.eventNameAffix;this.mediaContainerNameModel=(e={},e[zt]=this.initialName,e);var n=""+this.id+r.LINKED_DROPDOWN;this.unRegSelectMediaContainer=this.systemEventService.subscribe(n,(function(e,n){return t.onSelectItem(n)}));var i="CREATE_MEDIA_CONTAINER_BUTTON_PRESSED_EVENT_"+this.eventNameAffix;this.actionableSearchItem={eventId:i};this.unRegCreateMediaContainer=this.systemEventService.subscribe(i,(function(e,n){return t.onCreateMediaContainer(n)}))};MediaContainerSelectorComponent.prototype.ngOnDestroy=function(){this.unRegSelectMediaContainer();this.unRegCreateMediaContainer()};MediaContainerSelectorComponent.prototype.onNameChange=function(e){this.nameChange.emit(e)};MediaContainerSelectorComponent.prototype.isNameReadOnly=function(){return!this.isAdvancedCloning&&!this.creationInProgress&&this.isSelected()};MediaContainerSelectorComponent.prototype.isSelected=function(){return!!this.mediaContainerNameModel[zt]};MediaContainerSelectorComponent.prototype.onSelectItem=function(e){var t=e.optionObject;this.setCreationInProgressAndEmit(false);if(!this.mediaContainerNameModel.mediaContainer){this.onRemove.emit()}else if(!!t){this.onSelect.emit(t)}this.cdr.detectChanges()};MediaContainerSelectorComponent.prototype.onCreateMediaContainer=function(e){this.setCreationInProgressAndEmit(true);this.onCreate.emit(e);this.cdr.detectChanges()};MediaContainerSelectorComponent.prototype.setCreationInProgressAndEmit=function(e){this.creationInProgress=e;this.onCreationInProgressChange.emit(e)};__decorate([a.Input(),__metadata("design:type",String)],MediaContainerSelectorComponent.prototype,"eventNameAffix",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaContainerSelectorComponent.prototype,"isAdvancedCloning",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaContainerSelectorComponent.prototype,"name",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaContainerSelectorComponent.prototype,"initialName",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaContainerSelectorComponent.prototype,"nameChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaContainerSelectorComponent.prototype,"onCreate",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaContainerSelectorComponent.prototype,"onRemove",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaContainerSelectorComponent.prototype,"onSelect",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaContainerSelectorComponent.prototype,"onCreationInProgressChange",void 0);MediaContainerSelectorComponent=__decorate([a.Component({selector:"se-media-container-selector",template:'<se-generic-editor-dropdown [id]="id" [field]="field" [qualifier]="field.qualifier" [model]="mediaContainerNameModel" [showRemoveButton]="true" [itemComponent]="itemComponent" [actionableSearchItem]="actionableSearchItem"></se-generic-editor-dropdown><div *ngIf="isSelected() || creationInProgress"><label class="se-control-label required se-media-container-name-label">{{ \'se.cms.media.responsive.name\' | lowercase | translate }}</label> <input type="text" name="media-container-qualifier" [id]="\'media-container-qualifier-\' + id" class="fd-form-control" [ngModel]="name" (ngModelChange)="onNameChange($event)" [readOnly]="isNameReadOnly()"/></div>',styles:["se-media-container-selector .se-media-container-name-label{margin-top:9px}se-media-container-selector .se-generic-editor-dropdown .se-item-printer{width:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[a.ChangeDetectorRef,r.SystemEventService])],MediaContainerSelectorComponent);return MediaContainerSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaErrorsComponent",{selector:"se-media-errors",template:'<div class="field-errors"><div *ngFor="let error of errors">{{ error.message | translate }}</div></div>'});var Vt=function(){function MediaErrorsComponent(){}__decorate([a.Input(),__metadata("design:type",Array)],MediaErrorsComponent.prototype,"errors",void 0);MediaErrorsComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-errors",template:'<div class="field-errors"><div *ngFor="let error of errors">{{ error.message | translate }}</div></div>'})],MediaErrorsComponent);return MediaErrorsComponent}();var $t=function(){MediaUploaderService.$inject=["restServiceFactory"];function MediaUploaderService(e){this.restServiceFactory=e;this.mediaRestService=this.restServiceFactory.get(r.MEDIA_RESOURCE_URI)}MediaUploaderService.prototype.uploadMedia=function(e){var t=new FormData;s.forEach(e,(function(e,n){t.append(n,e)}));return this.mediaRestService.save(t,{headers:{enctype:"multipart/form-data"}})};MediaUploaderService.prototype.uploadMedia.$inject=["media"];MediaUploaderService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],MediaUploaderService);return MediaUploaderService}();var Ut=function(){MediaService.$inject=["restServiceFactory"];function MediaService(e){this.restServiceFactory=e}MediaService.prototype.getPage=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,a,s,c;var l=this;return __generator(this,(function(d){switch(d.label){case 0:i={catalogId:r.CONTEXT_CATALOG,catalogVersion:r.CONTEXT_CATALOG_VERSION};if(!r.stringUtils.isBlank(e)){i.code=e}o=this.contextParamsToCommaSeparated(i);a={namedQuery:"namedQueryMediaSearchByCodeCatalogVersion",params:o,pageSize:t,currentPage:n};return[4,this.restServiceFactory.get(r.MEDIA_PATH).get(a)];case 1:s=d.sent();c={results:[],pagination:undefined};c.results=s.media.map((function(e){return l.mediaDTOtoMedia(e)}));return[2,c]}}))}))};MediaService.prototype.getPage.$inject=["mask","pageSize","currentPage"];MediaService.prototype.getMedia=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:t=r.MEDIA_PATH+"/"+e;return[4,this.restServiceFactory.get(t).get()];case 1:n=i.sent();return[2,this.mediaDTOtoMedia(n)]}}))}))};MediaService.prototype.getMedia.$inject=["uuid"];MediaService.prototype.contextParamsToCommaSeparated=function(e){return Object.keys(e).reduce((function(t,n){t+=","+n+":"+e[n];return t}),"").substring(1)};MediaService.prototype.contextParamsToCommaSeparated.$inject=["params"];MediaService.prototype.mediaDTOtoMedia=function(e){var t=e.uuid,n=e.code,i=e.description,o=e.altText,r=e.url,a=e.downloadUrl;return{id:t,code:n,description:i,altText:o,url:r,downloadUrl:a}};MediaService.prototype.mediaDTOtoMedia.$inject=["_a"];MediaService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],MediaService);return MediaService}();var jt=function(){function MediaBackendValidationHandler(){}MediaBackendValidationHandler.prototype.handleResponse=function(e,t){var n=this;var i;t=t||[];if((i=e===null||e===void 0?void 0:e.error)===null||i===void 0?void 0:i.errors){e.error.errors.filter((function(e){return n.isValidationError(e)})).forEach((function(e){var n=e.subject,i=e.message;if(n){t.push({subject:n,message:i})}}))}return t};MediaBackendValidationHandler.prototype.handleResponse.$inject=["response","errorsContext"];MediaBackendValidationHandler.prototype.isValidationError=function(e){return e.type==="ValidationError"};MediaBackendValidationHandler.prototype.isValidationError.$inject=["error"];MediaBackendValidationHandler=__decorate([r.SeDowngradeService()],MediaBackendValidationHandler);return MediaBackendValidationHandler}();var Bt={UPLOAD:"se.media.format.upload",REPLACE:"se.media.format.replace",UNDER_EDIT:"se.media.format.under.edit",REMOVE:"se.media.format.remove"};window.__smartedit__.addDecoratorPayload("Component","MediaFormatComponent",{selector:"se-media-format",template:'<div class="se-media-format" [ngClass]="mediaFormat"><div class="se-media-format__screen-type" [translate]="mediaFormatI18nKey"></div><se-media-format-uploaded *ngIf="isMediaPreviewEnabled()" [media]="media" [replaceLabelI18nKey]="mediaSelectorI18nKeys.REPLACE" [acceptedFileTypes]="acceptedFileTypes" [isFieldDisabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)" (onDelete)="onRemoveButtonClick()"></se-media-format-uploaded><div class="se-media--absent" *ngIf="isMediaAbsent()"><se-media-file-selector *ngIf="isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="isFieldDisabled ? \'file-selector-disabled\' : \'\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-file-selector *ngIf="!isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="!isEditable ? \'file-selector-disabled\' : \'\'" [disabled]="!isEditable" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector></div><div *ngIf="isUnderEdit" class="se-media--edit-wrapper"><se-media-file-selector class="se-media--edit" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'file-selector-disabled\'" [disabled]="true" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><span class="se-media-preview--edit" [translate]="mediaSelectorI18nKeys.UNDER_EDIT"></span></div><ng-container *ngIf="!isUnderEdit"><div class="error-input se-media-format__error" *ngFor="let error of getErrors()"><span>{{ error }}</span></div></ng-container></div>',styles:[".se-media-format{height:100%}.se-media-format__screen-type{font-weight:700;padding-top:4px;padding-bottom:10px;color:#32363a}.se-media-format__error{color:#b00}.se-media--absent{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;border:1px dashed #d9d9d9}.se-media--edit-wrapper{height:100%}.se-media--edit{display:flex;flex-direction:row;align-items:center;justify-content:center}.se-media-preview--edit{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;display:block;font-style:italic}",".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],encapsulation:a.ViewEncapsulation.None});var Ht=function(){MediaFormatComponent.$inject=["mediaService"];function MediaFormatComponent(e){this.mediaService=e;this.onFileSelect=new a.EventEmitter;this.onDelete=new a.EventEmitter;this.media=null;this.mediaSelectorI18nKeys=Bt;this.acceptedFileTypes=r.FILE_VALIDATION_CONFIG.ACCEPTED_FILE_TYPES}MediaFormatComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.mediaFormatI18nKey="se.media.format."+this.mediaFormat;if(this.mediaUuid){return[2,this.fetchAndSetMedia()]}return[2]}))}))};MediaFormatComponent.prototype.ngOnChanges=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){t=e.mediaUuid;if(t&&!t.firstChange){if(this.mediaUuid){return[2,this.fetchAndSetMedia()]}else{this.media=null}}return[2]}))}))};MediaFormatComponent.prototype.ngOnChanges.$inject=["changes"];MediaFormatComponent.prototype.onFileSelectorFileSelect=function(e){this.onFileSelect.emit(e)};MediaFormatComponent.prototype.onFileSelectorFileSelect.$inject=["file"];MediaFormatComponent.prototype.onRemoveButtonClick=function(){this.onDelete.emit()};MediaFormatComponent.prototype.isMediaPreviewEnabled=function(){var e;return this.mediaUuid&&!this.isUnderEdit&&!!((e=this.media)===null||e===void 0?void 0:e.code)};MediaFormatComponent.prototype.isMediaAbsent=function(){return!this.mediaUuid&&!this.isUnderEdit};MediaFormatComponent.prototype.getErrors=function(){var e=this;return(this.errorMessages||[]).filter((function(t){return t.format===e.mediaFormat})).map((function(e){return e.message}))};MediaFormatComponent.prototype.fetchAndSetMedia=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.mediaService.getMedia(this.mediaUuid)];case 1:e.media=t.sent();return[2]}}))}))};__decorate([a.Input(),__metadata("design:type",Array)],MediaFormatComponent.prototype,"errorMessages",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaFormatComponent.prototype,"isEditable",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaFormatComponent.prototype,"isUnderEdit",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaFormatComponent.prototype,"isFieldDisabled",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaFormatComponent.prototype,"mediaUuid",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaFormatComponent.prototype,"mediaFormat",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaFormatComponent.prototype,"onFileSelect",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaFormatComponent.prototype,"onDelete",void 0);MediaFormatComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-format",template:'<div class="se-media-format" [ngClass]="mediaFormat"><div class="se-media-format__screen-type" [translate]="mediaFormatI18nKey"></div><se-media-format-uploaded *ngIf="isMediaPreviewEnabled()" [media]="media" [replaceLabelI18nKey]="mediaSelectorI18nKeys.REPLACE" [acceptedFileTypes]="acceptedFileTypes" [isFieldDisabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)" (onDelete)="onRemoveButtonClick()"></se-media-format-uploaded><div class="se-media--absent" *ngIf="isMediaAbsent()"><se-media-file-selector *ngIf="isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="isFieldDisabled ? \'file-selector-disabled\' : \'\'" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-file-selector *ngIf="!isEditable" [selectionMode]="\'upload\'" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="!isEditable ? \'file-selector-disabled\' : \'\'" [disabled]="!isEditable" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector></div><div *ngIf="isUnderEdit" class="se-media--edit-wrapper"><se-media-file-selector class="se-media--edit" [labelI18nKey]="mediaSelectorI18nKeys.UPLOAD" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'file-selector-disabled\'" [disabled]="true" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><span class="se-media-preview--edit" [translate]="mediaSelectorI18nKeys.UNDER_EDIT"></span></div><ng-container *ngIf="!isUnderEdit"><div class="error-input se-media-format__error" *ngFor="let error of getErrors()"><span>{{ error }}</span></div></ng-container></div>',styles:[".se-media-format{height:100%}.se-media-format__screen-type{font-weight:700;padding-top:4px;padding-bottom:10px;color:#32363a}.se-media-format__error{color:#b00}.se-media--absent{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;border:1px dashed #d9d9d9}.se-media--edit-wrapper{height:100%}.se-media--edit{display:flex;flex-direction:row;align-items:center;justify-content:center}.se-media-preview--edit{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;display:block;font-style:italic}",".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[Ut])],MediaFormatComponent);return MediaFormatComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaFormatUploadedComponent",{selector:"se-media-format-uploaded",template:'<div class="se-media--present"><div class="se-media--present-img-container se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><div class="se-media-preview__image-wrapper"><img class="se-media-preview__image-thumbnail" [src]="media.url"/></div></div><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><se-media-file-selector [labelI18nKey]="replaceLabelI18nKey" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'media-format-present-replace\' + (isFieldDisabled ? \' file-selector-disabled\' : \'\')" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-remove-button [isDisabled]="isFieldDisabled" (clickHandler)="onRemoveButtonClick()"></se-media-remove-button></div>',styles:[".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Gt=function(){function MediaFormatUploadedComponent(){this.onFileSelect=new a.EventEmitter;this.onDelete=new a.EventEmitter}MediaFormatUploadedComponent.prototype.onFileSelectorFileSelect=function(e){this.onFileSelect.emit(e)};MediaFormatUploadedComponent.prototype.onFileSelectorFileSelect.$inject=["file"];MediaFormatUploadedComponent.prototype.onRemoveButtonClick=function(){this.onDelete.emit()};__decorate([a.Input(),__metadata("design:type",Object)],MediaFormatUploadedComponent.prototype,"media",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaFormatUploadedComponent.prototype,"replaceLabelI18nKey",void 0);__decorate([a.Input(),__metadata("design:type",Array)],MediaFormatUploadedComponent.prototype,"acceptedFileTypes",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaFormatUploadedComponent.prototype,"isFieldDisabled",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaFormatUploadedComponent.prototype,"onFileSelect",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaFormatUploadedComponent.prototype,"onDelete",void 0);MediaFormatUploadedComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-format-uploaded",template:'<div class="se-media--present"><div class="se-media--present-img-container se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><div class="se-media-preview__image-wrapper"><img class="se-media-preview__image-thumbnail" [src]="media.url"/></div></div><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><se-media-file-selector [labelI18nKey]="replaceLabelI18nKey" [acceptedFileTypes]="acceptedFileTypes" [customClass]="\'media-format-present-replace\' + (isFieldDisabled ? \' file-selector-disabled\' : \'\')" [disabled]="isFieldDisabled" (onFileSelect)="onFileSelectorFileSelect($event)"></se-media-file-selector><se-media-remove-button [isDisabled]="isFieldDisabled" (clickHandler)="onRemoveButtonClick()"></se-media-remove-button></div>',styles:[".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[])],MediaFormatUploadedComponent);return MediaFormatUploadedComponent}();var Wt;(function(e){e["replace"]="replace";e["upload"]="upload"})(Wt||(Wt={}));window.__smartedit__.addDecoratorPayload("Component","MediaFileSelectorComponent",{selector:"se-media-file-selector",template:'<div class="se-file-selector" [ngClass]="customClass"><label *ngIf="!disabled" class="se-file-selector__btn se-button se-button--text" [ngClass]="{ \'se-button--disabled\': disabled }"><span class="sap-icon--share se-media__action-icon" [ngClass]="{\n                \'sap-icon--share\': isReplaceMode(),\n                \'sap-icon--upload\': !isReplaceMode()\n            }"></span> <span class="se-file-selector__label" [translate]="labelI18nKey"></span> <input type="file" class="hide se-file-selector__input" [accept]="buildAcceptedFileTypesList()" (change)="onSelect($event.target.files)"/></label></div>',styles:[".se-media-container-field__media-list{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:0 16px}.se-media-container-cell--mobile{order:4}.se-media-container-cell--desktop{order:2}.se-media-container-cell--tablet{order:3}.se-media-container-cell--widescreen{order:1}.se-media__action-icon{color:#0a6ed1;margin-right:8px;width:12px}.se-media__action-icon--basic{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-media__action-icon--basic::before{vertical-align:middle}.se-media__action-icon--delete{color:#b00}.se-media-action-btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-media-action-btn[disabled]{cursor:not-allowed;opacity:.4}.se-media-upload-form-wrapper{display:block}.se-media-upload-form-wrapper--spaced{margin-top:16px}.se-file-selector{display:flex;flex-direction:row;align-items:center;display:inline-flex}.se-file-selector--disabled .se-file-selector__btn:focus,.se-file-selector--disabled .se-file-selector__btn:hover{cursor:not-allowed}.se-file-selector__btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-file-selector__btn[disabled]{cursor:not-allowed;opacity:.4}.se-file-selector--disabled .se-file-selector__btn:focus,.se-file-selector--disabled .se-file-selector__btn:hover{cursor:not-allowed}.se-file-selector__label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#0a6ed1}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var qt=function(){function MediaFileSelectorComponent(){this.onFileSelect=new a.EventEmitter}MediaFileSelectorComponent.prototype.ngOnInit=function(){this.disabled=this.disabled||false;this.customClass=this.customClass||"";this.selectionMode=this.selectionMode||Wt.replace};MediaFileSelectorComponent.prototype.buildAcceptedFileTypesList=function(){return this.acceptedFileTypes.map((function(e){return"."+e})).join(",")};MediaFileSelectorComponent.prototype.isReplaceMode=function(){return this.selectionMode===Wt.replace};MediaFileSelectorComponent.prototype.onSelect=function(e){this.onFileSelect.emit(e)};MediaFileSelectorComponent.prototype.onSelect.$inject=["fileList"];__decorate([a.Input(),__metadata("design:type",String)],MediaFileSelectorComponent.prototype,"selectionMode",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaFileSelectorComponent.prototype,"labelI18nKey",void 0);__decorate([a.Input(),__metadata("design:type",Array)],MediaFileSelectorComponent.prototype,"acceptedFileTypes",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaFileSelectorComponent.prototype,"customClass",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaFileSelectorComponent.prototype,"disabled",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaFileSelectorComponent.prototype,"onFileSelect",void 0);MediaFileSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-file-selector",template:'<div class="se-file-selector" [ngClass]="customClass"><label *ngIf="!disabled" class="se-file-selector__btn se-button se-button--text" [ngClass]="{ \'se-button--disabled\': disabled }"><span class="sap-icon--share se-media__action-icon" [ngClass]="{\n                \'sap-icon--share\': isReplaceMode(),\n                \'sap-icon--upload\': !isReplaceMode()\n            }"></span> <span class="se-file-selector__label" [translate]="labelI18nKey"></span> <input type="file" class="hide se-file-selector__input" [accept]="buildAcceptedFileTypesList()" (change)="onSelect($event.target.files)"/></label></div>',styles:[".se-media-container-field__media-list{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:0 16px}.se-media-container-cell--mobile{order:4}.se-media-container-cell--desktop{order:2}.se-media-container-cell--tablet{order:3}.se-media-container-cell--widescreen{order:1}.se-media__action-icon{color:#0a6ed1;margin-right:8px;width:12px}.se-media__action-icon--basic{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-media__action-icon--basic::before{vertical-align:middle}.se-media__action-icon--delete{color:#b00}.se-media-action-btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-media-action-btn[disabled]{cursor:not-allowed;opacity:.4}.se-media-upload-form-wrapper{display:block}.se-media-upload-form-wrapper--spaced{margin-top:16px}.se-file-selector{display:flex;flex-direction:row;align-items:center;display:inline-flex}.se-file-selector--disabled .se-file-selector__btn:focus,.se-file-selector--disabled .se-file-selector__btn:hover{cursor:not-allowed}.se-file-selector__btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-file-selector__btn[disabled]{cursor:not-allowed;opacity:.4}.se-file-selector--disabled .se-file-selector__btn:focus,.se-file-selector--disabled .se-file-selector__btn:hover{cursor:not-allowed}.se-file-selector__label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;color:#0a6ed1}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaFileSelectorComponent);return MediaFileSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaPreviewComponent",{selector:"se-media-preview",template:'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']"><span se-tooltip-trigger><div class="sap-icon--search se-media-preview__icon"></div></span><div se-tooltip-body><img class="se-media-preview__image" [src]="imageUrl"/></div></se-tooltip>',styles:[".se-media-preview{display:block;cursor:pointer;position:absolute;height:24px;width:24px;top:0;right:0}.se-media-preview__icon{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400;outline:0;background-color:#0a6ed1;color:#fff;height:24px;width:24px}.se-media-preview__image{width:160px;height:auto}"],encapsulation:a.ViewEncapsulation.None,host:{"[class.se-media-preview]":"true"},changeDetection:a.ChangeDetectionStrategy.OnPush});var Kt=function(){function MediaPreviewComponent(){}__decorate([a.Input(),__metadata("design:type",String)],MediaPreviewComponent.prototype,"imageUrl",void 0);MediaPreviewComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-preview",template:'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']"><span se-tooltip-trigger><div class="sap-icon--search se-media-preview__icon"></div></span><div se-tooltip-body><img class="se-media-preview__image" [src]="imageUrl"/></div></se-tooltip>',styles:[".se-media-preview{display:block;cursor:pointer;position:absolute;height:24px;width:24px;top:0;right:0}.se-media-preview__icon{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400;outline:0;background-color:#0a6ed1;color:#fff;height:24px;width:24px}.se-media-preview__image{width:160px;height:auto}"],encapsulation:a.ViewEncapsulation.None,host:{"[class.se-media-preview]":"true"},changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaPreviewComponent);return MediaPreviewComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaRemoveButtonComponent",{selector:"se-media-remove-button",template:'<button type="button" class="se-media-action-btn se-media-remove-btn" [disabled]="isDisabled" (click)="clickHandler.emit($event)"><span class="se-media__action-icon se-media__action-icon--delete sap-icon--delete"></span> <span class="se-media-remove-btn-txt" [ngClass]="{ \'se-media-remove-btn-txt--disabled\': isDisabled }" translate="se.media.format.remove"></span></button>',styles:[".se-media-remove-btn-txt{color:#b00}.se-media-remove-btn-txt--disabled{color:#6a6d70}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Yt=function(){function MediaRemoveButtonComponent(){this.clickHandler=new a.EventEmitter}__decorate([a.Input(),__metadata("design:type",Boolean)],MediaRemoveButtonComponent.prototype,"isDisabled",void 0);__decorate([a.Output(),__metadata("design:type",Object)],MediaRemoveButtonComponent.prototype,"clickHandler",void 0);MediaRemoveButtonComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-remove-button",template:'<button type="button" class="se-media-action-btn se-media-remove-btn" [disabled]="isDisabled" (click)="clickHandler.emit($event)"><span class="se-media__action-icon se-media__action-icon--delete sap-icon--delete"></span> <span class="se-media-remove-btn-txt" [ngClass]="{ \'se-media-remove-btn-txt--disabled\': isDisabled }" translate="se.media.format.remove"></span></button>',styles:[".se-media-remove-btn-txt{color:#b00}.se-media-remove-btn-txt--disabled{color:#6a6d70}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaRemoveButtonComponent);return MediaRemoveButtonComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaAdvancedPropertiesComponent",{selector:"se-media-advanced-properties",template:'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']" class="se-media-advanced-info"><span se-tooltip-trigger class="se-media-advanced-info__trigger"><span class="sap-icon--message-information se-media__action-icon se-media__action-icon--basic" [title]="i18nKeys.INFORMATION | translate"></span><se-media-action-label [i18nKey]="i18nKeys.INFORMATION"></se-media-action-label></span><div se-tooltip-body><div class="se-media-advanced-info-body"><div class="se-media-advanced-info-row advanced-information-description" *ngIf="description"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.DESCRIPTION"></div><div class="se-media-advanced-info-row__description">{{ description }}</div></div><div class="se-media-advanced-info-row advanced-information-code"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.CODE"></div><div class="se-media-advanced-info-row__description">{{ code }}</div></div><div class="se-media-advanced-info-row advanced-information-alt-text" *ngIf="altText"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.ALT_TEXT"></div><div class="se-media-advanced-info-row__description">{{ altText }}</div></div></div></div></se-tooltip>',styles:[".se-media-container-field__media-list{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:0 16px}.se-media-container-cell--mobile{order:4}.se-media-container-cell--desktop{order:2}.se-media-container-cell--tablet{order:3}.se-media-container-cell--widescreen{order:1}.se-media__action-icon{color:#0a6ed1;margin-right:8px;width:12px}.se-media__action-icon--basic{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-media__action-icon--basic::before{vertical-align:middle}.se-media__action-icon--delete{color:#b00}.se-media-action-btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-media-action-btn[disabled]{cursor:not-allowed;opacity:.4}.se-media-upload-form-wrapper{display:block}.se-media-upload-form-wrapper--spaced{margin-top:16px}.se-media-advanced-info{display:flex;flex-direction:row;align-items:center;display:inline-flex;height:32px;outline:0}.se-media-advanced-info__trigger{display:flex;align-items:center}.se-media-advanced-info-body{padding:11px}.se-media-advanced-info-row:not(:last-child){margin-bottom:16px}.se-media-advanced-info-row__description{color:#32363a;word-break:break-all;max-width:95%}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Xt=function(){function MediaAdvancedPropertiesComponent(){this.i18nKeys={DESCRIPTION:"se.media.advanced.information.description",CODE:"se.media.advanced.information.code",ALT_TEXT:"se.media.advanced.information.alt.text",ADVANCED_INFORMATION:"se.media.advanced.information",INFORMATION:"se.media.information"}}__decorate([a.Input(),__metadata("design:type",String)],MediaAdvancedPropertiesComponent.prototype,"code",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaAdvancedPropertiesComponent.prototype,"description",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaAdvancedPropertiesComponent.prototype,"altText",void 0);MediaAdvancedPropertiesComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-advanced-properties",template:'<se-tooltip [appendTo]="\'body\'" [placement]="\'bottom\'" [isChevronVisible]="true" [triggers]="[\'click\']" class="se-media-advanced-info"><span se-tooltip-trigger class="se-media-advanced-info__trigger"><span class="sap-icon--message-information se-media__action-icon se-media__action-icon--basic" [title]="i18nKeys.INFORMATION | translate"></span><se-media-action-label [i18nKey]="i18nKeys.INFORMATION"></se-media-action-label></span><div se-tooltip-body><div class="se-media-advanced-info-body"><div class="se-media-advanced-info-row advanced-information-description" *ngIf="description"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.DESCRIPTION"></div><div class="se-media-advanced-info-row__description">{{ description }}</div></div><div class="se-media-advanced-info-row advanced-information-code"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.CODE"></div><div class="se-media-advanced-info-row__description">{{ code }}</div></div><div class="se-media-advanced-info-row advanced-information-alt-text" *ngIf="altText"><div class="se-media-advanced-info-row__label se-control-label" [translate]="i18nKeys.ALT_TEXT"></div><div class="se-media-advanced-info-row__description">{{ altText }}</div></div></div></div></se-tooltip>',styles:[".se-media-container-field__media-list{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:0 16px}.se-media-container-cell--mobile{order:4}.se-media-container-cell--desktop{order:2}.se-media-container-cell--tablet{order:3}.se-media-container-cell--widescreen{order:1}.se-media__action-icon{color:#0a6ed1;margin-right:8px;width:12px}.se-media__action-icon--basic{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-media__action-icon--basic::before{vertical-align:middle}.se-media__action-icon--delete{color:#b00}.se-media-action-btn{display:flex;flex-direction:row;align-items:center;padding:0;margin:0;border:none;box-shadow:none;outline:0;background-color:transparent;text-decoration:none;height:32px}.se-media-action-btn[disabled]{cursor:not-allowed;opacity:.4}.se-media-upload-form-wrapper{display:block}.se-media-upload-form-wrapper--spaced{margin-top:16px}.se-media-advanced-info{display:flex;flex-direction:row;align-items:center;display:inline-flex;height:32px;outline:0}.se-media-advanced-info__trigger{display:flex;align-items:center}.se-media-advanced-info-body{padding:11px}.se-media-advanced-info-row:not(:last-child){margin-bottom:16px}.se-media-advanced-info-row__description{color:#32363a;word-break:break-all;max-width:95%}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaAdvancedPropertiesComponent);return MediaAdvancedPropertiesComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaPrinterComponent",{selector:"se-media-printer",template:'<div class="se-media-selector" *ngIf="isSelected"><span class="se-media-selector__left-section se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><img class="se-media-preview__image-thumbnail" [src]="media.url"/> </span><span class="se-media-selector__right-section"><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><button class="se-media-action-btn replace-image" [disabled]="isDisabled()"><span class="sap-icon--share se-media__action-icon"></span><se-media-action-label [state]="isDisabled() ? \'disabled\' : null" [i18nKey]="\'se.upload.image.replace\'"></se-media-action-label></button><se-media-remove-button [isDisabled]="isDisabled()" (clickHandler)="select.removeSelectedOption($event, media)"></se-media-remove-button></span></div><div class="se-media-selector__search" *ngIf="!isSelected"><div class="se-media-selector__search-img-wrapper"><img [src]="media.url" class="se-media-selector__search-img"/></div><div class="se-media-selector__search-name">{{ media.code }}</div></div>',styles:["se-media-printer .se-media-selector{display:flex;flex-direction:row;align-items:center;position:relative}se-media-printer .se-media-selector__left-section{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#eeeeef;position:relative;width:135px;height:80px}se-media-printer .se-media-selector__right-section{display:flex;flex-direction:column;margin-left:20px}se-media-printer .se-media-selector__search{display:flex;flex-direction:row;align-items:center}se-media-printer .se-media-selector__search-img-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#eeeeef;width:135px;height:65px;margin-right:16px}se-media-printer .se-media-selector__search-img{max-width:100%;max-height:100%;margin:12px}se-media-printer .se-media-selector__search-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:70%}",".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var Zt=function(){function MediaPrinterComponent(e){this.data=e;this.media=e.item,this.isSelected=e.selected,this.select=e.select}MediaPrinterComponent.prototype.isDisabled=function(){return this.select.isReadOnly};MediaPrinterComponent=__decorate([a.Component({selector:"se-media-printer",template:'<div class="se-media-selector" *ngIf="isSelected"><span class="se-media-selector__left-section se-media-preview-container"><se-media-preview [imageUrl]="media.url"></se-media-preview><img class="se-media-preview__image-thumbnail" [src]="media.url"/> </span><span class="se-media-selector__right-section"><se-media-advanced-properties [code]="media.code" [description]="media.description" [altText]="media.altText"></se-media-advanced-properties><button class="se-media-action-btn replace-image" [disabled]="isDisabled()"><span class="sap-icon--share se-media__action-icon"></span><se-media-action-label [state]="isDisabled() ? \'disabled\' : null" [i18nKey]="\'se.upload.image.replace\'"></se-media-action-label></button><se-media-remove-button [isDisabled]="isDisabled()" (clickHandler)="select.removeSelectedOption($event, media)"></se-media-remove-button></span></div><div class="se-media-selector__search" *ngIf="!isSelected"><div class="se-media-selector__search-img-wrapper"><img [src]="media.url" class="se-media-selector__search-img"/></div><div class="se-media-selector__search-name">{{ media.code }}</div></div>',styles:["se-media-printer .se-media-selector{display:flex;flex-direction:row;align-items:center;position:relative}se-media-printer .se-media-selector__left-section{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#eeeeef;position:relative;width:135px;height:80px}se-media-printer .se-media-selector__right-section{display:flex;flex-direction:column;margin-left:20px}se-media-printer .se-media-selector__search{display:flex;flex-direction:row;align-items:center}se-media-printer .se-media-selector__search-img-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#eeeeef;width:135px;height:65px;margin-right:16px}se-media-printer .se-media-selector__search-img{max-width:100%;max-height:100%;margin:12px}se-media-printer .se-media-selector__search-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:70%}",".se-media-preview-container{position:relative}.se-media-preview-container .se-media-preview__image-wrapper{display:flex;flex-direction:row;align-items:center;justify-content:center;height:75px;background-color:#edeff0}.se-media-preview-container .se-media-preview__image-thumbnail{max-width:100%;max-height:100%}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],MediaPrinterComponent);return MediaPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaSelectorComponent",{selector:"se-media-selector",template:'<div class="media-selector"><se-select [id]="id" [model]="mediaId" (modelChange)="onMediaIdChange($event)" [fetchStrategy]="fetchStrategy" [isReadOnly]="isFieldDisabled" [itemComponent]="mediaPrinterComponent"></se-select></div>',styles:["se-media-selector .se-select [has-selected-option] .toggle-button{min-height:100px}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var Qt=function(){MediaSelectorComponent.$inject=["mediaService"];function MediaSelectorComponent(e){this.mediaService=e;this.mediaPrinterComponent=Zt;this.mediaIdChange=new a.EventEmitter}MediaSelectorComponent.prototype.ngOnInit=function(){var e=this;this.fetchStrategy={fetchEntity:function(t){return e.mediaService.getMedia(t)},fetchPage:function(t,n,i){return e.mediaService.getPage(t,n,i)}}};MediaSelectorComponent.prototype.onMediaIdChange=function(e){this.mediaId=e;this.mediaIdChange.emit(e)};MediaSelectorComponent.prototype.onMediaIdChange.$inject=["id"];__decorate([a.Input(),__metadata("design:type",String)],MediaSelectorComponent.prototype,"id",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaSelectorComponent.prototype,"mediaId",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaSelectorComponent.prototype,"mediaIdChange",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],MediaSelectorComponent.prototype,"isDisabled",void 0);MediaSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-selector",template:'<div class="media-selector"><se-select [id]="id" [model]="mediaId" (modelChange)="onMediaIdChange($event)" [fetchStrategy]="fetchStrategy" [isReadOnly]="isFieldDisabled" [itemComponent]="mediaPrinterComponent"></se-select></div>',styles:["se-media-selector .se-select [has-selected-option] .toggle-button{min-height:100px}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Ut])],MediaSelectorComponent);return MediaSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaUploadFormComponent",{selector:"se-media-upload-form",template:'<div class="se-media-upload-form"><div class="se-media-upload-form__header"><div class="se-media-upload-form__header-title" translate="se.upload.image.to.library"></div><div class="se-media-upload-form__header-actions"><button type="button" class="fd-button--light se-media-upload-btn__cancel fd-button--compact" translate="se.upload.image.cancel" (click)="cancel()"></button> <button type="button" class="fd-button se-media-upload-btn__submit fd-button--compact" translate="se.upload.image.submit" (click)="uploadMedia()"></button></div></div><div class="se-media-upload-form__replace-file"><div class="se-media-upload-form__file-name">{{ image.name }}</div><se-media-file-selector [labelI18nKey]="\'se.upload.image.replace\'" [acceptedFileTypes]="acceptedFileTypes" (onFileSelect)="onFileSelect($event)"></se-media-file-selector></div><form class="se-media-upload-form__file-info"><se-media-upload-field [fieldName]="\'code\'" [fieldValue]="imageParams.code" [fieldErrors]="getErrorsForFieldByCode(\'code\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.code\'" (fieldValueChange)="onChangeFieldValue($event, \'code\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'description\'" [fieldValue]="imageParams.description" [fieldErrors]="getErrorsForFieldByCode(\'description\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.description\'" (fieldValueChange)="onChangeFieldValue($event, \'description\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'alt-text\'" [fieldValue]="imageParams.altText" [fieldErrors]="getErrorsForFieldByCode(\'altText\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.alt.text\'" (fieldValueChange)="onChangeFieldValue($event, \'altText\')"></se-media-upload-field></form><se-spinner [isSpinning]="isUploading"></se-spinner></div>',styles:[".se-media-upload-form{box-shadow:0 6px 12px rgba(0,0,0,.175);border-radius:4px}.se-media-upload-form__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding:20px}.se-media-upload-form__header-title{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-media-upload-form__replace-file{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:16px 20px 0}.se-media-upload-form__file-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:80%}.se-media-upload-form__file-info{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:16px;padding:20px}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Jt=function(){MediaUploadFormComponent.$inject=["cdr","fileValidatorFactory","mediaBackendValidationHandler","mediaUploaderService"];function MediaUploadFormComponent(e,t,n,i){this.cdr=e;this.fileValidatorFactory=t;this.mediaBackendValidationHandler=n;this.mediaUploaderService=i;this.onCancel=new a.EventEmitter;this.onSelect=new a.EventEmitter;this.onUploadSuccess=new a.EventEmitter;this.acceptedFileTypes=r.FILE_VALIDATION_CONFIG.ACCEPTED_FILE_TYPES;this.fieldErrors=[];this.imageParams=null;this.fileValidator=this.fileValidatorFactory.build([{subject:"code",message:"se.uploaded.image.code.is.required",validate:function(e){return!!e}}])}MediaUploadFormComponent.prototype.ngOnChanges=function(e){var t=e.image;if(t){var n=this.image.name;this.imageParams={code:n,description:n,altText:n}}};MediaUploadFormComponent.prototype.ngOnChanges.$inject=["changes"];MediaUploadFormComponent.prototype.getErrorsForFieldByCode=function(e){return this.fieldErrors.filter((function(t){return t.subject===e})).map((function(e){return e.message}))};MediaUploadFormComponent.prototype.getErrorsForFieldByCode.$inject=["code"];MediaUploadFormComponent.prototype.uploadMedia=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:this.fieldErrors=[];if(!this.fileValidator.validate(this.imageParams,this.fieldErrors)){return[2]}this.isUploading=true;n.label=1;case 1:n.trys.push([1,3,4,5]);return[4,this.mediaUploaderService.uploadMedia({file:this.image,code:r.stringUtils.escapeHtml(this.imageParams.code),description:r.stringUtils.escapeHtml(this.imageParams.description),altText:r.stringUtils.escapeHtml(this.imageParams.altText)})];case 2:e=n.sent();this.onMediaUploadSuccess(e);return[3,5];case 3:t=n.sent();this.onMediaUploadFail(t);return[3,5];case 4:this.isUploading=false;return[7];case 5:this.cdr.detectChanges();return[2]}}))}))};MediaUploadFormComponent.prototype.cancel=function(){this.reset();this.onCancel.emit()};MediaUploadFormComponent.prototype.onChangeFieldValue=function(e,t){this.imageParams[t]=e};MediaUploadFormComponent.prototype.onChangeFieldValue.$inject=["value","paramName"];MediaUploadFormComponent.prototype.onFileSelect=function(e){this.onSelect.emit(e)};MediaUploadFormComponent.prototype.onFileSelect.$inject=["fileList"];MediaUploadFormComponent.prototype.onMediaUploadSuccess=function(e){var t=e.uuid;this.reset();this.onUploadSuccess.emit(t)};MediaUploadFormComponent.prototype.onMediaUploadSuccess.$inject=["_a"];MediaUploadFormComponent.prototype.onMediaUploadFail=function(e){this.mediaBackendValidationHandler.handleResponse(e,this.fieldErrors)};MediaUploadFormComponent.prototype.onMediaUploadFail.$inject=["response"];MediaUploadFormComponent.prototype.reset=function(){this.imageParams=null;this.fieldErrors=[];this.isUploading=false};__decorate([a.Input(),__metadata("design:type",File)],MediaUploadFormComponent.prototype,"image",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaUploadFormComponent.prototype,"onCancel",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaUploadFormComponent.prototype,"onSelect",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],MediaUploadFormComponent.prototype,"onUploadSuccess",void 0);MediaUploadFormComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-upload-form",template:'<div class="se-media-upload-form"><div class="se-media-upload-form__header"><div class="se-media-upload-form__header-title" translate="se.upload.image.to.library"></div><div class="se-media-upload-form__header-actions"><button type="button" class="fd-button--light se-media-upload-btn__cancel fd-button--compact" translate="se.upload.image.cancel" (click)="cancel()"></button> <button type="button" class="fd-button se-media-upload-btn__submit fd-button--compact" translate="se.upload.image.submit" (click)="uploadMedia()"></button></div></div><div class="se-media-upload-form__replace-file"><div class="se-media-upload-form__file-name">{{ image.name }}</div><se-media-file-selector [labelI18nKey]="\'se.upload.image.replace\'" [acceptedFileTypes]="acceptedFileTypes" (onFileSelect)="onFileSelect($event)"></se-media-file-selector></div><form class="se-media-upload-form__file-info"><se-media-upload-field [fieldName]="\'code\'" [fieldValue]="imageParams.code" [fieldErrors]="getErrorsForFieldByCode(\'code\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.code\'" (fieldValueChange)="onChangeFieldValue($event, \'code\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'description\'" [fieldValue]="imageParams.description" [fieldErrors]="getErrorsForFieldByCode(\'description\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.description\'" (fieldValueChange)="onChangeFieldValue($event, \'description\')"></se-media-upload-field><se-media-upload-field [fieldName]="\'alt-text\'" [fieldValue]="imageParams.altText" [fieldErrors]="getErrorsForFieldByCode(\'altText\')" [isRequired]="true" [labelI18nKey]="\'se.uploaded.image.alt.text\'" (fieldValueChange)="onChangeFieldValue($event, \'altText\')"></se-media-upload-field></form><se-spinner [isSpinning]="isUploading"></se-spinner></div>',styles:[".se-media-upload-form{box-shadow:0 6px 12px rgba(0,0,0,.175);border-radius:4px}.se-media-upload-form__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding:20px}.se-media-upload-form__header-title{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-media-upload-form__replace-file{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:16px 20px 0}.se-media-upload-form__file-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:80%}.se-media-upload-form__file-info{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:16px;padding:20px}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[a.ChangeDetectorRef,r.FileValidatorFactory,jt,$t])],MediaUploadFormComponent);return MediaUploadFormComponent}();window.__smartedit__.addDecoratorPayload("Component","MediaUploadFieldComponent",{selector:"se-media-upload-field",template:'<div class="se-media-upload__file-info-field" [ngClass]="getContainerClassName()"><label class="se-control-label" [ngClass]="{ \'se-media-upload-has-error\': hasError(), required: isRequired }" [translate]="labelI18nKey"></label> <input type="text" [ngClass]="{ \'is-invalid\': hasError() }" class="fd-form__control" [attr.name]="fieldName" [ngModel]="fieldValue" (ngModelChange)="onChangeValue($event)"/> <span class="upload-field-error fd-form__message fd-form__message--error" [ngClass]="getErrorClassName()" *ngFor="let error of fieldErrors">{{ error | translate }}</span></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var en=function(){function MediaUploadFieldComponent(){this.isRequired=false;this.fieldValueChange=new a.EventEmitter}MediaUploadFieldComponent.prototype.onChangeValue=function(e){this.fieldValueChange.emit(e)};MediaUploadFieldComponent.prototype.onChangeValue.$inject=["value"];MediaUploadFieldComponent.prototype.hasError=function(){var e;return((e=this.fieldErrors)===null||e===void 0?void 0:e.length)>0};MediaUploadFieldComponent.prototype.getContainerClassName=function(){return"se-media-upload__file-info-field--"+this.fieldName};MediaUploadFieldComponent.prototype.getErrorClassName=function(){return"upload-field-error--"+this.fieldName};__decorate([a.Input(),__metadata("design:type",String)],MediaUploadFieldComponent.prototype,"fieldValue",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaUploadFieldComponent.prototype,"fieldName",void 0);__decorate([a.Input(),__metadata("design:type",Array)],MediaUploadFieldComponent.prototype,"fieldErrors",void 0);__decorate([a.Input(),__metadata("design:type",Object)],MediaUploadFieldComponent.prototype,"isRequired",void 0);__decorate([a.Input(),__metadata("design:type",String)],MediaUploadFieldComponent.prototype,"labelI18nKey",void 0);__decorate([a.Output(),__metadata("design:type",Object)],MediaUploadFieldComponent.prototype,"fieldValueChange",void 0);MediaUploadFieldComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-media-upload-field",template:'<div class="se-media-upload__file-info-field" [ngClass]="getContainerClassName()"><label class="se-control-label" [ngClass]="{ \'se-media-upload-has-error\': hasError(), required: isRequired }" [translate]="labelI18nKey"></label> <input type="text" [ngClass]="{ \'is-invalid\': hasError() }" class="fd-form__control" [attr.name]="fieldName" [ngModel]="fieldValue" (ngModelChange)="onChangeValue($event)"/> <span class="upload-field-error fd-form__message fd-form__message--error" [ngClass]="getErrorClassName()" *ngFor="let error of fieldErrors">{{ error | translate }}</span></div>',changeDetection:a.ChangeDetectionStrategy.OnPush})],MediaUploadFieldComponent);return MediaUploadFieldComponent}();var tn=function(){function MediaModule(){}MediaModule=__decorate([a.NgModule({imports:[r.TranslationModule.forChild(),g.CommonModule,h.FormsModule,r.TooltipModule,r.SelectModule,r.SpinnerModule,r.GenericEditorDropdownModule],providers:[Ut,$t,jt],declarations:[Vt,qt,Kt,Xt,Qt,Zt,Dt,Yt,Ht,Gt,Jt,en,Ot,xt,Lt,kt],entryComponents:[Vt,qt,Kt,Xt,Qt,Zt,Dt,Yt,Ht,Gt,Jt,en,Ot,xt,kt]})],MediaModule);return MediaModule}();window.__smartedit__.addDecoratorPayload("Component","InfoPageNameComponent",{selector:"se-info-page-name",template:'<div class="se-page-info__name"><se-homepage-icon *ngIf="field.qualifier === \'name\'" [cmsPage]="cmsPage" [uriContext]="uriContext"></se-homepage-icon><div id="{{ field.qualifier }}-homepage" class="se-page-info__name-value fd-form-control" [title]="field.qualifier">{{ model[qualifier] }}</div></div>',styles:[".se-page-info__name{display:flex;flex-direction:row;align-items:center}.se-page-info__name-value{word-break:break-all;white-space:normal}"]});var nn=function(){InfoPageNameComponent.$inject=["catalogService","pageService","data"];function InfoPageNameComponent(e,t,n){this.catalogService=e;this.pageService=t;this.model=n.model,this.field=n.field,this.qualifier=n.qualifier}InfoPageNameComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.catalogService.retrieveUriContext(),this.pageService.getCurrentPageInfo()])];case 1:e=i.sent(),t=e[0],n=e[1];this.uriContext=t;this.cmsPage=n;return[2]}}))}))};InfoPageNameComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-info-page-name",template:'<div class="se-page-info__name"><se-homepage-icon *ngIf="field.qualifier === \'name\'" [cmsPage]="cmsPage" [uriContext]="uriContext"></se-homepage-icon><div id="{{ field.qualifier }}-homepage" class="se-page-info__name-value fd-form-control" [title]="field.qualifier">{{ model[qualifier] }}</div></div>',styles:[".se-page-info__name{display:flex;flex-direction:row;align-items:center}.se-page-info__name-value{word-break:break-all;white-space:normal}"]}),__param(2,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[r.ICatalogService,o.IPageService,Object])],InfoPageNameComponent);return InfoPageNameComponent}();window.__smartedit__.addDecoratorPayload("Component","LinkToggleComponent",{selector:"se-link-toggle",template:'<div class="se-link-toggle"><div class="se-link-toggle__row"><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="external-link"><input class="fd-form__control se-link-toggle__input" id="external-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="true"/> {{ \'se.editor.linkto.external.label\' | translate}}</label></div><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="internal-link"><input class="fd-form__control se-link-toggle__input" id="internal-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="false"/> {{ \'se.editor.linkto.internal.label\' | translate}}</label></div></div><input class="fd-form-control" id="urlLink" name="urlLink" type="text" [(ngModel)]="model.linkToggle.urlLink" [ngClass]="{ \'has-error\': field.hasErrors }"/></div>',styles:[".se-link-toggle__row{display:flex;flex-direction:row;align-items:center}.se-form-control-row{margin-right:16px}.se-control-label.se-link-toggle__label{display:flex;flex-direction:row;align-items:center;margin:0}.fd-form__control.se-link-toggle__input{margin:0 4px 0 0}"]});var on=function(){LinkToggleComponent.$inject=["data"];function LinkToggleComponent(e){this.field=e.field,this.model=e.model;if(!this.model.linkToggle){this.model.linkToggle={}}if(this.model.linkToggle.external===undefined){this.model.linkToggle.external=true}}LinkToggleComponent.prototype.clearUrlLink=function(){this.model.linkToggle.urlLink=""};LinkToggleComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-link-toggle",template:'<div class="se-link-toggle"><div class="se-link-toggle__row"><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="external-link"><input class="fd-form__control se-link-toggle__input" id="external-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="true"/> {{ \'se.editor.linkto.external.label\' | translate}}</label></div><div class="se-form-control-row se-form-control-row--action"><label class="se-control-label se-link-toggle__label" for="internal-link"><input class="fd-form__control se-link-toggle__input" id="internal-link" name="linktoggle" type="radio" [(ngModel)]="model.linkToggle.external" (ngModelChange)="clearUrlLink()" [value]="false"/> {{ \'se.editor.linkto.internal.label\' | translate}}</label></div></div><input class="fd-form-control" id="urlLink" name="urlLink" type="text" [(ngModel)]="model.linkToggle.urlLink" [ngClass]="{ \'has-error\': field.hasErrors }"/></div>',styles:[".se-link-toggle__row{display:flex;flex-direction:row;align-items:center}.se-form-control-row{margin-right:16px}.se-control-label.se-link-toggle__label{display:flex;flex-direction:row;align-items:center;margin:0}.fd-form__control.se-link-toggle__input{margin:0 4px 0 0}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],LinkToggleComponent);return LinkToggleComponent}();var rn="selected_node";window.__smartedit__.addDecoratorPayload("Component","NavigationNodeSelectorComponent",{selector:"se-navigation-node-selector",template:'<div *ngIf="isReady"><div *ngIf="cmsItem[qualifier]" class="se-navigation-mode"><div class="se-navigation__node"><se-breadcrumb class="se-navigation__node-breadcrumb" [nodeUuid]="cmsItem[qualifier]" [uriContext]="uriContext"></se-breadcrumb><div class="se-navigation__node-button"><button class="btn btn-link btn-block se-navigation__button" (click)="remove($event)" [disabled]="!field.editable" translate="se.cms.navigationcomponent.management.node.selection.remove.action"></button></div></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="true" [rootNodeUid]="nodeUid"></se-navigation-editor-tree></div><div *ngIf="!cmsItem[qualifier]"><label translate="se.cms.navigationcomponent.management.node.selection.invite.action"></label><se-navigation-node-picker [uriContext]="uriContext" [editable]="field.editable"></se-navigation-node-picker></div></div>',styles:['.se-navigation__node{display:flex;background-color:#fafafa;padding:0 20px;margin:0 -20px 20px -20px;border-top:1px solid #eeeeef;border-bottom:1px solid #eeeeef}.se-navigation__node-breadcrumb{flex:10}.se-navigation__node-breadcrumb .se-breadcrumb{margin-bottom:0;border:none}.se-navigation__node-button{flex:2;display:flex}.se-navigation__button{font-size:15px;font-family:"72",web,"Open Sans",sans-serif;font-weight:700;align-self:flex-end;text-transform:capitalize}se-navigation-node-selector .se-navigation-editor-tree{margin:0}'],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var an=function(){NavigationNodeSelectorComponent.$inject=["data","catalogService","cmsitemsRestService","systemEventService","cdr"];function NavigationNodeSelectorComponent(e,t,n,i,o){var r;this.data=e;this.catalogService=t;this.cmsitemsRestService=n;this.systemEventService=i;this.cdr=o;this.isReady=false;this.nodeUid=null;this.uriContext=null;r=this.data,this.field=r.field,this.cmsItem=r.model,this.qualifier=r.qualifier}NavigationNodeSelectorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=i.sent();this.uriContext=e;if(!this.cmsItem[this.qualifier])return[3,3];return[4,this.cmsitemsRestService.getById(this.cmsItem[this.qualifier])];case 2:t=i.sent();this.nodeUid=t.uid;this.isReady=true;return[3,4];case 3:this.isReady=true;i.label=4;case 4:this.unregisterSubscription=this.systemEventService.subscribe(rn,(function(e,t){var i=t.nodeUid,o=t.nodeUuid;n.nodeUid=i;n.cmsItem[n.qualifier]=o;n.cdr.detectChanges()}));this.cdr.detectChanges();return[2]}}))}))};NavigationNodeSelectorComponent.prototype.ngOnDestroy=function(){this.unregisterSubscription()};NavigationNodeSelectorComponent.prototype.remove=function(){delete this.cmsItem[this.qualifier];this.cdr.detectChanges()};NavigationNodeSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-node-selector",template:'<div *ngIf="isReady"><div *ngIf="cmsItem[qualifier]" class="se-navigation-mode"><div class="se-navigation__node"><se-breadcrumb class="se-navigation__node-breadcrumb" [nodeUuid]="cmsItem[qualifier]" [uriContext]="uriContext"></se-breadcrumb><div class="se-navigation__node-button"><button class="btn btn-link btn-block se-navigation__button" (click)="remove($event)" [disabled]="!field.editable" translate="se.cms.navigationcomponent.management.node.selection.remove.action"></button></div></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="true" [rootNodeUid]="nodeUid"></se-navigation-editor-tree></div><div *ngIf="!cmsItem[qualifier]"><label translate="se.cms.navigationcomponent.management.node.selection.invite.action"></label><se-navigation-node-picker [uriContext]="uriContext" [editable]="field.editable"></se-navigation-node-picker></div></div>',styles:['.se-navigation__node{display:flex;background-color:#fafafa;padding:0 20px;margin:0 -20px 20px -20px;border-top:1px solid #eeeeef;border-bottom:1px solid #eeeeef}.se-navigation__node-breadcrumb{flex:10}.se-navigation__node-breadcrumb .se-breadcrumb{margin-bottom:0;border:none}.se-navigation__node-button{flex:2;display:flex}.se-navigation__button{font-size:15px;font-family:"72",web,"Open Sans",sans-serif;font-weight:700;align-self:flex-end;text-transform:capitalize}se-navigation-node-selector .se-navigation-editor-tree{margin:0}'],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,r.ICatalogService,o.CmsitemsRestService,r.SystemEventService,a.ChangeDetectorRef])],NavigationNodeSelectorComponent);return NavigationNodeSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","PageTypeEditorComponent",{selector:"se-page-type-editor",template:'<div class="se-edit-page-info__basic-tab"><div class="se-edit-page-info__page-type"><label class="se-control-label" translate="se.cms.pageinfo.page.type"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.typeCode }}</div></div><div class="se-edit-page-info__page-template"><label class="se-control-label" translate="se.cms.pageinfo.page.template"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.template }}</div></div></div>',styles:[".se-edit-page-info__basic-tab{display:grid;grid-template-columns:repeat(1,1fr)}"]});var sn=function(){PageTypeEditorComponent.$inject=["data"];function PageTypeEditorComponent(e){this.model=e.model}PageTypeEditorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-type-editor",template:'<div class="se-edit-page-info__basic-tab"><div class="se-edit-page-info__page-type"><label class="se-control-label" translate="se.cms.pageinfo.page.type"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.typeCode }}</div></div><div class="se-edit-page-info__page-template"><label class="se-control-label" translate="se.cms.pageinfo.page.template"></label><div class="form-readonly-text form-readonly-text__tight">{{ model.template }}</div></div></div>',styles:[".se-edit-page-info__basic-tab{display:grid;grid-template-columns:repeat(1,1fr)}"]}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object])],PageTypeEditorComponent);return PageTypeEditorComponent}();window.__smartedit__.addDecoratorPayload("Component","SingeActiveCatalogAwareItemSelectorItemRendererComponent",{selector:"se-single-active-catalog-aware-item-selector-item-renderer",template:'\n        <span class="se-single-catalog-item">\n            <span\n                class="se-single-catalog-item__label"\n                title="{{ data.item.label | seL10n | async }}"\n                >{{ data.item.label | seL10n | async }}</span\n            >\n            <span title="{{ \'se.cms.catalogawareitem.itemtype.code\' | translate }}">\n                {{ data.item.code }}</span\n            >\n        </span>\n    '});var cn=function(){SingeActiveCatalogAwareItemSelectorItemRendererComponent.$inject=["data"];function SingeActiveCatalogAwareItemSelectorItemRendererComponent(e){this.data=e}SingeActiveCatalogAwareItemSelectorItemRendererComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-single-active-catalog-aware-item-selector-item-renderer",template:'\n        <span class="se-single-catalog-item">\n            <span\n                class="se-single-catalog-item__label"\n                title="{{ data.item.label | seL10n | async }}"\n                >{{ data.item.label | seL10n | async }}</span\n            >\n            <span title="{{ \'se.cms.catalogawareitem.itemtype.code\' | translate }}">\n                {{ data.item.code }}</span\n            >\n        </span>\n    '}),__param(0,a.Inject(r.ITEM_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],SingeActiveCatalogAwareItemSelectorItemRendererComponent);return SingeActiveCatalogAwareItemSelectorItemRendererComponent}();var ln;(function(e){e["SingleOnlineProductSelector"]="product";e["SingleOnlineCategorySelector"]="category"})(ln||(ln={}));window.__smartedit__.addDecoratorPayload("Component","SingleActiveCatalogAwareItemSelectorComponent",{selector:"se-single-active-catalog-aware-item-selector",template:'<div *ngIf="propertyType"><div id="product-catalog"><label class="se-control-label" [ngClass]="{ \'required\': field.required }" *ngIf="catalogs.length === 1">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id="se-catalog-selector-dropdown" *ngIf="catalogs.length > 1" [field]="productCatalogField" [qualifier]="\'productCatalog\'" [model]="model"></se-generic-editor-dropdown></div><div><label class="se-control-label" [translate]="mainDropDownI18nKey"></label><se-generic-editor-dropdown id="se-items-selector-dropdown" [field]="field" [qualifier]="qualifier" [model]="model" [itemComponent]="itemComponent" [(reset)]="reset"></se-generic-editor-dropdown></div></div><div class="product-catalog-item-type-missing" *ngIf="!propertyType" translate="se.cms.catalogawareitem.itemtype.notsupported"></div>',styles:["se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:1fr auto;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}"],encapsulation:a.ViewEncapsulation.None});var dn=function(){SingleActiveCatalogAwareItemSelectorComponent.$inject=["data","catalogService"];function SingleActiveCatalogAwareItemSelectorComponent(e,t){var n;this.data=e;this.catalogService=t;n=this.data,this.editor=n.editor,this.field=n.field,this.model=n.model,this.qualifier=n.qualifier;this.catalogName={};this.catalogs=[];this.itemComponent=cn}SingleActiveCatalogAwareItemSelectorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.augmentDropdownAttributes();return[2,this.initProductCatalogs()]}))}))};SingleActiveCatalogAwareItemSelectorComponent.prototype.ngDoCheck=function(){if(this.catalogs.length>1&&this.oldProductCatalog!==this.model.productCatalog){if(typeof this.reset==="function"){this.reset(true)}this.oldProductCatalog=this.model.productCatalog}};SingleActiveCatalogAwareItemSelectorComponent.prototype.augmentDropdownAttributes=function(){this.propertyType=this.getFieldPropertyType(this.field);if(this.propertyType){this.productCatalogField={idAttribute:"catalogId",labelAttributes:["name"],editable:true,propertyType:"productCatalog"};this.mainDropDownI18nKey=this.field.i18nKey;delete this.field.i18nKey;this.field.paged=true;this.field.editable=true;this.field.idAttribute="uid";this.field.labelAttributes=["name"];this.field.dependsOn="productCatalog";this.field.propertyType=this.propertyType}};SingleActiveCatalogAwareItemSelectorComponent.prototype.initProductCatalogs=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.catalogService.getProductCatalogsBySiteKey(o.CONTEXT_SITE_ID)];case 1:e=t.sent();this.catalogs=e;if(this.catalogs.length===1){this.model.productCatalog=this.catalogs[0].catalogId;this.editor.form.pristine.productCatalog=this.catalogs[0].catalogId;this.catalogName=this.catalogs[0].name}return[2]}}))}))};SingleActiveCatalogAwareItemSelectorComponent.prototype.getFieldPropertyType=function(e){var t=e.cmsStructureType;return ln[t]};SingleActiveCatalogAwareItemSelectorComponent.prototype.getFieldPropertyType.$inject=["field"];SingleActiveCatalogAwareItemSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-single-active-catalog-aware-item-selector",template:'<div *ngIf="propertyType"><div id="product-catalog"><label class="se-control-label" [ngClass]="{ \'required\': field.required }" *ngIf="catalogs.length === 1">{{ catalogName | seL10n | async }}</label><se-generic-editor-dropdown id="se-catalog-selector-dropdown" *ngIf="catalogs.length > 1" [field]="productCatalogField" [qualifier]="\'productCatalog\'" [model]="model"></se-generic-editor-dropdown></div><div><label class="se-control-label" [translate]="mainDropDownI18nKey"></label><se-generic-editor-dropdown id="se-items-selector-dropdown" [field]="field" [qualifier]="qualifier" [model]="model" [itemComponent]="itemComponent" [(reset)]="reset"></se-generic-editor-dropdown></div></div><div class="product-catalog-item-type-missing" *ngIf="!propertyType" translate="se.cms.catalogawareitem.itemtype.notsupported"></div>',styles:["se-single-active-catalog-aware-item-selector .se-single-catalog-item{display:grid;grid-template-columns:1fr auto;grid-column-gap:1rem}se-single-active-catalog-aware-item-selector .se-single-catalog-item__label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}se-single-active-catalog-aware-item-selector .selected-item>.se-item-printer{width:100%;padding-right:12px}"],encapsulation:a.ViewEncapsulation.None}),__param(0,a.Inject(r.GENERIC_EDITOR_WIDGET_DATA)),__metadata("design:paramtypes",[Object,r.ICatalogService])],SingleActiveCatalogAwareItemSelectorComponent);return SingleActiveCatalogAwareItemSelectorComponent}();var pn=function(){CmsGenericEditorConfigurationService.$inject=["editorFieldMappingService","genericEditorTabService"];function CmsGenericEditorConfigurationService(e,t){var n=this;this.editorFieldMappingService=e;this.genericEditorTabService=t;this.DEFAULT_PAGE_TAB_ID="information";this.CATEGORIES={PAGE:"PAGE",COMPONENT:"COMPONENT"};this._defaultTabPredicate=function(e){return e.category===n.CATEGORIES.PAGE?n.DEFAULT_PAGE_TAB_ID:null};this._isPagePredicate=function(e,t,i){return i.category===n.CATEGORIES.PAGE};this._isComponentPredicate=function(e,t,i){return i.category===n.CATEGORIES.COMPONENT}}CmsGenericEditorConfigurationService.prototype.setDefaultEditorFieldMappings=function(){this.editorFieldMappingService.addFieldMapping("Media",null,null,{component:Ot});this.editorFieldMappingService.addFieldMapping("MediaContainer",null,null,{component:xt});this.editorFieldMappingService.addFieldMapping("NavigationNodeSelector",null,null,{component:an});this.editorFieldMappingService.addFieldMapping("MultiProductSelector",null,null,{template:"multiProductSelectorTemplate.html"});this.editorFieldMappingService.addFieldMapping("MultiCategorySelector",null,null,{template:"multiCategorySelectorTemplate.html"});this.editorFieldMappingService.addFieldMapping("CMSLinkToSelect",null,null,{component:gt});this.editorFieldMappingService.addFieldMapping("SingleOnlineProductSelector",null,null,{component:dn});this.editorFieldMappingService.addFieldMapping("SingleOnlineCategorySelector",null,null,{component:dn});this.editorFieldMappingService.addFieldMapping("CMSItemDropdown",null,null,{template:"cmsItemDropdownWrapperTemplate.html"});this.editorFieldMappingService.addFieldMapping("CMSComponentRestrictionsEditor",null,null,{component:We});this.editorFieldMappingService.addFieldMapping("PageRestrictionsEditor",null,"restrictions",{component:st});this.editorFieldMappingService.addFieldMapping("DisplayConditionEditor",null,"displayCondition",{component:Me,hidePrefixLabel:true});this.editorFieldMappingService.addFieldMapping("ShortString",this._isPagePredicate,"typeCode",{component:sn,hidePrefixLabel:true});this.editorFieldMappingService.addFieldMapping("InfoPageName",this._isPagePredicate,null,{component:nn});this.editorFieldMappingService.addFieldMapping("PageInfoPageName",this._isPagePredicate,null,{template:"pageInfoPageNameWrapperTemplate.html"});this.editorFieldMappingService.addFieldMapping("Boolean",null,"visible",{component:r.BooleanComponent,i18nKey:"type.component.abstractcmscomponent.visible.name"});this.editorFieldMappingService.addFieldMapping("LinkToggle",null,null,{component:on});this.editorFieldMappingService.addFieldMapping("RestrictionsList",null,null,{component:bt,hidePrefixLabel:true});this.editorFieldMappingService.addFieldMapping("DuplicatePrimaryNonContentPageMessage",null,null,{component:Ct,hidePrefixLabel:true});this.editorFieldMappingService.addFieldMapping("DuplicatePrimaryContentPage",null,null,{component:St,hidePrefixLabel:false});this.editorFieldMappingService.addFieldMapping("MissingPrimaryContentPage",null,null,{component:yt,hidePrefixLabel:false});this.editorFieldMappingService.addFieldMapping("WorkflowCreateVersionField",null,null,{component:Pt,hidePrefixLabel:false});this.editorFieldMappingService.addFieldMapping("SlotSharedCloneActionField",null,null,{component:wt,hidePrefixLabel:false});this.editorFieldMappingService.addFieldMapping("SlotSharedSlotTypeField",null,null,{component:Et,hidePrefixLabel:false})};CmsGenericEditorConfigurationService.prototype.setDefaultTabsConfiguration=function(){this.genericEditorTabService.configureTab("default",{priority:5});this.genericEditorTabService.configureTab("information",{priority:5});this.genericEditorTabService.configureTab("administration",{priority:4})};CmsGenericEditorConfigurationService.prototype.setDefaultTabFieldMappings=function(){this.genericEditorTabService.addComponentTypeDefaultTabPredicate(this._defaultTabPredicate);this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"visible","visibility");this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"restrictions","visibility");this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"onlyOneRestrictionMustApply","visibility");this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"uid","basicinfo");this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"id","basicinfo");this.editorFieldMappingService.addFieldTabMapping(null,this._isComponentPredicate,"modifiedtime","basicinfo");this.editorFieldMappingService.addFieldTabMapping("DateTime",this._isComponentPredicate,"creationtime","basicinfo");this.editorFieldMappingService.addFieldTabMapping("DisplayConditionEditor",this._isPagePredicate,"displayCondition","displaycondition");this.editorFieldMappingService.addFieldTabMapping(null,this._isPagePredicate,"restrictions","restrictions")};CmsGenericEditorConfigurationService=__decorate([r.SeInjectable(),__metadata("design:paramtypes",[r.EditorFieldMappingService,r.GenericEditorTabService])],CmsGenericEditorConfigurationService);return CmsGenericEditorConfigurationService}();var un=function(){function CmsGenericEditorConfigurationServiceModule(){}CmsGenericEditorConfigurationServiceModule=__decorate([r.SeModule({imports:[r.GenericEditorModule,r.FunctionsModule],providers:[pn]})],CmsGenericEditorConfigurationServiceModule);return CmsGenericEditorConfigurationServiceModule}();window.__smartedit__.addDecoratorPayload("Component","NavigationEditorLinkComponent",{selector:"se-navigation-editor-link",template:'\n        <div class="nav-management-link-container">\n            <a\n                class="nav-management-link-item__link se-catalog-version__link"\n                [href]="getLink()"\n                translate="se.cms.cataloginfo.navigationmanagement"\n            ></a>\n        </div>\n    '});var mn=function(){NavigationEditorLinkComponent.$inject=["catalogDetails"];function NavigationEditorLinkComponent(e){this.catalogDetails=e}NavigationEditorLinkComponent.prototype.getLink=function(){var e=this.catalogDetails,t=e.siteId,n=e.catalog.catalogId,i=e.catalogVersion.version;return"#!/navigations/"+t+"/"+n+"/"+i};NavigationEditorLinkComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-editor-link",template:'\n        <div class="nav-management-link-container">\n            <a\n                class="nav-management-link-item__link se-catalog-version__link"\n                [href]="getLink()"\n                translate="se.cms.cataloginfo.navigationmanagement"\n            ></a>\n        </div>\n    '}),__param(0,a.Inject(r.CATALOG_DETAILS_ITEM_DATA)),__metadata("design:paramtypes",[Object])],NavigationEditorLinkComponent);return NavigationEditorLinkComponent}();var gn=[{subject:"name",errorCode:"field.already.exist",structure:{cmsStructureType:"ShortString",collection:false,editable:true,i18nKey:"type.cmsitem.name.name",localized:false,paged:false,qualifier:"name",required:true}},{subject:"label",errorCode:"default.page.label.already.exist",structure:{cmsStructureType:"DuplicatePrimaryContentPage",collection:false,editable:true,i18nKey:"se.cms.page.restore.content.duplicate.primaryforvariation.label",localized:false,paged:false,qualifier:"label",required:true}},{subject:"label",errorCode:"default.page.does.not.exist",structure:{cmsStructureType:"MissingPrimaryContentPage",collection:false,editable:true,i18nKey:"se.cms.page.restore.content.noprimaryforvariation.label",localized:false,paged:false,qualifier:"label",required:true}},{subject:"typeCode",errorCode:"default.page.already.exist",structure:{cmsStructureType:"DuplicatePrimaryNonContentPageMessage",collection:false,editable:true,i18nKey:"type.cmsitem.label.name",localized:false,paged:false,qualifier:"replace",required:true}}];var hn=[{subject:"typeCode",errorCode:"default.page.does.not.exist",messageKey:"se.cms.page.restore.noprimaryforvariation.error"}];var vn=function(){PageRestoreModalService.$inject=["alertService","confirmationModalService","genericEditorModalService","crossFrameEventService","pageRestoredAlertService","translate"];function PageRestoreModalService(e,t,n,i,o,r){this.alertService=e;this.confirmationModalService=t;this.genericEditorModalService=n;this.crossFrameEventService=i;this.pageRestoredAlertService=o;this.translate=r}PageRestoreModalService.prototype.handleRestoreValidationErrors=function(e,t){var n=this;var i=this.getActionableErrors(t);var o=this.getNonActionableError(t);var a=s.difference(t,i,o);if(a.length>0){this.showErrorAlert(a)}else if(o.length>0){this.showConfirmationMessage(o)}else{this.showRestoreEditor(e,i).then((function(){n.crossFrameEventService.publish(r.EVENT_CONTENT_CATALOG_UPDATE)}))}};PageRestoreModalService.prototype.handleRestoreValidationErrors.$inject=["pageInfo","errors"];PageRestoreModalService.prototype.showRestoreEditor=function(e,t){var n=this;var i=this.getRestoreEditorStructureFields(t);var o={content:e,title:"se.cms.page.restore.page.title",componentId:e.uid,componentUuid:e.uuid,componentType:e.typeCode,structure:this.buildStructure(i)};this.forceErrorsDisplayInEditor(e.componentUuid,t);return this.genericEditorModalService.open(o,(function(){n.pageRestoredAlertService.displayPageRestoredSuccessAlert(e);n.crossFrameEventService.publish(r.EVENTS.PAGE_RESTORED)}),(function(t,o){var r=n.getActionableErrors(t);var a=s.difference(t,r);if(a.length>0){n.showErrorAlert(a)}else{i=s.concat(i,n.getRestoreEditorStructureFields(t));o.structure=n.buildStructure(i);n.forceErrorsDisplayInEditor(e.componentUuid,t)}}),{modalPanelClass:"modal-stretched"})};PageRestoreModalService.prototype.showRestoreEditor.$inject=["pageInfo","errors"];PageRestoreModalService.prototype.forceErrorsDisplayInEditor=function(e,t){var n=this;setTimeout((function(){n.crossFrameEventService.publish(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:t,targetGenericEditorId:e})}),0)};PageRestoreModalService.prototype.forceErrorsDisplayInEditor.$inject=["editorId","errors"];PageRestoreModalService.prototype.buildStructure=function(e){return{attributes:e,category:"PAGE"}};PageRestoreModalService.prototype.buildStructure.$inject=["structureFields"];PageRestoreModalService.prototype.getRestoreEditorStructureFields=function(e){var t=this;return e.reduce((function(e,n){var i=gn.find((function(e){return t.isSupportedError(n)&&t.isEqualTo(n,e)}));e.push(i.structure);return e}),[])};PageRestoreModalService.prototype.getRestoreEditorStructureFields.$inject=["errors"];PageRestoreModalService.prototype.showConfirmationMessage=function(e){var t=this;var n=e.reduce((function(e,n){var i=hn.find((function(e){return t.isSupportedError(n)&&t.isEqualTo(n,e)}));return e+t.translate.instant(i.messageKey)+" "}),"");var i={};i.description=n.trim();i.showOkButtonOnly=true;i.title="se.cms.page.restore.error.confirmationmodal.title";this.confirmationModalService.confirm(i)};PageRestoreModalService.prototype.showConfirmationMessage.$inject=["errors"];PageRestoreModalService.prototype.showErrorAlert=function(e){var t=e.reduce((function(e,t){return e+t.message+" "}),"");this.alertService.showDanger(t.trim())};PageRestoreModalService.prototype.showErrorAlert.$inject=["errors"];PageRestoreModalService.prototype.getActionableErrors=function(e){var t=this;return e.filter((function(e){return gn.some((function(n){return t.isSupportedError(e)&&t.isEqualTo(e,n)}))}))};PageRestoreModalService.prototype.getActionableErrors.$inject=["errors"];PageRestoreModalService.prototype.getNonActionableError=function(e){var t=this;return e.filter((function(e){return hn.some((function(n){return t.isSupportedError(e)&&t.isEqualTo(e,n)}))}))};PageRestoreModalService.prototype.getNonActionableError.$inject=["errors"];PageRestoreModalService.prototype.isSupportedError=function(e){return e.type==="ValidationError"};PageRestoreModalService.prototype.isSupportedError.$inject=["error"];PageRestoreModalService.prototype.isEqualTo=function(e,t){return e.subject===t.subject&&e.errorCode===t.errorCode};PageRestoreModalService.prototype.isEqualTo.$inject=["error1","error2"];PageRestoreModalService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IAlertService,r.IConfirmationModalService,Z,r.CrossFrameEventService,ae,d.TranslateService])],PageRestoreModalService);return PageRestoreModalService}();var fn;(function(e){e["TRASH_PAGE"]="TRASH_PAGE"})(fn||(fn={}));var _n=function(){ManagePageService.$inject=["logService","smarteditRoutingService","alertService","cmsitemsRestService","systemEventService","crossFrameEventService","pageInfoService","confirmationModalService","pagesVariationsRestService","waitDialogService","pageRestoreModalService","pageRestoredAlertService","homepageService","workflowService","catalogService","restServiceFactory","sharedDataService","catalogVersionRestService"];function ManagePageService(e,t,n,i,a,s,c,l,d,p,u,m,g,h,v,f,_,y){this.logService=e;this.smarteditRoutingService=t;this.alertService=n;this.cmsitemsRestService=i;this.systemEventService=a;this.crossFrameEventService=s;this.pageInfoService=c;this.confirmationModalService=l;this.pagesVariationsRestService=d;this.waitDialogService=p;this.pageRestoreModalService=u;this.pageRestoredAlertService=m;this.homepageService=g;this.workflowService=h;this.catalogService=v;this.restServiceFactory=f;this.sharedDataService=_;this.catalogVersionRestService=y;this.resourcePageOperationsURI="/cmssmarteditwebservices/v1/sites/"+r.PAGE_CONTEXT_SITE_ID+"/catalogs/"+o.PAGE_CONTEXT_CATALOG+"/pages/:pageId/operations"}ManagePageService.prototype.getSoftDeletedPagesCount=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:t={pageSize:10,currentPage:0,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted",catalogId:e.CONTEXT_CATALOG,catalogVersion:e.CONTEXT_CATALOG_VERSION,fields:"BASIC"};return[4,this.cmsitemsRestService.get(t)];case 1:n=i.sent();return[2,n.pagination.totalCount]}}))}))};ManagePageService.prototype.getSoftDeletedPagesCount.$inject=["uriContext"];ManagePageService.prototype.softDeletePage=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,a,c,l;return __generator(this,(function(d){switch(d.label){case 0:n=s.cloneDeep(e);i={catalogId:t.CURRENT_CONTEXT_CATALOG,catalogVersion:t.CURRENT_CONTEXT_CATALOG_VERSION,siteId:t.CURRENT_CONTEXT_SITE_ID};return[4,this.getConfirmationModalDescription(n,t)];case 1:a=d.sent();return[4,this.confirmSoftDelete(a,e.name)];case 2:c=d.sent();if(!c){return[2]}d.label=3;case 3:d.trys.push([3,5,,6]);n.identifier=e.uuid;n.pageStatus=o.CMSPageStatus.DELETED;return[4,this.cmsitemsRestService.update(n)];case 4:d.sent();this.crossFrameEventService.publish(r.EVENTS.PAGE_DELETED);this.alertService.showSuccess({message:"se.cms.actionitem.page.trash.alert.success.description",messagePlaceholders:{pageName:e.name}});this.smarteditRoutingService.go("/ng/pages/:siteId/:catalogId/:catalogVersion".replace(":siteId",i.siteId).replace(":catalogId",i.catalogId).replace(":catalogVersion",i.catalogVersion));return[3,6];case 5:l=d.sent();this.logService.warn("Something went wrong when soft deleting page",l);return[3,6];case 6:return[2]}}))}))};ManagePageService.prototype.softDeletePage.$inject=["pageInfo","uriContext"];ManagePageService.prototype.hardDeletePage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.confirmHardDelete(e.name)];case 1:t=n.sent();if(!t){return[2]}return[4,this.cmsitemsRestService.delete(e.uuid)];case 2:n.sent();this.alertService.showSuccess("se.cms.page.permanently.delete.alert.success");this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE);this.crossFrameEventService.publish(r.EVENTS.PAGE_DELETED);return[2]}}))}))};ManagePageService.prototype.hardDeletePage.$inject=["pageInfo"];ManagePageService.prototype.restorePage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,a;return __generator(this,(function(c){switch(c.label){case 0:t=s.cloneDeep(e);t.pageStatus=o.CMSPageStatus.ACTIVE;t.identifier=e.uuid;this.waitDialogService.showWaitModal(null);c.label=1;case 1:c.trys.push([1,3,,4]);return[4,this.cmsitemsRestService.update(t,{headers:{"Ignore-Interceptor":"NonValidationErrorInterceptor"}})];case 2:n=c.sent();this.waitDialogService.hideWaitModal();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE,n);this.pageRestoredAlertService.displayPageRestoredSuccessAlert(t);this.crossFrameEventService.publish(r.EVENTS.PAGE_RESTORED);return[3,4];case 3:i=c.sent();a=i.error.errors;this.waitDialogService.hideWaitModal();this.pageRestoreModalService.handleRestoreValidationErrors(t,a);return[3,4];case 4:return[2]}}))}))};ManagePageService.prototype.restorePage.$inject=["pageInfo"];ManagePageService.prototype.isPageTrashable=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,Promise.all([this.hasFallbackHomepageOrIsPrimaryWithoutVariations(e,t),this.workflowService.isPageInWorkflow(e)])];case 1:n=a.sent(),i=n[0],o=n[1];return[2,i&&!o];case 2:r=a.sent();return[2,false];case 3:return[2]}}))}))};ManagePageService.prototype.isPageTrashable.$inject=["cmsPage","uriContext"];ManagePageService.prototype.isPageCloneable=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c,l;return __generator(this,(function(d){switch(d.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:n=d.sent().catalogDescriptor;i={CURRENT_CONTEXT_SITE_ID:n.siteId,CURRENT_CONTEXT_CATALOG:n.catalogId,CURRENT_CONTEXT_CATALOG_VERSION:n.catalogVersion};return[4,Promise.all([this.catalogService.getContentCatalogsForSite(n.siteId),this.cmsitemsRestService.getById(e),this.catalogVersionRestService.getCloneableTargets(i)])];case 2:o=d.sent(),a=o[0],s=o[1],c=o[2];l=a.reduce((function(e,t){if(t.parents&&t.parents.length){e=e.concat(t.parents)}return e}),__spreadArrays(a)).reduce((function(e,t){return e.concat(t.versions)}),[]).find((function(e){return e.uuid===t}));if(l===null||l===void 0?void 0:l.active){return[2,c.versions.length>0&&s.defaultPage&&!s.copyToCatalogsDisabled]}return[2,c.versions.length>0]}}))}))};ManagePageService.prototype.isPageCloneable.$inject=["pageUuid","catalogVersion"];ManagePageService.prototype.getDisabledTrashTooltipMessage=function(e,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r;return __generator(this,(function(a){switch(a.label){case 0:i="se.cms.tooltip.movetotrash";return[4,this.workflowService.isPageInWorkflow(e)];case 1:o=a.sent();return[4,this.homepageService.getHomepageType(e,n)];case 2:r=a.sent();if(r===t.HomepageType.CURRENT){i="se.cms.tooltip.current.homepage.movetotrash"}else if(r===t.HomepageType.OLD){i="se.cms.tooltip.old.homepage.movetotrash"}else if(o){i="se.cms.tooltip.page.in.workflow.movetotrash"}return[2,i]}}))}))};ManagePageService.prototype.getDisabledTrashTooltipMessage.$inject=["pageInfo","uriContext"];ManagePageService.prototype.trashPageInActiveCatalogVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:t=r.sent();return[4,this.catalogService.getContentCatalogActiveVersion(t)];case 2:n=r.sent();return[4,this.confirmTrashingPageInActiveCatalogVersion(n)];case 3:i=r.sent();if(!i){return[2]}r.label=4;case 4:r.trys.push([4,6,,7]);this.pageOperationsRESTService=this.restServiceFactory.get(this.resourcePageOperationsURI.replace(":pageId",e));return[4,this.pageOperationsRESTService.save({operation:"TRASH_PAGE",sourceCatalogVersion:t.CURRENT_CONTEXT_CATALOG_VERSION,targetCatalogVersion:n})];case 5:r.sent();this.alertService.showSuccess({message:"se.cms.sync.page.status.success.alert",messagePlaceholders:{pageId:e,catalogVersion:n}});return[3,7];case 6:o=r.sent();this.logService.warn("trashPageInActiveCatalogVersion - page could not be trashed",o);return[3,7];case 7:return[2]}}))}))};ManagePageService.prototype.trashPageInActiveCatalogVersion.$inject=["pageUid"];ManagePageService.prototype.getConfirmationModalDescription=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,3,,4]);return[4,this.pageInfoService.getPageUUID()];case 1:n=r.sent();if(!n){this.logService.error("deletePageService::deletePage - pageUUID is undefined");return[2,Promise.reject()]}return[4,this.homepageService.getHomepageType(e,t)];case 2:i=r.sent();if(i!==null||e.homepage){return[2,"se.cms.actionitem.page.trash.confirmation.description.storefront.homepage"]}return[2,"se.cms.actionitem.page.trash.confirmation.description.storefront"];case 3:o=r.sent();return[2,"se.cms.actionitem.page.trash.confirmation.description.pagelist"];case 4:return[2]}}))}))};ManagePageService.prototype.getConfirmationModalDescription.$inject=["pageInfo","uriContext"];ManagePageService.prototype.confirmSoftDelete=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,,3]);return[4,this.confirmationModalService.confirm({description:e,descriptionPlaceholders:{pageName:t},title:"se.cms.actionitem.page.trash.confirmation.title"})];case 1:i.sent();return[2,true];case 2:n=i.sent();return[2,false];case 3:return[2]}}))}))};ManagePageService.prototype.confirmSoftDelete.$inject=["description","pageName"];ManagePageService.prototype.confirmHardDelete=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,this.confirmationModalService.confirm({title:"se.cms.actionitem.page.permanently.delete.confirmation.title",description:"se.cms.actionitem.page.permanently.delete.confirmation.description",descriptionPlaceholders:{pageName:e}})];case 1:n.sent();return[2,true];case 2:t=n.sent();return[2,false];case 3:return[2]}}))}))};ManagePageService.prototype.confirmHardDelete.$inject=["pageName"];ManagePageService.prototype.confirmTrashingPageInActiveCatalogVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,this.confirmationModalService.confirm({title:"se.cms.sync.page.status.confirm.title",description:"se.cms.sync.page.status.confirm.description",descriptionPlaceholders:{catalogVersion:e}})];case 1:n.sent();return[2,true];case 2:t=n.sent();return[2,false];case 3:return[2]}}))}))};ManagePageService.prototype.confirmTrashingPageInActiveCatalogVersion.$inject=["activeVersion"];ManagePageService.prototype.hasFallbackHomepageOrIsPrimaryWithoutVariations=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.homepageService.getHomepageType(e,t)];case 1:n=o.sent();if(n!==null||e.homepage){return[2,this.homepageService.hasFallbackHomePage(t)]}return[4,this.pagesVariationsRestService.getVariationsForPrimaryPageId(e.uid)];case 2:i=o.sent();return[2,i.length===0]}}))}))};ManagePageService.prototype.hasFallbackHomepageOrIsPrimaryWithoutVariations.$inject=["cmsPage","uriContext"];__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageDeletionEvictionTag,r.pageRestoredEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],ManagePageService.prototype,"getSoftDeletedPagesCount",null);ManagePageService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.LogService,r.SmarteditRoutingService,r.IAlertService,o.CmsitemsRestService,r.SystemEventService,r.CrossFrameEventService,r.IPageInfoService,r.IConfirmationModalService,U,r.IWaitDialogService,vn,ae,q,Pe,r.ICatalogService,r.IRestServiceFactory,r.ISharedDataService,L])],ManagePageService);return ManagePageService}();var yn=function(){PageFacade.$inject=["cmsitemsRestService","crossFrameEventService","sharedDataService","urlService","catalogService"];function PageFacade(e,t,n,i,o){this.cmsitemsRestService=e;this.crossFrameEventService=t;this.sharedDataService=n;this.urlService=i;this.catalogService=o}PageFacade.prototype.contentPageWithLabelExists=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:i={pageSize:10,currentPage:0,typeCode:"ContentPage",itemSearchParams:"label:"+e,catalogId:t,catalogVersion:n};return[4,this.cmsitemsRestService.get(i)];case 1:o=r.sent();return[2,o&&!s.isEmpty(o.response)]}}))}))};PageFacade.prototype.contentPageWithLabelExists.$inject=["label","catalogId","catalogVersion"];PageFacade.prototype.retrievePageUriContext=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:e=t.sent();if(!e){throw new Error("pageFacade - could not retrieve an experience from sharedDataService")}if(!e.pageContext){return[2,null]}return[2,this.urlService.buildUriContext(e.pageContext.siteId,e.pageContext.catalogId,e.pageContext.catalogVersion)]}}))}))};PageFacade.prototype.createPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!!e.catalogVersion)return[3,2];t=e;return[4,this.catalogService.getCatalogVersionUUid()];case 1:t.catalogVersion=i.sent();i.label=2;case 2:if(e.onlyOneRestrictionMustApply===undefined){e.onlyOneRestrictionMustApply=false}if(e.restrictions===undefined){e.restrictions=[]}return[4,this.cmsitemsRestService.create(e)];case 3:n=i.sent();this.crossFrameEventService.publish(r.EVENTS.PAGE_CREATED,e);return[2,n]}}))}))};PageFacade.prototype.createPage.$inject=["page"];PageFacade.prototype.createPageForSite=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.catalogService.getCatalogVersionUUid()];case 1:n=a.sent();e.catalogVersion=e.catalogVersion||n;if(e.onlyOneRestrictionMustApply===undefined){e.onlyOneRestrictionMustApply=false}e=s.cloneDeep(e);e[o.CONTEXT_SITE_ID]=t;return[4,this.cmsitemsRestService.create(e)];case 2:i=a.sent();this.crossFrameEventService.publish(r.EVENTS.PAGE_CREATED,e);return[2,i]}}))}))};PageFacade.prototype.createPageForSite.$inject=["page","siteUid"];PageFacade=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.CmsitemsRestService,r.CrossFrameEventService,r.ISharedDataService,r.IUrlService,r.ICatalogService])],PageFacade);return PageFacade}();window.__smartedit__.addDecoratorPayload("Component","DeletePageToolbarItemComponent",{selector:"se-delete-page-toolbar-item",template:'<div class="toolbar-action" *ngIf="isReady" [attr.data-item-key]="toolbarItem.key"><button type="button" class="btn toolbar-action--button" [disabled]="isDeletePageDisabled" [ngClass]="{ \'toolbar-action__disabled\' : isDeletePageDisabled }" (click)="deletePage()"><span class="icon-delete se-toolbar-menu-ddlb--button__icon"></span><div class="toolbar-action-button__txt" translate="se.cms.actionitem.page.trash"></div></button><se-tooltip *ngIf="isDeletePageDisabled" [appendTo]="\'body\'" [isChevronVisible]="true" [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [additionalClasses]="[\'se-tooltip--stretched\']"><div se-tooltip-body><span [translate]="tooltipMessage"></span></div></se-tooltip></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var Cn=function(){DeletePageToolbarItemComponent.$inject=["pageService","pageFacade","managePageService","systemEventService","crossFrameEventService","cdr","toolbarItem"];function DeletePageToolbarItemComponent(e,t,n,i,o,r,a){this.pageService=e;this.pageFacade=t;this.managePageService=n;this.systemEventService=i;this.crossFrameEventService=o;this.cdr=r;this.toolbarItem=a}DeletePageToolbarItemComponent.prototype.ngOnInit=function(){var e=this;this.unRegPageChange=this.crossFrameEventService.subscribe(r.EVENTS.PAGE_CHANGE,(function(){return e.updateToolbar()}));return this.updateToolbar()};DeletePageToolbarItemComponent.prototype.ngOnDestroy=function(){this.unRegPageChange()};Object.defineProperty(DeletePageToolbarItemComponent.prototype,"isDeletePageDisabled",{get:function(){return!this.isDeletePageEnabled},enumerable:false,configurable:true});DeletePageToolbarItemComponent.prototype.deletePage=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:e=t.sent();return[4,this.managePageService.softDeletePage(e,this.uriContext)];case 2:t.sent();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE);return[2]}}))}))};DeletePageToolbarItemComponent.prototype.updateToolbar=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:this.markAsNotReady();this.cdr.detectChanges();return[4,this.pageFacade.retrievePageUriContext()];case 1:e=o.sent();if(!e){return[2]}this.uriContext=e;t=this;return[4,this.pageService.getCurrentPageInfo()];case 2:t.pageInfo=o.sent();n=this;return[4,this.managePageService.isPageTrashable(this.pageInfo,this.uriContext)];case 3:n.isDeletePageEnabled=o.sent();i=this;return[4,this.resolveTooltipMessage(this.isDeletePageEnabled,this.pageInfo,this.uriContext)];case 4:i.tooltipMessage=o.sent();this.markAsReady();this.cdr.detectChanges();return[2]}}))}))};DeletePageToolbarItemComponent.prototype.markAsNotReady=function(){this.isReady=false;this.isDeletePageEnabled=false;this.tooltipMessage=null};DeletePageToolbarItemComponent.prototype.markAsReady=function(){this.isReady=true};DeletePageToolbarItemComponent.prototype.resolveTooltipMessage=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(i){switch(i.label){case 0:return[4,e?null:this.managePageService.getDisabledTrashTooltipMessage(t,n)];case 1:return[2,i.sent()]}}))}))};DeletePageToolbarItemComponent.prototype.resolveTooltipMessage.$inject=["isDeleteEnabled","pageInfo","uriContext"];DeletePageToolbarItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-delete-page-toolbar-item",template:'<div class="toolbar-action" *ngIf="isReady" [attr.data-item-key]="toolbarItem.key"><button type="button" class="btn toolbar-action--button" [disabled]="isDeletePageDisabled" [ngClass]="{ \'toolbar-action__disabled\' : isDeletePageDisabled }" (click)="deletePage()"><span class="icon-delete se-toolbar-menu-ddlb--button__icon"></span><div class="toolbar-action-button__txt" translate="se.cms.actionitem.page.trash"></div></button><se-tooltip *ngIf="isDeletePageDisabled" [appendTo]="\'body\'" [isChevronVisible]="true" [placement]="\'bottom\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [additionalClasses]="[\'se-tooltip--stretched\']"><div se-tooltip-body><span [translate]="tooltipMessage"></span></div></se-tooltip></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(6,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[o.IPageService,yn,_n,r.SystemEventService,r.CrossFrameEventService,a.ChangeDetectorRef,Object])],DeletePageToolbarItemComponent);return DeletePageToolbarItemComponent}();var Sn=function(){PageEditorModalConfigService.$inject=["cmsitemsRestService","pageService","contextAwarePageStructureService","contextAwareEditableItemService","translateService"];function PageEditorModalConfigService(e,t,n,i,o){this.cmsitemsRestService=e;this.pageService=t;this.contextAwarePageStructureService=n;this.contextAwareEditableItemService=i;this.translateService=o}PageEditorModalConfigService.prototype.create=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:t={title:"se.cms.pageeditormodal.editpagetab.title",componentUuid:e.uuid,componentType:e.typeCode};return[4,Promise.all([this.cmsitemsRestService.getById(e.uuid),this.pageService.isPagePrimary(e.uid)])];case 1:n=a.sent(),i=n[0],o=n[1];t.content=i;t.content.template=i.masterTemplateId;return[4,this.contextAwarePageStructureService.getPageStructureForPageEditing(t.content.typeCode,t.content.uid)];case 2:r=a.sent();t.structure=r;if(o){t.structure.attributes=this.filterPrimaryPageAttributes(t.structure.attributes)}if(!!!e.uid)return[3,4];return[4,this.ensureReadOnlyMode(e,t)];case 3:a.sent();a.label=4;case 4:return[2,t]}}))}))};PageEditorModalConfigService.prototype.create.$inject=["page"];PageEditorModalConfigService.prototype.filterPrimaryPageAttributes=function(e){var t=this;return e.filter((function(e){return t.isPrimaryPageAttribute(e)}))};PageEditorModalConfigService.prototype.filterPrimaryPageAttributes.$inject=["attributes"];PageEditorModalConfigService.prototype.isPrimaryPageAttribute=function(e){return e.qualifier!=="restrictions"&&e.qualifier!=="onlyOneRestrictionMustApply"};PageEditorModalConfigService.prototype.isPrimaryPageAttribute.$inject=["attribute"];PageEditorModalConfigService.prototype.ensureReadOnlyMode=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.contextAwareEditableItemService.isItemEditable(e.uid)];case 1:n=i.sent();t.readOnlyMode=!n;if(t.readOnlyMode){t.messages=[{type:"info",message:this.translateService.instant("se.cms.pageeditormodal.page.readonly.message")}]}return[2,t]}}))}))};PageEditorModalConfigService.prototype.ensureReadOnlyMode.$inject=["page","config"];PageEditorModalConfigService=__decorate([a.Injectable(),__metadata("design:paramtypes",[o.CmsitemsRestService,o.IPageService,ne,o.IContextAwareEditableItemService,d.TranslateService])],PageEditorModalConfigService);return PageEditorModalConfigService}();var bn=function(){PageEditorModalService.$inject=["genericEditorModalService","crossFrameEventService","systemEventService","pageEditorModalConfigService","logService"];function PageEditorModalService(e,t,n,i,o){this.genericEditorModalService=e;this.crossFrameEventService=t;this.systemEventService=n;this.pageEditorModalConfigService=i;this.logService=o}PageEditorModalService.prototype.open=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;var a=this;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.pageEditorModalConfigService.create(e)];case 1:t=s.sent();s.label=2;case 2:s.trys.push([2,4,,5]);return[4,this.genericEditorModalService.open(t,(function(){a.crossFrameEventService.publish(o.DEFAULT_SYNCHRONIZATION_POLLING.FETCH_SYNC_STATUS_ONCE,e.uuid)}))];case 3:n=s.sent();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE,n);return[3,5];case 4:i=s.sent();this.logService.debug("Page Editor Modal dismissed",i);return[3,5];case 5:return[2]}}))}))};PageEditorModalService.prototype.open.$inject=["page"];PageEditorModalService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[Z,r.CrossFrameEventService,r.SystemEventService,Sn,r.LogService])],PageEditorModalService);return PageEditorModalService}();var In=function(){PageVersioningService.$inject=["restServiceFactory"];function PageVersioningService(e){this.restServiceFactory=e;this.pageVersionsServiceResourceURI="/cmswebservices/v1/sites/"+r.PAGE_CONTEXT_SITE_ID+"/cmsitems/:pageUuid/versions";this.pageVersionsRollbackServiceResourceURI="/cmswebservices/v1/sites/"+r.PAGE_CONTEXT_SITE_ID+"/cmsitems/:pageUuid/versions/:versionId/rollbacks";this.pageVersionRESTService=this.restServiceFactory.get(this.pageVersionsServiceResourceURI);this.pageVersionsRollbackRESTService=this.restServiceFactory.get(this.pageVersionsRollbackServiceResourceURI)}PageVersioningService.prototype.findPageVersions=function(e){return this.pageVersionRESTService.page(e)};PageVersioningService.prototype.findPageVersions.$inject=["payload"];PageVersioningService.prototype.getPageVersionForId=function(e,t){return this.pageVersionRESTService.get({pageUuid:e,identifier:t})};PageVersioningService.prototype.getPageVersionForId.$inject=["pageUuid","versionId"];PageVersioningService.prototype.getResourceURI=function(){return this.pageVersionsServiceResourceURI};PageVersioningService.prototype.deletePageVersion=function(e,t){return this.pageVersionRESTService.remove({pageUuid:e,identifier:t})};PageVersioningService.prototype.deletePageVersion.$inject=["pageUuid","versionId"];PageVersioningService.prototype.rollbackPageVersion=function(e,t){return this.pageVersionsRollbackRESTService.save({pageUuid:e,versionId:t})};PageVersioningService.prototype.rollbackPageVersion.$inject=["pageUuid","versionId"];PageVersioningService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IRestServiceFactory])],PageVersioningService);return PageVersioningService}();var wn=function(){PageVersionSelectionService.$inject=["crossFrameEventService","alertService","experienceService","cMSModesService","pageInfoService","pageVersioningService","translateService"];function PageVersionSelectionService(e,t,n,i,o,a,s){var c=this;this.crossFrameEventService=e;this.alertService=t;this.experienceService=n;this.cMSModesService=i;this.pageInfoService=o;this.pageVersioningService=a;this.translateService=s;this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY="se.cms.pageVersionsMenu";this.PAGE_VERSION_UNSELECTED_MSG_KEY="se.cms.versions.unselect.version";this.selectedPageVersionSubject=new u.BehaviorSubject(null);this.unSubEventPerspectiveChanged=this.crossFrameEventService.subscribe(r.EVENT_PERSPECTIVE_CHANGED,(function(){return c.removePageVersionOnPerspectiveChange()}));this.unSubEventPerspectiveRefreshed=this.crossFrameEventService.subscribe(r.EVENT_PERSPECTIVE_REFRESHED,(function(){return c.resetPageVersionContext()}));this.unSubEventPageChange=this.crossFrameEventService.subscribe(r.EVENTS.PAGE_CHANGE,(function(e,t){return c.initOnPageChange(t)}));this.unSubSelectedPageVersion=this.selectedPageVersionSubject.subscribe((function(e){return c.selectedPageVersion=e}))}PageVersionSelectionService.prototype.ngOnDestroy=function(){this.unSubEventPerspectiveChanged();this.unSubEventPerspectiveRefreshed();this.unSubEventPageChange();this.unSubSelectedPageVersion.unsubscribe()};PageVersionSelectionService.prototype.getSelectedPageVersion=function(){return this.selectedPageVersion};PageVersionSelectionService.prototype.getSelectedPageVersion$=function(){return this.selectedPageVersionSubject.asObservable()};PageVersionSelectionService.prototype.hideToolbarContextIfNotNeeded=function(){if(!this.selectedPageVersion){this.crossFrameEventService.publish(r.HIDE_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)}};PageVersionSelectionService.prototype.showToolbarContextIfNeeded=function(){if(this.selectedPageVersion){this.crossFrameEventService.publish(r.SHOW_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)}};PageVersionSelectionService.prototype.selectPageVersion=function(e){if(!this.isSameVersion(this.selectedPageVersion,e)){this.selectedPageVersionSubject.next(e);this.experienceService.updateExperience({versionId:e.uid});this.showToolbarContextIfNeeded();this.crossFrameEventService.publish(r.EVENTS.PAGE_SELECTED)}};PageVersionSelectionService.prototype.selectPageVersion.$inject=["version"];PageVersionSelectionService.prototype.deselectPageVersion=function(e){if(e===void 0){e=true}if(this.selectedPageVersion&&e){var t=this.translateService.instant(this.PAGE_VERSION_UNSELECTED_MSG_KEY);this.alertService.showInfo(t)}this.selectedPageVersionSubject.next(null);this.experienceService.updateExperience({versionId:null});this.crossFrameEventService.publish(r.HIDE_TOOLBAR_ITEM_CONTEXT,this.PAGE_VERSIONS_TOOLBAR_ITEM_KEY)};PageVersionSelectionService.prototype.deselectPageVersion.$inject=["showAlert"];PageVersionSelectionService.prototype.updatePageVersionDetails=function(e){this.selectedPageVersionSubject.next(e)};PageVersionSelectionService.prototype.updatePageVersionDetails.$inject=["version"];PageVersionSelectionService.prototype.initOnPageChange=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!(e.versionId&&!this.selectedPageVersion))return[3,3];return[4,this.pageInfoService.getPageUUID()];case 1:t=i.sent();return[4,this.pageVersioningService.getPageVersionForId(t,String(e.versionId))];case 2:n=i.sent();this.selectedPageVersionSubject.next(n);this.showToolbarContextIfNeeded();this.crossFrameEventService.publish(r.EVENTS.PAGE_SELECTED);i.label=3;case 3:return[2]}}))}))};PageVersionSelectionService.prototype.initOnPageChange.$inject=["experience"];PageVersionSelectionService.prototype.isSameVersion=function(e,t){return e!==null&&t!==null?this.selectedPageVersion.uid===t.uid:false};PageVersionSelectionService.prototype.isSameVersion.$inject=["selectedPageVersion","newVersion"];PageVersionSelectionService.prototype.removePageVersionOnPerspectiveChange=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.cMSModesService.isVersioningPerspectiveActive()];case 1:e=n.sent();if(!this.selectedPageVersion)return[3,3];return[4,this.pageInfoService.getPageUUID()];case 2:t=n.sent();if(!e||this.selectedPageVersion.itemUUID!==t){this.deselectPageVersion()}n.label=3;case 3:return[2]}}))}))};PageVersionSelectionService.prototype.resetPageVersionContext=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.experienceService.getCurrentExperience()];case 1:e=t.sent();if(!e.versionId&&this.selectedPageVersion){this.selectedPageVersionSubject.next(null);this.hideToolbarContextIfNotNeeded()}else{this.showToolbarContextIfNeeded()}return[2]}}))}))};PageVersionSelectionService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.CrossFrameEventService,r.IAlertService,r.IExperienceService,o.CMSModesService,r.IPageInfoService,In,d.TranslateService])],PageVersionSelectionService);return PageVersionSelectionService}();var En=function(){ManagePageVersionService.$inject=["alertService","experienceService","confirmationModalService","genericEditorModalService","pageInfoService","pageVersioningService","pageVersionSelectionService"];function ManagePageVersionService(e,t,n,i,o,r,a){this.alertService=e;this.experienceService=t;this.confirmationModalService=n;this.genericEditorModalService=i;this.pageInfoService=o;this.pageVersioningService=r;this.pageVersionSelectionService=a}ManagePageVersionService.prototype.createPageVersion=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:e=i.sent();t=this.getComponentDataForEditor(e,null);return[2,this.genericEditorModalService.open(t,(function(e){return __awaiter(n,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t={versionId:e.uid};return[4,this.experienceService.updateExperience(t)];case 1:n.sent();this.alertService.showSuccess("se.cms.versions.create.alert.success");this.pageVersionSelectionService.selectPageVersion(e);return[2]}}))}))}))]}}))}))};ManagePageVersionService.prototype.editPageVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;var i=this;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:t=o.sent();n=this.getComponentDataForEditor(t,e);return[2,this.genericEditorModalService.open(n,(function(e){i.pageVersionSelectionService.updatePageVersionDetails(e)}))]}}))}))};ManagePageVersionService.prototype.editPageVersion.$inject=["versionDetails"];ManagePageVersionService.prototype.deletePageVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:t=i.sent();return[4,this.confirmationModalService.confirm({title:"se.cms.actionitem.page.version.delete.confirmation.title",description:"se.cms.actionitem.page.version.delete.confirmation.description"})];case 2:i.sent();return[4,this.pageVersioningService.deletePageVersion(t,e)];case 3:i.sent();this.alertService.showSuccess("se.cms.versions.delete.alert.success");n=this.pageVersionSelectionService.getSelectedPageVersion();if(!(n&&n.uid===e))return[3,5];return[4,this.experienceService.updateExperience()];case 4:i.sent();this.pageVersionSelectionService.deselectPageVersion();i.label=5;case 5:return[2]}}))}))};ManagePageVersionService.prototype.deletePageVersion.$inject=["versionId"];ManagePageVersionService.prototype.getComponentDataForEditor=function(e,t){var n={title:t?"se.cms.versions.edit":"se.cms.versions.create",structure:{attributes:[{cmsStructureType:"ShortString",qualifier:"label",i18nKey:"se.cms.versions.editor.label.name",required:true},{cmsStructureType:"ShortString",qualifier:"description",i18nKey:"se.cms.versions.editor.description.name"}]},contentApi:this.pageVersioningService.getResourceURI().replace(":pageUuid",e)};if(t){n.content=t;n.componentUuid=t.uid;n.componentType="versioning"}return n};ManagePageVersionService.prototype.getComponentDataForEditor.$inject=["pageUuid","content"];ManagePageVersionService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IAlertService,r.IExperienceService,r.IConfirmationModalService,Z,r.IPageInfoService,In,wn])],ManagePageVersionService);return ManagePageVersionService}();var Pn=function(){RollbackPageVersionService.$inject=["logService","alertService","confirmationModalService","experienceService","pageInfoService","pageVersioningService","pageVersionSelectionService","systemEventService"];function RollbackPageVersionService(e,t,n,i,o,r,a,s){this.logService=e;this.alertService=t;this.confirmationModalService=n;this.experienceService=i;this.pageInfoService=o;this.pageVersioningService=r;this.pageVersionSelectionService=a;this.systemEventService=s}RollbackPageVersionService.prototype.rollbackPageVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=e||this.pageVersionSelectionService.getSelectedPageVersion();if(!!!t)return[3,4];n="se.cms.actionitem.page.version.rollback.confirmation";return[4,this.pageInfoService.getPageUUID()];case 1:i=o.sent();return[4,this.showConfirmationModal(t.label,n)];case 2:o.sent();return[4,this.performRollback(i,t)];case 3:o.sent();o.label=4;case 4:return[2]}}))}))};RollbackPageVersionService.prototype.rollbackPageVersion.$inject=["version"];RollbackPageVersionService.prototype.showConfirmationModal=function(e,t){return this.confirmationModalService.confirm({title:t+".title",description:t+".description",descriptionPlaceholders:{versionLabel:e}})};RollbackPageVersionService.prototype.showConfirmationModal.$inject=["versionLabel","translateNs"];RollbackPageVersionService.prototype.performRollback=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,3,,4]);return[4,this.pageVersioningService.rollbackPageVersion(e,t.uid)];case 1:i.sent();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE);this.alertService.showSuccess("se.cms.versions.rollback.alert.success");return[4,this.experienceService.updateExperience({})];case 2:i.sent();this.pageVersionSelectionService.deselectPageVersion(false);return[3,4];case 3:n=i.sent();this.logService.error("RollbackPageVersionService::performRollback - unable to perform page rollback");return[3,4];case 4:return[2]}}))}))};RollbackPageVersionService.prototype.performRollback.$inject=["pageUuid","pageVersion"];RollbackPageVersionService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.LogService,r.IAlertService,r.IConfirmationModalService,r.IExperienceService,r.IPageInfoService,In,wn,r.SystemEventService])],RollbackPageVersionService);return RollbackPageVersionService}();window.__smartedit__.addDecoratorPayload("Component","VersionItemContextComponent",{selector:"se-version-item-context",template:'<div class="se-version-item-context"><span class="sap-icon--navigation-right-arrow"></span><se-tooltip *ngIf="(pageVersion$ | async) as pageVersion" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [isChevronVisible]="true"><div se-tooltip-trigger class="se-version-item-context__info"><div class="se-version-item-context__info-label" [title]="pageVersion.label">{{ pageVersion.label }}</div><div class="se-version-item-context__info-date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div></div><div se-tooltip-body class="se-version-item-context__description-wrapper"><span class="se-version-item-context__description">{{ pageVersion.description || (EMPTY_DESCRIPTION_MSG_KEY | translate) }}</span></div></se-tooltip><button type="button" (click)="deselectPageVersion()" class="se-version-item-context__remove-btn fd-button--light sap-icon--decline"></button></div>',styles:[".se-version-item-context{display:flex;flex-direction:row;align-items:center;height:40px;border-right:1px solid #d9d9d9}.se-version-item-context .sap-icon--navigation-right-arrow{padding-right:12px;color:#51555a}.se-version-item-context__info{display:flex;flex-direction:column}.se-version-item-context__info-label{font-weight:700;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:90px}.se-version-item-context__info-date{color:#6a6d70;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400}.se-version-item-context__remove-btn{padding:0;margin:8px;min-width:20px;height:20px;color:#32363a;background:0 0;border:transparent;line-height:1}.se-version-item-context__remove-btn::before{margin:0!important}.se-version-item-context__description-wrapper{word-wrap:break-word}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Tn=function(){VersionItemContextComponent.$inject=["pageVersionSelectionService"];function VersionItemContextComponent(e){this.pageVersionSelectionService=e;this.EMPTY_DESCRIPTION_MSG_KEY="se.cms.versions.no.description"}VersionItemContextComponent.prototype.ngOnInit=function(){this.pageVersion$=this.pageVersionSelectionService.getSelectedPageVersion$();this.pageVersionSelectionService.hideToolbarContextIfNotNeeded()};VersionItemContextComponent.prototype.deselectPageVersion=function(){this.pageVersionSelectionService.deselectPageVersion()};VersionItemContextComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-version-item-context",template:'<div class="se-version-item-context"><span class="sap-icon--navigation-right-arrow"></span><se-tooltip *ngIf="(pageVersion$ | async) as pageVersion" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [isChevronVisible]="true"><div se-tooltip-trigger class="se-version-item-context__info"><div class="se-version-item-context__info-label" [title]="pageVersion.label">{{ pageVersion.label }}</div><div class="se-version-item-context__info-date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div></div><div se-tooltip-body class="se-version-item-context__description-wrapper"><span class="se-version-item-context__description">{{ pageVersion.description || (EMPTY_DESCRIPTION_MSG_KEY | translate) }}</span></div></se-tooltip><button type="button" (click)="deselectPageVersion()" class="se-version-item-context__remove-btn fd-button--light sap-icon--decline"></button></div>',styles:[".se-version-item-context{display:flex;flex-direction:row;align-items:center;height:40px;border-right:1px solid #d9d9d9}.se-version-item-context .sap-icon--navigation-right-arrow{padding-right:12px;color:#51555a}.se-version-item-context__info{display:flex;flex-direction:column}.se-version-item-context__info-label{font-weight:700;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:90px}.se-version-item-context__info-date{color:#6a6d70;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400}.se-version-item-context__remove-btn{padding:0;margin:8px;min-width:20px;height:20px;color:#32363a;background:0 0;border:transparent;line-height:1}.se-version-item-context__remove-btn::before{margin:0!important}.se-version-item-context__description-wrapper{word-wrap:break-word}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[wn])],VersionItemContextComponent);return VersionItemContextComponent}();window.__smartedit__.addDecoratorPayload("Component","VersionItemComponent",{selector:"se-version-item",template:'<div class="se-version-item" [ngClass]="{ \'se-version-item--selected\': isSelectedVersion() }"><div class="se-version-item__header" [title]="pageVersion.label"><button class="se-version-item__label se-button--text" (click)="selectVersion()">{{ pageVersion.label }}</button><se-version-item-menu *ngIf="isVersionMenuEnabled()" [item]="pageVersion"></se-version-item-menu></div><div class="se-version-item__date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div><div class="se-version-item__description" *ngIf="pageVersion.description"><se-more-text class="se-version-item__description-text" [text]="pageVersion.description" [limit]="32" [ellipsis]="\'...\'" [capitalizeLabel]="true"></se-more-text></div></div>',styles:[":host(.se-version-item--last) .se-version-item{border-bottom:none}.se-version-item{padding:10px 20px;border-bottom:1px solid #d9d9d9}.se-version-item:hover{background-color:#fafafa}.se-version-item--selected{background-color:rgba(10,110,209,.07)}.se-version-item--selected:hover{background-color:rgba(10,110,209,.1)}.se-version-item__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.se-version-item__label{font-weight:700;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:225px;color:#0a6ed1}.se-version-item__date{color:#6a6d70}.se-version-item__description{display:flex;flex-direction:row;align-items:center;max-width:260px}.se-version-item__description-text{padding-right:2px;width:230px;word-break:break-all;white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var An=function(){VersionItemComponent.$inject=["pageVersionSelectionService","perspectiveService","cMSModesService"];function VersionItemComponent(e,t,n){this.pageVersionSelectionService=e;this.perspectiveService=t;this.cMSModesService=n;this.VERSIONING_MODE_KEY=o.CMSModesService.VERSIONING_PERSPECTIVE_KEY}VersionItemComponent.prototype.selectVersion=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.cMSModesService.isVersioningPerspectiveActive()];case 1:e=t.sent();if(!e){this.perspectiveService.switchTo(this.VERSIONING_MODE_KEY)}this.pageVersionSelectionService.selectPageVersion(this.pageVersion);return[2]}}))}))};VersionItemComponent.prototype.isSelectedVersion=function(){var e=this.pageVersionSelectionService.getSelectedPageVersion();return e&&e.uid===this.pageVersion.uid};VersionItemComponent.prototype.isVersionMenuEnabled=function(){var e=this.perspectiveService.getActivePerspective();return e&&e.key===this.VERSIONING_MODE_KEY};__decorate([a.Input(),__metadata("design:type",Object)],VersionItemComponent.prototype,"pageVersion",void 0);VersionItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-version-item",template:'<div class="se-version-item" [ngClass]="{ \'se-version-item--selected\': isSelectedVersion() }"><div class="se-version-item__header" [title]="pageVersion.label"><button class="se-version-item__label se-button--text" (click)="selectVersion()">{{ pageVersion.label }}</button><se-version-item-menu *ngIf="isVersionMenuEnabled()" [item]="pageVersion"></se-version-item-menu></div><div class="se-version-item__date">{{ pageVersion.creationtime | date: \'M/d/yy h:mm a\' }}</div><div class="se-version-item__description" *ngIf="pageVersion.description"><se-more-text class="se-version-item__description-text" [text]="pageVersion.description" [limit]="32" [ellipsis]="\'...\'" [capitalizeLabel]="true"></se-more-text></div></div>',styles:[":host(.se-version-item--last) .se-version-item{border-bottom:none}.se-version-item{padding:10px 20px;border-bottom:1px solid #d9d9d9}.se-version-item:hover{background-color:#fafafa}.se-version-item--selected{background-color:rgba(10,110,209,.07)}.se-version-item--selected:hover{background-color:rgba(10,110,209,.1)}.se-version-item__header{display:flex;flex-direction:row;align-items:center;justify-content:space-between}.se-version-item__label{font-weight:700;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:225px;color:#0a6ed1}.se-version-item__date{color:#6a6d70}.se-version-item__description{display:flex;flex-direction:row;align-items:center;max-width:260px}.se-version-item__description-text{padding-right:2px;width:230px;word-break:break-all;white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[wn,r.IPerspectiveService,o.CMSModesService])],VersionItemComponent);return VersionItemComponent}();window.__smartedit__.addDecoratorPayload("Component","VersionItemMenuComponent",{selector:"se-version-item-menu",template:'<se-popup-overlay class="se-version-item-menu__popup-anchor" [ngClass]="{ \'se-version-item-menu__popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><div *ngIf="menuItems.length > 0" (click)="onButtonClick($event)" class="sap-icon--overflow se-version-item-menu__toggle"></div><div se-popup-overlay-body class="se-version-item-menu fd-menu"><div class="se-version-item-menu__item fd-menu__list" *ngFor="let item of menuItems" (click)="executeItemCallback(item)"><span class="se-version-item-menu__item-link fd-menu__item">{{ item.i18nKey | translate }}</span></div></div></se-popup-overlay>',styles:['.se-version-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.se-version-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-version-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-version-item-menu::after,.se-version-item-menu::before{right:10px}.se-version-item-menu::after,.se-version-item-menu::before{display:none}.se-version-item-menu__item:last-child .se-version-item-menu__item-link{color:#b00}.se-version-item-menu__popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-version-item-menu__toggle{height:20px;width:20px;cursor:pointer}.sap-icon--overflow{color:#0a6ed1}'],changeDetection:a.ChangeDetectionStrategy.OnPush});var Dn=function(){VersionItemMenuComponent.$inject=["managePageVersionService","pageVersionSelectionService","rollbackPageVersionService","permissionService","cdr"];function VersionItemMenuComponent(e,t,n,i,o){this.managePageVersionService=e;this.pageVersionSelectionService=t;this.rollbackPageVersionService=n;this.permissionService=i;this.cdr=o;this.menuItems=[];this.popupConfig={halign:"left",valign:"bottom"};this.isMenuOpen=false}VersionItemMenuComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.getPermittedButtons(this.getButtonsConfiguration())];case 1:e.menuItems=t.sent();this.cdr.detectChanges();return[2]}}))}))};VersionItemMenuComponent.prototype.onButtonClick=function(e){e.stopPropagation();this.isMenuOpen=!this.isMenuOpen};VersionItemMenuComponent.prototype.onButtonClick.$inject=["event"];VersionItemMenuComponent.prototype.hideMenu=function(){this.isMenuOpen=false};VersionItemMenuComponent.prototype.executeItemCallback=function(e){e.callback(this.item);this.hideMenu()};VersionItemMenuComponent.prototype.executeItemCallback.$inject=["menuItem"];VersionItemMenuComponent.prototype.getPermittedButtons=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;var i=this;return __generator(this,(function(o){switch(o.label){case 0:t=e.map((function(e){return i.permissionService.isPermitted([{names:e.permissions}])}));return[4,Promise.all(t)];case 1:n=o.sent();return[2,e.filter((function(e,t){return n[t]}))]}}))}))};VersionItemMenuComponent.prototype.getPermittedButtons.$inject=["menuItemsConfig"];VersionItemMenuComponent.prototype.getButtonsConfiguration=function(){var e=this;return[{i18nKey:"se.cms.version.item.menu.view.label",callback:function(t){return e.viewItemCallback(t)},permissions:["se.version.page"]},{i18nKey:"se.cms.version.item.menu.edit.label",callback:function(t){return e.editItemCallback(t)},permissions:["se.edit.version.page"]},{i18nKey:"se.cms.version.item.menu.rollback.label",callback:function(t){return e.rollbackItemCallback(t)},permissions:["se.rollback.version.page.versions.menu"]},{i18nKey:"se.cms.version.item.menu.delete.label",callback:function(t){return e.deleteItemCallback(t)},permissions:["se.delete.version.page"]}]};VersionItemMenuComponent.prototype.deleteItemCallback=function(e){this.managePageVersionService.deletePageVersion(e.uid)};VersionItemMenuComponent.prototype.deleteItemCallback.$inject=["versionItem"];VersionItemMenuComponent.prototype.editItemCallback=function(e){this.managePageVersionService.editPageVersion(e)};VersionItemMenuComponent.prototype.editItemCallback.$inject=["versionItem"];VersionItemMenuComponent.prototype.viewItemCallback=function(e){this.pageVersionSelectionService.selectPageVersion(e)};VersionItemMenuComponent.prototype.viewItemCallback.$inject=["versionItem"];VersionItemMenuComponent.prototype.rollbackItemCallback=function(e){this.rollbackPageVersionService.rollbackPageVersion(e)};VersionItemMenuComponent.prototype.rollbackItemCallback.$inject=["versionItem"];__decorate([a.Input(),__metadata("design:type",Object)],VersionItemMenuComponent.prototype,"item",void 0);VersionItemMenuComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-version-item-menu",template:'<se-popup-overlay class="se-version-item-menu__popup-anchor" [ngClass]="{ \'se-version-item-menu__popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><div *ngIf="menuItems.length > 0" (click)="onButtonClick($event)" class="sap-icon--overflow se-version-item-menu__toggle"></div><div se-popup-overlay-body class="se-version-item-menu fd-menu"><div class="se-version-item-menu__item fd-menu__list" *ngFor="let item of menuItems" (click)="executeItemCallback(item)"><span class="se-version-item-menu__item-link fd-menu__item">{{ item.i18nKey | translate }}</span></div></div></se-popup-overlay>',styles:['.se-version-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.se-version-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-version-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-version-item-menu::after,.se-version-item-menu::before{right:10px}.se-version-item-menu::after,.se-version-item-menu::before{display:none}.se-version-item-menu__item:last-child .se-version-item-menu__item-link{color:#b00}.se-version-item-menu__popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-version-item-menu__toggle{height:20px;width:20px;cursor:pointer}.sap-icon--overflow{color:#0a6ed1}'],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[En,wn,Pn,r.IPermissionService,a.ChangeDetectorRef])],VersionItemMenuComponent);return VersionItemMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","VersionsSearchComponent",{selector:"se-versions-search",template:'<div class="se-versions-panel__search" *ngIf="showSearchControls"><div class="se-input-group"><input type="text" class="se-input-group__input-area" name="search-term" [ngModel]="searchTerm" (ngModelChange)="onChange($event)" [placeholder]="\'se.cms.versions.search.placeholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span> <button class="se-input-group__addon se-input-group__clear-btn se-button--text" [style.visibility]="showResetButton ? \'visible\' : \'hidden\'" (click)="resetSearchBox()"><span class="sap-icon--decline"></span></button></div><span class="se-versions-panel__count" [translate]="\'se.cms.versions.search.versions.found\'" [translateParams]="{ versionsFound: versionsFoundCount }"></span></div>',styles:[".se-versions-panel__search{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:8px 20px;border-bottom:1px solid #d9d9d9}.se-versions-panel__count{display:flex;flex-direction:row;align-items:center;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;white-space:nowrap}.se-input-group{flex-grow:1;margin-right:16px}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var On=function(){function VersionsSearchComponent(){this.searchTermChange=new a.EventEmitter;this.showResetButton=false}VersionsSearchComponent.prototype.ngOnInit=function(){this.initSearchInputFilter()};VersionsSearchComponent.prototype.ngOnDestroy=function(){this.searchTermSubscription.unsubscribe()};VersionsSearchComponent.prototype.onChange=function(e){this.searchTermSubject.next(e)};VersionsSearchComponent.prototype.onChange.$inject=["value"];VersionsSearchComponent.prototype.resetSearchBox=function(){this.setSearchTermAndEmit("")};VersionsSearchComponent.prototype.initSearchInputFilter=function(){var e=this;this.searchTermSubject=new u.Subject;this.searchTerm$=this.searchTermSubject.asObservable().pipe(p.debounceTime(500),p.distinctUntilChanged());this.searchTermSubscription=this.searchTerm$.subscribe((function(t){return e.setSearchTermAndEmit(t)}))};VersionsSearchComponent.prototype.setSearchTermAndEmit=function(e){this.searchTerm=e;this.showResetButton=this.searchTerm!=="";this.searchTermChange.emit(this.searchTerm)};VersionsSearchComponent.prototype.setSearchTermAndEmit.$inject=["value"];__decorate([a.Input(),__metadata("design:type",Number)],VersionsSearchComponent.prototype,"versionsFoundCount",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],VersionsSearchComponent.prototype,"showSearchControls",void 0);__decorate([a.Output(),__metadata("design:type",Object)],VersionsSearchComponent.prototype,"searchTermChange",void 0);VersionsSearchComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-versions-search",template:'<div class="se-versions-panel__search" *ngIf="showSearchControls"><div class="se-input-group"><input type="text" class="se-input-group__input-area" name="search-term" [ngModel]="searchTerm" (ngModelChange)="onChange($event)" [placeholder]="\'se.cms.versions.search.placeholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span> <button class="se-input-group__addon se-input-group__clear-btn se-button--text" [style.visibility]="showResetButton ? \'visible\' : \'hidden\'" (click)="resetSearchBox()"><span class="sap-icon--decline"></span></button></div><span class="se-versions-panel__count" [translate]="\'se.cms.versions.search.versions.found\'" [translateParams]="{ versionsFound: versionsFoundCount }"></span></div>',styles:[".se-versions-panel__search{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:8px 20px;border-bottom:1px solid #d9d9d9}.se-versions-panel__count{display:flex;flex-direction:row;align-items:center;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;white-space:nowrap}.se-input-group{flex-grow:1;margin-right:16px}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],VersionsSearchComponent);return VersionsSearchComponent}();window.__smartedit__.addDecoratorPayload("Component","VersionsPanelComponent",{selector:"se-versions-panel",template:'<div class="se-toolbar-menu-content--wrapper"><div class="se-toolbar-menu-content__header"><div class="se-toolbar-menu-content__header-title" translate="se.cms.actionitem.page.versions"></div><button class="se-versions-panel__manage-btn fd-button fd-button--compact" *ngIf="showManageButton" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversions.name"></button></div><div class="se-versions-toolbar-menu-content__body" [ngClass]="{ \'se-versions-toolbar-menu-content__body--narrow\': showManageButton }"><se-versions-search [versionsFoundCount]="versionsFound" [showSearchControls]="pageHasVersions()" (searchTermChange)="onSearchTermChanged($event)"></se-versions-search><div><se-infinite-scrolling class="se-versions-panel__infinite-scroll" *ngIf="pageHasVersionsOrIsLoading()" [pageSize]="10" [mask]="searchTerm" [fetchPage]="fetchPageOfVersions" (itemsChange)="onVersionItemsLoaded($event)"><div *ngFor="let item of versionItems; let isLast = last"><se-version-item [ngClass]="{ \'se-version-item--last\': isLast }" [pageVersion]="item"></se-version-item></div></se-infinite-scrolling><div class="se-versions-panel__empty-list" *ngIf="!pageHasVersionsOrIsLoading()"><img src="static-resources/images/emptyVersions.svg" alt="no versions"/> <span class="se-versions-panel__no-versions-message" translate="se.cms.toolbaritem.versioning.noversionsfound"></span> <a class="se-versions-panel__manage-link fd-link" *ngIf="showManageLink" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversionslink.name"></a></div></div></div></div>',styles:[".se-versions-panel .se-toolbar-menu-content__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-versions-panel .se-toolbar-menu-content__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-versions-panel .se-versions-toolbar-menu-content__body .se-infinite-scrolling__container{width:340px;max-height:350px;overflow-y:auto;margin-bottom:8px}.se-versions-panel .se-versions-toolbar-menu-content__body--narrow .se-infinite-scrolling__container{width:300px}.se-versions-panel__empty-list{display:flex;flex-direction:column;align-items:center;color:#51555a;width:280px;padding:20px}.se-versions-panel__no-versions-message{padding:8px 0 4px}.se-versions-panel__manage-link{margin-bottom:20px;cursor:pointer}.se-versions-panel__manage-link:hover{text-decoration:none}"],encapsulation:a.ViewEncapsulation.None,host:{"[class.se-versions-panel]":"true"},changeDetection:a.ChangeDetectionStrategy.OnPush});var Rn=function(){VersionsPanelComponent.$inject=["pageVersioningService","perspectiveService","logService","cdr"];function VersionsPanelComponent(e,t,n,i){var r=this;this.pageVersioningService=e;this.perspectiveService=t;this.logService=n;this.cdr=i;this.switchMode=new a.EventEmitter;this.searchTerm="";this.totalPageVersions=0;this.isLoading=true;this.VERSIONING_MODE_KEY=o.CMSModesService.VERSIONING_PERSPECTIVE_KEY;this.fetchPageOfVersions=function(e,t,n){return r.loadVersions(e,t,n)}}VersionsPanelComponent.prototype.ngOnInit=function(){this.showManageLink=this.canShowManageLink()};VersionsPanelComponent.prototype.onVersionItemsLoaded=function(e){this.versionItems=e};VersionsPanelComponent.prototype.onVersionItemsLoaded.$inject=["versionItems"];VersionsPanelComponent.prototype.onSearchTermChanged=function(e){this.searchTerm=e};VersionsPanelComponent.prototype.onSearchTermChanged.$inject=["newSearchTerm"];VersionsPanelComponent.prototype.switchToVersioningMode=function(){this.perspectiveService.switchTo(this.VERSIONING_MODE_KEY);this.switchMode.emit()};VersionsPanelComponent.prototype.pageHasVersions=function(){return this.totalPageVersions>0};VersionsPanelComponent.prototype.pageHasVersionsOrIsLoading=function(){return this.pageHasVersions()||this.isLoading};VersionsPanelComponent.prototype.canShowManageButton=function(){return this.showManageLink&&this.pageHasVersions()};VersionsPanelComponent.prototype.canShowManageLink=function(){var e=this.perspectiveService.getActivePerspective();return e&&e.key!==this.VERSIONING_MODE_KEY};VersionsPanelComponent.prototype.loadVersions=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:r.trys.push([0,2,,3]);return[4,this.pageVersioningService.findPageVersions({pageUuid:this.pageUuid,currentPage:n,mask:e,pageSize:t})];case 1:i=r.sent();this.versionsFound=i.pagination.totalCount;if(this.isLoading){this.isLoading=false;this.totalPageVersions=this.versionsFound;this.showManageButton=this.canShowManageButton()}this.cdr.detectChanges();return[2,i];case 2:o=r.sent();this.logService.error("Cannot find page versions for page "+this.pageUuid+".");return[2,null];case 3:return[2]}}))}))};VersionsPanelComponent.prototype.loadVersions.$inject=["mask","pageSize","currentPage"];__decorate([a.Input(),__metadata("design:type",String)],VersionsPanelComponent.prototype,"pageUuid",void 0);__decorate([a.Output(),__metadata("design:type",Object)],VersionsPanelComponent.prototype,"switchMode",void 0);VersionsPanelComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-versions-panel",template:'<div class="se-toolbar-menu-content--wrapper"><div class="se-toolbar-menu-content__header"><div class="se-toolbar-menu-content__header-title" translate="se.cms.actionitem.page.versions"></div><button class="se-versions-panel__manage-btn fd-button fd-button--compact" *ngIf="showManageButton" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversions.name"></button></div><div class="se-versions-toolbar-menu-content__body" [ngClass]="{ \'se-versions-toolbar-menu-content__body--narrow\': showManageButton }"><se-versions-search [versionsFoundCount]="versionsFound" [showSearchControls]="pageHasVersions()" (searchTermChange)="onSearchTermChanged($event)"></se-versions-search><div><se-infinite-scrolling class="se-versions-panel__infinite-scroll" *ngIf="pageHasVersionsOrIsLoading()" [pageSize]="10" [mask]="searchTerm" [fetchPage]="fetchPageOfVersions" (itemsChange)="onVersionItemsLoaded($event)"><div *ngFor="let item of versionItems; let isLast = last"><se-version-item [ngClass]="{ \'se-version-item--last\': isLast }" [pageVersion]="item"></se-version-item></div></se-infinite-scrolling><div class="se-versions-panel__empty-list" *ngIf="!pageHasVersionsOrIsLoading()"><img src="static-resources/images/emptyVersions.svg" alt="no versions"/> <span class="se-versions-panel__no-versions-message" translate="se.cms.toolbaritem.versioning.noversionsfound"></span> <a class="se-versions-panel__manage-link fd-link" *ngIf="showManageLink" (click)="switchToVersioningMode()" translate="se.cms.toolbaritem.versioning.manageversionslink.name"></a></div></div></div></div>',styles:[".se-versions-panel .se-toolbar-menu-content__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-versions-panel .se-toolbar-menu-content__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-versions-panel .se-versions-toolbar-menu-content__body .se-infinite-scrolling__container{width:340px;max-height:350px;overflow-y:auto;margin-bottom:8px}.se-versions-panel .se-versions-toolbar-menu-content__body--narrow .se-infinite-scrolling__container{width:300px}.se-versions-panel__empty-list{display:flex;flex-direction:column;align-items:center;color:#51555a;width:280px;padding:20px}.se-versions-panel__no-versions-message{padding:8px 0 4px}.se-versions-panel__manage-link{margin-bottom:20px;cursor:pointer}.se-versions-panel__manage-link:hover{text-decoration:none}"],encapsulation:a.ViewEncapsulation.None,host:{"[class.se-versions-panel]":"true"},changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[In,r.IPerspectiveService,r.LogService,a.ChangeDetectorRef])],VersionsPanelComponent);return VersionsPanelComponent}();window.__smartedit__.addDecoratorPayload("Component","PageVersionMenuComponent",{selector:"se-page-version-menu",template:'\n        <div\n            class="se-toolbar-menu-content se-toolbar-menu-content--versions"\n            *ngIf="actionItem.isOpen"\n        >\n            <se-versions-panel\n                *ngIf="pageUuid"\n                [pageUuid]="pageUuid"\n                (switchMode)="onSwitchMode()"\n            ></se-versions-panel>\n        </div>\n    '});var Mn=function(){PageVersionMenuComponent.$inject=["pageInfoService","pageVersionSelectionService","actionItem"];function PageVersionMenuComponent(e,t,n){this.pageInfoService=e;this.pageVersionSelectionService=t;this.actionItem=n}PageVersionMenuComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.pageVersionSelectionService.showToolbarContextIfNeeded();e=this;return[4,this.pageInfoService.getPageUUID()];case 1:e.pageUuid=t.sent();return[2]}}))}))};PageVersionMenuComponent.prototype.onSwitchMode=function(){this.actionItem.isOpen=false};PageVersionMenuComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-version-menu",template:'\n        <div\n            class="se-toolbar-menu-content se-toolbar-menu-content--versions"\n            *ngIf="actionItem.isOpen"\n        >\n            <se-versions-panel\n                *ngIf="pageUuid"\n                [pageUuid]="pageUuid"\n                (switchMode)="onSwitchMode()"\n            ></se-versions-panel>\n        </div>\n    '}),__param(2,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[r.IPageInfoService,wn,Object])],PageVersionMenuComponent);return PageVersionMenuComponent}();var xn=function(){function VersioningModule(){}VersioningModule=__decorate([a.NgModule({imports:[r.TranslationModule.forChild(),g.CommonModule,h.FormsModule,r.TooltipModule,r.PopupOverlayModule,r.MoreTextModule,r.InfiniteScrollingModule],declarations:[Tn,Dn,An,On,Rn,Mn],entryComponents:[Mn,Tn],providers:[In,wn,En,Pn]})],VersioningModule);return VersioningModule}();var Nn=function(){PageInfoMenuService.$inject=["displayConditionsFacade","logService","pageEditorModalService","pageService","pageVersionSelectionService","translateService","typeStructureRestService"];function PageInfoMenuService(e,t,n,i,o,r,a){this.displayConditionsFacade=e;this.logService=t;this.pageEditorModalService=n;this.pageService=i;this.pageVersionSelectionService=o;this.translateService=r;this.typeStructureRestService=a;this.ALL_RESTRICTIONS_CRITERIA_LABEL="se.cms.restrictions.criteria.all";this.ANY_RESTRICTIONS_CRITERIA_LABEL="se.cms.restrictions.criteria.any";this.isPageEditorOpened=false}PageInfoMenuService.prototype.openPageEditor=function(e){var t=this;if(s.isNil(e)){this.logService.warn("["+this.constructor.name+"] - Cannot open page editor. Provided page is empty.");return}if(!this.isPageEditorOpened){this.isPageEditorOpened=true;this.pageEditorModalService.open(e).finally((function(){t.isPageEditorOpened=false}))}};PageInfoMenuService.prototype.openPageEditor.$inject=["pageInfo"];PageInfoMenuService.prototype.getCurrentPageInfo=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:o.trys.push([0,3,,4]);return[4,this.pageService.getCurrentPageInfoByVersion(this.getCurrentPageVersionId())];case 1:e=o.sent();return[4,this.getPrimaryPageName(e)];case 2:t=o.sent();e.template=e.masterTemplateId;n=s.cloneDeep(e);n.content=e;n.primaryPage=t;n.localizedType=e.typeCode;n.displayCondition=this.getPageDisplayCondition(e);n.restrictionsCriteria=this.getPageRestrictionsCriteria(e);return[2,n];case 3:i=o.sent();this.logService.warn("["+this.constructor.name+"] - Cannot retrieve page info. Please try again later.");return[3,4];case 4:return[2]}}))}))};PageInfoMenuService.prototype.getPageStructureForViewing=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,r,a,c,l,d,p,u,m;return __generator(this,(function(g){switch(g.label){case 0:g.trys.push([0,2,,3]);return[4,this.typeStructureRestService.getStructureByType(e)];case 1:n=g.sent();i=n.map((function(e){return __assign(__assign({},e),{editable:false})}));this.removeFieldFromStructure(i,"uid");this.removeFieldFromStructure(i,"restrictions");o=[];r=this.removeFieldFromStructure(i,"name");r.cmsStructureType="InfoPageName";this.addFieldToStructure(o,r);this.addFieldToStructure(o,this.buildField("displayCondition"));a=this.structureContainsItemByFieldQualifier(i,"description");if(a){c=this.removeFieldFromStructure(i,"description");c.cmsStructureType="InfoPageName";this.addFieldToStructure(o,c)}l=this.structureContainsItemByFieldQualifier(i,"title");if(l){d=this.removeFieldFromStructure(i,"title");d.cmsStructureType="InfoPageName";this.addFieldToStructure(o,d)}p=this.structureContainsItemByFieldQualifier(i,"label");if(p){u=this.removeFieldFromStructure(i,"label");u.cmsStructureType="InfoPageName";this.addFieldToStructure(o,u)}this.addFieldToStructure(o,this.buildField("localizedType"));this.addFieldToStructure(o,this.buildField("template"));if(!t){this.addFieldToStructure(o,this.buildField("primaryPage"));this.addFieldToStructure(o,this.buildField("restrictions","RestrictionsList"))}this.addFieldToStructure(o,this.removeFieldFromStructure(i,"creationtime"));this.addFieldToStructure(o,this.removeFieldFromStructure(i,"modifiedtime"));return[2,{attributes:s.concat(o,i),category:"PAGE"}];case 2:m=g.sent();this.logService.warn("["+this.constructor.name+"] - Cannot retrieve page info structure. Please try again later.");return[3,3];case 3:return[2]}}))}))};PageInfoMenuService.prototype.getPageStructureForViewing.$inject=["pageTypeCode","isPrimaryPage"];PageInfoMenuService.prototype.addFieldToStructure=function(e,t){if(t){e.push(t)}};PageInfoMenuService.prototype.addFieldToStructure.$inject=["structure","field"];PageInfoMenuService.prototype.buildField=function(e,t){if(t===void 0){t="ShortString"}return{cmsStructureType:t,qualifier:e,i18nKey:"se.cms.pageinfo.page."+e.toLocaleLowerCase(),editable:false}};PageInfoMenuService.prototype.buildField.$inject=["qualifier","cmsStructureType"];PageInfoMenuService.prototype.structureContainsItemByFieldQualifier=function(e,t){return!!e.find((function(e){return e.qualifier===t}))};PageInfoMenuService.prototype.structureContainsItemByFieldQualifier.$inject=["structure","fieldQualifier"];PageInfoMenuService.prototype.removeFieldFromStructure=function(e,t){var n=s.remove(e,(function(e){return e.qualifier===t}));return n[0]};PageInfoMenuService.prototype.removeFieldFromStructure.$inject=["structure","fieldQualifier"];PageInfoMenuService.prototype.getPrimaryPageName=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!this.isVariationPage(e))return[3,2];return[4,this.displayConditionsFacade.getPrimaryPageForVariationPage(e.uid)];case 1:t=n.sent().name;return[2,t||null];case 2:return[2,null]}}))}))};PageInfoMenuService.prototype.getPrimaryPageName.$inject=["pageInfo"];PageInfoMenuService.prototype.isVariationPage=function(e){return!e.defaultPage};PageInfoMenuService.prototype.isVariationPage.$inject=["pageInfo"];PageInfoMenuService.prototype.getPageDisplayCondition=function(e){var t=this.isVariationPage(e)?"page.displaycondition.variation":"page.displaycondition.primary";return this.translateService.instant(t)};PageInfoMenuService.prototype.getPageDisplayCondition.$inject=["pageInfo"];PageInfoMenuService.prototype.getPageRestrictionsCriteria=function(e){if(this.isVariationPage(e)&&e.onlyOneRestrictionMustApply!==undefined){var t=e.onlyOneRestrictionMustApply?this.ANY_RESTRICTIONS_CRITERIA_LABEL:this.ALL_RESTRICTIONS_CRITERIA_LABEL;return this.translateService.instant(t)}return null};PageInfoMenuService.prototype.getPageRestrictionsCriteria.$inject=["pageInfo"];PageInfoMenuService.prototype.getCurrentPageVersionId=function(){var e=this.pageVersionSelectionService.getSelectedPageVersion();return e?e.uid:null};PageInfoMenuService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[B,r.LogService,bn,o.IPageService,wn,d.TranslateService,J])],PageInfoMenuService);return PageInfoMenuService}();window.__smartedit__.addDecoratorPayload("Component","PageInfoMenuComponent",{selector:"se-page-info-menu",template:'<div class="toolbar-action" data-item-key="se.cms.pageInfoMenu"><fd-popover [(isOpen)]="toolbarItem.isOpen" (isOpenChange)="onDropdownToggle($event)" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-pressed]="toolbarItem.isOpen"><span class="hyicon hyicon-pageinfo se-toolbar-menu-ddlb--button__icon"></span><div class="se-toolbar-page-info-wrapper"><span class="toolbar-action-button__txt" [translate]="toolbarItem.name"></span></div></button></fd-popover-control><fd-popover-body><div class="se-page-info__dropdown-menu toolbar-action--include"><div class="se-page-info-menu" *ngIf="toolbarItem.isOpen"><se-prevent-vertical-overflow><div class="se-page-info-menu__header"><span class="se-page-info-menu__header-title" translate="se.cms.pageinfo.information.title"></span><div *seHasOperationPermission="editPagePermission"><button class="se-page-info__edit-btn fd-button--compact" *ngIf="isReady" translate="se.cms.contextmenu.title.edit" (click)="onEditPageClick()"></button></div></div><div *ngIf="isReady" class="se-page-info-menu__body"><se-generic-editor [smarteditComponentId]="pageInfo.uid" [smarteditComponentType]="pageInfo.typeCode" [structure]="pageStructure" [content]="pageInfo"></se-generic-editor></div></se-prevent-vertical-overflow></div></div></fd-popover-body></fd-popover></div>',styles:['.se-page-info-menu__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-page-info-menu__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-page-info-menu__body{width:100%;height:400px;overflow-y:auto}.se-page-info-menu__body--title{text-transform:capitalize}.se-page-info__dropdown-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%}.se-page-info__dropdown-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-page-info__dropdown-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-page-info__dropdown-menu::after,.se-page-info__dropdown-menu::before{left:14px}.se-page-info__dropdown-menu input{color:#32363a!important}.se-page-info-menu se-ge-tab{display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0 16px;width:368px}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom{opacity:1}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button{border:none;opacity:1;color:#32363a;padding:0;line-height:1rem}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button::after{display:none}'],encapsulation:a.ViewEncapsulation.None});var kn=function(){PageInfoMenuComponent.$inject=["toolbarItem","pageInfoMenuService","pageService","catalogService","systemEventService"];function PageInfoMenuComponent(e,t,n,i,o){this.toolbarItem=e;this.pageInfoMenuService=t;this.pageService=n;this.catalogService=i;this.systemEventService=o;this.cmsPage=null;this.uriContext=null;this.isReady=false}PageInfoMenuComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:this.unRegContentCatalogUpdate=this.systemEventService.subscribe(r.EVENT_CONTENT_CATALOG_UPDATE,(function(){return e.setPageData()}));return[4,this.setPageData()];case 1:t.sent();return[2]}}))}))};PageInfoMenuComponent.prototype.ngOnDestroy=function(){this.unRegContentCatalogUpdate()};PageInfoMenuComponent.prototype.onEditPageClick=function(){this.pageInfoMenuService.openPageEditor(this.pageInfo.content);this.closeMenu()};PageInfoMenuComponent.prototype.setPageData=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.pageService.getCurrentPageInfo(),this.catalogService.retrieveUriContext()])];case 1:e=i.sent(),t=e[0],n=e[1];this.cmsPage=t;this.uriContext=n;this.editPagePermission=[{names:["se.edit.page.type"],context:{typeCode:t.typeCode}},{names:["se.edit.page.link"]}];return[2]}}))}))};PageInfoMenuComponent.prototype.onDropdownToggle=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!e){return[2]}return[4,this.pageInfoMenuService.getCurrentPageInfo()];case 1:t=i.sent();this.pageInfo=t;return[4,this.pageInfoMenuService.getPageStructureForViewing(t.typeCode,t.defaultPage)];case 2:n=i.sent();this.pageStructure=n;this.isReady=true;return[2]}}))}))};PageInfoMenuComponent.prototype.onDropdownToggle.$inject=["open"];PageInfoMenuComponent.prototype.closeMenu=function(){this.toolbarItem.isOpen=false};PageInfoMenuComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-info-menu",template:'<div class="toolbar-action" data-item-key="se.cms.pageInfoMenu"><fd-popover [(isOpen)]="toolbarItem.isOpen" (isOpenChange)="onDropdownToggle($event)" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-pressed]="toolbarItem.isOpen"><span class="hyicon hyicon-pageinfo se-toolbar-menu-ddlb--button__icon"></span><div class="se-toolbar-page-info-wrapper"><span class="toolbar-action-button__txt" [translate]="toolbarItem.name"></span></div></button></fd-popover-control><fd-popover-body><div class="se-page-info__dropdown-menu toolbar-action--include"><div class="se-page-info-menu" *ngIf="toolbarItem.isOpen"><se-prevent-vertical-overflow><div class="se-page-info-menu__header"><span class="se-page-info-menu__header-title" translate="se.cms.pageinfo.information.title"></span><div *seHasOperationPermission="editPagePermission"><button class="se-page-info__edit-btn fd-button--compact" *ngIf="isReady" translate="se.cms.contextmenu.title.edit" (click)="onEditPageClick()"></button></div></div><div *ngIf="isReady" class="se-page-info-menu__body"><se-generic-editor [smarteditComponentId]="pageInfo.uid" [smarteditComponentType]="pageInfo.typeCode" [structure]="pageStructure" [content]="pageInfo"></se-generic-editor></div></se-prevent-vertical-overflow></div></div></fd-popover-body></fd-popover></div>',styles:['.se-page-info-menu__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px}.se-page-info-menu__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-page-info-menu__body{width:100%;height:400px;overflow-y:auto}.se-page-info-menu__body--title{text-transform:capitalize}.se-page-info__dropdown-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%}.se-page-info__dropdown-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-page-info__dropdown-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-page-info__dropdown-menu::after,.se-page-info__dropdown-menu::before{left:14px}.se-page-info__dropdown-menu input{color:#32363a!important}.se-page-info-menu se-ge-tab{display:grid;grid-template-columns:repeat(1,1fr);grid-gap:0 16px;width:368px}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom{opacity:1}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button{border:none;opacity:1;color:#32363a;padding:0;line-height:1rem}.se-page-info-menu__body .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-page-info-menu__body .se-select.is-disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=email]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .fd-form-control[type=text]:disabled .fd-popover-custom .toggle-button::after,.se-tabset-wrapper .se-select.is-disabled .fd-popover-custom .toggle-button::after{display:none}'],encapsulation:a.ViewEncapsulation.None}),__param(0,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[Object,Nn,o.IPageService,r.ICatalogService,r.SystemEventService])],PageInfoMenuComponent);return PageInfoMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","PageListLinkComponent",{selector:"se-page-list-link",template:'<div><a class="page-list-link-item__link" [href]="getLink()" translate="se.cms.cataloginfo.pagelist"></a></div>'});var Fn=function(){PageListLinkComponent.$inject=["catalogDetails"];function PageListLinkComponent(e){this.catalogDetails=e}PageListLinkComponent.prototype.getLink=function(){var e=this.catalogDetails,t=e.siteId,n=e.catalog.catalogId,i=e.catalogVersion.version;return"#!/ng/pages/"+t+"/"+n+"/"+i};PageListLinkComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-list-link",template:'<div><a class="page-list-link-item__link" [href]="getLink()" translate="se.cms.cataloginfo.pagelist"></a></div>'}),__param(0,a.Inject(r.CATALOG_DETAILS_ITEM_DATA)),__metadata("design:paramtypes",[Object])],PageListLinkComponent);return PageListLinkComponent}();window.__smartedit__.addDecoratorPayload("Component","TrashLinkComponent",{selector:"se-trash-link",template:'<div *ngIf="isNonActiveCatalog" (click)="goToTrash()" class="se-page-list__page-link--right"><a translate="se.cms.pagelist.trashcan.link.text" [translateParams]="trashedPagesTranslationData" class="se-page-list__page-link-anchor"></a> <span class="se-page-list__page-link-icon sap-icon--navigation-right-arrow"></span></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"]});var zn=function(){TrashLinkComponent.$inject=["route","routingsService","managePageService","urlService","catalogService","systemEventService"];function TrashLinkComponent(e,t,n,i,o,r){this.route=e;this.routingsService=t;this.managePageService=n;this.urlService=i;this.catalogService=o;this.systemEventService=r;this.isNonActiveCatalog=false}TrashLinkComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:t=this.route.snapshot.params,this.siteId=t.siteId,this.catalogId=t.catalogId,this.catalogVersion=t.catalogVersion;this.uriContext=this.urlService.buildUriContext(this.siteId,this.catalogId,this.catalogVersion);return[4,this.catalogService.isContentCatalogVersionNonActive()];case 1:e=i.sent();this.isNonActiveCatalog=e;if(e){this.updateTrashedPagesCount()}this.unsubscribeContentCatalogUpdateEvent=this.systemEventService.subscribe(r.EVENT_CONTENT_CATALOG_UPDATE,(function(){return n.updateTrashedPagesCount()}));return[2]}}))}))};TrashLinkComponent.prototype.ngOnDestroy=function(){this.unsubscribeContentCatalogUpdateEvent()};TrashLinkComponent.prototype.updateTrashedPagesCount=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.managePageService.getSoftDeletedPagesCount(this.uriContext)];case 1:e=t.sent();this.trashedPagesTranslationData={totalCount:e};return[2]}}))}))};TrashLinkComponent.prototype.goToTrash=function(){this.routingsService.go((""+r.NG_ROUTE_PREFIX+o.TRASHED_PAGE_LIST_PATH).replace(":siteId",this.siteId).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))};TrashLinkComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-trash-link",template:'<div *ngIf="isNonActiveCatalog" (click)="goToTrash()" class="se-page-list__page-link--right"><a translate="se.cms.pagelist.trashcan.link.text" [translateParams]="trashedPagesTranslationData" class="se-page-list__page-link-anchor"></a> <span class="se-page-list__page-link-icon sap-icon--navigation-right-arrow"></span></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"]}),__metadata("design:paramtypes",[l.ActivatedRoute,r.SmarteditRoutingService,_n,r.IUrlService,r.ICatalogService,r.SystemEventService])],TrashLinkComponent);return TrashLinkComponent}();window.__smartedit__.addDecoratorPayload("Component","SynchronizeCatalogComponent",{selector:"se-synchronize-catalog",template:'<div class="se-synchronize-catalog"><div class="se-synchronize-catalog__sync-info"><div *ngIf="isSyncJobFinished()"><label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="catalogVersion.active"><span translate="se.cms.cataloginfo.lastsyncedfrom"></span>&nbsp; <span>{{ syncJobStatus.source }}</span></label> <label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="!catalogVersion.active" translate="se.cms.cataloginfo.lastsynced"></label> <span class="se-synchronize-catalog__sync-info__last-synched">{{ syncJobStatus.syncEndTime | date: \'M/d/yy h:mm a\' }}</span></div><span class="se-synchronize-catalog__in-progress" *ngIf="isSyncJobInProgress()" translate="se.sync.status.synced.inprogress"></span> <span class="label-error se-synchronize-catalog__sync-failed" *ngIf="isSyncJobFailed()" translate="se.sync.status.synced.syncfailed"></span></div><ng-container *seHasOperationPermission="syncCatalogPermission"><ng-container *ngIf="!catalogVersion.active"><button class="se-synchronize-catalog__sync-btn fd-button--emphasized" [disabled]="!isSyncButtonEnabled()" (click)="syncCatalog()" translate="se.cms.cataloginfo.btn.sync"></button></ng-container></ng-container></div>',styles:[".se-synchronize-catalog{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.se-synchronize-catalog__sync-info{display:flex;flex-direction:row;align-items:center}.se-synchronize-catalog__sync-btn{margin-left:20px}.se-synchronize-catalog__sync-info__sync-label:first-child{font-weight:700}.se-synchronize-catalog__sync-info__last-synched,.se-synchronize-catalog__sync-info__sync-label{color:#6a6d70;display:block;text-align:right;margin:0}.se-synchronize-catalog__in-progress{color:#0a7e3e}.se-synchronize-catalog__sync-failed{color:#b00}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush});var Ln=function(){SynchronizeCatalogComponent.$inject=["synchronizationService","confirmationModalService","systemEventService","l10nPipe","cdr"];function SynchronizeCatalogComponent(e,t,n,i,o){this.synchronizationService=e;this.confirmationModalService=t;this.systemEventService=n;this.l10nPipe=i;this.cdr=o}SynchronizeCatalogComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:this.syncJobStatus={syncStartTime:"",syncEndTime:"",status:null,source:"",target:""};this.targetCatalogVersion=this.activeCatalogVersion.version;this.sourceCatalogVersion=!this.catalogVersion.active?this.catalogVersion.version:null;this.syncCatalogPermission=[{names:["se.sync.catalog"],context:{catalogId:this.catalog.catalogId,catalogVersion:this.sourceCatalogVersion,targetCatalogVersion:this.targetCatalogVersion}}];this.catalogDto={catalogId:this.catalog.catalogId,targetCatalogVersion:this.targetCatalogVersion,sourceCatalogVersion:this.sourceCatalogVersion};this.synchronizationService.startAutoGetSyncData(this.catalogDto,(function(t){return e.updateSyncStatusData(t)}));return[4,this.callGetSyncData()];case 1:t.sent();return[2]}}))}))};SynchronizeCatalogComponent.prototype.ngOnDestroy=function(){this.synchronizationService.stopAutoGetSyncData(this.catalogDto)};SynchronizeCatalogComponent.prototype.isSyncJobFinished=function(){return this.syncJobStatus.status===o.JOB_STATUS.FINISHED};SynchronizeCatalogComponent.prototype.isSyncJobInProgress=function(){return this.syncJobStatus.status===o.JOB_STATUS.RUNNING||this.syncJobStatus.status===o.JOB_STATUS.UNKNOWN};SynchronizeCatalogComponent.prototype.isSyncJobFailed=function(){return this.syncJobStatus.status===o.JOB_STATUS.ERROR||this.syncJobStatus.status===o.JOB_STATUS.FAILURE};SynchronizeCatalogComponent.prototype.isSyncButtonEnabled=function(){return!this.isSyncJobInProgress()};SynchronizeCatalogComponent.prototype.syncCatalog=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.translateCatalogName(this.catalog.name)];case 1:e=n.sent();return[4,this.confirmationModalService.confirm({title:"se.sync.confirmation.title",description:"se.sync.confirm.msg",descriptionPlaceholders:{catalogName:e}}).catch((function(){return Promise.reject()}))];case 2:n.sent();return[4,this.synchronizationService.updateCatalogSync(this.catalogDto)];case 3:t=n.sent();this.updateSyncStatusData(t);this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE,t);return[2]}}))}))};SynchronizeCatalogComponent.prototype.translateCatalogName=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.l10nPipe.transform(e).pipe(p.take(1)).toPromise()]}))}))};SynchronizeCatalogComponent.prototype.translateCatalogName.$inject=["catalogName"];SynchronizeCatalogComponent.prototype.callGetSyncData=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.synchronizationService.getCatalogSyncStatus(this.catalogDto)];case 1:e=t.sent();this.updateSyncStatusData(e);return[2]}}))}))};SynchronizeCatalogComponent.prototype.updateSyncStatusData=function(e){this.syncJobStatus={syncStartTime:e.creationDate,syncEndTime:e.endDate,status:e.syncStatus,source:e.sourceCatalogVersion?e.sourceCatalogVersion:"",target:e.targetCatalogVersion?e.targetCatalogVersion:""};this.cdr.detectChanges()};SynchronizeCatalogComponent.prototype.updateSyncStatusData.$inject=["syncStatus"];__decorate([a.Input(),__metadata("design:type",Object)],SynchronizeCatalogComponent.prototype,"catalog",void 0);__decorate([a.Input(),__metadata("design:type",Object)],SynchronizeCatalogComponent.prototype,"catalogVersion",void 0);__decorate([a.Input(),__metadata("design:type",Object)],SynchronizeCatalogComponent.prototype,"activeCatalogVersion",void 0);SynchronizeCatalogComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-synchronize-catalog",template:'<div class="se-synchronize-catalog"><div class="se-synchronize-catalog__sync-info"><div *ngIf="isSyncJobFinished()"><label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="catalogVersion.active"><span translate="se.cms.cataloginfo.lastsyncedfrom"></span>&nbsp; <span>{{ syncJobStatus.source }}</span></label> <label class="se-synchronize-catalog__sync-info__sync-label" *ngIf="!catalogVersion.active" translate="se.cms.cataloginfo.lastsynced"></label> <span class="se-synchronize-catalog__sync-info__last-synched">{{ syncJobStatus.syncEndTime | date: \'M/d/yy h:mm a\' }}</span></div><span class="se-synchronize-catalog__in-progress" *ngIf="isSyncJobInProgress()" translate="se.sync.status.synced.inprogress"></span> <span class="label-error se-synchronize-catalog__sync-failed" *ngIf="isSyncJobFailed()" translate="se.sync.status.synced.syncfailed"></span></div><ng-container *seHasOperationPermission="syncCatalogPermission"><ng-container *ngIf="!catalogVersion.active"><button class="se-synchronize-catalog__sync-btn fd-button--emphasized" [disabled]="!isSyncButtonEnabled()" (click)="syncCatalog()" translate="se.cms.cataloginfo.btn.sync"></button></ng-container></ng-container></div>',styles:[".se-synchronize-catalog{display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.se-synchronize-catalog__sync-info{display:flex;flex-direction:row;align-items:center}.se-synchronize-catalog__sync-btn{margin-left:20px}.se-synchronize-catalog__sync-info__sync-label:first-child{font-weight:700}.se-synchronize-catalog__sync-info__last-synched,.se-synchronize-catalog__sync-info__sync-label{color:#6a6d70;display:block;text-align:right;margin:0}.se-synchronize-catalog__in-progress{color:#0a7e3e}.se-synchronize-catalog__sync-failed{color:#b00}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[o.SynchronizationService,r.IConfirmationModalService,r.SystemEventService,r.L10nPipe,a.ChangeDetectorRef])],SynchronizeCatalogComponent);return SynchronizeCatalogComponent}();window.__smartedit__.addDecoratorPayload("Component","PageSynchronizationHeaderComponent",{selector:"se-page-synchronization-header",template:'<ng-container *ngIf="ready"><div class="se-sync-panel-header"><span class="se-sync-panel-header__sub-header" [translate]="getSubHeaderText()"></span></div><div *ngIf="isNewPage()" class="se-sync-panel-new-page"><div class="se-sync-panel-new-page__header" translate="se.cms.synchronization.page.new.header"></div><div class="se-sync-panel-new-page__message">{{ headerText }}</div></div><div class="se-sync-panel-header__timestamp" *ngIf="!isNewPage()"><div translate="se.cms.synchronization.panel.lastsync.text"></div><span class="se-sync-panel-header__timestamp-text">{{ syncStatus.lastSyncStatus | date: \'M/d/yy h:mm a\' }}</span></div></ng-container>',styles:[".se-sync-panel-header{padding:0 20px 20px;border-bottom:1px solid #d9d9d9;min-width:400px}.se-sync-panel-header__sub-header{padding-top:4px;color:#51555a}.se-sync-panel-header__timestamp{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a;position:absolute;left:20px;bottom:23px;width:150px}.se-sync-panel-new-page{padding:20px}.se-sync-panel-new-page__header{font-weight:700;padding-bottom:4px}.se-sync-panel-new-page__message{white-space:normal}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush});var Vn=function(){PageSynchronizationHeaderComponent.$inject=["sharedDataService","catalogService","cmsitemsRestService","translateService","l10nPipe","cdr"];function PageSynchronizationHeaderComponent(e,t,n,i,o,r){this.sharedDataService=e;this.catalogService=t;this.cmsitemsRestService=n;this.translateService=i;this.l10nPipe=o;this.cdr=r;this.ready=false}PageSynchronizationHeaderComponent.prototype.ngOnChanges=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:if(!this.syncStatus){return[2]}this.ready=false;return[4,this.updateHeaderText()];case 1:e.sent();this.ready=true;this.cdr.detectChanges();return[2]}}))}))};PageSynchronizationHeaderComponent.prototype.getSubHeaderText=function(){if(this.isDefaultSubHeader()){return"se.cms.synchronization.page.header"}else if(this.isSyncOldHomeHeader()){return"se.cms.synchronization.page.header.old.homepage"}};PageSynchronizationHeaderComponent.prototype.isNewPage=function(){return this.pageSyncConditions.pageHasNoDepOrNoSyncStatus};PageSynchronizationHeaderComponent.prototype.isSyncOldHomeHeader=function(){return this.pageSyncConditions.pageHasSyncStatus&&!this.pageSyncConditions.canSyncHomepage};PageSynchronizationHeaderComponent.prototype.isDefaultSubHeader=function(){return!this.isSyncOldHomeHeader()&&!this.isNewPage()};PageSynchronizationHeaderComponent.prototype.updateHeaderText=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 1:e=s.sent();return[4,this.getCurrentCatalogIdFromExperience(e)];case 2:t=s.sent(),n=t.catalogId,i=t.catalogName;return[4,this.catalogService.getActiveContentCatalogVersionByCatalogId(n)];case 3:o=s.sent();return[4,this.pageSyncConditions.pageHasUnavailableDependencies?this.fetchUnavailableDependencies():null];case 4:a=s.sent();this.headerText=this.pageSyncConditions.pageHasUnavailableDependencies?this.translateService.instant("se.cms.synchronization.page.unavailable.items.description",{itemNames:a,catalogName:i,catalogVersion:o}):this.translateService.instant("se.cms.synchronization.page.new.description",{catalogName:i,catalogVersion:o});return[2]}}))}))};PageSynchronizationHeaderComponent.prototype.userIsInsidePage=function(e){return!!e};PageSynchronizationHeaderComponent.prototype.userIsInsidePage.$inject=["pageContext"];PageSynchronizationHeaderComponent.prototype.getCurrentCatalogIdFromExperience=function(e){var t=e.pageContext,n=e.catalogDescriptor;return __awaiter(this,void 0,void 0,(function(){var e,i,o;return __generator(this,(function(r){switch(r.label){case 0:e=this.userIsInsidePage(t)?t.catalogId:n.catalogId;i=this.userIsInsidePage(t)?t.catalogName:n.name;return[4,this.l10nPipe.transform(i).pipe(p.take(1)).toPromise()];case 1:o=r.sent();return[2,{catalogId:e,catalogName:o}]}}))}))};PageSynchronizationHeaderComponent.prototype.getCurrentCatalogIdFromExperience.$inject=["_a"];PageSynchronizationHeaderComponent.prototype.fetchUnavailableDependencies=function(){var e=this.syncStatus.unavailableDependencies.map((function(e){var t=e.itemId;return t}));return this.cmsitemsRestService.getByIds(e).then((function(e){var t=e.response;return t.map((function(e){var t=e.name;return t})).join(", ")}))};__decorate([a.Input(),__metadata("design:type",Object)],PageSynchronizationHeaderComponent.prototype,"syncStatus",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageSynchronizationHeaderComponent.prototype,"pageSyncConditions",void 0);PageSynchronizationHeaderComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-synchronization-header",template:'<ng-container *ngIf="ready"><div class="se-sync-panel-header"><span class="se-sync-panel-header__sub-header" [translate]="getSubHeaderText()"></span></div><div *ngIf="isNewPage()" class="se-sync-panel-new-page"><div class="se-sync-panel-new-page__header" translate="se.cms.synchronization.page.new.header"></div><div class="se-sync-panel-new-page__message">{{ headerText }}</div></div><div class="se-sync-panel-header__timestamp" *ngIf="!isNewPage()"><div translate="se.cms.synchronization.panel.lastsync.text"></div><span class="se-sync-panel-header__timestamp-text">{{ syncStatus.lastSyncStatus | date: \'M/d/yy h:mm a\' }}</span></div></ng-container>',styles:[".se-sync-panel-header{padding:0 20px 20px;border-bottom:1px solid #d9d9d9;min-width:400px}.se-sync-panel-header__sub-header{padding-top:4px;color:#51555a}.se-sync-panel-header__timestamp{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a;position:absolute;left:20px;bottom:23px;width:150px}.se-sync-panel-new-page{padding:20px}.se-sync-panel-new-page__header{font-weight:700;padding-bottom:4px}.se-sync-panel-new-page__message{white-space:normal}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.ISharedDataService,r.ICatalogService,o.CmsitemsRestService,d.TranslateService,r.L10nPipe,a.ChangeDetectorRef])],PageSynchronizationHeaderComponent);return PageSynchronizationHeaderComponent}();var $n="PAGE_SYNC_STATUS_READY";window.__smartedit__.addDecoratorPayload("Component","PageSynchronizationPanelComponent",{selector:"se-page-synchronization-panel",template:'<se-page-synchronization-header class="se-sync-panel__sync-status" [syncStatus]="syncStatus" [pageSyncConditions]="pageSyncConditions"></se-page-synchronization-header><se-synchronization-panel *ngIf="!showFooter" [itemId]="cmsPage.uuid" [showFooter]="false" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (selectedItemsUpdate)="onSelectedItemsUpdate($event)" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel><se-synchronization-panel *ngIf="showFooter" [itemId]="cmsPage.uuid" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel>'});var Un=function(){PageSynchronizationPanelComponent.$inject=["pageService","homepageService","crossFrameEventService","syncPollingService","translateService"];function PageSynchronizationPanelComponent(e,t,n,i,o){var r=this;this.pageService=e;this.homepageService=t;this.crossFrameEventService=n;this.syncPollingService=i;this.translateService=o;this.getSyncStatus=function(){return __awaiter(r,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.homepageService.canSyncHomepage(this.cmsPage,this.uriContext),this.syncPollingService.getSyncStatus(this.cmsPage.uuid,this.uriContext),this.evaluateIfSyncIsApproved()])];case 1:e=i.sent(),t=e[0],n=e[1];this.pageSyncConditions.canSyncHomepage=t;this.syncStatus=n;return[2,this.syncStatus]}}))}))};this.performSync=function(e){return r.syncPollingService.performSync(e,r.uriContext)};this.syncStatusReady=function(e){r.pageSyncConditions.pageHasUnavailableDependencies=e.unavailableDependencies.length>0;r.pageSyncConditions.pageHasSyncStatus=!!e.lastSyncStatus;r.pageSyncConditions.pageHasNoDepOrNoSyncStatus=r.pageSyncConditions.pageHasUnavailableDependencies||!r.pageSyncConditions.pageHasSyncStatus;r.pageSyncConditions=s.cloneDeep(r.pageSyncConditions);if(r.pageSyncConditions.pageHasUnavailableDependencies){r.hidePageSync()}else if(!r.pageSyncConditions.pageHasSyncStatus){r.showPageSync()}else{r.enableSlotsSync()}r.crossFrameEventService.publish($n,r.pageSyncConditions)};this.selectedItemsUpdate=new a.EventEmitter;this.showFooter=true;this.syncStatus=null;this.pageSyncConditions={canSyncHomepage:false,pageHasUnavailableDependencies:false,pageHasSyncStatus:false,pageHasNoDepOrNoSyncStatus:false}}PageSynchronizationPanelComponent.prototype.ngOnInit=function(){var e=this;this.unSubPageUpdatedEvent=this.crossFrameEventService.subscribe(r.EVENTS.PAGE_UPDATED,(function(){return e.evaluateIfSyncIsApproved()}))};PageSynchronizationPanelComponent.prototype.ngOnDestroy=function(){this.unSubPageUpdatedEvent()};PageSynchronizationPanelComponent.prototype.onGetApi=function(e){var t=this;this.synchronizationPanelApi=e;this.synchronizationPanelApi.disableItem=function(e){return!t.pageSyncConditions.canSyncHomepage&&e===t.syncStatus}};PageSynchronizationPanelComponent.prototype.onGetApi.$inject=["api"];PageSynchronizationPanelComponent.prototype.onSyncStatusReady=function(e){this.syncStatusReady(e)};PageSynchronizationPanelComponent.prototype.onSyncStatusReady.$inject=["syncStatus"];PageSynchronizationPanelComponent.prototype.onSelectedItemsUpdate=function(e){this.selectedItemsUpdate.emit(e)};PageSynchronizationPanelComponent.prototype.onSelectedItemsUpdate.$inject=["items"];PageSynchronizationPanelComponent.prototype.syncItems=function(){return this.synchronizationPanel.syncItems()};PageSynchronizationPanelComponent.prototype.evaluateIfSyncIsApproved=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageService.isPageApproved(this.cmsPage.uuid)];case 1:e=t.sent();if(!e){this.disablePageSync()}return[2]}}))}))};PageSynchronizationPanelComponent.prototype.disablePageSync=function(){this.synchronizationPanelApi.setMessage({type:r.IAlertServiceType.WARNING,description:this.translateService.instant("se.cms.synchronization.slot.disabled.msg")});this.synchronizationPanelApi.disableItemList(true)};PageSynchronizationPanelComponent.prototype.hidePageSync=function(){this.synchronizationPanelApi.displayItemList(false)};PageSynchronizationPanelComponent.prototype.showPageSync=function(){this.synchronizationPanelApi.selectAll();this.synchronizationPanelApi.displayItemList(false)};PageSynchronizationPanelComponent.prototype.enableSlotsSync=function(){this.synchronizationPanelApi.displayItemList(true)};__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],PageSynchronizationPanelComponent.prototype,"selectedItemsUpdate",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageSynchronizationPanelComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageSynchronizationPanelComponent.prototype,"cmsPage",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],PageSynchronizationPanelComponent.prototype,"showFooter",void 0);__decorate([a.ViewChild(o.SynchronizationPanelComponent,{static:false}),__metadata("design:type",o.SynchronizationPanelComponent)],PageSynchronizationPanelComponent.prototype,"synchronizationPanel",void 0);PageSynchronizationPanelComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-synchronization-panel",template:'<se-page-synchronization-header class="se-sync-panel__sync-status" [syncStatus]="syncStatus" [pageSyncConditions]="pageSyncConditions"></se-page-synchronization-header><se-synchronization-panel *ngIf="!showFooter" [itemId]="cmsPage.uuid" [showFooter]="false" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (selectedItemsUpdate)="onSelectedItemsUpdate($event)" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel><se-synchronization-panel *ngIf="showFooter" [itemId]="cmsPage.uuid" [getSyncStatus]="getSyncStatus" [performSync]="performSync" (syncStatusReady)="onSyncStatusReady($event)" (getApi)="onGetApi($event)"></se-synchronization-panel>'}),__metadata("design:paramtypes",[o.IPageService,q,r.CrossFrameEventService,o.ISyncPollingService,d.TranslateService])],PageSynchronizationPanelComponent);return PageSynchronizationPanelComponent}();window.__smartedit__.addDecoratorPayload("Component","PageSynchronizationPanelModalComponent",{selector:"se-page-synchronization-panel-modal",template:'\n        <se-page-synchronization-panel\n            *ngIf="isReady"\n            (selectedItemsUpdate)="onSelectedItemsUpdate($event)"\n            [uriContext]="data.uriContext"\n            [cmsPage]="data.cmsPage"\n            [showFooter]="false"\n        ></se-page-synchronization-panel>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush});var jn=function(){function PageSynchronizationPanelModalComponent(e,t){this.modalManager=e;this.cdr=t;this.syncBtnId="sync"}PageSynchronizationPanelModalComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.addButtons([{id:"cancel",label:"se.cms.component.confirmation.modal.cancel",style:r.FundamentalModalButtonStyle.Default,action:r.FundamentalModalButtonAction.Dismiss},{id:this.syncBtnId,label:"se.cms.actionitem.page.sync",style:r.FundamentalModalButtonStyle.Primary,action:r.FundamentalModalButtonAction.Close,disabled:true,callback:function(){return u.from(e.pageSynchronizationPanelComponent.syncItems())}}]);this.modalManager.getModalData().pipe(p.take(1)).subscribe((function(t){e.data=t;e.isReady=true;e.cdr.detectChanges()}))};PageSynchronizationPanelModalComponent.prototype.onSelectedItemsUpdate=function(e){if(e.length===0){this.modalManager.disableButton(this.syncBtnId);return}this.modalManager.enableButton(this.syncBtnId)};__decorate([a.ViewChild(Un,{static:false}),__metadata("design:type",Un)],PageSynchronizationPanelModalComponent.prototype,"pageSynchronizationPanelComponent",void 0);PageSynchronizationPanelModalComponent=__decorate([a.Component({selector:"se-page-synchronization-panel-modal",template:'\n        <se-page-synchronization-panel\n            *ngIf="isReady"\n            (selectedItemsUpdate)="onSelectedItemsUpdate($event)"\n            [uriContext]="data.uriContext"\n            [cmsPage]="data.cmsPage"\n            [showFooter]="false"\n        ></se-page-synchronization-panel>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.FundamentalModalManagerService,a.ChangeDetectorRef])],PageSynchronizationPanelModalComponent);return PageSynchronizationPanelModalComponent}();window.__smartedit__.addDecoratorPayload("Component","PageSyncMenuToolbarItemComponent",{selector:"se-page-sync-menu-toolbar-item",template:'<ng-container *seHasOperationPermission="\'se.sync.catalog\'"><fd-popover [(isOpen)]="toolbarItem.isOpen" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-expanded]="toolbarItem.isOpen"><span class="icon-synchronize se-toolbar-menu-ddlb--button__icon"><span *ngIf="isNotInSync" class="hyicon hyicon-caution se-toolbar-menu-ddlb--button__caution"></span> </span><span class="toolbar-action-button__txt" [ngClass]="{\'se-toolbar-menu-ddlb--button__txt\': isNotInSync }" [translate]="toolbarItem.name"></span></button></fd-popover-control><fd-popover-body><div *ngIf="toolbarItem.isOpen && isReady" class="toolbar-action--include se-sync-menu-content__dropdown"><se-prevent-vertical-overflow><div class="se-sync-menu-content__header"><span class="se-sync-menu-content__header-title" translate="se.cms.synchronization.page.title"></span><se-help *ngIf="!syncPageConditions?.canSyncHomepage && !syncPageConditions?.pageHasNoDepOrNoSyncStatus" class="se-page-sync__y-help"><span>{{ helpText }}</span></se-help></div><se-page-synchronization-panel [cmsPage]="cmsPage" [uriContext]="uriContext"></se-page-synchronization-panel></se-prevent-vertical-overflow></div></fd-popover-body></fd-popover></ng-container>',styles:['.se-toolbar-menu-ddlb--button__icon{position:relative}.se-toolbar-menu-ddlb--button__caution{position:absolute;color:#e9730c;right:-9px;bottom:1px}.se-sync-menu-content__header{padding:15px 20px 0}.se-sync-menu-content__header-title{text-transform:capitalize;font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-sync-menu-content__dropdown{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;max-width:400px}.se-sync-menu-content__dropdown::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-sync-menu-content__dropdown::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-sync-menu-content__dropdown::after,.se-sync-menu-content__dropdown::before{left:14px}'],changeDetection:a.ChangeDetectionStrategy.OnPush});var Bn=function(){PageSyncMenuToolbarItemComponent.$inject=["crossFrameEventService","systemEventService","catalogService","pageService","pageInfoService","syncPollingService","translateService","logService","cdr","toolbarItem"];function PageSyncMenuToolbarItemComponent(e,t,n,i,o,r,a,s,c,l){this.crossFrameEventService=e;this.systemEventService=t;this.catalogService=n;this.pageService=i;this.pageInfoService=o;this.syncPollingService=r;this.translateService=a;this.logService=s;this.cdr=c;this.toolbarItem=l;this.isReady=false}PageSyncMenuToolbarItemComponent.prototype.ngOnInit=function(){var e=this;this.unRegisterPageChange=this.crossFrameEventService.subscribe(r.EVENTS.PAGE_CHANGE,(function(){return e.setup()}));this.unRegisterSyncPageConditions=this.systemEventService.subscribe($n,(function(t,n){e.syncPageConditions=n;e.setHelpText();e.cdr.detectChanges()}));return this.setup()};PageSyncMenuToolbarItemComponent.prototype.ngOnDestroy=function(){this.unRegisterSyncPageConditions();this.unRegisterPageChange();if(this.unRegisterSyncPolling){this.unRegisterSyncPolling()}};PageSyncMenuToolbarItemComponent.prototype.setup=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n;return __generator(this,(function(i){switch(i.label){case 0:this.isReady=false;this.isNotInSync=false;this.cdr.detectChanges();i.label=1;case 1:i.trys.push([1,4,,5]);return[4,this.fetchSynchronizationPanelInfo()];case 2:n=i.sent(),this.cmsPage=n[0],this.uriContext=n[1];return[4,this.catalogService.isContentCatalogVersionNonActive()];case 3:e=i.sent();if(!e){return[2]}return[3,5];case 4:t=i.sent();this.logService.error("Failed to setup PageSyncMenuToolbarItemComponent",t);return[2];case 5:this.subscribeSyncPolling();this.fetchSyncStatusAndSetIsNotInSync();this.isReady=true;this.cdr.detectChanges();return[2]}}))}))};PageSyncMenuToolbarItemComponent.prototype.fetchSynchronizationPanelInfo=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){return[2,Promise.all([this.pageService.getCurrentPageInfo(),this.catalogService.retrieveUriContext()]).catch((function(t){e.logService.error("Failed to fetch Synchronization Panel Info",t);throw new Error(t)}))]}))}))};PageSyncMenuToolbarItemComponent.prototype.subscribeSyncPolling=function(){var e=this;if(this.unRegisterSyncPolling){this.unRegisterSyncPolling()}this.unRegisterSyncPolling=this.crossFrameEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_POLLING.FAST_FETCH,(function(){return e.fetchSyncStatusAndSetIsNotInSync()}))};PageSyncMenuToolbarItemComponent.prototype.fetchSyncStatusAndSetIsNotInSync=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.fetchSyncStatus()];case 1:e=t.sent();this.isNotInSync=!o.synchronizationUtils.isInSync(e);this.cdr.detectChanges();return[2]}}))}))};PageSyncMenuToolbarItemComponent.prototype.fetchSyncStatus=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:e=t.sent();return[2,this.syncPollingService.getSyncStatus(e)]}}))}))};PageSyncMenuToolbarItemComponent.prototype.setHelpText=function(){var e=this.translateService.instant("se.cms.synchronization.page.header");if(!this.syncPageConditions.pageHasNoDepOrNoSyncStatus){e+=" "+this.translateService.instant("se.cms.synchronization.page.header.help")}this.helpText=e};PageSyncMenuToolbarItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-sync-menu-toolbar-item",template:'<ng-container *seHasOperationPermission="\'se.sync.catalog\'"><fd-popover [(isOpen)]="toolbarItem.isOpen" [closeOnOutsideClick]="true"><fd-popover-control><button type="button" class="btn toolbar-action--button" [attr.aria-expanded]="toolbarItem.isOpen"><span class="icon-synchronize se-toolbar-menu-ddlb--button__icon"><span *ngIf="isNotInSync" class="hyicon hyicon-caution se-toolbar-menu-ddlb--button__caution"></span> </span><span class="toolbar-action-button__txt" [ngClass]="{\'se-toolbar-menu-ddlb--button__txt\': isNotInSync }" [translate]="toolbarItem.name"></span></button></fd-popover-control><fd-popover-body><div *ngIf="toolbarItem.isOpen && isReady" class="toolbar-action--include se-sync-menu-content__dropdown"><se-prevent-vertical-overflow><div class="se-sync-menu-content__header"><span class="se-sync-menu-content__header-title" translate="se.cms.synchronization.page.title"></span><se-help *ngIf="!syncPageConditions?.canSyncHomepage && !syncPageConditions?.pageHasNoDepOrNoSyncStatus" class="se-page-sync__y-help"><span>{{ helpText }}</span></se-help></div><se-page-synchronization-panel [cmsPage]="cmsPage" [uriContext]="uriContext"></se-page-synchronization-panel></se-prevent-vertical-overflow></div></fd-popover-body></fd-popover></ng-container>',styles:['.se-toolbar-menu-ddlb--button__icon{position:relative}.se-toolbar-menu-ddlb--button__caution{position:absolute;color:#e9730c;right:-9px;bottom:1px}.se-sync-menu-content__header{padding:15px 20px 0}.se-sync-menu-content__header-title{text-transform:capitalize;font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-sync-menu-content__dropdown{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;max-width:400px}.se-sync-menu-content__dropdown::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.se-sync-menu-content__dropdown::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.se-sync-menu-content__dropdown::after,.se-sync-menu-content__dropdown::before{left:14px}'],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(9,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[r.CrossFrameEventService,r.SystemEventService,r.ICatalogService,o.IPageService,r.IPageInfoService,o.ISyncPollingService,d.TranslateService,r.LogService,a.ChangeDetectorRef,Object])],PageSyncMenuToolbarItemComponent);return PageSyncMenuToolbarItemComponent}();window.__smartedit__.addDecoratorPayload("Component","CatalogDetailsSyncComponent",{selector:"se-catalog-details-sync",template:'\n        <se-synchronize-catalog\n            [catalog]="catalogDetails.catalog"\n            [catalogVersion]="catalogDetails.catalogVersion"\n            [activeCatalogVersion]="catalogDetails.activeCatalogVersion"\n        >\n        </se-synchronize-catalog>\n    '});var Hn=function(){CatalogDetailsSyncComponent.$inject=["catalogDetails"];function CatalogDetailsSyncComponent(e){this.catalogDetails=e}CatalogDetailsSyncComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-catalog-details-sync",template:'\n        <se-synchronize-catalog\n            [catalog]="catalogDetails.catalog"\n            [catalogVersion]="catalogDetails.catalogVersion"\n            [activeCatalogVersion]="catalogDetails.activeCatalogVersion"\n        >\n        </se-synchronize-catalog>\n    '}),__param(0,a.Inject(r.CATALOG_DETAILS_ITEM_DATA)),__metadata("design:paramtypes",[Object])],CatalogDetailsSyncComponent);return CatalogDetailsSyncComponent}();var Gn=function(){function SynchronizationModule(){}SynchronizationModule=__decorate([a.NgModule({imports:[g.CommonModule,r.TranslationModule.forChild(),m.PopoverModule,r.L10nPipeModule,r.HasOperationPermissionDirectiveModule,o.SynchronizationPanelModule,r.PreventVerticalOverflowModule,r.HelpModule],declarations:[Ln,Vn,Un,jn,Bn,Hn],entryComponents:[Ln,Vn,Un,jn,Bn,Hn]})],SynchronizationModule);return SynchronizationModule}();var Wn="pageApprovalSelectorClose";window.__smartedit__.addDecoratorPayload("Component","PageApprovalSelectorComponent",{selector:"se-page-approval-selector",template:'<se-dropdown-menu *ngIf="showDropdown" [useProjectedAnchor]="true" [dropdownItems]="pageApprovalOptions$ | async" [(isOpen)]="isOpen" (isOpenChange)="onDropdownToggle($event)" [additionalClasses]="[\'se-page-approval-selector-list\']"><button class="se-page-approval-selector__toggle-btn fd-button--light sap-icon--navigation-down-arrow"></button></se-dropdown-menu>',styles:[".se-page-approval-selector__toggle-btn{color:#0a6ed1}.se-page-approval-selector__toggle-btn::before{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-page-approval-selector__toggle-btn:active,.se-page-approval-selector__toggle-btn:focus{box-shadow:none}.se-page-approval-selector__toggle-btn:active,.se-page-approval-selector__toggle-btn:hover{outline:0;border-color:var(--sapButton_Hover_BorderColor);background-color:#fff}.se-page-approval-selector__icon--draft,.se-page-approval-selector__icon--ready-to-sync{width:12px;height:12px;border-radius:50%;margin-right:10px}.se-page-approval-selector__icon--draft{background-color:#6a6d70}.se-page-approval-selector__icon--ready-to-sync{background-color:#0a6ed1}.se-page-approval-selector-list{margin:0;min-width:190px;border:1px solid transparent;box-shadow:0 2px 8px 0 #d9d9d9;border-radius:4px}.se-page-approval-selector .se-dropdown-item{display:flex;align-items:center}.se-page-approval-selector .se-dropdown-item:hover{background-color:var(--sapBackgroundColor,#f7f7f7)}.se-page-approval-selector .fd-popover-container-custom{box-shadow:var(--sapContent_Shadow0)}.se-page-approval-selector .fd-menu{padding:0}"],host:{"[class.se-page-approval-selector]":"true"},encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var qn=function(){PageApprovalSelectorComponent.$inject=["iframeClickDetectionService","pageService","waitDialogService","workflowService","crossFrameEventService","routingService","logService","cdr"];function PageApprovalSelectorComponent(e,t,n,i,r,a,s,c){var l=this;this.iframeClickDetectionService=e;this.pageService=t;this.waitDialogService=n;this.workflowService=i;this.crossFrameEventService=r;this.routingService=a;this.logService=s;this.cdr=c;this.isOpen=false;this.showDropdown=true;this.pageApprovalOptionsSubject=new u.BehaviorSubject({CHECK:{status:o.CmsApprovalStatus.CHECK,key:"se.cms.page.approval.check",icon:"se-page-approval-selector__icon--draft",callback:function(e,t){return l.selectApprovalStatus(t)}},APPROVED:{status:o.CmsApprovalStatus.APPROVED,key:"se.cms.page.approval.approved",icon:"se-page-approval-selector__icon--ready-to-sync",callback:function(e,t){return l.selectApprovalStatus(t)}}})}PageApprovalSelectorComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:this.unRegWfFinishedHandler=this.crossFrameEventService.subscribe(o.WORKFLOW_FINISHED_EVENT,(function(){return e.hideComponentIfWorkflowInProgress()}));this.unRegPerspectiveChangedHandler=this.crossFrameEventService.subscribe(r.EVENT_PERSPECTIVE_CHANGED,(function(){return e.hideComponentIfWorkflowInProgress()}));this.iframeClickDetectionService.registerCallback(Wn,(function(){return e.closeDropdown()}));this.pageApprovalOptions$=this.pageApprovalOptionsSubject.pipe(p.map((function(e){return Object.values(e).filter((function(e){return!e.selected}))})));return[4,this.hideComponentIfWorkflowInProgress()];case 1:t.sent();return[2]}}))}))};PageApprovalSelectorComponent.prototype.ngOnDestroy=function(){this.unRegWfFinishedHandler();this.unRegPerspectiveChangedHandler();this.iframeClickDetectionService.removeCallback(Wn)};PageApprovalSelectorComponent.prototype.onDropdownToggle=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!e)return[3,2];return[4,this.getCurrentPageApprovalStatus()];case 1:t=n.sent();this.selectOption(t);n.label=2;case 2:return[2]}}))}))};PageApprovalSelectorComponent.prototype.onDropdownToggle.$inject=["isOpen"];PageApprovalSelectorComponent.prototype.selectApprovalStatus=function(e){var t=e.status;return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(n){switch(n.label){case 0:this.waitDialogService.showWaitModal(null);n.label=1;case 1:n.trys.push([1,3,4,5]);return[4,this.pageService.forcePageApprovalStatus(t)];case 2:n.sent();this.crossFrameEventService.publish(r.EVENTS.PAGE_UPDATED);this.routingService.reload();return[3,5];case 3:e=n.sent();this.logService.warn("[PageApprovalSelector] - Can't change page status.",e);return[3,5];case 4:this.waitDialogService.hideWaitModal();this.unselectOptions();return[7];case 5:return[2]}}))}))};PageApprovalSelectorComponent.prototype.selectApprovalStatus.$inject=["_a"];PageApprovalSelectorComponent.prototype.getCurrentPageApprovalStatus=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:e=t.sent().approvalStatus;return[2,e]}}))}))};PageApprovalSelectorComponent.prototype.hideComponentIfWorkflowInProgress=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:e=n.sent().uuid;return[4,this.workflowService.getActiveWorkflowForPageUuid(e)];case 2:t=n.sent();this.showDropdown=!t;this.cdr.detectChanges();return[2]}}))}))};PageApprovalSelectorComponent.prototype.selectOption=function(e){this.unselectOptions();var t=this.getOptions();if(t[e]){t[e].selected=true}this.pageApprovalOptionsSubject.next(t)};PageApprovalSelectorComponent.prototype.selectOption.$inject=["option"];PageApprovalSelectorComponent.prototype.unselectOptions=function(){var e=this.getOptions();Object.keys(e).forEach((function(t){e[t].selected=false}));this.pageApprovalOptionsSubject.next(e)};PageApprovalSelectorComponent.prototype.getOptions=function(){return __assign({},this.pageApprovalOptionsSubject.getValue())};PageApprovalSelectorComponent.prototype.closeDropdown=function(){this.isOpen=false;this.cdr.detectChanges()};PageApprovalSelectorComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-approval-selector",template:'<se-dropdown-menu *ngIf="showDropdown" [useProjectedAnchor]="true" [dropdownItems]="pageApprovalOptions$ | async" [(isOpen)]="isOpen" (isOpenChange)="onDropdownToggle($event)" [additionalClasses]="[\'se-page-approval-selector-list\']"><button class="se-page-approval-selector__toggle-btn fd-button--light sap-icon--navigation-down-arrow"></button></se-dropdown-menu>',styles:[".se-page-approval-selector__toggle-btn{color:#0a6ed1}.se-page-approval-selector__toggle-btn::before{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-page-approval-selector__toggle-btn:active,.se-page-approval-selector__toggle-btn:focus{box-shadow:none}.se-page-approval-selector__toggle-btn:active,.se-page-approval-selector__toggle-btn:hover{outline:0;border-color:var(--sapButton_Hover_BorderColor);background-color:#fff}.se-page-approval-selector__icon--draft,.se-page-approval-selector__icon--ready-to-sync{width:12px;height:12px;border-radius:50%;margin-right:10px}.se-page-approval-selector__icon--draft{background-color:#6a6d70}.se-page-approval-selector__icon--ready-to-sync{background-color:#0a6ed1}.se-page-approval-selector-list{margin:0;min-width:190px;border:1px solid transparent;box-shadow:0 2px 8px 0 #d9d9d9;border-radius:4px}.se-page-approval-selector .se-dropdown-item{display:flex;align-items:center}.se-page-approval-selector .se-dropdown-item:hover{background-color:var(--sapBackgroundColor,#f7f7f7)}.se-page-approval-selector .fd-popover-container-custom{box-shadow:var(--sapContent_Shadow0)}.se-page-approval-selector .fd-menu{padding:0}"],host:{"[class.se-page-approval-selector]":"true"},encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.IIframeClickDetectionService,o.IPageService,r.IWaitDialogService,Pe,r.CrossFrameEventService,r.SmarteditRoutingService,r.LogService,a.ChangeDetectorRef])],PageApprovalSelectorComponent);return PageApprovalSelectorComponent}();window.__smartedit__.addDecoratorPayload("Component","PageDisplayStatusWrapperComponent",{selector:"se-page-display-status-wrapper",template:'\n        <div class="se-page-status-toolbar-container">\n            <se-page-display-status></se-page-display-status>\n        </div>\n    ',styles:["\n            .se-page-status-toolbar-container {\n                padding-left: 5px;\n                padding-right: 20px;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                border-left: 1px solid fd-color('neutral', 3);\n            }\n        "],changeDetection:a.ChangeDetectionStrategy.OnPush});var Kn=function(){function PageDisplayStatusWrapperComponent(){}PageDisplayStatusWrapperComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-display-status-wrapper",template:'\n        <div class="se-page-status-toolbar-container">\n            <se-page-display-status></se-page-display-status>\n        </div>\n    ',styles:["\n            .se-page-status-toolbar-container {\n                padding-left: 5px;\n                padding-right: 20px;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                border-left: 1px solid fd-color('neutral', 3);\n            }\n        "],changeDetection:a.ChangeDetectionStrategy.OnPush})],PageDisplayStatusWrapperComponent);return PageDisplayStatusWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","PageWorkflowMenuAllTasksTabComponent",{selector:"se-page-workflow-menu-all-tasks-tab",template:'\n        <se-page-workflow-menu-tasks-tab\n            [actions]="actions"\n            [workflow]="workflow"\n            [canMakeDecisions]="false"\n        >\n        </se-page-workflow-menu-tasks-tab>\n    '});var Yn=function(){function PageWorkflowMenuAllTasksTabComponent(e){var t;t=e.model,this.actions=t.actions,this.workflow=t.workflow}PageWorkflowMenuAllTasksTabComponent=__decorate([a.Component({selector:"se-page-workflow-menu-all-tasks-tab",template:'\n        <se-page-workflow-menu-tasks-tab\n            [actions]="actions"\n            [workflow]="workflow"\n            [canMakeDecisions]="false"\n        >\n        </se-page-workflow-menu-tasks-tab>\n    '}),__param(0,a.Inject(r.TAB_DATA)),__metadata("design:paramtypes",[Object])],PageWorkflowMenuAllTasksTabComponent);return PageWorkflowMenuAllTasksTabComponent}();window.__smartedit__.addDecoratorPayload("Component","PageWorkflowMenuCurrentTasksTabComponent",{selector:"se-page-workflow-menu-current-tasks-tab",template:'\n        <se-page-workflow-menu-tasks-tab\n            [actions]="currentActions"\n            [workflow]="workflow"\n            [canMakeDecisions]="true"\n        >\n        </se-page-workflow-menu-tasks-tab>\n    '});var Xn=function(){function PageWorkflowMenuCurrentTasksTabComponent(e){var t;t=e.model,this.actions=t.actions,this.workflow=t.workflow}PageWorkflowMenuCurrentTasksTabComponent.prototype.ngOnInit=function(){this.currentActions=this.actions.filter((function(e){return e.status.toLowerCase()===be.IN_PROGRESS}))};PageWorkflowMenuCurrentTasksTabComponent=__decorate([a.Component({selector:"se-page-workflow-menu-current-tasks-tab",template:'\n        <se-page-workflow-menu-tasks-tab\n            [actions]="currentActions"\n            [workflow]="workflow"\n            [canMakeDecisions]="true"\n        >\n        </se-page-workflow-menu-tasks-tab>\n    '}),__param(0,a.Inject(r.TAB_DATA)),__metadata("design:paramtypes",[Object])],PageWorkflowMenuCurrentTasksTabComponent);return PageWorkflowMenuCurrentTasksTabComponent}();window.__smartedit__.addDecoratorPayload("Component","PageWorkflowMenuComponent",{selector:"se-page-workflow-menu",template:'<div *ngIf="isReady"><div *ngIf="!pageHasWorkflow && isWorkflowEnabled"><ng-container *seHasOperationPermission="\'se.start.page.workflow\'"><button id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn" class="btn toolbar-action--button" type="button" (click)="startWorkflow()" aria-expanded="false"><span id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn_lbl" class="toolbar-action-button__txt" translate="se.cms.workflow.toolbar.start.workflow"></span></button></ng-container></div><div *seHasOperationPermission="\'se.view.page.workflowMenu\'"><fd-popover *ngIf="pageHasWorkflow" class="toolbar-action" [closeOnOutsideClick]="true" [isOpen]="actionItem.isOpen" (isOpenChange)="onDropdownToggle($event)"><fd-popover-control><button type="button" class="page-tasks-btn toolbar-action--button" [attr.aria-expanded]="actionItem.isOpen"><span class="page-tasks-btn__icon sap-icon--workflow-tasks"></span> <span class="page-tasks-btn__label" translate="se.cms.workflow.toolbar.view.workflow.menu"></span></button></fd-popover-control><fd-popover-body><div *ngIf="actionItem.isOpen" class="toolbar-action--include se-page-workflow-menu"><div class="se-page-workflow-menu__header"><div class="se-page-workflow-menu__header-text" translate="se.cms.workflow.toolbar.view.workflow.menu"></div><div class="se-page-workflow-menu__header-menu"><se-workflow-item-menu [workflowInfo]="workflow"></se-workflow-item-menu></div></div><div class="se-version-toolbar-menu-content__body"><div class="se-page-workflow-menu-tabs"><se-tabs *ngIf="areTabsReady; else spinner" [tabsList]="tabsList" [model]="tabsData" [numTabsDisplayed]="2"></se-tabs><ng-template #spinner><se-spinner [isSpinning]="true"></se-spinner></ng-template></div></div></div></fd-popover-body></fd-popover></div></div>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}se-page-workflow-menu .toolbar-action .page-tasks-btn[aria-expanded=true]{background-color:rgba(10,110,209,.07)}se-page-workflow-menu .toolbar-action .page-tasks-btn__label{font-size:14px;color:#32363a}se-page-workflow-menu .toolbar-action .page-tasks-btn__icon{color:#0a6ed1;font-size:18px;margin-right:8px}se-page-workflow-menu .se-page-workflow-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;min-width:350px;min-height:130px;right:-126px;left:auto;font-size:14px;font-family:\'72\',-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;line-height:20/14}se-page-workflow-menu .se-page-workflow-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}se-page-workflow-menu .se-page-workflow-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}se-page-workflow-menu .se-page-workflow-menu,se-page-workflow-menu .se-page-workflow-menu::after,se-page-workflow-menu .se-page-workflow-menu::before{left:50%;transform:translate(-50%)}se-page-workflow-menu .se-page-workflow-menu__header{display:flex;justify-content:space-between}se-page-workflow-menu .se-page-workflow-menu__header-text{font-size:16px;padding:20px 0 0 16px}se-page-workflow-menu .se-page-workflow-menu__header-menu{padding:16px 16px 0 0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset{margin:0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__tab{margin-left:16px}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link{color:#32363a}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link:hover{color:#0a6ed1}'],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var Zn=function(){PageWorkflowMenuComponent.$inject=["workflowService","workflowFacade","systemEventService","routingService","pageService","cdr","actionItem"];function PageWorkflowMenuComponent(e,t,n,i,o,r,a){this.workflowService=e;this.workflowFacade=t;this.systemEventService=n;this.routingService=i;this.pageService=o;this.cdr=r;this.actionItem=a;this.isReady=false;this.isWorkflowEnabled=false;this.areTabsReady=false;this.pageHasWorkflow=false;this.tabsList=[{id:"currentTasksTab",title:"se.cms.page.workflow.tabs.currenttasks",hasErrors:false,component:Xn},{id:"allTasksTab",title:"se.cms.page.workflow.tabs.alltasks",hasErrors:false,component:Yn}];this.tabsData={workflow:null,actions:[]}}PageWorkflowMenuComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:this.unRegOpenMenuEvent=this.systemEventService.subscribe(he,(function(t,n){return e.onDropdownToggle(n)}));this.unRegPerspectiveChangedEvent=this.systemEventService.subscribe(r.EVENT_PERSPECTIVE_CHANGED,(function(){return e.loadWorkflow()}));this.unRegWorkflowFinishedEvent=this.systemEventService.subscribe(o.WORKFLOW_FINISHED_EVENT,(function(){return e.loadWorkflow()}));this.unRegDecisionSelectedEvent=this.systemEventService.subscribe(fe,(function(){return e.closeDropdown()}));this.unRegWorkflowRefreshEvent=this.systemEventService.subscribe(Ce,(function(){return e.loadWorkflow()}));return[4,this.loadWorkflow()];case 1:t.sent();this.isReady=true;this.actionItem.isOpen=false;this.cdr.detectChanges();return[2]}}))}))};PageWorkflowMenuComponent.prototype.ngOnDestroy=function(){this.unRegOpenMenuEvent();this.unRegPerspectiveChangedEvent();this.unRegWorkflowFinishedEvent();this.unRegDecisionSelectedEvent();this.unRegWorkflowRefreshEvent()};Object.defineProperty(PageWorkflowMenuComponent.prototype,"workflow",{get:function(){return this._workflow},set:function(e){this._workflow=e;this.tabsData.workflow=e},enumerable:false,configurable:true});PageWorkflowMenuComponent.prototype.onDropdownToggle=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:this.actionItem.isOpen=e;if(!e){return[2]}this.systemEventService.publish(ve);return[4,this.loadWorkflowAndActions()];case 1:t.sent();return[2]}}))}))};PageWorkflowMenuComponent.prototype.onDropdownToggle.$inject=["open"];PageWorkflowMenuComponent.prototype.startWorkflow=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.workflowFacade.startWorkflow()];case 1:e.sent();this.routingService.reload();return[2]}}))}))};PageWorkflowMenuComponent.prototype.loadWorkflowAndActions=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.areTabsReady=false;this.cdr.detectChanges();return[4,this.loadWorkflow(false)];case 1:e.sent();return[4,this.loadActions()];case 2:e.sent();this.areTabsReady=true;this.cdr.detectChanges();return[2]}}))}))};PageWorkflowMenuComponent.prototype.loadWorkflow=function(e){if(e===void 0){e=true}return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pageService.getCurrentPageInfo()];case 1:t=i.sent();return[4,this.workflowService.getActiveWorkflowForPageUuid(t.uuid)];case 2:n=i.sent();this.workflow=n;this.pageHasWorkflow=!!n;this.isWorkflowEnabled=t.displayStatus==="DRAFT";if(e){this.cdr.detectChanges()}return[2]}}))}))};PageWorkflowMenuComponent.prototype.loadWorkflow.$inject=["detectChanges"];PageWorkflowMenuComponent.prototype.loadActions=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.workflowFacade.getAllActionsForWorkflow(this.workflow.workflowCode)];case 1:e=t.sent();this.setActions(e);return[2]}}))}))};PageWorkflowMenuComponent.prototype.setActions=function(e){var t=this;e.sort((function(e,n){return t.actionComparator(e,n)}));this.tabsData.actions=e};PageWorkflowMenuComponent.prototype.setActions.$inject=["actions"];PageWorkflowMenuComponent.prototype.closeDropdown=function(){this.actionItem.isOpen=false;this.cdr.detectChanges()};PageWorkflowMenuComponent.prototype.actionComparator=function(e,t){var n=this.getActionPriority(e);var i=this.getActionPriority(t);return n!==i?n-i:e.startedAgoInMillis-t.startedAgoInMillis};PageWorkflowMenuComponent.prototype.actionComparator.$inject=["a","b"];PageWorkflowMenuComponent.prototype.getActionPriority=function(e){switch(e.status.toLowerCase()){case be.IN_PROGRESS:return 1;case be.PENDING:return 2;case be.COMPLETED:return 3;default:return 4}};PageWorkflowMenuComponent.prototype.getActionPriority.$inject=["action"];PageWorkflowMenuComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-workflow-menu",template:'<div *ngIf="isReady"><div *ngIf="!pageHasWorkflow && isWorkflowEnabled"><ng-container *seHasOperationPermission="\'se.start.page.workflow\'"><button id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn" class="btn toolbar-action--button" type="button" (click)="startWorkflow()" aria-expanded="false"><span id="smartEditPerspectiveToolbar_option_se.cms.startWorkflow_btn_lbl" class="toolbar-action-button__txt" translate="se.cms.workflow.toolbar.start.workflow"></span></button></ng-container></div><div *seHasOperationPermission="\'se.view.page.workflowMenu\'"><fd-popover *ngIf="pageHasWorkflow" class="toolbar-action" [closeOnOutsideClick]="true" [isOpen]="actionItem.isOpen" (isOpenChange)="onDropdownToggle($event)"><fd-popover-control><button type="button" class="page-tasks-btn toolbar-action--button" [attr.aria-expanded]="actionItem.isOpen"><span class="page-tasks-btn__icon sap-icon--workflow-tasks"></span> <span class="page-tasks-btn__label" translate="se.cms.workflow.toolbar.view.workflow.menu"></span></button></fd-popover-control><fd-popover-body><div *ngIf="actionItem.isOpen" class="toolbar-action--include se-page-workflow-menu"><div class="se-page-workflow-menu__header"><div class="se-page-workflow-menu__header-text" translate="se.cms.workflow.toolbar.view.workflow.menu"></div><div class="se-page-workflow-menu__header-menu"><se-workflow-item-menu [workflowInfo]="workflow"></se-workflow-item-menu></div></div><div class="se-version-toolbar-menu-content__body"><div class="se-page-workflow-menu-tabs"><se-tabs *ngIf="areTabsReady; else spinner" [tabsList]="tabsList" [model]="tabsData" [numTabsDisplayed]="2"></se-tabs><ng-template #spinner><se-spinner [isSpinning]="true"></se-spinner></ng-template></div></div></div></fd-popover-body></fd-popover></div></div>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}se-page-workflow-menu .toolbar-action .page-tasks-btn[aria-expanded=true]{background-color:rgba(10,110,209,.07)}se-page-workflow-menu .toolbar-action .page-tasks-btn__label{font-size:14px;color:#32363a}se-page-workflow-menu .toolbar-action .page-tasks-btn__icon{color:#0a6ed1;font-size:18px;margin-right:8px}se-page-workflow-menu .se-page-workflow-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;min-width:350px;min-height:130px;right:-126px;left:auto;font-size:14px;font-family:\'72\',-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;line-height:20/14}se-page-workflow-menu .se-page-workflow-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}se-page-workflow-menu .se-page-workflow-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}se-page-workflow-menu .se-page-workflow-menu,se-page-workflow-menu .se-page-workflow-menu::after,se-page-workflow-menu .se-page-workflow-menu::before{left:50%;transform:translate(-50%)}se-page-workflow-menu .se-page-workflow-menu__header{display:flex;justify-content:space-between}se-page-workflow-menu .se-page-workflow-menu__header-text{font-size:16px;padding:20px 0 0 16px}se-page-workflow-menu .se-page-workflow-menu__header-menu{padding:16px 16px 0 0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset{margin:0}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__tab{margin-left:16px}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link{color:#32363a}se-page-workflow-menu .se-page-workflow-menu-tabs .se-tabset__link:hover{color:#0a6ed1}'],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(6,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[Pe,De,r.SystemEventService,r.SmarteditRoutingService,o.IPageService,a.ChangeDetectorRef,Object])],PageWorkflowMenuComponent);return PageWorkflowMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowInboxComponent",{selector:"se-workflow-inbox",template:'<fd-popover class="toolbar-action se-workflow-inbox-container dropdown" [class.open]="actionItem.isOpen" [(isOpen)]="actionItem.isOpen" (isOpenChange)="onDropdownToggle(isOpen)" [closeOnOutsideClick]="true" [triggers]="[\'click\']" [placement]="\'bottom-\' + actionItem.dropdownPosition"><fd-popover-control class="se-workflow-inbox-toggle-control"><button type="button" class="se-workflow-inbox-toggle toolbar-action--button--compact" [attr.aria-pressed]="actionItem.isOpen"><span class="se-toolbar-actions__icon sap-icon--task"></span><se-workflow-inbox-badge></se-workflow-inbox-badge></button></fd-popover-control><fd-popover-body><div [ngClass]="{\n                \'se-toolbar__dropdown--right\': actionItem.dropdownPosition === \'right\',\n                \'se-toolbar__dropdown--center\': actionItem.dropdownPosition === \'center\',\n                \'se-toolbar__dropdown--left\': actionItem.dropdownPosition === \'left\'\n            }" class="toolbar-action--include--compact"><div *ngIf="actionItem.isOpen" class="se-workflow-inbox"><div class="se-workflow-inbox"><div class="se-workflow-inbox-header"><div class="se-workflow-inbox-header__title" [translate]="\'se.cms.workflow.toolbar.inbox\'"></div></div><div class="se-workflow-inbox-tasks se-cms-dev-workflow-inbox-tasks fd-panel__body"><div *ngIf="!tasksNotReady && totalNumberOfTasks === 0" class="se-workflow-inbox-tasks__no-tasks"><img src="static-resources/images/Inbox.svg" alt="empty-inbox"/> <span class="se-workflow-inbox__empty-inbox-message" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message\'"></span> <span class="se-workflow-inbox__empty-inbox-message-alt" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message.alt\'"></span></div><se-infinite-scrolling class="se-version-panel__infinite-scroll se-infinite-scrolling--narrowed" [pageSize]="pageSize" [fetchPage]="fetchPageOfInboxTasks" (itemsChange)="onInboxTasksLoaded($event)"><div *ngFor="let task of workflowTasks; let i = index; let last = last; trackBy: trackByIndex" class="se-workflow-inbox-task se-cms-dev-workflow-inbox-task"><se-workflow-inbox-task id="workflow-inbox-task-{{i}}" [class.se-workflow-inbox-task-last]="last" [task]="task"></se-workflow-inbox-task></div></se-infinite-scrolling></div></div></div></div></fd-popover-body></fd-popover>',styles:[".se-workflow-inbox-toggle{outline:0}.se-workflow-inbox-header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px;font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a;border-bottom:1px solid #d9d9d9;padding:10px 0 15px 20px;height:46px}.se-workflow-inbox-header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-workflow-inbox-tasks{padding:16px 0 8px;width:280px}.se-workflow-inbox-tasks__no-tasks{display:flex;flex-direction:column;align-items:center}.se-workflow-inbox__empty-inbox-message{color:#51555a;padding:8px 0 4px}.se-workflow-inbox__empty-inbox-message-alt{font-size:13px;color:#6a6d70;padding-bottom:30px}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Qn=function(){WorkflowInboxComponent.$inject=["workflowFacade","systemEventService","workflowTasksPollingService","actionItem","cdr"];function WorkflowInboxComponent(e,t,n,i,o){var r=this;this.workflowFacade=e;this.systemEventService=t;this.workflowTasksPollingService=n;this.actionItem=i;this.cdr=o;this.pageSize=10;this.workflowTasks=[];this.fetchPageOfInboxTasks=function(e,t,n){return r.loadInboxTasks(e,t,n)}}WorkflowInboxComponent.prototype.ngOnInit=function(){var e=this;this.tasksNotReady=true;this.unRegisterOpenDropdownEvent=this.systemEventService.subscribe(_e,(function(){return e.openDropdown()}));this.unRegisterWorkflowCreatedEvent=this.systemEventService.subscribe(o.WORKFLOW_CREATED_EVENT,(function(){return e.loadInboxTasks("",e.pageSize,0)}));this.unRegWorkflowTasksMenuOpenedEvent=this.systemEventService.subscribe(ve,(function(){return e.hideDropdown()}))};WorkflowInboxComponent.prototype.ngOnDestroy=function(){this.workflowTasksPollingService.stopPolling();this.unRegisterOpenDropdownEvent();this.unRegisterWorkflowCreatedEvent();this.unRegWorkflowTasksMenuOpenedEvent()};WorkflowInboxComponent.prototype.loadInboxTasks=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.workflowFacade.getWorkflowInboxTasks({currentPage:n,mask:e,pageSize:t})];case 1:i=o.sent();this.tasksNotReady=false;this.totalNumberOfTasks=i.pagination.totalCount;this.workflowFacade.updateWorkflowTasksCount(this.totalNumberOfTasks);this.cdr.detectChanges();return[2,i]}}))}))};WorkflowInboxComponent.prototype.loadInboxTasks.$inject=["mask","pageSize","currentPage"];WorkflowInboxComponent.prototype.onInboxTasksLoaded=function(e){this.workflowTasks=e};WorkflowInboxComponent.prototype.onInboxTasksLoaded.$inject=["workflowTasks"];WorkflowInboxComponent.prototype.onDropdownToggle=function(e){if(e){this.workflowTasksPollingService.stopPolling();return}this.workflowTasksPollingService.startPolling();this.tasksNotReady=true};WorkflowInboxComponent.prototype.onDropdownToggle.$inject=["isOpen"];WorkflowInboxComponent.prototype.trackByIndex=function(e){return e};WorkflowInboxComponent.prototype.trackByIndex.$inject=["index"];WorkflowInboxComponent.prototype.openDropdown=function(){this.actionItem.isOpen=true;this.cdr.detectChanges()};WorkflowInboxComponent.prototype.hideDropdown=function(){this.actionItem.isOpen=false;this.cdr.detectChanges()};WorkflowInboxComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-inbox",template:'<fd-popover class="toolbar-action se-workflow-inbox-container dropdown" [class.open]="actionItem.isOpen" [(isOpen)]="actionItem.isOpen" (isOpenChange)="onDropdownToggle(isOpen)" [closeOnOutsideClick]="true" [triggers]="[\'click\']" [placement]="\'bottom-\' + actionItem.dropdownPosition"><fd-popover-control class="se-workflow-inbox-toggle-control"><button type="button" class="se-workflow-inbox-toggle toolbar-action--button--compact" [attr.aria-pressed]="actionItem.isOpen"><span class="se-toolbar-actions__icon sap-icon--task"></span><se-workflow-inbox-badge></se-workflow-inbox-badge></button></fd-popover-control><fd-popover-body><div [ngClass]="{\n                \'se-toolbar__dropdown--right\': actionItem.dropdownPosition === \'right\',\n                \'se-toolbar__dropdown--center\': actionItem.dropdownPosition === \'center\',\n                \'se-toolbar__dropdown--left\': actionItem.dropdownPosition === \'left\'\n            }" class="toolbar-action--include--compact"><div *ngIf="actionItem.isOpen" class="se-workflow-inbox"><div class="se-workflow-inbox"><div class="se-workflow-inbox-header"><div class="se-workflow-inbox-header__title" [translate]="\'se.cms.workflow.toolbar.inbox\'"></div></div><div class="se-workflow-inbox-tasks se-cms-dev-workflow-inbox-tasks fd-panel__body"><div *ngIf="!tasksNotReady && totalNumberOfTasks === 0" class="se-workflow-inbox-tasks__no-tasks"><img src="static-resources/images/Inbox.svg" alt="empty-inbox"/> <span class="se-workflow-inbox__empty-inbox-message" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message\'"></span> <span class="se-workflow-inbox__empty-inbox-message-alt" [translate]="\'se.cms.workflow.toolbar.inbox.emptyinbox.message.alt\'"></span></div><se-infinite-scrolling class="se-version-panel__infinite-scroll se-infinite-scrolling--narrowed" [pageSize]="pageSize" [fetchPage]="fetchPageOfInboxTasks" (itemsChange)="onInboxTasksLoaded($event)"><div *ngFor="let task of workflowTasks; let i = index; let last = last; trackBy: trackByIndex" class="se-workflow-inbox-task se-cms-dev-workflow-inbox-task"><se-workflow-inbox-task id="workflow-inbox-task-{{i}}" [class.se-workflow-inbox-task-last]="last" [task]="task"></se-workflow-inbox-task></div></se-infinite-scrolling></div></div></div></div></fd-popover-body></fd-popover>',styles:[".se-workflow-inbox-toggle{outline:0}.se-workflow-inbox-header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px;padding-top:15px;height:48px;font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a;border-bottom:1px solid #d9d9d9;padding:10px 0 15px 20px;height:46px}.se-workflow-inbox-header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-workflow-inbox-tasks{padding:16px 0 8px;width:280px}.se-workflow-inbox-tasks__no-tasks{display:flex;flex-direction:column;align-items:center}.se-workflow-inbox__empty-inbox-message{color:#51555a;padding:8px 0 4px}.se-workflow-inbox__empty-inbox-message-alt{font-size:13px;color:#6a6d70;padding-bottom:30px}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(3,a.Inject(r.TOOLBAR_ITEM)),__metadata("design:paramtypes",[De,r.SystemEventService,me,Object,a.ChangeDetectorRef])],WorkflowInboxComponent);return WorkflowInboxComponent}();deprecate();var Jn=function(){function CmssmarteditContainer(){}CmssmarteditContainer=__decorate([r.SeModule({imports:[z,F,o.CmsResourceLocationsModule,"legacyCatalogDetailsModule","resourceLocationsModule","cmssmarteditContainerTemplates","componentMenuModule","cmscommonsTemplates","genericEditorModule","smarteditServicesModule","cmsItemDropdownModule","catalogAwareRouteResolverModule","functionsModule",un],providers:__spreadArrays(r.moduleUtils.provideValues({PRODUCT_CATEGORY_RESOURCE_URI:E,PRODUCT_CATEGORY_RESOURCE_BASE_URI:w,PRODUCT_CATEGORY_SEARCH_RESOURCE_URI:P})),config:["PAGE_LIST_PATH","TRASHED_PAGE_LIST_PATH","NAVIGATION_MANAGEMENT_PAGE_PATH","$routeProvider","catalogAwareRouteResolverFunctions",function(e,t,n,i,o){"ngInject";r.SeRouteService.init(i);r.SeRouteService.provideLegacyRoute({path:e,route:{redirectTo:""+r.NG_ROUTE_PREFIX+e}});r.SeRouteService.provideLegacyRoute({path:t,route:{redirectTo:""+r.NG_ROUTE_PREFIX+t}});r.SeRouteService.provideLegacyRoute({path:n,route:{redirectTo:""+r.NG_ROUTE_PREFIX+n}})}],initialize:["$log","$rootScope","$routeParams","$route","NAVIGATION_MANAGEMENT_PAGE_PATH","toolbarServiceFactory","systemEventService","catalogDetailsService","featureService","perspectiveService","editorFieldMappingService","genericEditorTabService","cmsDragAndDropService","editorModalService","clonePageWizardService","componentVisibilityAlertService","cmsGenericEditorConfigurationService","managePageVersionService","rollbackPageVersionService","inViewElementObserver","COMPONENT_CLASS","smarteditRoutingService",function(e,t,n,i,a,s,c,l,d,p,u,m,g,h,v,f,_,y,C,S,b,I){"ngInject";I.init();_.setDefaultEditorFieldMappings();_.setDefaultTabFieldMappings();_.setDefaultTabsConfiguration();d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.componentMenuTemplate",type:"HYBRID_ACTION",nameI18nKey:"se.cms.componentmenu.btn.label.addcomponent",descriptionI18nKey:"cms.toolbaritem.componentmenutemplate.description",priority:100,section:"left",dropdownPosition:"left",iconClassName:"icon-add se-toolbar-menu-ddlb--button__icon",callback:function(){c.publish("ySEComponentMenuOpen",{})},include:"componentMenuWrapperTemplate.html",permissions:["se.add.component"],keepAliveOnClose:true});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageInfoMenu",type:"TEMPLATE",nameI18nKey:"se.cms.pageinfo.menu.btn.label",priority:140,section:"left",component:kn,permissions:["se.read.page"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.clonePageMenu",type:"ACTION",nameI18nKey:"se.cms.clonepage.menu.btn.label",iconClassName:"icon-duplicate se-toolbar-menu-ddlb--button__icon",callback:function(){v.openClonePageWizard()},priority:130,section:"left",permissions:["se.clone.page"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageSyncMenu",nameI18nKey:"se.cms.toolbaritem.pagesyncmenu.name",type:"TEMPLATE",component:Bn,priority:102,section:"left",permissions:["se.sync.page"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"deletePageMenu",nameI18nKey:"se.cms.actionitem.page.trash",type:"TEMPLATE",component:Cn,priority:150,section:"left",permissions:["se.delete.page.menu"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageVersionsMenu",type:"HYBRID_ACTION",nameI18nKey:"se.cms.actionitem.page.versions",priority:104,section:"left",iconClassName:"icon-timesheet se-toolbar-menu-ddlb--button__icon",component:Mn,contextComponent:Tn,permissions:["se.version.page"],keepAliveOnClose:true});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.createVersionMenu",type:"ACTION",nameI18nKey:"se.cms.actionitem.page.versions.create",iconClassName:"icon-add se-toolbar-menu-ddlb--button__icon",callback:function(){y.createPageVersion()},priority:120,section:"left",permissions:["se.version.page","se.create.version.page"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.rollbackVersionMenu",type:"ACTION",nameI18nKey:"se.cms.actionitem.page.versions.rollback",iconClassName:"hyicon hyicon-rollback se-toolbar-menu-ddlb--button__icon",callback:function(){C.rollbackPageVersion()},priority:120,section:"left",permissions:["se.version.page","se.rollback.version.page"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageWorkflowMenu",type:"TEMPLATE",nameI18nKey:"se.cms.workflow.toolbar.view.workflow.menu",component:Zn,priority:110,section:"right"});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageDisplayStatus",type:"TEMPLATE",nameI18nKey:"se.cms.page.display.status",component:Kn,priority:120,section:"right",permissions:["se.show.page.status"]});d.addToolbarItem({toolbarId:"smartEditPerspectiveToolbar",key:"se.cms.pageApprovalSelector",type:"TEMPLATE",nameI18nKey:"se.cms.page.approval.selector",component:qn,priority:165,section:"right",permissions:["se.force.page.approval"]});var w=s.getToolbarService("smartEditHeaderToolbar");w.addItems([{key:"se.cms.workflowInbox",type:r.ToolbarItemType.TEMPLATE,component:Qn,priority:4,section:r.ToolbarSection.right,dropdownPosition:r.ToolbarDropDownPosition.right}]);var E=s.getToolbarService("smartEditNavigationToolbar");E.addItems([{key:"se.cms.shortcut",type:r.ToolbarItemType.TEMPLATE,include:"ShortcutLinkWrapperTemplate.html",priority:1,section:r.ToolbarSection.left}]);var P=s.getToolbarService("smartEditPagesToolbar");P.addItems([{key:"se.cms.shortcut",type:r.ToolbarItemType.TEMPLATE,include:"ShortcutLinkWrapperTemplate.html",priority:1,section:r.ToolbarSection.left},{key:"se.cms.trash.page.link",type:r.ToolbarItemType.TEMPLATE,component:zn,priority:1,section:r.ToolbarSection.right}]);l.addItems([{component:Fn},{component:mn}]);l.addItems([{component:Hn}],r.CATALOG_DETAILS_COLUMNS.RIGHT);d.register({key:"se.cms.html5DragAndDrop.outer",nameI18nKey:"se.cms.dragAndDrop.name",descriptionI18nKey:"se.cms.dragAndDrop.description",enablingCallback:function(){g.register();g.apply()},disablingCallback:function(){g.unregister()}});p.register({key:o.CMSModesService.BASIC_PERSPECTIVE_KEY,nameI18nKey:"se.cms.perspective.basic.name",descriptionI18nKey:"se.hotkey.tooltip",features:["se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.emptySlotFix","se.cms.html5DragAndDrop","disableSharedSlotEditing","sharedSlotDisabledDecorator","se.cms.html5DragAndDrop.outer","externalComponentDecorator","externalcomponentbutton","externalSlotDisabledDecorator","clonecomponentbutton","deletePageMenu","se.cms.pageWorkflowMenu","se.cms.pageDisplayStatus","se.cms.pageApprovalSelector","se.cms.sharedcomponentbutton"],perspectives:[]});p.register({key:o.CMSModesService.ADVANCED_PERSPECTIVE_KEY,nameI18nKey:"se.cms.perspective.advanced.name",descriptionI18nKey:"se.hotkey.tooltip",features:["se.slotContextualMenu","se.slotSyncButton","se.slotSharedButton","se.slotContextualMenuVisibility","se.contextualMenu","se.cms.dragandropbutton","se.cms.remove","se.cms.edit","se.cms.componentMenuTemplate","se.cms.clonePageMenu","se.cms.pageInfoMenu","se.cms.pageSyncMenu","se.emptySlotFix","se.cms.html5DragAndDrop","se.cms.html5DragAndDrop.outer","syncIndicator","externalSlotDisabledDecorator","externalComponentDecorator","externalcomponentbutton","clonecomponentbutton","slotUnsharedButton","deletePageMenu","se.cms.pageVersionsMenu","se.cms.pageWorkflowMenu","se.cms.pageDisplayStatus","se.cms.pageApprovalSelector","se.cms.sharedcomponentbutton"],perspectives:[]});p.register({key:o.CMSModesService.VERSIONING_PERSPECTIVE_KEY,nameI18nKey:"se.cms.perspective.versioning.name",descriptionI18nKey:"se.cms.perspective.versioning.description",features:["se.cms.pageVersionsMenu","se.cms.createVersionMenu","se.cms.rollbackVersionMenu","se.cms.pageInfoMenu","disableSharedSlotEditing","sharedSlotDisabledDecorator","externalSlotDisabledDecorator","externalComponentDecorator"],perspectives:[],permissions:["se.version.page"],isHotkeyDisabled:true});S.addSelector("."+b,(function(){g.update()}))}]})],CmssmarteditContainer);return CmssmarteditContainer}();var ei=function(){SelectComponentTypeModalService.$inject=["logService","modalService"];function SelectComponentTypeModalService(e,t){this.logService=e;this.modalService=t}SelectComponentTypeModalService.prototype.open=function(e){return __awaiter(this,void 0,void 0,(function(){var t=this;return __generator(this,(function(n){return[2,this.modalService.open({component:Ne,data:{subTypes:e},config:{modalPanelClass:"modal-lg"},templateConfig:{title:"se.cms.nestedcomponenteditor.select.type"}}).afterClosed.toPromise().catch((function(e){t.logService.debug("Select Component Type Modal dismissed",e)}))]}))}))};SelectComponentTypeModalService.prototype.open.$inject=["subTypes"];SelectComponentTypeModalService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.LogService,r.ModalService])],SelectComponentTypeModalService);return SelectComponentTypeModalService}();var ti=function(){NestedComponentManagementService.$inject=["editorModalService"];function NestedComponentManagementService(e){this.editorModalService=e}NestedComponentManagementService.prototype.openNestedComponentEditor=function(e,t){var n=this.prepareComponentAttributes(e);return this.editorModalService.open(n,null,null,null,null,t)};NestedComponentManagementService.prototype.openNestedComponentEditor.$inject=["componentInfo","editorStackId"];NestedComponentManagementService.prototype.prepareComponentAttributes=function(e){var t=e.componentUuid,n=e.componentType,i=e.content;return{smarteditComponentUuid:t,smarteditComponentType:n,content:s.defaultsDeep({},i,{typeCode:n,itemtype:n,visible:true})}};NestedComponentManagementService.prototype.prepareComponentAttributes.$inject=["_a"];NestedComponentManagementService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.IEditorModalService])],NestedComponentManagementService);return NestedComponentManagementService}();var ni=function(e){__extends(CMSItemDropdownDropdownPopulator,e);CMSItemDropdownDropdownPopulator.$inject=["genericEditorStackService","languageService","translateService","uriDropdownPopulator"];function CMSItemDropdownDropdownPopulator(t,n,i,o){var r=e.call(this,s,n,i)||this;r.genericEditorStackService=t;r.uriDropdownPopulator=o;r.CMS_ITEMS_URI="/cmswebservices/v1/sites/CURRENT_CONTEXT_SITE_ID/cmsitems";return r}CMSItemDropdownDropdownPopulator.prototype.fetchAll=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:this.preparePayload(e);return[4,this.uriDropdownPopulator.fetchAll(e)];case 1:t=n.sent();return[2,this.getNonNestedComponents(e.field.editorStackId,t)]}}))}))};CMSItemDropdownDropdownPopulator.prototype.fetchAll.$inject=["payload"];CMSItemDropdownDropdownPopulator.prototype.fetchPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:this.preparePayload(e);return[4,this.uriDropdownPopulator.fetchPage(e)];case 1:t=n.sent();t.response=this.getNonNestedComponents(e.field.editorStackId,t.response);return[2,t]}}))}))};CMSItemDropdownDropdownPopulator.prototype.fetchPage.$inject=["payload"];CMSItemDropdownDropdownPopulator.prototype.getItem=function(e){this.preparePayload(e);return this.uriDropdownPopulator.getItem(e)};CMSItemDropdownDropdownPopulator.prototype.getItem.$inject=["payload"];CMSItemDropdownDropdownPopulator.prototype.preparePayload=function(e){e.field.uri=this.CMS_ITEMS_URI};CMSItemDropdownDropdownPopulator.prototype.preparePayload.$inject=["payload"];CMSItemDropdownDropdownPopulator.prototype.getNonNestedComponents=function(e,t){var n=this.genericEditorStackService.getEditorsStack(e).filter((function(e){return e.component.uuid})).map((function(e){return e.component.uuid}));t=t.filter((function(e){return!e.uuid||!n.includes(e.uuid)}));return t};CMSItemDropdownDropdownPopulator.prototype.getNonNestedComponents.$inject=["editorStackId","components"];CMSItemDropdownDropdownPopulator=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.GenericEditorStackService,r.LanguageService,d.TranslateService,r.UriDropdownPopulator])],CMSItemDropdownDropdownPopulator);return CMSItemDropdownDropdownPopulator}(r.DropdownPopulatorInterface);var ii=function(){function CmsComponentsModule(){}CmsComponentsModule=__decorate([a.NgModule({imports:[g.CommonModule,r.TranslationModule.forChild(),Le,lt],providers:[ei,ti,{provide:r.CustomDropdownPopulatorsToken,useClass:ni,multi:true}],declarations:[xe,Ne,We,Fe],entryComponents:[xe,Ne,We,Fe]})],CmsComponentsModule);return CmsComponentsModule}();window.__smartedit__.addDecoratorPayload("Component","NavigationManagementPageComponent",{selector:"se-navigation-management-page",template:'<div class="se-navigation-management-page-list-template"><div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditNavigationToolbar"></se-toolbar></div><div class="se-navigation-editor-wrapper" *ngIf="readOnly !== undefined"><div class="se-navigation-editor-header"><h1 class="se-navigation-editor-header__title" translate="se.cms.navigationmanagement.title"></h1><h4 class="se-navigation-editor-header__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</h4></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="readOnly"></se-navigation-editor-tree></div></div>',styles:['.se-navigation-editor-wrapper{min-height:100vh;padding:95px 30px 30px 30px;background-color:#edeff0}.se-navigation-editor-header{position:relative;min-height:100%;background-color:#fff;font-family:"72",web,"Open Sans",sans-serif;margin:0 -30px 20px -30px;padding:16px 30px}.se-navigation-editor-header__title{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;color:#32363a;margin:0;padding:0}.se-navigation-editor-header__sub-title{font-size:1rem;line-height:1.4285714286;font-weight:400;color:#6a6d70;margin:0;padding:5px 0 0 0}'],changeDetection:a.ChangeDetectionStrategy.OnPush});var oi=function(){NavigationManagementPageComponent.$inject=["activatedRoute","urlService","permissionService","catalogService","cdr"];function NavigationManagementPageComponent(e,t,n,i,o){this.activatedRoute=e;this.urlService=t;this.permissionService=n;this.catalogService=i;this.cdr=o}NavigationManagementPageComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:e=this.activatedRoute.snapshot.params,t=e.siteId,n=e.catalogId,i=e.catalogVersion;this.catalogVersion=i;this.uriContext=this.urlService.buildUriContext(t,n,i);return[4,Promise.all([this.setCatalogName(t,n),this.setReadOnly()])];case 1:o.sent();this.cdr.detectChanges();return[2]}}))}))};NavigationManagementPageComponent.prototype.setCatalogName=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.catalogService.getContentCatalogsForSite(e)];case 1:n=o.sent();i=n.find((function(e){return e.catalogId===t}));this.catalogName=(i===null||i===void 0?void 0:i.name)||{};return[2]}}))}))};NavigationManagementPageComponent.prototype.setCatalogName.$inject=["siteId","catalogId"];NavigationManagementPageComponent.prototype.setReadOnly=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.permissionService.isPermitted([{names:["se.edit.navigation"]}])];case 1:e=t.sent();this.readOnly=!e;return[2]}}))}))};NavigationManagementPageComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-management-page",template:'<div class="se-navigation-management-page-list-template"><div class="se-toolbar-group"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditNavigationToolbar"></se-toolbar></div><div class="se-navigation-editor-wrapper" *ngIf="readOnly !== undefined"><div class="se-navigation-editor-header"><h1 class="se-navigation-editor-header__title" translate="se.cms.navigationmanagement.title"></h1><h4 class="se-navigation-editor-header__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</h4></div><se-navigation-editor-tree [uriContext]="uriContext" [readOnly]="readOnly"></se-navigation-editor-tree></div></div>',styles:['.se-navigation-editor-wrapper{min-height:100vh;padding:95px 30px 30px 30px;background-color:#edeff0}.se-navigation-editor-header{position:relative;min-height:100%;background-color:#fff;font-family:"72",web,"Open Sans",sans-serif;margin:0 -30px 20px -30px;padding:16px 30px}.se-navigation-editor-header__title{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;color:#32363a;margin:0;padding:0}.se-navigation-editor-header__sub-title{font-size:1rem;line-height:1.4285714286;font-weight:400;color:#6a6d70;margin:0;padding:5px 0 0 0}'],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[l.ActivatedRoute,r.IUrlService,r.IPermissionService,r.ICatalogService,a.ChangeDetectorRef])],NavigationManagementPageComponent);return NavigationManagementPageComponent}();var ri=function(){function NodeAncestryService(){}NodeAncestryService.prototype.buildOrderedListOfAncestors=function(e,t){var n=s.reverse(this.fetchAncestors(e,t));var i=-1;return n.map((function(e){var t=++i;return __assign(__assign({},s.cloneDeep(e)),{level:t,formattedLevel:t===0?"se.cms.navigationcomponent.management.node.level.root":"se.cms.navigationcomponent.management.node.level.non.root"})}))};NodeAncestryService.prototype.buildOrderedListOfAncestors.$inject=["nodes","uid"];NodeAncestryService.prototype.fetchAncestors=function(e,t){var n=e.find((function(e){return e.uid===t}));if(!n){return[]}return[n].concat(this.fetchAncestors(e,n.parentUid))};NodeAncestryService.prototype.fetchAncestors.$inject=["nodes","uid"];NodeAncestryService=__decorate([r.SeDowngradeService()],NodeAncestryService);return NodeAncestryService}();var ai=function(){NavigationEditorNodeService.$inject=["cmsitemsRestService","nodeAncestryService","restServiceFactory"];function NavigationEditorNodeService(e,t,n){this.cmsitemsRestService=e;this.nodeAncestryService=t;this.navigationNodeRestService=n.get(o.NAVIGATION_MANAGEMENT_RESOURCE_URI)}NavigationEditorNodeService.prototype.getNavigationNode=function(e,t){var n=__assign({identifier:e},t);return this.navigationNodeRestService.get(n)};NavigationEditorNodeService.prototype.getNavigationNode.$inject=["nodeUid","uriParams"];NavigationEditorNodeService.prototype.updateNavigationNodePosition=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.cmsitemsRestService.getById(e.parent.uuid)];case 1:t=o.sent();t.children=t.children||[];n=t.children.findIndex((function(t){return t.uuid===e.uuid}));i=e.position;if(n<0||e.position===undefined){throw new Error("navigationEditorNodeService.updateNavigationNodePosition() - invalid index: move FROM ["+n+"] TO ["+i+"]")}t.children.splice(i,0,t.children.splice(n,1)[0]);t.identifier=t.uuid;return[2,this.cmsitemsRestService.update(t)]}}))}))};NavigationEditorNodeService.prototype.updateNavigationNodePosition.$inject=["node"];NavigationEditorNodeService.prototype.getNavigationNodeAncestry=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:n=__assign({ancestorTrailFrom:e},t);return[4,this.navigationNodeRestService.get(n)];case 1:i=o.sent();return[2,this.nodeAncestryService.buildOrderedListOfAncestors(r.apiUtils.getDataFromResponse(i),e)]}}))}))};NavigationEditorNodeService.prototype.getNavigationNodeAncestry.$inject=["nodeUid","uriParams"];NavigationEditorNodeService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[o.CmsitemsRestService,ri,r.IRestServiceFactory])],NavigationEditorNodeService);return NavigationEditorNodeService}();window.__smartedit__.addDecoratorPayload("Component","BreadcrumbComponent",{selector:"se-breadcrumb",template:'<div class="se-breadcrumb"><div *ngFor="let node of breadcrumb; index as idx; last as isLast" class="se-breadcrumb__node"><div class="se-breadcrumb__info" [ngClass]="{\'se-breadcrumb__info--last\': isLast}"><span class="se-breadcrumb__info--level">{{ node.formattedLevel | translate: node }}</span> <span class="se-breadcrumb__info--name">{{ node.name }}</span></div><div class="se-breadcrumb__divider" *ngIf="idx < breadcrumb.length - 1"><span class="sap-icon--navigation-right-arrow"></span></div></div></div>',styles:['.se-breadcrumb{border-bottom:1px solid #eeeeef;margin-bottom:35px}.se-breadcrumb__divider,.se-breadcrumb__info,.se-breadcrumb__node{display:inline-block}.se-breadcrumb__info--last{border-bottom:3px solid #0a6ed1;padding-top:10px;padding-bottom:10px}.se-breadcrumb__info--level{display:block;text-transform:uppercase;color:#51555a;font-family:"72",web,"Open Sans",sans-serif;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;font-weight:700}.se-breadcrumb__info--name{display:block;color:#51555a;font-family:"72",web,"Open Sans",sans-serif;font-size:1rem;line-height:1.4285714286;font-weight:400;font-weight:400}.se-breadcrumb__divider{margin-left:15px;margin-right:15px;margin-top:5px;vertical-align:top}.se-breadcrumb__node:last-child .se-breadcrumb__info--level,.se-breadcrumb__node:last-child .se-breadcrumb__info--name{color:#0a6ed1}'],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var si=function(){BreadcrumbComponent.$inject=["navigationEditorNodeService","cmsitemsRestService","cdr"];function BreadcrumbComponent(e,t,n){this.navigationEditorNodeService=e;this.cmsitemsRestService=t;this.cdr=n}BreadcrumbComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:if(!this.nodeUid&&!this.nodeUuid){throw new Error("BreadcrumbComponent requires either nodeUid or nodeUuid")}return[4,this.getUid()];case 1:e=n.sent();return[4,this.navigationEditorNodeService.getNavigationNodeAncestry(e,this.uriContext)];case 2:t=n.sent();this.breadcrumb=t;this.cdr.detectChanges();return[2]}}))}))};BreadcrumbComponent.prototype.getUid=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(!!this.nodeUid)return[3,2];return[4,this.cmsitemsRestService.getById(this.nodeUuid)];case 1:e=t.sent();return[2,e.uid];case 2:return[2,this.nodeUid]}}))}))};__decorate([a.Input(),__metadata("design:type",String)],BreadcrumbComponent.prototype,"nodeUid",void 0);__decorate([a.Input(),__metadata("design:type",String)],BreadcrumbComponent.prototype,"nodeUuid",void 0);__decorate([a.Input(),__metadata("design:type",Object)],BreadcrumbComponent.prototype,"uriContext",void 0);BreadcrumbComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-breadcrumb",template:'<div class="se-breadcrumb"><div *ngFor="let node of breadcrumb; index as idx; last as isLast" class="se-breadcrumb__node"><div class="se-breadcrumb__info" [ngClass]="{\'se-breadcrumb__info--last\': isLast}"><span class="se-breadcrumb__info--level">{{ node.formattedLevel | translate: node }}</span> <span class="se-breadcrumb__info--name">{{ node.name }}</span></div><div class="se-breadcrumb__divider" *ngIf="idx < breadcrumb.length - 1"><span class="sap-icon--navigation-right-arrow"></span></div></div></div>',styles:['.se-breadcrumb{border-bottom:1px solid #eeeeef;margin-bottom:35px}.se-breadcrumb__divider,.se-breadcrumb__info,.se-breadcrumb__node{display:inline-block}.se-breadcrumb__info--last{border-bottom:3px solid #0a6ed1;padding-top:10px;padding-bottom:10px}.se-breadcrumb__info--level{display:block;text-transform:uppercase;color:#51555a;font-family:"72",web,"Open Sans",sans-serif;font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;font-weight:700}.se-breadcrumb__info--name{display:block;color:#51555a;font-family:"72",web,"Open Sans",sans-serif;font-size:1rem;line-height:1.4285714286;font-weight:400;font-weight:400}.se-breadcrumb__divider{margin-left:15px;margin-right:15px;margin-top:5px;vertical-align:top}.se-breadcrumb__node:last-child .se-breadcrumb__info--level,.se-breadcrumb__node:last-child .se-breadcrumb__info--name{color:#0a6ed1}'],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[ai,o.CmsitemsRestService,a.ChangeDetectorRef])],BreadcrumbComponent);return BreadcrumbComponent}();window.__smartedit__.addDecoratorPayload("Component","NavigationNodePickerRenderComponent",{selector:"se-navigation-node-picker-render",template:'<div class="se-tree-node__name col-xs-6" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="col-sm-4 pull-right tree-node se-navigation-picker-renderer" (click)="pick(node)" *ngIf="isEditable()"><a translate="se.cms.navigationcomponent.management.node.selection.select.action" class="btn btn-link se-navigation-picker-renderer__btn"></a></div>'});var ci=function(){NavigationNodePickerRenderComponent.$inject=["parent","node"];function NavigationNodePickerRenderComponent(e,t){this.parent=e;this.node=t}NavigationNodePickerRenderComponent.prototype.ngOnInit=function(){var e;e=this.parent.nodeActions,this.pick=e.pick,this.isEditable=e.isEditable};NavigationNodePickerRenderComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-node-picker-render",template:'<div class="se-tree-node__name col-xs-6" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="col-sm-4 pull-right tree-node se-navigation-picker-renderer" (click)="pick(node)" *ngIf="isEditable()"><a translate="se.cms.navigationcomponent.management.node.selection.select.action" class="btn btn-link se-navigation-picker-renderer__btn"></a></div>'}),__param(0,a.Inject(a.forwardRef((function(){return r.TreeComponent})))),__param(1,a.Inject(r.TREE_NODE)),__metadata("design:paramtypes",[r.TreeComponent,Object])],NavigationNodePickerRenderComponent);return NavigationNodePickerRenderComponent}();window.__smartedit__.addDecoratorPayload("Component","NavigationNodePickerComponent",{selector:"se-navigation-node-picker",template:'<div class="categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div translate="se.ytree.template.header.name" class="se-navigation-editor-tree__name col-md-offset-1 col-sm-5"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodePickerRenderComponent" [removeDefaultTemplate]="removeDefaultTemplate" [nodeActions]="actions"></se-tree></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var li=function(){NavigationNodePickerComponent.$inject=["cmsitemsRestService","systemEventService"];function NavigationNodePickerComponent(e,t){this.cmsitemsRestService=e;this.systemEventService=t;this.nodePickerRenderComponent=ci;this.removeDefaultTemplate=true;this.rootNodeUid=o.NAVIGATION_NODE_ROOT_NODE_UID;this.editable=true}NavigationNodePickerComponent.prototype.ngOnInit=function(){var e=this;this.nodeURI=new r.URIBuilder(o.NAVIGATION_MANAGEMENT_RESOURCE_URI).replaceParams(this.uriContext).build();this.actions={pick:function(t,n){return __awaiter(e,void 0,void 0,(function(){var e,t,i,o;return __generator(this,(function(r){switch(r.label){case 0:e={pageSize:10,currentPage:0,mask:n.uid,typeCode:"CMSNavigationNode",itemSearchParams:""};return[4,this.cmsitemsRestService.get(e)];case 1:t=r.sent();i=t.response.find((function(e){return e.uid===n.uid}));o={nodeUuid:i===null||i===void 0?void 0:i.uuid,nodeUid:n.uid};this.systemEventService.publishAsync(rn,o);return[2]}}))}))},isEditable:function(){return e.editable}}};__decorate([a.Input(),__metadata("design:type",Object)],NavigationNodePickerComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],NavigationNodePickerComponent.prototype,"editable",void 0);NavigationNodePickerComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-node-picker",template:'<div class="categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div translate="se.ytree.template.header.name" class="se-navigation-editor-tree__name col-md-offset-1 col-sm-5"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodePickerRenderComponent" [removeDefaultTemplate]="removeDefaultTemplate" [nodeActions]="actions"></se-tree></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[o.CmsitemsRestService,r.SystemEventService])],NavigationNodePickerComponent);return NavigationNodePickerComponent}();var di=function(){NavigationNodeEditorModalService.$inject=["genericEditorModalService","catalogService"];function NavigationNodeEditorModalService(e,t){this.genericEditorModalService=e;this.catalogService=t}NavigationNodeEditorModalService.prototype.open=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,r;return __generator(this,(function(a){switch(a.label){case 0:i=null;if(!!n)return[3,2];return[4,this.catalogService.getCatalogVersionUUid(e)];case 1:r=a.sent();i={catalogVersion:r,parent:t.uuid,itemtype:o.NAVIGATION_NODE_TYPECODE,visible:true};a.label=2;case 2:return[2,this.genericEditorModalService.open({componentUuid:n?n.uuid:null,componentType:o.NAVIGATION_NODE_TYPECODE,content:i,title:"se.cms.navigationmanagement.node.edit.title"},(function(e){return e}),null,{modalPanelClass:"modal-stretched"})]}}))}))};NavigationNodeEditorModalService.prototype.open.$inject=["uriContext","parent","current"];NavigationNodeEditorModalService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[Z,r.ICatalogService])],NavigationNodeEditorModalService);return NavigationNodeEditorModalService}();var pi=function(){NavigationEditorTreeActions.$inject=["logService","cmsitemsRestService","confirmationModalService","navigationEditorNodeService","navigationNodeEditorModalService"];function NavigationEditorTreeActions(e,t,n,i,o){this.logService=e;this.cmsitemsRestService=t;this.confirmationModalService=n;this.navigationEditorNodeService=i;this.navigationNodeEditorModalService=o}e=NavigationEditorTreeActions;NavigationEditorTreeActions.prototype.setup=function(e,t,n){this.readOnly=e;this.rootNodeUid=t;this.uriContext=n};NavigationEditorTreeActions.prototype.setup.$inject=["readOnly","rootNodeUid","uriContext"];NavigationEditorTreeActions.prototype.getActions=function(){var e=this;return{isReadOnly:function(){return e.isReadOnly()},hasChildren:function(t,n){return e.hasChildren(t,n)},fetchData:function(t,n){return e.fetchData(t,n)},removeItem:function(t,n){return e.removeItem(t,n)},performMove:function(t,n,i){return e.performMove(t,n,i)},dragAndDrop:function(t,n){return e.dragAndDrop(t,n)},moveUp:function(t,n){return e.moveUp(t,n)},moveDown:function(t,n){return e.moveDown(t,n)},isMoveUpAllowed:function(t,n){return e.isMoveUpAllowed(t,n)},isMoveDownAllowed:function(t,n){return e.isMoveDownAllowed(t,n)},refreshNode:function(t,n){return e.refreshNode(t,n)},refreshParentNode:function(t,n){return e.refreshParentNode(t,n)},editNavigationNode:function(t,n){return e.editNavigationNode(t,n)},addTopLevelNode:function(t,n){return e.addTopLevelNode(t,n)},getEntryString:function(t,n){return e.getEntryString(t,n)},getEntryTooltipString:function(t,n){return e.getEntryTooltipString(t,n)},addNewChild:function(t,n){return e.addNewChild(t,n)},addNewSibling:function(t,n){return e.addNewSibling(t,n)},getDropdownItems:function(t){return e.getDropdownItems(t)},_findNodeById:function(t,n){return e._findNodeById(t,n)},_expandIfNeeded:function(t,n){return e._expandIfNeeded(t,n)}}};NavigationEditorTreeActions.prototype.getNavigationNodeCMSItemByUid=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.cmsitemsRestService.get({typeCode:o.NAVIGATION_NODE_TYPECODE,pageSize:1,currentPage:0,itemSearchParams:"uid:"+e})];case 1:t=n.sent();return[2,t.response[0]]}}))}))};NavigationEditorTreeActions.prototype.getNavigationNodeCMSItemByUid.$inject=["uid"];NavigationEditorTreeActions.prototype.hasNotMoved=function(e,t,n){return e.position===t&&e.parentUid===n.uid};NavigationEditorTreeActions.prototype.hasNotMoved.$inject=["source","destinationPosition","destinationParent"];NavigationEditorTreeActions.prototype.getEntriesCommaSeparated=function(e){return e.map((function(e){return e.name+" ("+e.itemType+")"})).join(", ")};NavigationEditorTreeActions.prototype.getEntriesCommaSeparated.$inject=["entries"];NavigationEditorTreeActions.prototype.isReadOnly=function(){return this.readOnly};NavigationEditorTreeActions.prototype.hasChildren=function(e,t){return t.hasChildren};NavigationEditorTreeActions.prototype.hasChildren.$inject=["_treeService","nodeData"];NavigationEditorTreeActions.prototype.fetchData=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:if(t.initiated){return[2,t.nodes]}if(!(t.uid===o.NAVIGATION_NODE_ROOT_NODE_UID))return[3,2];t.initiated=false;return[4,this.getNavigationNodeCMSItemByUid(this.rootNodeUid)];case 1:n=i.sent();s.assign(t,n);i.label=2;case 2:t.removeAllNodes();return[2,e.fetchChildren(t)]}}))}))};NavigationEditorTreeActions.prototype.fetchData.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.removeItem=function(t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:if(this.readOnly){throw e.READY_ONLY_ERROR_I18N}i=true;r.label=1;case 1:r.trys.push([1,3,,4]);return[4,this.confirmationModalService.confirm({description:"se.cms.navigationmanagement.navnode.removenode.confirmation.message",title:"se.cms.navigationmanagement.navnode.removenode.confirmation.title"})];case 2:r.sent();return[3,4];case 3:o=r.sent();i=false;return[3,4];case 4:if(!i)return[3,6];return[4,this.cmsitemsRestService.delete(n.uuid)];case 5:r.sent();this.refreshParentNode(t,n);r.label=6;case 6:return[2]}}))}))};NavigationEditorTreeActions.prototype.removeItem.$inject=["treeService","node"];NavigationEditorTreeActions.prototype.performMove=function(t,n,i){return __awaiter(this,void 0,void 0,(function(){var o;return __generator(this,(function(r){switch(r.label){case 0:if(this.readOnly){throw e.READY_ONLY_ERROR_I18N}r.label=1;case 1:r.trys.push([1,9,,10]);return[4,this.navigationEditorNodeService.updateNavigationNodePosition(n)];case 2:r.sent();if(!!n)return[3,4];return[4,this.fetchData(t,t.root)];case 3:r.sent();return[3,8];case 4:if(!i)return[3,6];return[4,this.refreshNode(t,n)];case 5:r.sent();return[3,8];case 6:return[4,this.refreshParentNode(t,n)];case 7:r.sent();r.label=8;case 8:return[3,10];case 9:o=r.sent();this.logService.error("Error updating node position:\n"+o);return[3,10];case 10:return[2]}}))}))};NavigationEditorTreeActions.prototype.performMove.$inject=["treeService","node","refreshNodeItself"];NavigationEditorTreeActions.prototype.dragAndDrop=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:n=t.sourceNode;i=t.destinationNodes;o=i.find((function(e){return e.uid!==n.uid}));if(!o){return[2]}r=o.parent;if(this.hasNotMoved(n,t.position,r)){return[2]}n.position=t.position;n.setParent(r);return[4,this.performMove(e,n,true)];case 1:a.sent();if(t.sourceParentNode.uid!==t.destinationParentNode.uid){this.refreshNode(e,t.sourceParentNode)}return[2]}}))}))};NavigationEditorTreeActions.prototype.dragAndDrop.$inject=["treeService","event"];NavigationEditorTreeActions.prototype.moveUp=function(t,n){if(this.readOnly){throw e.READY_ONLY_ERROR_I18N}n.position=n.position-1;return this.performMove(t,n)};NavigationEditorTreeActions.prototype.moveUp.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.moveDown=function(t,n){if(this.readOnly){throw e.READY_ONLY_ERROR_I18N}n.position=n.position+1;return this.performMove(t,n)};NavigationEditorTreeActions.prototype.moveDown.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.isMoveUpAllowed=function(e,t){return t.position!==0};NavigationEditorTreeActions.prototype.isMoveUpAllowed.$inject=["_treeService","nodeData"];NavigationEditorTreeActions.prototype.isMoveDownAllowed=function(e,t){t.parent.nodes=t.parent.nodes||[];return t.position<t.parent.nodes.length-1};NavigationEditorTreeActions.prototype.isMoveDownAllowed.$inject=["_treeService","nodeData"];NavigationEditorTreeActions.prototype.refreshNode=function(e,t){t.setInitiated(false);return e.fetchChildren(t)};NavigationEditorTreeActions.prototype.refreshNode.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.refreshParentNode=function(e,t){return this.refreshNode(e,t.parent)};NavigationEditorTreeActions.prototype.refreshParentNode.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.editNavigationNode=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,r;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,4,,5]);return[4,this.navigationNodeEditorModalService.open(this.uriContext,t.parent,t)];case 1:a.sent();return[4,this.refreshNode(e,t.parent)];case 2:a.sent();n=void 0;if(t.parent.uid===o.NAVIGATION_NODE_ROOT_NODE_UID){n=t}else{n=t.parent}return[4,this.navigationEditorNodeService.getNavigationNode(n.uid,this.uriContext)];case 3:i=a.sent();s.assign(n,i);if(t.parent.uid===o.NAVIGATION_NODE_ROOT_NODE_UID){return[2,this.refreshNode(e,t)]}return[2,this.refreshParentNode(e,t)];case 4:r=a.sent();this.logService.warn("navigationNodeEditorModalService closed when editing navigation node");return[3,5];case 5:return[2]}}))}))};NavigationEditorTreeActions.prototype.editNavigationNode.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.addTopLevelNode=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.addNewChild(e,t)];case 1:n=!!o.sent();if(!n)return[3,4];return[4,this.getNavigationNodeCMSItemByUid(this.rootNodeUid)];case 2:i=o.sent();return[4,this.fetchData(e,i)];case 3:o.sent();o.label=4;case 4:return[2]}}))}))};NavigationEditorTreeActions.prototype.addTopLevelNode.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.getEntryString=function(e,t){return this.getEntriesCommaSeparated(t.entries||[])};NavigationEditorTreeActions.prototype.getEntryString.$inject=["_treeService","node"];NavigationEditorTreeActions.prototype.getEntryTooltipString=function(e,t){return __spreadArrays(["<div>"],(t.entries||[]).map((function(e){return"<div>"+e.name+" ("+e.itemType+")</div>"})),["</div>"]).join("")};NavigationEditorTreeActions.prototype.getEntryTooltipString.$inject=["_treeService","node"];NavigationEditorTreeActions.prototype.addNewChild=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:n=t?t:this._findNodeById(e,this.rootNodeUid);return[4,this._expandIfNeeded(e,t)];case 1:o.sent();o.label=2;case 2:o.trys.push([2,4,,5]);return[4,this.navigationNodeEditorModalService.open(this.uriContext,n)];case 3:o.sent();return[2,this.refreshNode(e,n)];case 4:i=o.sent();this.logService.warn("navigationNodeEditorModalService closed when adding new child");return[3,5];case 5:return[2]}}))}))};NavigationEditorTreeActions.prototype.addNewChild.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.addNewSibling=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:n=t.parent;o.label=1;case 1:o.trys.push([1,3,,4]);return[4,this.navigationNodeEditorModalService.open(this.uriContext,n)];case 2:o.sent();return[2,this.refreshNode(e,n)];case 3:i=o.sent();this.logService.warn("navigationNodeEditorModalService closed when adding new sibling");return[3,4];case 4:return[2]}}))}))};NavigationEditorTreeActions.prototype.addNewSibling.$inject=["treeService","nodeData"];NavigationEditorTreeActions.prototype.getDropdownItems=function(e){var t=this;return[{key:"se.cms.navigationmanagement.navnode.edit",callback:function(n){t.editNavigationNode(e,n)}},{key:"se.cms.navigationmanagement.navnode.removenode",customCss:"se-dropdown-item__delete",callback:function(n){t.removeItem(e,n)}},{key:"se.cms.navigationmanagement.navnode.move.up",condition:function(n){return t.isMoveUpAllowed(e,n)},callback:function(n){t.moveUp(e,n)}},{key:"se.cms.navigationmanagement.navnode.move.down",condition:function(n){return t.isMoveDownAllowed(e,n)},callback:function(n){t.moveDown(e,n)}},{key:"se.cms.navigationmanagement.navnode.addchild",callback:function(n){t.addNewChild(e,n)}},{key:"se.cms.navigationmanagement.navnode.addsibling",callback:function(n){t.addNewSibling(e,n)}}]};NavigationEditorTreeActions.prototype.getDropdownItems.$inject=["treeService"];NavigationEditorTreeActions.prototype._findNodeById=function(e,t){return e.getNodeById(t)};NavigationEditorTreeActions.prototype._findNodeById.$inject=["treeService","nodeUid"];NavigationEditorTreeActions.prototype._expandIfNeeded=function(e,t){return t&&!t.isExpanded?e.toggle(t):Promise.resolve()};NavigationEditorTreeActions.prototype._expandIfNeeded.$inject=["treeService","nodeData"];var e;NavigationEditorTreeActions.READY_ONLY_ERROR_I18N="navigation.in.readonly.mode";__decorate([r.InvalidateCache(o.cmsitemsEvictionTag),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],NavigationEditorTreeActions.prototype,"getNavigationNodeCMSItemByUid",null);NavigationEditorTreeActions=e=__decorate([a.Injectable(),__metadata("design:paramtypes",[r.LogService,o.CmsitemsRestService,r.IConfirmationModalService,ai,di])],NavigationEditorTreeActions);return NavigationEditorTreeActions}();var ui=function(){function NavigationEditorTreeDragOptions(){}NavigationEditorTreeDragOptions.prototype.setup=function(e){this.dragAndDropHandler=e};NavigationEditorTreeDragOptions.prototype.setup.$inject=["dragAndDropFunc"];NavigationEditorTreeDragOptions.prototype.getDragOptions=function(){var e=this;return{onDropCallback:function(t){return e.onDropCallback(t)},allowDropCallback:this.allowDropCallback,beforeDropCallback:this.beforeDropCallback}};NavigationEditorTreeDragOptions.prototype.onDropCallback=function(e){this.dragAndDropHandler(e)};NavigationEditorTreeDragOptions.prototype.onDropCallback.$inject=["event"];NavigationEditorTreeDragOptions.prototype.allowDropCallback=function(e){return e.sourceNode.parent.uid===e.destinationNodes[0].parent.uid};NavigationEditorTreeDragOptions.prototype.allowDropCallback.$inject=["event"];NavigationEditorTreeDragOptions.prototype.beforeDropCallback=function(e){if(e.sourceNode.parent.uid!==e.destinationNodes[0].parent.uid){return Promise.resolve({confirmDropI18nKey:"se.cms.navigationmanagement.navnode.confirmation"})}return Promise.resolve(true)};NavigationEditorTreeDragOptions.prototype.beforeDropCallback.$inject=["event"];NavigationEditorTreeDragOptions=__decorate([a.Injectable()],NavigationEditorTreeDragOptions);return NavigationEditorTreeDragOptions}();window.__smartedit__.addDecoratorPayload("Component","NavigationNodeComponent",{selector:"se-navigation-node",template:'<div class="pull-right dropdown tree-node se-tree-node__actions col-sm-1" [hidden]="isReadOnly"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div><div class="se-tree-node__name col-xs-3" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="pull-right tree-node se-tree-node__entry col-xs-5"><se-tooltip class="se-dropdown-item__delete-page-popover" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="se-tree-node__popover"><span>{{ entryString }} </span></span><span se-tooltip-body>{{ entryString }}</span></se-tooltip></div><div class="se-tree-node__title col-xs-2"><span [hidden]="!node.title">{{ node.title | seL10n | async }}</span></div>',styles:["se-navigation-node .se-dropdown-item__delete-page-popover,se-navigation-node .se-dropdown-item__delete-page-popover .se-tooltip{max-width:100%}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var mi=function(){function NavigationNodeComponent(e,t){this.parent=e;this.node=t;this.dropdownItems=[]}NavigationNodeComponent.prototype.ngOnInit=function(){var e=this.parent.nodeActions,t=e.getDropdownItems,n=e.isReadOnly,i=e.getEntryString;this.dropdownItems=t();this.isReadOnly=n();this.entryString=i(this.node)};NavigationNodeComponent=__decorate([a.Component({selector:"se-navigation-node",template:'<div class="pull-right dropdown tree-node se-tree-node__actions col-sm-1" [hidden]="isReadOnly"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="node" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div><div class="se-tree-node__name col-xs-3" [title]="node.name | seL10n | async"><span>{{ node.name | seL10n | async }}</span></div><div class="pull-right tree-node se-tree-node__entry col-xs-5"><se-tooltip class="se-dropdown-item__delete-page-popover" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="se-tree-node__popover"><span>{{ entryString }} </span></span><span se-tooltip-body>{{ entryString }}</span></se-tooltip></div><div class="se-tree-node__title col-xs-2"><span [hidden]="!node.title">{{ node.title | seL10n | async }}</span></div>',styles:["se-navigation-node .se-dropdown-item__delete-page-popover,se-navigation-node .se-dropdown-item__delete-page-popover .se-tooltip{max-width:100%}"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(a.forwardRef((function(){return r.TreeComponent})))),__param(1,a.Inject(r.TREE_NODE)),__metadata("design:paramtypes",[r.TreeComponent,Object])],NavigationNodeComponent);return NavigationNodeComponent}();window.__smartedit__.addDecoratorPayload("Component","NavigationEditorTreeComponent",{selector:"se-navigation-editor-tree",template:'<div class="se-navigation-editor-tree__header" *ngIf="!readOnly"><button class="se-navigation-editor-tree__btn fd-button" (click)="actions.addTopLevelNode()"><span [translate]="\'se.cms.navigationmanagement.add.top.level.node\'" class="se-navigation-editor-tree__btn--text"></span></button></div><div class="se-navigation-editor-tree categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div [translate]="\'se.ytree.template.header.name\'" class="se-navigation-editor-tree__name col-xs-3"></div><div [translate]="\'se.ytree.template.header.title\'" class="se-navigation-editor-tree__title col-xs-3"></div><div class="col-xs-1 pull-right"></div><div [translate]="\'se.ytree.template.header.entry\'" class="se-navigation-editor-tree__entry col-xs-5 pull-right"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodeComponent" [removeDefaultTemplate]="true" [nodeActions]="actions" [dragOptions]="dragOptions"></se-tree></div>',styles:['.se-navigation-editor-tree__header{height:55px;width:100%;border-radius:4px 4px 0 0;background-color:#fff;display:flex;align-items:center;justify-content:flex-end;padding-right:1rem}.se-navigation-editor-tree__name{padding-left:45px}.se-navigation-editor-tree__name.col-md-offset-1{margin-left:0}.se-navigation-editor-tree__title{padding-left:60px}.tablehead.se-navigation-editor-tree__head{border-top:1px solid #eeeeef;background-color:#fafafa;font-size:1rem;line-height:1.4285714286;font-weight:400;font-family:"72",web,"Open Sans",sans-serif;color:#6a6d70;height:40px;padding:10px 0}.fd-modal__body .se-navigation-editor-tree__entry,.modal-dialog .se-navigation-editor-tree__entry{width:155px;padding-left:55px}.fd-modal__body .se-navigation-editor-tree__name,.modal-dialog .se-navigation-editor-tree__name{width:200px}.fd-modal__body .se-navigation-editor-tree__head,.modal-dialog .se-navigation-editor-tree__head{margin:0 -20px 0 -20px;padding-left:20px;padding-right:20px}.se-navigation-editor-tree__btn{margin-right:1rem}'],providers:[ui,pi],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var gi=function(){NavigationEditorTreeComponent.$inject=["dragOptionsService","actionsService"];function NavigationEditorTreeComponent(e,t){this.dragOptionsService=e;this.actionsService=t;this.nodeComponent=mi}NavigationEditorTreeComponent.prototype.ngOnInit=function(){var e=this;this.nodeURI=new r.URIBuilder(o.NAVIGATION_MANAGEMENT_RESOURCE_URI).replaceParams(this.uriContext).build();this.rootNodeUid=this.rootNodeUid||o.NAVIGATION_NODE_ROOT_NODE_UID;this.actionsService.setup(this.readOnly,this.rootNodeUid,this.uriContext);this.actions=this.actionsService.getActions();if(!this.readOnly){this.dragOptionsService.setup((function(t){e.actions.dragAndDrop(t)}));this.dragOptions=this.dragOptionsService.getDragOptions()}};__decorate([a.Input(),__metadata("design:type",Object)],NavigationEditorTreeComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],NavigationEditorTreeComponent.prototype,"readOnly",void 0);__decorate([a.Input(),__metadata("design:type",String)],NavigationEditorTreeComponent.prototype,"rootNodeUid",void 0);NavigationEditorTreeComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-navigation-editor-tree",template:'<div class="se-navigation-editor-tree__header" *ngIf="!readOnly"><button class="se-navigation-editor-tree__btn fd-button" (click)="actions.addTopLevelNode()"><span [translate]="\'se.cms.navigationmanagement.add.top.level.node\'" class="se-navigation-editor-tree__btn--text"></span></button></div><div class="se-navigation-editor-tree categoryTable"><div class="tablehead clearfix hidden-xs se-navigation-editor-tree__head"><div [translate]="\'se.ytree.template.header.name\'" class="se-navigation-editor-tree__name col-xs-3"></div><div [translate]="\'se.ytree.template.header.title\'" class="se-navigation-editor-tree__title col-xs-3"></div><div class="col-xs-1 pull-right"></div><div [translate]="\'se.ytree.template.header.entry\'" class="se-navigation-editor-tree__entry col-xs-5 pull-right"></div></div><se-tree [nodeUri]="nodeURI" [rootNodeUid]="rootNodeUid" [nodeComponent]="nodeComponent" [removeDefaultTemplate]="true" [nodeActions]="actions" [dragOptions]="dragOptions"></se-tree></div>',styles:['.se-navigation-editor-tree__header{height:55px;width:100%;border-radius:4px 4px 0 0;background-color:#fff;display:flex;align-items:center;justify-content:flex-end;padding-right:1rem}.se-navigation-editor-tree__name{padding-left:45px}.se-navigation-editor-tree__name.col-md-offset-1{margin-left:0}.se-navigation-editor-tree__title{padding-left:60px}.tablehead.se-navigation-editor-tree__head{border-top:1px solid #eeeeef;background-color:#fafafa;font-size:1rem;line-height:1.4285714286;font-weight:400;font-family:"72",web,"Open Sans",sans-serif;color:#6a6d70;height:40px;padding:10px 0}.fd-modal__body .se-navigation-editor-tree__entry,.modal-dialog .se-navigation-editor-tree__entry{width:155px;padding-left:55px}.fd-modal__body .se-navigation-editor-tree__name,.modal-dialog .se-navigation-editor-tree__name{width:200px}.fd-modal__body .se-navigation-editor-tree__head,.modal-dialog .se-navigation-editor-tree__head{margin:0 -20px 0 -20px;padding-left:20px;padding-right:20px}.se-navigation-editor-tree__btn{margin-right:1rem}'],providers:[ui,pi],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[ui,pi])],NavigationEditorTreeComponent);return NavigationEditorTreeComponent}();var hi=function(){function NavigationModule(){}NavigationModule=__decorate([a.NgModule({imports:[g.CommonModule,r.DropdownMenuModule,r.L10nPipeModule,r.TranslationModule.forChild(),r.NgTreeModule,r.TooltipModule,c.ToolbarModule],declarations:[gi,mi,mn,si,li,ci,an,oi],entryComponents:[gi,mi,mn,si,li,ci,an],exports:[gi],providers:[ri,ai,di]})],NavigationModule);return NavigationModule}();var vi=function(){function PageBuilder(e,t,n,i){var o=this;this.catalogService=e;this.contextAwarePageStructureService=t;this.restrictionsStepHandler=n;this.uriContext=i;this.model={};this.page={restrictions:[]};this.catalogService.getCatalogVersionUUid(this.uriContext).then((function(e){o.page.catalogVersion=e}))}PageBuilder.prototype.pageTypeSelected=function(e){this.model.pageType=e;this.model.pageTemplate=null;return this.updatePageInfoFields()};PageBuilder.prototype.pageTemplateSelected=function(e){this.model.pageTemplate=e};PageBuilder.prototype.getPageTypeCode=function(){var e;return((e=this.model.pageType)===null||e===void 0?void 0:e.code)||null};PageBuilder.prototype.getTemplateUuid=function(){var e;return((e=this.model.pageTemplate)===null||e===void 0?void 0:e.uuid)||""};PageBuilder.prototype.getPage=function(){var e,t;this.page.typeCode=this.getPageTypeCode();this.page.itemtype=this.page.typeCode;this.page.type=((e=this.model.pageType)===null||e===void 0?void 0:e.type)||null;this.page.masterTemplate=this.getTemplateUuid()||null;this.page.template=((t=this.model.pageTemplate)===null||t===void 0?void 0:t.uid)||null;return this.page};PageBuilder.prototype.getPageRestrictions=function(){return this.page.restrictions};PageBuilder.prototype.setPageUid=function(e){this.page.uid=e};PageBuilder.prototype.setRestrictions=function(e,t){this.page.onlyOneRestrictionMustApply=e;this.page.restrictions=t};PageBuilder.prototype.getPageInfoStructure=function(){return this.model.pageInfoFields};PageBuilder.prototype.displayConditionSelected=function(e){var t=e.isPrimary;this.page.defaultPage=t;this.page.homepage=e.homepage;if(t){this.page.label=null;this.restrictionsStepHandler.hideStep()}else{this.page.label=e.primaryPage?e.primaryPage.label:"";this.restrictionsStepHandler.showStep()}return this.updatePageInfoFields()};PageBuilder.prototype.updatePageInfoFields=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(!(this.page.defaultPage!==undefined))return[3,3];if(!this.model.pageType)return[3,2];return[4,this.contextAwarePageStructureService.getPageStructureForNewPage(this.model.pageType.code,this.page.defaultPage)];case 1:e=t.sent();this.model.pageInfoFields=e;return[3,3];case 2:this.model.pageInfoFields={};t.label=3;case 3:return[2]}}))}))};return PageBuilder}();var fi=function(){PageBuilderFactory.$inject=["catalogService","contextAwarePageStructureService"];function PageBuilderFactory(e,t){this.catalogService=e;this.contextAwarePageStructureService=t}PageBuilderFactory.prototype.createPageBuilder=function(e,t){return new vi(this.catalogService,this.contextAwarePageStructureService,e,t)};PageBuilderFactory.prototype.createPageBuilder.$inject=["restrictionsStepHandler","uriContext"];PageBuilderFactory=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ICatalogService,ne])],PageBuilderFactory);return PageBuilderFactory}();window.__smartedit__.addDecoratorPayload("Component","PageDisplayStatusComponent",{selector:"se-page-display-status",template:'<ng-container *ngIf="showLastSyncTime; else pageStatus"><se-tooltip [triggers]="[\'click\']" [placement]="\'left\'" [isChevronVisible]="true"><ng-container se-tooltip-trigger *ngTemplateOutlet="pageStatus"></ng-container><div se-tooltip-body class="popover-tooltip"><ng-container *ngIf="hasBeenSynchedBefore(); else notPublished"><span [translate]="\'se.cms.page.displaystatus.lastpublished.date\'"></span> <span>&ngsp;{{ lastSynchedDate | date: \'M/d/yy h:mm a\' }}</span></ng-container><ng-template #notPublished><span [translate]="\'se.cms.page.displaystatus.not.published\'"></span></ng-template></div></se-tooltip></ng-container><ng-template #pageStatus><se-page-status [uuid]="page?.uuid" [displayStatus]="page?.displayStatus"></se-page-status></ng-template>',changeDetection:a.ChangeDetectionStrategy.OnPush});var _i=function(){PageDisplayStatusComponent.$inject=["pageService","crossFrameEventService","systemEventService","cdr"];function PageDisplayStatusComponent(e,t,n,i){this.pageService=e;this.crossFrameEventService=t;this.systemEventService=n;this.cdr=i;this.showLastSyncTime=true}PageDisplayStatusComponent.prototype.ngOnInit=function(){var e;return __awaiter(this,void 0,void 0,(function(){var t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:this.unRegPageSyncEvent=this.crossFrameEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_POLLING.FAST_FETCH,(function(e,t){return n.updateLastSynchedDate(t)}));this.unRegPageUpdatedEvent=this.crossFrameEventService.subscribe(r.EVENTS.PAGE_UPDATED,(function(e,t){return n.updatePageInfo((t===null||t===void 0?void 0:t.uuid)||null)}));t=((e=this.cmsPage)===null||e===void 0?void 0:e.uuid)||null;return[4,this.initPageInfo(t)];case 1:i.sent();return[2]}}))}))};PageDisplayStatusComponent.prototype.ngOnDestroy=function(){this.unRegPageSyncEvent();this.unRegPageUpdatedEvent()};PageDisplayStatusComponent.prototype.hasBeenSynchedBefore=function(){return this.lastSynchedDate!==undefined};PageDisplayStatusComponent.prototype.initPageInfo=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=this;return[4,e?this.cmsPage:this.pageService.getCurrentPageInfo()];case 1:t.page=n.sent();this.cdr.detectChanges();return[2]}}))}))};PageDisplayStatusComponent.prototype.initPageInfo.$inject=["pageUuid"];PageDisplayStatusComponent.prototype.updateLastSynchedDate=function(e){if(this.canUpdateLastSynchedDate(e.itemId)){this.lastSynchedDate=e.lastSyncStatus;this.cdr.detectChanges()}};PageDisplayStatusComponent.prototype.updateLastSynchedDate.$inject=["syncStatus"];PageDisplayStatusComponent.prototype.updatePageInfo=function(e){var t;return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:if(!this.canUpdatePageInfo(e)){return[2]}n=(t=this.page)===null||t===void 0?void 0:t.displayStatus;i=this;return[4,this.pageService.getCurrentPageInfo()];case 1:i.page=o.sent();if(!!n&&this.page.displayStatus==="DRAFT"){this.systemEventService.publish(Ce)}this.cdr.detectChanges();return[2]}}))}))};PageDisplayStatusComponent.prototype.updatePageInfo.$inject=["updatedPageUuid"];PageDisplayStatusComponent.prototype.canUpdateLastSynchedDate=function(e){return this.page&&this.page.uuid===e};PageDisplayStatusComponent.prototype.canUpdateLastSynchedDate.$inject=["syncStatusItemId"];PageDisplayStatusComponent.prototype.canUpdatePageInfo=function(e){return!e||this.page&&this.page.uuid===e};PageDisplayStatusComponent.prototype.canUpdatePageInfo.$inject=["cmsPageUuidToUpdate"];__decorate([a.Input(),__metadata("design:type",Object)],PageDisplayStatusComponent.prototype,"cmsPage",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageDisplayStatusComponent.prototype,"showLastSyncTime",void 0);PageDisplayStatusComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-display-status",template:'<ng-container *ngIf="showLastSyncTime; else pageStatus"><se-tooltip [triggers]="[\'click\']" [placement]="\'left\'" [isChevronVisible]="true"><ng-container se-tooltip-trigger *ngTemplateOutlet="pageStatus"></ng-container><div se-tooltip-body class="popover-tooltip"><ng-container *ngIf="hasBeenSynchedBefore(); else notPublished"><span [translate]="\'se.cms.page.displaystatus.lastpublished.date\'"></span> <span>&ngsp;{{ lastSynchedDate | date: \'M/d/yy h:mm a\' }}</span></ng-container><ng-template #notPublished><span [translate]="\'se.cms.page.displaystatus.not.published\'"></span></ng-template></div></se-tooltip></ng-container><ng-template #pageStatus><se-page-status [uuid]="page?.uuid" [displayStatus]="page?.displayStatus"></se-page-status></ng-template>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[o.IPageService,r.CrossFrameEventService,r.SystemEventService,a.ChangeDetectorRef])],PageDisplayStatusComponent);return PageDisplayStatusComponent}();window.__smartedit__.addDecoratorPayload("Component","PageStatusComponent",{selector:"se-page-status",template:'<div class="se-page-status"><div class="se-page-status__icon" [ngClass]="statusIconCssClass"></div><div class="se-page-status__label">{{ statusLabel | translate }}</div></div>',styles:[".se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var yi=function(){function PageStatusComponent(e,t){this.workflowService=e;this.cdr=t;this.LOCALIZATION_PREFIX="se.cms.page.displaystatus."}PageStatusComponent.prototype.ngOnChanges=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:t=e.uuid;n=e.displayStatus;i=false;if(!(t&&t.currentValue))return[3,2];o=this;return[4,this.isPageLockedToCurrentUser(this.uuid)];case 1:o.isPageLocked=a.sent();i=true;a.label=2;case 2:if(n&&n.currentValue){r=this.displayStatus.toLowerCase();this.statusLabel=""+this.LOCALIZATION_PREFIX+r;this.statusIconCssClass=this.getStatusIconCssClass(this.isPageLocked,r)}if(i){this.cdr.detectChanges()}return[2]}}))}))};PageStatusComponent.prototype.isPageLockedToCurrentUser=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.workflowService.getActiveWorkflowForPageUuid(e)];case 1:t=n.sent();return[2,t&&!t.isAvailableForCurrentPrincipal]}}))}))};PageStatusComponent.prototype.getStatusIconCssClass=function(e,t){return e?"icon-locked se-page-status__icon--locked":"se-page-status__icon--"+t};__decorate([a.Input(),__metadata("design:type",Object)],PageStatusComponent.prototype,"uuid",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageStatusComponent.prototype,"displayStatus",void 0);PageStatusComponent=__decorate([a.Component({selector:"se-page-status",template:'<div class="se-page-status"><div class="se-page-status__icon" [ngClass]="statusIconCssClass"></div><div class="se-page-status__label">{{ statusLabel | translate }}</div></div>',styles:[".se-page-status{display:flex;flex-direction:row;align-items:center}.se-page-status__label{white-space:nowrap}.se-page-status__icon{float:left;margin-left:10px;margin-right:10px}.se-page-status__icon--draft{width:12px;height:12px;border-radius:50%;background-color:#74777a}.se-page-status__icon--in_progress{width:12px;height:12px;border-radius:50%;background-color:#e9730c}.se-page-status__icon--ready_to_sync{width:12px;height:12px;border-radius:50%;background-color:#0a6ed1}.se-page-status__icon--synced{width:12px;height:12px;border-radius:50%;background-color:#0a7e3e}.se-page-status__icon--locked{color:#32363a}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Pe,a.ChangeDetectorRef])],PageStatusComponent);return PageStatusComponent}();window.__smartedit__.addDecoratorPayload("Component","PageWorkflowMenuTasksTabComponent",{selector:"se-page-workflow-menu-tasks-tab",template:'\n        <div class="se-page-workflow-tasks-wrapper">\n            <div *ngFor="let action of actions">\n                <div class="se-page-workflow-task fd-panel">\n                    <div>\n                        <se-workflow-action-item\n                            [workflow]="workflow"\n                            [workflowAction]="action"\n                            [canMakeDecisions]="canMakeDecisions"\n                        ></se-workflow-action-item>\n                    </div>\n                </div>\n                <br />\n            </div>\n        </div>\n    ',styles:[".se-page-workflow-tasks-wrapper{max-height:400px;overflow-y:scroll;padding:15px 15px 0 15px;width:100%}.se-page-workflow-tasks-wrapper .fd-panel{box-shadow:0 0 4px 0 rgba(0,0,0,.15);max-width:320px}"]});var Ci=function(){function PageWorkflowMenuTasksTabComponent(){}__decorate([a.Input(),__metadata("design:type",Array)],PageWorkflowMenuTasksTabComponent.prototype,"actions",void 0);__decorate([a.Input(),__metadata("design:type",Object)],PageWorkflowMenuTasksTabComponent.prototype,"workflow",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],PageWorkflowMenuTasksTabComponent.prototype,"canMakeDecisions",void 0);PageWorkflowMenuTasksTabComponent=__decorate([a.Component({selector:"se-page-workflow-menu-tasks-tab",template:'\n        <div class="se-page-workflow-tasks-wrapper">\n            <div *ngFor="let action of actions">\n                <div class="se-page-workflow-task fd-panel">\n                    <div>\n                        <se-workflow-action-item\n                            [workflow]="workflow"\n                            [workflowAction]="action"\n                            [canMakeDecisions]="canMakeDecisions"\n                        ></se-workflow-action-item>\n                    </div>\n                </div>\n                <br />\n            </div>\n        </div>\n    ',styles:[".se-page-workflow-tasks-wrapper{max-height:400px;overflow-y:scroll;padding:15px 15px 0 15px;width:100%}.se-page-workflow-tasks-wrapper .fd-panel{box-shadow:0 0 4px 0 rgba(0,0,0,.15);max-width:320px}"]})],PageWorkflowMenuTasksTabComponent);return PageWorkflowMenuTasksTabComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowInboxBadgeComponent",{selector:"se-workflow-inbox-badge",template:'<ng-container *ngIf="inboxCount$ | async as count"><div *ngIf="count > 0" aria-label="Notifications"><div class="fd-counter fd-counter--notification se-inbox-badge" aria-label="Unread count">{{ stringifyCount(count) }}</div></div></ng-container>',styles:[".se-inbox-badge{transform:none;top:-2px;left:22px;font-size:10px;border-radius:8px;padding:2px 4px}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Si=function(){WorkflowInboxBadgeComponent.$inject=["workflowService"];function WorkflowInboxBadgeComponent(e){this.workflowService=e}WorkflowInboxBadgeComponent.prototype.ngOnInit=function(){this.inboxCount$=this.workflowService.getTotalNumberOfActiveWorkflowTasks()};WorkflowInboxBadgeComponent.prototype.stringifyCount=function(e){return e<=99?String(e):"99+"};WorkflowInboxBadgeComponent.prototype.stringifyCount.$inject=["count"];WorkflowInboxBadgeComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-inbox-badge",template:'<ng-container *ngIf="inboxCount$ | async as count"><div *ngIf="count > 0" aria-label="Notifications"><div class="fd-counter fd-counter--notification se-inbox-badge" aria-label="Unread count">{{ stringifyCount(count) }}</div></div></ng-container>',styles:[".se-inbox-badge{transform:none;top:-2px;left:22px;font-size:10px;border-radius:8px;padding:2px 4px}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Pe])],WorkflowInboxBadgeComponent);return WorkflowInboxBadgeComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowInboxTaskComponent",{selector:"se-workflow-inbox-task",template:'<div class="se-workflow-inbox-task-header"><a href="#" (click)="onClick($event)">{{ taskName | async }}</a></div><div class="se-workflow-inbox-task-desc">{{ taskDescription | async }}</div><div class="se-workflow-inbox-task-body">{{ getTaskCreatedAgo() }}</div>',styles:[":host{white-space:normal}:host(.se-workflow-inbox-task-last) .se-workflow-inbox-task-body{border-bottom:none;margin-bottom:0}.se-workflow-inbox-task-header a{font-size:1rem;line-height:1.4285714286;font-weight:400;font-weight:700;text-decoration:none;margin-bottom:4px}.se-workflow-inbox-task-desc{font-size:1rem;line-height:1.4285714286;font-weight:400;color:#32363a}.se-workflow-inbox-task-body{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#74777a;text-transform:lowercase;margin:8px 0 20px;padding-bottom:12px;border-bottom:1px solid #d9d9d9}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush});var bi=function(){WorkflowInboxTaskComponent.$inject=["cMSTimeService","workflowService","l10nPipe"];function WorkflowInboxTaskComponent(e,t,n){this.cMSTimeService=e;this.workflowService=t;this.l10nPipe=n}WorkflowInboxTaskComponent.prototype.ngOnInit=function(){this.taskName=this.getTaskName();this.taskDescription=this.getTaskDescription()};WorkflowInboxTaskComponent.prototype.getTaskName=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){return[2,this.l10nPipe.transform(this.task.action.name).pipe(p.take(1)).toPromise()]}))}))};WorkflowInboxTaskComponent.prototype.getTaskDescription=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.l10nPipe.transform(this.task.attachments[0].catalogName).pipe(p.take(1)).toPromise()];case 1:e=t.sent();return[2,e+" "+this.task.attachments[0].catalogVersion+" | "+this.task.attachments[0].pageName]}}))}))};WorkflowInboxTaskComponent.prototype.getTaskCreatedAgo=function(){return this.cMSTimeService.getTimeAgo(this.task.action.startedAgoInMillis)};WorkflowInboxTaskComponent.prototype.onClick=function(e){e.preventDefault();this.workflowService.loadExperienceAndOpenPageWorkflowMenu(this.task)};WorkflowInboxTaskComponent.prototype.onClick.$inject=["$event"];__decorate([a.Input(),__metadata("design:type",Object)],WorkflowInboxTaskComponent.prototype,"task",void 0);WorkflowInboxTaskComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-inbox-task",template:'<div class="se-workflow-inbox-task-header"><a href="#" (click)="onClick($event)">{{ taskName | async }}</a></div><div class="se-workflow-inbox-task-desc">{{ taskDescription | async }}</div><div class="se-workflow-inbox-task-body">{{ getTaskCreatedAgo() }}</div>',styles:[":host{white-space:normal}:host(.se-workflow-inbox-task-last) .se-workflow-inbox-task-body{border-bottom:none;margin-bottom:0}.se-workflow-inbox-task-header a{font-size:1rem;line-height:1.4285714286;font-weight:400;font-weight:700;text-decoration:none;margin-bottom:4px}.se-workflow-inbox-task-desc{font-size:1rem;line-height:1.4285714286;font-weight:400;color:#32363a}.se-workflow-inbox-task-body{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#74777a;text-transform:lowercase;margin:8px 0 20px;padding-bottom:12px;border-bottom:1px solid #d9d9d9}"],providers:[r.L10nPipe],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[o.CMSTimeService,Pe,r.L10nPipe])],WorkflowInboxTaskComponent);return WorkflowInboxTaskComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowItemMenuComponent",{selector:"se-workflow-item-menu",template:'<se-popup-overlay class="popup-anchor" [ngClass]="{ \'popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><span *ngIf="menuItems.length > 0" (click)="toggleMenu()" class="workflow-item-menu__toggle-btn sap-icon--overflow"></span><div se-popup-overlay-body><div class="workflow-item-menu"><div class="workflow-item-menu__item" *ngFor="let dropdownItem of menuItems"><ng-container class="container" [ngSwitch]="dropdownItem.i18nKey"><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.description\'" class="workflow-description"><div class="se-dropdown-item--label"><div class="workflow-description__label fd-has-type-1 fd-has-margin-bottom-tiny"><div [translate]="dropdownItem.i18nKey"></div><div *seHasOperationPermission="\'se.edit.workflow.workflowMenu\'"><a title="Edit" class="workflow-description__edit-btn sap-icon--edit fd-has-float-right" (click)="editDescription()"></a></div></div><div *ngIf="workflowInfo.description; else noDescription" class="workflow-description__text">{{ workflowInfo.description }}</div><ng-template #noDescription><div translate="se.cms.actionitem.page.workflow.no.description"></div></ng-template></div></div><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.cancel\'" class="workflow-cancel-btn fd-has-color-status-3" [translate]="dropdownItem.i18nKey" (click)="cancelWorkflow()"></div></ng-container></div></div></div></se-popup-overlay>',styles:['.popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding-top:5px;width:32px;height:32px;border-radius:4px}.popup-anchor--open{background-color:#eeeeef}.workflow-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.workflow-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.workflow-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.workflow-item-menu::after,.workflow-item-menu::before{right:10px}.workflow-item-menu::after,.workflow-item-menu::before{display:none}.workflow-description{min-width:225px;padding:20px}.workflow-description__label{color:#32363a;display:flex;justify-content:space-between}.workflow-description__label .sap-icon--edit{cursor:pointer}.workflow-description__label .sap-icon--edit:hover{text-decoration:none}.workflow-description__description{color:#51555a}.workflow-cancel-btn{cursor:pointer;padding:12px 20px;border-top:1px solid #fafafa}'],changeDetection:a.ChangeDetectionStrategy.OnPush});var Ii=function(){WorkflowItemMenuComponent.$inject=["systemEventService","workflowFacade","routingService","permissionService","cdr"];function WorkflowItemMenuComponent(e,t,n,i,o){this.systemEventService=e;this.workflowFacade=t;this.routingService=n;this.permissionService=i;this.cdr=o;this.isMenuOpen=false;this.popupConfig={halign:"left",valign:"bottom"};this.menuItems=[]}WorkflowItemMenuComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:this.unRegWorkflowMenuOpenedEvent=this.systemEventService.subscribe(ye,(function(e,n){return t.onWorkflowItemMenuOpen(n)}));e=this;return[4,this.getPermittedButtons([{i18nKey:"se.cms.actionitem.page.workflow.description",permissions:["se.view.page.workflowMenu"]},{i18nKey:"se.cms.actionitem.page.workflow.cancel",permissions:["se.cancel.page.workflowMenu"]}])];case 1:e.menuItems=n.sent();this.cdr.detectChanges();return[2]}}))}))};WorkflowItemMenuComponent.prototype.ngOnDestroy=function(){this.unRegWorkflowMenuOpenedEvent()};WorkflowItemMenuComponent.prototype.toggleMenu=function(){this.isMenuOpen=!this.isMenuOpen;if(this.isMenuOpen&&this.workflowInfo){this.systemEventService.publishAsync(ye,{uid:this.workflowInfo.workflowCode})}};WorkflowItemMenuComponent.prototype.hideMenu=function(){this.isMenuOpen=false};WorkflowItemMenuComponent.prototype.editDescription=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.hideMenu();return[4,this.workflowFacade.editWorkflow(this.workflowInfo)];case 1:e=t.sent();this.workflowInfo.description=e.description;return[2]}}))}))};WorkflowItemMenuComponent.prototype.cancelWorkflow=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.hideMenu();return[4,this.workflowFacade.cancelWorflow(this.workflowInfo)];case 1:e.sent();this.routingService.reload();return[2]}}))}))};WorkflowItemMenuComponent.prototype.onWorkflowItemMenuOpen=function(e){if(this.workflowInfo.workflowCode!==e.uid){this.hideMenu();this.cdr.detectChanges()}};WorkflowItemMenuComponent.prototype.onWorkflowItemMenuOpen.$inject=["eventData"];WorkflowItemMenuComponent.prototype.getPermittedButtons=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;var i=this;return __generator(this,(function(o){switch(o.label){case 0:t=e.map((function(e){return Promise.resolve(i.permissionService.isPermitted([{names:e.permissions}]))}));return[4,Promise.all(t)];case 1:n=o.sent();return[2,e.filter((function(e,t){return n[t]}))]}}))}))};WorkflowItemMenuComponent.prototype.getPermittedButtons.$inject=["menuItemsConfig"];__decorate([a.Input(),__metadata("design:type",Object)],WorkflowItemMenuComponent.prototype,"workflowInfo",void 0);WorkflowItemMenuComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-item-menu",template:'<se-popup-overlay class="popup-anchor" [ngClass]="{ \'popup-anchor--open\': isMenuOpen }" [popupOverlay]="popupConfig" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="hideMenu()"><span *ngIf="menuItems.length > 0" (click)="toggleMenu()" class="workflow-item-menu__toggle-btn sap-icon--overflow"></span><div se-popup-overlay-body><div class="workflow-item-menu"><div class="workflow-item-menu__item" *ngFor="let dropdownItem of menuItems"><ng-container class="container" [ngSwitch]="dropdownItem.i18nKey"><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.description\'" class="workflow-description"><div class="se-dropdown-item--label"><div class="workflow-description__label fd-has-type-1 fd-has-margin-bottom-tiny"><div [translate]="dropdownItem.i18nKey"></div><div *seHasOperationPermission="\'se.edit.workflow.workflowMenu\'"><a title="Edit" class="workflow-description__edit-btn sap-icon--edit fd-has-float-right" (click)="editDescription()"></a></div></div><div *ngIf="workflowInfo.description; else noDescription" class="workflow-description__text">{{ workflowInfo.description }}</div><ng-template #noDescription><div translate="se.cms.actionitem.page.workflow.no.description"></div></ng-template></div></div><div *ngSwitchCase="\'se.cms.actionitem.page.workflow.cancel\'" class="workflow-cancel-btn fd-has-color-status-3" [translate]="dropdownItem.i18nKey" (click)="cancelWorkflow()"></div></ng-container></div></div></div></se-popup-overlay>',styles:['.popup-anchor{display:flex;flex-direction:row;align-items:center;justify-content:center;font-size:1.1428571429rem;line-height:1.25;font-weight:400;padding-top:5px;width:32px;height:32px;border-radius:4px}.popup-anchor--open{background-color:#eeeeef}.workflow-item-menu{box-shadow:0 6px 12px rgba(0,0,0,.175);background-color:#fff;border-radius:4px!important;min-width:100px;width:fit-content;position:absolute;border:1px solid #d9d9d9;z-index:2000;top:96%;left:initial!important;right:0;transform:translate(5px,8px);right:-11px;top:-8px}.workflow-item-menu::before{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#d9d9d9;border-bottom-color:var(var(--fd-color-neutral-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-8px}.workflow-item-menu::after{height:0;width:0;border-style:solid;border-width:0 8px 8px 8px;border-bottom-color:#fff;border-bottom-color:var(var(--fd-color-background-4));border-left-color:transparent;border-right-color:transparent;content:"";position:absolute;top:-7px}.workflow-item-menu::after,.workflow-item-menu::before{right:10px}.workflow-item-menu::after,.workflow-item-menu::before{display:none}.workflow-description{min-width:225px;padding:20px}.workflow-description__label{color:#32363a;display:flex;justify-content:space-between}.workflow-description__label .sap-icon--edit{cursor:pointer}.workflow-description__label .sap-icon--edit:hover{text-decoration:none}.workflow-description__description{color:#51555a}.workflow-cancel-btn{cursor:pointer;padding:12px 20px;border-top:1px solid #fafafa}'],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.SystemEventService,De,r.SmarteditRoutingService,r.IPermissionService,a.ChangeDetectorRef])],WorkflowItemMenuComponent);return WorkflowItemMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowActionCommentComponent",{selector:"se-workflow-action-comment",template:'<ng-container *ngIf="isDecisionComment; then decisionComment; else generalComment"></ng-container><ng-template #decisionComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-tile__title se-workflow-action-comment__header sap-icon--workflow-tasks sap-icon--m" [class.sap-icon--flip-h]="!isIncomingDecision()">{{ actionComment.decisionName }}</h2><p class="fd-has-type-minus-1">{{ actionComment.authorName }} | {{ createdAgo }}</p><p *ngIf="!!actionComment.text"><strong>{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}:</strong><ng-container *ngTemplateOutlet="comment"></ng-container></p></div></div></div></ng-template><ng-template #generalComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-panel__title">{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}</h2><p>{{ createdAgo }}</p><p class="se-workflow-action-comment__author">{{ actionComment.authorName }}</p><ng-container *ngTemplateOutlet="comment"></ng-container></div></div></div></ng-template><ng-template #comment><se-more-text class="se-workflow-action-comment__body" [ellipsis]="\'...\'" [text]="actionComment.text"></se-more-text></ng-template>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}.se-workflow-action-comment{margin:20px 15px 10px 45px;border-style:solid;border-width:1px;border-color:#eeeeef;border-radius:3px;position:relative}.se-workflow-action-comment::before{height:0;width:0;border-style:solid;border-width:6.5px 8px 6.5px 0;border-bottom-color:transparent;border-right-color:#eeeeef;border-top-color:transparent;content:"";position:absolute;top:14px;left:-9px}.se-workflow-action-comment::after{height:0;width:0;border-style:solid;border-width:6.5px 8px 6.5px 0;border-bottom-color:transparent;border-right-color:#fff;border-top-color:transparent;content:"";position:absolute;top:14px;left:-7px}.se-workflow-action-comment__header{position:relative;font-weight:700;font-size:13px;margin-bottom:3px!important}.se-workflow-action-comment__header:before{position:absolute;top:-8px;left:-56px;font-size:18px;background:#fff;padding:8px}.se-workflow-action-comment__header.sap-icon--flip-h::before{transform:scaleX(-1)}.se-workflow-action-comment__author{margin-bottom:25px}.se-workflow-action-comment__body{overflow-wrap:anywhere}'],changeDetection:a.ChangeDetectionStrategy.OnPush});var wi=function(){WorkflowActionCommentComponent.$inject=["cMSTimeService"];function WorkflowActionCommentComponent(e){this.cMSTimeService=e}WorkflowActionCommentComponent.prototype.ngOnInit=function(){this.isDecisionComment=!!this.actionComment.decisionName};Object.defineProperty(WorkflowActionCommentComponent.prototype,"createdAgo",{get:function(){if(!!this.actionComment.createdAgoInMillis){return this.cMSTimeService.getTimeAgo(this.actionComment.createdAgoInMillis)}return null},enumerable:false,configurable:true});WorkflowActionCommentComponent.prototype.isIncomingDecision=function(){return!(this.actionComment.originalActionCode===this.workflowAction.code)};__decorate([a.Input(),__metadata("design:type",Object)],WorkflowActionCommentComponent.prototype,"actionComment",void 0);__decorate([a.Input(),__metadata("design:type",Object)],WorkflowActionCommentComponent.prototype,"workflowAction",void 0);WorkflowActionCommentComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-action-comment",template:'<ng-container *ngIf="isDecisionComment; then decisionComment; else generalComment"></ng-container><ng-template #decisionComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-tile__title se-workflow-action-comment__header sap-icon--workflow-tasks sap-icon--m" [class.sap-icon--flip-h]="!isIncomingDecision()">{{ actionComment.decisionName }}</h2><p class="fd-has-type-minus-1">{{ actionComment.authorName }} | {{ createdAgo }}</p><p *ngIf="!!actionComment.text"><strong>{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}:</strong><ng-container *ngTemplateOutlet="comment"></ng-container></p></div></div></div></ng-template><ng-template #generalComment><div class="se-workflow-action-comment"><div class="fd-tile"><div class="fd-tile__content"><h2 class="fd-panel__title">{{\'se.cms.page.workflow.action.item.comment.header\' | translate}}</h2><p>{{ createdAgo }}</p><p class="se-workflow-action-comment__author">{{ actionComment.authorName }}</p><ng-container *ngTemplateOutlet="comment"></ng-container></div></div></div></ng-template><ng-template #comment><se-more-text class="se-workflow-action-comment__body" [ellipsis]="\'...\'" [text]="actionComment.text"></se-more-text></ng-template>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}.se-workflow-action-comment{margin:20px 15px 10px 45px;border-style:solid;border-width:1px;border-color:#eeeeef;border-radius:3px;position:relative}.se-workflow-action-comment::before{height:0;width:0;border-style:solid;border-width:6.5px 8px 6.5px 0;border-bottom-color:transparent;border-right-color:#eeeeef;border-top-color:transparent;content:"";position:absolute;top:14px;left:-9px}.se-workflow-action-comment::after{height:0;width:0;border-style:solid;border-width:6.5px 8px 6.5px 0;border-bottom-color:transparent;border-right-color:#fff;border-top-color:transparent;content:"";position:absolute;top:14px;left:-7px}.se-workflow-action-comment__header{position:relative;font-weight:700;font-size:13px;margin-bottom:3px!important}.se-workflow-action-comment__header:before{position:absolute;top:-8px;left:-56px;font-size:18px;background:#fff;padding:8px}.se-workflow-action-comment__header.sap-icon--flip-h::before{transform:scaleX(-1)}.se-workflow-action-comment__author{margin-bottom:25px}.se-workflow-action-comment__body{overflow-wrap:anywhere}'],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[o.CMSTimeService])],WorkflowActionCommentComponent);return WorkflowActionCommentComponent}();window.__smartedit__.addDecoratorPayload("Component","WorkflowActionItemComponent",{selector:"se-workflow-action-item",template:'<div class="se-workflow-action-item" [ngClass]="getWorkflowActionStatusClass()"><se-collapsible-container class="se-catalog-details__collapse se-collapsible-container--noshadow fd-panel" [id]="workflowAction.code" (getApi)="setCollapsibleContainerApi($event)"><se-collapsible-container-header><div class="fd-panel__header"><div class="fd-panel__head"><h1 class="fd-panel__title">{{ workflowAction.name | seL10n | async }}</h1><p class="fd-panel__description">{{ getReadableStatus() | translate }} {{ getActiveSince() }}</p></div></div><div class="fd-panel__body">{{ workflowAction.description | seL10n | async }}<div *ngIf="canShowDecisionButtons()" class="se-workflow-action-item__decision-buttons fd-dropdown"><div class="fd-popover"><div class="fd-popover__control"><div [ngClass]="{ \'fd-button-split\': workflowAction.decisions.length > 1 }"><button class="se-workflow-action-item__decision-button fd-button--compact" [id]="workflowAction.code + \'-decision-button\'" (click)="onMainButtonClick($event, workflowAction.decisions[0])" type="button">{{ workflowAction.decisions[0].name | seL10n | async }}</button><se-popup-overlay [popupOverlay]="{\n                                        halign: \'right\',\n                                        valign: \'bottom\'\n                                    }" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="onMenuHide()"><button *ngIf="workflowAction.decisions.length > 1" [id]="workflowAction.code + \'-decision-split-button\'" class="fd-button--compact menu-button sap-icon--slim-arrow-down" (click)="onSplitButtonClick($event)"></button><div se-popup-overlay-body class="fd-popover__body fd-popover__body--right fd-popover__body--no-arrow se-workflow-action-item__decision-list"><nav class="fd-menu"><ul class="fd-menu__list"><li *ngFor="let decision of workflowAction.decisions"><a class="fd-menu__item se-workflow-action-item__decision" (click)="onMainButtonClick($event, decision)">{{ decision.name | seL10n | async }}</a></li></ul></nav></div></se-popup-overlay></div></div></div></div></div></se-collapsible-container-header><se-collapsible-container-content><div class="se-workflow-action-item__content" *ngIf="canShowComments()"><span *ngIf="!hasComments" class="se-workflow-action-item__comment-list fd-has-font-style-italic fd-has-color-text-4" [translate]="\'se.cms.actionitem.page.workflow.action.no.comments.available\'"></span><se-infinite-scrolling [pageSize]="pageSize" [fetchPage]="fetchPageOfComments" (itemsChange)="onCommentsLoaded($event)"><div *ngFor="let actionComment of workflowActionComments; trackBy: trackByIndex"><se-workflow-action-comment [workflowAction]="workflowAction" [actionComment]="actionComment"></se-workflow-action-comment></div></se-infinite-scrolling></div></se-collapsible-container-content></se-collapsible-container></div>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}se-workflow-action-item .se-workflow-action-item{border-left:6px solid #fff;border-radius:4px 0 0 4px}se-workflow-action-item .se-workflow-action-item--started{border-left:6px solid #e9730c}se-workflow-action-item .se-workflow-action-item--completed{border-left:6px solid #0a7e3e}se-workflow-action-item .se-workflow-action-item__decision-buttons{margin:10px -30px 10px 0;text-align:right}se-workflow-action-item .se-workflow-action-item__decision-buttons .fd-button-split .menu-button{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:4px;border-bottom-right-radius:4px}se-workflow-action-item .se-workflow-action-item__decision-buttons .fd-button-split .menu-button:focus{box-shadow:none}se-workflow-action-item .se-workflow-action-item__content{min-height:30px}se-workflow-action-item .se-workflow-action-item__content-status{float:left;overflow:hidden}se-workflow-action-item .se-workflow-action-item__content se-infinite-scrolling .se-infinite-scrolling__container{max-height:none;overflow-y:auto;position:relative;margin-top:-20px;width:100%}se-workflow-action-item .se-workflow-action-item__content se-infinite-scrolling .se-infinite-scrolling__container::before{content:"";height:100%;border-left:1px solid #eeeeef;position:absolute;left:20px;top:40px;height:calc(100% - 120px)}se-workflow-action-item .se-workflow-action-item__comment-list{margin-left:5%;margin-top:5%;margin-bottom:5%}se-workflow-action-item .se-workflow-action-item__decision-list{min-width:160px;right:-38px;background:#fff}se-workflow-action-item .se-workflow-action-item__decision-list .fd-menu__list{text-align:left}se-workflow-action-item .se-workflow-action-item__decision:hover{text-decoration:none}se-workflow-action-item se-collapsible-container-header .fd-panel__body,se-workflow-action-item se-collapsible-container-header .fd-panel__header{border-bottom:none;padding:10px 16px;display:flex;flex-direction:column;align-items:flex-start;white-space:pre-wrap}se-workflow-action-item se-collapsible-container-header .fd-panel_body{color:#32363a;padding-top:0}se-workflow-action-item se-collapsible-container-header .fd-panel__title{margin-top:0;font-size:13px;font-weight:700}'],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush});var Ei=function(){WorkflowActionItemComponent.$inject=["workflowFacade","cMSTimeService","systemEventService","routingService","cdr"];function WorkflowActionItemComponent(e,t,n,i,o){var r=this;this.workflowFacade=e;this.cMSTimeService=t;this.systemEventService=n;this.routingService=i;this.cdr=o;this.isMenuOpen=false;this.hasComments=true;this.pageSize=10;this.fetchPageOfComments=function(e,t,n){return r.loadCommentsAndSetHasCommentsFlag(e,t,n)}}WorkflowActionItemComponent.prototype.ngOnInit=function(){var e=this;this.unRegWorkflowMenuOpenedEvent=this.systemEventService.subscribe(ye,(function(t,n){return e.onOtherMenuOpening(t,n)}))};WorkflowActionItemComponent.prototype.ngOnDestroy=function(){this.unRegWorkflowMenuOpenedEvent()};WorkflowActionItemComponent.prototype.onCommentsLoaded=function(e){this.workflowActionComments=e};WorkflowActionItemComponent.prototype.onCommentsLoaded.$inject=["comments"];WorkflowActionItemComponent.prototype.setCollapsibleContainerApi=function(e){this.collapsibleContainerApi=e};WorkflowActionItemComponent.prototype.setCollapsibleContainerApi.$inject=["$api"];WorkflowActionItemComponent.prototype.getWorkflowActionStatusClass=function(){switch(this.workflowAction.status.toLowerCase()){case be.IN_PROGRESS:return"se-workflow-action-item--started";case be.COMPLETED:return"se-workflow-action-item--completed";default:return null}};WorkflowActionItemComponent.prototype.getReadableStatus=function(){switch(this.workflowAction.status.toLowerCase()){case be.IN_PROGRESS:return"se.cms.actionitem.page.workflow.action.status.started";case be.PENDING:return"se.cms.actionitem.page.workflow.action.status.not.started";default:return this.workflowAction.status}};WorkflowActionItemComponent.prototype.getActiveSince=function(){if(!!this.workflowAction.startedAgoInMillis){return this.cMSTimeService.getTimeAgo(this.workflowAction.startedAgoInMillis)}return null};WorkflowActionItemComponent.prototype.canShowDecisionButtons=function(){return this.canMakeDecisions&&this.workflowAction.isCurrentUserParticipant&&this.workflowAction.decisions.length>0};WorkflowActionItemComponent.prototype.canShowComments=function(){var e=this.collapsibleContainerApi&&this.collapsibleContainerApi.isExpanded();return e||this.workflowActionComments&&this.workflowActionComments.length>0};WorkflowActionItemComponent.prototype.onMainButtonClick=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n=this;return __generator(this,(function(i){e.preventDefault();e.stopPropagation();this.isMenuOpen=false;this.makeDecision(t).then((function(){n.routingService.reload()}));return[2]}))}))};WorkflowActionItemComponent.prototype.onMainButtonClick.$inject=["$event","decision"];WorkflowActionItemComponent.prototype.onSplitButtonClick=function(e){e.preventDefault();e.stopPropagation();this.isMenuOpen=!this.isMenuOpen;if(this.isMenuOpen){this.systemEventService.publishAsync(ye,{code:this.workflowAction.code})}};WorkflowActionItemComponent.prototype.onSplitButtonClick.$inject=["$event"];WorkflowActionItemComponent.prototype.onMenuHide=function(){this.isMenuOpen=false};WorkflowActionItemComponent.prototype.trackByIndex=function(e){return e};WorkflowActionItemComponent.prototype.trackByIndex.$inject=["index"];WorkflowActionItemComponent.prototype.loadCommentsAndSetHasCommentsFlag=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.loadComments(e,t,n)];case 1:i=o.sent();this.hasComments=i.pagination.totalCount>0;this.cdr.detectChanges();return[2,i]}}))}))};WorkflowActionItemComponent.prototype.loadCommentsAndSetHasCommentsFlag.$inject=["mask","pageSize","currentPage"];WorkflowActionItemComponent.prototype.loadComments=function(e,t,n){return this.workflowFacade.getCommentsForWorkflowAction(this.workflow.workflowCode,this.workflowAction.code,{mask:e,pageSize:t,currentPage:n})};WorkflowActionItemComponent.prototype.loadComments.$inject=["mask","pageSize","currentPage"];WorkflowActionItemComponent.prototype.makeDecision=function(e){this.systemEventService.publish(fe);return this.workflowFacade.makeDecision(this.workflow.workflowCode,this.workflowAction,e)};WorkflowActionItemComponent.prototype.makeDecision.$inject=["decision"];WorkflowActionItemComponent.prototype.onOtherMenuOpening=function(e,t){if(this.workflowAction.code!==t.code){this.isMenuOpen=false;this.cdr.detectChanges()}};WorkflowActionItemComponent.prototype.onOtherMenuOpening.$inject=["_eventId","eventData"];__decorate([a.Input(),__metadata("design:type",Object)],WorkflowActionItemComponent.prototype,"workflow",void 0);__decorate([a.Input(),__metadata("design:type",Object)],WorkflowActionItemComponent.prototype,"workflowAction",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],WorkflowActionItemComponent.prototype,"canMakeDecisions",void 0);WorkflowActionItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-workflow-action-item",template:'<div class="se-workflow-action-item" [ngClass]="getWorkflowActionStatusClass()"><se-collapsible-container class="se-catalog-details__collapse se-collapsible-container--noshadow fd-panel" [id]="workflowAction.code" (getApi)="setCollapsibleContainerApi($event)"><se-collapsible-container-header><div class="fd-panel__header"><div class="fd-panel__head"><h1 class="fd-panel__title">{{ workflowAction.name | seL10n | async }}</h1><p class="fd-panel__description">{{ getReadableStatus() | translate }} {{ getActiveSince() }}</p></div></div><div class="fd-panel__body">{{ workflowAction.description | seL10n | async }}<div *ngIf="canShowDecisionButtons()" class="se-workflow-action-item__decision-buttons fd-dropdown"><div class="fd-popover"><div class="fd-popover__control"><div [ngClass]="{ \'fd-button-split\': workflowAction.decisions.length > 1 }"><button class="se-workflow-action-item__decision-button fd-button--compact" [id]="workflowAction.code + \'-decision-button\'" (click)="onMainButtonClick($event, workflowAction.decisions[0])" type="button">{{ workflowAction.decisions[0].name | seL10n | async }}</button><se-popup-overlay [popupOverlay]="{\n                                        halign: \'right\',\n                                        valign: \'bottom\'\n                                    }" [popupOverlayTrigger]="isMenuOpen" (popupOverlayOnHide)="onMenuHide()"><button *ngIf="workflowAction.decisions.length > 1" [id]="workflowAction.code + \'-decision-split-button\'" class="fd-button--compact menu-button sap-icon--slim-arrow-down" (click)="onSplitButtonClick($event)"></button><div se-popup-overlay-body class="fd-popover__body fd-popover__body--right fd-popover__body--no-arrow se-workflow-action-item__decision-list"><nav class="fd-menu"><ul class="fd-menu__list"><li *ngFor="let decision of workflowAction.decisions"><a class="fd-menu__item se-workflow-action-item__decision" (click)="onMainButtonClick($event, decision)">{{ decision.name | seL10n | async }}</a></li></ul></nav></div></se-popup-overlay></div></div></div></div></div></se-collapsible-container-header><se-collapsible-container-content><div class="se-workflow-action-item__content" *ngIf="canShowComments()"><span *ngIf="!hasComments" class="se-workflow-action-item__comment-list fd-has-font-style-italic fd-has-color-text-4" [translate]="\'se.cms.actionitem.page.workflow.action.no.comments.available\'"></span><se-infinite-scrolling [pageSize]="pageSize" [fetchPage]="fetchPageOfComments" (itemsChange)="onCommentsLoaded($event)"><div *ngFor="let actionComment of workflowActionComments; trackBy: trackByIndex"><se-workflow-action-comment [workflowAction]="workflowAction" [actionComment]="actionComment"></se-workflow-action-comment></div></se-infinite-scrolling></div></se-collapsible-container-content></se-collapsible-container></div>',styles:['/*!\n * Fundamental Library Styles v0.4.1\n * Copyright (c) 2020 SAP SE or an SAP affiliate company.\n * Licensed under Apache License 2.0 (https://github.com/SAP/fundamental-styles/blob/master/LICENSE)\n *//*!\n.fd-button-split+()\n    .fd-button\n*/.fd-button-split{font-size:.875rem;font-size:var(--sapFontSize,.875rem);line-height:1.42857;color:#32363a;color:var(--sapTextColor,#32363a);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily, "72", "72full", Arial, Helvetica, sans-serif);font-weight:400;-webkit-font-smoothing:antialiased;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;margin:0;border:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle;position:relative}.fd-button-split:after,.fd-button-split:before{-webkit-box-sizing:inherit;box-sizing:inherit;font-size:inherit}.fd-button-split :first-child{margin:0;border-top-right-radius:0;border-bottom-right-radius:0}.fd-button-split :nth-child(2){margin:0;border-top-left-radius:0;border-bottom-left-radius:0;border-left-width:0}.fd-button-split[dir=rtl] :first-child,[dir=rtl] .fd-button-split :first-child{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:.25rem;border-top-right-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-right-radius:.25rem;border-bottom-right-radius:var(--sapButton_BorderCornerRadius,.25rem)}.fd-button-split[dir=rtl] :nth-child(2),[dir=rtl] .fd-button-split :nth-child(2){border-top-left-radius:.25rem;border-top-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-bottom-left-radius:.25rem;border-bottom-left-radius:var(--sapButton_BorderCornerRadius,.25rem);border-top-right-radius:0;border-bottom-right-radius:0;border-left-width:.0625rem;border-left-width:var(--sapButton_BorderWidth,.0625rem);border-right-width:0}.fd-button-split [class*="--emphasized"]:first-child{margin-right:1px}.fd-button-split [class*="--emphasized"][dir=rtl]:first-child,[dir=rtl] .fd-button-split [class*="--emphasized"]:first-child{margin-right:0;margin-left:1px}se-workflow-action-item .se-workflow-action-item{border-left:6px solid #fff;border-radius:4px 0 0 4px}se-workflow-action-item .se-workflow-action-item--started{border-left:6px solid #e9730c}se-workflow-action-item .se-workflow-action-item--completed{border-left:6px solid #0a7e3e}se-workflow-action-item .se-workflow-action-item__decision-buttons{margin:10px -30px 10px 0;text-align:right}se-workflow-action-item .se-workflow-action-item__decision-buttons .fd-button-split .menu-button{border-left:0;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:4px;border-bottom-right-radius:4px}se-workflow-action-item .se-workflow-action-item__decision-buttons .fd-button-split .menu-button:focus{box-shadow:none}se-workflow-action-item .se-workflow-action-item__content{min-height:30px}se-workflow-action-item .se-workflow-action-item__content-status{float:left;overflow:hidden}se-workflow-action-item .se-workflow-action-item__content se-infinite-scrolling .se-infinite-scrolling__container{max-height:none;overflow-y:auto;position:relative;margin-top:-20px;width:100%}se-workflow-action-item .se-workflow-action-item__content se-infinite-scrolling .se-infinite-scrolling__container::before{content:"";height:100%;border-left:1px solid #eeeeef;position:absolute;left:20px;top:40px;height:calc(100% - 120px)}se-workflow-action-item .se-workflow-action-item__comment-list{margin-left:5%;margin-top:5%;margin-bottom:5%}se-workflow-action-item .se-workflow-action-item__decision-list{min-width:160px;right:-38px;background:#fff}se-workflow-action-item .se-workflow-action-item__decision-list .fd-menu__list{text-align:left}se-workflow-action-item .se-workflow-action-item__decision:hover{text-decoration:none}se-workflow-action-item se-collapsible-container-header .fd-panel__body,se-workflow-action-item se-collapsible-container-header .fd-panel__header{border-bottom:none;padding:10px 16px;display:flex;flex-direction:column;align-items:flex-start;white-space:pre-wrap}se-workflow-action-item se-collapsible-container-header .fd-panel_body{color:#32363a;padding-top:0}se-workflow-action-item se-collapsible-container-header .fd-panel__title{margin-top:0;font-size:13px;font-weight:700}'],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[De,o.CMSTimeService,r.SystemEventService,r.SmarteditRoutingService,a.ChangeDetectorRef])],WorkflowActionItemComponent);return WorkflowActionItemComponent}();var Pi=function(){function WorkflowModule(){}WorkflowModule=__decorate([a.NgModule({imports:[r.TranslationModule.forChild(),g.CommonModule,m.PopoverModule,r.InfiniteScrollingModule,r.MoreTextModule,r.CollapsibleContainerModule,r.PopupOverlayModule,r.TooltipModule,r.DropdownMenuModule,r.HasOperationPermissionDirectiveModule,r.SpinnerModule,r.TabsModule,r.L10nPipeModule],declarations:[Te,Se,bi,Si,Qn,wi,Ei,_i,Kn,yi,qn,Ii,Zn,Xn,Yn,Ci],entryComponents:[Te,Se,bi,Si,Qn,wi,Ei,_i,Kn,yi,qn,Ii,Zn,Xn,Yn,Ci],exports:[_i],providers:[me,Pe,Ae,De,r.L10nPipe,r.moduleUtils.bootstrap((function(e,t,n,i,o,a){var s="PAGE_IN_WORKFLOW_NOTIFICATION_ID";var c="pageInWorkflowNotificationTemplate.html";e.subscribe(r.EVENTS.PAGE_CHANGE,(function(){t.getPageUUID().then((function(e){n.getActiveWorkflowForPageUuid(e).then((function(e){if(e!==null&&!e.isAvailableForCurrentPrincipal){i.pushNotification({id:s,templateUrl:c})}else{i.removeNotification(s)}}))}))}));o.routeChangeSuccess().subscribe((function(e){var t=o.getCurrentUrlFromEvent(e);if(t!=="/"+r.NG_ROUTE_PREFIX+r.STORE_FRONT_CONTEXT){i.removeNotification(s)}}))}),[r.CrossFrameEventService,r.IPageInfoService,Pe,r.INotificationService,r.SmarteditRoutingService,Ae])]})],WorkflowModule);return WorkflowModule}();var Ti=function(){function RestrictionsStepHandler(e,t,n){this.wizardManager=e;this.restrictionsEditorFunctionBindings=t;this.stepDetails=n}RestrictionsStepHandler.prototype.hideStep=function(){if(this.isStepOnWizard()){this.wizardManager.removeStepById(this.getStepId())}};RestrictionsStepHandler.prototype.showStep=function(){if(!this.isStepOnWizard()){this.wizardManager.addStep(this.stepDetails,this.wizardManager.getStepsCount())}};RestrictionsStepHandler.prototype.isStepValid=function(){return this.restrictionsEditorFunctionBindings.isDirty&&this.restrictionsEditorFunctionBindings.isDirty()};RestrictionsStepHandler.prototype.getStepId=function(){return this.stepDetails.id};RestrictionsStepHandler.prototype.goToStep=function(){this.wizardManager.goToStepWithId(this.getStepId())};RestrictionsStepHandler.prototype.isStepOnWizard=function(){return this.wizardManager.containsStep(this.getStepId())};return RestrictionsStepHandler}();var Ai=function(){function RestrictionsStepHandlerFactory(){}RestrictionsStepHandlerFactory.prototype.createRestrictionsStepHandler=function(e,t,n){return new Ti(e,t,n)};RestrictionsStepHandlerFactory.prototype.createRestrictionsStepHandler.$inject=["wizardManager","restrictionsEditorFunctionBindings","stepProperties"];RestrictionsStepHandlerFactory=__decorate([r.SeDowngradeService()],RestrictionsStepHandlerFactory);return RestrictionsStepHandlerFactory}();window.__smartedit__.addDecoratorPayload("Component","PageTypeStepComponent",{selector:"se-page-type-step",template:'\n        <se-select-page-type\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            (onTypeSelected)="wizardApi.typeSelected($event)"\n        >\n        </se-select-page-type>\n    '});var Di=function(){PageTypeStepComponent.$inject=["wizardApi"];function PageTypeStepComponent(e){this.wizardApi=e}PageTypeStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-type-step",template:'\n        <se-select-page-type\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            (onTypeSelected)="wizardApi.typeSelected($event)"\n        >\n        </se-select-page-type>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],PageTypeStepComponent);return PageTypeStepComponent}();window.__smartedit__.addDecoratorPayload("Component","PageTemplateStepComponent",{selector:"se-page-template-step",template:'\n        <se-select-page-template\n            [uriContext]="wizardApi.uriContext"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            (onTemplateSelected)="wizardApi.templateSelected($event)"\n        >\n        </se-select-page-template>\n    '});var Oi=function(){PageTemplateStepComponent.$inject=["wizardApi"];function PageTemplateStepComponent(e){this.wizardApi=e}PageTemplateStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-template-step",template:'\n        <se-select-page-template\n            [uriContext]="wizardApi.uriContext"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            (onTemplateSelected)="wizardApi.templateSelected($event)"\n        >\n        </se-select-page-template>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],PageTemplateStepComponent);return PageTemplateStepComponent}();window.__smartedit__.addDecoratorPayload("Component","PageInfoStepComponent",{selector:"se-page-info-step",template:'\n        <span *ngIf="wizardApi.isPageInfoActive()">\n            <se-generic-editor\n                [structure]="wizardApi.getPageInfoStructure()"\n                [content]="wizardApi.getPageInfo()"\n                [(submit)]="wizardApi.callbacks.savePageInfo"\n                [(reset)]="wizardApi.callbacks.resetPageInfo"\n                [(isDirty)]="wizardApi.callbacks.isDirtyPageInfo"\n                [(isValid)]="wizardApi.callbacks.isValidPageInfo"\n            >\n            </se-generic-editor>\n        </span>\n    '});var Ri=function(){PageInfoStepComponent.$inject=["wizardApi"];function PageInfoStepComponent(e){this.wizardApi=e}PageInfoStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-info-step",template:'\n        <span *ngIf="wizardApi.isPageInfoActive()">\n            <se-generic-editor\n                [structure]="wizardApi.getPageInfoStructure()"\n                [content]="wizardApi.getPageInfo()"\n                [(submit)]="wizardApi.callbacks.savePageInfo"\n                [(reset)]="wizardApi.callbacks.resetPageInfo"\n                [(isDirty)]="wizardApi.callbacks.isDirtyPageInfo"\n                [(isValid)]="wizardApi.callbacks.isValidPageInfo"\n            >\n            </se-generic-editor>\n        </span>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],PageInfoStepComponent);return PageInfoStepComponent}();window.__smartedit__.addDecoratorPayload("Component","PageDisplayConditionStepComponent",{selector:"se-page-condition-step",template:'\n        <se-event-message\n            class="existing-homepage__ymessage"\n            [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n            [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"\n        >\n        </se-event-message>\n\n        <se-new-page-display-condition\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [resultFn]="wizardApi.variationResult"\n        ></se-new-page-display-condition>\n    '});var Mi=function(){PageDisplayConditionStepComponent.$inject=["wizardApi"];function PageDisplayConditionStepComponent(e){this.wizardApi=e}PageDisplayConditionStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-condition-step",template:'\n        <se-event-message\n            class="existing-homepage__ymessage"\n            [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n            [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"\n        >\n        </se-event-message>\n\n        <se-new-page-display-condition\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [resultFn]="wizardApi.variationResult"\n        ></se-new-page-display-condition>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],PageDisplayConditionStepComponent);return PageDisplayConditionStepComponent}();window.__smartedit__.addDecoratorPayload("Component","PageRestrictionsStepComponent",{selector:"se-page-restrictions-step",template:'\n        <span *ngIf="wizardApi.isRestrictionsActive()" class="se-create-page-restriction-step">\n            <div *ngIf="wizardApi.getPageRestrictions().length > 1">\n                <se-page-restrictions-info-message></se-page-restrictions-info-message>\n            </div>\n            <se-restrictions-editor\n                [editable]="true"\n                [(resetFn)]="wizardApi.restrictionsEditorFunctionBindings.reset"\n                [(cancelFn)]="wizardApi.restrictionsEditorFunctionBindings.cancel"\n                [(isDirtyFn)]="wizardApi.restrictionsEditorFunctionBindings.isDirty"\n                (onRestrictionsChange)="wizardApi.restrictionsResult($event)"\n                [getRestrictionTypes]="wizardApi.getRestrictionTypes"\n                [getSupportedRestrictionTypes]="wizardApi.getSupportedRestrictionTypes"\n                [item]="wizardApi.getPageInfo()"\n                [restrictionUuids]="wizardApi.getPageRestrictions()"\n            >\n            </se-restrictions-editor>\n        </span>\n    '});var xi=function(){PageRestrictionsStepComponent.$inject=["wizardApi"];function PageRestrictionsStepComponent(e){this.wizardApi=e}PageRestrictionsStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-restrictions-step",template:'\n        <span *ngIf="wizardApi.isRestrictionsActive()" class="se-create-page-restriction-step">\n            <div *ngIf="wizardApi.getPageRestrictions().length > 1">\n                <se-page-restrictions-info-message></se-page-restrictions-info-message>\n            </div>\n            <se-restrictions-editor\n                [editable]="true"\n                [(resetFn)]="wizardApi.restrictionsEditorFunctionBindings.reset"\n                [(cancelFn)]="wizardApi.restrictionsEditorFunctionBindings.cancel"\n                [(isDirtyFn)]="wizardApi.restrictionsEditorFunctionBindings.isDirty"\n                (onRestrictionsChange)="wizardApi.restrictionsResult($event)"\n                [getRestrictionTypes]="wizardApi.getRestrictionTypes"\n                [getSupportedRestrictionTypes]="wizardApi.getSupportedRestrictionTypes"\n                [item]="wizardApi.getPageInfo()"\n                [restrictionUuids]="wizardApi.getPageRestrictions()"\n            >\n            </se-restrictions-editor>\n        </span>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],PageRestrictionsStepComponent);return PageRestrictionsStepComponent}();window.__smartedit__.addDecoratorPayload("Component","AddPageWizardComponent",{selector:"se-add-page-wizard",template:""});var Ni=function(){AddPageWizardComponent.$inject=["wizardManager","pageBuilderFactory","restrictionsStepHandlerFactory","experienceService","confirmationModalService","systemEventService","restrictionTypesService","restrictionsService","pageFacade"];function AddPageWizardComponent(e,t,n,i,o,r,a,s,c){var l=this;this.wizardManager=e;this.pageBuilderFactory=t;this.restrictionsStepHandlerFactory=n;this.experienceService=i;this.confirmationModalService=o;this.systemEventService=r;this.restrictionTypesService=a;this.restrictionsService=s;this.pageFacade=c;this.getWizardConfig=function(){return{isFormValid:function(e){return l.isFormValid(e)},onNext:function(){return l.onNext()},onDone:function(){return l.onDone()},onCancel:function(){return l.onCancel()},steps:[{id:l.ADD_PAGE_WIZARD_STEPS.PAGE_TYPE,name:"se.cms.addpagewizard.pagetype.tabname",title:"se.cms.addpagewizard.pagetype.title",component:Di},{id:l.ADD_PAGE_WIZARD_STEPS.PAGE_TEMPLATE,name:"se.cms.addpagewizard.pagetemplate.tabname",title:"se.cms.addpagewizard.pagetype.title",component:Oi},{id:l.ADD_PAGE_WIZARD_STEPS.PAGE_DISPLAY_CONDITION,name:"se.cms.addpagewizard.pageconditions.tabname",title:"se.cms.addpagewizard.pagetype.title",component:Mi},{id:l.ADD_PAGE_WIZARD_STEPS.PAGE_INFO,name:"se.cms.addpagewizard.pageinfo.tabname",title:"se.cms.addpagewizard.pagetype.title",component:Ri}]}};this.getRestrictionTypes=function(){return l.restrictionTypesService.getRestrictionTypesByPageType(l.getPageTypeCode())};this.getSupportedRestrictionTypes=function(){return l.restrictionsService.getSupportedRestrictionTypeCodes()};this.variationResult=function(e){l.pageBuilder.displayConditionSelected(e)};var d={};this.uriContext=this.wizardManager.properties.uriContext;this.callbacks={};this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.addpagewizard.pagetype.title",component:xi};this.restrictionsEditorFunctionBindings=d;this.restrictionsStepHandler=this.restrictionsStepHandlerFactory.createRestrictionsStepHandler(this.wizardManager,d,this.restrictionStepProperties);this.pageBuilder=this.pageBuilderFactory.createPageBuilder(this.restrictionsStepHandler,this.uriContext);this.saveInProgress=false;this.typeChanged=true;this.ADD_PAGE_WIZARD_STEPS={PAGE_TYPE:"pageType",PAGE_TEMPLATE:"pageTemplate",PAGE_DISPLAY_CONDITION:"pageDisplayCondition",PAGE_INFO:"pageInfo",PAGE_RESTRICTIONS:this.restrictionsStepHandler.getStepId()}}AddPageWizardComponent.prototype.typeSelected=function(e){this.typeChanged=true;this.pageBuilder.pageTypeSelected(e)};AddPageWizardComponent.prototype.typeSelected.$inject=["pageType"];AddPageWizardComponent.prototype.templateSelected=function(e){this.pageBuilder.pageTemplateSelected(e)};AddPageWizardComponent.prototype.templateSelected.$inject=["pageTemplate"];AddPageWizardComponent.prototype.getPageTypeCode=function(){return this.pageBuilder.getPageTypeCode()};AddPageWizardComponent.prototype.restrictionsResult=function(e){this.pageBuilder.setRestrictions(e.onlyOneRestrictionMustApply,e.restrictionUuids)};AddPageWizardComponent.prototype.restrictionsResult.$inject=["data"];AddPageWizardComponent.prototype.isRestrictionsActive=function(){if(!this.typeChanged||this.wizardManager.getCurrentStepId()===this.ADD_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS){this.typeChanged=false;return true}return false};AddPageWizardComponent.prototype.getPageInfo=function(){var e=this.pageBuilder.getPage();e.uriContext=this.uriContext;return e};AddPageWizardComponent.prototype.getPageRestrictions=function(){return this.pageBuilder.getPageRestrictions()};AddPageWizardComponent.prototype.getPageInfoStructure=function(){return this.pageBuilder.getPageInfoStructure()};AddPageWizardComponent.prototype.isPageInfoActive=function(){return this.wizardManager.getCurrentStepId()===this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO};AddPageWizardComponent.prototype.onNext=function(){return Promise.resolve(true)};AddPageWizardComponent.prototype.onCancel=function(){return this.confirmationModalService.confirm({description:"se.editor.cancel.confirm"})};AddPageWizardComponent.prototype.isFormValid=function(e){switch(e){case this.ADD_PAGE_WIZARD_STEPS.PAGE_TYPE:return!!this.pageBuilder.getPageTypeCode();case this.ADD_PAGE_WIZARD_STEPS.PAGE_TEMPLATE:return!!this.pageBuilder.getTemplateUuid();case this.ADD_PAGE_WIZARD_STEPS.PAGE_DISPLAY_CONDITION:return true;case this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO:return!this.saveInProgress&&!!this.callbacks.isDirtyPageInfo&&this.callbacks.isDirtyPageInfo()&&!!this.callbacks.isValidPageInfo&&this.callbacks.isValidPageInfo();case this.ADD_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS:return!this.saveInProgress&&this.restrictionsStepHandler.isStepValid()}return false};AddPageWizardComponent.prototype.isFormValid.$inject=["stepId"];AddPageWizardComponent.prototype.onDone=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:this.saveInProgress=true;return[4,this.callbacks.savePageInfo()];case 1:e=o.sent();s.defaultsDeep(e,this.pageBuilder.getPage());o.label=2;case 2:o.trys.push([2,5,,6]);return[4,this.pageFacade.createPage(e)];case 3:t=o.sent();this.pageBuilder.setPageUid(t.uid);if(t.typeCode==="EmailPage"){this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE,t);return[2,t]}return[4,this.experienceService.loadExperience({siteId:this.uriContext.CURRENT_CONTEXT_SITE_ID,catalogId:this.uriContext.CURRENT_CONTEXT_CATALOG,catalogVersion:this.uriContext.CURRENT_CONTEXT_CATALOG_VERSION,pageId:this.pageBuilder.getPage().uid})];case 4:o.sent();return[3,6];case 5:n=o.sent();this.saveInProgress=false;this.systemEventService.publishAsync(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:n.error.errors});i=n.error.errors;if(!i.find((function(e){return e.subject.indexOf("restrictions")===0}))){this.wizardManager.goToStepWithId(this.ADD_PAGE_WIZARD_STEPS.PAGE_INFO)}return[2,Promise.reject()];case 6:return[2]}}))}))};AddPageWizardComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-add-page-wizard",template:""}),__param(0,a.Inject(r.WIZARD_MANAGER)),__metadata("design:paramtypes",[r.WizardService,fi,Ai,r.IExperienceService,r.IConfirmationModalService,r.SystemEventService,Ue,Ge,yn])],AddPageWizardComponent);return AddPageWizardComponent}();var ki;(function(e){e["PENDING"]="PENDING";e["NO_HOMEPAGE"]="NO_HOMEPAGE";e["LOCAL"]="LOCAL";e["OLD"]="OLD";e["PARENT"]="PARENT"})(ki||(ki={}));window.__smartedit__.addDecoratorPayload("Component","NewPageDisplayConditionComponent",{selector:"se-new-page-display-condition",template:'<div *ngIf="isReady"><div class="form-group"><label for="page-condition-selector-id" class="se-control-label" translate="se.cms.page.condition.selection.label"></label><se-select id="page-condition-selector-id" [model]="conditionSelected.label" (modelChange)="onConditionChange($event)" [fetchStrategy]="conditionSelectorFetchStrategy" [onChange]="onDataChange" [searchEnabled]="false"></se-select><span class="se-form-help-message"><span [translate]="conditionSelected.description"></span></span></div><div *ngIf="showPrimarySelector()" class="form-group"><label for="page-condition-primary-selector-id" class="se-control-label" translate="se.cms.page.condition.primary.association.label"></label><se-select id="page-condition-primary-selector-id" [model]="primarySelectedModel" (modelChange)="primarySelectedModelOnChange($event)" [fetchStrategy]="primaryPageChoicesFetchStrategy" [onChange]="onDataChange"></se-select><span *ngIf="primarySelected?.label" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ primarySelected.label }}</span></span></div><div *ngIf="showHomePageWidget()"><div class="fd-form__item"><input type="checkbox" id="set-homepage-checkbox" class="se-component-item--details se-component-homepage__checkbox-input fd-form__control" name="clone-on-drop" (ngModelChange)="onHomePageChange($event)" [ngModel]="homepage"/> <label class="se-control-label se-component-homepage--label fd-form__label" for="set-homepage-checkbox" translate="se.cms.display.conditions.homepage.set"></label></div><label class="se-control-label se-component-homepage--label" for="set-homepage-checkbox" *ngIf="showReplaceLabel">{{ "se.cms.display.conditions.homepage.replace" | translate: { currentHomepage: currentHomePageName } }}</label></div></div>',styles:[".se-component-homepage__checkbox-input{margin:0 4px 0 0;outline:0;box-shadow:none}"],changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]});var Fi=function(){NewPageDisplayConditionComponent.$inject=["urlService","homepageService","displayConditionsFacade","translateService","pageService","logService","pageDisplayConditions","l10n","cdr"];function NewPageDisplayConditionComponent(e,t,n,i,o,r,a,s,c){this.urlService=e;this.homepageService=t;this.displayConditionsFacade=n;this.translateService=i;this.pageService=o;this.logService=r;this.pageDisplayConditions=a;this.l10n=s;this.cdr=c;this.conditions=null;this.homepage=false;this.homepageDetails={status:ki.PENDING};this.isReady=false;this.primarySelected=null;this.primarySelectedModel=null;this.showReplaceLabel=false}NewPageDisplayConditionComponent.prototype.ngOnInit=function(){var e=this;this.onDataChange=function(){return e.dataChanged()};this.conditionSelected={};this.conditionSelectorFetchStrategy={fetchAll:function(){return Promise.resolve((e.conditions||[]).map((function(e){return{id:e.label,label:e.label}})))}};this.initialConditionSelectedKey=this.initialConditionSelectedKey||"page.displaycondition.primary";this.primaryPageChoicesFetchStrategy={fetchEntity:function(){return Promise.resolve({id:e.primarySelected.uid,label:e.primarySelected.name||e.primarySelected.label})},fetchPage:function(t,n,i){return e.displayConditionsFacade.getPrimaryPagesForPageType(e.pageTypeCode,e.uriContext,{search:t,pageSize:n,currentPage:i})}}};NewPageDisplayConditionComponent.prototype.ngOnChanges=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(r){switch(r.label){case 0:t=!!e.pageTypeCode&&e.pageTypeCode.currentValue!=e.pageTypeCode.previousValue;n=!!e.targetCatalogVersion&&!s.isEqual(e.targetCatalogVersion.currentValue,e.targetCatalogVersion.previousValue);if(!(t||n))return[3,6];if(!(!this.targetCatalogVersion||this.isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)))return[3,2];return[4,this.getSelectedPrimaryPageAndDisplayCondition()];case 1:r.sent();return[3,3];case 2:this.getOnlyPrimaryDisplayCondition();r.label=3;case 3:i=this.targetCatalogVersion===undefined?this.uriContext:this.urlService.buildUriContext(this.targetCatalogVersion.siteId,this.targetCatalogVersion.catalogId,this.targetCatalogVersion.version);return[4,this.homepageService.getHomepageDetailsForContext(i)];case 4:o=r.sent();this.homepageDetails=o;return[4,this.updateHomepageUiProperties()];case 5:r.sent();return[3,8];case 6:return[4,this.updateHomepageUiProperties()];case 7:r.sent();r.label=8;case 8:this.cdr.detectChanges();return[2]}}))}))};NewPageDisplayConditionComponent.prototype.ngOnChanges.$inject=["changes"];NewPageDisplayConditionComponent.prototype.showPrimarySelector=function(){return!(this.conditionSelected&&this.conditionSelected.isPrimary)};NewPageDisplayConditionComponent.prototype.onConditionChange=function(e){this.conditionSelected=this.conditions.find((function(t){return t.label===e}))};NewPageDisplayConditionComponent.prototype.onConditionChange.$inject=["selectedConditionLabel"];NewPageDisplayConditionComponent.prototype.onHomePageChange=function(e){this.homepage=e;this.dataChanged()};NewPageDisplayConditionComponent.prototype.onHomePageChange.$inject=["isHomepage"];NewPageDisplayConditionComponent.prototype.showHomePageWidget=function(){return this.isPrimaryContentPage()};NewPageDisplayConditionComponent.prototype.primarySelectedModelOnChange=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pageService.getPageById(e)];case 1:t=n.sent();this.setPrimarySelected(t);this.dataChanged();return[2]}}))}))};NewPageDisplayConditionComponent.prototype.primarySelectedModelOnChange.$inject=["uid"];NewPageDisplayConditionComponent.prototype.dataChanged=function(){if(!this.isPrimaryContentPage()){this.homepage=undefined}this.updateHomepageUiProperties();if(this.resultFn){this.resultFn(this.getResults())}};NewPageDisplayConditionComponent.prototype.isPrimaryContentPage=function(){var e;return((e=this.conditionSelected)===null||e===void 0?void 0:e.isPrimary)&&this.pageTypeCode==="ContentPage"};NewPageDisplayConditionComponent.prototype.updateHomepageUiProperties=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:if(!this.homepage)return[3,7];e=this.homepageDetails.status;switch(e){case ki.NO_HOMEPAGE:return[3,1];case ki.PARENT:return[3,2];case ki.LOCAL:return[3,4]}return[3,5];case 1:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.showReplaceLabel=false;return[3,6];case 2:return[4,this.getTranslatedNames(this.homepageDetails.parentCatalogName,this.homepageDetails.targetCatalogName)];case 3:t=o.sent(),n=t[0],i=t[1];this.homepageService.sendEventShowReplaceParentHomePageInfo({description:this.translateService.instant("se.cms.display.conditions.homepage.replace.parent.info.header",{parentCatalogName:n,parentCatalogVersion:this.homepageDetails.parentCatalogVersion,targetCatalogName:i,targetCatalogVersion:this.homepageDetails.targetCatalogVersion})});this.showReplaceLabel=false;return[3,6];case 4:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.currentHomePageName=this.homepageDetails.currentHomepageName;this.showReplaceLabel=true;return[3,6];case 5:return[3,6];case 6:return[3,8];case 7:this.homepageService.sendEventHideReplaceParentHomePageInfo();this.showReplaceLabel=false;o.label=8;case 8:return[2]}}))}))};NewPageDisplayConditionComponent.prototype.getTranslatedNames=function(e,t){return Promise.all([this.l10n.transform(e).pipe(p.take(1)).toPromise(),this.l10n.transform(t).pipe(p.take(1)).toPromise()])};NewPageDisplayConditionComponent.prototype.getTranslatedNames.$inject=["name","secondName"];NewPageDisplayConditionComponent.prototype.getResults=function(){var e={homepage:this.homepage,isPrimary:this.conditionSelected&&this.conditionSelected.isPrimary,primaryPage:null};if(this.conditionSelected&&!this.conditionSelected.isPrimary){e.primaryPage=this.primarySelected}return e};NewPageDisplayConditionComponent.prototype.getSelectedPrimaryPageAndDisplayCondition=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!this.pageTypeCode)return[3,8];i.label=1;case 1:i.trys.push([1,5,6,7]);if(!this.pageUuid)return[3,4];return[4,this.pageService.getPageByUuid(this.pageUuid)];case 2:e=i.sent();return[4,!e.defaultPage?this.pageService.getPrimaryPage(e.uid):e];case 3:t=i.sent();this.setPrimarySelected(t);i.label=4;case 4:return[3,7];case 5:n=i.sent();this.logService.error(n);return[3,7];case 6:this.getAllPrimaryDisplayCondition();return[7];case 7:return[3,9];case 8:this.getAllPrimaryDisplayCondition();i.label=9;case 9:return[2]}}))}))};NewPageDisplayConditionComponent.prototype.getAllPrimaryDisplayCondition=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:i.trys.push([0,2,3,4]);return[4,this.pageDisplayConditions.getNewPageConditions(this.pageTypeCode,this.uriContext)];case 1:e=i.sent();if(!e.length){return[2]}this.conditions=e;this.conditionSelected=this.conditions[0];if(this.conditions.length>1){this.conditionSelected=this.conditions.find((function(e){return e.label===n.initialConditionSelectedKey}))}this.isReady=true;return[3,4];case 2:t=i.sent();this.logService.error(t);return[3,4];case 3:if(this.targetCatalogVersion&&!this.isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){this.getOnlyPrimaryDisplayCondition()}else{this.dataChanged()}return[7];case 4:return[2]}}))}))};NewPageDisplayConditionComponent.prototype.getOnlyPrimaryDisplayCondition=function(){this.conditions=[{description:"page.displaycondition.primary.description",isPrimary:true,label:"page.displaycondition.primary"}];this.conditionSelected=this.conditions[0];this.isReady=true;this.dataChanged()};NewPageDisplayConditionComponent.prototype.isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION};NewPageDisplayConditionComponent.prototype.isUriContextEqualToCatalogVersion.$inject=["uriContext","catalogVersion"];NewPageDisplayConditionComponent.prototype.setPrimarySelected=function(e){this.primarySelected=e;this.primarySelectedModel=e.uid};NewPageDisplayConditionComponent.prototype.setPrimarySelected.$inject=["page"];__decorate([a.Input(),__metadata("design:type",String)],NewPageDisplayConditionComponent.prototype,"pageTypeCode",void 0);__decorate([a.Input(),__metadata("design:type",Object)],NewPageDisplayConditionComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Function)],NewPageDisplayConditionComponent.prototype,"resultFn",void 0);__decorate([a.Input(),__metadata("design:type",String)],NewPageDisplayConditionComponent.prototype,"pageUuid",void 0);__decorate([a.Input(),__metadata("design:type",String)],NewPageDisplayConditionComponent.prototype,"initialConditionSelectedKey",void 0);__decorate([a.Input(),__metadata("design:type",Object)],NewPageDisplayConditionComponent.prototype,"targetCatalogVersion",void 0);NewPageDisplayConditionComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-new-page-display-condition",template:'<div *ngIf="isReady"><div class="form-group"><label for="page-condition-selector-id" class="se-control-label" translate="se.cms.page.condition.selection.label"></label><se-select id="page-condition-selector-id" [model]="conditionSelected.label" (modelChange)="onConditionChange($event)" [fetchStrategy]="conditionSelectorFetchStrategy" [onChange]="onDataChange" [searchEnabled]="false"></se-select><span class="se-form-help-message"><span [translate]="conditionSelected.description"></span></span></div><div *ngIf="showPrimarySelector()" class="form-group"><label for="page-condition-primary-selector-id" class="se-control-label" translate="se.cms.page.condition.primary.association.label"></label><se-select id="page-condition-primary-selector-id" [model]="primarySelectedModel" (modelChange)="primarySelectedModelOnChange($event)" [fetchStrategy]="primaryPageChoicesFetchStrategy" [onChange]="onDataChange"></se-select><span *ngIf="primarySelected?.label" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ primarySelected.label }}</span></span></div><div *ngIf="showHomePageWidget()"><div class="fd-form__item"><input type="checkbox" id="set-homepage-checkbox" class="se-component-item--details se-component-homepage__checkbox-input fd-form__control" name="clone-on-drop" (ngModelChange)="onHomePageChange($event)" [ngModel]="homepage"/> <label class="se-control-label se-component-homepage--label fd-form__label" for="set-homepage-checkbox" translate="se.cms.display.conditions.homepage.set"></label></div><label class="se-control-label se-component-homepage--label" for="set-homepage-checkbox" *ngIf="showReplaceLabel">{{ "se.cms.display.conditions.homepage.replace" | translate: { currentHomepage: currentHomePageName } }}</label></div></div>',styles:[".se-component-homepage__checkbox-input{margin:0 4px 0 0;outline:0;box-shadow:none}"],changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]}),__metadata("design:paramtypes",[r.IUrlService,q,B,d.TranslateService,o.IPageService,r.LogService,K,r.L10nPipe,a.ChangeDetectorRef])],NewPageDisplayConditionComponent);return NewPageDisplayConditionComponent}();var zi=["layout/landingLayout1Page","layout/landingLayout3Page","layout/landingLayout4Page","layout/landingLayout5Page","layout/landingLayout6Page","layout/landingLayoutPage","account/accountRegisterPage","checkout/checkoutRegisterPage"];var Li=function(){PageTemplateService.$inject=["restServiceFactory"];function PageTemplateService(e){this.pageTemplateRestService=e.get(o.PAGE_TEMPLATES_URI)}PageTemplateService.prototype.getPageTemplatesForType=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:n=__assign({pageTypeCode:t,active:true},e);return[4,this.pageTemplateRestService.get(n)];case 1:i=o.sent();return[2,{templates:i.templates.filter((function(e){return!zi.includes(e.frontEndName)}))}]}}))}))};PageTemplateService.prototype.getPageTemplatesForType.$inject=["uriContext","pageType"];PageTemplateService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.IRestServiceFactory])],PageTemplateService);return PageTemplateService}();window.__smartedit__.addDecoratorPayload("Component","SelectPageTemplateComponent",{selector:"se-select-page-template",template:'<div class="se-page-type-step-template"><div class="se-add-page__sub-header"><div class="se-add-page__sub-header-title">{{ \'se.cms.addpagewizard.pagetemplate.description\' | translate }}</div><div class="se-input-group se-page-type-step-template-list-search"><input type="text" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagewizard.templatestep.searchplaceholder\' | translate }}" [ngModel]="searchString" (ngModelChange)="onSearchChange($event)" name="query"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="searchString" class="se-input-group__addon se-input-group__clear-btn" (click)="clearSearch()"><span class="sap-icon--decline"></span></div></div></div><div class="se-add-page__list fd-menu" *ngIf="pageTemplates.length > 0"><div *ngFor="let template of filteredPageTemplates" [ngClass]="{ \'is-selected\': isSelected(template)}" (click)="templateSelected(template)" class="se-add-page__item se-add-page__item--page-template fd-menu__item"><div class="se-add-page__item-title">{{ template.name }}</div></div></div></div>',styles:[".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Vi=function(){SelectPageTemplateComponent.$inject=["pageTemplateService","cdr"];function SelectPageTemplateComponent(e,t){this.pageTemplateService=e;this.cdr=t;this.searchString="";this.onTemplateSelected=new a.EventEmitter;this.cache={};this.pageTemplates=[]}SelectPageTemplateComponent.prototype.ngOnChanges=function(e){var t;return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(n){switch(n.label){case 0:if(!((t=e.pageTypeCode)===null||t===void 0?void 0:t.currentValue))return[3,2];return[4,this.onInputUpdated()];case 1:n.sent();this.setDefaultFilteredPageTemplates();this.cdr.detectChanges();n.label=2;case 2:return[2]}}))}))};SelectPageTemplateComponent.prototype.ngOnChanges.$inject=["changes"];SelectPageTemplateComponent.prototype.templateSelected=function(e){this.selectedTemplate=e;this.onTemplateSelected.emit(e)};SelectPageTemplateComponent.prototype.templateSelected.$inject=["pageTemplate"];SelectPageTemplateComponent.prototype.isSelected=function(e){var t;return e.uid===((t=this.selectedTemplate)===null||t===void 0?void 0:t.uid)};SelectPageTemplateComponent.prototype.isSelected.$inject=["pageTemplate"];SelectPageTemplateComponent.prototype.clearSearch=function(){this.searchString="";this.setDefaultFilteredPageTemplates()};SelectPageTemplateComponent.prototype.onSearchChange=function(e){this.searchString=e;this.filterByQuery(this.searchString)};SelectPageTemplateComponent.prototype.onSearchChange.$inject=["value"];SelectPageTemplateComponent.prototype.onInputUpdated=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.clearSearch();this.selectedTemplate=null;return[2,this.setPageTemplates()]}))}))};SelectPageTemplateComponent.prototype.setPageTemplates=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(this.cache[this.pageTypeCode]){this.pageTemplates=this.cache[this.pageTypeCode];return[2]}this.pageTemplates=[];return[4,this.pageTemplateService.getPageTemplatesForType(this.uriContext,this.pageTypeCode)];case 1:e=t.sent();this.cache[this.pageTypeCode]=e.templates;this.pageTemplates=this.cache[this.pageTypeCode];return[2]}}))}))};SelectPageTemplateComponent.prototype.filterByQuery=function(e){if(!e){this.setDefaultFilteredPageTemplates();return}this.filteredPageTemplates=this.pageTemplates.filter((function(t){var n=e.split(" ");return n.every((function(e){return t.name.toLowerCase().includes(e.toLowerCase())}))}))};SelectPageTemplateComponent.prototype.filterByQuery.$inject=["query"];SelectPageTemplateComponent.prototype.setDefaultFilteredPageTemplates=function(){this.filteredPageTemplates=__spreadArrays(this.pageTemplates)};__decorate([a.Input(),__metadata("design:type",Object)],SelectPageTemplateComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",String)],SelectPageTemplateComponent.prototype,"pageTypeCode",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],SelectPageTemplateComponent.prototype,"onTemplateSelected",void 0);SelectPageTemplateComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-select-page-template",template:'<div class="se-page-type-step-template"><div class="se-add-page__sub-header"><div class="se-add-page__sub-header-title">{{ \'se.cms.addpagewizard.pagetemplate.description\' | translate }}</div><div class="se-input-group se-page-type-step-template-list-search"><input type="text" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagewizard.templatestep.searchplaceholder\' | translate }}" [ngModel]="searchString" (ngModelChange)="onSearchChange($event)" name="query"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="searchString" class="se-input-group__addon se-input-group__clear-btn" (click)="clearSearch()"><span class="sap-icon--decline"></span></div></div></div><div class="se-add-page__list fd-menu" *ngIf="pageTemplates.length > 0"><div *ngFor="let template of filteredPageTemplates" [ngClass]="{ \'is-selected\': isSelected(template)}" (click)="templateSelected(template)" class="se-add-page__item se-add-page__item--page-template fd-menu__item"><div class="se-add-page__item-title">{{ template.name }}</div></div></div></div>',styles:[".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Li,a.ChangeDetectorRef])],SelectPageTemplateComponent);return SelectPageTemplateComponent}();var $i=function(){PageTypeService.$inject=["restServiceFactory"];function PageTypeService(e){this.pageTypeRestService=e.get(o.PAGE_TYPES_URI)}PageTypeService.prototype.getPageTypes=function(){this.pageTypesResponse=this.pageTypesResponse||this.pageTypeRestService.get();return this.pageTypesResponse.then((function(e){return e.pageTypes}))};PageTypeService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PageTypeService);return PageTypeService}();window.__smartedit__.addDecoratorPayload("Component","SelectPageTypeComponent",{selector:"se-select-page-type",template:'<div><div class="se-add-page__sub-header">{{ \'se.cms.addpagewizard.pagetype.description\' | translate }}</div><div class="se-add-page__list fd-menu" *ngIf="pageTypes.length > 0"><div class="se-add-page__item fd-menu__item" *ngFor="let pageType of pageTypes" [ngClass]="{ \'is-selected\': isSelected(pageType)}" (click)="selectType(pageType)"><div class="se-add-page__item-title">{{ pageType.name | seL10n | async }}</div><div class="se-add-page__item-description">{{ pageType.description | seL10n | async }}</div></div></div></div>',styles:[".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var Ui=function(){SelectPageTypeComponent.$inject=["pageTypeService","typePermissionsRestService","cdr"];function SelectPageTypeComponent(e,t,n){this.pageTypeService=e;this.typePermissionsRestService=t;this.cdr=n;this.onTypeSelected=new a.EventEmitter;this.pageTypes=[]}SelectPageTypeComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.loadPageTypes()];case 1:e.sent();this.cdr.detectChanges();return[2]}}))}))};SelectPageTypeComponent.prototype.selectType=function(e){this.onTypeSelected.emit(e)};SelectPageTypeComponent.prototype.selectType.$inject=["pageType"];SelectPageTypeComponent.prototype.isSelected=function(e){return e.code===this.pageTypeCode};SelectPageTypeComponent.prototype.isSelected.$inject=["pageType"];SelectPageTypeComponent.prototype.loadPageTypes=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pageTypeService.getPageTypes()];case 1:e=i.sent();t=e.map((function(e){return e.code}));return[4,this.typePermissionsRestService.hasCreatePermissionForTypes(t)];case 2:n=i.sent();this.pageTypes=e.filter((function(e){return n[e.code]}));return[2]}}))}))};__decorate([a.Input(),__metadata("design:type",String)],SelectPageTypeComponent.prototype,"pageTypeCode",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],SelectPageTypeComponent.prototype,"onTypeSelected",void 0);SelectPageTypeComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-select-page-type",template:'<div><div class="se-add-page__sub-header">{{ \'se.cms.addpagewizard.pagetype.description\' | translate }}</div><div class="se-add-page__list fd-menu" *ngIf="pageTypes.length > 0"><div class="se-add-page__item fd-menu__item" *ngFor="let pageType of pageTypes" [ngClass]="{ \'is-selected\': isSelected(pageType)}" (click)="selectType(pageType)"><div class="se-add-page__item-title">{{ pageType.name | seL10n | async }}</div><div class="se-add-page__item-description">{{ pageType.description | seL10n | async }}</div></div></div></div>',styles:[".se-add-page__sub-header{padding-bottom:16px;color:#51555a}.se-add-page__sub-header-title{margin-bottom:8px}.se-add-page__list.fd-menu{border-top:1px solid #d9d9d9;padding:0}.se-add-page__item{cursor:pointer}.se-add-page__item--page-template{height:48px;display:flex;flex-direction:row;align-items:center}.se-add-page__item-title{font-weight:700}.se-add-page__item-description{white-space:normal}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[$i,o.TypePermissionsRestService,a.ChangeDetectorRef])],SelectPageTypeComponent);return SelectPageTypeComponent}();window.__smartedit__.addDecoratorPayload("Component","SelectTargetCatalogVersionComponent",{selector:"se-select-target-catalog-version",template:'<div class="target-catalog-version-selector-wrapper form-group"><label for="target-catalog-version-selector-id" class="se-control-label" translate="se.cms.clonepagewizard.options.targetcatalogversion.label"></label><se-select *ngIf="!!catalogVersions.length" id="se-catalog-version-selector-dropdown" [(model)]="selectedCatalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onSelectionChange" [searchEnabled]="false" (getApi)="setSelectApi($event)"></se-select><div *ngIf="catalogVersionContainsPageWithSameLabel"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.label.exists.message"></span></div><div *ngIf="pageAlreadyExists()"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.pagetype.exists.message"></span></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var ji=function(){SelectTargetCatalogVersionComponent.$inject=["pageFacade","catalogVersionRestService","catalogService","pageService","cdr"];function SelectTargetCatalogVersionComponent(e,t,n,i,o){this.pageFacade=e;this.catalogVersionRestService=t;this.catalogService=n;this.pageService=i;this.cdr=o;this.catalogVersions=[];this.selectedCatalogVersion=null;this.catalogVersionContainsPageWithSameLabel=false;this.catalogVersionContainsPageWithSameTypeCode=false;this.onTargetCatalogVersionSelected=new a.EventEmitter}SelectTargetCatalogVersionComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:this.catalogVersionSelectorFetchStrategy={fetchAll:function(){return Promise.resolve((e.catalogVersions||[]).map((function(e){return{id:e.uuid,label:e.name}})))}};this.onSelectionChange=function(){return e.selectionChangeHandler()};return[4,this.setupCatalogVersions()];case 1:t.sent();this.cdr.detectChanges();return[2]}}))}))};SelectTargetCatalogVersionComponent.prototype.setSelectApi=function(e){this.selectApi=e};SelectTargetCatalogVersionComponent.prototype.setSelectApi.$inject=["api"];SelectTargetCatalogVersionComponent.prototype.pageAlreadyExists=function(){return this.catalogVersionContainsPageWithSameTypeCode&&!this.catalogVersionContainsPageWithSameLabel};SelectTargetCatalogVersionComponent.prototype.setupCatalogVersions=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.catalogVersionRestService.getCloneableTargets(this.uriContext)];case 1:e=o.sent();t=e.versions;if(!!s.isEmpty(t))return[3,3];return[4,this.catalogService.getCatalogVersionUUid(this.uriContext)];case 2:n=o.sent();i=t.find((function(e){return e.uuid===n}));if(i){this.selectedCatalogVersion=i.uuid}else{this.selectedCatalogVersion=t[0].uuid}this.catalogVersions=t;o.label=3;case 3:return[2]}}))}))};SelectTargetCatalogVersionComponent.prototype.selectionChangeHandler=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:if(!this.selectedCatalogVersion){return[2]}return[4,this.catalogService.getCatalogVersionByUuid(this.selectedCatalogVersion)];case 1:e=n.sent();return[4,this.determinePageExists(e)];case 2:t=n.sent();this.onTargetCatalogVersionSelected.emit(e);this.catalogVersionContainsPageWithSameLabel=t;this.catalogVersionContainsPageWithSameTypeCode=t;this.cdr.detectChanges();this.updateSelectValidationState();return[2]}}))}))};SelectTargetCatalogVersionComponent.prototype.determinePageExists=function(e){if(this.pageTypeCode==="ContentPage"){return this.determineContentPageWithLabelExists(e)}return this.determinePrimaryPageForLabelExists(e)};SelectTargetCatalogVersionComponent.prototype.determinePageExists.$inject=["catalogVersion"];SelectTargetCatalogVersionComponent.prototype.determineContentPageWithLabelExists=function(e){return this.pageFacade.contentPageWithLabelExists(this.pageLabel,e.catalogId,e.version)};SelectTargetCatalogVersionComponent.prototype.determineContentPageWithLabelExists.$inject=["catalogVersion"];SelectTargetCatalogVersionComponent.prototype.determinePrimaryPageForLabelExists=function(e){var t;var n=(t={},t[r.PAGE_CONTEXT_SITE_ID]=e.siteId,t[o.PAGE_CONTEXT_CATALOG]=e.catalogId,t[o.PAGE_CONTEXT_CATALOG_VERSION]=e.version,t);return this.pageService.primaryPageForPageTypeExists(this.pageTypeCode,n)};SelectTargetCatalogVersionComponent.prototype.determinePrimaryPageForLabelExists.$inject=["catalogVersion"];SelectTargetCatalogVersionComponent.prototype.updateSelectValidationState=function(){if(!this.selectApi){return}if(this.catalogVersionContainsPageWithSameLabel||this.catalogVersionContainsPageWithSameTypeCode){this.selectApi.setValidationState(r.VALIDATION_MESSAGE_TYPES.WARNING)}else{this.selectApi.resetValidationState()}};__decorate([a.Input(),__metadata("design:type",Object)],SelectTargetCatalogVersionComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",String)],SelectTargetCatalogVersionComponent.prototype,"pageTypeCode",void 0);__decorate([a.Input(),__metadata("design:type",String)],SelectTargetCatalogVersionComponent.prototype,"pageLabel",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],SelectTargetCatalogVersionComponent.prototype,"onTargetCatalogVersionSelected",void 0);SelectTargetCatalogVersionComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-select-target-catalog-version",template:'<div class="target-catalog-version-selector-wrapper form-group"><label for="target-catalog-version-selector-id" class="se-control-label" translate="se.cms.clonepagewizard.options.targetcatalogversion.label"></label><se-select *ngIf="!!catalogVersions.length" id="se-catalog-version-selector-dropdown" [(model)]="selectedCatalogVersion" [fetchStrategy]="catalogVersionSelectorFetchStrategy" [onChange]="onSelectionChange" [searchEnabled]="false" (getApi)="setSelectApi($event)"></se-select><div *ngIf="catalogVersionContainsPageWithSameLabel"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.label.exists.message"></span></div><div *ngIf="pageAlreadyExists()"><span class="help-block" translate="se.cms.clonepagewizard.options.targetcatalogversion.pagetype.exists.message"></span></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[yn,L,r.ICatalogService,o.IPageService,a.ChangeDetectorRef])],SelectTargetCatalogVersionComponent);return SelectTargetCatalogVersionComponent}();var Bi=function(){function ClonePageBuilder(e,t,n,i,o,r,a,s){this.restrictionsStepHandler=e;this.basePageUUID=t;this.uriContext=n;this.contextAwarePageStructureService=i;this.typeStructureRestService=o;this.cmsitemsRestService=r;this.catalogService=a;this.pageInfoService=s;this.basePage={};this.pageData={};this.pageInfoStructure={};this.basePageInfoAvailable=false;this.componentCloneOption=""}ClonePageBuilder.prototype.getPageTypeCode=function(){return this.pageData.typeCode};ClonePageBuilder.prototype.getPageTemplate=function(){return this.pageData.template};ClonePageBuilder.prototype.getPageLabel=function(){return this.pageData.label};ClonePageBuilder.prototype.getBasePageUuid=function(){return this.basePage.uuid};ClonePageBuilder.prototype.getPageInfo=function(){return this.pageData};ClonePageBuilder.prototype.getBasePageInfo=function(){return this.basePage};ClonePageBuilder.prototype.getPageProperties=function(){return{type:this.pageData.type,typeCode:this.pageData.typeCode,template:this.pageData.template,onlyOneRestrictionMustApply:this.pageData.onlyOneRestrictionMustApply,catalogVersion:this.pageData.catalogVersion}};ClonePageBuilder.prototype.getPageInfoStructure=function(){return this.pageInfoStructure};ClonePageBuilder.prototype.getPageRestrictions=function(){return this.pageData.restrictions||[]};ClonePageBuilder.prototype.getComponentCloneOption=function(){return this.componentCloneOption};ClonePageBuilder.prototype.displayConditionSelected=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:t=e.isPrimary;this.pageData.defaultPage=t;this.pageData.homepage=e.homepage;if(t){this.pageData.label=this.basePage.label;if(this.pageData.restrictions){delete this.pageData.restrictions}this.restrictionsStepHandler.hideStep()}else{this.pageData.label=e.primaryPage?e.primaryPage.label:"";this.restrictionsStepHandler.showStep()}this.pageData.uid="";return[4,this.updatePageInfoFields()];case 1:n.sent();return[2]}}))}))};ClonePageBuilder.prototype.onTargetCatalogVersionSelected=function(e){this.targetCatalogVersion=e;this.pageData.catalogVersion=e.uuid};ClonePageBuilder.prototype.componentCloneOptionSelected=function(e){this.componentCloneOption=e};ClonePageBuilder.prototype.restrictionsSelected=function(e,t){this.pageData.onlyOneRestrictionMustApply=e;this.pageData.restrictions=t};ClonePageBuilder.prototype.getTargetCatalogVersion=function(){return this.targetCatalogVersion};ClonePageBuilder.prototype.isBasePageInfoAvailable=function(){return this.basePageInfoAvailable};ClonePageBuilder.prototype.init=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.getPageUUID(this.basePageUUID)];case 1:e=o.sent();return[4,this.catalogService.getCatalogVersionUUid(this.uriContext)];case 2:t=o.sent();return[4,this.cmsitemsRestService.getById(e)];case 3:n=o.sent();this.basePage=s.cloneDeep(n);this.pageData=s.cloneDeep(this.basePage);this.pageData.catalogVersion=t;this.pageData.pageUuid=this.basePage.uuid;delete this.pageData.uuid;this.basePageInfoAvailable=true;this.pageData.template=this.basePage.masterTemplateId;return[4,this.typeStructureRestService.getStructureByTypeAndMode(this.pageData.typeCode,"DEFAULT",true)];case 4:i=o.sent();this.pageData.type=i.type;return[2]}}))}))};ClonePageBuilder.prototype.getPageUUID=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,!r.stringUtils.isBlank(e)?e:this.pageInfoService.getPageUUID()]}))}))};ClonePageBuilder.prototype.updatePageInfoFields=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(typeof this.pageData.defaultPage==="undefined"){return[2]}if(!this.pageData.typeCode)return[3,2];return[4,this.contextAwarePageStructureService.getPageStructureForNewPage(this.pageData.typeCode,this.pageData.defaultPage)];case 1:e=t.sent();this.pageInfoStructure=e;return[3,3];case 2:this.pageInfoStructure={};t.label=3;case 3:return[2]}}))}))};return ClonePageBuilder}();var Hi=function(){ClonePageBuilderFactory.$inject=["contextAwarePageStructureService","typeStructureRestService","cmsitemsRestService","catalogService","pageInfoService","pageService"];function ClonePageBuilderFactory(e,t,n,i,o,r){this.contextAwarePageStructureService=e;this.typeStructureRestService=t;this.cmsitemsRestService=n;this.catalogService=i;this.pageInfoService=o;this.pageService=r}ClonePageBuilderFactory.prototype.createClonePageBuilder=function(e,t,n){return new Bi(e,t,n,this.contextAwarePageStructureService,this.typeStructureRestService,this.cmsitemsRestService,this.catalogService,this.pageInfoService)};ClonePageBuilderFactory.prototype.createClonePageBuilder.$inject=["restrictionsStepHandler","basePageUUID","uriContext"];ClonePageBuilderFactory=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[ne,J,o.CmsitemsRestService,r.ICatalogService,r.IPageInfoService,o.IPageService])],ClonePageBuilderFactory);return ClonePageBuilderFactory}();window.__smartedit__.addDecoratorPayload("Component","ClonePageAlertComponent",{selector:"se-clone-page-alert",template:'\n        <se-actionable-alert\n            [description]="description"\n            [descriptionDetails]="descriptionDetails"\n            [hyperlinkLabel]="hyperlinkLabel"\n            (hyperLinkClick)="onClick()"\n        ></se-actionable-alert>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]});var Gi=function(){ClonePageAlertComponent.$inject=["alertRef","experienceService","cdr","l10n"];function ClonePageAlertComponent(e,t,n,i){this.alertRef=e;this.experienceService=t;this.cdr=n;this.l10n=i;this.description="se.cms.clonepage.alert.info.description";this.hyperlinkLabel="se.cms.clonepage.alert.info.hyperlink"}ClonePageAlertComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n;return __generator(this,(function(i){switch(i.label){case 0:n=this.alertRef.data,this.clonedPageInfo=n.clonedPageInfo,this.catalogVersion=n.catalogVersion;this.description="se.cms.clonepage.alert.info.description";e=this;t={};return[4,this.getTranslatedName(this.catalogVersion.catalogName)];case 1:e.descriptionDetails=(t.catalogName=i.sent(),t.catalogVersion=this.catalogVersion.version,t);this.hyperlinkLabel="se.cms.clonepage.alert.info.hyperlink";this.cdr.detectChanges();return[2]}}))}))};ClonePageAlertComponent.prototype.onClick=function(){if(r.stringUtils.isBlank(this.clonedPageInfo.uid)){throw new Error("ClonePageAlertService.displayClonePageAlert - missing required parameter 'uid'")}this.experienceService.loadExperience({siteId:this.catalogVersion.siteId,catalogId:this.catalogVersion.catalogId,catalogVersion:this.catalogVersion.version,pageId:this.clonedPageInfo.uid})};ClonePageAlertComponent.prototype.getTranslatedName=function(e){return this.l10n.transform(e).pipe(p.take(1)).toPromise()};ClonePageAlertComponent.prototype.getTranslatedName.$inject=["name"];ClonePageAlertComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-alert",template:'\n        <se-actionable-alert\n            [description]="description"\n            [descriptionDetails]="descriptionDetails"\n            [hyperlinkLabel]="hyperlinkLabel"\n            (hyperLinkClick)="onClick()"\n        ></se-actionable-alert>\n    ',changeDetection:a.ChangeDetectionStrategy.OnPush,providers:[r.L10nPipe]}),__metadata("design:paramtypes",[m.AlertRef,r.IExperienceService,a.ChangeDetectorRef,r.L10nPipe])],ClonePageAlertComponent);return ClonePageAlertComponent}();var Wi=function(){ClonePageAlertService.$inject=["actionableAlertService","catalogService"];function ClonePageAlertService(e,t){this.actionableAlertService=e;this.catalogService=t}ClonePageAlertService.prototype.displayClonePageAlert=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.getCatalogVersionByUuid(e.catalogVersion)];case 1:t=n.sent();return[2,this.actionableAlertService.displayActionableAlert({component:Gi,mousePersist:true,data:{catalogVersion:t,clonedPageInfo:e}})]}}))}))};ClonePageAlertService.prototype.displayClonePageAlert.$inject=["clonedPageInfo"];ClonePageAlertService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[oe,r.ICatalogService])],ClonePageAlertService);return ClonePageAlertService}();window.__smartedit__.addDecoratorPayload("Component","ClonePageOptionsStepComponent",{selector:"se-clone-page-options-step",template:'\n        <se-event-message\n            class="existing-homepage__ymessage"\n            [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n            [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"\n        >\n        </se-event-message>\n\n        <se-select-target-catalog-version\n            *ngIf="wizardApi.isBasePageInfoAvailable()"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [pageLabel]="wizardApi.getPageLabel()"\n            [uriContext]="wizardApi.uriContext"\n            (onTargetCatalogVersionSelected)="wizardApi.onTargetCatalogVersionSelected($event)"\n        >\n        </se-select-target-catalog-version>\n        <se-new-page-display-condition\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [resultFn]="wizardApi.variationResult"\n            [initialConditionSelectedKey]="\'page.displaycondition.variation\'"\n            [pageUuid]="wizardApi.getBasePageUuid()"\n            [targetCatalogVersion]="wizardApi.getTargetCatalogVersion()"\n        >\n        </se-new-page-display-condition>\n\n        <se-component-clone-option-form\n            (onSelectionChange)="wizardApi.triggerUpdateCloneOptionResult($event)"\n        ></se-component-clone-option-form>\n    '});var qi=function(){ClonePageOptionsStepComponent.$inject=["wizardApi"];function ClonePageOptionsStepComponent(e){this.wizardApi=e}ClonePageOptionsStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-options-step",template:'\n        <se-event-message\n            class="existing-homepage__ymessage"\n            [showEvent]="\'CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO\'"\n            [hideEvent]="\'CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO\'"\n        >\n        </se-event-message>\n\n        <se-select-target-catalog-version\n            *ngIf="wizardApi.isBasePageInfoAvailable()"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [pageLabel]="wizardApi.getPageLabel()"\n            [uriContext]="wizardApi.uriContext"\n            (onTargetCatalogVersionSelected)="wizardApi.onTargetCatalogVersionSelected($event)"\n        >\n        </se-select-target-catalog-version>\n        <se-new-page-display-condition\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [resultFn]="wizardApi.variationResult"\n            [initialConditionSelectedKey]="\'page.displaycondition.variation\'"\n            [pageUuid]="wizardApi.getBasePageUuid()"\n            [targetCatalogVersion]="wizardApi.getTargetCatalogVersion()"\n        >\n        </se-new-page-display-condition>\n\n        <se-component-clone-option-form\n            (onSelectionChange)="wizardApi.triggerUpdateCloneOptionResult($event)"\n        ></se-component-clone-option-form>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],ClonePageOptionsStepComponent);return ClonePageOptionsStepComponent}();window.__smartedit__.addDecoratorPayload("Component","ClonePageRestrictionsStepComponent",{selector:"se-clone-page-options-step",template:'\n        <span *ngIf="wizardApi.isRestrictionsActive()" class="se-clone-page-restriction-step">\n            <div *ngIf="wizardApi.getPageRestrictions().length > 1">\n                <se-page-restrictions-info-message></se-page-restrictions-info-message>\n            </div>\n\n            <se-restrictions-editor\n                [editable]="true"\n                [(resetFn)]="wizardApi.restrictionsEditorFunctionBindings.reset"\n                [(cancelFn)]="wizardApi.restrictionsEditorFunctionBindings.cancel"\n                [(isDirtyFn)]="wizardApi.restrictionsEditorFunctionBindings.isDirty"\n                (onRestrictionsChange)="wizardApi.restrictionsResult($event)"\n                [getRestrictionTypes]="wizardApi.getRestrictionTypes"\n                [getSupportedRestrictionTypes]="wizardApi.getSupportedRestrictionTypes"\n                [item]="wizardApi.getBasePageInfo()"\n                [restrictionUuids]="wizardApi.getPageRestrictions()"\n            >\n            </se-restrictions-editor>\n        </span>\n    '});var Ki=function(){ClonePageRestrictionsStepComponent.$inject=["wizardApi"];function ClonePageRestrictionsStepComponent(e){this.wizardApi=e}ClonePageRestrictionsStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-options-step",template:'\n        <span *ngIf="wizardApi.isRestrictionsActive()" class="se-clone-page-restriction-step">\n            <div *ngIf="wizardApi.getPageRestrictions().length > 1">\n                <se-page-restrictions-info-message></se-page-restrictions-info-message>\n            </div>\n\n            <se-restrictions-editor\n                [editable]="true"\n                [(resetFn)]="wizardApi.restrictionsEditorFunctionBindings.reset"\n                [(cancelFn)]="wizardApi.restrictionsEditorFunctionBindings.cancel"\n                [(isDirtyFn)]="wizardApi.restrictionsEditorFunctionBindings.isDirty"\n                (onRestrictionsChange)="wizardApi.restrictionsResult($event)"\n                [getRestrictionTypes]="wizardApi.getRestrictionTypes"\n                [getSupportedRestrictionTypes]="wizardApi.getSupportedRestrictionTypes"\n                [item]="wizardApi.getBasePageInfo()"\n                [restrictionUuids]="wizardApi.getPageRestrictions()"\n            >\n            </se-restrictions-editor>\n        </span>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],ClonePageRestrictionsStepComponent);return ClonePageRestrictionsStepComponent}();window.__smartedit__.addDecoratorPayload("Component","ClonePageInfoStepComponent",{selector:"se-clone-page-info-step",template:'\n        <se-component-clone-info-form\n            *ngIf="wizardApi.isPageInfoActive()"\n            [structure]="wizardApi.getPageInfoStructure()"\n            [content]="wizardApi.getPageInfo()"\n            [(submit)]="wizardApi.callbacks.savePageInfo"\n            [(reset)]="wizardApi.callbacks.resetPageInfo"\n            [(isDirty)]="wizardApi.callbacks.isDirtyPageInfo"\n            [(isValid)]="wizardApi.callbacks.isValidPageInfo"\n            [pageTemplate]="wizardApi.getPageTemplate()"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [targetCatalogVersion]="wizardApi.getTargetCatalogVersion()"\n        >\n        </se-component-clone-info-form>\n    '});var Yi=function(){ClonePageInfoStepComponent.$inject=["wizardApi"];function ClonePageInfoStepComponent(e){this.wizardApi=e}ClonePageInfoStepComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-info-step",template:'\n        <se-component-clone-info-form\n            *ngIf="wizardApi.isPageInfoActive()"\n            [structure]="wizardApi.getPageInfoStructure()"\n            [content]="wizardApi.getPageInfo()"\n            [(submit)]="wizardApi.callbacks.savePageInfo"\n            [(reset)]="wizardApi.callbacks.resetPageInfo"\n            [(isDirty)]="wizardApi.callbacks.isDirtyPageInfo"\n            [(isValid)]="wizardApi.callbacks.isValidPageInfo"\n            [pageTemplate]="wizardApi.getPageTemplate()"\n            [pageTypeCode]="wizardApi.getPageTypeCode()"\n            [uriContext]="wizardApi.uriContext"\n            [targetCatalogVersion]="wizardApi.getTargetCatalogVersion()"\n        >\n        </se-component-clone-info-form>\n    '}),__param(0,a.Inject(r.WIZARD_API)),__metadata("design:paramtypes",[Object])],ClonePageInfoStepComponent);return ClonePageInfoStepComponent}();window.__smartedit__.addDecoratorPayload("Component","ClonePageWizardComponent",{selector:"se-clone-page-wizard",template:""});var Xi=function(){ClonePageWizardComponent.$inject=["wizardManager","clonePageBuilderFactory","restrictionsStepHandlerFactory","experienceService","confirmationModalService","systemEventService","restrictionTypesService","restrictionsService","sharedDataService","clonePageAlertService","alertService","pageFacade","syncPollingService"];function ClonePageWizardComponent(e,t,n,i,o,r,a,s,c,l,d,p,u){var m=this;this.wizardManager=e;this.clonePageBuilderFactory=t;this.restrictionsStepHandlerFactory=n;this.experienceService=i;this.confirmationModalService=o;this.systemEventService=r;this.restrictionTypesService=a;this.restrictionsService=s;this.sharedDataService=c;this.clonePageAlertService=l;this.alertService=d;this.pageFacade=p;this.syncPollingService=u;this.getWizardConfig=function(){return{isFormValid:function(e){return m.isFormValid(e)},onNext:function(){return m.onNext()},onDone:function(){return m.onDone()},onCancel:function(){return m.onCancel()},steps:[{id:m.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS,name:"se.cms.clonepagewizard.pagecloneoptions.tabname",title:"se.cms.clonepagewizard.pageclone.title",component:qi},{id:m.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO,name:"se.cms.clonepagewizard.pageinfo.tabname",title:"se.cms.clonepagewizard.pageclone.title",component:Yi}]}};this.getRestrictionTypes=function(){return m.restrictionTypesService.getRestrictionTypesByPageType(m.getPageTypeCode())};this.getSupportedRestrictionTypes=function(){return m.restrictionsService.getSupportedRestrictionTypeCodes()};this.variationResult=function(e){m.infoChanged=true;m.pageBuilder.displayConditionSelected(e)};this.basePageUUID=this.wizardManager.properties.basePageUUID;this.callbacks={};this.uriContext=this.wizardManager.properties.uriContext;this.restrictionStepProperties={id:"restrictionsStepId",name:"se.cms.restrictions.editor.tab",title:"se.cms.clonepagewizard.pageclone.title",component:Ki};var g={};this.restrictionsEditorFunctionBindings=g;this.cloneInProgress=false;this.infoChanged=true;this.typeChanged=true;this.restrictionsStepHandler=this.restrictionsStepHandlerFactory.createRestrictionsStepHandler(this.wizardManager,this.restrictionsEditorFunctionBindings,this.restrictionStepProperties);this.pageBuilder=this.clonePageBuilderFactory.createClonePageBuilder(this.restrictionsStepHandler,this.basePageUUID,this.uriContext);this.pageBuilder.init();this.CLONE_PAGE_WIZARD_STEPS={PAGE_CLONE_OPTIONS:"cloneOptions",PAGE_INFO:"pageInfo",PAGE_RESTRICTIONS:this.restrictionStepProperties.id}}ClonePageWizardComponent.prototype.getPageTypeCode=function(){return this.pageBuilder.getPageTypeCode()};ClonePageWizardComponent.prototype.getPageLabel=function(){return this.pageBuilder.getPageLabel()};ClonePageWizardComponent.prototype.getBasePageUuid=function(){return this.pageBuilder.getBasePageUuid()};ClonePageWizardComponent.prototype.getPageTemplate=function(){return this.pageBuilder.getPageTemplate()};ClonePageWizardComponent.prototype.getPageInfo=function(){var e=this.pageBuilder.getPageInfo();e.uriContext=this.uriContext;return e};ClonePageWizardComponent.prototype.getBasePageInfo=function(){var e=this.pageBuilder.getBasePageInfo();e.uriContext=this.uriContext;return e};ClonePageWizardComponent.prototype.getPageRestrictions=function(){return this.pageBuilder.getPageRestrictions()};ClonePageWizardComponent.prototype.onTargetCatalogVersionSelected=function(e){this.pageBuilder.onTargetCatalogVersionSelected(e)};ClonePageWizardComponent.prototype.onTargetCatalogVersionSelected.$inject=["catalogVersion"];ClonePageWizardComponent.prototype.triggerUpdateCloneOptionResult=function(e){this.pageBuilder.componentCloneOptionSelected(e)};ClonePageWizardComponent.prototype.triggerUpdateCloneOptionResult.$inject=["cloneOptionResult"];ClonePageWizardComponent.prototype.getPageInfoStructure=function(){return this.pageBuilder.getPageInfoStructure()};ClonePageWizardComponent.prototype.restrictionsResult=function(e){this.pageBuilder.restrictionsSelected(e.onlyOneRestrictionMustApply,e.restrictionUuids)};ClonePageWizardComponent.prototype.restrictionsResult.$inject=["data"];ClonePageWizardComponent.prototype.isRestrictionsActive=function(){if(!this.typeChanged||this.wizardManager.getCurrentStepId()===this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS){this.typeChanged=false;return true}return false};ClonePageWizardComponent.prototype.isPageInfoActive=function(){if(!this.infoChanged||this.wizardManager.getCurrentStepId()===this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO){this.infoChanged=false;return true}return false};ClonePageWizardComponent.prototype.getTargetCatalogVersion=function(){return this.pageBuilder.getTargetCatalogVersion()};ClonePageWizardComponent.prototype.isBasePageInfoAvailable=function(){return this.pageBuilder.isBasePageInfoAvailable()};ClonePageWizardComponent.prototype.onCancel=function(){return this.confirmationModalService.confirm({description:"se.editor.cancel.confirm"})};ClonePageWizardComponent.prototype.isFormValid=function(e){switch(e){case this.CLONE_PAGE_WIZARD_STEPS.PAGE_CLONE_OPTIONS:return this.isBasePageInfoAvailable();case this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO:return!this.cloneInProgress&&!!this.callbacks.isValidPageInfo&&this.callbacks.isValidPageInfo();case this.CLONE_PAGE_WIZARD_STEPS.PAGE_RESTRICTIONS:return!this.cloneInProgress&&this.pageBuilder.getPageRestrictions().length>0}return false};ClonePageWizardComponent.prototype.isFormValid.$inject=["stepId"];ClonePageWizardComponent.prototype.onNext=function(){return true};ClonePageWizardComponent.prototype.onDone=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;return __generator(this,(function(o){switch(o.label){case 0:this.cloneInProgress=true;o.label=1;case 1:o.trys.push([1,5,,6]);return[4,this.callbacks.savePageInfo()];case 2:e=o.sent();t=this.preparePagePayload(e);if(this.pageBuilder.getTargetCatalogVersion()){t.siteId=this.pageBuilder.getTargetCatalogVersion().siteId;t.catalogId=this.pageBuilder.getTargetCatalogVersion().catalogId;t.version=this.pageBuilder.getTargetCatalogVersion().version}return[4,this.sharedDataService.get(r.EXPERIENCE_STORAGE_KEY)];case 3:n=o.sent();return[4,this.createPage(t,n)];case 4:o.sent();return[3,6];case 5:i=o.sent();this.cloneInProgress=false;return[2,Promise.reject()];case 6:return[2]}}))}))};ClonePageWizardComponent.prototype.createPage=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o;return __generator(this,(function(a){switch(a.label){case 0:a.trys.push([0,2,,3]);return[4,this.pageFacade.createPageForSite(e,e.siteId)];case 1:n=a.sent();this.syncPollingService.getSyncStatus(e.pageUuid,this.uriContext,true);if(t.catalogDescriptor.catalogVersionUuid===n.catalogVersion){this.experienceService.loadExperience({siteId:e.siteId,catalogId:e.catalogId,catalogVersion:e.version,pageId:n.uid})}else{this.clonePageAlertService.displayClonePageAlert(n)}return[2,this.alertService.showSuccess({message:"se.cms.clonepage.alert.success"})];case 2:i=a.sent();this.cloneInProgress=false;this.systemEventService.publishAsync(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:i.error.errors});o=i.error.errors;if(!o.find((function(e){return e.subject.indexOf("restrictions")===0}))){this.wizardManager.goToStepWithId(this.CLONE_PAGE_WIZARD_STEPS.PAGE_INFO)}return[2,Promise.reject()];case 3:return[2]}}))}))};ClonePageWizardComponent.prototype.createPage.$inject=["payload","experience"];ClonePageWizardComponent.prototype.preparePagePayload=function(e){var t=s.cloneDeep(e);s.merge(t,this.pageBuilder.getPageProperties());t.cloneComponents=this.pageBuilder.getComponentCloneOption()==="clone";t.itemtype=e.typeCode;if(t.linkComponents&&t.linkComponents.length>0){t.linkComponents=[]}if(this.isRestrictionsActive()){t.restrictions=this.pageBuilder.getPageRestrictions()}return t};ClonePageWizardComponent.prototype.preparePagePayload.$inject=["page"];ClonePageWizardComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-wizard",template:""}),__param(0,a.Inject(r.WIZARD_MANAGER)),__metadata("design:paramtypes",[r.WizardService,Hi,Ai,r.IExperienceService,r.IConfirmationModalService,r.SystemEventService,Ue,Ge,r.ISharedDataService,Wi,r.IAlertService,yn,o.ISyncPollingService])],ClonePageWizardComponent);return ClonePageWizardComponent}();var Zi=function(){ClonePageWizardService.$inject=["modalWizard","catalogService","pageFacade"];function ClonePageWizardService(e,t,n){this.modalWizard=e;this.catalogService=t;this.pageFacade=n}ClonePageWizardService.prototype.openClonePageWizard=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:if(!e)return[3,2];return[4,this.catalogService.retrieveUriContext()];case 1:n=i.sent();return[3,4];case 2:return[4,this.pageFacade.retrievePageUriContext()];case 3:n=i.sent();i.label=4;case 4:t=n;return[2,this.modalWizard.open({component:Xi,properties:{uriContext:t,basePageUUID:e?e.uuid:undefined}})]}}))}))};ClonePageWizardService.prototype.openClonePageWizard.$inject=["pageData"];ClonePageWizardService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ModalWizard,r.ICatalogService,yn])],ClonePageWizardService);return ClonePageWizardService}();window.__smartedit__.addDecoratorPayload("Component","ComponentCloneInfoFormComponent",{selector:"se-component-clone-info-form",template:'<se-message *ngIf="catalogVersionContainsPageWithSameTypeCode" type="warning"><span se-message-description translate="se.cms.clonepagewizard.pageinfo.targetcatalogversion.pagetype.exists.message" [translateParams]="{ typeCode: pageTypeCode }"></span></se-message><se-generic-editor [id]="genericEditorId" [structure]="structure" [content]="content" [(submit)]="submitInternal" [(reset)]="resetInternal" [(isDirty)]="isDirtyInternal" [(isValid)]="isValidInternal" (getApi)="setGenericEditorApi($event)"></se-generic-editor>'});var Qi=function(){ComponentCloneInfoFormComponent.$inject=["translateService","languageService","pageFacade","pageService","systemEventService"];function ComponentCloneInfoFormComponent(e,t,n,i,o){this.translateService=e;this.languageService=t;this.pageFacade=n;this.pageService=i;this.systemEventService=o;this.genericEditorId="COMPONENT_CLONE_INFO_FORM_GENERIC_ID";this.isDirtyChange=new a.EventEmitter;this.isValidChange=new a.EventEmitter;this.submitChange=new a.EventEmitter;this.resetChange=new a.EventEmitter}ComponentCloneInfoFormComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n;var i=this;return __generator(this,(function(a){switch(a.label){case 0:this.pageLabel=null;this.catalogVersionContainsPageWithSameTypeCode=false;if(!(this.pageTypeCode!=="ContentPage"&&this.targetCatalogVersion&&!this.isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)))return[3,2];e=(n={},n[r.PAGE_CONTEXT_SITE_ID]=this.targetCatalogVersion.siteId,n[o.PAGE_CONTEXT_CATALOG]=this.targetCatalogVersion.catalogId,n[o.PAGE_CONTEXT_CATALOG_VERSION]=this.targetCatalogVersion.version,n);return[4,this.pageService.primaryPageForPageTypeExists(this.pageTypeCode,e)];case 1:t=a.sent();this.catalogVersionContainsPageWithSameTypeCode=t;a.label=2;case 2:setTimeout((function(){i.isDirtyChange.emit((function(){return i.isDirtyInternal&&i.isDirtyInternal()}));i.isValidChange.emit((function(){return i.isValidInternal&&i.isValidInternal()}));i.submitChange.emit((function(){return i.submitInternal&&i.submitInternal()}));i.resetChange.emit((function(){return i.resetInternal&&i.resetInternal()}))}));this.genericEditorLoadEventUnsubscribe=this.systemEventService.subscribe(r.GENERIC_EDITOR_LOADED_EVENT,(function(e,t){return i.handleWarningMessage(t)}));return[2]}}))}))};ComponentCloneInfoFormComponent.prototype.ngOnDestroy=function(){if(this.genericEditorLoadEventUnsubscribe){this.genericEditorLoadEventUnsubscribe()}};ComponentCloneInfoFormComponent.prototype.setGenericEditorApi=function(e){var t=this;this.pageInfoEditorApi=e;if(this.targetCatalogVersion&&!this.isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)){this.pageInfoEditorApi.getLanguages=function(){return t.languageService.getLanguagesForSite(t.targetCatalogVersion.siteId)}}};ComponentCloneInfoFormComponent.prototype.setGenericEditorApi.$inject=["api"];ComponentCloneInfoFormComponent.prototype.isUriContextEqualToCatalogVersion=function(e,t){return e&&t&&t.siteId===e.CURRENT_CONTEXT_SITE_ID&&t.catalogId===e.CURRENT_CONTEXT_CATALOG&&t.version===e.CURRENT_CONTEXT_CATALOG_VERSION};ComponentCloneInfoFormComponent.prototype.isUriContextEqualToCatalogVersion.$inject=["uriContext","catalogVersion"];ComponentCloneInfoFormComponent.prototype.handleWarningMessage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(e!==this.genericEditorId){return[2]}if(!(this.pageTypeCode==="ContentPage"&&this.targetCatalogVersion&&this.pageInfoEditorApi&&!this.isUriContextEqualToCatalogVersion(this.uriContext,this.targetCatalogVersion)))return[3,2];t=this.pageInfoEditorApi.getContent();if(!(t&&t.label!==this.pageLabel))return[3,2];this.pageLabel=t.label;return[4,this.toggleWarningMessage()];case 1:n.sent();n.label=2;case 2:return[2]}}))}))};ComponentCloneInfoFormComponent.prototype.handleWarningMessage.$inject=["editorId"];ComponentCloneInfoFormComponent.prototype.toggleWarningMessage=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageFacade.contentPageWithLabelExists(this.pageLabel,this.targetCatalogVersion.catalogId,this.targetCatalogVersion.version)];case 1:e=t.sent();if(e){this.systemEventService.publishAsync(r.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT,{messages:[{subject:"label",message:this.translateService.instant("se.cms.clonepagewizard.pageinfo.targetcatalogversion.label.exists.message"),type:"Warning"}]})}else{this.pageInfoEditorApi.clearMessages()}return[2]}}))}))};__decorate([a.Input(),__metadata("design:type",Object)],ComponentCloneInfoFormComponent.prototype,"content",void 0);__decorate([a.Input(),__metadata("design:type",String)],ComponentCloneInfoFormComponent.prototype,"pageTemplate",void 0);__decorate([a.Input(),__metadata("design:type",String)],ComponentCloneInfoFormComponent.prototype,"pageTypeCode",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ComponentCloneInfoFormComponent.prototype,"structure",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ComponentCloneInfoFormComponent.prototype,"targetCatalogVersion",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ComponentCloneInfoFormComponent.prototype,"uriContext",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ComponentCloneInfoFormComponent.prototype,"submit",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ComponentCloneInfoFormComponent.prototype,"reset",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ComponentCloneInfoFormComponent.prototype,"isDirty",void 0);__decorate([a.Input(),__metadata("design:type",Function)],ComponentCloneInfoFormComponent.prototype,"isValid",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ComponentCloneInfoFormComponent.prototype,"isDirtyChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ComponentCloneInfoFormComponent.prototype,"isValidChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ComponentCloneInfoFormComponent.prototype,"submitChange",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ComponentCloneInfoFormComponent.prototype,"resetChange",void 0);ComponentCloneInfoFormComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-component-clone-info-form",template:'<se-message *ngIf="catalogVersionContainsPageWithSameTypeCode" type="warning"><span se-message-description translate="se.cms.clonepagewizard.pageinfo.targetcatalogversion.pagetype.exists.message" [translateParams]="{ typeCode: pageTypeCode }"></span></se-message><se-generic-editor [id]="genericEditorId" [structure]="structure" [content]="content" [(submit)]="submitInternal" [(reset)]="resetInternal" [(isDirty)]="isDirtyInternal" [(isValid)]="isValidInternal" (getApi)="setGenericEditorApi($event)"></se-generic-editor>'}),__metadata("design:paramtypes",[d.TranslateService,r.LanguageService,yn,o.IPageService,r.SystemEventService])],ComponentCloneInfoFormComponent);return ComponentCloneInfoFormComponent}();window.__smartedit__.addDecoratorPayload("Component","ComponentCloneOptionFormComponent",{selector:"se-component-clone-option-form",template:'<label for="components-cloned-selector-id" class="se-control-label"><span translate="se.cms.clonepagewizard.options.title"></span><se-help><span translate="se.cms.clonepagewizard.options.tooltip"></span></se-help></label><div id="components-cloned-selector-id"><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" name="componentsclone" id="reference-cloning" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING"/> <label for="reference-cloning" translate="se.cms.clonepagewizard.options.existing"></label></div><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" id="deep-cloning" name="componentsclone" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE"/> <label for="deep-cloning" translate="se.cms.clonepagewizard.options.copies"></label></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var Ji=function(){function ComponentCloneOptionFormComponent(){this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION={REFERENCE_EXISTING:"reference",CLONE:"clone"};this.onSelectionChange=new a.EventEmitter}ComponentCloneOptionFormComponent.prototype.ngOnInit=function(){this.componentInSlotOption=this.CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING;this.onSelectionChange.emit(this.componentInSlotOption)};ComponentCloneOptionFormComponent.prototype.updateComponentInSlotOption=function(e){this.onSelectionChange.emit(e)};ComponentCloneOptionFormComponent.prototype.updateComponentInSlotOption.$inject=["option"];__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ComponentCloneOptionFormComponent.prototype,"onSelectionChange",void 0);ComponentCloneOptionFormComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-component-clone-option-form",template:'<label for="components-cloned-selector-id" class="se-control-label"><span translate="se.cms.clonepagewizard.options.title"></span><se-help><span translate="se.cms.clonepagewizard.options.tooltip"></span></se-help></label><div id="components-cloned-selector-id"><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" name="componentsclone" id="reference-cloning" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.REFERENCE_EXISTING"/> <label for="reference-cloning" translate="se.cms.clonepagewizard.options.existing"></label></div><div class="se-form-control-row"><input class="components-cloned-option-id fd-form__control" type="radio" id="deep-cloning" name="componentsclone" [(ngModel)]="componentInSlotOption" (click)="updateComponentInSlotOption(CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE)" [value]="CLONE_COMPONENTS_IN_CONTENT_SLOTS_OPTION.CLONE"/> <label for="deep-cloning" translate="se.cms.clonepagewizard.options.copies"></label></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[])],ComponentCloneOptionFormComponent);return ComponentCloneOptionFormComponent}();window.__smartedit__.addDecoratorPayload("Component","DisplayConditionsPageInfoComponent",{selector:"se-display-conditions-page-info",template:'<div class="se-edit-page-info__display-conditions"><div class="se-edit-page-info-display-conditions__basic-info"><div><label class="se-control-label" translate="se.cms.pagelist.headerpagename"></label><div class="form-readonly-text form-readonly-text__tight dc-page-name">{{ pageName }}</div></div><div><label class="se-control-label" translate="se.cms.pagelist.headerpagetype"></label><div class="form-readonly-text form-readonly-text__tight dc-page-type">{{ pageType }}</div></div></div><label class="se-control-label"><span translate="se.cms.display.conditions.label"></span><se-help><span [translate]="getPageDisplayConditionDescriptionI18nKey()"></span></se-help></label><p class="form-readonly-text form-readonly-text__tight dc-page-display-condition" [translate]="getPageDisplayConditionI18nKey()"></p></div>',styles:[".se-edit-page-info__display-conditions{margin-bottom:16px}.se-edit-page-info-display-conditions__basic-info{display:grid;grid-template-columns:repeat(2,1fr);margin-bottom:16px}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var eo=function(){function DisplayConditionsPageInfoComponent(){}DisplayConditionsPageInfoComponent.prototype.getPageDisplayConditionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.id":"se.cms.display.conditions.variation.id"};DisplayConditionsPageInfoComponent.prototype.getPageDisplayConditionDescriptionI18nKey=function(){return this.isPrimary?"se.cms.display.conditions.primary.description":"se.cms.display.conditions.variation.description"};__decorate([a.Input(),__metadata("design:type",Boolean)],DisplayConditionsPageInfoComponent.prototype,"isPrimary",void 0);__decorate([a.Input(),__metadata("design:type",String)],DisplayConditionsPageInfoComponent.prototype,"pageName",void 0);__decorate([a.Input(),__metadata("design:type",String)],DisplayConditionsPageInfoComponent.prototype,"pageType",void 0);DisplayConditionsPageInfoComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-display-conditions-page-info",template:'<div class="se-edit-page-info__display-conditions"><div class="se-edit-page-info-display-conditions__basic-info"><div><label class="se-control-label" translate="se.cms.pagelist.headerpagename"></label><div class="form-readonly-text form-readonly-text__tight dc-page-name">{{ pageName }}</div></div><div><label class="se-control-label" translate="se.cms.pagelist.headerpagetype"></label><div class="form-readonly-text form-readonly-text__tight dc-page-type">{{ pageType }}</div></div></div><label class="se-control-label"><span translate="se.cms.display.conditions.label"></span><se-help><span [translate]="getPageDisplayConditionDescriptionI18nKey()"></span></se-help></label><p class="form-readonly-text form-readonly-text__tight dc-page-display-condition" [translate]="getPageDisplayConditionI18nKey()"></p></div>',styles:[".se-edit-page-info__display-conditions{margin-bottom:16px}.se-edit-page-info-display-conditions__basic-info{display:grid;grid-template-columns:repeat(2,1fr);margin-bottom:16px}"],changeDetection:a.ChangeDetectionStrategy.OnPush})],DisplayConditionsPageInfoComponent);return DisplayConditionsPageInfoComponent}();window.__smartedit__.addDecoratorPayload("Component","CreationDateRendererComponent",{selector:"se-creation-date-renderer",template:"<span>{{ item.creationDate | date: 'short' }}</span>"});var to=function(){CreationDateRendererComponent.$inject=["cellData"];function CreationDateRendererComponent(e){this.cellData=e;this.item=this.cellData.item}CreationDateRendererComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-creation-date-renderer",template:"<span>{{ item.creationDate | date: 'short' }}</span>"}),__param(0,a.Inject(r.CLIENT_PAGED_LIST_CELL_COMPONENT_DATA_TOKEN)),__metadata("design:paramtypes",[Object])],CreationDateRendererComponent);return CreationDateRendererComponent}();window.__smartedit__.addDecoratorPayload("Component","DisplayConditionsPageVariationsComponent",{selector:"se-display-conditions-page-variations",template:'<div class="form-group dc-page-variations"><label class="se-control-label control-label__margin"><span translate="se.cms.display.conditions.variation.pages.title"></span><se-help *ngIf="variations.length > 0"><span translate="se.cms.display.conditions.variations.description"></span></se-help></label><div *ngIf="variations.length === 0" class="dc-no-variations form-readonly-text form-readonly-text__tight form-readonly-text__inline" translate="se.cms.display.conditions.no.variations"></div><div *ngIf="variations.length > 0"><se-client-paged-list [items]="variations" [keys]="keys" [itemsPerPage]="itemsPerPage" class="dc-page-variations-list"></se-client-paged-list></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var no=function(){function DisplayConditionsPageVariationsComponent(){this.itemsPerPage=3;this.keys=[{property:"pageName",i18n:"se.cms.display.conditions.header.page.name"},{property:"creationDate",i18n:"se.cms.display.conditions.header.creation.date",component:to},{property:"restrictions",i18n:"se.cms.display.conditions.header.restrictions"}]}__decorate([a.Input(),__metadata("design:type",Array)],DisplayConditionsPageVariationsComponent.prototype,"variations",void 0);DisplayConditionsPageVariationsComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-display-conditions-page-variations",template:'<div class="form-group dc-page-variations"><label class="se-control-label control-label__margin"><span translate="se.cms.display.conditions.variation.pages.title"></span><se-help *ngIf="variations.length > 0"><span translate="se.cms.display.conditions.variations.description"></span></se-help></label><div *ngIf="variations.length === 0" class="dc-no-variations form-readonly-text form-readonly-text__tight form-readonly-text__inline" translate="se.cms.display.conditions.no.variations"></div><div *ngIf="variations.length > 0"><se-client-paged-list [items]="variations" [keys]="keys" [itemsPerPage]="itemsPerPage" class="dc-page-variations-list"></se-client-paged-list></div></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[])],DisplayConditionsPageVariationsComponent);return DisplayConditionsPageVariationsComponent}();window.__smartedit__.addDecoratorPayload("Component","DisplayConditionsPrimaryPageComponent",{selector:"se-display-conditions-primary-page",template:'<div class="form-group form-group__inline"><label class="se-control-label control-label__margin" translate="se.cms.display.conditions.primary.page.label"></label><div *ngIf="readOnly" class="dc-associated-primary-page form-readonly-text form-readonly-text__tight">{{ associatedPrimaryPage?.name }}</div><div *ngIf="!readOnly"><se-select id="display-conditions-primary-association-selector" [model]="associatedPrimaryPageUid" (modelChange)="associatedPrimaryPageUidOnChange($event)" [fetchStrategy]="fetchStrategy"></se-select><span *ngIf="associatedPrimaryPage?.name" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ associatedPrimaryPage.label }}</span></span></div></div>'});var io=function(){DisplayConditionsPrimaryPageComponent.$inject=["pageService","displayConditionsFacade"];function DisplayConditionsPrimaryPageComponent(e,t){var n=this;this.pageService=e;this.displayConditionsFacade=t;this.associatedPrimaryPageUid=null;this.onPrimaryPageSelect=new a.EventEmitter;this.fetchStrategy={fetchEntity:function(){return Promise.resolve({id:n.associatedPrimaryPage.uid,label:n.associatedPrimaryPage.name})},fetchPage:function(e,t,i){return n.displayConditionsFacade.getPrimaryPagesForPageType(n.pageType,null,{search:e,pageSize:t,currentPage:i})}}}DisplayConditionsPrimaryPageComponent.prototype.ngOnChanges=function(e){var t=e.associatedPrimaryPage;if(t&&!!t.currentValue){this.setAssociatedPrimaryPageSelected(t.currentValue)}};DisplayConditionsPrimaryPageComponent.prototype.ngOnChanges.$inject=["changes"];DisplayConditionsPrimaryPageComponent.prototype.associatedPrimaryPageUidOnChange=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pageService.getPageById(e)];case 1:t=n.sent();this.setAssociatedPrimaryPageSelected(t);this.onPrimaryPageSelect.emit(this.associatedPrimaryPage);return[2]}}))}))};DisplayConditionsPrimaryPageComponent.prototype.associatedPrimaryPageUidOnChange.$inject=["uid"];DisplayConditionsPrimaryPageComponent.prototype.setAssociatedPrimaryPageSelected=function(e){this.associatedPrimaryPage=e;this.associatedPrimaryPageUid=e.uid};DisplayConditionsPrimaryPageComponent.prototype.setAssociatedPrimaryPageSelected.$inject=["page"];__decorate([a.Input(),__metadata("design:type",Boolean)],DisplayConditionsPrimaryPageComponent.prototype,"readOnly",void 0);__decorate([a.Input(),__metadata("design:type",Object)],DisplayConditionsPrimaryPageComponent.prototype,"associatedPrimaryPage",void 0);__decorate([a.Input(),__metadata("design:type",String)],DisplayConditionsPrimaryPageComponent.prototype,"pageType",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],DisplayConditionsPrimaryPageComponent.prototype,"onPrimaryPageSelect",void 0);DisplayConditionsPrimaryPageComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-display-conditions-primary-page",template:'<div class="form-group form-group__inline"><label class="se-control-label control-label__margin" translate="se.cms.display.conditions.primary.page.label"></label><div *ngIf="readOnly" class="dc-associated-primary-page form-readonly-text form-readonly-text__tight">{{ associatedPrimaryPage?.name }}</div><div *ngIf="!readOnly"><se-select id="display-conditions-primary-association-selector" [model]="associatedPrimaryPageUid" (modelChange)="associatedPrimaryPageUidOnChange($event)" [fetchStrategy]="fetchStrategy"></se-select><span *ngIf="associatedPrimaryPage?.name" class="se-form-help-message"><span>{{ \'se.cms.page.label.label\' | translate }}: {{ associatedPrimaryPage.label }}</span></span></div></div>'}),__metadata("design:paramtypes",[o.IPageService,B])],DisplayConditionsPrimaryPageComponent);return DisplayConditionsPrimaryPageComponent}();window.__smartedit__.addDecoratorPayload("Component","HomepageIconComponent",{selector:"se-homepage-icon",template:'<se-tooltip *ngIf="isVisible()" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><span se-tooltip-trigger class="sap-icon--home se-homepage-icon" [ngClass]="getIconClass()"></span> <span se-tooltip-body [translate]="getTooltipMessage()"></span></se-tooltip>',styles:[".se-homepage-icon{margin-right:4px}.se-homepage-icon--current{color:#0a6ed1}.se-homepage-icon--old{color:#32363a}"],changeDetection:a.ChangeDetectionStrategy.OnPush});var oo=function(){HomepageIconComponent.$inject=["homepageService","cdr"];function HomepageIconComponent(e,t){this.homepageService=e;this.cdr=t}HomepageIconComponent.prototype.ngOnChanges=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:if(!this.cmsPage&&!this.uriContext){return[2]}e=this;return[4,this.homepageService.getHomepageType(this.cmsPage,this.uriContext)];case 1:e.type=t.sent();this.cdr.detectChanges();return[2]}}))}))};HomepageIconComponent.prototype.isVisible=function(){return!!this.type};HomepageIconComponent.prototype.getIconClass=function(){return{"se-homepage-icon--current":this.type===t.HomepageType.CURRENT,"se-homepage-icon--old":this.type===t.HomepageType.OLD}};HomepageIconComponent.prototype.getTooltipMessage=function(){var e=this.getHomepageState(this.type);return"se.cms.homepage.tooltip.message."+e};HomepageIconComponent.prototype.getHomepageState=function(e){return t.HomepageType.CURRENT===e?"current":"previous"};HomepageIconComponent.prototype.getHomepageState.$inject=["type"];__decorate([a.Input(),__metadata("design:type",Object)],HomepageIconComponent.prototype,"cmsPage",void 0);__decorate([a.Input(),__metadata("design:type",Object)],HomepageIconComponent.prototype,"uriContext",void 0);HomepageIconComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-homepage-icon",template:'<se-tooltip *ngIf="isVisible()" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><span se-tooltip-trigger class="sap-icon--home se-homepage-icon" [ngClass]="getIconClass()"></span> <span se-tooltip-body [translate]="getTooltipMessage()"></span></se-tooltip>',styles:[".se-homepage-icon{margin-right:4px}.se-homepage-icon--current{color:#0a6ed1}.se-homepage-icon--old{color:#32363a}"],changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[q,a.ChangeDetectorRef])],HomepageIconComponent);return HomepageIconComponent}();window.__smartedit__.addDecoratorPayload("Component","RestorePageItemComponent",{selector:"se-restore-page-item",template:'<div *seHasOperationPermission="restorePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="restorePage()"><span [translate]="\'se.cms.actionitem.page.restore\'"></span></a></div>'});var ro=function(){RestorePageItemComponent.$inject=["managePageService","dropdownMenuData"];function RestorePageItemComponent(e,t){this.managePageService=e;this.dropdownMenuData=t}RestorePageItemComponent.prototype.ngOnInit=function(){this.pageInfo=this.dropdownMenuData.selectedItem;this.restorePagePermission=[{names:["se.restore.page.type"],context:{typeCode:this.pageInfo.typeCode}}]};RestorePageItemComponent.prototype.restorePage=function(){this.managePageService.restorePage(this.pageInfo)};RestorePageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restore-page-item",template:'<div *seHasOperationPermission="restorePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="restorePage()"><span [translate]="\'se.cms.actionitem.page.restore\'"></span></a></div>'}),__param(1,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[_n,Object])],RestorePageItemComponent);return RestorePageItemComponent}();window.__smartedit__.addDecoratorPayload("Component","UpdatePageStatusComponent",{selector:"se-update-page-status",template:'<div *ngIf="showButton"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnSync()"><span [translate]="\'se.cms.actionitem.page.sync\'"></span></a></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var ao=function(){UpdatePageStatusComponent.$inject=["cdr","managePageService","cmsitemsRestService","catalogService","crossFrameEventService","dropdownMenuData"];function UpdatePageStatusComponent(e,t,n,i,o,r){this.cdr=e;this.managePageService=t;this.cmsitemsRestService=n;this.catalogService=i;this.crossFrameEventService=o;this.dropdownMenuData=r;this.showButton=false}UpdatePageStatusComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.pageInfo=this.dropdownMenuData.selectedItem;return[4,this.setButtonVisibility()];case 1:e.sent();return[2]}}))}))};UpdatePageStatusComponent.prototype.onClickOnSync=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.managePageService.trashPageInActiveCatalogVersion(this.pageInfo.uid)];case 1:e.sent();this.crossFrameEventService.publish(o.EVENT_PAGE_STATUS_UPDATED_IN_ACTIVE_CV);return[2]}}))}))};UpdatePageStatusComponent.prototype.setButtonVisibility=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.doesPageExistInActiveCatalogVersion()];case 1:e.showButton=t.sent();this.cdr.detectChanges();return[2]}}))}))};UpdatePageStatusComponent.prototype.doesPageExistInActiveCatalogVersion=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=i.sent();return[4,this.catalogService.getContentCatalogActiveVersion(e)];case 2:t=i.sent();return[4,this.cmsitemsRestService.get({pageSize:1,currentPage:0,typeCode:"AbstractPage",fields:"BASIC",itemSearchParams:"uid:"+this.pageInfo.uid,catalogId:e.CONTEXT_CATALOG,catalogVersion:t})];case 3:n=i.sent();return[2,n.pagination.totalCount===1]}}))}))};UpdatePageStatusComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-update-page-status",template:'<div *ngIf="showButton"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnSync()"><span [translate]="\'se.cms.actionitem.page.sync\'"></span></a></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(5,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[a.ChangeDetectorRef,_n,o.CmsitemsRestService,r.ICatalogService,r.CrossFrameEventService,Object])],UpdatePageStatusComponent);return UpdatePageStatusComponent}();window.__smartedit__.addDecoratorPayload("Component","PermanentlyDeletePageItemComponent",{selector:"se-permanently-delete-page-item",template:'<div *seHasOperationPermission="permanentlyDeletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': isDeleteButtonDisabled()}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': isDeleteButtonDisabled()}" (click)="permanentlyDelete()"><span [translate]="\'se.cms.actionitem.page.permanently.delete\'"></span></a></div><se-tooltip class="se-dropdown-item__delete-page-popover" *ngIf="isDeleteButtonDisabled()" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span> <span se-tooltip-body [translate]="\'se.cms.actionitem.page.permanently.delete.blocked\'"></span></se-tooltip></div></div>',styles:[".se-dropdown-item__delete-wrapper{display:flex;flex-direction:row;align-items:center;width:100%}.se-dropdown-item__delete-page-popover{margin-right:16px}.se-dropdown-item__delete-page-popover .sap-icon--message-error{color:#0a6ed1}.se-dropdown-item__delete-link-wrapper{width:100%}.se-dropdown-item__delete-link-wrapper--disabled{cursor:not-allowed}"]});var so=function(){PermanentlyDeletePageItemComponent.$inject=["managePageService","cmsitemsRestService","catalogService","crossFrameEventService","dropdownMenuData"];function PermanentlyDeletePageItemComponent(e,t,n,i,o){this.managePageService=e;this.cmsitemsRestService=t;this.catalogService=n;this.crossFrameEventService=i;this.dropdownMenuData=o;this.isDeletable=false}PermanentlyDeletePageItemComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.pageInfo=this.dropdownMenuData.selectedItem;this.permanentlyDeletePagePermission=[{names:["se.permanently.delete.page.type"],context:{typeCode:this.pageInfo.typeCode}}];this.unregPageSyncStatusUpdate=this.crossFrameEventService.subscribe(o.EVENT_PAGE_STATUS_UPDATED_IN_ACTIVE_CV,this.fetchPageDeletableConditions.bind(this));return[4,this.fetchPageDeletableConditions()];case 1:e.sent();return[2]}}))}))};PermanentlyDeletePageItemComponent.prototype.ngOnDestroy=function(){this.unregPageSyncStatusUpdate()};PermanentlyDeletePageItemComponent.prototype.permanentlyDelete=function(){if(this.isDeletable){this.managePageService.hardDeletePage(this.pageInfo)}};PermanentlyDeletePageItemComponent.prototype.isDeleteButtonDisabled=function(){return!this.isDeletable};PermanentlyDeletePageItemComponent.prototype.fetchPageDeletableConditions=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=i.sent();return[4,this.catalogService.getContentCatalogActiveVersion(e)];case 2:t=i.sent();return[4,this.cmsitemsRestService.get({pageSize:1,currentPage:0,typeCode:"AbstractPage",fields:"BASIC",itemSearchParams:"uid:"+this.pageInfo.uid,catalogId:e.CURRENT_CONTEXT_CATALOG,catalogVersion:t})];case 3:n=i.sent();this.isDeletable=n.pagination.totalCount===0||n.response[0].pageStatus===o.CMSPageStatus.DELETED;return[2]}}))}))};PermanentlyDeletePageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-permanently-delete-page-item",template:'<div *seHasOperationPermission="permanentlyDeletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': isDeleteButtonDisabled()}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': isDeleteButtonDisabled()}" (click)="permanentlyDelete()"><span [translate]="\'se.cms.actionitem.page.permanently.delete\'"></span></a></div><se-tooltip class="se-dropdown-item__delete-page-popover" *ngIf="isDeleteButtonDisabled()" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span> <span se-tooltip-body [translate]="\'se.cms.actionitem.page.permanently.delete.blocked\'"></span></se-tooltip></div></div>',styles:[".se-dropdown-item__delete-wrapper{display:flex;flex-direction:row;align-items:center;width:100%}.se-dropdown-item__delete-page-popover{margin-right:16px}.se-dropdown-item__delete-page-popover .sap-icon--message-error{color:#0a6ed1}.se-dropdown-item__delete-link-wrapper{width:100%}.se-dropdown-item__delete-link-wrapper--disabled{cursor:not-allowed}"]}),__param(4,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[_n,o.CmsitemsRestService,r.ICatalogService,r.CrossFrameEventService,Object])],PermanentlyDeletePageItemComponent);return PermanentlyDeletePageItemComponent}();window.__smartedit__.addDecoratorPayload("Component","EditPageItemComponent",{selector:"se-edit-page-item",template:'<div *seHasOperationPermission="editPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnEdit()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.edit"></span></a></div>'});var co=function(){EditPageItemComponent.$inject=["dropdownMenuData","pageInfoMenuService"];function EditPageItemComponent(e,t){this.dropdownMenuData=e;this.pageInfoMenuService=t}EditPageItemComponent.prototype.ngOnInit=function(){this.pageInfo=this.dropdownMenuData.selectedItem;this.editPagePermission=[{names:["se.edit.page.type"],context:{typeCode:this.pageInfo.typeCode}},{names:["se.act.on.page.in.workflow"],context:{pageInfo:this.pageInfo}}]};EditPageItemComponent.prototype.onClickOnEdit=function(){return this.pageInfoMenuService.openPageEditor(this.pageInfo)};EditPageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-edit-page-item",template:'<div *seHasOperationPermission="editPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnEdit()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.edit"></span></a></div>'}),__param(0,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[Object,Nn])],EditPageItemComponent);return EditPageItemComponent}();window.__smartedit__.addDecoratorPayload("Component","ClonePageItemComponent",{selector:"se-clone-page-item",template:'<div *seHasOperationPermission="clonePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnClone()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.clone"></span></a></div>'});var lo=function(){ClonePageItemComponent.$inject=["dropdownMenuData","clonePageWizardService"];function ClonePageItemComponent(e,t){this.dropdownMenuData=e;this.clonePageWizardService=t}ClonePageItemComponent.prototype.ngOnInit=function(){this.pageInfo=this.dropdownMenuData.selectedItem;this.clonePagePermission=[{names:["se.clone.page.type"],context:{typeCode:this.pageInfo.typeCode}}]};ClonePageItemComponent.prototype.onClickOnClone=function(){this.clonePageWizardService.openClonePageWizard(this.pageInfo)};ClonePageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-clone-page-item",template:'<div *seHasOperationPermission="clonePagePermission"><a class="se-dropdown-item fd-menu__item" (click)="onClickOnClone()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.clone"></span></a></div>'}),__param(0,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[Object,Zi])],ClonePageItemComponent);return ClonePageItemComponent}();window.__smartedit__.addDecoratorPayload("Component","DeletePageItemComponent",{selector:"se-delete-page-item",template:'<div *seHasOperationPermission="deletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': !isDeletePageEnabled}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': !isDeletePageEnabled}" (click)="isDeletePageEnabled && onClickOnDeletePage()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.trash"></span></a></div><se-tooltip *ngIf="!isDeletePageEnabled" class="se-dropdown-item__delete-page-popover" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span><div se-tooltip-body class="popover-tooltip"><span [translate]="tooltipMessage"></span></div></se-tooltip></div></div>',styles:[".se-dropdown-item__delete-wrapper{display:flex;flex-direction:row;align-items:center;width:100%}.se-dropdown-item__delete-page-popover{margin-right:16px}.se-dropdown-item__delete-page-popover .sap-icon--message-error{color:#0a6ed1}.se-dropdown-item__delete-link-wrapper{width:100%}.se-dropdown-item__delete-link-wrapper--disabled{cursor:not-allowed}"]});var po=function(){DeletePageItemComponent.$inject=["dropdownMenuData","managePageService","systemEventService","catalogService"];function DeletePageItemComponent(e,t,n,i){this.dropdownMenuData=e;this.managePageService=t;this.systemEventService=n;this.catalogService=i;this.isDeletePageEnabled=false;this.tooltipMessage="se.cms.tooltip.movetotrash"}DeletePageItemComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.pageInfo=this.dropdownMenuData.selectedItem;return[4,this.getDisableDeleteTooltipMessage()];case 1:e.sent();this.setDeletePermissions();return[2]}}))}))};DeletePageItemComponent.prototype.onClickOnDeletePage=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=t.sent();return[4,this.managePageService.softDeletePage(this.pageInfo,e)];case 2:t.sent();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE);return[2]}}))}))};DeletePageItemComponent.prototype.setDeletePermissions=function(){this.deletePagePermission=[{names:["se.delete.page.type"],context:{typeCode:this.pageInfo.typeCode}},{names:["se.act.on.page.in.workflow"],context:{pageInfo:this.pageInfo}}]};DeletePageItemComponent.prototype.getDisableDeleteTooltipMessage=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=i.sent();return[4,this.managePageService.isPageTrashable(this.pageInfo,e)];case 2:t=i.sent();this.isDeletePageEnabled=t;if(this.isDeletePageEnabled){this.tooltipMessage=null;return[2]}n=this;return[4,this.managePageService.getDisabledTrashTooltipMessage(this.pageInfo,e)];case 3:n.tooltipMessage=i.sent();return[2]}}))}))};DeletePageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-delete-page-item",template:'<div *seHasOperationPermission="deletePagePermission"><div class="se-dropdown-item__delete-wrapper"><div class="se-dropdown-item__delete-link-wrapper" [ngClass]="{\'se-dropdown-item__delete-link-wrapper--disabled\': !isDeletePageEnabled}"><a class="se-dropdown-item se-dropdown-item__delete fd-menu__item" [ngClass]="{\'se-dropdown-item--disabled\': !isDeletePageEnabled}" (click)="isDeletePageEnabled && onClickOnDeletePage()"><span class="se-dropdown-item--label" translate="se.cms.actionitem.page.trash"></span></a></div><se-tooltip *ngIf="!isDeletePageEnabled" class="se-dropdown-item__delete-page-popover" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [isChevronVisible]="true" [appendTo]="\'body\'"><span se-tooltip-trigger class="sap-icon--message-error"></span><div se-tooltip-body class="popover-tooltip"><span [translate]="tooltipMessage"></span></div></se-tooltip></div></div>',styles:[".se-dropdown-item__delete-wrapper{display:flex;flex-direction:row;align-items:center;width:100%}.se-dropdown-item__delete-page-popover{margin-right:16px}.se-dropdown-item__delete-page-popover .sap-icon--message-error{color:#0a6ed1}.se-dropdown-item__delete-link-wrapper{width:100%}.se-dropdown-item__delete-link-wrapper--disabled{cursor:not-allowed}"]}),__param(0,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[Object,_n,r.SystemEventService,r.ICatalogService])],DeletePageItemComponent);return DeletePageItemComponent}();window.__smartedit__.addDecoratorPayload("Component","SyncPageItemComponent",{selector:"se-sync-page-item",template:'<div *seHasOperationPermission="syncPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="sync()" translate="se.cms.actionitem.page.sync"></a></div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var uo=function(){SyncPageItemComponent.$inject=["dropdownMenuData","catalogService","systemEventService","modalService","logService"];function SyncPageItemComponent(e,t,n,i,o){this.dropdownMenuData=e;this.catalogService=t;this.systemEventService=n;this.modalService=i;this.logService=o}SyncPageItemComponent.prototype.ngOnInit=function(){this.pageInfo=this.dropdownMenuData.selectedItem;this.syncPagePermission=[{names:["se.act.on.page.in.workflow"],context:{pageInfo:this.pageInfo}}]};SyncPageItemComponent.prototype.sync=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=n.sent();n.label=2;case 2:n.trys.push([2,4,,5]);return[4,this.modalService.open({component:jn,templateConfig:{title:"se.cms.synchronization.pagelist.modal.title.prefix",titleSuffix:"se.cms.pageeditormodal.editpagetab.title"},config:{modalPanelClass:"modal-md"},data:{cmsPage:this.pageInfo,uriContext:e}}).afterClosed.toPromise()];case 3:n.sent();this.systemEventService.publishAsync(r.EVENT_CONTENT_CATALOG_UPDATE);return[3,5];case 4:t=n.sent();this.logService.debug("Page Synchronization Panel Modal dismissed",t);return[3,5];case 5:return[2]}}))}))};SyncPageItemComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-sync-page-item",template:'<div *seHasOperationPermission="syncPagePermission"><a class="se-dropdown-item fd-menu__item" (click)="sync()" translate="se.cms.actionitem.page.sync"></a></div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(0,a.Inject(r.DROPDOWN_MENU_ITEM_DATA)),__metadata("design:paramtypes",[Object,r.ICatalogService,r.SystemEventService,r.IModalService,r.LogService])],SyncPageItemComponent);return SyncPageItemComponent}();var mo=function(){AddPageWizardService.$inject=["modalWizard","catalogService"];function AddPageWizardService(e,t){this.modalWizard=e;this.catalogService=t}AddPageWizardService.prototype.openAddPageWizard=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.catalogService.retrieveUriContext()];case 1:e=t.sent();return[2,this.modalWizard.open({component:Ni,properties:{uriContext:e}})]}}))}))};AddPageWizardService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.ModalWizard,r.ICatalogService])],AddPageWizardService);return AddPageWizardService}();window.__smartedit__.addDecoratorPayload("Component","TrashListDropdownItemsWrapperComponent",{selector:"se-trash-list-dropdown-items-wrapper",template:'<div\n        *seHasOperationPermission="\'se.edit.page\'"\n        class="paged-list-table__body__td paged-list-table__body__td-menu"\n    >\n        <se-dropdown-menu\n            [dropdownItems]="dropdownItems"\n            [selectedItem]="item"\n            class="pull-right"\n        ></se-dropdown-menu>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var go=function(){function TrashListDropdownItemsWrapperComponent(e,t,n,i){this.route=e;this.data=t;this.catalogVersionPermissionService=n;this.cdr=i;this.dropdownItems=[];this.loaded=false}TrashListDropdownItemsWrapperComponent.prototype.ngOnInit=function(){return this.setDropdownItems()};TrashListDropdownItemsWrapperComponent.prototype.setDropdownItems=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.item=this.data.item;return[4,this.catalogVersionPermissionService.hasSyncPermissionToActiveCatalogVersion(this.route.snapshot.params.catalogId,this.route.snapshot.params.catalogVersion)];case 1:e=t.sent();this.addDropdownItem(ro);if(e){this.addDropdownItem(ao)}this.addDropdownItem(so);this.cdr.detectChanges();return[2]}}))}))};TrashListDropdownItemsWrapperComponent.prototype.addDropdownItem=function(e){this.dropdownItems=this.dropdownItems.concat({component:e})};TrashListDropdownItemsWrapperComponent=__decorate([a.Component({selector:"se-trash-list-dropdown-items-wrapper",template:'<div\n        *seHasOperationPermission="\'se.edit.page\'"\n        class="paged-list-table__body__td paged-list-table__body__td-menu"\n    >\n        <se-dropdown-menu\n            [dropdownItems]="dropdownItems"\n            [selectedItem]="item"\n            class="pull-right"\n        ></se-dropdown-menu>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(1,a.Inject(r.DATA_TABLE_COMPONENT_DATA)),__metadata("design:paramtypes",[l.ActivatedRoute,Object,r.ICatalogVersionPermissionService,a.ChangeDetectorRef])],TrashListDropdownItemsWrapperComponent);return TrashListDropdownItemsWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","BaseWrapperComponent",{template:""});var ho=function(){function BaseWrapperComponent(e){this.data=e}BaseWrapperComponent.prototype.ngOnInit=function(){this.item=this.data.item};BaseWrapperComponent=__decorate([a.Component({template:""}),__param(0,a.Inject(r.DATA_TABLE_COMPONENT_DATA)),__metadata("design:paramtypes",[Object])],BaseWrapperComponent);return BaseWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","ModifiedTimeWrapperComponent",{selector:"se-modified-time-wrapper",template:"<div>{{ item.modifiedtime | date: 'short' }}</div>"});var vo=function(e){__extends(ModifiedTimeWrapperComponent,e);function ModifiedTimeWrapperComponent(){return e!==null&&e.apply(this,arguments)||this}ModifiedTimeWrapperComponent=__decorate([a.Component({selector:"se-modified-time-wrapper",template:"<div>{{ item.modifiedtime | date: 'short' }}</div>"})],ModifiedTimeWrapperComponent);return ModifiedTimeWrapperComponent}(ho);window.__smartedit__.addDecoratorPayload("Component","NumberOfRestrictionsWrapperComponent",{selector:"se-number-of-restrictions-wrapper",template:'<se-restrictions-viewer [restrictions]="item.restrictions"></se-restrictions-viewer>'});var fo=function(e){__extends(NumberOfRestrictionsWrapperComponent,e);function NumberOfRestrictionsWrapperComponent(){return e!==null&&e.apply(this,arguments)||this}NumberOfRestrictionsWrapperComponent=__decorate([a.Component({selector:"se-number-of-restrictions-wrapper",template:'<se-restrictions-viewer [restrictions]="item.restrictions"></se-restrictions-viewer>'})],NumberOfRestrictionsWrapperComponent);return NumberOfRestrictionsWrapperComponent}(ho);window.__smartedit__.addDecoratorPayload("Component","PageStatusWrapperComponent",{selector:"se-page-status-wrapper",template:'<div>\n        <se-page-display-status\n            [cmsPage]="item"\n            [showLastSyncTime]="false"\n        ></se-page-display-status>\n    </div>'});var _o=function(e){__extends(PageStatusWrapperComponent,e);function PageStatusWrapperComponent(){return e!==null&&e.apply(this,arguments)||this}PageStatusWrapperComponent=__decorate([a.Component({selector:"se-page-status-wrapper",template:'<div>\n        <se-page-display-status\n            [cmsPage]="item"\n            [showLastSyncTime]="false"\n        ></se-page-display-status>\n    </div>'})],PageStatusWrapperComponent);return PageStatusWrapperComponent}(ho);window.__smartedit__.addDecoratorPayload("Component","PageNameWrapperComponent",{selector:"se-page-name-wrapper",template:'\n        <a href="" (click)="goToPage($event)">\n            <se-homepage-icon\n                class="homepage-icon__page-list"\n                [cmsPage]="item"\n                [uriContext]="uriContext"\n            ></se-homepage-icon>\n            {{ item.name }}\n        </a>\n    '});var yo=function(){function PageNameWrapperComponent(e,t,n,i){this.data=e;this.route=t;this.experienceService=n;this.urlService=i}PageNameWrapperComponent.prototype.ngOnInit=function(){var e;this.item=this.data.item;e=this.route.snapshot.params,this.siteUid=e.siteId,this.catalogId=e.catalogId,this.catalogVersion=e.catalogVersion;this.uriContext=s.merge(this.urlService.buildUriContext(this.siteUid,this.catalogId,this.catalogVersion),this.urlService.buildPageUriContext(this.siteUid,this.catalogId,this.catalogVersion))};PageNameWrapperComponent.prototype.goToPage=function(e){e.preventDefault();if(this.item.uid){this.experienceService.loadExperience({siteId:this.siteUid,catalogId:this.catalogId,catalogVersion:this.catalogVersion,pageId:this.item.uid})}};PageNameWrapperComponent=__decorate([a.Component({selector:"se-page-name-wrapper",template:'\n        <a href="" (click)="goToPage($event)">\n            <se-homepage-icon\n                class="homepage-icon__page-list"\n                [cmsPage]="item"\n                [uriContext]="uriContext"\n            ></se-homepage-icon>\n            {{ item.name }}\n        </a>\n    '}),__param(0,a.Inject(r.DATA_TABLE_COMPONENT_DATA)),__metadata("design:paramtypes",[Object,l.ActivatedRoute,r.IExperienceService,r.IUrlService])],PageNameWrapperComponent);return PageNameWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","PageListDropdownItemsWrapperComponent",{selector:"se-page-list-dropdown-items-wrapper",template:'<div\n        *seHasOperationPermission="\'se.edit.page\'"\n        class="paged-list-table__body__td paged-list-table__body__td-menu"\n    >\n        <se-dropdown-menu\n            [dropdownItems]="dropdownItems"\n            [selectedItem]="item"\n            class="pull-right"\n        ></se-dropdown-menu>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var Co=function(){function PageListDropdownItemsWrapperComponent(e,t,n,i,o){this.route=e;this.data=t;this.catalogVersionPermissionService=n;this.managePageService=i;this.cdr=o;this.dropdownItems=[]}PageListDropdownItemsWrapperComponent.prototype.ngOnInit=function(){return this.setDropdownItems()};PageListDropdownItemsWrapperComponent.prototype.setDropdownItems=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:this.item=this.data.item;e=this.route.snapshot.params,t=e.catalogId,n=e.catalogVersion;return[4,Promise.all([this.catalogVersionPermissionService.hasSyncPermissionToActiveCatalogVersion(t,n),this.managePageService.isPageCloneable(this.data.item.uuid,this.data.item.catalogVersion)])];case 1:i=a.sent(),o=i[0],r=i[1];this.addDropdownItem(co);if(o){this.addDropdownItem(uo)}if(r){this.addDropdownItem(lo)}this.addDropdownItem(po);this.cdr.detectChanges();return[2]}}))}))};PageListDropdownItemsWrapperComponent.prototype.addDropdownItem=function(e){this.dropdownItems=this.dropdownItems.concat({component:e})};PageListDropdownItemsWrapperComponent=__decorate([a.Component({selector:"se-page-list-dropdown-items-wrapper",template:'<div\n        *seHasOperationPermission="\'se.edit.page\'"\n        class="paged-list-table__body__td paged-list-table__body__td-menu"\n    >\n        <se-dropdown-menu\n            [dropdownItems]="dropdownItems"\n            [selectedItem]="item"\n            class="pull-right"\n        ></se-dropdown-menu>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__param(1,a.Inject(r.DATA_TABLE_COMPONENT_DATA)),__metadata("design:paramtypes",[l.ActivatedRoute,Object,r.ICatalogVersionPermissionService,_n,a.ChangeDetectorRef])],PageListDropdownItemsWrapperComponent);return PageListDropdownItemsWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","PageListComponent",{selector:"se-page-list",template:'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditPagesToolbar"></se-toolbar><div *ngIf="isReady"><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.pagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="se-page-list__table-header--right"><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" maxlength="255" name="query" [ngModel]="query" (ngModelChange)="onQueryChange($event)" [placeholder]="\'se.cms.pagelist.searchplaceholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="query" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div><button class="fd-button se-page-list__add" (click)="openAddPageWizard()" translate="se.cms.addpagewizard.addpage"></button></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list [config]="pageListConfig" [mask]="query" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var So=function(){PageListComponent.$inject=["activatedRoute","urlService","catalogService","addPageWizardService","systemEventService","cdr"];function PageListComponent(e,t,n,i,r,a){var s=this;this.activatedRoute=e;this.urlService=t;this.catalogService=n;this.addPageWizardService=i;this.systemEventService=r;this.cdr=a;var c=this.activatedRoute.snapshot.params;this.isReady=false;this.count=0;this.catalogId=c.catalogId;this.catalogVersion=c.catalogVersion;this.siteUid=c.siteId;this.catalogName={};this.pageUriContext=this.urlService.buildPageUriContext(this.siteUid,this.catalogId,this.catalogVersion);this.uriContext=this.urlService.buildUriContext(this.siteUid,this.catalogId,this.catalogVersion);this.pageListConfig={sortBy:"name",reversed:false,itemsPerPage:10,displayCount:true,injectedContext:{},keys:[],queryParams:{catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:active",fields:"PAGE_LIST"},renderers:{},uri:o.cmsitemsUri};this.query="";this.querySubject$=new u.Subject;this.querySubscription=this.querySubject$.pipe(p.debounceTime(500),p.distinctUntilChanged()).subscribe((function(e){s.query=e;s.cdr.detectChanges()}))}PageListComponent.prototype.ngOnInit=function(){return this.initialize()};PageListComponent.prototype.ngOnDestroy=function(){this.eventUnsubscribe();this.querySubscription.unsubscribe()};PageListComponent.prototype.onPageItemsUpdate=function(e){this.count=e.totalCount};PageListComponent.prototype.onPageItemsUpdate.$inject=["pagination"];PageListComponent.prototype.onContentCatalogUpdate=function(){if(this.dynamicPagedListApi){this.dynamicPagedListApi.reloadItems()}};PageListComponent.prototype.onQueryChange=function(e){this.querySubject$.next(e)};PageListComponent.prototype.onQueryChange.$inject=["value"];PageListComponent.prototype.getApi=function(e){this.dynamicPagedListApi=e};PageListComponent.prototype.getApi.$inject=["api"];PageListComponent.prototype.openAddPageWizard=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.addPageWizardService.openAddPageWizard()];case 1:e.sent();this.dynamicPagedListApi.reloadItems();return[2]}}))}))};PageListComponent.prototype.reset=function(){this.query=""};PageListComponent.prototype.retrieveCatalogName=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.getContentCatalogsForSite(this.siteUid)];case 1:e=n.sent();this.catalogName=e.find((function(e){return e.catalogId===t.catalogId})).name;return[2]}}))}))};PageListComponent.prototype.initialize=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.isContentCatalogVersionNonActive()];case 1:e=n.sent();this.pageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:true,component:yo},{property:"uid",i18n:"se.cms.pagelist.headerpageid",sortable:true},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:true},{property:"label",i18n:"se.cms.pagelist.headerpagelable",sortable:false},{property:"masterTemplateId",i18n:"se.cms.pagelist.headerpagetemplate",sortable:false},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions",sortable:false,component:fo}];if(e){this.pageListConfig.keys.push({property:"pageStatus",i18n:"se.cms.pagelist.headerpagestatus",sortable:false,component:_o})}this.pageListConfig.keys.push({property:"dropdownitems",i18n:"",sortable:false,component:Co});return[4,this.retrieveCatalogName()];case 2:n.sent();this.eventUnsubscribe=this.systemEventService.subscribe(r.EVENT_CONTENT_CATALOG_UPDATE,(function(){return t.onContentCatalogUpdate()}));this.isReady=true;this.cdr.detectChanges();return[2]}}))}))};PageListComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-page-list",template:'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell se-toolbar--shortcut" imageRoot="imageRoot" toolbarName="smartEditPagesToolbar"></se-toolbar><div *ngIf="isReady"><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.pagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="se-page-list__table-header--right"><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" maxlength="255" name="query" [ngModel]="query" (ngModelChange)="onQueryChange($event)" [placeholder]="\'se.cms.pagelist.searchplaceholder\' | translate"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="query" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div><button class="fd-button se-page-list__add" (click)="openAddPageWizard()" translate="se.cms.addpagewizard.addpage"></button></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list [config]="pageListConfig" [mask]="query" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[l.ActivatedRoute,r.IUrlService,r.ICatalogService,mo,r.SystemEventService,a.ChangeDetectorRef])],PageListComponent);return PageListComponent}();window.__smartedit__.addDecoratorPayload("Component","PagesLinkComponent",{selector:"se-pages-link",template:'<div class="se-page-list__page-link--left" (click)="backToPagelist()"><span class="se-page-list__page-link-icon icon-navigation-left-arrow"></span> <a class="se-page-list__page-link-anchor">{{ \'se.cms.back.to.pagelist\' | translate }}</a></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"]});var bo=function(){PagesLinkComponent.$inject=["route","seRouting"];function PagesLinkComponent(e,t){this.route=e;this.seRouting=t}PagesLinkComponent.prototype.ngOnInit=function(){this.siteId=this.route.snapshot.params.siteId;this.catalogId=this.route.snapshot.params.catalogId;this.catalogVersion=this.route.snapshot.params.catalogVersion};PagesLinkComponent.prototype.backToPagelist=function(){this.seRouting.go((""+r.NG_ROUTE_PREFIX+o.PAGE_LIST_PATH).replace(":siteId",this.siteId).replace(":catalogId",this.catalogId).replace(":catalogVersion",this.catalogVersion))};PagesLinkComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-pages-link",template:'<div class="se-page-list__page-link--left" (click)="backToPagelist()"><span class="se-page-list__page-link-icon icon-navigation-left-arrow"></span> <a class="se-page-list__page-link-anchor">{{ \'se.cms.back.to.pagelist\' | translate }}</a></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"]}),__metadata("design:paramtypes",[l.ActivatedRoute,r.SmarteditRoutingService])],PagesLinkComponent);return PagesLinkComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionsModalComponent",{selector:"se-restrictions-modal",template:'<div class="se-restrictions-list fd-menu__list fd-menu__list--separated"><div class="se-restriction__item fd-menu__item" *ngFor="let restriction of restrictions"><div class="se-restrictions-list__item-content"><div class="se-restriction__item-name">{{ restriction.name }}</div><div class="se-restriction__item-type-and-id">{{ restriction.type | seL10n | async }}</div><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>',styles:["#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}"]});var Io=function(){function RestrictionsModalComponent(e,t,n){this.modalRef=e;this.cmsitemsRestService=t;this.cdr=n}RestrictionsModalComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.cmsitemsRestService.getByIdsNoCache(this.modalRef.data.modalData,"FULL")];case 1:e=t.sent();this.restrictions=e.response?e.response:[e];this.cdr.detectChanges();return[2]}}))}))};RestrictionsModalComponent=__decorate([a.Component({selector:"se-restrictions-modal",template:'<div class="se-restrictions-list fd-menu__list fd-menu__list--separated"><div class="se-restriction__item fd-menu__item" *ngFor="let restriction of restrictions"><div class="se-restrictions-list__item-content"><div class="se-restriction__item-name">{{ restriction.name }}</div><div class="se-restriction__item-type-and-id">{{ restriction.type | seL10n | async }}</div><div class="se-restriction__item-description">{{ restriction.description }}</div></div></div></div>',styles:["#restrictions-label{display:none}.se-restriction__select{text-transform:capitalize;width:100%}.se-restrictions-list__item-content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;cursor:default;flex-grow:1}#userGroups-selector .se-generic-editor-multiple-dropdown__match li[draggable=true]{display:flex;flex-direction:row;align-items:center;justify-content:center;display:inline-flex!important;border:1px solid #d9d9d9;margin:4px 0 4px 8px;padding:4px 8px;border-radius:4px;background-color:var(--fd-token-background-color);color:#51555a;min-height:28px}"]}),__metadata("design:paramtypes",[m.ModalRef,o.CmsitemsRestService,a.ChangeDetectorRef])],RestrictionsModalComponent);return RestrictionsModalComponent}();window.__smartedit__.addDecoratorPayload("Component","RestrictionsViewerComponent",{selector:"se-restrictions-viewer",template:'<div *ngIf="restrictions?.length > 0; else noRestrictions"><a href="" class="show-restrictions-btn" (click)="showRestrictions($event)">{{restrictions.length}}</a></div><ng-template #noRestrictions><div>-</div></ng-template>',changeDetection:a.ChangeDetectionStrategy.OnPush});var wo=function(){RestrictionsViewerComponent.$inject=["modalService","logService"];function RestrictionsViewerComponent(e,t){this.modalService=e;this.logService=t}RestrictionsViewerComponent.prototype.showRestrictions=function(e){var t=this;e.preventDefault();return this.modalService.open({component:Io,data:this.restrictions,templateConfig:{title:"se.cms.restrictionsviewer.title",isDismissButtonVisible:true},config:{modalPanelClass:"modal-md"}}).afterClosed.toPromise().catch((function(){t.logService.warn("RestrictionsViewer - modal closed without any action")}))};RestrictionsViewerComponent.prototype.showRestrictions.$inject=["event"];__decorate([a.Input(),__metadata("design:type",Array)],RestrictionsViewerComponent.prototype,"restrictions",void 0);RestrictionsViewerComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-restrictions-viewer",template:'<div *ngIf="restrictions?.length > 0; else noRestrictions"><a href="" class="show-restrictions-btn" (click)="showRestrictions($event)">{{restrictions.length}}</a></div><ng-template #noRestrictions><div>-</div></ng-template>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[r.ModalService,r.LogService])],RestrictionsViewerComponent);return RestrictionsViewerComponent}();var Eo=function(){function PageComponentsModule(){}PageComponentsModule=__decorate([a.NgModule({imports:[g.CommonModule,r.L10nPipeModule,h.FormsModule,r.TranslationModule.forChild(),r.HasOperationPermissionDirectiveModule,r.TooltipModule,Pi,r.SharedComponentsModule,r.SelectModule,r.SeGenericEditorModule,lt,c.ToolbarModule,r.ClientPagedListModule,m.PopoverModule],providers:[ne,fi,bn,Sn,Nn,Hi,Zi],declarations:[ao,ro,so,bo,wo,Io,fo,_o,vo,go,Vi,Ui,uo,Cn,oo,Ni,Di,Oi,Mi,Ri,xi,Xi,qi,Ki,ji,Fi,Ji,Qi,Yi,co,lo,po,Fn,So,yo,Co,zn,io,eo,no,to,Me,kn],entryComponents:[ao,ro,so,bo,wo,Io,fo,_o,vo,go,Vi,Ui,uo,Cn,oo,Ni,Di,Oi,Mi,Ri,xi,Xi,qi,Ki,ji,Fi,Ji,Qi,Yi,co,lo,po,Fn,yo,Co,zn,io,eo,no,to,Me,kn],exports:[oo]})],PageComponentsModule);return PageComponentsModule}();window.__smartedit__.addDecoratorPayload("Component","TrashedPageListComponent",{selector:"se-trashed-page-list",template:'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell ySmartEditTrashPageToolbar" imageRoot="imageRoot" toolbarName="smartEditTrashPageToolbar"></se-toolbar><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.trashedpagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}" [ngModel]="mask" (ngModelChange)="onMaskChange($event)" name="mask"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="mask" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list class="se-trashed-pages" [config]="trashedPageListConfig" [mask]="mask" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None});var Po=function(){TrashedPageListComponent.$inject=["catalogService","route","urlService","systemEventService","cdr"];function TrashedPageListComponent(e,t,n,i,o){this.catalogService=e;this.route=t;this.urlService=n;this.systemEventService=i;this.cdr=o;this.mask="";this.dropdownItems=[];this.count=0;this.maskSubject$=new C.Subject}TrashedPageListComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.initialize()];case 1:t.sent();this.unsubscribeEventListener=this.systemEventService.subscribe(r.EVENT_CONTENT_CATALOG_UPDATE,this.onContentCatalogUpdate.bind(this));this.maskSubscription=this.maskSubject$.pipe(y.debounceTime(500),y.distinctUntilChanged()).subscribe((function(t){e.mask=t;e.cdr.detectChanges()}));return[2]}}))}))};TrashedPageListComponent.prototype.ngOnDestroy=function(){this.unsubscribeEventListener();this.maskSubscription.unsubscribe()};TrashedPageListComponent.prototype.onMaskChange=function(e){this.maskSubject$.next(e)};TrashedPageListComponent.prototype.onMaskChange.$inject=["newValue"];TrashedPageListComponent.prototype.onPageItemsUpdate=function(e){this.count=e.totalCount};TrashedPageListComponent.prototype.onPageItemsUpdate.$inject=["pagination"];TrashedPageListComponent.prototype.reset=function(){this.mask=""};TrashedPageListComponent.prototype.getApi=function(e){this.dynamicPagedListApi=e};TrashedPageListComponent.prototype.getApi.$inject=["$api"];TrashedPageListComponent.prototype.initialize=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.setSiteParams();this.setUriContext();this.setTrashedListConfigBasis();this.setTrashedListColumns();return[2,this.setCatalogName()]}))}))};TrashedPageListComponent.prototype.onContentCatalogUpdate=function(){if(this.dynamicPagedListApi){this.dynamicPagedListApi.reloadItems()}};TrashedPageListComponent.prototype.setSiteParams=function(){this.siteUID=this.route.snapshot.params.siteId;this.catalogId=this.route.snapshot.params.catalogId;this.catalogVersion=this.route.snapshot.params.catalogVersion};TrashedPageListComponent.prototype.setUriContext=function(){this.uriContext=this.urlService.buildUriContext(this.siteUID,this.catalogId,this.catalogVersion)};TrashedPageListComponent.prototype.setTrashedListConfigBasis=function(){this.trashedPageListConfig={sortBy:"name",reversed:false,itemsPerPage:10,displayCount:true,uri:o.cmsitemsUri,queryParams:{catalogId:this.catalogId,catalogVersion:this.catalogVersion,typeCode:"AbstractPage",itemSearchParams:"pageStatus:deleted"},keys:[],renderers:{},injectedContext:{}}};TrashedPageListComponent.prototype.setCatalogName=function(){return __awaiter(this,void 0,void 0,(function(){var e;var t=this;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.catalogService.getContentCatalogsForSite(this.siteUID)];case 1:e=n.sent();this.catalogName=e.find((function(e){return e.catalogId===t.catalogId})).name;return[2]}}))}))};TrashedPageListComponent.prototype.setTrashedListColumns=function(){this.trashedPageListConfig.keys=[{property:"name",i18n:"se.cms.pagelist.headerpagename",sortable:true},{property:"uid",i18n:"se.cms.pagelist.headerpageid",sortable:true},{property:"itemtype",i18n:"se.cms.pagelist.headerpagetype",sortable:true},{property:"label",i18n:"se.cms.pagelist.headerpagelable",sortable:false},{property:"numberOfRestrictions",i18n:"se.cms.pagelist.headerrestrictions",sortable:false,component:fo},{property:"modifiedtime",i18n:"se.cms.trashedpagelist.trashed.date",sortable:true,component:vo},{property:"pageStatus",i18n:"se.cms.pagelist.headerpagestatus",sortable:false,component:_o},{property:"dropdownitems",i18n:"",sortable:false,component:go}]};TrashedPageListComponent=__decorate([r.SeDowngradeComponent(),a.Component({selector:"se-trashed-page-list",template:'<div class="se-page-list"><se-toolbar cssClass="se-toolbar--shell" imageRoot="imageRoot" toolbarName="smartEditHeaderToolbar"></se-toolbar><se-toolbar cssClass="se-toolbar--shell ySmartEditTrashPageToolbar" imageRoot="imageRoot" toolbarName="smartEditTrashPageToolbar"></se-toolbar><div class="se-page-list__header"><span class="se-page-list__catalog-name" translate="se.cms.trashedpagelist.title"></span><p class="se-page-list__sub-title">{{ catalogName | seL10n | async }} - {{ catalogVersion }}</p></div><div class="se-page-list__body"><div class="se-page-list__table-header"><span class="se-paged-list__page-count-wrapper"><span class="span-page-list__page-count-text" translate="se.pagelist.countsearchresult"></span> <span>&nbsp;</span> <span class="se-page-list__page-count">({{ count }})</span></span><div class="fd-form__group se-page-list__search"><div class="se-input-group"><input type="search" class="se-input-group__input-area ySEPage-list-search-input" placeholder="{{ \'se.cms.pagelist.searchplaceholder\' | translate }}" [ngModel]="mask" (ngModelChange)="onMaskChange($event)" name="mask"/> <span class="sap-icon--search se-input-group__addon"></span><div *ngIf="mask" aria-label="clear" class="se-input-group__addon se-input-group__clear-btn" (click)="reset()"><span class="sap-icon--decline"></span></div></div></div></div><div class="se-page-list__table-body"><se-dynamic-paged-list class="se-trashed-pages" [config]="trashedPageListConfig" [mask]="mask" (getApi)="getApi($event);" (onItemsUpdate)="onPageItemsUpdate($event.pagination)"></se-dynamic-paged-list></div></div></div>',styles:[".se-page-list{background-color:#edeff0;min-height:100vh;height:100%}.se-page-list__page-link-anchor{text-decoration:none!important;color:#51555a}.se-page-list__page-link-anchor:hover{color:#0a6ed1}.se-page-list__header{padding:16px 30px;background-color:#fff}.se-page-list__page-link-icon{font-size:.8571428571rem;line-height:1.3333333333;font-weight:400;color:#51555a}.se-page-list__catalog-name{font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;display:block;margin-bottom:4px}.se-page-list__sub-title{color:#6a6d70}.se-page-list__body{padding:20px 20px 70px}.se-page-list__page-link--left{cursor:pointer}.se-page-list__page-link--left .se-page-list__page-link-anchor{margin-left:3px}.se-page-list__page-link--right{cursor:pointer}.se-page-list__page-link--right .se-page-list__page-link-anchor{margin-right:3px}.se-page-list__table-header{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;height:56px;padding:20px;border-radius:4px 4px 0 0}.se-page-list__table-header--right{display:flex;flex-direction:row;align-items:center}.se-page-list__table-header .se-paged-list__page-count-wrapper{font-size:1.1428571429rem;line-height:1.25;font-weight:400;margin-right:auto}.se-page-list__table-body{padding-bottom:16px}.se-page-list__table-body .se-data-table__arrow{margin-left:2px}.se-page-list__table-body .se-paged-list-item{cursor:default}.se-page-list__search{margin-right:16px;width:380px}.se-page-list__add{text-transform:capitalize}.se-paged-list__header{font-size:1rem;line-height:1.4285714286;font-weight:400}.se-paged-list__header-dropdownitems,.se-paged-list__header-pageStatus,.se-paged-list__header-syncStatus{cursor:default}.se-paged-list-item-name a{text-decoration:none!important}.se-sync-btn__status--done{color:#0a7e3e}.se-sync-btn__status--not{color:#e9730c}.ySmartEditTrashPageToolbar{background-color:#fff}.fd-table td.se-paged-list-item-numberOfRestrictions,.fd-table td.se-paged-list-item-syncStatus,.fd-table th.se-paged-list__header-numberOfRestrictions,.fd-table th.se-paged-list__header-syncStatus{text-align:center}.fd-table td.se-paged-list-item-syncStatus{font-size:1.1428571429rem;line-height:1.25;font-weight:400}"],changeDetection:a.ChangeDetectionStrategy.OnPush,encapsulation:a.ViewEncapsulation.None}),__metadata("design:paramtypes",[r.ICatalogService,l.ActivatedRoute,r.IUrlService,r.SystemEventService,a.ChangeDetectorRef])],TrashedPageListComponent);return TrashedPageListComponent}();var To=function(){function TrashedPageListModule(){}TrashedPageListModule=__decorate([a.NgModule({imports:[g.CommonModule,r.SeTranslationModule.forChild(),h.FormsModule,c.ToolbarModule,r.L10nPipeModule,r.DynamicPagedListModule],declarations:[Po]})],TrashedPageListModule);return TrashedPageListModule}();var Ao=function(e){__extends(PageContentSlotsComponentsRestService,e);function PageContentSlotsComponentsRestService(){return e.call(this)||this}PageContentSlotsComponentsRestService=__decorate([r.GatewayProxied("clearCache","getSlotsToComponentsMapForPageUid"),r.SeDowngradeService(o.IPageContentSlotsComponentsRestService),__metadata("design:paramtypes",[])],PageContentSlotsComponentsRestService);return PageContentSlotsComponentsRestService}(o.IPageContentSlotsComponentsRestService);var Do=function(){PagesFallbacksRestService.$inject=["restServiceFactory"];function PagesFallbacksRestService(e){this.restServiceFactory=e;this.fallbacksForPageIdResource=e.get(this.getUri())}PagesFallbacksRestService.prototype.getFallbacksForPageId=function(e){return this.fallbacksForPageIdResource.get({pageId:e}).then((function(e){return e.uids}))};PagesFallbacksRestService.prototype.getFallbacksForPageId.$inject=["pageId"];PagesFallbacksRestService.prototype.getFallbacksForPageIdAndContext=function(e,t){var n=this.getUri(t[r.CONTEXT_SITE_ID],t[r.CONTEXT_CATALOG],t[r.CONTEXT_CATALOG_VERSION]);var i=this.restServiceFactory.get(n);return i.get({pageId:e}).then((function(e){return e.uids}))};PagesFallbacksRestService.prototype.getFallbacksForPageIdAndContext.$inject=["pageId","uriContext"];PagesFallbacksRestService.prototype.getUri=function(e,t,n){if(e===void 0){e=r.PAGE_CONTEXT_SITE_ID}if(t===void 0){t=r.PAGE_CONTEXT_CATALOG}if(n===void 0){n=r.PAGE_CONTEXT_CATALOG_VERSION}return"/cmswebservices/v1/sites/"+e+"/catalogs/"+t+"/versions/"+n+"/pages/:pageId/fallbacks"};PagesFallbacksRestService.prototype.getUri.$inject=["siteId","catalogId","catalogVersionId"];PagesFallbacksRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PagesFallbacksRestService);return PagesFallbacksRestService}();var Oo=function(){PagesRestService.$inject=["restServiceFactory"];function PagesRestService(e){this.restServiceFactory=e;this.URI="/cmswebservices/v1/sites/"+r.PAGE_CONTEXT_SITE_ID+"/catalogs/"+r.PAGE_CONTEXT_CATALOG+"/versions/"+r.PAGE_CONTEXT_CATALOG_VERSION+"/pages/:pageUid"}PagesRestService.prototype.get=function(e){return this.restServiceFactory.get(this.URI,"pageUid").get({uids:e}).then((function(e){return e.pages}))};PagesRestService.prototype.get.$inject=["uids"];PagesRestService.prototype.getById=function(e){return this.restServiceFactory.get(this.URI,"pageUid").get({pageUid:e})};PagesRestService.prototype.getById.$inject=["pageUid"];PagesRestService.prototype.update=function(e,t){var n=new r.URIBuilder(this.URI).replaceParams(t).build();var i=s.assign({pageUid:e},t);return this.restServiceFactory.get(n,"pageUid").update(i)};PagesRestService.prototype.update.$inject=["pageUid","payload"];PagesRestService=__decorate([r.SeDowngradeService(),__metadata("design:paramtypes",[r.RestServiceFactory])],PagesRestService);return PagesRestService}();var Ro=function(e){__extends(ComponentSharedService,e);function ComponentSharedService(){return e!==null&&e.apply(this,arguments)||this}ComponentSharedService=__decorate([r.SeDowngradeService(o.IComponentSharedService),r.GatewayProxied()],ComponentSharedService);return ComponentSharedService}(o.IComponentSharedService);var Mo=function(e){__extends(ContextAwareEditableItemService,e);ContextAwareEditableItemService.$inject=["workflowService","pageService"];function ContextAwareEditableItemService(t,n){var i=e.call(this)||this;i.workflowService=t;i.pageService=n;return i}ContextAwareEditableItemService.prototype.isItemEditable=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.workflowService.getWorkflowEditableItems([e])];case 1:t=o.sent();n=t.find((function(t){return t.uid===e}));if(!n.editableInWorkflow)return[3,3];return[4,this.editableInCurrentPageContext(n.editableInWorkflow)];case 2:i=o.sent();return[2,n.editableByUser&&i];case 3:return[2,n.editableByUser]}}))}))};ContextAwareEditableItemService.prototype.isItemEditable.$inject=["itemUid"];ContextAwareEditableItemService.prototype.editableInCurrentPageContext=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:o.trys.push([0,3,,4]);return[4,this.pageService.getCurrentPageInfo()];case 1:t=o.sent();return[4,this.workflowService.getActiveWorkflowForPageUuid(t.uid)];case 2:n=o.sent();return[2,n!==null&&n.workflowCode===e];case 3:i=o.sent();return[2,true];case 4:return[2]}}))}))};ContextAwareEditableItemService.prototype.editableInCurrentPageContext.$inject=["editableInWorkflow"];ContextAwareEditableItemService=__decorate([r.SeDowngradeService(o.IContextAwareEditableItemService),r.GatewayProxied(),__metadata("design:paramtypes",[Pe,o.IPageService])],ContextAwareEditableItemService);return ContextAwareEditableItemService}(o.IContextAwareEditableItemService);var xo=function(){ExperienceGuard.$inject=["catalogAwareRouteResolverHelper","routing"];function ExperienceGuard(e,t){this.catalogAwareRouteResolverHelper=e;this.routing=t}ExperienceGuard.prototype.canActivate=function(e){var t=this;return this.catalogAwareRouteResolverHelper.experienceFromPathResolve(e.params).catch((function(){t.routing.go(r.NG_ROUTE_PREFIX);return false}))};ExperienceGuard.prototype.canActivate.$inject=["route"];var e;ExperienceGuard=__decorate([a.Injectable(),__metadata("design:paramtypes",[typeof(e=typeof c.CatalogAwareRouteResolverHelper!=="undefined"&&c.CatalogAwareRouteResolverHelper)==="function"?e:Object,r.SmarteditRoutingService])],ExperienceGuard);return ExperienceGuard}();var No=function(e){__extends(PageService,e);PageService.$inject=["pagesRestService","pagesFallbacksRestService","pagesVariationsRestService","pageInfoService","cmsitemsRestService","experienceService","urlService"];function PageService(t,n,i,o,r,a,s){var c=e.call(this)||this;c.pagesRestService=t;c.pagesFallbacksRestService=n;c.pagesVariationsRestService=i;c.pageInfoService=o;c.cmsitemsRestService=r;c.experienceService=a;c.urlService=s;return c}PageService.prototype.getPageByUuid=function(e){return this.cmsitemsRestService.getById(e)};PageService.prototype.getPageByUuid.$inject=["pageUuid"];PageService.prototype.getCurrentPageInfo=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:e=t.sent();return[2,this.cmsitemsRestService.getById(e)]}}))}))};PageService.prototype.getPageById=function(e){return this.pagesRestService.getById(e)};PageService.prototype.getPageById.$inject=["pageUid"];PageService.prototype.getCurrentPageInfoByVersion=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pageInfoService.getPageUUID()];case 1:t=n.sent();return[2,this.cmsitemsRestService.getByIdAndVersion(t,e)]}}))}))};PageService.prototype.getCurrentPageInfoByVersion.$inject=["versionId"];PageService.prototype.primaryPageForPageTypeExists=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getPaginatedPrimaryPagesForPageType(e,t,{search:null,pageSize:1,currentPage:0})];case 1:n=i.sent();return[2,n.response.length>0]}}))}))};PageService.prototype.primaryPageForPageTypeExists.$inject=["pageTypeCode","uriParams"];PageService.prototype.getPaginatedPrimaryPagesForPageType=function(e,t,n){var i="defaultPage:true,pageStatus:ACTIVE";var o=s.assign({},t||{},n||{},{typeCode:e,itemSearchParams:i});if(o.search){o.mask=o.search;delete o.search}if(!s.isNumber(o.pageSize)){o.pageSize=10}if(!s.isNumber(o.currentPage)){o.currentPage=0}return this.cmsitemsRestService.get(o)};PageService.prototype.getPaginatedPrimaryPagesForPageType.$inject=["pageTypeCode","uriParams","fetchPageParams"];PageService.prototype.isPagePrimary=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pagesFallbacksRestService.getFallbacksForPageId(e)];case 1:t=n.sent();return[2,t.length===0]}}))}))};PageService.prototype.isPagePrimary.$inject=["pageUid"];PageService.prototype.isPagePrimaryWithContext=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.pagesFallbacksRestService.getFallbacksForPageIdAndContext(e,t)];case 1:n=i.sent();return[2,n.length===0]}}))}))};PageService.prototype.isPagePrimaryWithContext.$inject=["pageUid","uriContext"];PageService.prototype.getPrimaryPage=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pagesFallbacksRestService.getFallbacksForPageId(e)];case 1:t=n.sent();return[2,t[0]?this.pagesRestService.getById(t[0]):Promise.resolve(null)]}}))}))};PageService.prototype.getPrimaryPage.$inject=["variationPageId"];PageService.prototype.getVariationPages=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.pagesVariationsRestService.getVariationsForPrimaryPageId(e)];case 1:t=n.sent();return[2,t.length>0?this.pagesRestService.get(t):Promise.resolve([])]}}))}))};PageService.prototype.getVariationPages.$inject=["primaryPageId"];PageService.prototype.updatePageById=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.pagesRestService.getById(e)];case 1:n=o.sent();i=r.objectUtils.copy(n);t=__assign(__assign({},i),t);return[2,this.pagesRestService.update(e,t)]}}))}))};PageService.prototype.updatePageById.$inject=["pageUid","payload"];PageService.prototype.forcePageApprovalStatus=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n;return __generator(this,(function(i){switch(i.label){case 0:return[4,this.getCurrentPageInfo()];case 1:t=i.sent();n=Object.assign({},t);n.approvalStatus=e;n.identifier=t.uuid;return[2,this.cmsitemsRestService.update(n)]}}))}))};PageService.prototype.forcePageApprovalStatus.$inject=["newPageStatus"];PageService.prototype.isPageApproved=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(!(typeof e==="string"))return[3,2];return[4,this.getPageByUuid(e)];case 1:t=n.sent();return[3,3];case 2:t=e;n.label=3;case 3:return[2,t.approvalStatus===o.CmsApprovalStatus.APPROVED]}}))}))};PageService.prototype.isPageApproved.$inject=["pageParam"];PageService.prototype.buildUriContextForCurrentPage=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o;return __generator(this,(function(r){switch(r.label){case 0:i={};if(e&&t&&n){i=this.urlService.buildUriContext(e,t,n)}if(!s.isEmpty(i)){return[2,i]}return[4,this.experienceService.getCurrentExperience()];case 1:o=r.sent();return[2,this.urlService.buildUriContext(o.pageContext.siteId,o.pageContext.catalogId,o.pageContext.catalogVersion)]}}))}))};PageService.prototype.buildUriContextForCurrentPage.$inject=["siteId","catalogId","catalogVersion"];__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],PageService.prototype,"getPageByUuid",null);__decorate([r.Cached({actions:[r.rarelyChangingContent],tags:[r.pageEvictionTag,r.pageChangeEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],PageService.prototype,"getCurrentPageInfo",null);PageService=__decorate([r.SeDowngradeService(o.IPageService),r.GatewayProxied(),__metadata("design:paramtypes",[Oo,Do,U,r.IPageInfoService,o.CmsitemsRestService,r.IExperienceService,r.IUrlService])],PageService);return PageService}(o.IPageService);var ko=function(e){__extends(RemoveComponentService,e);function RemoveComponentService(){return e!==null&&e.apply(this,arguments)||this}RemoveComponentService=__decorate([r.GatewayProxied("removeComponent"),r.SeDowngradeService(o.IRemoveComponentService)],RemoveComponentService);return RemoveComponentService}(o.IRemoveComponentService);var Fo=function(e){__extends(SlotRestrictionsService,e);function SlotRestrictionsService(){return e!==null&&e.apply(this,arguments)||this}SlotRestrictionsService=__decorate([r.SeDowngradeService(o.ISlotRestrictionsService),r.GatewayProxied("getAllComponentTypesSupportedOnPage","getSlotRestrictions")],SlotRestrictionsService);return SlotRestrictionsService}(o.ISlotRestrictionsService);var zo=function(e){__extends(SyncPollingService,e);SyncPollingService.$inject=["logService","pageInfoService","experienceService","catalogService","synchronizationResourceService","crossFrameEventService","systemEventService","timerService"];function SyncPollingService(t,n,i,o,r,a,s,c){var l=e.call(this)||this;l.logService=t;l.pageInfoService=n;l.experienceService=i;l.catalogService=o;l.synchronizationResourceService=r;l.crossFrameEventService=a;l.systemEventService=s;l.timerService=c;l.SYNC_POLLING_THROTTLE=500;l.syncStatus={};l.triggers=new Set;l.syncPollingTimer=null;l.refreshInterval=null;l.syncPageObservableMap=new Map;l.initSyncPolling();return l}SyncPollingService.prototype.performSync=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.isCurrentPageFromActiveCatalog()];case 1:n=o.sent();if(n){return[2,Promise.reject()]}return[4,this.catalogService.getContentCatalogActiveVersion(t)];case 2:i=o.sent();return[2,this.synchronizationResourceService.getPageSynchronizationPostRestService(t).save({target:i,items:e})]}}))}))};SyncPollingService.prototype.performSync.$inject=["array","uriContext"];SyncPollingService.prototype.getSyncStatus=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r,a,s;return __generator(this,(function(c){switch(c.label){case 0:if(n){this.clearSyncPageObservableMap()}if(this.syncStatus[e]&&e===this.syncStatus[e].itemId&&!n){return[2,this.syncStatus[e]]}c.label=1;case 1:c.trys.push([1,3,,4]);return[4,this.getPageUUID(e)];case 2:i=c.sent();return[3,4];case 3:o=c.sent();this.logService.error("syncPollingService::getSyncStatus - failed call to getPageUUID");this.syncPollingTimer.stop();return[2,this.fetchSyncStatus(e,t)];case 4:c.trys.push([4,6,,7]);return[4,this.fetchSyncStatus(i,t)];case 5:r=c.sent();a=this.getSyncPollingTypeFromInterval(this.refreshInterval);this.startSync(a);return[2,r];case 6:s=c.sent();this.logService.error("syncPollingService::getSyncStatus - failed call to fetchSyncStatus");return[2,Promise.reject()];case 7:return[2]}}))}))};SyncPollingService.prototype.getSyncStatus.$inject=["pageUUID","uriContext","forceGetSynchronization"];SyncPollingService.prototype.fetchSyncStatus=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,c;return __generator(this,(function(l){switch(l.label){case 0:l.trys.push([0,4,,5]);return[4,this.getPageUUID(e)];case 1:n=l.sent();if(!n){return[2,{}]}return[4,this.isCurrentPageFromActiveCatalog()];case 2:i=l.sent();if(i){return[2,Promise.reject()]}return[4,this.catalogService.getContentCatalogActiveVersion(t)];case 3:o=l.sent();a=r.stringUtils.encode(n);s=this.syncPageObservableMap.get(a);return[2,s?s.toPromise():this.fetchPageSynchronization(o,n,t).toPromise()];case 4:c=l.sent();this.stopSync();this.logService.warn(c);return[3,5];case 5:return[2]}}))}))};SyncPollingService.prototype.fetchSyncStatus.$inject=["_pageUUID","uriContext"];SyncPollingService.prototype.changePollingSpeed=function(e,t){if(e===o.DEFAULT_SYNCHRONIZATION_POLLING.SPEED_UP){this.syncStatus={};if(t&&!this.triggers.has(t)){this.triggers.add(t)}this.refreshInterval=o.DEFAULT_SYNCHRONIZATION_POLLING.FAST_POLLING_TIME}else{if(t){this.triggers.delete(t)}if(this.triggers.size===0){this.refreshInterval=o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_POLLING_TIME}}this.syncPollingTimer.restart(this.refreshInterval)};SyncPollingService.prototype.changePollingSpeed.$inject=["eventId","key"];SyncPollingService.prototype.fetchPageSynchronization=function(e,t,n){var i=u.from(this.getPageSlotSyncStatus(n,t,e));var o=r.stringUtils.encode(t);this.syncPageObservableMap.set(o,i);return i.pipe(y.share())};SyncPollingService.prototype.fetchPageSynchronization.$inject=["activeVersion","pageUUID","uriContext"];SyncPollingService.prototype.getPageSlotSyncStatus=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,a;return __generator(this,(function(s){switch(s.label){case 0:return[4,this.synchronizationResourceService.getPageSynchronizationGetRestService(e).get({pageUid:t,target:n})];case 1:i=s.sent();a=this.syncStatus[i.itemId];if(JSON.stringify(i)!==JSON.stringify(a)){this.crossFrameEventService.publish(o.DEFAULT_SYNCHRONIZATION_POLLING.FAST_FETCH,i);if(!a||i.lastModifiedDate!==a.lastModifiedDate||i.status!==a.status){this.crossFrameEventService.publish(o.CMSITEMS_UPDATE_EVENT);this.crossFrameEventService.publish(r.EVENTS.PAGE_UPDATED,{uuid:t})}}this.syncStatus[i.itemId]=i;this.clearSyncPageObservableMap();return[2,i]}}))}))};SyncPollingService.prototype.getPageSlotSyncStatus.$inject=["uriContext","pageUUID","activeVersion"];SyncPollingService.prototype.stopSync=function(){if(this.syncPollingTimer.isActive()){this.syncPollingTimer.stop()}this.clearSyncStatus()};SyncPollingService.prototype.startSync=function(e){if(!this.syncPollingTimer.isActive()){this.changePollingSpeed(e||o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_DOWN)}};SyncPollingService.prototype.startSync.$inject=["syncPollingType"];SyncPollingService.prototype.initSyncPolling=function(){var e=this;this.refreshInterval=o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_POLLING_TIME;this.triggers.clear();this.syncStatus={};var t=this.changePollingSpeed.bind(this);this.systemEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_POLLING.SPEED_UP,t);this.systemEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_DOWN,t);this.crossFrameEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_POLLING.FETCH_SYNC_STATUS_ONCE,(function(t,n){e.fetchSyncStatus(n)}));this.crossFrameEventService.subscribe(r.OVERLAY_RERENDERED_EVENT,s.throttle((function(){if(e.syncPollingTimer.isActive()){e.fetchSyncStatus()}}),this.SYNC_POLLING_THROTTLE));this.crossFrameEventService.subscribe(r.EVENTS.PAGE_CHANGE,(function(){e.clearSyncStatus();e.clearSyncPageObservableMap()}));this.crossFrameEventService.subscribe(o.DEFAULT_SYNCHRONIZATION_EVENT.CATALOG_SYNCHRONIZED,(function(){e.syncStatus={};e.fetchSyncStatus()}));this.syncPollingTimer=this.timerService.createTimer((function(){return e.fetchSyncStatus()}),this.refreshInterval);if(r.windowUtils.getGatewayTargetFrame()){var n=this.getSyncPollingTypeFromInterval(this.refreshInterval);this.startSync(n)}};SyncPollingService.prototype.clearSyncPageObservableMap=function(){this.syncPageObservableMap.clear()};SyncPollingService.prototype.clearSyncStatus=function(){this.syncStatus={}};SyncPollingService.prototype.getPageUUID=function(e){return!r.stringUtils.isBlank(e)?Promise.resolve(e):this.pageInfoService.getPageUUID()};SyncPollingService.prototype.getPageUUID.$inject=["_pageUUID"];SyncPollingService.prototype.isCurrentPageFromActiveCatalog=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.experienceService.getCurrentExperience()];case 1:e=t.sent();return[2,e.pageContext?e.pageContext.active:e.catalogDescriptor.active]}}))}))};SyncPollingService.prototype.getSyncPollingTypeFromInterval=function(e){return e===o.DEFAULT_SYNCHRONIZATION_POLLING.FAST_POLLING_TIME?o.DEFAULT_SYNCHRONIZATION_POLLING.SPEED_UP:o.DEFAULT_SYNCHRONIZATION_POLLING.SLOW_DOWN};SyncPollingService.prototype.getSyncPollingTypeFromInterval.$inject=["interval"];__decorate([r.InvalidateCache(o.cmsitemsEvictionTag),__metadata("design:type",Function),__metadata("design:paramtypes",[Array,Object]),__metadata("design:returntype",Promise)],SyncPollingService.prototype,"performSync",null);SyncPollingService=__decorate([r.SeDowngradeService(o.ISyncPollingService),r.GatewayProxied("getSyncStatus","fetchSyncStatus","changePollingSpeed","registerSyncPollingEvents","performSync"),__metadata("design:paramtypes",[r.LogService,r.IPageInfoService,r.IExperienceService,r.ICatalogService,o.SynchronizationResourceService,r.CrossFrameEventService,r.SystemEventService,r.TimerService])],SyncPollingService);return SyncPollingService}(o.ISyncPollingService);var Lo=function(){function CmssmarteditContainerModule(){}CmssmarteditContainerModule=__decorate([r.SeEntryModule("cmssmarteditContainer"),a.NgModule({imports:[o.CmsCommonsModule,f.BrowserModule,_.UpgradeModule,r.SharedComponentsModule,r.SeGenericEditorModule,r.MessageModule,r.TooltipModule,Pi,xn,Gn,r.SeTranslationModule.forChild(),r.L10nPipeModule,hi,Tt,tn,Eo,To,at,ii,h.FormsModule,r.SeRouteService.provideNgRoute([{path:""+r.NG_ROUTE_PREFIX+o.TRASHED_PAGE_LIST_PATH,component:Po,canActivate:[xo]},{path:""+r.NG_ROUTE_PREFIX+o.PAGE_LIST_PATH,component:So,canActivate:[xo],titleI18nKey:"se.cms.pagelist.title",priority:20},{path:""+r.NG_ROUTE_PREFIX+o.NAVIGATION_MANAGEMENT_PAGE_PATH,component:oi,titleI18nKey:"se.cms.toolbaritem.navigationmenu.name",canActivate:[xo],priority:10}],{useHash:true,initialNavigation:true,onSameUrlNavigation:"reload"})],providers:[V,tt,xo,oe,tt,ae,vn,q,_n,$,$e,Ve,Ue,T,L,Oo,U,Do,$i,He,Be,J,Ge,j,Z,Ai,yn,K,Li,B,de,H,pe,Oe,mo,Wi,{provide:v.HTTP_INTERCEPTORS,useClass:o.VersionExperienceInterceptor,multi:true},{provide:v.HTTP_INTERCEPTORS,useClass:r.ResponseAdapterInterceptor,multi:true},{provide:o.IPageContentSlotsComponentsRestService,useClass:Ao},{provide:o.ISyncPollingService,useClass:zo},{provide:o.IRemoveComponentService,useClass:ko},{provide:o.IPageService,useClass:No},{provide:o.IContextAwareEditableItemService,useClass:Mo},{provide:o.IEditorModalService,useClass:Q},{provide:o.IComponentVisibilityAlertService,useClass:ce},{provide:o.IComponentSharedService,useClass:Ro},{provide:o.ISlotRestrictionsService,useClass:Fo},r.moduleUtils.bootstrap((function(e,t){var n=e.getToolbarService("smartEditTrashPageToolbar");n.addItems([{key:"se.cms.pages.list.link",type:r.ToolbarItemType.TEMPLATE,component:bo,priority:1,section:r.ToolbarSection.left}]);t.register()}),[r.IToolbarServiceFactory,Oe])],declarations:[X,re,Gi,dn,cn,on,nn,sn],entryComponents:[X,re,Gi,dn,cn,on,nn,sn]})],CmssmarteditContainerModule);return CmssmarteditContainerModule}();t.ActionableAlertService=oe;t.CMS_EVENT_HIDE_REPLACE_PARENT_HOMEPAGE_INFO=W;t.CMS_EVENT_SHOW_REPLACE_PARENT_HOMEPAGE_INFO=G;t.CmsDragAndDropService=de;t.CmsDropdownItemComponent=Fe;t.CmsSmarteditServicesModule=z;t.CmssmarteditContainer=Jn;t.CmssmarteditContainerModule=Lo;t.ComponentMenuModule=Le;t.ComponentMenuService=ze;t.ComponentRestrictionsEditorComponent=We;t.ComponentVisibilityAlertService=ce;t.ContextAwareCatalogService=pe;t.ContextAwarePageStructureService=ne;t.DisplayConditionsEditorModel=H;t.ENABLE_CLONE_ON_DROP=le;t.EditorModalService=Q;t.GenericEditorModalService=Z;t.HomepageService=q;t.PRODUCT_CATEGORY_RESOURCE_BASE_URI=w;t.PRODUCT_CATEGORY_RESOURCE_URI=E;t.PRODUCT_CATEGORY_SEARCH_RESOURCE_URI=P;t.PageDisplayConditionsService=K;t.PageRestoredAlertService=ae;t.PageRestrictionsEditorComponent=st;t.PageRestrictionsModule=lt;t.ProductCategoryService=T;t.RulesAndPermissionsRegistrationService=Oe;t.SelectComponentTypeModalComponent=Ne;t.SubTypeSelectorComponent=xe},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var i=n(93);var o=n(148);var r=n(155);var a=n(0);var s=n(4);var c=n(22);var l=n(5);var d=n(49);var p=n(52);var u=n(156);(function(){var e=e||window.angular;var t=null;try{t=e.module("cmscommonsTemplates")}catch(e){}t=t||e.module("cmscommonsTemplates",[]);t.run(["$templateCache",function(e){e.put("SynchronizationPanelComponent.html",'<div class="se-sync-panel"><se-message *ngIf="message" [type]="message.type"><ng-container se-message-description>{{ message.description }}</ng-container></se-message><div class="se-sync-panel__sync-info" [style.visibility]="showItemList ? \'visible\': \'hidden\'"><se-spinner [isSpinning]="isLoading"></se-spinner><se-synchronization-panel-item *ngFor="let item of getAllItems(); let i = index" class="se-sync-panel__row" [index]="i" [item]="item" [rootItem]="getRootItem()" [selectAllLabel]="selectAllLabel" [disableList]="disableList" [disableItem]="api.disableItem" (selectionChange)="selectionChange($event)"></se-synchronization-panel-item></div><div class="se-sync-panel__footer" *ngIf="showFooter"><button class="se-sync-panel__sync-btn fd-button--emphasized" [disabled]="isSyncButtonDisabled()" (click)="syncItems()" translate="se.cms.actionitem.page.sync"></button></div></div>');e.put("SynchronizationPanelItemComponent.html",'<div class="se-sync-panel-item-checkbox fd-form__item"><input *ngIf="!item.isExternal" type="checkbox" [id]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__field fd-form__control" [(ngModel)]="item.selected" (ngModelChange)="onSelectionChange()" [attr.disabled]="isItemDisabled() ? true : null"/> <label *ngIf="index === 0" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label se-sync-panel-item-checkbox__label--select-all fd-form__label" [title]="getSelectAllLabel() | translate" [translate]="getSelectAllLabel()"></label> <label *ngIf="index !== 0 && !item.isExternal" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [title]="item.name | translate" [translate]="item.name"></label><se-tooltip *ngIf="index !== 0 && item.isExternal" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><label se-tooltip-trigger [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [translate]="item.name"></label><div se-tooltip-body translate="se.cms.synchronization.slot.external.component"></div></se-tooltip></div><span *ngIf="showPopoverOverSyncIcon()"><se-tooltip [isChevronVisible]="true" [appendTo]="\'body\'" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [title]="getInfoTitle()" class="pull-right se-sync-panel-item-info-icon" [ngClass]="{ \'se-sync-panel--icon-globe\': item.isExternal }"><ng-container *ngIf="!item.isExternal" se-tooltip-trigger><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></ng-container><span *ngIf="item.isExternal" class="sap-icon--globe" se-tooltip-trigger></span><div se-tooltip-body><ng-container *ngIf="!item.isExternal"><div *ngFor="let dependentItem of item.dependentItemTypesOutOfSync">{{ dependentItem.i18nKey | translate }}</div></ng-container><div *ngIf="item.isExternal">{{ item.catalogVersionName | seL10n | async }}</div></div></se-tooltip></span><span *ngIf="!showPopoverOverSyncIcon()" class="pull-right se-sync-panel-item-info-icon"><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></span><ng-template #syncInfoIcon><span [attr.status]="item.status" class="se-sync-panel-item-info-icon__icon" [ngClass]="{                \'sap-icon--accept\': isInSync(),                \'sap-icon--message-warning\': !isInSync()            }"></span></ng-template>')}])})();function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var m=function(){AssetsService.$inject=["testModeService"];function AssetsService(e){this.testModeService=e;this.TEST_ASSETS_SRC="/web/webroot";this.PROD_ASSETS_SRC="/cmssmartedit"}AssetsService.prototype.getAssetsRoot=function(){return this.testModeService.isE2EMode()?this.TEST_ASSETS_SRC:this.PROD_ASSETS_SRC};AssetsService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.TestModeService])],AssetsService);return AssetsService}();var g=function(){function IPageService(){}IPageService.prototype.getPageById=function(e){"proxyFunction";return null};IPageService.prototype.getPageByUuid=function(e){"proxyFunction";return null};IPageService.prototype.getCurrentPageInfo=function(){"proxyFunction";return null};IPageService.prototype.getCurrentPageInfoByVersion=function(e){"proxyFunction";return null};IPageService.prototype.isPagePrimary=function(e){"proxyFunction";return null};IPageService.prototype.isPagePrimaryWithContext=function(e,t){"proxyFunction";return null};IPageService.prototype.getPrimaryPage=function(e){"proxyFunction";return null};IPageService.prototype.primaryPageForPageTypeExists=function(e,t){"proxyFunction";return null};IPageService.prototype.getPaginatedPrimaryPagesForPageType=function(e,t,n){"proxyFunction";return null};IPageService.prototype.getVariationPages=function(e){"proxyFunction";return null};IPageService.prototype.updatePageById=function(e,t){"proxyFunction";return null};IPageService.prototype.forcePageApprovalStatus=function(e){"proxyFunction";return null};IPageService.prototype.isPageApproved=function(e){"proxyFunction";return null};IPageService.prototype.buildUriContextForCurrentPage=function(e,t,n){"proxyFunction";return null};return IPageService}();var h="WORKFLOW_CREATED_EVENT";var v="WORKFLOW_FINISHED_EVENT";var f=new i.EvictionTag({event:h});var _=new i.EvictionTag({event:v});var y=new i.EvictionTag({event:"WORKFLOW_TASKS_MENU_OPENED_EVENT"});var C=new i.EvictionTag({event:"SLOT_UPDATE_EVENT"});var S=function(){function IContextAwareEditableItemService(){}IContextAwareEditableItemService.prototype.isItemEditable=function(e){"proxyFunction";return null};return IContextAwareEditableItemService}();var b="CURRENT_CONTEXT_CATALOG";var I="CURRENT_CONTEXT_CATALOG_VERSION";var w="CURRENT_CONTEXT_SITE_ID";var E="CURRENT_PAGE_CONTEXT_CATALOG";var P="CURRENT_PAGE_CONTEXT_CATALOG_VERSION";var A="/cmswebservices/v1/types";var D="/cmswebservices/v1/sites/"+w+"/catalogs/"+b+"/versions/"+I+"/items";var O="/cmswebservices/v1/sites/"+i.PAGE_CONTEXT_SITE_ID+"/catalogs/"+E+"/versions/"+P+"/pagescontentslotscomponents";var R="/cmswebservices/v1/catalogs/"+E+"/versions/"+P+"/pages/:pageUid/contentslots/:slotUid/typerestrictions";var M="/cmswebservices/v1/catalogs/"+E+"/versions/"+P+"/pages/:pageUid/typerestrictions";var x="/cmswebservices/v1/sites/"+w+"/catalogs/"+b+"/versions/"+I+"/pages";var N="/pages/:siteId/:catalogId/:catalogVersion";var k="/trashedpages/:siteId/:catalogId/:catalogVersion";var F="/cmswebservices/v1/sites/"+i.PAGE_CONTEXT_SITE_ID+"/catalogs/"+E+"/versions/"+P+"/pagescontentslots";var z="/cmswebservices/v1/sites/:"+w+"/catalogs/:"+b+"/versions/:"+I+"/pagetemplates";var L="/navigations/:siteId/:catalogId/:catalogVersion";var V="/cmswebservices/v1/sites/:"+w+"/catalogs/:"+b+"/versions/:"+I+"/navigations";var $="/cmswebservices/v1/sites/:"+w+"/catalogs/:"+b+"/versions/:"+I+"/navigations/:navigationUid/entries";var U="/cmswebservices/v1/navigationentrytypes";var j="/cmswebservices/v1/sites/"+i.PAGE_CONTEXT_SITE_ID+"/catalogs/"+E+"/versions/"+P+"/pagesrestrictions";var B="/cmswebservices/v1/sites/:siteUID/catalogs/:catalogId/versions/:catalogVersion/pagesrestrictions";var H="/cmswebservices/v1/restrictiontypes";var G="/cmswebservices/v1/pagetypesrestrictiontypes";var W="/cmswebservices/v1/pagetypes";var q="/cmssmarteditwebservices/v1/sites/"+i.PAGE_CONTEXT_SITE_ID+"/catalogs/"+E+"/versions/"+P+"/synchronizations/versions/:target/pages/:pageUid";var K="/cmssmarteditwebservices/v1/sites/"+w+"/catalogs/"+b+"/versions/"+I+"/synchronizations/versions/:target";var Y=function(){function CmsResourceLocationsModule(){}CmsResourceLocationsModule=__decorate([i.SeModule({providers:[i.diNameUtils.makeValueProvider({CONTEXT_SITE_ID:w}),i.diNameUtils.makeValueProvider({CONTEXT_CATALOG:b}),i.diNameUtils.makeValueProvider({CONTEXT_CATALOG_VERSION:I}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_SITE_ID:i.PAGE_CONTEXT_SITE_ID}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_CATALOG:E}),i.diNameUtils.makeValueProvider({PAGE_CONTEXT_CATALOG_VERSION:P}),i.diNameUtils.makeValueProvider({TYPES_RESOURCE_URI:A}),i.diNameUtils.makeValueProvider({ITEMS_RESOURCE_URI:D}),i.diNameUtils.makeValueProvider({PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI:O}),i.diNameUtils.makeValueProvider({CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI:R}),i.diNameUtils.makeValueProvider({CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI:M}),i.diNameUtils.makeValueProvider({PAGES_LIST_RESOURCE_URI:x}),i.diNameUtils.makeValueProvider({PAGE_LIST_PATH:N}),i.diNameUtils.makeValueProvider({TRASHED_PAGE_LIST_PATH:k}),i.diNameUtils.makeValueProvider({PAGES_CONTENT_SLOT_RESOURCE_URI:F}),i.diNameUtils.makeValueProvider({PAGE_TEMPLATES_URI:z}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_PAGE_PATH:L}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_RESOURCE_URI:V}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI:$}),i.diNameUtils.makeValueProvider({NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI:U}),i.diNameUtils.makeValueProvider({CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI:j}),i.diNameUtils.makeValueProvider({PAGES_RESTRICTIONS_RESOURCE_URI:B}),i.diNameUtils.makeValueProvider({RESTRICTION_TYPES_URI:H}),i.diNameUtils.makeValueProvider({PAGE_TYPES_RESTRICTION_TYPES_URI:G}),i.diNameUtils.makeValueProvider({GET_PAGE_SYNCHRONIZATION_RESOURCE_URI:q}),i.diNameUtils.makeValueProvider({POST_PAGE_SYNCHRONIZATION_RESOURCE_URI:K})]})],CmsResourceLocationsModule);return CmsResourceLocationsModule}();(function(e){e["DRAG_STARTED"]="CMS_DRAG_STARTED";e["DRAG_STOPPED"]="CMS_DRAG_STOPPED";e["DRAG_OVER"]="CMS_DRAG_OVER";e["DRAG_LEAVE"]="CMS_DRAG_LEAVE"})(t.DRAG_AND_DROP_EVENTS||(t.DRAG_AND_DROP_EVENTS={}));var X="COMPONENT_CREATED_EVENT";var Z="COMPONENT_REMOVED_EVENT";var Q="COMPONENT_UPDATED_EVENT";var J="CMSITEMS_UPDATE";var ee={ALERT_TEMPLATE:"<div><p>{{ $alertInjectedCtrl.description | translate: $alertInjectedCtrl.descriptionDetails }}</p><div><a data-ng-click='alert.hide(); $alertInjectedCtrl.onClick();'>{{ $alertInjectedCtrl.hyperlinkLabel | translate: $alertInjectedCtrl.hyperlinkDetails }}</a></div></div>",TIMEOUT_DURATION:2e4,ALERT_TYPES:{INFO:"INFO",ALERT:"ALERT",DANGER:"DANGER",WARNING:"WARNING",SUCCESS:"SUCCESS"}};var te="EVENT_PAGE_STATUS_UPDATED_IN_ACTIVE_CV";var ne="CMSNavigationNode";var ie="root";var oe="/cmssmartedit/images";var re="/cmswebservices/v1/sites/"+i.CONTEXT_SITE_ID+"/cmsitems";var ae=new i.EvictionTag({event:J});var se=function(){CmsitemsRestService.$inject=["restServiceFactory","catalogService"];function CmsitemsRestService(e,t){this.restServiceFactory=e;this.catalogService=t;this.cmsitemsUuidsUri="/cmswebservices/v1/sites/"+i.CONTEXT_SITE_ID+"/cmsitems/uuids";this.resource=e.get(re);this.versionedResource=e.get(re+"/:itemUuid");this.uuidsResource=e.get(this.cmsitemsUuidsUri)}CmsitemsRestService.prototype.getById=function(e){return this.resource.getById(e)};CmsitemsRestService.prototype.getById.$inject=["cmsitemUuid"];CmsitemsRestService.prototype.getByIdAndVersion=function(e,t){return this.versionedResource.get({itemUuid:e,versionId:t})};CmsitemsRestService.prototype.getByIdAndVersion.$inject=["itemUuid","versionId"];CmsitemsRestService.prototype.get=function(e){var t=this;return this.catalogService.retrieveUriContext().then((function(n){var i={catalogId:e.catalogId||n.CURRENT_CONTEXT_CATALOG,catalogVersion:e.catalogVersion||n.CURRENT_CONTEXT_CATALOG_VERSION};e=o.merge(i,e);return t.restServiceFactory.get(re).get(e)}))};CmsitemsRestService.prototype.get.$inject=["queryParams"];CmsitemsRestService.prototype.getByIds=function(e,t){return this.getByIdsNoCache(e,t)};CmsitemsRestService.prototype.getByIds.$inject=["uuids","fields"];CmsitemsRestService.prototype.update=function(e,t){return this.resource.update(e,t)};CmsitemsRestService.prototype.update.$inject=["cmsitem","options"];CmsitemsRestService.prototype.delete=function(e){return this.resource.remove({identifier:e})};CmsitemsRestService.prototype.delete.$inject=["identifier"];CmsitemsRestService.prototype.create=function(e){var t=this;return this.catalogService.getCatalogVersionUUid().then((function(n){e.catalogVersion=e.catalogVersion||n;if(e.onlyOneRestrictionMustApply===undefined){e.onlyOneRestrictionMustApply=false}return t.resource.save(e)}))};CmsitemsRestService.prototype.create.$inject=["cmsitem"];CmsitemsRestService.prototype.getByIdsNoCache=function(e,t){var n=this;e=Array.from(new Set(e));return this.catalogService.getCatalogVersionUUid().then((function(i){var o={catalogVersion:i,uuids:e,fields:t};return n.uuidsResource.save(o)}))};CmsitemsRestService.prototype.getByIdsNoCache.$inject=["uuids","fields"];var e;__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,ae]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"getById",null);__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,ae]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String,String]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"getByIdAndVersion",null);__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,ae]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"get",null);__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.userEvictionTag,ae]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Array,String]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"getByIds",null);__decorate([i.InvalidateCache(ae),__metadata("design:type",Function),__metadata("design:paramtypes",[typeof(e=typeof T!=="undefined"&&T)==="function"?e:Object,Object]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"update",null);__decorate([i.InvalidateCache(ae),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],CmsitemsRestService.prototype,"delete",null);CmsitemsRestService=__decorate([i.SeDowngradeService(),i.OperationContextRegistered(re.replace(/CONTEXT_SITE_ID/,":CONTEXT_SITE_ID"),"CMS"),__metadata("design:paramtypes",[i.IRestServiceFactory,i.ICatalogService])],CmsitemsRestService);return CmsitemsRestService}();var ce=function(){function IPageContentSlotsComponentsRestService(){}IPageContentSlotsComponentsRestService.prototype.clearCache=function(){"proxyFunction"};IPageContentSlotsComponentsRestService.prototype.getSlotsToComponentsMapForPageUid=function(e){"proxyFunction";return null};IPageContentSlotsComponentsRestService.prototype.getComponentsForSlot=function(e){"proxyFunction";return null};return IPageContentSlotsComponentsRestService}();var le=function(){SynchronizationResourceService.$inject=["restServiceFactory"];function SynchronizationResourceService(e){this.restServiceFactory=e}SynchronizationResourceService.prototype.getPageSynchronizationGetRestService=function(e){var t=new i.URIBuilder(q).replaceParams(e).build();return this.restServiceFactory.get(t)};SynchronizationResourceService.prototype.getPageSynchronizationGetRestService.$inject=["uriContext"];SynchronizationResourceService.prototype.getPageSynchronizationPostRestService=function(e){var t=new i.URIBuilder(K).replaceParams(e).build();return this.restServiceFactory.get(t)};SynchronizationResourceService.prototype.getPageSynchronizationPostRestService.$inject=["uriContext"];SynchronizationResourceService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.IRestServiceFactory])],SynchronizationResourceService);return SynchronizationResourceService}();var de=function(){ComponentService.$inject=["restServiceFactory","cmsitemsRestService","pageInfoService","pageContentSlotsComponentsRestService"];function ComponentService(e,t,n,i){this.restServiceFactory=e;this.cmsitemsRestService=t;this.pageInfoService=n;this.pageContentSlotsComponentsRestService=i;this.pageComponentTypesRestServiceURI="/cmssmarteditwebservices/v1/catalogs/:catalogId/versions/:catalogVersion/pages/:pageId/types";this.pageComponentTypesRestService=this.restServiceFactory.get(this.pageComponentTypesRestServiceURI);this.restServiceForAddExistingComponent=this.restServiceFactory.get(O)}ComponentService.prototype.getSupportedComponentTypesForCurrentPage=function(e){return this.pageComponentTypesRestService.get(e)};ComponentService.prototype.getSupportedComponentTypesForCurrentPage.$inject=["payload"];ComponentService.prototype.createNewComponent=function(e,t){var n={name:e.name,slotId:e.targetSlotId,pageId:e.pageId,position:e.position,typeCode:e.componentType,itemtype:e.componentType,catalogVersion:e.catalogVersionUuid,uid:"",uuid:""};if(typeof t==="object"){for(var i in t){if(t.hasOwnProperty(i)){n[i]=t[i]}}}else if(t){throw new Error("ComponentService.createNewComponent() - Illegal componentPayload - ["+t+"]")}return this.cmsitemsRestService.create(n)};ComponentService.prototype.createNewComponent.$inject=["componentInfo","componentPayload"];ComponentService.prototype.updateComponent=function(e){return this.cmsitemsRestService.update(e)};ComponentService.prototype.updateComponent.$inject=["componentPayload"];ComponentService.prototype.addExistingComponent=function(e,t,n,i){return this.restServiceForAddExistingComponent.save({pageId:e,slotId:n,componentId:t,position:i})};ComponentService.prototype.addExistingComponent.$inject=["pageId","componentId","slotId","position"];ComponentService.prototype.loadComponentItem=function(e){return this.cmsitemsRestService.getById(e)};ComponentService.prototype.loadComponentItem.$inject=["id"];ComponentService.prototype.loadPagedComponentItemsByCatalogVersion=function(e){var t={pageSize:e.pageSize,currentPage:e.page,mask:e.mask,sort:"name",typeCode:"AbstractCMSComponent",catalogId:e.catalogId,catalogVersion:e.catalogVersion,itemSearchParams:""};return this.cmsitemsRestService.get(t)};ComponentService.prototype.loadPagedComponentItemsByCatalogVersion.$inject=["payload"];ComponentService.prototype.getSlotsForComponent=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.getContentSlotsForComponents()];case 1:t=n.sent();return[2,Object.entries(t).filter((function(t){var n=t[1];return n.find((function(t){return t.uuid===e}))})).map((function(e){var t=e[0];return t}))]}}))}))};ComponentService.prototype.getSlotsForComponent.$inject=["componentUuid"];ComponentService.prototype.getContentSlotsForComponents=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.pageInfoService.getPageUID()];case 1:e=t.sent();return[4,this.pageContentSlotsComponentsRestService.getSlotsToComponentsMapForPageUid(e)];case 2:return[2,t.sent()]}}))}))};__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.pageChangeEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Object]),__metadata("design:returntype",Promise)],ComponentService.prototype,"getSupportedComponentTypesForCurrentPage",null);ComponentService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.IRestServiceFactory,se,i.IPageInfoService,ce])],ComponentService);return ComponentService}();(function(e){e["ContentPage"]="ContentPage";e["CategoryPage"]="CategoryPage";e["ProductPage"]="ProductPage";e["EmailPage"]="EmailPage"})(t.CMSPageTypes||(t.CMSPageTypes={}));(function(e){e["ACTIVE"]="ACTIVE";e["DELETED"]="DELETED"})(t.CMSPageStatus||(t.CMSPageStatus={}));(function(e){e["APPROVED"]="APPROVED";e["CHECK"]="CHECK";e["UNAPPROVED"]="UNAPPROVED"})(t.CmsApprovalStatus||(t.CmsApprovalStatus={}));(function(e){e["TEMPLATE"]="TEMPLATE";e["PAGE"]="PAGE";e["OVERRIDE"]="OVERRIDE"})(t.SlotStatus||(t.SlotStatus={}));(function(e){e["RUNNING"]="RUNNING";e["ERROR"]="ERROR";e["FAILURE"]="FAILURE";e["FINISHED"]="FINISHED";e["UNKNOWN"]="UNKNOWN";e["ABORTED"]="ABORTED";e["PENDING"]="PENDING"})(t.JOB_STATUS||(t.JOB_STATUS={}));(function(e){e["COMPONENT"]="COMPONENT";e["PREVIEW"]="PREVIEW";e["PAGE"]="PAGE";e["RESTRICTION"]="RESTRICTION"})(t.StructureTypeCategory||(t.StructureTypeCategory={}));var pe={UNAVAILABLE:"UNAVAILABLE",IN_SYNC:"IN_SYNC",NOT_SYNC:"NOT_SYNC",IN_PROGRESS:"IN_PROGRESS",SYNC_FAILED:"SYNC_FAILED"};var ue={SLOW_POLLING_TIME:2e4,FAST_POLLING_TIME:4e3,SPEED_UP:"syncPollingSpeedUp",SLOW_DOWN:"syncPollingSlowDown",FAST_FETCH:"syncFastFetch",FETCH_SYNC_STATUS_ONCE:"fetchSyncStatusOnce"};var me={CATALOG_SYNCHRONIZED:"CATALOG_SYNCHRONIZED_EVENT"};(function(e){e["Unavailable"]="UNAVAILABLE";e["InSync"]="IN_SYNC";e["NotSync"]="NOT_SYNC";e["InProgress"]="IN_PROGRESS";e["SyncFailed"]="SYNC_FAILED"})(t.SynchronizationStatus||(t.SynchronizationStatus={}));var ge=function(){function SynchronizationUtils(){}SynchronizationUtils.prototype.isInSync=function(e){return e.status===t.SynchronizationStatus.InSync};SynchronizationUtils.prototype.isInNotSync=function(e){return e.status===t.SynchronizationStatus.NotSync};SynchronizationUtils.prototype.isSyncInFailed=function(e){return e.status===t.SynchronizationStatus.SyncFailed};SynchronizationUtils.prototype.isSyncInProgress=function(e){return e.status===t.SynchronizationStatus.InProgress};SynchronizationUtils.prototype.isExternalItem=function(e){return!!e.isExternal};return SynchronizationUtils}();var he=new ge;var ve=function(){function SyncQueue(){this.items=[]}SyncQueue.prototype.getItems=function(){return this.items};SyncQueue.prototype.addItems=function(e){this.items=this.items.concat(e)};SyncQueue.prototype.removeItem=function(e){this.items=this.items.filter((function(t){return t!==e.itemId}))};SyncQueue.prototype.itemExists=function(e){return this.getItems().includes(e.itemId)};SyncQueue.prototype.isEmpty=function(){return this.getItems().length===0};SyncQueue.prototype.hasAtLeastOneItem=function(){return this.getItems().length>0};return SyncQueue}();window.__smartedit__.addDecoratorPayload("Component","SynchronizationPanelComponent",{selector:"se-synchronization-panel",template:'<div class="se-sync-panel"><se-message *ngIf="message" [type]="message.type"><ng-container se-message-description>{{ message.description }}</ng-container></se-message><div class="se-sync-panel__sync-info" [style.visibility]="showItemList ? \'visible\': \'hidden\'"><se-spinner [isSpinning]="isLoading"></se-spinner><se-synchronization-panel-item *ngFor="let item of getAllItems(); let i = index" class="se-sync-panel__row" [index]="i" [item]="item" [rootItem]="getRootItem()" [selectAllLabel]="selectAllLabel" [disableList]="disableList" [disableItem]="api.disableItem" (selectionChange)="selectionChange($event)"></se-synchronization-panel-item></div><div class="se-sync-panel__footer" *ngIf="showFooter"><button class="se-sync-panel__sync-btn fd-button--emphasized" [disabled]="isSyncButtonDisabled()" (click)="syncItems()" translate="se.cms.actionitem.page.sync"></button></div></div>',styles:[".se-sync-panel__sync-info{max-height:300px;overflow-y:auto}.se-sync-panel__row{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:0 20px;height:40px;border-bottom:1px solid #d9d9d9}.se-sync-panel__row:first-child{height:50px}.se-sync-panel__row:last-child{border-bottom:none}.se-sync-panel__footer{padding:20px;border-top:1px solid #d9d9d9;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.se-sync-panel__sync-btn{text-transform:capitalize;padding:0 20px;margin-left:8px}"]});var fe=function(){SynchronizationPanelComponent.$inject=["waitDialogService","logService","crossFrameEventService","systemEventService","timerService","alertService","translateService","sharedDataService","catalogService"];function SynchronizationPanelComponent(e,t,n,i,o,r,s,c,l){var d=this;this.waitDialogService=e;this.logService=t;this.crossFrameEventService=n;this.systemEventService=i;this.timerService=o;this.alertService=r;this.translateService=s;this.sharedDataService=c;this.catalogService=l;this.getApi=new a.EventEmitter;this.selectedItemsUpdate=new a.EventEmitter;this.syncStatusReady=new a.EventEmitter;this.showFooter=true;this.showItemList=true;this.message=null;this.disableList=false;this.isLoading=false;this.SYNC_POLLING_SPEED_PREFIX="syncPanel-";this.syncQueue=new ve;this.api={selectAll:function(){if(!d.isRootItemExist()){throw new Error("Synchronization status is not available. The 'selectAll' function should be used with 'onSyncStatusReady' event.")}d.toogleRootItem(true)},displayItemList:function(e){d.showItemList=e},disableItemList:function(e){d.disableList=e},setMessage:function(e){d.message=e},disableItem:null}}SynchronizationPanelComponent.prototype.ngOnInit=function(){var e=this;this.getApi.emit(this.api);this.unsubscribeFastFetch=this.crossFrameEventService.subscribe(ue.FAST_FETCH,(function(t,n){return e.fetchSyncStatus(n)}));this.fetchSyncStatus();this.resynchTimer=this.timerService.createTimer((function(){return e.fetchSyncStatus()}),ue.SLOW_POLLING_TIME);this.resynchTimer.start()};SynchronizationPanelComponent.prototype.ngOnDestroy=function(){var e=this;var t=this.timerService.createTimer((function(){if(e.syncQueue.isEmpty()){e.resynchTimer.teardown();e.unsubscribeFastFetch();e.systemEventService.publishAsync(ue.SLOW_DOWN,e.SYNC_POLLING_SPEED_PREFIX+e.itemId);e.toggleWaitModal(false);t.teardown()}else{e.toggleWaitModal(true)}}),200);t.start()};SynchronizationPanelComponent.prototype.syncItems=function(){var e=this;var t=this.getSelectedItemPayloads();var n=t.map((function(e){return e.itemId}));this.syncQueue.addItems(n);if(this.atLeastOneSelectedItemExists()){this.toggleWaitModal(true);return this.performSync(t).then((function(){e.speedUpPolling()}),(function(){e.logService.warn("[synchronizationPanel] - Could not perform synchronization.");e.toggleWaitModal(false)}))}else{return Promise.resolve()}};SynchronizationPanelComponent.prototype.selectionChange=function(e){if(e===0){this.toggleAllDependentItems()}this.saveCurrentlySelectedItemsInStorage();this.selectedItemsUpdate.emit(this.getSelectedItems())};SynchronizationPanelComponent.prototype.selectionChange.$inject=["index"];SynchronizationPanelComponent.prototype.isSyncButtonDisabled=function(){return this.disableList||this.noSelectedItems()||this.syncQueue.hasAtLeastOneItem()};SynchronizationPanelComponent.prototype.fetchSyncStatus=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:if(e&&e.itemId!==this.itemId){return[2]}this.isLoading=true;return[4,this.getSyncStatus(this.itemId)];case 1:t=n.sent();this.setRootItem(t);this.restoreSelectionAfterFetchingUpdatedItems();this.markExternalItems();this.showSyncErrors();this.updateSyncQueue();this.setExternalItemsCatalogVersionName();if(this.syncQueue.isEmpty()){this.slowDownPolling();this.toggleWaitModal(false)}this.syncStatusReady.emit(this.getRootItem());this.isLoading=false;return[2]}}))}))};SynchronizationPanelComponent.prototype.fetchSyncStatus.$inject=["eventData"];SynchronizationPanelComponent.prototype.markExternalItems=function(){var e=this.getRootItem();var t=e.catalogVersionUuid;var n=this.getDependentItems();n.forEach((function(e){e.isExternal=e.catalogVersionUuid!==t}))};SynchronizationPanelComponent.prototype.getAllItems=function(){return this.isRootItemExist()?__spreadArrays([this.getRootItem()],this.getDependentItems()):[]};SynchronizationPanelComponent.prototype.setExternalItemsCatalogVersionName=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i;var o=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.getCurrentExperience()];case 1:e=r.sent();t=this.getAllItems();n=t.filter((function(e){return he.isExternalItem(e)}));i=n.map((function(t){return new Promise((function(n){return __awaiter(o,void 0,void 0,(function(){var i;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.catalogService.getCatalogVersionByUuid(t.catalogVersionUuid,e.siteDescriptor.uid)];case 1:i=o.sent().catalogName;t.catalogVersionName=i;n(t);return[2]}}))}))}))}));return[4,Promise.all(i)];case 2:r.sent();return[2]}}))}))};SynchronizationPanelComponent.prototype.slowDownPolling=function(){this.resynchTimer.restart(ue.SLOW_POLLING_TIME);this.systemEventService.publishAsync(ue.SLOW_DOWN,this.SYNC_POLLING_SPEED_PREFIX+this.itemId)};SynchronizationPanelComponent.prototype.speedUpPolling=function(){this.resynchTimer.restart(ue.FAST_POLLING_TIME);this.systemEventService.publishAsync(ue.SPEED_UP,this.SYNC_POLLING_SPEED_PREFIX+this.itemId)};SynchronizationPanelComponent.prototype.setRootItem=function(e){this.rootItem=e};SynchronizationPanelComponent.prototype.setRootItem.$inject=["rootItem"];SynchronizationPanelComponent.prototype.getRootItem=function(){return this.rootItem};SynchronizationPanelComponent.prototype.isRootItemExist=function(){return this.getRootItem()!=null};SynchronizationPanelComponent.prototype.getDependentItems=function(){return this.isRootItemExist()?this.getRootItem().selectedDependencies:[]};SynchronizationPanelComponent.prototype.getCurrentExperience=function(){return this.sharedDataService.get(i.EXPERIENCE_STORAGE_KEY)};SynchronizationPanelComponent.prototype.getSelectedItemPayloads=function(){return this.getSelectedItems().map((function(e){var t=e.itemId,n=e.itemType;return{itemId:t,itemType:n}}))};SynchronizationPanelComponent.prototype.getSelectedItems=function(){return this.getAllItems().filter((function(e){return e.selected}))};SynchronizationPanelComponent.prototype.toogleRootItem=function(e){if(this.isRootItemExist()){var t=this.getRootItem();t.selected=e;this.selectionChange(0)}};SynchronizationPanelComponent.prototype.toogleRootItem.$inject=["selected"];SynchronizationPanelComponent.prototype.toggleAllDependentItems=function(){var e=this;this.getDependentItems().filter((function(e){return!he.isInSync(e)})).filter((function(e){return!he.isExternalItem(e)})).forEach((function(t){t.selected=e.getRootItem().selected}))};SynchronizationPanelComponent.prototype.toggleWaitModal=function(e){if(e){this.waitDialogService.showWaitModal("se.sync.synchronizing")}else{this.waitDialogService.hideWaitModal()}};SynchronizationPanelComponent.prototype.toggleWaitModal.$inject=["show"];SynchronizationPanelComponent.prototype.saveCurrentlySelectedItemsInStorage=function(){this.selectedItemsStorage=this.getSelectedItems()};SynchronizationPanelComponent.prototype.getSelectedItemsFromStorage=function(){return this.selectedItemsStorage||[]};SynchronizationPanelComponent.prototype.restoreSelectionAfterFetchingUpdatedItems=function(){var e=this.getSelectedItemsFromStorage();var t=e.map((function(e){return e.itemId}));this.getAllItems().filter((function(e){return!he.isInSync(e)})).filter((function(e){return t.indexOf(e.itemId)>-1})).forEach((function(e){return e.selected=true}))};SynchronizationPanelComponent.prototype.updateSyncQueue=function(){var e=this;var t=this.syncQueue.hasAtLeastOneItem();var n=this.getAllItems();n.filter((function(t){return e.syncQueue.itemExists(t)})).filter((function(e){return!(he.isSyncInProgress(e)||he.isInNotSync(e))})).forEach((function(t){return e.syncQueue.removeItem(t)}));n.filter((function(t){return!e.syncQueue.itemExists(t)})).filter((function(e){return he.isSyncInProgress(e)})).forEach((function(t){return e.syncQueue.addItems([t.itemId])}));var o=this.syncQueue.isEmpty();if(t&&o){this.systemEventService.publishAsync(i.EVENT_CONTENT_CATALOG_UPDATE)}};SynchronizationPanelComponent.prototype.showSyncErrors=function(){var e=this;var t=this.getAllItems().filter((function(t){return e.syncQueue.itemExists(t)})).filter((function(e){return he.isSyncInFailed(e)})).map((function(e){return e.itemId}));if(t.length>0){this.alertService.showDanger({message:this.translateService.instant("se.cms.synchronization.panel.failure.message",{items:t.join(" ")})})}};SynchronizationPanelComponent.prototype.atLeastOneSelectedItemExists=function(){return this.getSelectedItems().length>0};SynchronizationPanelComponent.prototype.noSelectedItems=function(){return this.getSelectedItems().length===0};__decorate([a.Input(),__metadata("design:type",String)],SynchronizationPanelComponent.prototype,"itemId",void 0);__decorate([a.Input(),__metadata("design:type",String)],SynchronizationPanelComponent.prototype,"selectAllLabel",void 0);__decorate([a.Input(),__metadata("design:type",Function)],SynchronizationPanelComponent.prototype,"getSyncStatus",void 0);__decorate([a.Input(),__metadata("design:type",Function)],SynchronizationPanelComponent.prototype,"performSync",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],SynchronizationPanelComponent.prototype,"showFooter",void 0);__decorate([a.Output(),__metadata("design:type",Object)],SynchronizationPanelComponent.prototype,"getApi",void 0);__decorate([a.Output(),__metadata("design:type",Object)],SynchronizationPanelComponent.prototype,"selectedItemsUpdate",void 0);__decorate([a.Output(),__metadata("design:type",Object)],SynchronizationPanelComponent.prototype,"syncStatusReady",void 0);SynchronizationPanelComponent=__decorate([i.SeDowngradeComponent(),a.Component({selector:"se-synchronization-panel",template:'<div class="se-sync-panel"><se-message *ngIf="message" [type]="message.type"><ng-container se-message-description>{{ message.description }}</ng-container></se-message><div class="se-sync-panel__sync-info" [style.visibility]="showItemList ? \'visible\': \'hidden\'"><se-spinner [isSpinning]="isLoading"></se-spinner><se-synchronization-panel-item *ngFor="let item of getAllItems(); let i = index" class="se-sync-panel__row" [index]="i" [item]="item" [rootItem]="getRootItem()" [selectAllLabel]="selectAllLabel" [disableList]="disableList" [disableItem]="api.disableItem" (selectionChange)="selectionChange($event)"></se-synchronization-panel-item></div><div class="se-sync-panel__footer" *ngIf="showFooter"><button class="se-sync-panel__sync-btn fd-button--emphasized" [disabled]="isSyncButtonDisabled()" (click)="syncItems()" translate="se.cms.actionitem.page.sync"></button></div></div>',styles:[".se-sync-panel__sync-info{max-height:300px;overflow-y:auto}.se-sync-panel__row{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:0 20px;height:40px;border-bottom:1px solid #d9d9d9}.se-sync-panel__row:first-child{height:50px}.se-sync-panel__row:last-child{border-bottom:none}.se-sync-panel__footer{padding:20px;border-top:1px solid #d9d9d9;display:flex;flex-direction:row;align-items:center;justify-content:flex-end}.se-sync-panel__sync-btn{text-transform:capitalize;padding:0 20px;margin-left:8px}"]}),__metadata("design:paramtypes",[i.IWaitDialogService,i.LogService,i.CrossFrameEventService,i.SystemEventService,i.TimerService,i.IAlertService,r.TranslateService,i.ISharedDataService,i.ICatalogService])],SynchronizationPanelComponent);return SynchronizationPanelComponent}();window.__smartedit__.addDecoratorPayload("Component","SynchronizationPanelItemComponent",{selector:"se-synchronization-panel-item",template:'<div class="se-sync-panel-item-checkbox fd-form__item"><input *ngIf="!item.isExternal" type="checkbox" [id]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__field fd-form__control" [(ngModel)]="item.selected" (ngModelChange)="onSelectionChange()" [attr.disabled]="isItemDisabled() ? true : null"/> <label *ngIf="index === 0" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label se-sync-panel-item-checkbox__label--select-all fd-form__label" [title]="getSelectAllLabel() | translate" [translate]="getSelectAllLabel()"></label> <label *ngIf="index !== 0 && !item.isExternal" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [title]="item.name | translate" [translate]="item.name"></label><se-tooltip *ngIf="index !== 0 && item.isExternal" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><label se-tooltip-trigger [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [translate]="item.name"></label><div se-tooltip-body translate="se.cms.synchronization.slot.external.component"></div></se-tooltip></div><span *ngIf="showPopoverOverSyncIcon()"><se-tooltip [isChevronVisible]="true" [appendTo]="\'body\'" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [title]="getInfoTitle()" class="pull-right se-sync-panel-item-info-icon" [ngClass]="{ \'se-sync-panel--icon-globe\': item.isExternal }"><ng-container *ngIf="!item.isExternal" se-tooltip-trigger><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></ng-container><span *ngIf="item.isExternal" class="sap-icon--globe" se-tooltip-trigger></span><div se-tooltip-body><ng-container *ngIf="!item.isExternal"><div *ngFor="let dependentItem of item.dependentItemTypesOutOfSync">{{ dependentItem.i18nKey | translate }}</div></ng-container><div *ngIf="item.isExternal">{{ item.catalogVersionName | seL10n | async }}</div></div></se-tooltip></span><span *ngIf="!showPopoverOverSyncIcon()" class="pull-right se-sync-panel-item-info-icon"><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></span><ng-template #syncInfoIcon><span [attr.status]="item.status" class="se-sync-panel-item-info-icon__icon" [ngClass]="{\n                \'sap-icon--accept\': isInSync(),\n                \'sap-icon--message-warning\': !isInSync()\n            }"></span></ng-template>',styles:[".se-sync-panel-item-checkbox{display:flex;flex-direction:row;align-items:center;margin:0!important}.se-sync-panel-item-checkbox__field{margin:0}.se-sync-panel-item-checkbox__label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:190px!important;margin:0!important;padding-left:8px;color:#32363a;text-transform:capitalize}.se-sync-panel-item-checkbox__label--select-all{font-weight:700!important}.se-sync-panel-item-info-icon{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-sync-panel-item-info-icon__icon.sap-icon--accept{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#0a7e3e}.se-sync-panel-item-info-icon__icon.sap-icon--message-warning{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#e9730c}"]});var _e=function(){function SynchronizationPanelItemComponent(){this.selectionChange=new a.EventEmitter}SynchronizationPanelItemComponent.prototype.getSelectAllLabel=function(){return this.selectAllLabel||"se.cms.synchronization.page.select.all.slots"};SynchronizationPanelItemComponent.prototype.isItemDisabled=function(){var e;if(this.disableList||this.disableItem&&this.disableItem(this.item)){return true}return this.item!==this.rootItem&&!!((e=this.rootItem)===null||e===void 0?void 0:e.selected)||he.isInSync(this.item)};SynchronizationPanelItemComponent.prototype.showPopoverOverSyncIcon=function(){var e;return((e=this.item.dependentItemTypesOutOfSync)===null||e===void 0?void 0:e.length)>0||he.isExternalItem(this.item)};SynchronizationPanelItemComponent.prototype.getInfoTitle=function(){return!he.isExternalItem(this.item)?"se.cms.synchronization.panel.update.title":""};SynchronizationPanelItemComponent.prototype.isInSync=function(){return he.isInSync(this.item)};SynchronizationPanelItemComponent.prototype.onSelectionChange=function(){this.selectionChange.emit(this.index)};__decorate([a.Input(),__metadata("design:type",Number)],SynchronizationPanelItemComponent.prototype,"index",void 0);__decorate([a.Input(),__metadata("design:type",Object)],SynchronizationPanelItemComponent.prototype,"item",void 0);__decorate([a.Input(),__metadata("design:type",Object)],SynchronizationPanelItemComponent.prototype,"rootItem",void 0);__decorate([a.Input(),__metadata("design:type",String)],SynchronizationPanelItemComponent.prototype,"selectAllLabel",void 0);__decorate([a.Input(),__metadata("design:type",Boolean)],SynchronizationPanelItemComponent.prototype,"disableList",void 0);__decorate([a.Input(),__metadata("design:type",Function)],SynchronizationPanelItemComponent.prototype,"disableItem",void 0);__decorate([a.Output(),__metadata("design:type",Object)],SynchronizationPanelItemComponent.prototype,"selectionChange",void 0);SynchronizationPanelItemComponent=__decorate([i.SeDowngradeComponent(),a.Component({selector:"se-synchronization-panel-item",template:'<div class="se-sync-panel-item-checkbox fd-form__item"><input *ngIf="!item.isExternal" type="checkbox" [id]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__field fd-form__control" [(ngModel)]="item.selected" (ngModelChange)="onSelectionChange()" [attr.disabled]="isItemDisabled() ? true : null"/> <label *ngIf="index === 0" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label se-sync-panel-item-checkbox__label--select-all fd-form__label" [title]="getSelectAllLabel() | translate" [translate]="getSelectAllLabel()"></label> <label *ngIf="index !== 0 && !item.isExternal" [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [title]="item.name | translate" [translate]="item.name"></label><se-tooltip *ngIf="index !== 0 && item.isExternal" [isChevronVisible]="true" [triggers]="[\'mouseenter\', \'mouseleave\']"><label se-tooltip-trigger [for]="\'sync-info__checkbox_\' + index" class="se-sync-panel-item-checkbox__label fd-form__label" [translate]="item.name"></label><div se-tooltip-body translate="se.cms.synchronization.slot.external.component"></div></se-tooltip></div><span *ngIf="showPopoverOverSyncIcon()"><se-tooltip [isChevronVisible]="true" [appendTo]="\'body\'" [placement]="\'left\'" [triggers]="[\'mouseenter\', \'mouseleave\']" [title]="getInfoTitle()" class="pull-right se-sync-panel-item-info-icon" [ngClass]="{ \'se-sync-panel--icon-globe\': item.isExternal }"><ng-container *ngIf="!item.isExternal" se-tooltip-trigger><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></ng-container><span *ngIf="item.isExternal" class="sap-icon--globe" se-tooltip-trigger></span><div se-tooltip-body><ng-container *ngIf="!item.isExternal"><div *ngFor="let dependentItem of item.dependentItemTypesOutOfSync">{{ dependentItem.i18nKey | translate }}</div></ng-container><div *ngIf="item.isExternal">{{ item.catalogVersionName | seL10n | async }}</div></div></se-tooltip></span><span *ngIf="!showPopoverOverSyncIcon()" class="pull-right se-sync-panel-item-info-icon"><ng-container *ngTemplateOutlet="syncInfoIcon"></ng-container></span><ng-template #syncInfoIcon><span [attr.status]="item.status" class="se-sync-panel-item-info-icon__icon" [ngClass]="{\n                \'sap-icon--accept\': isInSync(),\n                \'sap-icon--message-warning\': !isInSync()\n            }"></span></ng-template>',styles:[".se-sync-panel-item-checkbox{display:flex;flex-direction:row;align-items:center;margin:0!important}.se-sync-panel-item-checkbox__field{margin:0}.se-sync-panel-item-checkbox__label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;word-break:break-all;max-width:190px!important;margin:0!important;padding-left:8px;color:#32363a;text-transform:capitalize}.se-sync-panel-item-checkbox__label--select-all{font-weight:700!important}.se-sync-panel-item-info-icon{font-size:1.1428571429rem;line-height:1.25;font-weight:400}.se-sync-panel-item-info-icon__icon.sap-icon--accept{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#0a7e3e}.se-sync-panel-item-info-icon__icon.sap-icon--message-warning{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#e9730c}"]})],SynchronizationPanelItemComponent);return SynchronizationPanelItemComponent}();var ye=[{provide:"SYNCHRONIZATION_STATUSES",useValue:pe},{provide:"SYNCHRONIZATION_POLLING",useValue:ue},{provide:"SYNCHRONIZATION_EVENT",useValue:me}];var Ce=function(){function SynchronizationPanelModule(){}SynchronizationPanelModule=__decorate([a.NgModule({imports:[s.CommonModule,c.FormsModule,i.TranslationModule.forChild(),i.TooltipModule,i.MessageModule,i.SpinnerModule,i.L10nPipeModule],declarations:[fe,_e],entryComponents:[fe],providers:__spreadArrays(ye,[i.moduleUtils.initialize((function(){i.diBridgeUtils.downgradeService("SYNCHRONIZATION_STATUSES",null,"SYNCHRONIZATION_STATUSES");i.diBridgeUtils.downgradeService("SYNCHRONIZATION_POLLING",null,"SYNCHRONIZATION_POLLING");i.diBridgeUtils.downgradeService("SYNCHRONIZATION_EVENT",null,"SYNCHRONIZATION_EVENT")}))]),exports:[fe]})],SynchronizationPanelModule);return SynchronizationPanelModule}();var Se=5e3;var be=function(){SynchronizationService.$inject=["restServiceFactory","timerService","translateService","alertService","authenticationService","crossFrameEventService"];function SynchronizationService(e,t,n,i,o,r){this.restServiceFactory=e;this.timerService=t;this.translateService=n;this.alertService=i;this.authenticationService=o;this.crossFrameEventService=r;this.BASE_URL="/cmswebservices";this.SYNC_JOB_INFO_BY_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target";this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI="/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target";this.intervalHandle={};this.syncRequested=[];this.syncJobInfoByTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_TARGET_URI);this.syncJobInfoBySourceAndTargetRestService=this.restServiceFactory.get(this.SYNC_JOB_INFO_BY_SOURCE_AND_TARGET_URI,"catalog")}SynchronizationService.prototype.updateCatalogSync=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i,o;return __generator(this,(function(r){switch(r.label){case 0:t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);this.addCatalogSyncRequest(t);r.label=1;case 1:r.trys.push([1,3,,4]);return[4,this.syncJobInfoBySourceAndTargetRestService.save({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})];case 2:n=r.sent();return[2,n];case 3:i=r.sent();o=this.translateService.instant("sync.running.error.msg",{catalogName:e.name});if(i.statusText==="Conflict"){this.alertService.showDanger({message:o})}return[2,null];case 4:return[2]}}))}))};SynchronizationService.prototype.updateCatalogSync.$inject=["catalog"];SynchronizationService.prototype.getCatalogSyncStatus=function(e){if(e.sourceCatalogVersion){return this.getSyncJobInfoBySourceAndTarget(e)}else{return this.getLastSyncJobInfoByTarget(e)}};SynchronizationService.prototype.getCatalogSyncStatus.$inject=["catalog"];SynchronizationService.prototype.getSyncJobInfoBySourceAndTarget=function(e){return this.syncJobInfoBySourceAndTargetRestService.get({catalog:e.catalogId,source:e.sourceCatalogVersion,target:e.targetCatalogVersion})};SynchronizationService.prototype.getSyncJobInfoBySourceAndTarget.$inject=["catalog"];SynchronizationService.prototype.getLastSyncJobInfoByTarget=function(e){return this.syncJobInfoByTargetRestService.get({catalog:e.catalogId,target:e.targetCatalogVersion})};SynchronizationService.prototype.getLastSyncJobInfoByTarget.$inject=["catalog"];SynchronizationService.prototype.startAutoGetSyncData=function(e,t){var n=this;var i=e.catalogId,o=e.sourceCatalogVersion,r=e.targetCatalogVersion;var a=this._getJobKey(i,o,r);var s=this.timerService.createTimer((function(){return n._autoSyncCallback(e,t,a)}),Se);s.start();this.intervalHandle[a]=s};SynchronizationService.prototype.startAutoGetSyncData.$inject=["catalog","callback"];SynchronizationService.prototype.stopAutoGetSyncData=function(e){var t=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);if(this.intervalHandle[t]){if(this.syncRequested.indexOf(t)>-1){this.intervalHandle[t].discardWhenNextSynced=true}else{this.intervalHandle[t].stop();this.intervalHandle[t]=undefined}}};SynchronizationService.prototype.stopAutoGetSyncData.$inject=["catalog"];SynchronizationService.prototype._autoSyncCallback=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i,o,r;return __generator(this,(function(a){switch(a.label){case 0:return[4,this.authenticationService.isAuthenticated(this.BASE_URL)];case 1:i=a.sent();if(!i){this.stopAutoGetSyncData(e)}return[4,this.getCatalogSyncStatus(e)];case 2:o=a.sent();r=this.syncRequestedCallback(e)(o);t(r);if(!this.intervalHandle[n]){this.startAutoGetSyncData(e,t)}return[2]}}))}))};SynchronizationService.prototype._autoSyncCallback.$inject=["catalog","callback","jobKey"];SynchronizationService.prototype.syncRequestedCallback=function(e){var t=this;var n=this._getJobKey(e.catalogId,e.sourceCatalogVersion,e.targetCatalogVersion);return function(i){if(t.catalogSyncInProgress(n)){if(t.catalogSyncFinished(i)){t.removeCatalogSyncRequest(n);t.crossFrameEventService.publish(me.CATALOG_SYNCHRONIZED,e)}if(t.intervalHandle[n].discardWhenNextSynced&&t.catalogSyncFinished(i)||t.catalogSyncAborted(i)){t.intervalHandle[n].stop();t.intervalHandle[n]=undefined;t.removeCatalogSyncRequest(n)}}return i}};SynchronizationService.prototype.syncRequestedCallback.$inject=["catalog"];SynchronizationService.prototype.catalogSyncInProgress=function(e){return this.syncRequested.indexOf(e)>-1};SynchronizationService.prototype.catalogSyncInProgress.$inject=["jobKey"];SynchronizationService.prototype.catalogSyncFinished=function(e){return e.syncStatus===t.JOB_STATUS.FINISHED};SynchronizationService.prototype.catalogSyncFinished.$inject=["response"];SynchronizationService.prototype.catalogSyncAborted=function(e){return e.syncStatus===t.JOB_STATUS.ABORTED};SynchronizationService.prototype.catalogSyncAborted.$inject=["response"];SynchronizationService.prototype.removeCatalogSyncRequest=function(e){var t=this.syncRequested.indexOf(e);if(t>-1){this.syncRequested.splice(t,1)}};SynchronizationService.prototype.removeCatalogSyncRequest.$inject=["jobKey"];SynchronizationService.prototype.addCatalogSyncRequest=function(e){if(this.syncRequested.indexOf(e)===-1){this.syncRequested.push(e)}};SynchronizationService.prototype.addCatalogSyncRequest.$inject=["jobKey"];SynchronizationService.prototype._getJobKey=function(e,t,n){return e+"_"+t+"_"+n};SynchronizationService.prototype._getJobKey.$inject=["catalogId","sourceCatalogVersion","targetCatalogVersion"];SynchronizationService=__decorate([i.SeDowngradeService(),i.OperationContextRegistered("/cmswebservices/v1/catalogs/:catalog/synchronizations/targetversions/:target",i.OPERATION_CONTEXT.CMS),i.OperationContextRegistered("/cmswebservices/v1/catalogs/:catalog/versions/:source/synchronizations/versions/:target",i.OPERATION_CONTEXT.CMS),__metadata("design:paramtypes",[i.IRestServiceFactory,i.TimerService,r.TranslateService,i.IAlertService,i.IAuthenticationService,i.CrossFrameEventService])],SynchronizationService);return SynchronizationService}();var Ie=function(){function IEditorModalService(){}IEditorModalService.prototype.open=function(e,t,n,i,o,r){"proxyFunction";return null};IEditorModalService.prototype.openAndRerenderSlot=function(e,t,n,i,o){"proxyFunction";return null};IEditorModalService.prototype.openGenericEditor=function(e,t,n,i){"proxyFunction";return null};return IEditorModalService}();var we=function(){function ISyncPollingService(){}ISyncPollingService.prototype.registerSyncPollingEvents=function(){"proxyFunction";return null};ISyncPollingService.prototype.changePollingSpeed=function(e,t){"proxyFunction";return null};ISyncPollingService.prototype.fetchSyncStatus=function(e,t){"proxyFunction";return null};ISyncPollingService.prototype.performSync=function(e,t){"proxyFunction";return null};ISyncPollingService.prototype.getSyncStatus=function(e,t,n){"proxyFunction";return null};return ISyncPollingService}();var Ee=function(){CMSTimeService.$inject=["translate"];function CMSTimeService(e){this.translate=e}CMSTimeService.prototype.getTimeAgo=function(e){var t=Math.floor(l.duration(e).asDays());var n=Math.floor(l.duration(e).asHours());if(t>=1){return t+" "+this.translate.instant("se.cms.actionitem.page.workflow.action.started.days.ago")}else if(n>=1){return n+" "+this.translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")}return"<1 "+this.translate.instant("se.cms.actionitem.page.workflow.action.started.hours.ago")};CMSTimeService.prototype.getTimeAgo.$inject=["timeDiff"];CMSTimeService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[r.TranslateService])],CMSTimeService);return CMSTimeService}();var Pe=function(){CMSModesService.$inject=["perspectiveService"];function CMSModesService(e){this.perspectiveService=e}e=CMSModesService;CMSModesService.prototype.isVersioningPerspectiveActive=function(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.perspectiveService.getActivePerspectiveKey()];case 1:t=n.sent();return[2,t===e.VERSIONING_PERSPECTIVE_KEY]}}))}))};var e;CMSModesService.BASIC_PERSPECTIVE_KEY="se.cms.perspective.basic";CMSModesService.ADVANCED_PERSPECTIVE_KEY="se.cms.perspective.advanced";CMSModesService.VERSIONING_PERSPECTIVE_KEY="se.cms.perspective.versioning";CMSModesService=e=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.IPerspectiveService])],CMSModesService);return CMSModesService}();var Te=function(){VersionExperienceInterceptor.$inject=["sharedDataService"];function VersionExperienceInterceptor(e){this.sharedDataService=e}e=VersionExperienceInterceptor;VersionExperienceInterceptor.prototype.intercept=function(t,n){if(this.isGET(t)&&this.isPreviewDataTypeResourceEndpoint(t.url)){return d.from(this.sharedDataService.get(i.EXPERIENCE_STORAGE_KEY)).pipe(p.switchMap((function(i){if(i.versionId){var o=t.clone({url:t.url.replace(e.MODE_DEFAULT,e.MODE_PREVIEW_VERSION)});return n.handle(o)}else{return n.handle(t)}})))}else{return n.handle(t)}};VersionExperienceInterceptor.prototype.intercept.$inject=["request","next"];VersionExperienceInterceptor.prototype.isGET=function(e){return e.method==="GET"};VersionExperienceInterceptor.prototype.isGET.$inject=["request"];VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint=function(t){return t.indexOf(A)>-1&&t.indexOf(e.PREVIEW_DATA_TYPE)>-1};VersionExperienceInterceptor.prototype.isPreviewDataTypeResourceEndpoint.$inject=["url"];var e;VersionExperienceInterceptor.MODE_DEFAULT="DEFAULT";VersionExperienceInterceptor.MODE_PREVIEW_VERSION="PREVIEWVERSION";VersionExperienceInterceptor.PREVIEW_DATA_TYPE="PreviewData";VersionExperienceInterceptor=e=__decorate([a.Injectable(),__metadata("design:paramtypes",[i.ISharedDataService])],VersionExperienceInterceptor);return VersionExperienceInterceptor}();var Ae=function(){function IComponentSharedService(){}IComponentSharedService.prototype.isComponentShared=function(e){"proxyFunction";return null};return IComponentSharedService}();(function(e){e["CREATE"]="create";e["READ"]="read";e["CHANGE"]="change";e["REMOVE"]="remove"})(t.TypePermissionNames||(t.TypePermissionNames={}));var De=function(){TypePermissionsRestService.$inject=["logService","sessionService","restServiceFactory"];function TypePermissionsRestService(e,t,n){this.logService=e;this.sessionService=t;this.URI="/permissionswebservices/v1/permissions/types/search";this.resource=n.get(this.URI)}TypePermissionsRestService.prototype.hasCreatePermissionForTypes=function(e){return this.getPermissionsForTypesAndName(e,t.TypePermissionNames.CREATE)};TypePermissionsRestService.prototype.hasCreatePermissionForTypes.$inject=["types"];TypePermissionsRestService.prototype.hasReadPermissionForTypes=function(e){return this.getPermissionsForTypesAndName(e,t.TypePermissionNames.READ)};TypePermissionsRestService.prototype.hasReadPermissionForTypes.$inject=["types"];TypePermissionsRestService.prototype.hasUpdatePermissionForTypes=function(e){return this.getPermissionsForTypesAndName(e,t.TypePermissionNames.CHANGE)};TypePermissionsRestService.prototype.hasUpdatePermissionForTypes.$inject=["types"];TypePermissionsRestService.prototype.hasDeletePermissionForTypes=function(e){return this.getPermissionsForTypesAndName(e,t.TypePermissionNames.REMOVE)};TypePermissionsRestService.prototype.hasDeletePermissionForTypes.$inject=["types"];TypePermissionsRestService.prototype.hasAllPermissionsForTypes=function(e){return __awaiter(this,void 0,void 0,(function(){var n,i;var o=this;return __generator(this,(function(r){switch(r.label){case 0:n={};return[4,this.getAllPermissionsForTypes(e)];case 1:i=r.sent();return[2,i.reduce((function(e,n){if(n.permissions){e[n.id]={};e[n.id][t.TypePermissionNames.READ]=o.getPermissionByNameAndResult(n,t.TypePermissionNames.READ);e[n.id][t.TypePermissionNames.CHANGE]=o.getPermissionByNameAndResult(n,t.TypePermissionNames.CHANGE);e[n.id][t.TypePermissionNames.CREATE]=o.getPermissionByNameAndResult(n,t.TypePermissionNames.CREATE);e[n.id][t.TypePermissionNames.REMOVE]=o.getPermissionByNameAndResult(n,t.TypePermissionNames.REMOVE)}return e}),n)]}}))}))};TypePermissionsRestService.prototype.hasAllPermissionsForTypes.$inject=["types"];TypePermissionsRestService.prototype.getAllPermissionsForTypes=function(e){return __awaiter(this,void 0,void 0,(function(){var n,i,o,r;return __generator(this,(function(a){switch(a.label){case 0:if(e.length===0){return[2,[]]}return[4,this.sessionService.getCurrentUsername()];case 1:n=a.sent();if(!n){return[2,[]]}a.label=2;case 2:a.trys.push([2,4,,5]);i=[t.TypePermissionNames.CREATE,t.TypePermissionNames.CHANGE,t.TypePermissionNames.READ,t.TypePermissionNames.REMOVE].join(",");return[4,this.resource.queryByPost({principalUid:n},{types:e.join(","),permissionNames:i})];case 3:o=a.sent();return[2,o.permissionsList||[]];case 4:r=a.sent();if(r){this.logService.error("TypePermissionsRestService - no composed types "+e+" exist")}return[2,Promise.reject(r)];case 5:return[2]}}))}))};TypePermissionsRestService.prototype.getAllPermissionsForTypes.$inject=["types"];TypePermissionsRestService.prototype.getPermissionByNameAndResult=function(e,t){var n=e.permissions.find((function(e){return e.key===t}));return JSON.parse(n.value)};TypePermissionsRestService.prototype.getPermissionByNameAndResult.$inject=["permissionsResult","permissionName"];TypePermissionsRestService.prototype.getPermissionsForTypesAndName=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;var i=this;return __generator(this,(function(o){switch(o.label){case 0:return[4,this.getAllPermissionsForTypes(e)];case 1:n=o.sent();return[2,n.reduce((function(e,n){if(n.permissions){e[n.id]=i.getPermissionByNameAndResult(n,t)}return e}),{})]}}))}))};TypePermissionsRestService.prototype.getPermissionsForTypesAndName.$inject=["types","permissionName"];__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.authorizationEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Array]),__metadata("design:returntype",Promise)],TypePermissionsRestService.prototype,"getAllPermissionsForTypes",null);TypePermissionsRestService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.LogService,i.ISessionService,i.IRestServiceFactory])],TypePermissionsRestService);return TypePermissionsRestService}();var Oe;(function(e){e["READ"]="read";e["CHANGE"]="change"})(Oe||(Oe={}));var Re=function(){AttributePermissionsRestService.$inject=["restServiceFactory","sessionService","logService"];function AttributePermissionsRestService(e,t,n){this.sessionService=t;this.logService=n;this.ATTRIBUTE_PERMISSIONS_URI="/permissionswebservices/v1/permissions/attributes/search";this.permissionRestService=e.get(this.ATTRIBUTE_PERMISSIONS_URI)}AttributePermissionsRestService.prototype.hasReadPermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,Oe.READ)};AttributePermissionsRestService.prototype.hasReadPermissionOnAttributesInType.$inject=["type","attributeNames"];AttributePermissionsRestService.prototype.hasChangePermissionOnAttributesInType=function(e,t){return this.getPermissionsForAttributesAndNameByType(e,t,Oe.CHANGE)};AttributePermissionsRestService.prototype.hasChangePermissionOnAttributesInType.$inject=["type","attributeNames"];AttributePermissionsRestService.prototype.getAllPermissionsForAttributes=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:if(e.length<=0){return[2,[]]}return[4,this.sessionService.getCurrentUsername()];case 1:t=o.sent();if(!t){return[2,[]]}o.label=2;case 2:o.trys.push([2,4,,5]);return[4,this.permissionRestService.queryByPost({principalUid:t},{attributes:e.join(","),permissionNames:Oe.CHANGE+","+Oe.READ})];case 3:n=o.sent();return[2,n.permissionsList||[]];case 4:i=o.sent();if(i){this.logService.error("AttributePermissionsRestService - couldn't retrieve attribute permissions "+e)}return[2,[]];case 5:return[2]}}))}))};AttributePermissionsRestService.prototype.getAllPermissionsForAttributes.$inject=["attributes"];AttributePermissionsRestService.prototype.getPermissionsForAttributesAndNameByType=function(e,t,n){var i=t.map((function(t){return e+"."+t}));return this.getPermissionsForAttributesAndName(i,n).then((function(t){return t[e]}))};AttributePermissionsRestService.prototype.getPermissionsForAttributesAndNameByType.$inject=["type","attributes","permissionName"];AttributePermissionsRestService.prototype.getPermissionsForAttributesAndName=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i;var o=this;return __generator(this,(function(r){switch(r.label){case 0:return[4,this.getAllPermissionsForAttributes(e)];case 1:n=r.sent();i=this.concatPermissionsNotFound(e,n);return[2,i.reduce((function(e,n){if(n.permissions){var i=o.parsePermissionsResultId(n.id);if(!e[i.type]){e[i.type]={}}e[i.type][i.attribute]=o.getPermissionByNameFromResult(n,t)}return e}),{})]}}))}))};AttributePermissionsRestService.prototype.getPermissionsForAttributesAndName.$inject=["attributes","permissionName"];AttributePermissionsRestService.prototype.parsePermissionsResultId=function(e){var t=e.split(".");if(t.length!==2){throw new Error("AttributePermissionsRestService - Received invalid attribute permissions")}return{type:t[0],attribute:t[1]}};AttributePermissionsRestService.prototype.parsePermissionsResultId.$inject=["id"];AttributePermissionsRestService.prototype.getPermissionByNameFromResult=function(e,t){var n=e.permissions.find((function(e){return e.key===t}));return JSON.parse(n.value)};AttributePermissionsRestService.prototype.getPermissionByNameFromResult.$inject=["permissionsResult","permissionName"];AttributePermissionsRestService.prototype.concatPermissionsNotFound=function(e,t){var n=t.map((function(e){return e.id}));var i=o.difference(e,n);return t.concat(i.map((function(e){return{id:e,permissions:[{key:Oe.READ,value:"false"},{key:Oe.CHANGE,value:"false"}]}})))};AttributePermissionsRestService.prototype.concatPermissionsNotFound.$inject=["attributes","permissionsFound"];__decorate([i.Cached({actions:[i.rarelyChangingContent],tags:[i.authorizationEvictionTag]}),__metadata("design:type",Function),__metadata("design:paramtypes",[Array]),__metadata("design:returntype",Promise)],AttributePermissionsRestService.prototype,"getAllPermissionsForAttributes",null);AttributePermissionsRestService=__decorate([i.SeDowngradeService(),__metadata("design:paramtypes",[i.IRestServiceFactory,i.ISessionService,i.LogService])],AttributePermissionsRestService);return AttributePermissionsRestService}();var Me=function(){function IRemoveComponentService(){}IRemoveComponentService.prototype.removeComponent=function(e){"proxyFunction";return null};return IRemoveComponentService}();(function(e){e["ALLOWED"]="allowed";e["DISALLOWED"]="disallowed";e["MAYBEALLOWED"]="mayBeAllowed"})(t.COMPONENT_IN_SLOT_STATUS||(t.COMPONENT_IN_SLOT_STATUS={}));var xe=function(){function ISlotRestrictionsService(){}ISlotRestrictionsService.prototype.getAllComponentTypesSupportedOnPage=function(){"proxyFunction";return null};ISlotRestrictionsService.prototype.getSlotRestrictions=function(e){"proxyFunction";return null};ISlotRestrictionsService.prototype.isSlotEditable=function(e){"proxyFunction";return null};ISlotRestrictionsService.prototype.isComponentAllowedInSlot=function(e,t){"proxyFunction";return null};return ISlotRestrictionsService}();window.__smartedit__.addDecoratorPayload("Component","ActionableAlertComponent",{selector:"se-actionable-alert",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div>\n        <p>{{ description | translate: descriptionDetails }}</p>\n        <div>\n            <a href (click)="onHyperLinkClick($event)">{{\n                hyperlinkLabel | translate: hyperlinkDetails\n            }}</a>\n        </div>\n    </div> '});var Ne=function(){function ActionableAlertComponent(){this.hyperLinkClick=new a.EventEmitter}ActionableAlertComponent.prototype.onHyperLinkClick=function(e){e.preventDefault();this.hyperLinkClick.emit()};__decorate([a.Input(),__metadata("design:type",String)],ActionableAlertComponent.prototype,"description",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ActionableAlertComponent.prototype,"descriptionDetails",void 0);__decorate([a.Input(),__metadata("design:type",String)],ActionableAlertComponent.prototype,"hyperlinkLabel",void 0);__decorate([a.Input(),__metadata("design:type",Object)],ActionableAlertComponent.prototype,"hyperlinkDetails",void 0);__decorate([a.Output(),__metadata("design:type",a.EventEmitter)],ActionableAlertComponent.prototype,"hyperLinkClick",void 0);ActionableAlertComponent=__decorate([a.Component({selector:"se-actionable-alert",changeDetection:a.ChangeDetectionStrategy.OnPush,template:'<div>\n        <p>{{ description | translate: descriptionDetails }}</p>\n        <div>\n            <a href (click)="onHyperLinkClick($event)">{{\n                hyperlinkLabel | translate: hyperlinkDetails\n            }}</a>\n        </div>\n    </div> '}),__metadata("design:paramtypes",[])],ActionableAlertComponent);return ActionableAlertComponent}();var ke=function(){function IComponentVisibilityAlertService(){}IComponentVisibilityAlertService.prototype.checkAndAlertOnComponentVisibility=function(e){"proxyFunction";return null};return IComponentVisibilityAlertService}();window.__smartedit__.addDecoratorPayload("Component","ComponentVisibilityAlertComponent",{selector:"se-component-visibility-alert",template:'<div>\n        <p [translate]="message"></p>\n        <div>\n            <a (click)="onClick()" [translate]="hyperlinkLabel"></a>\n        </div>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush});var Fe=function(){ComponentVisibilityAlertComponent.$inject=["editorModalService","componentVisibilityAlertService","alertRef"];function ComponentVisibilityAlertComponent(e,t,n){var i;this.editorModalService=e;this.componentVisibilityAlertService=t;this.alertRef=n;this.hyperlinkLabel="se.cms.component.visibility.alert.hyperlink";i=this.alertRef.data,this.component=i.component,this.message=i.message}ComponentVisibilityAlertComponent.prototype.onClick=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:this.alertRef.dismiss();this.checkProvidedArguments(this.component);return[4,this.editorModalService.openAndRerenderSlot(this.component.itemType,this.component.itemId,"visibilityTab")];case 1:e=t.sent();this.componentVisibilityAlertService.checkAndAlertOnComponentVisibility({itemId:e.uuid,itemType:e.itemtype,catalogVersion:e.catalogVersion,restricted:e.restricted,slotId:this.component.slotId,visible:e.visible});return[2]}}))}))};ComponentVisibilityAlertComponent.prototype.checkProvidedArguments=function(e){var t=[e.itemId,e.itemType,e.slotId];var n=t.filter((function(e){return e&&!i.stringUtils.isBlank(e)}));if(n.length!==t.length){throw new Error("componentVisibilityAlertService.checkAndAlertOnComponentVisibility - missing properly typed parameters")}};ComponentVisibilityAlertComponent.prototype.checkProvidedArguments.$inject=["component"];ComponentVisibilityAlertComponent=__decorate([i.SeDowngradeComponent(),a.Component({selector:"se-component-visibility-alert",template:'<div>\n        <p [translate]="message"></p>\n        <div>\n            <a (click)="onClick()" [translate]="hyperlinkLabel"></a>\n        </div>\n    </div>',changeDetection:a.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[Ie,ke,u.AlertRef])],ComponentVisibilityAlertComponent);return ComponentVisibilityAlertComponent}();var ze=function(){function ComponentVisibilityAlertModule(){}ComponentVisibilityAlertModule=__decorate([a.NgModule({imports:[i.TranslationModule.forChild()],declarations:[Fe],entryComponents:[Fe]})],ComponentVisibilityAlertModule);return ComponentVisibilityAlertModule}();var Le=function(){function CmsCommonsModule(){}CmsCommonsModule=__decorate([a.NgModule({imports:[r.TranslateModule.forChild(),Ce,ze],providers:[Re,se,Pe,Ee,be,De,de,le,m],declarations:[Ne],exports:[Ne,Ce,ze]})],CmsCommonsModule);return CmsCommonsModule}();t.ACTIONABLE_ALERT_CONSTANTS=ee;t.ActionableAlertComponent=Ne;t.AssetsService=m;t.AttributePermissionsRestService=Re;t.CATALOG_SYNC_INTERVAL_IN_MILLISECONDS=Se;t.CMSITEMS_UPDATE_EVENT=J;t.CMSModesService=Pe;t.CMSTimeService=Ee;t.COMPONENT_CREATED_EVENT=X;t.COMPONENT_REMOVED_EVENT=Z;t.COMPONENT_UPDATED_EVENT=Q;t.CONTENT_SLOTS_TYPE_RESTRICTION_RESOURCE_URI=M;t.CONTENT_SLOT_TYPE_RESTRICTION_RESOURCE_URI=R;t.CONTEXTUAL_PAGES_RESTRICTIONS_RESOURCE_URI=j;t.CONTEXT_CATALOG=b;t.CONTEXT_CATALOG_VERSION=I;t.CONTEXT_SITE_ID=w;t.CmsCommonsModule=Le;t.CmsResourceLocationsModule=Y;t.CmsitemsRestService=se;t.ComponentService=de;t.ComponentVisibilityAlertComponent=Fe;t.ComponentVisibilityAlertModule=ze;t.DEFAULT_SYNCHRONIZATION_EVENT=me;t.DEFAULT_SYNCHRONIZATION_POLLING=ue;t.DEFAULT_SYNCHRONIZATION_STATUSES=pe;t.EVENT_PAGE_STATUS_UPDATED_IN_ACTIVE_CV=te;t.GET_PAGE_SYNCHRONIZATION_RESOURCE_URI=q;t.IComponentSharedService=Ae;t.IComponentVisibilityAlertService=ke;t.IContextAwareEditableItemService=S;t.IEditorModalService=Ie;t.IMAGES_URL=oe;t.IPageContentSlotsComponentsRestService=ce;t.IPageService=g;t.IRemoveComponentService=Me;t.ISlotRestrictionsService=xe;t.ISyncPollingService=we;t.ITEMS_RESOURCE_URI=D;t.NAVIGATION_MANAGEMENT_ENTRIES_RESOURCE_URI=$;t.NAVIGATION_MANAGEMENT_ENTRY_TYPES_RESOURCE_URI=U;t.NAVIGATION_MANAGEMENT_PAGE_PATH=L;t.NAVIGATION_MANAGEMENT_RESOURCE_URI=V;t.NAVIGATION_NODE_ROOT_NODE_UID=ie;t.NAVIGATION_NODE_TYPECODE=ne;t.PAGES_CONTENT_SLOT_COMPONENT_RESOURCE_URI=O;t.PAGES_CONTENT_SLOT_RESOURCE_URI=F;t.PAGES_LIST_RESOURCE_URI=x;t.PAGES_RESTRICTIONS_RESOURCE_URI=B;t.PAGE_CONTEXT_CATALOG=E;t.PAGE_CONTEXT_CATALOG_VERSION=P;t.PAGE_LIST_PATH=N;t.PAGE_TEMPLATES_URI=z;t.PAGE_TYPES_RESTRICTION_TYPES_URI=G;t.PAGE_TYPES_URI=W;t.POST_PAGE_SYNCHRONIZATION_RESOURCE_URI=K;t.RESTRICTION_TYPES_URI=H;t.SynchronizationPanelComponent=fe;t.SynchronizationPanelItemComponent=_e;t.SynchronizationPanelModule=Ce;t.SynchronizationResourceService=le;t.SynchronizationService=be;t.SynchronizationUtils=ge;t.TRASHED_PAGE_LIST_PATH=k;t.TYPES_RESOURCE_URI=A;t.TypePermissionsRestService=De;t.VersionExperienceInterceptor=Te;t.WORKFLOW_CREATED_EVENT=h;t.WORKFLOW_FINISHED_EVENT=v;t.cmsitemsEvictionTag=ae;t.cmsitemsUri=re;t.slotEvictionTag=C;t.synchronizationUtils=he;t.workflowCompletedEvictionTag=_;t.workflowCreatedEvictionTag=f;t.workflowTasksMenuOpenedEvictionTag=y},578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});n(579);n(595);n(621);n(625);n(627);n(629);n(643);n(662);n(689);n(697);n(727);n(733);n(735);n(737);n(738);n(739);n(778);n(784);n(798);n(367);n(808);n(809);n(810);n(811);window.jQuery=n(220);n(114);n(813);n(816);n(817);n(274);n(943);n(551);n(1057);n(1058);n(1060);n(1061);n(1063);n(1064);n(1066);n(1067);n(1068);n(1069)},813:function(e,t,n){(function(e,t){if(!window.smarteditJQuery&&e&&e.noConflict){window.smarteditJQuery=e.noConflict()}window.smarteditLodash=t.noConflict();n(814)}).call(this,n(220),n(148))},815:function(e,t,n){var i={"./af":368,"./af.js":368,"./ar":369,"./ar-dz":370,"./ar-dz.js":370,"./ar-kw":371,"./ar-kw.js":371,"./ar-ly":372,"./ar-ly.js":372,"./ar-ma":373,"./ar-ma.js":373,"./ar-sa":374,"./ar-sa.js":374,"./ar-tn":375,"./ar-tn.js":375,"./ar.js":369,"./az":376,"./az.js":376,"./be":377,"./be.js":377,"./bg":378,"./bg.js":378,"./bm":379,"./bm.js":379,"./bn":380,"./bn.js":380,"./bo":381,"./bo.js":381,"./br":382,"./br.js":382,"./bs":383,"./bs.js":383,"./ca":384,"./ca.js":384,"./cs":385,"./cs.js":385,"./cv":386,"./cv.js":386,"./cy":387,"./cy.js":387,"./da":388,"./da.js":388,"./de":389,"./de-at":390,"./de-at.js":390,"./de-ch":391,"./de-ch.js":391,"./de.js":389,"./dv":392,"./dv.js":392,"./el":393,"./el.js":393,"./en-SG":394,"./en-SG.js":394,"./en-au":395,"./en-au.js":395,"./en-ca":396,"./en-ca.js":396,"./en-gb":397,"./en-gb.js":397,"./en-ie":398,"./en-ie.js":398,"./en-il":399,"./en-il.js":399,"./en-nz":400,"./en-nz.js":400,"./eo":401,"./eo.js":401,"./es":402,"./es-do":403,"./es-do.js":403,"./es-us":404,"./es-us.js":404,"./es.js":402,"./et":405,"./et.js":405,"./eu":406,"./eu.js":406,"./fa":407,"./fa.js":407,"./fi":408,"./fi.js":408,"./fo":409,"./fo.js":409,"./fr":410,"./fr-ca":411,"./fr-ca.js":411,"./fr-ch":412,"./fr-ch.js":412,"./fr.js":410,"./fy":413,"./fy.js":413,"./ga":414,"./ga.js":414,"./gd":415,"./gd.js":415,"./gl":416,"./gl.js":416,"./gom-latn":417,"./gom-latn.js":417,"./gu":418,"./gu.js":418,"./he":419,"./he.js":419,"./hi":420,"./hi.js":420,"./hr":421,"./hr.js":421,"./hu":422,"./hu.js":422,"./hy-am":423,"./hy-am.js":423,"./id":424,"./id.js":424,"./is":425,"./is.js":425,"./it":426,"./it-ch":427,"./it-ch.js":427,"./it.js":426,"./ja":428,"./ja.js":428,"./jv":429,"./jv.js":429,"./ka":430,"./ka.js":430,"./kk":431,"./kk.js":431,"./km":432,"./km.js":432,"./kn":433,"./kn.js":433,"./ko":434,"./ko.js":434,"./ku":435,"./ku.js":435,"./ky":436,"./ky.js":436,"./lb":437,"./lb.js":437,"./lo":438,"./lo.js":438,"./lt":439,"./lt.js":439,"./lv":440,"./lv.js":440,"./me":441,"./me.js":441,"./mi":442,"./mi.js":442,"./mk":443,"./mk.js":443,"./ml":444,"./ml.js":444,"./mn":445,"./mn.js":445,"./mr":446,"./mr.js":446,"./ms":447,"./ms-my":448,"./ms-my.js":448,"./ms.js":447,"./mt":449,"./mt.js":449,"./my":450,"./my.js":450,"./nb":451,"./nb.js":451,"./ne":452,"./ne.js":452,"./nl":453,"./nl-be":454,"./nl-be.js":454,"./nl.js":453,"./nn":455,"./nn.js":455,"./pa-in":456,"./pa-in.js":456,"./pl":457,"./pl.js":457,"./pt":458,"./pt-br":459,"./pt-br.js":459,"./pt.js":458,"./ro":460,"./ro.js":460,"./ru":461,"./ru.js":461,"./sd":462,"./sd.js":462,"./se":463,"./se.js":463,"./si":464,"./si.js":464,"./sk":465,"./sk.js":465,"./sl":466,"./sl.js":466,"./sq":467,"./sq.js":467,"./sr":468,"./sr-cyrl":469,"./sr-cyrl.js":469,"./sr.js":468,"./ss":470,"./ss.js":470,"./sv":471,"./sv.js":471,"./sw":472,"./sw.js":472,"./ta":473,"./ta.js":473,"./te":474,"./te.js":474,"./tet":475,"./tet.js":475,"./tg":476,"./tg.js":476,"./th":477,"./th.js":477,"./tl-ph":478,"./tl-ph.js":478,"./tlh":479,"./tlh.js":479,"./tr":480,"./tr.js":480,"./tzl":481,"./tzl.js":481,"./tzm":482,"./tzm-latn":483,"./tzm-latn.js":483,"./tzm.js":482,"./ug-cn":484,"./ug-cn.js":484,"./uk":485,"./uk.js":485,"./ur":486,"./ur.js":486,"./uz":487,"./uz-latn":488,"./uz-latn.js":488,"./uz.js":487,"./vi":489,"./vi.js":489,"./x-pseudo":490,"./x-pseudo.js":490,"./yo":491,"./yo.js":491,"./zh-cn":492,"./zh-cn.js":492,"./zh-hk":493,"./zh-hk.js":493,"./zh-tw":494,"./zh-tw.js":494};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");t.code="MODULE_NOT_FOUND";throw t}return i[e]}webpackContext.keys=function webpackContextKeys(){return Object.keys(i)};webpackContext.resolve=webpackContextResolve;e.exports=webpackContext;webpackContext.id=815},816:function(e,t,n){},817:function(e,t,n){},818:function(e,t,n){"use strict";CacheConfigAnnotationFactory.$inject=["logService"];CachedAnnotationFactory.$inject=["cacheService"];InvalidateCacheAnnotationFactory.$inject=["cacheService"];OperationContextAnnotationFactory.$inject=["injector","operationContextService","OPERATION_CONTEXT"];Object.defineProperty(t,"__esModule",{value:true});var i=n(148);var o=n(819);var r=n(0);var a=n(132);var s=n(49);var c=n(52);var l=n(155);var d=n(22);var p=n(156);var u=n(4);var m=function(){function CloneableUtils(){}CloneableUtils.prototype.makeCloneable=function(e){var t=this;var n=i.cloneDeepWith(e,(function(e){if(e!==undefined&&e!==null&&!t.isPrimitive(n)){if(e.then){return null}else if(typeof e==="function"){return null}else if(i.isElement(e)){return null}else if(typeof e!=="string"&&e.hasOwnProperty("length")&&!e.forEach){return null}else{return e}}else{return e}}));if(n===undefined||n===null||this.isPrimitive(n)){return n}else if(n.hasOwnProperty("length")||n.forEach){return n.map((function(e){return t.makeCloneable(e)}))}else{return Object.keys(n).reduce((function(e,i){if(i.indexOf("$")!==0){e[i]=t.makeCloneable(n[i])}return e}),{})}};CloneableUtils.prototype.isPrimitive=function(e){return typeof e==="number"||typeof e==="string"||typeof e==="boolean"};return CloneableUtils}();var g=new m;var h=function(){function StringUtils(){var e=this;this.sanitize=function(t){return!e.isBlank(t)?t.split("").reverse().join("").replace(/(?:(([()])(?!\\)))/g,"$1\\").split("").reverse().join(""):t};this.encode=function(e){return btoa(encodeURIComponent(JSON.stringify(e)).replace(/%([0-9A-F]{2})/g,(function toSolidBytes(e,t){return String.fromCharCode(parseInt(t,16))})))};this.replaceAll=function(e,t){var n=new RegExp(Object.keys(t).join("|"),"g");return e.replace(n,(function(e){return t[e]}))}}StringUtils.prototype.isBlank=function(e){return typeof e==="undefined"||e===null||e==="null"||e.toString().trim().length===0};StringUtils.prototype.regExpFactory=function(e){var t=new RegExp(/^[a-zA-Z\d]+$/i);var n=new RegExp(/^[a-zA-Z\d\*]+$/i);var i;if(t.test(e)){i=["^","$"].join(e)}else if(n.test(e)){i=["^","$"].join(e.replace(/\*/g,".*"))}else{i=e}return new RegExp(i,"g")};StringUtils.prototype.formatHTML=function(e){return e.replace(/^\s*\n/gm,"").replace(/\>[\t\s]+\</g,"><").replace(/[\r\n\t\s]+/g," ")};return StringUtils}();var v=new h;var f=function(){function URIBuilder(e){this.uri=e;this.wholeWordMatch="[\\w]+"}URIBuilder.prototype.build=function(){return this.uri};URIBuilder.prototype.replaceParams=function(e){var t=this;var n=i.cloneDeep(this);if(e){n.uri=Object.keys(e).sort((function(e,t){return t.length-e.length})).reduce((function(n,i){return t.substituteKeyForValue(n,i,e[i])}),n.uri)}return n};URIBuilder.prototype.sanitize=function(){var e=i.cloneDeep(this);var t=/(https?:\/\/[^\/]*)(\/.*)/.exec(e.uri);e.uri=t==null?e.uri:t[2];e.uri=this.substituteKeyForValue(e.uri,this.wholeWordMatch,"").replace(/\/\//,"/").replace(/\/\?/,"?").replace(/\/$/,"");e.uri=t==null?e.uri:t[1]+e.uri;return e};URIBuilder.prototype.substituteKeyForValue=function(e,t,n){e=e.replace(new RegExp(":"+t+"/"),(n||"")+"/").replace(new RegExp(":"+t+"$"),""+(n||"")).replace(new RegExp(":"+t+"\\?"),(n||"")+"?").replace(new RegExp(":"+t+"&"),(n||"")+"&");if(t!==this.wholeWordMatch&&t.includes("_")){var i=e.includes("?")?e.substr(0,e.indexOf("?")):e;var o=i.replace(new RegExp("\\b"+t+"\\b"),""+(n||""));e=e.includes("?")?o+e.substr(e.indexOf("?")):o}return e};return URIBuilder}();var _=function(){function UrlUtils(){}UrlUtils.prototype.getOrigin=function(e){if(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.protocol+"//"+t.hostname+(t.port?":"+t.port:"");t=null;return n}else{return window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}};UrlUtils.prototype.getURI=function(e){return e&&e.indexOf("?")>-1?e.split("?")[0]:e};UrlUtils.prototype.updateUrlParameter=function(e,t,n){var i=e.indexOf("#");var o=i===-1?"":e.substr(i);e=i===-1?e:e.substr(0,i);var r=new RegExp("([?&])"+t+"=.*?(&|$)","i");var a=e.indexOf("?")!==-1?"&":"?";if(e.match(r)){e=e.replace(r,"$1"+t+"="+n+"$2")}else{e=e+a+t+"="+n}return e+o};UrlUtils.prototype.getQueryString=function(e){var t="";if(e){var _loop_1=function(n){if(e.hasOwnProperty(n)){(i.isArray(e[n])?e[n]:[e[n]]).forEach((function(e){t+="&"+encodeURIComponent(n)+"="+encodeURIComponent(e)}))}};for(var n in e){_loop_1(n)}}return"?"+(!v.isBlank(t)?t.substring(1):t)};UrlUtils.prototype.parseQuery=function(e){var t={};e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),(function(e,n,i,o){t[n]=o}));return t};UrlUtils.prototype.getAbsoluteURL=function(e,t){var n=new RegExp("([a-zA-Z0-9]+://)"+"([a-zA-Z0-9_]+:[a-zA-Z0-9_]+@)?"+"([a-zA-Z0-9.-]+)"+"|([0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+)"+"(:[0-9]+)?"+"(/.*)?");return n.exec(t)?t:e+t};return UrlUtils}();var y=new _;var C=function(){function CryptographicUtils(){}CryptographicUtils.prototype.sha1Hash=function(e){return o.SHA1(e).toString()};CryptographicUtils.prototype.aesBase64Encrypt=function(e,t){return o.AES.encrypt(o.enc.Base64.parse(e),t).toString()};CryptographicUtils.prototype.aesDecrypt=function(e,t){return o.AES.decrypt(e,t).toString(o.enc.Utf8)};return CryptographicUtils}();var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};function __extends(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return __assign.apply(this,arguments)};function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var S=function(){function FunctionsUtils(){this.signatureArgsRegexp=/function[\s\w]*\(([\w\s\$,]*)\)[\s]*{/}FunctionsUtils.prototype.isEmpty=function(e){var t=e.toString().match(/\{([\s\S]*)\}/m);return!t||t[1].trim()===""||/(proxyFunction)/g.test(e.toString().replace(/\s/g,""))};FunctionsUtils.prototype.getArguments=function(e){var t=this.signatureArgsRegexp.exec(e.toString());if(t){return t[1].replace(/\s/g,"").split(",")}else{throw new Error("failed to retrieve arguments list of "+e)}};FunctionsUtils.prototype.hasArguments=function(e){var t=this.signatureArgsRegexp.exec(e.toString());if(t){return!i.isEmpty(t[1])}else{throw new Error("failed to retrieve arguments list of "+e)}};FunctionsUtils.prototype.getConstructorName=function(e){var t=e.name;if(!t){var n=/function (\$?\w+)\s*\(/.exec(e.toString());if(n){t=n[1]}else{throw new Error("[FunctionsUtils] - Cannot get name from invalid constructor.")}}return t};FunctionsUtils.prototype.getInstanceConstructorName=function(e){return this.getConstructorName(Object.getPrototypeOf(e).constructor)};FunctionsUtils.prototype.extendsConstructor=function(e,t){var newConstructor=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}var i=t.apply(this,e);if(i){return i}};newConstructor.prototype=e.prototype;return newConstructor};FunctionsUtils.prototype.isUnitTestMode=function(){return typeof window.__karma__!=="undefined"};FunctionsUtils.prototype.assertFail=function(){var e=jasmine.createSpy("TestShouldNotReachThatPart-CheckYourTryCatchBlock");expect(e).toHaveBeenCalled()};FunctionsUtils.prototype.convertToArray=function(e){return Object.keys(e).reduce((function(t,n){return __spreadArrays(t||[],[{key:n,value:e[n]}])}),[])};return FunctionsUtils}();var b=new S;var I=new r.NgZone({enableLongStackTrace:false});var w=function(){function WindowUtils(e){var t=this;this.ngZone=e;this.isIframe=function(){return t.getWindow().top!==t.getWindow()};this.ngZone=this.ngZone||I}WindowUtils.prototype.getWindow=function(){return window};WindowUtils.prototype.runTimeoutOutsideAngular=function(e,t){var n=this.ngZone;if(n!==undefined){return n.runOutsideAngular((function(){return setTimeout((function(){return n.run(e)}),t)}))}else{throw new Error("this instance of WindowUtils has not been instantiated through Angular 7 DI")}};WindowUtils.prototype.runIntervalOutsideAngular=function(e,t){var n=this.ngZone;if(n===undefined){throw new Error("this instance of WindowUtils has not been instantiated through Angular 7 DI")}return n.runOutsideAngular((function(){return setInterval((function(){return n.run(e)}),t)}))};WindowUtils.SMARTEDIT_IFRAME_ID="ySmartEditFrame";return WindowUtils}();var E=new w;var P=function(){function ModuleUtils(){}ModuleUtils.prototype.initialize=function(e,t){if(t===void 0){t=[]}return{provide:r.APP_INITIALIZER,useFactory:function(){e.apply(undefined,Array.prototype.slice.call(arguments));return function(e){}},deps:t,multi:true}};ModuleUtils.prototype.bootstrap=function(e,t){if(t===void 0){t=[]}return{provide:r.APP_BOOTSTRAP_LISTENER,useFactory:function(){e.apply(undefined,Array.prototype.slice.call(arguments));return function(e){}},deps:t,multi:true}};ModuleUtils.prototype.provideValues=function(e){var t=e||{};return Object.keys(t).map((function(e){return{provide:e,useValue:t[e]}}))};ModuleUtils=__decorate([r.Injectable()],ModuleUtils);return ModuleUtils}();var T=new P;(function(e){e[e["log"]=0]="log";e[e["debug"]=1]="debug";e[e["info"]=2]="info";e[e["warn"]=3]="warn";e[e["error"]=4]="error"})(t.LogLevel||(t.LogLevel={}));var A=function(){function LogService(){this.logLevel=t.LogLevel.info}LogService.prototype.log=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._log(t.LogLevel.log,e)};LogService.prototype.debug=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._log(t.LogLevel.debug,e)};LogService.prototype.info=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._log(t.LogLevel.info,e)};LogService.prototype.warn=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._log(t.LogLevel.warn,e)};LogService.prototype.error=function(){var e=[];for(var n=0;n<arguments.length;n++){e[n]=arguments[n]}this._log(t.LogLevel.error,e)};LogService.prototype.setLogLevel=function(e){this.logLevel=e};LogService.prototype._log=function(e,n){var i;if(e>=this.logLevel){var o=t.LogLevel[e];if(this._console()&&this._console()[o]){(i=this._console())[o].apply(i,n)}}};LogService.prototype._console=function(){return console};return LogService}();var D=function(){function PromiseUtils(){var t=this;this.WAIT_TIMEOUT=4;this.FAILURE_TIMEOUT=2e3;this.handlePromiseRejections=function(e){var n=e.then;var i=t.defaultFailureCallback;e.then=function(e,t){var o=t?t:i;return n.call(this,e,o)};return e};this.defaultFailureCallback=function(n){if(undefined!==n&&null!==n&&"canceled"!==n){if(i.isPlainObject(n)){if(!t.isAjaxError(n)){e.logService.error("exception caught in promise: "+JSON.stringify(n))}}else if(!i.isBoolean(n)){e.logService.error(n)}}e.logService.error("defaultFailureCallback:",n);return Promise.reject(n)}}e=PromiseUtils;PromiseUtils.prototype.toPromise=function(t,n){return function(){try{return Promise.resolve(t.apply(n,Array.prototype.slice.call(arguments)))}catch(t){e.logService.error("execution of a method that was turned into a promise failed");e.logService.error(t);return Promise.reject(t)}}};PromiseUtils.prototype.promise=function(e){return this.handlePromiseRejections(new Promise(e))};PromiseUtils.prototype.defer=function(){var e;var t;var n={promise:this.promise((function(n,i){e=n;t=i})),resolve:function(t){e(t)},reject:function(e){t(e)}};return n};PromiseUtils.prototype.sleep=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,new Promise((function(t){return setTimeout(t,e)}))]}))}))};PromiseUtils.prototype.isAjaxError=function(e){return e.hasOwnProperty("headers")};PromiseUtils.prototype.waitOnCondition=function(e,t,n,i){var o=this;if(i===void 0){i=0}setTimeout((function(){if(e()){t()}else if(i<o.FAILURE_TIMEOUT){o.waitOnCondition(e,t,n,i+o.WAIT_TIMEOUT)}else{throw new Error("PromiseUtils: "+n)}}),this.WAIT_TIMEOUT)};PromiseUtils.prototype.resolveToCallbackWhenCondition=function(e,t,n){return __awaiter(this,void 0,void 0,(function(){var i=this;return __generator(this,(function(o){return[2,new Promise((function(o){i.waitOnCondition(e,(function(){return o(t())}),n?n:"condition for promise resolution was never met")}))]}))}))};PromiseUtils.prototype.attempt=function(e){return e.then((function(e){return{error:null,data:e}})).catch((function(e){return{error:e,data:null}}))};var e;PromiseUtils.logService=new A;PromiseUtils=e=__decorate([r.Injectable()],PromiseUtils);return PromiseUtils}();var O=new D;var R=function(){function BooleanUtils(){}BooleanUtils.prototype.areAllTruthy=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=arguments;return e.every((function(e){return e&&e.apply(e,t)}))}};BooleanUtils.prototype.isAnyTruthy=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return function(){var t=arguments;return e.some((function(e){return e&&e.apply(e,t)}))}};return BooleanUtils}();var M=new R;var x=function(){function HttpUtils(){}HttpUtils.prototype.isGET=function(e){return e.method==="GET"};HttpUtils.prototype.isRequestOfAccept=function(e,t){return!!e.headers&&!!e.headers.get("Accept")&&(e.headers.get("Accept")||"").includes(t)};HttpUtils.prototype.isResponseOfContentType=function(e,t){return!!e.headers&&!!e.headers.get("Content-type")&&(e.headers.get("Content-type")||"").indexOf(t)===0};HttpUtils.prototype.isHTMLRequest=function(e,t){return this.isGET(e)&&(this.isRequestOfAccept(e,"text/html")||/.+\.html$/.test(e.url)||/.+\.html\?/.test(e.url))};HttpUtils.prototype.isJSONRequest=function(e,t){return this.isGET(e)&&(t&&this.isResponseOfContentType(t,"json")||/.+\.json$/.test(e.url))};HttpUtils.prototype.isJSRequest=function(e){return this.isGET(e)&&/.+\.js$/.test(e.url)};HttpUtils.prototype.isCRUDRequest=function(e,t){return!this.isHTMLRequest(e,t)&&!this.isJSONRequest(e,t)&&!this.isJSRequest(e)};HttpUtils.prototype.transformHttpParams=function(e,t){return new a.HttpParams({fromObject:JSON.parse(v.replaceAll(JSON.stringify(this.copyHttpParamsOrHeaders(e)),t))})};HttpUtils.prototype.copyHttpParamsOrHeaders=function(e){var t={};e.keys().forEach((function(n){var i=e.getAll(n);if(i!==null){t[n]=i.length>1?i:i[0]}}));return t};HttpUtils.prototype.buildHttpResponse=function(e,t){var n=Promise.resolve(t);return s.from(n).pipe(c.switchMap((function(t){var n=t[0];var o=t[1];var r=e.clone({body:o});i.merge(r,{status:n});if(200<=n&&n<300){return new s.Observable((function(e){e.next(new a.HttpResponse(r))}))}else{return s.throwError(new a.HttpErrorResponse(i.merge(r,{error:o})))}})))};return HttpUtils}();var N=new x;var k=function(){function BaseValueAccessor(){this.disabled=false;this.value=null}BaseValueAccessor.prototype.onChange=function(e){};BaseValueAccessor.prototype.onTouched=function(){};BaseValueAccessor.prototype.registerOnChange=function(e){this.onChange=e};BaseValueAccessor.prototype.registerOnTouched=function(e){this.onTouched=e};BaseValueAccessor.prototype.setDisabledState=function(e){this.disabled=e};BaseValueAccessor.prototype.writeValue=function(e){this.value=e};return BaseValueAccessor}();var F;(function(e){e["Class"]="ClassAnnotation";e["Method"]="MethodAnnotation"})(F||(F={}));var z=function(){function AnnotationService(){this.INJECTABLE_NAME_KEY="getInjectableName";this.ORIGINAL_CONSTRUCTOR_KEY="originalConstructor";this.getClassAnnotations=i.memoize(this.getClassAnnotationsLogic);this.getMethodAnnotations=i.memoize(this.getMethodAnnotationsLogic,(function(e,t){return JSON.stringify(e.prototype)+t}));this.functionsUtils=new S;this.annotationFactoryMap={}}AnnotationService.prototype.getClassAnnotation=function(e,t){var n=this.getClassAnnotations(e);var i=t.annotationName;if(n){if(i in n){return n[i]}}else{return null}};AnnotationService.prototype.getMethodAnnotation=function(e,t,n){var i=this.getMethodAnnotations(e,t);var o=n.annotationName;if(i){if(o in i){return i[o]}}else{return null}};AnnotationService.prototype.hasClassAnnotation=function(e,t){var n=this.getClassAnnotations(e);return t.annotationName in n?true:false};AnnotationService.prototype.hasMethodAnnotation=function(e,t,n){var i=this.getMethodAnnotations(e,t);return n.annotationName in i?true:false};AnnotationService.prototype.setClassAnnotationFactory=function(e,t){this.annotationFactoryMap[e]=t;return t};AnnotationService.prototype.getClassAnnotationFactory=function(e){var t=this;var classAnnotationFactory=function(){var n=[];for(var o=0;o<arguments.length;o++){n[o]=arguments[o]}return function(o){var r=t.functionsUtils.extendsConstructor(o,(function(){var i=[];for(var r=0;r<arguments.length;r++){i[r]=arguments[r]}var a=t.annotationFactoryMap[e];if(a){var s=a(n)(this,o,i);if(s){return s}}else{throw new Error("annotation '"+e+"' is used on '"+o.name+"' but its ClassAnnotationFactory may not have been added to the dependency injection")}}));i.merge(r,o);r.__annotations__=o.__annotations__;r.__parameters__=o.__parameters__;r.__prop__metadata__=o.__prop__metadata__;Reflect.getMetadataKeys(o).forEach((function(e){Reflect.defineMetadata(e,Reflect.getMetadata(e,o),r)}));var a=t.getOriginalConstructor(o);Reflect.defineMetadata(t.ORIGINAL_CONSTRUCTOR_KEY,a,r);Reflect.defineMetadata(F.Class+":"+e,n,a);return r}};classAnnotationFactory.annotationName=e;return classAnnotationFactory};AnnotationService.prototype.setMethodAnnotationFactory=function(e,t){this.annotationFactoryMap[e]=t;return t};AnnotationService.prototype.getMethodAnnotationFactory=function(e){var t=this;var methodAnnotationFactory=function(){var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}return function(i,o,r){var a=r.value;r.value=function(){var i=t.annotationFactoryMap[e];if(i){return a?i(n)(this,o,a.bind(this),arguments):undefined}else{throw new Error("annotation '"+e+"' is used but its MethodAnnotationFactory may not have been added to the dependency injection")}};Reflect.defineMetadata(F.Method+":"+e,n,i,o)}};methodAnnotationFactory.annotationName=e;return methodAnnotationFactory};AnnotationService.prototype.getOriginalConstructor=function(e){return Reflect.getMetadata(this.ORIGINAL_CONSTRUCTOR_KEY,e)||e};AnnotationService.prototype.getClassAnnotationsLogic=function(e){var t=this.getOriginalConstructor(e);var n={};Reflect.getMetadataKeys(t).filter((function(e){return e.toString().startsWith(F.Class)})).map((function(e){n[e.split(":")[1]]=Reflect.getMetadata(e,t)}));return n};AnnotationService.prototype.getMethodAnnotationsLogic=function(e,t){var n={};Reflect.getMetadataKeys(e.prototype,t).filter((function(e){return e.toString().startsWith(F.Method)})).map((function(i){n[i.split(":")[1]]=Reflect.getMetadata(i,e.prototype,t)}));return n};return AnnotationService}();var L=new z;var V="CacheConfig";var $=L.getClassAnnotationFactory(V);function CacheConfigAnnotationFactory(e){"ngInject";return L.setClassAnnotationFactory(V,(function(t){return function(n,i,o){i.call.apply(i,__spreadArrays([n],o));n.cacheConfig=t[0];e.debug("adding cache config "+JSON.stringify(n.cacheConfig)+" to class "+b.getInstanceConstructorName(n),n)}}))}var U="Cached";var j=L.getMethodAnnotationFactory(U);function CachedAnnotationFactory(e){"ngInject";var t=L.setMethodAnnotationFactory(U,(function(t){return function(n,o,r,a){var s=[];var c=[];if(t[0]){s=t[0].actions;c=t[0].tags}if(n.cacheConfig){if(n.cacheConfig.actions){s=i.uniq(s.concat(n.cacheConfig.actions))}if(n.cacheConfig.tags){c=i.uniq(c.concat(n.cacheConfig.tags))}}if(!s.length){var l=b.getInstanceConstructorName(n);throw new Error("method "+o+" of "+l+" is @Cached annotated but no CacheAction is specified either through @Cached or through class level @CacheConfig annotation")}return e.handle(n,o,r,Array.prototype.slice.apply(a),s,c)}}));return t}var B="InvalidateCache";var InvalidateCache=function(e){return L.getMethodAnnotationFactory(B)(e)};function InvalidateCacheAnnotationFactory(e){"ngInject";return L.setMethodAnnotationFactory(B,(function(t){return function(n,i,o,r){var a=[];var s=t[0];if(!s){if(n.cacheConfig&&n.cacheConfig.tags){a=n.cacheConfig.tags}}else{a=[s]}if(!a.length){throw new Error("method "+i+" of "+n.constructor.name+" is @InvalidateCache annotated but no EvictionTag is specified either through @InvalidateCache or through class level @CacheConfig annotation")}var c=o.apply(undefined,Array.prototype.slice.call(r));if(c&&c.then){return c.then((function(t){e.evict.apply(e,a);return t}))}else{e.evict.apply(e,a);return c}}}))}var H=function(){function CacheAction(e){this.name=e}return CacheAction}();var G,W;var q="@smart/utils";var K=q+"_WHO_AM_I_RESOURCE_URI";var Y=q+"_I18N_RESOURCE_URI";var X=q+"_EVENTSERVICE";var Z="REAUTH_STARTED";var Q="/authorizationserver/oauth/token";var J="/smarteditwebservices/v1/i18n";var ee="smartedit";var te=(G={},G["^(?!"+J+"/.*$).*$"]=Q,G);var ne=(W={},W[Q]={client_id:ee},W);var ie="/";var oe="SWITCH_LANGUAGE_EVENT";var re="SELECTED_LANGUAGE";var ae={AUTHORIZATION_SUCCESS:"AUTHORIZATION_SUCCESS",USER_HAS_CHANGED:"USER_HAS_CHANGED",LOGOUT:"SE_LOGOUT_EVENT",CLEAR_PERSPECTIVE_FEATURES:"CLEAR_PERSPECTIVE_FEATURES",EXPERIENCE_UPDATE:"experienceUpdate",PERMISSION_CACHE_CLEANED:"PERMISSION_CACHE_CLEANED",PAGE_CHANGE:"PAGE_CHANGE",PAGE_CREATED:"PAGE_CREATED_EVENT",PAGE_UPDATED:"PAGE_UPDATED_EVENT",PAGE_DELETED:"PAGE_DELETED_EVENT",PAGE_SELECTED:"PAGE_SELECTED_EVENT",PAGE_RESTORED:"PAGE_RESTORED_EVENT",REAUTH_STARTED:"REAUTH_STARTED"};var se="en";var ce=new r.InjectionToken("LANGUAGE_SERVICE_CONSTANTS");var le=new r.InjectionToken("LANGUAGE_SERVICE");var de=function(){function CacheEngine(e,t,n){this.windowUtils=e;this.promiseUtils=t;this.logService=n;this.cachedItemsRegistry=[];this.startBackgroundMonitoringJob()}e=CacheEngine;CacheEngine.prototype.addItem=function(e,t,n){if(this.getItemIndex(e)===-1){this.cachedItemsRegistry.push({item:e,cacheTiming:t,refresh:n,completed:false,processing:false,defer:this.promiseUtils.defer()})}else{this.logService.warn("CacheEngine - item already exist for id: "+e.id)}};CacheEngine.prototype.getItemById=function(e){var t=this.cachedItemsRegistry.find((function(t){return t.item.id===e}));return t?t.item:null};CacheEngine.prototype.handle=function(e){var t=this.cachedItemsRegistry[this.getItemIndex(e)];if(t.completed&&!this.hasExpired(e)){t.defer.resolve(e.cache)}else if(!t.processing){t.processing=true;this.refreshCache(t)}return t.defer.promise};CacheEngine.prototype.evict=function(){var e=this;var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}t.forEach((function(t){e.cachedItemsRegistry.filter((function(e){return e.item.evictionTags.indexOf(t)>-1})).forEach((function(t){return e.cachedItemsRegistry.splice(e.getItemIndex(t.item),1)}))}))};CacheEngine.prototype.startBackgroundMonitoringJob=function(){var t=this;this.windowUtils.runIntervalOutsideAngular((function(){return Promise.all(t.cachedItemsRegistry.filter((function(e){return t.needRefresh(e.item)})).map((function(e){return t.refreshCache(e)})))}),e.BACKGROUND_REFRESH_INTERVAL)};CacheEngine.prototype.refreshCache=function(e){var t=this;return e.refresh().then((function(t){e.cacheTiming.setAge(e.item);e.item.cache=t;e.item.timestamp=(new Date).getTime();e.completed=true;e.processing=false;e.defer.resolve(t)}),(function(n){t.logService.debug("CacheEngine - unable to refresh cache for id: "+e.item.id,n);delete e.item.cache;e.defer.reject(n)}))};CacheEngine.prototype.hasExpired=function(e){return e.timestamp+e.expirationAge<=(new Date).getTime()};CacheEngine.prototype.needRefresh=function(e){return e.timestamp+e.refreshAge<=(new Date).getTime()};CacheEngine.prototype.getItemIndex=function(e){return this.cachedItemsRegistry.findIndex((function(t){return t.item.id===e.id}))};var e;CacheEngine.BACKGROUND_REFRESH_INTERVAL=1e4;CacheEngine=e=__decorate([r.Injectable(),__metadata("design:paramtypes",[w,D,A])],CacheEngine);return CacheEngine}();var pe=function(){function DefaultCacheTiming(e,t){this.expirationAge=e;this.refreshAge=t}DefaultCacheTiming.prototype.setAge=function(e){var t=__assign(__assign({},e),{expirationAge:this.expirationAge,refreshAge:this.refreshAge});return t};return DefaultCacheTiming}();var ue=function(){function CacheService(e,t,n,i,o){this.logService=e;this.stringUtils=t;this.functionsUtils=n;this.eventService=i;this.cacheEngine=o;this.predicatesRegistry=[];this.eventListeners=[];this.defaultCacheTiming=new pe(24*60*60*1e3,12*60*60*1e3)}CacheService.prototype.register=function(e,t){this.predicatesRegistry.unshift({test:e,cacheTiming:t});return this};CacheService.prototype.handle=function(e,t,n,i,o,r){var a=this.functionsUtils.getInstanceConstructorName(e);var s=window.btoa(a+t)+this.stringUtils.encode(i);var c=this.cacheEngine.getItemById(s);var l;if(!c){var d=c||{id:s,timestamp:(new Date).getTime(),evictionTags:this.collectEventNamesFromTags(r),cache:null};var p=this.findCacheTimingByCacheActions(o);if(!p){throw new Error("CacheService::handle - No predicate match.")}l=p.setAge(d);this.cacheEngine.addItem(l,p,n.bind.apply(n,__spreadArrays([undefined],Array.prototype.slice.call(i))));this.listenForEvictionByTags(r)}else{l=c}return this.cacheEngine.handle(l)};CacheService.prototype.evict=function(){var e;var t=this;var n=[];for(var i=0;i<arguments.length;i++){n[i]=arguments[i]}var o=this.collectEventNamesFromTags(n);(e=this.cacheEngine).evict.apply(e,o);o.forEach((function(e){return t.eventService.publish(e)}))};CacheService.prototype.listenForEvictionByTags=function(e){var t=this;this.collectEventNamesFromTags(e).filter((function(e){return t.eventListeners.indexOf(e)===-1})).forEach((function(e){t.logService.debug("registering event listener "+e);t.eventListeners.push(e);t.eventService.subscribe(e,(function(n,i){t.logService.debug("cleaning cache on event "+e);t.cacheEngine.evict(e);return Promise.resolve({})}))}))};CacheService.prototype.collectEventNamesFromTags=function(e){var t=this;if(e&&e.length){return i.union.apply(i,e.map((function(e){return t.collectEventNamesFromTag(e)})))}else{return[]}};CacheService.prototype.collectEventNamesFromTag=function(e){var t=this;return i.union.apply(i,__spreadArrays([[e.event]],e.relatedTags?e.relatedTags.map((function(e){return t.collectEventNamesFromTag(e)})):[]))};CacheService.prototype.findCacheTimingByCacheActions=function(e){var t=this.predicatesRegistry.find((function(t){return t.test(e)}));return t?t.cacheTiming:this.defaultCacheTiming};CacheService=__decorate([r.Injectable(),__param(3,r.Inject(X)),__metadata("design:paramtypes",[A,h,S,Object,de])],CacheService);return CacheService}();var me=function(){function EvictionTag(e){this.event=e.event;this.relatedTags=e.relatedTags}return EvictionTag}();var ge="RarelyChangingContent";var he=new H(ge);var ve=function(){function BackendEntry(e,t){this.pattern=e;this.matchingPayload=t}BackendEntry.prototype.respond=function(e){this.mock=e;return this};BackendEntry.prototype.passThrough=function(){};return BackendEntry}();var fe=function(){function HttpBackendService(){this.matchLatestDefinition=false;this.backends={GET:[],POST:[],PUT:[],DELETE:[]}}HttpBackendService.prototype.whenGET=function(e){return this._whenMethod("GET",e)};HttpBackendService.prototype.whenPOST=function(e,t){return this._whenMethod("POST",e,t)};HttpBackendService.prototype.whenPUT=function(e,t){return this._whenMethod("PUT",e,t)};HttpBackendService.prototype.whenDELETE=function(e){return this._whenMethod("DELETE",e)};HttpBackendService.prototype.when=function(e,t,n){return this._whenMethod(e,t,n)};HttpBackendService.prototype.whenAsync=function(e,t,n){return this._whenMethod(e,t,n)};HttpBackendService.prototype.matchLatestDefinitionEnabled=function(e){this.matchLatestDefinition=e};HttpBackendService.prototype.findMatchingMock=function(e){var t=this;var n=(this.matchLatestDefinition?this.backends[e.method].slice().reverse():this.backends[e.method]).find((function(n){if(typeof n.pattern==="string"){return e.urlWithParams.endsWith(n.pattern)&&t.matchingPayloadRestriction(n,e)}else{var i=n.pattern.test(e.urlWithParams)&&t.matchingPayloadRestriction(n,e);n.pattern.lastIndex=0;return i}}));return n?n.mock:undefined};HttpBackendService.prototype._whenMethod=function(e,t,n){var i=new ve(t,n);this.backends[e].push(i);return i};HttpBackendService.prototype.matchingPayloadRestriction=function(e,t){return e.matchingPayload?i.isEqual(e.matchingPayload,t.body):true};HttpBackendService=__decorate([r.Injectable()],HttpBackendService);return HttpBackendService}();var _e=function(){function BackendInterceptor(e,t,n,i){this.httpBackendService=e;this.httpUtils=t;this.urlUtils=n;this.logService=i}BackendInterceptor.prototype.intercept=function(e,t){var n=this.httpBackendService.findMatchingMock(e);if(!n){return t.handle(e)}var o;if(typeof n==="object"){o=[200,i.cloneDeep(n)]}else{var r=null;if(e.method==="GET"){r=decodeURIComponent(this.urlUtils.getQueryString(this.httpUtils.copyHttpParamsOrHeaders(e.params)))}else if(e.headers.get("Content-Type")==="application/x-www-form-urlencoded"){r=e.body}else if(e.method==="POST"||e.method==="PUT"){r=JSON.stringify(e.body)}var a=this.httpUtils.copyHttpParamsOrHeaders(e.headers);o=n(e.method,decodeURIComponent(e.urlWithParams),r,a)}this.logService.debug("backend "+status+" response for "+e.url+": ");return this.httpUtils.buildHttpResponse(e,o).pipe(c.take(1))};BackendInterceptor=__decorate([r.Injectable(),__metadata("design:paramtypes",[fe,x,_,A])],BackendInterceptor);return BackendInterceptor}();var ye=function(){function FlawInjectionInterceptor(e,t){this.httpUtils=e;this.logService=t;this.flawWindow=window;this.flawWindow.allRequests=0;this.flawWindow.flawedRequests=0;this.flawWindow.allResponses=0;this.flawWindow.flawedResponses=0}e=FlawInjectionInterceptor;FlawInjectionInterceptor.registerRequestFlaw=function(e){this.requestMutations.push(e)};FlawInjectionInterceptor.registerResponseFlaw=function(e){this.responseMutations.push(e)};FlawInjectionInterceptor.prototype.intercept=function(t,n){var i=this;var o;if(e.PROBABILITY!==0&&this.httpUtils.isCRUDRequest(t)&&!this._isGET(t)){this.flawWindow.allRequests++;if(this._activateWithProbability(e.PROBABILITY)){this.flawWindow.flawedRequests++;var r=e.requestMutations.find((function(e){return e.test(t)}));if(r){this.logService.error('FLAWED REQUEST-"'+t.url);o=n.handle(r.mutate(t))}}o=n.handle(t);return o.pipe(c.map((function(n){if(n instanceof a.HttpResponse&&i._activateWithProbability(e.PROBABILITY)){i.flawWindow.flawedResponses++;var o=e.responseMutations.find((function(e){return e.test(t)}));if(o&&n instanceof a.HttpResponse){i.logService.error('FLAWED RESPONSE-"'+t.url);return o.mutate(n)}}return n})))}else{return n.handle(t)}};FlawInjectionInterceptor.prototype._isGET=function(e){return e.method==="GET"};FlawInjectionInterceptor.prototype._activateWithProbability=function(e){return Math.random()>=1-e};var e;FlawInjectionInterceptor.requestMutations=[];FlawInjectionInterceptor.responseMutations=[];FlawInjectionInterceptor.PROBABILITY=0;FlawInjectionInterceptor=e=__decorate([r.Injectable(),__metadata("design:paramtypes",[x,A])],FlawInjectionInterceptor);return FlawInjectionInterceptor}();var Ce=function(){function FlawInjectionInterceptorModule(){}FlawInjectionInterceptorModule=__decorate([r.NgModule({imports:[],providers:[{provide:a.HTTP_INTERCEPTORS,useClass:ye,multi:true},{provide:r.APP_INITIALIZER,useFactory:function(){ye.registerRequestFlaw({test:function(e){return/sites\/[\w-]+\//.test(e.url)},mutate:function(e){return e.clone({url:e.url.replace(/sites\/([\w-]+)\//,"sites/"+Math.random()+"/")})}});return function(e){}},multi:true}]})],FlawInjectionInterceptorModule);return FlawInjectionInterceptorModule}();(function(e){e["INFO"]="information";e["SUCCESS"]="success";e["WARNING"]="warning";e["DANGER"]="error"})(t.IAlertServiceType||(t.IAlertServiceType={}));var Se=function(){function IAlertService(){}IAlertService.prototype.showAlert=function(e){"proxyFunction";return};IAlertService.prototype.showInfo=function(e){"proxyFunction";return};IAlertService.prototype.showDanger=function(e){"proxyFunction";return};IAlertService.prototype.showWarning=function(e){"proxyFunction";return};IAlertService.prototype.showSuccess=function(e){"proxyFunction";return};return IAlertService}();var be=function(){function IAuthenticationService(){this.reauthInProgress={};this.initialized=false}IAuthenticationService.prototype.authenticate=function(e){"proxyFunction";return Promise.resolve()};IAuthenticationService.prototype.logout=function(){"proxyFunction";return Promise.resolve()};IAuthenticationService.prototype.isReAuthInProgress=function(e){"proxyFunction";return Promise.resolve(false)};IAuthenticationService.prototype.setReAuthInProgress=function(e){"proxyFunction";return Promise.resolve()};IAuthenticationService.prototype.filterEntryPoints=function(e){"proxyFunction";return Promise.resolve([])};IAuthenticationService.prototype.isAuthEntryPoint=function(e){"proxyFunction";return Promise.resolve(false)};IAuthenticationService.prototype.isAuthenticated=function(e){"proxyFunction";return Promise.resolve(false)};return IAuthenticationService}();var Ie=function(){function IStorageService(){}IStorageService.prototype.isInitialized=function(){"proxyFunction";return Promise.resolve(false)};IStorageService.prototype.storeAuthToken=function(e,t){"proxyFunction";return Promise.resolve()};IStorageService.prototype.getAuthToken=function(e){"proxyFunction";return Promise.resolve(undefined)};IStorageService.prototype.removeAuthToken=function(e){"proxyFunction";return Promise.resolve()};IStorageService.prototype.removeAllAuthTokens=function(){"proxyFunction";return Promise.resolve()};IStorageService.prototype.getValueFromLocalStorage=function(e,t){"proxyFunction";return Promise.resolve()};IStorageService.prototype.setValueInLocalStorage=function(e,t,n){"proxyFunction";return Promise.resolve()};IStorageService.prototype.setItem=function(e,t){"proxyFunction";return Promise.resolve()};IStorageService.prototype.getItem=function(e){"proxyFunction";return Promise.resolve()};return IStorageService}();var we=q+"_TESTMODESERVICE";(function(e){e["Default"]="light";e["Primary"]="emphasized"})(t.FundamentalModalButtonStyle||(t.FundamentalModalButtonStyle={}));(function(e){e["Close"]="close";e["Dismiss"]="dismiss";e["None"]="none"})(t.FundamentalModalButtonAction||(t.FundamentalModalButtonAction={}));(function(e){e["None"]="none";e["Close"]="close";e["Dismiss"]="dismiss"})(t.ModalButtonActions||(t.ModalButtonActions={}));(function(e){e["Default"]="default";e["Primary"]="primary"})(t.ModalButtonStyles||(t.ModalButtonStyles={}));var Ee=function(){function ISharedDataService(){}ISharedDataService.prototype.get=function(e){"proxyFunction";return Promise.resolve({})};ISharedDataService.prototype.set=function(e,t){"proxyFunction";return Promise.resolve()};ISharedDataService.prototype.update=function(e,t){"proxyFunction";return Promise.resolve()};ISharedDataService.prototype.remove=function(e){"proxyFunction";return Promise.resolve({})};ISharedDataService.prototype.containsKey=function(e){"proxyFunction";return Promise.resolve(true)};return ISharedDataService}();var Pe=function(){function ISettingsService(){}ISettingsService.prototype.load=function(){"proxyFunction";return Promise.resolve({key:""})};ISettingsService.prototype.get=function(e){"proxyFunction";return Promise.resolve("")};ISettingsService.prototype.getBoolean=function(e){"proxyFunction";return Promise.resolve(true)};ISettingsService.prototype.getStringList=function(e){"proxyFunction";return Promise.resolve([])};return ISettingsService}();var Te=function(){function IModalService(){}IModalService.prototype.dismissAll=function(){"proxyFunction"};IModalService.prototype.open=function(e){"proxyFunction";return{}};return IModalService}();var Ae=function(){function ISessionService(){}ISessionService.prototype.getCurrentUsername=function(){"proxyFunction";return Promise.resolve("")};ISessionService.prototype.getCurrentUserDisplayName=function(){"proxyFunction";return Promise.resolve("")};ISessionService.prototype.getCurrentUser=function(){"proxyFunction";return Promise.resolve({})};ISessionService.prototype.hasUserChanged=function(){"proxyFunction";return Promise.resolve(true)};ISessionService.prototype.resetCurrentUserData=function(){"proxyFunction";return Promise.resolve()};ISessionService.prototype.setCurrentUsername=function(){"proxyFunction";return Promise.resolve()};return ISessionService}();var De=function(){function IAuthenticationManagerService(){}return IAuthenticationManagerService}();var Oe=[500,502,503,504];var Re=[429];var Me=[408];function serverErrorPredicate(e,t){return t&&i.includes(Oe,t.status)}function clientErrorPredicate(e,t){return t&&i.includes(Re,t.status)}function timeoutErrorPredicate(e,t){return t&&i.includes(Me,t.status)}function retriableErrorPredicate(e,t){return t&&M.isAnyTruthy(serverErrorPredicate,clientErrorPredicate,timeoutErrorPredicate)(e,t)}function noInternetConnectionErrorPredicate(e,t){return t&&t.status===0}var xe=["PUT","POST","DELETE","PATCH"];var Ne=["GET","OPTIONS","HEAD"];function updatePredicate(e,t){return i.includes(xe,e.method)}function readPredicate(e,t){return i.includes(Ne,e.method)}var ke={MAX_BACKOFF:64e3,MAX_ATTEMPT:5,MIN_BACKOFF:0};var Fe=function(){function ExponentialRetry(){}ExponentialRetry.prototype.calculateNextDelay=function(e,t,n){t=t||ke.MAX_BACKOFF;n=n||ke.MIN_BACKOFF;var i=n+Math.random();return Math.min(Math.pow(2,e)*1e3+i,t)};ExponentialRetry.prototype.canRetry=function(e,t){t=t||ke.MAX_ATTEMPT;return e<=t};return ExponentialRetry}();var ze={MAX_ATTEMPT:5,MAX_BACKOFF:32e3,MIN_BACKOFF:0,RETRY_INTERVAL:500};var Le=function(){function LinearRetry(){}LinearRetry.prototype.calculateNextDelay=function(e,t,n,i){n=n||ze.MAX_BACKOFF;i=i||ze.MIN_BACKOFF;t=t||ze.RETRY_INTERVAL;var o=i+Math.random();return Math.min(e*t+o,n)};LinearRetry.prototype.canRetry=function(e,t){t=t||ze.MAX_ATTEMPT;return e<=t};return LinearRetry}();var Ve={MAX_ATTEMPT:5,MIN_BACKOFF:0,RETRY_INTERVAL:500};var $e=function(){function SimpleRetry(){}SimpleRetry.prototype.calculateNextDelay=function(e,t){t=t||Ve.MIN_BACKOFF;e=e||Ve.RETRY_INTERVAL;var n=t+Math.random();return e+n};SimpleRetry.prototype.canRetry=function(e,t){var n=t||Ve.MAX_ATTEMPT;return e<=n};return SimpleRetry}();var Ue=new r.InjectionToken("DefaultRetryStrategy");function defaultRetryStrategyFactory(e){return function(){function class_1(){this.firstFastRetry=true;this.attemptCount=0}class_1.prototype.canRetry=function(){return e.canRetry(this.attemptCount)};class_1.prototype.calculateNextDelay=function(){return e.calculateNextDelay()};return class_1}()}var je=new r.InjectionToken("ExponentialRetryStrategy");function exponentialRetryStrategyFactory(e){return function(){function class_1(){this.firstFastRetry=true;this.attemptCount=0}class_1.prototype.canRetry=function(){return e.canRetry(this.attemptCount)};class_1.prototype.calculateNextDelay=function(){return e.calculateNextDelay(this.attemptCount)};return class_1}()}var Be=new r.InjectionToken("LinearRetryStrategy");function linearRetryStrategyFactory(e){return function(){function class_1(){this.firstFastRetry=true;this.attemptCount=0}class_1.prototype.canRetry=function(){return e.canRetry(this.attemptCount)};class_1.prototype.calculateNextDelay=function(){return e.calculateNextDelay(this.attemptCount)};return class_1}()}var He=function(){function OperationContextService(){this.store=[]}OperationContextService.prototype.register=function(e,t){if(typeof e!=="string"||i.isEmpty(e)){throw new Error("operationContextService.register error: url is invalid")}if(typeof t!=="string"||i.isEmpty(t)){throw new Error("operationContextService.register error: operationContext is invalid")}var n=this.store.findIndex((function(n){return n.urlRegex.test(e)===true&&n.operationContext===t}));if(n!==-1){return this}var o=new RegExp(e.replace(/\/:[^\/]*/g,"/.*"));this.store.push({urlRegex:o,operationContext:t});return this};OperationContextService.prototype.findOperationContext=function(e){var t=this.store.findIndex((function(t){return t.urlRegex.test(e)===true}));return~t?this.store[t].operationContext:null};OperationContextService=__decorate([r.Injectable(),__metadata("design:paramtypes",[])],OperationContextService);return OperationContextService}();var Ge="OperationContextRegistered";var We=L.getClassAnnotationFactory(Ge);function OperationContextAnnotationFactory(e,t,n){"ngInject";return L.setClassAnnotationFactory(Ge,(function(i){return function(o,r,a){r.call.apply(r,__spreadArrays([o],a));var s=e.get(i[0],i[0]);if(typeof i[1]==="string"){var c=n[i[1]];t.register(s,c)}else if(Array.isArray(i[1])&&i[1].length>0){i[1].forEach((function(e){t.register(s,n[e])}))}}}))}var qe=q+"_OPERATION_CONTEXT";var Ke=function(){function RetryInterceptor(e,t,n,i,o,r,a,s,c){this.httpClient=e;this.translate=t;this.operationContextService=n;this.alertService=i;this.OPERATION_CONTEXT=c;this.TRANSLATE_NAMESPACE="se.gracefuldegradation.";this.predicatesRegistry=[];this.requestToRetryTegistry={};this.register(noInternetConnectionErrorPredicate,a).register(o.isAnyTruthy(clientErrorPredicate,timeoutErrorPredicate),r).register(o.areAllTruthy(readPredicate,retriableErrorPredicate),r).register(serverErrorPredicate,a)}RetryInterceptor.prototype.predicate=function(e,t){return this.findMatchingStrategy(e,t)!==null};RetryInterceptor.prototype.responseError=function(e,t){var n=this.retrieveRetryStrategy(e);if(!n){var i=this.findMatchingStrategy(e,t);if(i){this.alertService.showWarning({message:this.translate.instant(this.TRANSLATE_NAMESPACE+"stillworking")});n=new i;n.attemptCount=0;this.storeRetryStrategy(e,n)}else{return Promise.reject(t)}}return this.handleRetry(n,e,t)};RetryInterceptor.prototype.register=function(e,t){if(typeof e!=="function"){throw new Error("retryInterceptor.register error: predicate must be a function")}if(typeof t!=="function"){throw new Error("retryInterceptor.register error: retryStrategy must be a function")}this.predicatesRegistry.unshift({predicate:e,retryStrategy:t});return this};RetryInterceptor.prototype.findMatchingStrategy=function(e,t){var n=this.operationContextService.findOperationContext(e.url)||this.OPERATION_CONTEXT.INTERACTIVE;var i=this.predicatesRegistry.find((function(i){return i.predicate(e,t,n)}));return i?i.retryStrategy:null};RetryInterceptor.prototype.handleRetry=function(e,t,n){var i=this;e.attemptCount++;if(e.canRetry()){var o=e.firstFastRetry?0:e.calculateNextDelay();e.firstFastRetry=false;return new Promise((function(e,n){setTimeout((function(){i.httpClient.request(t).toPromise().then((function(n){i.removeRetryStrategy(t);return e(n)}),(function(e){return n(e)}))}),o)}))}else{this.alertService.showDanger({message:this.translate.instant(this.TRANSLATE_NAMESPACE+"somethingwrong")});return Promise.reject(n)}};RetryInterceptor.prototype.storeRetryStrategy=function(e,t){this.requestToRetryTegistry[this.getRequestUUID(e)]=t};RetryInterceptor.prototype.removeRetryStrategy=function(e){delete this.requestToRetryTegistry[this.getRequestUUID(e)]};RetryInterceptor.prototype.retrieveRetryStrategy=function(e){return this.requestToRetryTegistry[this.getRequestUUID(e)]};RetryInterceptor.prototype.getRequestUUID=function(e){return e.clone().toString()};RetryInterceptor=__decorate([r.Injectable(),__param(5,r.Inject(Ue)),__param(6,r.Inject(je)),__param(7,r.Inject(Be)),__param(8,r.Inject(qe)),__metadata("design:paramtypes",[a.HttpClient,l.TranslateService,He,Se,R,Object,Object,Object,Object])],RetryInterceptor);return RetryInterceptor}();var Ye=function(){function PermissionErrorInterceptor(e){this.alertService=e}PermissionErrorInterceptor.prototype.predicate=function(e,t){return t.status===403};PermissionErrorInterceptor.prototype.responseError=function(e,t){var n=this;if(t.error&&t.error.errors){t.error.errors.filter((function(e){return e.type==="TypePermissionError"})).forEach((function(e){n.alertService.showDanger({message:e.message,duration:1e4})}))}return Promise.reject(t)};PermissionErrorInterceptor=__decorate([r.Injectable(),__metadata("design:paramtypes",[Se])],PermissionErrorInterceptor);return PermissionErrorInterceptor}();var Xe={};var Ze=function(){function UnauthorizedErrorInterceptor(e,t,n,i,o,r){this.httpClient=e;this.authenticationService=t;this.promiseUtils=n;this.httpUtils=i;this.eventService=r;this.promisesToResolve={};this.rejectedUrls=[/authenticate/];this.rejectedUrls.push(o)}UnauthorizedErrorInterceptor.prototype.predicate=function(e,t){return t.status===401&&(e.url?this.httpUtils.isCRUDRequest(e,t)&&this.isUrlNotRejected(e.url):true)};UnauthorizedErrorInterceptor.prototype.responseError=function(e,t){var n=this;var i=this.promiseUtils.defer();var o=i.promise.then((function(){return n.httpClient.request(e).toPromise()}));this.authenticationService.isAuthEntryPoint(e.url).then((function(r){if(!r){n.authenticationService.filterEntryPoints(e.url).then((function(t){var r=t[0];n.promisesToResolve[r]=n.promisesToResolve[r]||[];n.promisesToResolve[r].push({requestIdentifier:e.url,deferred:i});if(n.httpUtils.isGET(e)){Xe[e.url]=o}n.authenticationService.isReAuthInProgress(r).then((function(t){if(!t){n.authenticationService.setReAuthInProgress(r).then((function(){var t=n.promisesToResolve;n.eventService.publish(Z);n.authenticationService.authenticate(e.url).then(function(){t[this].forEach((function(e){delete Xe[e.requestIdentifier];e.deferred.resolve()}));t[this]=[]}.bind(r),function(){t[this].forEach((function(e){delete Xe[e.requestIdentifier];e.deferred.reject()}));t[this]=[]}.bind(r))}))}}))}))}else{i.reject(t)}}));return o};UnauthorizedErrorInterceptor.prototype.isUrlNotRejected=function(e){return!this.rejectedUrls.some((function(t){return typeof t==="string"?e.indexOf(t)===0:t.test(e)}))};UnauthorizedErrorInterceptor=__decorate([r.Injectable(),__param(4,r.Inject(K)),__param(5,r.Inject(X)),__metadata("design:paramtypes",[a.HttpClient,be,D,x,String,Object])],UnauthorizedErrorInterceptor);return UnauthorizedErrorInterceptor}();var Qe=function(){function HttpAuthInterceptor(e,t,n,i){this.authenticationService=e;this.injector=t;this.httpUtils=n;this.I18N_RESOURCE_URI=i}HttpAuthInterceptor.prototype.intercept=function(e,t){var n=this;if(!e.url.includes(this.I18N_RESOURCE_URI)&&this.httpUtils.isCRUDRequest(e)){if(this.httpUtils.isGET(e)&&Xe[e.url]){return new s.Observable((function(t){Xe[e.url].then((function(e){t.next(new a.HttpResponse({status:200,body:e}))}))}))}return s.from(this.authenticationService.filterEntryPoints(e.url)).pipe(c.switchMap((function(i){if(i&&i.length){return s.from(n.injector.get(Ie).getAuthToken(i[0])).pipe(c.switchMap((function(n){if(n){var i=e.clone({headers:e.headers.set("Authorization",n.token_type+" "+n.access_token)});return t.handle(i)}else{return t.handle(e)}})))}else{return t.handle(e)}})))}else{return t.handle(e)}};HttpAuthInterceptor=__decorate([r.Injectable(),__param(3,r.Inject(Y)),__metadata("design:paramtypes",[be,r.Injector,x,String])],HttpAuthInterceptor);return HttpAuthInterceptor}();var Je=function(){function HttpErrorInterceptorService(e,t){this.injector=e;this.promiseUtils=t;this._errorInterceptors=[]}HttpErrorInterceptorService.prototype.addInterceptors=function(e){var t=this;e.forEach((function(e){t.addInterceptor(e)}))};HttpErrorInterceptorService.prototype.addInterceptor=function(e){var t=this;var n;if(e.predicate||e.responseError){n=e}else{n=this.injector.get(e)}this._validateInterceptor(n);this._errorInterceptors.unshift(n);return function(){t._errorInterceptors.splice(t._errorInterceptors.indexOf(n),1)}};HttpErrorInterceptorService.prototype.responseError=function(e,t){var n=this._errorInterceptors.filter((function(n){return n.predicate(e,t)===true}));var o=this.promiseUtils.defer();if(n.length){this._iterateErrorInterceptors(e.clone(),i.cloneDeep(t),n,o)}else{o.reject(t)}return s.from(o.promise)};HttpErrorInterceptorService.prototype._iterateErrorInterceptors=function(e,t,n,i,o){if(o===void 0){o=0}if(o===n.length){i.reject(t)}else{var r=this._iterateErrorInterceptors.bind(this);Promise.resolve(n[o].responseError(e,t)).then((function(e){i.resolve(e)}),(function(t){r(e,t,n,i,++o)}))}};HttpErrorInterceptorService.prototype._validateInterceptor=function(e){if(!e.predicate||typeof e.predicate!=="function"){throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.predicate")}if(!e.responseError||typeof e.responseError!=="function"){throw new Error("httpErrorInterceptorService.addInterceptor.error.interceptor.has.no.responseError")}};HttpErrorInterceptorService=__decorate([r.Injectable(),__metadata("design:paramtypes",[r.Injector,D])],HttpErrorInterceptorService);return HttpErrorInterceptorService}();var et=function(){function HttpErrorInterceptor(e,t){this.httpErrorInterceptorService=e;this.httpUtils=t}HttpErrorInterceptor.prototype.intercept=function(e,t){var n=this;return t.handle(e).pipe(c.catchError((function(t,i){if(!n.httpUtils.isHTMLRequest(e,t)){return n.httpErrorInterceptorService.responseError(e,t)}else{return s.throwError(t)}})))};HttpErrorInterceptor=__decorate([r.Injectable(),__metadata("design:paramtypes",[Je,x])],HttpErrorInterceptor);return HttpErrorInterceptor}();var tt=function(){function HttpInterceptorModule(){}e=HttpInterceptorModule;HttpInterceptorModule.forRoot=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}return{ngModule:e,providers:__spreadArrays(t,[{provide:a.HTTP_INTERCEPTORS,useClass:Qe,multi:true},{provide:a.HTTP_INTERCEPTORS,useClass:et,multi:true},{provide:a.HTTP_INTERCEPTORS,useClass:_e,multi:true},{provide:r.APP_BOOTSTRAP_LISTENER,useFactory:function(e){e.addInterceptors(t);return function(e){}},deps:[Je],multi:true}])}};var e;HttpInterceptorModule=e=__decorate([r.NgModule({imports:[Ce],providers:[$e,Le,Fe,{provide:Ue,useFactory:defaultRetryStrategyFactory,deps:[$e]},{provide:je,useFactory:exponentialRetryStrategyFactory,deps:[Fe]},{provide:Be,useFactory:linearRetryStrategyFactory,deps:[$e]},Je,fe]})],HttpInterceptorModule);return HttpInterceptorModule}();(function(e){e["UNKNOW_ERROR"]="Unknown Error"})(t.StatusText||(t.StatusText={}));var nt=function(){function HttpPaginationResponseAdapter(){}HttpPaginationResponseAdapter.transform=function(e){var t=e;var n=t&&t.body&&t.body.pagination;if(!n){return t}var i=Object.keys(t.body).find((function(e){return e!=="pagination"&&Array.isArray(t.body[e])}));return i?t.clone({body:__assign(__assign({},t.body),{results:t.body[i]})}):t};return HttpPaginationResponseAdapter}();var it=function(){function ResponseAdapterInterceptor(){}ResponseAdapterInterceptor.prototype.intercept=function(e,t){return t.handle(e).pipe(c.map(nt.transform))};ResponseAdapterInterceptor=__decorate([r.Injectable()],ResponseAdapterInterceptor);return ResponseAdapterInterceptor}();var ot=function(){function RestClient(e,t,n){var i=this;this.httpClient=e;this.url=t;this.identifierName=n;this.DEFAULT_HEADERS={"x-requested-with":"Angular"};this.DEFAULT_OPTIONS={headers:{}};this.metadataActivated=false;this.getMethodForSingleInstance=function(e){switch(e){case"getById":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.getById(e,t)};case"get":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.get(e,t)};case"update":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.update(e,t)};case"save":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.save(e,t)};case"patch":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.patch(e,t)};case"remove":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.remove(e,t)}}};this.getMethodForArray=function(e){switch(e){case"query":return function(e,t){if(t===void 0){t=i.DEFAULT_OPTIONS}return i.query(e,t)}}}}RestClient.prototype.getById=function(e,t){if(t===void 0){t=this.DEFAULT_OPTIONS}return this.addHeadersToBody(this.httpClient.get(this.url+"/"+e,{headers:this.buildRequestHeaders(t.headers||{}),observe:"response"})).toPromise()};RestClient.prototype.get=function(e,t){if(t===void 0){t=this.DEFAULT_OPTIONS}var n=this.convertToTypeMapOfString(e);return this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,n),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,e)),headers:this.buildRequestHeaders(t.headers||{}),observe:"response"})).toPromise()};RestClient.prototype.query=function(e,t){if(t===void 0){t=this.DEFAULT_OPTIONS}var n=e?this.convertToTypeMapOfString(e):e;return this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,n),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,e)),headers:this.buildRequestHeaders(t.headers||{}),observe:"response"})).pipe(c.map((function(e){return e||[]}))).toPromise()};RestClient.prototype.page=function(e,t){if(t===void 0){t=this.DEFAULT_OPTIONS}return this.addHeadersToBody(this.httpClient.get(this.interpolateParamsInURL(this.url,e),{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,e)),headers:this.buildRequestHeaders(t.headers||{}),observe:"response"})).pipe(c.map((function(e){return e}))).toPromise()};RestClient.prototype.update=function(e,t){var n=this;if(t===void 0){t=this.DEFAULT_OPTIONS}return this.performIdentifierCheck(e).then((function(){return n.buildUrlWithIdentifier(e)})).then((function(i){return n.httpClient.put(i,e,{headers:n.buildRequestHeaders(t.headers||{})}).toPromise()}))};RestClient.prototype.save=function(e,t){if(t===void 0){t=this.DEFAULT_OPTIONS}return this.httpClient.post(this.interpolateParamsInURL(this.url,e),e,{headers:this.buildRequestHeaders(t.headers||{})}).toPromise()};RestClient.prototype.patch=function(e,t){var n=this;if(t===void 0){t=this.DEFAULT_OPTIONS}return this.performIdentifierCheck(e).then((function(){return n.buildUrlWithIdentifier(e)})).then((function(i){return n.httpClient.patch(i,e,{headers:n.buildRequestHeaders(t.headers||{})}).toPromise()}))};RestClient.prototype.remove=function(e,t){var n=this;if(t===void 0){t=this.DEFAULT_OPTIONS}return this.performIdentifierCheck(e).then((function(){return n.buildUrlWithIdentifier(e)})).then((function(e){return n.httpClient.delete(e,{headers:n.buildRequestHeaders(t.headers||{})}).toPromise()}))};RestClient.prototype.queryByPost=function(e,t,n){if(n===void 0){n=this.DEFAULT_OPTIONS}var i=this.convertToTypeMapOfString(t);return this.httpClient.post(this.interpolateParamsInURL(this.url,i),e,{params:this.formatQueryString(this.determineTrueQueryStringParams(this.url,t)),headers:this.buildRequestHeaders(n.headers||{})}).toPromise()};RestClient.prototype.activateMetadata=function(){this.metadataActivated=true};RestClient.prototype.convertToTypeMapOfString=function(e){return i.mapValues(e,(function(e){return String(e)}))};RestClient.prototype.formatQueryString=function(e){return this.sortByKeys(e)};RestClient.prototype.addHeadersToBody=function(e){var t=this;return e.pipe(c.map((function(e){var n=e.body;if(t.metadataActivated&&n){n.headers=e.headers}return n})))};RestClient.prototype.interpolateParamsInURL=function(e,t){if(t&&typeof t!=="string"){return new f(e).replaceParams(t).sanitize().build()}else{return e}};RestClient.prototype.determineTrueQueryStringParams=function(e,t){return typeof t==="object"?Object.keys(t).reduce((function(n,o){if(!new RegExp(":"+o+"/").test(e)&&!new RegExp(":"+o+"$").test(e)&&!new RegExp(":"+o+"&").test(e)&&!i.isNil(t[o])){n[o]=t[o]}return n}),{}):{}};RestClient.prototype.sortByKeys=function(e){var t=i.sortBy(i.keys(e),(function(e){return e}));return i.zipObject(t,i.map(t,(function(t){return e[t]})))};RestClient.prototype.performIdentifierCheck=function(e){var t=typeof e==="string"?e:e[this.identifierName];if(!t){return Promise.reject("no data was found under the "+t+" field of object "+JSON.stringify(e)+", it is necessary for update and remove operations")}return Promise.resolve()};RestClient.prototype.buildUrlWithIdentifier=function(e){var t=typeof e==="string"?e:e[this.identifierName];var n=this.interpolateParamsInURL(""+this.url,e);n=n.includes("?")||this.url.includes(":"+this.identifierName)?n:n+"/"+t;return Promise.resolve(n)};RestClient.prototype.buildRequestHeaders=function(e){return new a.HttpHeaders(__assign(__assign({},this.DEFAULT_HEADERS),e))};return RestClient}();var rt=function(){function RestServiceFactory(e){this.httpClient=e;this.map=new Map;this.basePath=null;this.DOMAIN=null;this.IDENTIFIER="identifier"}e=RestServiceFactory;RestServiceFactory.setGlobalBasePath=function(t){if(!e.globalBasePath){e.globalBasePath=t}else{e.logService.warn("The value of a global base path was already set. "+"Update is not possible, the value remained unchanged!")}};RestServiceFactory.getGlobalBasePath=function(){return e.globalBasePath?e.globalBasePath:""};RestServiceFactory.prototype.setDomain=function(e){this.DOMAIN=e};RestServiceFactory.prototype.setBasePath=function(e){this.basePath=e};RestServiceFactory.prototype.get=function(e,t){if(t===void 0){t=this.IDENTIFIER}if(this.map.has(e+t)){return this.map.get(e+t)}if(!/^https?\:\/\//.test(e)){var n=this.getNewBasePath();var o=i.isEmpty(n)?e:n+(/^\//.test(e)?e:"/"+e);e=this.shouldAppendDomain(e)?this.DOMAIN+"/"+e:o}var r=new ot(this.httpClient,e,t);this.map.set(e+t,r);return r};RestServiceFactory.prototype.shouldAppendDomain=function(e){return!!this.DOMAIN&&!/^\//.test(e)};RestServiceFactory.prototype.getNewBasePath=function(){return this.basePath?this.basePath:e.globalBasePath};var e;RestServiceFactory.globalBasePath=null;RestServiceFactory.logService=new A;RestServiceFactory=e=__decorate([r.Injectable(),__metadata("design:paramtypes",[a.HttpClient])],RestServiceFactory);return RestServiceFactory}();var at=function(){function AbstractCachedRestService(e,t,n){this.innerRestService=e.get(t,n);this.innerRestService.activateMetadata&&this.innerRestService.activateMetadata()}AbstractCachedRestService.prototype.getById=function(e,t){return this.innerRestService.getById(e,t)};AbstractCachedRestService.prototype.get=function(e,t){return this.innerRestService.get(e,t)};AbstractCachedRestService.prototype.query=function(e,t){return this.innerRestService.query(e,t)};AbstractCachedRestService.prototype.page=function(e,t){return this.innerRestService.page(e,t)};AbstractCachedRestService.prototype.update=function(e,t){return this.innerRestService.update(e,t)};AbstractCachedRestService.prototype.patch=function(e,t){return this.innerRestService.patch(e,t)};AbstractCachedRestService.prototype.remove=function(e,t){return this.innerRestService.remove(e,t)};AbstractCachedRestService.prototype.save=function(e,t){return this.innerRestService.save(e,t)};AbstractCachedRestService.prototype.queryByPost=function(e,t,n){return this.innerRestService.queryByPost(e,t,n)};__decorate([StripResponseHeaders,j(),__metadata("design:type",Function),__metadata("design:paramtypes",[String,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"getById",null);__decorate([StripResponseHeaders,j(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"get",null);__decorate([StripResponseHeaders,j(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"query",null);__decorate([StripResponseHeaders,j(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"page",null);__decorate([StripResponseHeaders,InvalidateCache(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"update",null);__decorate([StripResponseHeaders,InvalidateCache(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"patch",null);__decorate([InvalidateCache(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"remove",null);__decorate([StripResponseHeaders,__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"save",null);__decorate([StripResponseHeaders,j(),__metadata("design:type",Function),__metadata("design:paramtypes",[Object,Object,Object]),__metadata("design:returntype",Promise)],AbstractCachedRestService.prototype,"queryByPost",null);return AbstractCachedRestService}();function StripResponseHeaders(e,t,n){var i=n.value;if(i){n.value=function(){return i.apply(this,Array.prototype.slice.call(arguments)).then((function(e){delete e.headers;return e}))}}}var st="sso";var ct;(function(e){e["SSO_CLIENT_ID"]="SSO_CLIENT_ID";e["SSO_AUTHENTICATION_ENTRY_POINT"]="SSO_AUTHENTICATION_ENTRY_POINT";e["SSO_LOGOUT_ENTRY_POINT"]="SSO_LOGOUT_ENTRY_POINT";e["SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT"]="SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT"})(ct||(ct={}));var lt="ssoAuthenticate";var dt="ssoAuthenticateError";var pt="SSODIALOG_WINDOW";var ut=function(){function SSOAuthenticationHelper(e,t,n,i){this.windowUtils=e;this.promiseUtils=t;this.httpClient=n;this.injector=i;this.logoutIframeId="logoutIframe";this.deferred=null;this.listenForAuthTokenBeingSentBack()}e=SSOAuthenticationHelper;SSOAuthenticationHelper.prototype.launchSSODialog=function(){this.deferred=this.promiseUtils.defer();var e=this.injector.get(ct.SSO_AUTHENTICATION_ENTRY_POINT)+this.getSSOContextPath();this.window.open(e,pt,"toolbar=no,scrollbars=no,resizable=no,top=200,left=200,width=1000,height=800");return this.deferred.promise};SSOAuthenticationHelper.prototype.completeDialog=function(){var e=this;return new Promise((function(t,n){e.httpClient.post(e.injector.get(ct.SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT),{client_id:e.injector.get(ct.SSO_CLIENT_ID)}).subscribe((function(n){e.window.opener.postMessage({eventId:lt,authToken:n},e.document.location.origin);e.window.close();t()}),(function(t){var i={error:t.error,status:t.status};e.window.opener.postMessage({eventId:dt,error:i},e.document.location.origin);e.window.close();n()}))}))};SSOAuthenticationHelper.prototype.isSSODialog=function(){return this.window.name===pt&&new RegExp("[?&]"+st).test(location.search)};SSOAuthenticationHelper.prototype.isAutoSSOMain=function(){return e.lastAuthenticatedWithSSO||this.window.name!==pt&&new RegExp("[?&]"+st).test(location.search)};SSOAuthenticationHelper.prototype.logout=function(){var t=this.logoutIframe;if(!t){t=this.document.createElement("iframe");t.id=this.logoutIframeId;t.style.display="none";this.document.body.appendChild(t)}t.src=this.injector.get(ct.SSO_LOGOUT_ENTRY_POINT);e.lastAuthenticatedWithSSO=false;this.document.location.href=this.document.location.href.replace(this.getSSOContextPath(),this.document.location.pathname)};SSOAuthenticationHelper.prototype.getSSOContextPath=function(){return this.document.location.pathname+"?"+st};SSOAuthenticationHelper.prototype.listenForAuthTokenBeingSentBack=function(){var t=this;this.window.addEventListener("message",(function(n){if(n.origin!==document.location.origin){return}t.logoutIframe&&t.logoutIframe.remove();if(n.data.eventId===lt){e.lastAuthenticatedWithSSO=true;t.deferred&&t.deferred.resolve(n.data.authToken)}else if(n.data.eventId===dt){t.deferred&&t.deferred.reject(n.data.error)}}),false)};Object.defineProperty(SSOAuthenticationHelper.prototype,"window",{get:function(){return this.windowUtils.getWindow()},enumerable:false,configurable:true});Object.defineProperty(SSOAuthenticationHelper.prototype,"document",{get:function(){return this.window.document},enumerable:false,configurable:true});Object.defineProperty(SSOAuthenticationHelper.prototype,"logoutIframe",{get:function(){return this.document.querySelector("iframe#"+this.logoutIframeId)},enumerable:false,configurable:true});var e;SSOAuthenticationHelper.lastAuthenticatedWithSSO=false;SSOAuthenticationHelper=e=__decorate([r.Injectable(),__metadata("design:paramtypes",[w,D,a.HttpClient,r.Injector])],SSOAuthenticationHelper);return SSOAuthenticationHelper}();var mt=new r.InjectionToken("LoginDialogResourceProvider");var gt=function(){function LoginDialogComponent(e,t,n,i,o,r,s,c){var l=this;this.modalRef=e;this.logService=t;this.httpClient=n;this.sessionService=i;this.storageService=o;this.urlUtils=r;this.ssoAuthenticationHelper=s;this.resource=c;this.hostClass=true;this.data=null;this.authURIKey="";this.authURI="";this.isFullScreen=false;this.ssoEnabled=false;this.form=new d.FormGroup({username:new d.FormControl("",d.Validators.required),password:new d.FormControl("",d.Validators.required)});this.signinWithSSO=function(){l.form.setErrors(null);return l.ssoAuthenticationHelper.launchSSODialog().then((function(e){return l.storeAccessToken(e)}),(function(e){return l.APIAuthenticationFailureReportFactory(e)})).then((function(e){return l.acceptUser(e)}))};this.sendCredentials=function(e){return l.httpClient.request("POST",l.authURI,{headers:(new a.HttpHeaders).set("Content-Type","application/x-www-form-urlencoded"),body:l.urlUtils.getQueryString(e).replace("?",""),observe:"response"}).toPromise()}}LoginDialogComponent.prototype.ngOnInit=function(){this.data=this.modalRef.data||{};this.authURI=this.data.authURI;this.isFullScreen=this.data.isFullScreen;this.ssoEnabled=this.data.ssoEnabled&&this.isMainEndPoint();this.storageService.removeAuthToken(this.authURI);this.authURIKey=btoa(this.authURI).replace(/=/g,"");if(this.ssoAuthenticationHelper.isAutoSSOMain()){this.signinWithSSO()}};LoginDialogComponent.prototype.signinWithCredentials=function(){var e=this;this.form.setErrors(null);if(this.hasRequiredCredentialsError()){this.form.setErrors({credentialsRequiredError:"se.logindialogform.username.and.password.required"});return Promise.reject()}var t=__assign(__assign({},this.data.clientCredentials||{}),{username:this.form.get("username").value,password:this.form.get("password").value,grant_type:"password"});return this.sendCredentials(t).then((function(t){return e.storeAccessToken(t)}),(function(t){return e.APIAuthenticationFailureReportFactory(t)})).then((function(t){return e.acceptUser(t)}))};LoginDialogComponent.prototype.isMainEndPoint=function(){return Q===this.authURI};LoginDialogComponent.prototype.storeAccessToken=function(e){var t=e instanceof a.HttpResponse?e.body:e;this.storageService.storeAuthToken(this.authURI,t);this.logService.debug("API Authentication Success: "+this.authURI);return this.isMainEndPoint()?this.sessionService.hasUserChanged():Promise.resolve(false)};LoginDialogComponent.prototype.APIAuthenticationFailureReportFactory=function(e){this.logService.debug("API Authentication Failure: "+this.authURI+" status: "+e.status);this.form.setErrors({asyncValidationError:e.error&&e.error.error_description||"se.logindialogform.oauth.error.default"});return Promise.reject(e)};LoginDialogComponent.prototype.acceptUser=function(e){this.modalRef.close({userHasChanged:e});if(this.isMainEndPoint()){this.sessionService.setCurrentUsername()}return Promise.resolve({userHasChanged:e})};LoginDialogComponent.prototype.hasRequiredCredentialsError=function(){var e=this.form.get("username");var t=this.form.get("password");return e.errors&&e.errors.required||t.errors&&t.errors.required};__decorate([r.HostBinding("class.su-login-dialog"),__metadata("design:type",Object)],LoginDialogComponent.prototype,"hostClass",void 0);LoginDialogComponent=__decorate([r.Component({selector:"su-login-dialog",styles:['.su-login{width:500px;min-height:440px;box-shadow:0 1px 4px 0 rgba(0,0,0,.1);background-color:#fff;border-radius:4px;border:1px solid rgba(0,0,0,.2);padding:20px;margin:0 auto}.su-login--wrapper{padding:40px 100px;width:100%}.su-login--form-group{margin-bottom:20px}.su-login--form-sso{margin-top:20px}.su-login--logo-wrapper{display:flex;justify-content:flex-start;align-items:center}.su-login--logo-wrapper.su-login--logo-wrapper_full{padding-bottom:45px}.su-login--logo{height:44px}.su-login--logo-text{font-family:"72",web,"Open Sans",sans-serif;font-size:1.7142857143rem;line-height:1.3333333333;font-weight:400;padding-left:16px;color:#32363a;font-weight:700}.su-login--logo__best-run{position:absolute;bottom:30px;left:30px}.su-login--btn{font-size:1rem;line-height:1.4285714286;font-weight:400;width:100%}.su-login--auth-message{padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4285714286;font-weight:400}.su-login--alert-error{margin-bottom:0;box-shadow:none}'],template:'<div class="su-login"><div class="su-login--wrapper"><div class="su-login--logo-wrapper" [ngClass]="{ \'su-login--logo-wrapper_full\': !isFullScreen }"><img *ngIf="resource?.topLogoURL" [src]="resource?.topLogoURL" class="su-login--logo"/> <span class="su-login--logo-text" translate="se.application.name"></span></div><form autocomplete="off" novalidate [formGroup]="form" (submit)="signinWithCredentials()" class="su-login--form"><div class="su-login--auth-message" *ngIf="isFullScreen"><div translate="se.logindialogform.reauth.message1"></div><div translate="se.logindialogform.reauth.message2"></div></div><div *ngIf="form.errors" class="su-login--form-group"><fd-alert type="error" class="su-login--alert-error" id="invalidError" [dismissible]="false"><ng-container *ngIf="form.errors?.credentialsRequiredError">{{ form.errors.credentialsRequiredError | translate }}</ng-container><ng-container *ngIf="form.errors?.asyncValidationError">{{ form.errors.asyncValidationError | translate }}</ng-container></fd-alert></div><div class="su-login--form-group"><input fd-form-control type="text" id="username_{{ authURIKey }}" name="username" formControlName="username" placeholder="{{ \'se.authentication.form.input.username\' | translate }}" autofocus autocomplete="username"/></div><div class="su-login--form-group"><input fd-form-control type="password" id="password_{{ authURIKey }}" name="password" placeholder="{{ \'se.authentication.form.input.password\' | translate }}" formControlName="password" autocomplete="current-password" required/></div><div class="su-login--form-group"><su-language-dropdown class="su-login-language"></su-language-dropdown></div><button fd-button options="emphasized" class="su-login--btn" id="submit_{{ authURIKey }}" name="submit" type="submit" translate="se.authentication.form.button.submit"></button></form><form *ngIf="ssoEnabled" class="su-login--form-sso" name="loginDialogFormSSO" novalidate (submit)="signinWithSSO()"><button fd-button options="emphasized" class="fd-button--emphasized su-login--btn" id="submitSSO_{{ authURIKey }}" name="submitSSO" type="submit" translate="se.authentication.form.button.submit.sso"></button></form></div></div><img *ngIf="resource?.bottomLogoURL" [src]="resource?.bottomLogoURL" class="su-login--logo__best-run"/>'}),__param(7,r.Optional()),__param(7,r.Inject(mt)),__metadata("design:paramtypes",[p.ModalRef,A,a.HttpClient,Ae,Ie,_,ut,Object])],LoginDialogComponent);return LoginDialogComponent}();var ht=function(){function ITranslationsFetchService(){}return ITranslationsFetchService}();(function(e){e[e["IE"]=0]="IE";e[e["CHROME"]=1]="CHROME";e[e["FIREFOX"]=2]="FIREFOX";e[e["EDGE"]=3]="EDGE";e[e["SAFARI"]=4]="SAFARI";e[e["UNKNOWN"]=5]="UNKNOWN"})(t.SUPPORTED_BROWSERS||(t.SUPPORTED_BROWSERS={}));var vt=function(){function BrowserService(){var e=this;this._isSafari=function(){var e=window.navigator.userAgent;var t=window.navigator.vendor;var n=/constructor/i.test(function HTMLElementConstructor(){}.toString());var i=t&&t.indexOf("Apple")>-1&&e&&!e.match("CriOS");return n||i};this.isIE=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.IE};this.isFF=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.FIREFOX};this.isSafari=function(){return e.getCurrentBrowser()===t.SUPPORTED_BROWSERS.SAFARI}}BrowserService.prototype.getCurrentBrowser=function(){var e=window;var n=t.SUPPORTED_BROWSERS.UNKNOWN;if(typeof e.InstallTrigger!=="undefined"){n=t.SUPPORTED_BROWSERS.FIREFOX}else if(!!document.documentMode){n=t.SUPPORTED_BROWSERS.IE}else if(!!e.StyleMedia){n=t.SUPPORTED_BROWSERS.EDGE}else if(!!e.chrome&&!!e.chrome.webstore){n=t.SUPPORTED_BROWSERS.CHROME}else if(this._isSafari()){n=t.SUPPORTED_BROWSERS.SAFARI}return n};BrowserService.prototype.getBrowserLocale=function(){var e=window.navigator.language.split("-");return e.length===1?e[0]:e[0]+"_"+e[1].toUpperCase()};return BrowserService}();var ft=function(){function FingerPrintingService(){this._fingerprint=v.encode(this.getUserAgent()+this.getPlugins()+this.hasJava()+this.hasFlash()+this.hasLocalStorage()+this.hasSessionStorage()+this.hasCookie()+this.getTimeZone()+this.getLanguage()+this.getSystemLanguage()+this.hasCanvas())}FingerPrintingService.prototype.getFingerprint=function(){return this._fingerprint};FingerPrintingService.prototype.getUserAgent=function(){return navigator.userAgent};FingerPrintingService.prototype.getPlugins=function(){var e=[];for(var t=0,n=navigator.plugins.length;t<n;t++){if(navigator.plugins[t]){e.push(navigator.plugins[t].name)}}return e.join(",")};FingerPrintingService.prototype.hasJava=function(){return navigator.javaEnabled()};FingerPrintingService.prototype.hasFlash=function(){return!!navigator.plugins.namedItem("Shockwave Flash")};FingerPrintingService.prototype.hasLocalStorage=function(){try{var e="test-has-ls";localStorage.setItem(e,e);localStorage.removeItem(e);return true}catch(e){return false}};FingerPrintingService.prototype.hasSessionStorage=function(){try{var e="test-has-ss";sessionStorage.setItem(e,e);sessionStorage.removeItem(e);return true}catch(e){return false}};FingerPrintingService.prototype.hasCookie=function(){return navigator.cookieEnabled};FingerPrintingService.prototype.getTimeZone=function(){return String(String(new Date).split("(")[1]).split(")")[0]};FingerPrintingService.prototype.getLanguage=function(){return navigator.language};FingerPrintingService.prototype.getSystemLanguage=function(){return window.navigator.language};FingerPrintingService.prototype.hasCanvas=function(){try{var e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}catch(e){return false}};return FingerPrintingService}();var _t=function(){function TranslateHttpLoader(e){this.translationsFetchService=e}TranslateHttpLoader.prototype.getTranslation=function(e){return s.from(this.translationsFetchService.get(e))};TranslateHttpLoader=__decorate([r.Injectable(),__metadata("design:paramtypes",[ht])],TranslateHttpLoader);return TranslateHttpLoader}();var yt=function(){function TranslationModule(){}e=TranslationModule;TranslationModule.forChild=function(){return l.TranslateModule.forChild({isolate:false,loader:{provide:l.TranslateLoader,useClass:_t}})};TranslationModule.forRoot=function(t){return{ngModule:e,providers:[{provide:ht,useClass:t},{provide:r.APP_INITIALIZER,useFactory:function(e,t,n){t.getValueFromLocalStorage("SELECTED_LANGUAGE",false).then((function(e){return e?e.isoCode:n.getBrowserLocale()}),(function(){return n.getBrowserLocale()})).then((function(t){e.setDefaultLang(t);e.use(t)}));return function(e){}},deps:[l.TranslateService,Ie,vt],multi:true}]}};var e;TranslationModule=e=__decorate([r.NgModule({imports:[l.TranslateModule.forRoot({isolate:false,loader:{provide:l.TranslateLoader,useClass:_t}})],exports:[l.TranslateModule]})],TranslationModule);return TranslationModule}();var Ct=function(){function LanguageDropdownAdapter(){}LanguageDropdownAdapter.transform=function(e,t){return{id:t,label:e.name,value:e}};return LanguageDropdownAdapter}();var St=function(){function LanguageService(e,t,n,i,o,r,a,s){this.logService=e;this.translateService=t;this.promiseUtils=n;this.eventService=i;this.browserService=o;this.storageService=r;this.injector=a;this.languageServiceConstants=s}LanguageService.prototype.getToolingLanguages=function(){var e=this;return this.i18nLanguageRestService.get({}).then((function(e){return e.languages})).catch((function(t){e.logService.error("LanguageService.getToolingLanguages() - Error loading tooling languages");return Promise.reject(t)}))};LanguageService.prototype.getBrowserLanguageIsoCode=function(){return window.navigator.language.split("-")[0]};LanguageService.prototype.getBrowserLocale=function(){return this.browserService.getBrowserLocale()};LanguageService.prototype.getResolveLocale=function(){return this._getDefaultLanguage()};LanguageService.prototype.getResolveLocaleIsoCode=function(){var e=this;return this.getResolveLocale().then((function(t){return e.convertBCP47TagToJavaTag(t).split("_")[0]}))};LanguageService.prototype.setSelectedToolingLanguage=function(e){this.storageService.setValueInLocalStorage(re,e,false);this.translateService.use(e.isoCode);this.setApplicationTitle();this.eventService.publish(oe,{isoCode:e.isoCode})};LanguageService.prototype.registerSwitchLanguage=function(){var e=this;this.eventService.subscribe(oe,(function(t,n){if(e.translateService.currentLang!==n.isoCode){e.translateService.use(n.isoCode)}}))};LanguageService.prototype.convertBCP47TagToJavaTag=function(e){return!!e?e.replace(/-/g,"_"):e};LanguageService.prototype.convertJavaTagToBCP47Tag=function(e){return!!e?e.replace(/_/g,"-"):e};LanguageService.prototype._getDefaultLanguage=function(){var e=this;return this.storageService.getValueFromLocalStorage(re,false).then((function(t){return t?t.isoCode:e.browserService.getBrowserLocale()}),(function(){return e.browserService.getBrowserLocale()}))};LanguageService.prototype.setApplicationTitle=function(){this.translateService.get("se.application.name").subscribe((function(e){document.title=e}))};Object.defineProperty(LanguageService.prototype,"i18nLanguageRestService",{get:function(){return this.injector.get(rt).get(this.languageServiceConstants.I18N_LANGUAGES_RESOURCE_URI)},enumerable:false,configurable:true});__decorate([j({actions:[he]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],LanguageService.prototype,"getToolingLanguages",null);LanguageService=__decorate([r.Injectable(),__param(3,r.Inject(X)),__param(7,r.Inject(ce)),__metadata("design:paramtypes",[A,l.TranslateService,D,Object,vt,Ie,r.Injector,Object])],LanguageService);return LanguageService}();var bt;(function(e){e["Default"]="default";e["None"]="none"})(bt||(bt={}));var It=function(){function LanguageDropdownHelper(){}LanguageDropdownHelper.findSelectLanguageWithIsoCodePredicate=function(e){return function(t){return t.value.isoCode===e}};LanguageDropdownHelper.findLanguageWithIsoCode=function(e,t){return t.find((function(t){return t.isoCode===e}))};LanguageDropdownHelper.order=function(e,t,n){if(n===void 0){n={strategy:bt.Default}}switch(n.strategy){case bt.Default:var i=t.filter((function(t){return t.isoCode!==e.isoCode})).sort((function(e,t){return e.isoCode.localeCompare(t.isoCode)}));return __spreadArrays([e],i);case bt.None:return t}};return LanguageDropdownHelper}();var wt=function(){function LanguageDropdown(e,t){this.languageService=e;this.eventService=t;this.languageSortStrategy=bt.Default;this.selectedLanguage=null;this.items=[];this.initialLanguage=null;this.languages=[];this.unRegisterEventService=null}LanguageDropdown.prototype.ngOnInit=function(){var e=this;Promise.all([this.languageService.getResolveLocale(),this.languageService.getToolingLanguages()]).then((function(t){var n=t[0],i=t[1];e.items=i.map(Ct.transform);e.languages=i;e.setSelectedLanguage(n);e.setInitialLanguage(n)}));this.unRegisterEventService=this.eventService.subscribe(oe,(function(){return e.handleLanguageChange()}))};LanguageDropdown.prototype.ngOnDestroy=function(){this.unRegisterEventService()};LanguageDropdown.prototype.onSelectedLanguage=function(e){this.languageService.setSelectedToolingLanguage(e.value)};LanguageDropdown.prototype.setInitialLanguage=function(e){this.initialLanguage=this.items.find(It.findSelectLanguageWithIsoCodePredicate(e))||this.items.find(It.findSelectLanguageWithIsoCodePredicate(se))};LanguageDropdown.prototype.setSelectedLanguage=function(e){var t=this;this.selectedLanguage=It.findLanguageWithIsoCode(e,this.languages);if(this.selectedLanguage){var n=It.order(this.selectedLanguage,this.languages,{strategy:this.languageSortStrategy});this.items=n.map(Ct.transform);return}this.languageService.getResolveLocaleIsoCode().then((function(e){t.selectedLanguage=It.findLanguageWithIsoCode(e,t.languages);var n=It.order(t.selectedLanguage,t.languages,{strategy:t.languageSortStrategy});t.items=n.map(Ct.transform)}))};LanguageDropdown.prototype.handleLanguageChange=function(){var e=this;this.languageService.getResolveLocale().then((function(t){e.setSelectedLanguage(t)}))};__decorate([r.Input(),__metadata("design:type",String)],LanguageDropdown.prototype,"languageSortStrategy",void 0);return LanguageDropdown}();var Et=function(e){__extends(LanguageDropdownComponent,e);function LanguageDropdownComponent(t,n){var i=e.call(this,t,n)||this;i.eventService=n;return i}LanguageDropdownComponent=__decorate([r.Component({selector:"su-language-dropdown",template:'\n        <su-select\n            class="su-language-selector"\n            [items]="items"\n            [initialValue]="initialLanguage"\n            (onItemSelected)="onSelectedLanguage($event)"\n        >\n        </su-select>\n    '}),__param(0,r.Inject(le)),__param(1,r.Inject(X)),__metadata("design:paramtypes",[St,Object])],LanguageDropdownComponent);return LanguageDropdownComponent}(wt);var Pt=function(){function ISelectAdapter(){}ISelectAdapter.transform=function(e,t){return{}};return ISelectAdapter}();var Tt=function(){function ListItemKeyboardControlDirective(e,t){this.hostElement=e;this.renderer=t;this.activeClassName="is-active"}ListItemKeyboardControlDirective.prototype.ngOnInit=function(){this.setTabIndex()};ListItemKeyboardControlDirective.prototype.getElement=function(){return this.hostElement.nativeElement};ListItemKeyboardControlDirective.prototype.setActive=function(){var e=this.getElement();this.renderer.addClass(e,this.activeClassName);e.scrollIntoView({block:"nearest"})};ListItemKeyboardControlDirective.prototype.setInactive=function(){this.renderer.removeClass(this.getElement(),this.activeClassName)};ListItemKeyboardControlDirective.prototype.setTabIndex=function(){this.renderer.setAttribute(this.getElement(),"tabindex","-1")};ListItemKeyboardControlDirective=__decorate([r.Directive({selector:"[suListItemKeyboardControl]"}),__metadata("design:paramtypes",[r.ElementRef,r.Renderer2])],ListItemKeyboardControlDirective);return ListItemKeyboardControlDirective}();var At;(function(e){e["ArrowDown"]="ArrowDown";e["ArrowUp"]="ArrowUp";e["Enter"]="Enter";e["Esc"]="Escape"})(At||(At={}));var Dt=function(){function ListKeyboardControlDirective(){this.suListKeyboardControlEnabled=true;this.suListKeyboardControlEnterKeydown=new r.EventEmitter;this.suListKeyboardControlEscKeydown=new r.EventEmitter;this.didNgAfterContentInit=false;this.activeItem=null;this.activeItemIndex=null}ListKeyboardControlDirective.prototype.onKeyDown=function(e){if(!this.suListKeyboardControlEnabled||this.items.length===0){return}switch(e.key){case At.ArrowDown:e.preventDefault();this.handleArrowDown();return;case At.ArrowUp:e.preventDefault();this.handleArrowUp();return;case At.Enter:e.preventDefault();this.handleEnter();return;case At.Esc:this.handleEsc();return}};ListKeyboardControlDirective.prototype.ngAfterContentInit=function(){var e=this;this.items.changes.subscribe((function(){return e.onItemsChange()}));this.items.notifyOnChanges();this.didNgAfterContentInit=true};ListKeyboardControlDirective.prototype.ngOnChanges=function(e){if(!this.didNgAfterContentInit){return}var t=e.suListKeyboardControlEnabled;var n=e.suListKeyboardControlDisabledPredicate;var i=t&&t.currentValue&&!t.previousValue;var o=t&&!t.currentValue&&t.previousValue;var r=n&&n.currentValue&&!!this.suListKeyboardControlEnabled;var a=n&&!n.currentValue&&n.previousValue&&!!this.suListKeyboardControlEnabled;if(this.items.length===0){return}if(i||r){this.setFirstItemActive()}if(o||a){this.unsetActiveItem()}};ListKeyboardControlDirective.prototype.onItemsChange=function(){if(this.items.length===0){this.clearActiveItem();return}if(this.suListKeyboardControlEnabled){if(!this.isActiveItemSet()){this.setActiveItemByIndex(0,1)}else if(!this.itemExistsByIndex(this.activeItemIndex)){this.clearActiveItem()}}else{this.clearActiveItem()}};ListKeyboardControlDirective.prototype.handleArrowUp=function(){this.setPreviousItemActive()};ListKeyboardControlDirective.prototype.handleArrowDown=function(){this.setNextItemActive()};ListKeyboardControlDirective.prototype.handleEnter=function(){this.suListKeyboardControlEnterKeydown.emit(this.activeItemIndex)};ListKeyboardControlDirective.prototype.handleEsc=function(){this.suListKeyboardControlEscKeydown.emit()};ListKeyboardControlDirective.prototype.getItemByIndex=function(e){var t=this.getItemsArray();return t[e]};ListKeyboardControlDirective.prototype.getItemsArray=function(){return this.items.toArray()};ListKeyboardControlDirective.prototype.setActiveItemByIndex=function(e,t){var n=this.getItemsArray();if(this.suListKeyboardControlDisabledPredicate){while(this.suListKeyboardControlDisabledPredicate(n[e],e)){e+=t;if(!n[e]){return}}}var i=this.getItemByIndex(e);this.setActiveItem(i)};ListKeyboardControlDirective.prototype.setActiveItem=function(e){var t=this.getItemsArray();var n=t.indexOf(e);if(this.activeItem){this.activeItem.setInactive()}if(t.length>0){this.activeItem=t[n];this.activeItem.setActive();this.activeItemIndex=n}};ListKeyboardControlDirective.prototype.unsetActiveItem=function(){if(!this.activeItem){return}this.activeItem.setInactive();this.activeItemIndex=null};ListKeyboardControlDirective.prototype.setFirstItemActive=function(){this.setActiveItemByIndex(0,1)};ListKeyboardControlDirective.prototype.setNextItemActive=function(){if(this.activeItemIndex===null){this.setFirstItemActive();return}if(this.activeItemIndex<this.items.length-1){this.setActiveItemByIndex(this.activeItemIndex+1,1)}};ListKeyboardControlDirective.prototype.setPreviousItemActive=function(){if(this.activeItemIndex===null){this.setFirstItemActive();return}if(this.activeItemIndex>0){this.setActiveItemByIndex(this.activeItemIndex-1,-1)}};ListKeyboardControlDirective.prototype.itemExistsByIndex=function(e){if(e===null){return false}return!!this.getItemByIndex(e)};ListKeyboardControlDirective.prototype.clearActiveItem=function(){this.activeItem=null;this.activeItemIndex=null};ListKeyboardControlDirective.prototype.isActiveItemSet=function(){return!!this.activeItem};__decorate([r.Input(),__metadata("design:type",Object)],ListKeyboardControlDirective.prototype,"suListKeyboardControlEnabled",void 0);__decorate([r.Input(),__metadata("design:type",Function)],ListKeyboardControlDirective.prototype,"suListKeyboardControlDisabledPredicate",void 0);__decorate([r.Output(),__metadata("design:type",Object)],ListKeyboardControlDirective.prototype,"suListKeyboardControlEnterKeydown",void 0);__decorate([r.Output(),__metadata("design:type",Object)],ListKeyboardControlDirective.prototype,"suListKeyboardControlEscKeydown",void 0);__decorate([r.ContentChildren(Tt),__metadata("design:type",r.QueryList)],ListKeyboardControlDirective.prototype,"items",void 0);__decorate([r.HostListener("document:keydown",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[KeyboardEvent]),__metadata("design:returntype",void 0)],ListKeyboardControlDirective.prototype,"onKeyDown",null);ListKeyboardControlDirective=__decorate([r.Directive({selector:"[suListKeyboardControl]"})],ListKeyboardControlDirective);return ListKeyboardControlDirective}();var Ot=function(){function ListKeyboardControlModule(){}ListKeyboardControlModule=__decorate([r.NgModule({declarations:[Dt,Tt],exports:[Dt,Tt]})],ListKeyboardControlModule);return ListKeyboardControlModule}();var Rt=function(e){__extends(SelectComponent,e);function SelectComponent(){var t=e!==null&&e.apply(this,arguments)||this;t.items=[];t.initialValue=null;t.placeholder="";t.isKeyboardControlEnabled=true;t.hasCustomTrigger=false;t.onItemSelected=new r.EventEmitter;t.isOpen=false;return t}t=SelectComponent;SelectComponent.prototype.selectItem=function(e){var t=this.items.find((function(t){return t.id===e}));this.setValue(t);this.isOpen=false;this.onItemSelected.emit(t)};SelectComponent.prototype.ngOnChanges=function(e){if(e.initialValue&&e.initialValue.currentValue&&!this.value){this.setInitialValue(e.initialValue.currentValue)}};SelectComponent.prototype.setInitialValue=function(e){if(typeof e==="number"){this.setValueById(e)}else{this.setValue(e)}};SelectComponent.prototype.setValue=function(e){this.writeValue(e);this.onChange(e)};SelectComponent.prototype.setValueById=function(e){this.setValue(this.items.find((function(t){return t.id===e})))};var t;__decorate([r.Input(),__metadata("design:type",Array)],SelectComponent.prototype,"items",void 0);__decorate([r.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"initialValue",void 0);__decorate([r.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"placeholder",void 0);__decorate([r.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"isKeyboardControlEnabled",void 0);__decorate([r.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"hasCustomTrigger",void 0);__decorate([r.Output(),__metadata("design:type",r.EventEmitter)],SelectComponent.prototype,"onItemSelected",void 0);SelectComponent=t=__decorate([r.Component({selector:"su-select",encapsulation:r.ViewEncapsulation.None,providers:[{provide:d.NG_VALUE_ACCESSOR,useExisting:r.forwardRef((function(){return t})),multi:true}],styles:[".su-select,.su-select__popover-control,.su-select__popover-control .fd-dropdown{width:100%}.su-select__popover-control .fd-dropdown__control{overflow:hidden;color:#51555a;text-align:left}.su-select__popover-control .fd-dropdown__control::after{position:absolute;top:0;right:0;display:flex;justify-content:center;align-items:center;padding:0;height:36px;width:36px;margin-top:0;font-size:14px}.su-select__menu .fd-menu__list{max-height:200px;overflow:auto}.su-select__menu .fd-menu__item[select-highlighted]{background:rgba(10,110,209,.07)}.su-select__menu .fd-menu__item[select-highlighted]:focus{outline:0}"],template:'\n        <fd-popover [(isOpen)]="isOpen" fillControlMode="equal" class="su-select">\n            <fd-popover-control class="su-select__popover-control">\n                <button\n                    class="fd-dropdown__control fd-button"\n                    type="button"\n                    *ngIf="!hasCustomTrigger; else customTrigger"\n                >\n                    {{ (value && value.label) || placeholder | translate }}\n                </button>\n\n                <ng-template #customTrigger>\n                    <ng-content select="[su-select-custom-trigger]"></ng-content>\n                </ng-template>\n            </fd-popover-control>\n            <fd-popover-body>\n                <fd-menu class="su-select__menu">\n                    <ul\n                        fd-menu-list\n                        suListKeyboardControl\n                        [suListKeyboardControlEnabled]="isKeyboardControlEnabled && isOpen"\n                        (suListKeyboardControlEnterKeydown)="selectItem($event)"\n                    >\n                        <li\n                            fd-menu-item\n                            suListItemKeyboardControl\n                            [ngClass]="item.listItemClassName"\n                            *ngFor="let item of items"\n                            (click)="selectItem(item.id)"\n                            [attr.tabindex]="-1"\n                            [attr.data-select-id]="item.id"\n                        >\n                            {{ item.label | translate }}\n                        </li>\n                    </ul>\n                </fd-menu>\n            </fd-popover-body>\n        </fd-popover>\n    '})],SelectComponent);return SelectComponent}(k);var Mt=function(){function SelectModule(){}SelectModule=__decorate([r.NgModule({imports:[p.FundamentalNgxCoreModule,u.CommonModule,Ot,yt.forChild()],declarations:[Rt],entryComponents:[Rt],exports:[Rt]})],SelectModule);return SelectModule}();var xt=function(){function LanguageDropdownModule(){}LanguageDropdownModule=__decorate([r.NgModule({imports:[u.CommonModule,Mt],declarations:[Et],entryComponents:[Et],exports:[Et]})],LanguageDropdownModule);return LanguageDropdownModule}();var Nt=function(){function LoginDialogModule(){}LoginDialogModule=__decorate([r.NgModule({imports:[u.CommonModule,xt,d.FormsModule,d.ReactiveFormsModule,p.AlertModule,yt.forChild(),p.ButtonModule,p.FormModule],declarations:[gt],entryComponents:[gt],exports:[xt]})],LoginDialogModule);return LoginDialogModule}();var kt=function(e){__extends(AuthenticationService,e);function AuthenticationService(t,n,i,o,r,a,s,c){var l=e.call(this)||this;l.translationsFetchService=t;l.modalService=n;l.sharedDataService=i;l.storageService=o;l.eventService=r;l.ssoAuthenticationHelper=a;l.settingsService=s;l.authenticationManager=c;return l}AuthenticationService.prototype.filterEntryPoints=function(e){return this.sharedDataService.get("authenticationMap").then((function(t){return b.convertToArray(__assign(__assign({},t||{}),te)).filter((function(t){return new RegExp(t.key,"g").test(e)})).map((function(e){return e.value}))}))};AuthenticationService.prototype.isAuthEntryPoint=function(e){return this.sharedDataService.get("authenticationMap").then((function(t){var n=b.convertToArray(t||{}).map((function(e){return e.value}));return n.indexOf(e)>-1||e===Q}))};AuthenticationService.prototype.authenticate=function(e){var t=this;return this._findLoginData(e).then((function(e){return t._launchAuth(e).then((function(n){Promise.resolve(t.eventService.publish(ae.AUTHORIZATION_SUCCESS,{userHasChanged:n.userHasChanged})).then((function(){if(n.userHasChanged){t.eventService.publish(ae.USER_HAS_CHANGED)}var e=i.values(t.reauthInProgress).some((function(e){return e}));if(n.userHasChanged&&!e&&t.authenticationManager&&t.authenticationManager.onUserHasChanged){t.authenticationManager.onUserHasChanged()}}));t.reauthInProgress[e.authURI]=false}))}))};AuthenticationService.prototype.logout=function(){var e=this;return this.eventService.publish(ae.LOGOUT).then((function(){e.storageService.removeAllAuthTokens();if(e.ssoAuthenticationHelper.isAutoSSOMain()){e.ssoAuthenticationHelper.logout()}else if(e.authenticationManager&&e.authenticationManager.onLogout){e.authenticationManager.onLogout()}}))};AuthenticationService.prototype.isReAuthInProgress=function(e){return Promise.resolve(this.reauthInProgress[e]===true)};AuthenticationService.prototype.setReAuthInProgress=function(e){this.reauthInProgress[e]=true;return Promise.resolve()};AuthenticationService.prototype.isAuthenticated=function(e){var t=this;return this.filterEntryPoints(e).then((function(e){var n=e&&e[0];return Promise.resolve(t.storageService.getAuthToken(n)).then((function(e){return!!e}))}))};AuthenticationService.prototype._findLoginData=function(e){var t=this;return this.filterEntryPoints(e).then((function(e){return Promise.resolve(t.sharedDataService.get("credentialsMap").then((function(t){var n=__assign(__assign({},t||{}),ne);var i=e[0];return{authURI:i,clientCredentials:n[i]}})))}))};AuthenticationService.prototype._launchAuth=function(e){var t=this;return this.translationsFetchService.waitToBeReady().then((function(){return Promise.all([t.storageService.isInitialized(),t.settingsService.getBoolean("smartedit.sso.enabled")])})).then((function(n){var i=n[0],o=n[1];var r=t.modalService.open({component:gt,data:__assign(__assign({},e),{isFullScreen:i,ssoEnabled:o}),config:{modalPanelClass:"su-login-dialog-container",hasBackdrop:false}});t.reauthInProgress={};return new Promise((function(e,t){r.afterClosed.subscribe(e,t)}))}))};AuthenticationService=__decorate([__param(4,r.Inject(X)),__param(7,r.Optional()),__metadata("design:paramtypes",[ht,Te,Ee,Ie,Object,ut,Pe,De])],AuthenticationService);return AuthenticationService}(be);var Ft=function(){function FundamentalModalManagerService(e){this.modalRef=e;this.title=new s.BehaviorSubject("");this.titleSuffix=new s.BehaviorSubject("");this.modalData=new s.BehaviorSubject({});this.component=new s.BehaviorSubject(undefined);this.isDismissButtonVisible=new s.BehaviorSubject(false);this.buttons=new s.BehaviorSubject([])}FundamentalModalManagerService.prototype.init=function(){this.modalData.next(this.modalRef.data.modalData);this.component.next(this.modalRef.data.component);this.buttons.next(this.modalRef.data.templateConfig.buttons||[]);this.title.next(this.modalRef.data.templateConfig.title||"");this.titleSuffix.next(this.modalRef.data.templateConfig.titleSuffix||"");this.isDismissButtonVisible.next(this.modalRef.data.templateConfig.isDismissButtonVisible)};FundamentalModalManagerService.prototype.getComponent=function(){return this.component.asObservable()};FundamentalModalManagerService.prototype.getTitle=function(){return this.title.asObservable()};FundamentalModalManagerService.prototype.getTitleSuffix=function(){return this.titleSuffix.asObservable()};FundamentalModalManagerService.prototype.getButtons=function(){return this.buttons.asObservable()};FundamentalModalManagerService.prototype.getModalData=function(){return this.modalData.asObservable()};FundamentalModalManagerService.prototype.getIsDismissButtonVisible=function(){return this.isDismissButtonVisible.asObservable()};FundamentalModalManagerService.prototype.setDismissButtonVisibility=function(e){this.isDismissButtonVisible.next(e)};FundamentalModalManagerService.prototype.setTitle=function(e){this.title.next(e)};FundamentalModalManagerService.prototype.addButton=function(e){var t=this;this.getButtonsValue().subscribe((function(n){var i=__spreadArrays(n,[e]);t.buttons.next(i)}))};FundamentalModalManagerService.prototype.addButtons=function(e){var t=this;this.getButtonsValue().subscribe((function(n){var i=__spreadArrays(n,e);t.buttons.next(i)}))};FundamentalModalManagerService.prototype.removeButton=function(e){var t=this;this.getButtonsValue().subscribe((function(n){var i=n.filter((function(t){return t.id!==e}));t.buttons.next(i)}))};FundamentalModalManagerService.prototype.removeAllButtons=function(){this.buttons.next([])};FundamentalModalManagerService.prototype.disableButton=function(e){var t=this;this.getButtonsValue().subscribe((function(n){var i=n.map((function(t){return t.id===e?__assign(__assign({},t),{disabled:true}):t}));t.buttons.next(i)}))};FundamentalModalManagerService.prototype.setDismissCallback=function(e){this.dismissCallback=e};FundamentalModalManagerService.prototype.enableButton=function(e){var t=this;this.getButtonsValue().subscribe((function(n){var i=n.map((function(t){return t.id===e?__assign(__assign({},t),{disabled:false}):t}));t.buttons.next(i)}))};FundamentalModalManagerService.prototype.onButtonClicked=function(e){var n=this;var i=e.callback?e.callback():s.of(null);if(e.action!==t.FundamentalModalButtonAction.None){i.subscribe((function(i){return e.action===t.FundamentalModalButtonAction.Close?n.close(i):n.dismiss(i)}))}};FundamentalModalManagerService.prototype.close=function(e){this.modalRef.close(e)};FundamentalModalManagerService.prototype.dismiss=function(e){var t=this;this.dismissCallback().then((function(){return t.modalRef.dismiss(e)})).catch(i.noop)};FundamentalModalManagerService.prototype.getButtonsValue=function(){return this.buttons.pipe(c.take(1))};FundamentalModalManagerService.prototype.dismissCallback=function(){return Promise.resolve()};FundamentalModalManagerService=__decorate([r.Injectable(),__metadata("design:paramtypes",[p.ModalRef])],FundamentalModalManagerService);return FundamentalModalManagerService}();var zt=function(){function FundamentalModalTemplateComponent(e,t){this.modalManager=e;this.cdr=t;this.component$=this.modalManager.getComponent();this.title$=this.modalManager.getTitle();this.titleSuffix$=this.modalManager.getTitleSuffix();this.isDismissButtonVisible$=this.modalManager.getIsDismissButtonVisible();this.buttons$=this.modalManager.getButtons()}FundamentalModalTemplateComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.init();this.buttonsSubscription=this.buttons$.subscribe((function(t){e.buttons=t;e.cdr.detectChanges()}))};FundamentalModalTemplateComponent.prototype.ngOnDestroy=function(){if(this.buttonsSubscription){this.buttonsSubscription.unsubscribe()}};FundamentalModalTemplateComponent.prototype.onButtonClicked=function(e){this.modalManager.onButtonClicked(e)};FundamentalModalTemplateComponent.prototype.dismiss=function(){this.modalManager.dismiss()};FundamentalModalTemplateComponent=__decorate([r.Component({selector:"fundamental-modal-template",encapsulation:r.ViewEncapsulation.None,providers:[Ft],styles:["\n            .fd-modal__title {\n                min-height: 20px;\n            }\n        "],template:'\n        <fd-modal-header>\n            <h1 fd-modal-title id="fd-modal-title-{{ (title$ | async) || \'\' }}">\n                {{ (title$ | async) || \'\' | translate }}\n                {{ (titleSuffix$ | async) || \'\' | translate }}\n            </h1>\n            <button\n                fd-modal-close-btn\n                *ngIf="isDismissButtonVisible$ | async"\n                (click)="dismiss()"\n            ></button>\n        </fd-modal-header>\n        <fd-modal-body>\n            <ng-container *ngIf="component$ | async as component">\n                <ng-container *ngComponentOutlet="component"></ng-container>\n            </ng-container>\n        </fd-modal-body>\n        <fd-modal-footer *ngIf="buttons && buttons.length > 0">\n            <button\n                *ngFor="let button of buttons"\n                [disabled]="button.disabledFn ? button.disabledFn!() : button.disabled"\n                [options]="button.style"\n                [attr.id]="button.id"\n                (click)="onButtonClicked(button)"\n                fd-button\n            >\n                {{ button.label | translate }}\n            </button>\n        </fd-modal-footer>\n    '}),__metadata("design:paramtypes",[Ft,r.ChangeDetectorRef])],FundamentalModalTemplateComponent);return FundamentalModalTemplateComponent}();var Lt=function(){function FundamentalModalTemplateModule(){}FundamentalModalTemplateModule=__decorate([r.NgModule({imports:[u.CommonModule,p.ModalModule,p.ButtonModule,yt.forChild()],declarations:[zt],entryComponents:[zt],exports:[zt]})],FundamentalModalTemplateModule);return FundamentalModalTemplateModule}();var Vt=function(){function ModalService(e){this.fundamentalModalService=e}ModalService.prototype.open=function(e){var t=e.templateConfig;return!!t?this.openWithTemplate(e):this.openStandalone(e)};ModalService.prototype.openStandalone=function(e){var t=e.config,n=t===void 0?{}:t,i=e.component,o=e.data;return this.fundamentalModalService.open(i,__assign(__assign({},n),{data:o}))};ModalService.prototype.openWithTemplate=function(e){var t=e.config,n=t===void 0?{}:t,i=e.templateConfig,o=i===void 0?{}:i,r=e.component,a=e.data;var s=__assign(__assign({},n),{data:{templateConfig:o,component:r,modalData:a}});return this.fundamentalModalService.open(zt,s)};ModalService=__decorate([r.Injectable(),__metadata("design:paramtypes",[p.ModalService])],ModalService);return ModalService}();var $t=function(){function Alert(e,t,n,o){this._alertConf=e;this.fundamentalAlertService=n;this.translateService=o;this._displayed=false;i.defaultsDeep(this._alertConf,i.cloneDeep(t))}Object.defineProperty(Alert.prototype,"alertConf",{get:function(){return this._alertConf},enumerable:false,configurable:true});Object.defineProperty(Alert.prototype,"message",{get:function(){return this._alertConf.message},enumerable:false,configurable:true});Object.defineProperty(Alert.prototype,"type",{get:function(){return this._alertConf.type},enumerable:false,configurable:true});Alert.prototype.show=function(){return __awaiter(this,void 0,void 0,(function(){var e,t;var n=this;return __generator(this,(function(i){switch(i.label){case 0:if(this.isDisplayed()){return[2]}if(!this._alertConf.message)return[3,2];e=this._alertConf;return[4,this.translateService.get(this._alertConf.message,this._alertConf.messagePlaceholders).toPromise()];case 1:e.message=i.sent();i.label=2;case 2:t=typeof this._alertConf.message!=="undefined"?this._alertConf.message:this._alertConf.component||"";this._alertRef=this.fundamentalAlertService.open(t,this._alertConf);this._alertRef.afterDismissed.subscribe((function(){return n._displayed=false}));this._displayed=true;return[2]}}))}))};Alert.prototype.hide=function(){if(!this.isDisplayed()){return}this._alertRef.dismiss()};Alert.prototype.isDisplayed=function(){return this._displayed};return Alert}();var Ut=new r.InjectionToken("alertConfigToken");var jt={data:{},type:t.IAlertServiceType.INFO,dismissible:true,duration:3e3,width:"500px"};var Bt=function(){function AlertFactory(e,t,n){this.fundamentalAlertService=e;this.translateService=t;this.ALERT_CONFIG_DEFAULTS=n}AlertFactory.prototype.createAlert=function(e){var t=this.getAlertConfig(e);return this.createAlertObject(t)};AlertFactory.prototype.createInfo=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.INFO);return this.createAlertObject(n)};AlertFactory.prototype.createDanger=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.DANGER);return this.createAlertObject(n)};AlertFactory.prototype.createWarning=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.WARNING);return this.createAlertObject(n)};AlertFactory.prototype.createSuccess=function(e){var n=this.getAlertConfig(e,t.IAlertServiceType.SUCCESS);return this.createAlertObject(n)};AlertFactory.prototype.getAlertConfig=function(e,n){if(typeof e==="string"){return{message:e,type:n||t.IAlertServiceType.INFO}}if(!e.type){e.type=n||t.IAlertServiceType.INFO}return e};AlertFactory.prototype.createAlertObject=function(e){return new $t(e,this.ALERT_CONFIG_DEFAULTS,this.fundamentalAlertService,this.translateService)};AlertFactory=__decorate([r.Injectable(),__param(2,r.Inject(Ut)),__metadata("design:paramtypes",[p.AlertService,l.TranslateService,p.AlertConfig])],AlertFactory);return AlertFactory}();var Ht=function(){function AlertService(e){this.alertFactory=e}AlertService.prototype.showAlert=function(e){var t=this.alertFactory.createAlert(e);t.show()};AlertService.prototype.showInfo=function(e){var t=this.alertFactory.createInfo(e);t.show()};AlertService.prototype.showDanger=function(e){var t=this.alertFactory.createDanger(e);t.show()};AlertService.prototype.showWarning=function(e){var t=this.alertFactory.createWarning(e);t.show()};AlertService.prototype.showSuccess=function(e){var t=this.alertFactory.createSuccess(e);t.show()};AlertService=__decorate([r.Injectable(),__metadata("design:paramtypes",[Bt])],AlertService);return AlertService}();var Gt=function(){function AlertModule(){}AlertModule=__decorate([r.NgModule({imports:[p.AlertModule,yt],providers:[{provide:Ut,useValue:jt},Ht,Bt]})],AlertModule);return AlertModule}();var Wt=function(){function FileReaderService(){}FileReaderService.prototype.read=function(e,t){var n=new FileReader;if(t===null||t===void 0?void 0:t.onError){n.onerror=t.onError}if(t===null||t===void 0?void 0:t.onLoadEnd){n.onloadend=t.onLoadEnd}n.readAsArrayBuffer(e);return n};FileReaderService=__decorate([r.Injectable()],FileReaderService);return FileReaderService}();var qt=function(){function FileMimeTypeService(e,t){this.fileReaderService=e;this.settingsService=t}FileMimeTypeService.prototype.isFileMimeTypeValid=function(e){var t=this;return new Promise((function(n,i){return __awaiter(t,void 0,void 0,(function(){var t,o,r;var a=this;return __generator(this,(function(s){switch(s.label){case 0:return[4,O.attempt(this.settingsService.getStringList("smartedit.validImageMimeTypeCodes"))];case 1:t=s.sent(),o=t.error,r=t.data;if(o){i(false);return[2]}this.fileReaderService.read(e,{onLoadEnd:function(e){if(!a.validateMimeTypeFromFile(e.target.result,r)){i();return}n(true)},onError:function(){i()}});return[2]}}))}))}))};FileMimeTypeService.prototype.validateMimeTypeFromFile=function(e,t){var n=new Uint8Array(e).subarray(0,8);var i=n.reduce((function(e,t){var n=t.toString(16);if(n.length===1){n="0"+n}e+=n;return e}),"");return t.some((function(e){return i.toLowerCase().indexOf(e.toLowerCase())===0}))};FileMimeTypeService=__decorate([r.Injectable(),__metadata("design:paramtypes",[Wt,Pe])],FileMimeTypeService);return FileMimeTypeService}();var Kt=function(){function FileValidatorFactory(){}FileValidatorFactory.prototype.build=function(e){var t=this;return{validate:function(n,i){return t.validate(e,n,i)}}};FileValidatorFactory.prototype.validate=function(e,t,n){n=n||[];e.forEach((function(e){var i=t[e.subject];if(!e.validate(i)){n.push({subject:e.subject,message:e.message})}}));return n.length===0};return FileValidatorFactory}();var Yt={ACCEPTED_FILE_TYPES:["jpeg","jpg","gif","bmp","tiff","tif","png","pdf","webp"],MAX_FILE_SIZE_IN_BYTES:20*1024*1024,I18N_KEYS:{FILE_TYPE_INVALID:"se.upload.file.type.invalid",FILE_SIZE_INVALID:"se.upload.file.size.invalid"}};var Xt=function(){function FileValidationService(e,t){this.fileMimeTypeService=e;this.fileValidatorFactory=t;this.validators=[{subject:"size",message:Yt.I18N_KEYS.FILE_SIZE_INVALID,validate:function(e){return e<=Yt.MAX_FILE_SIZE_IN_BYTES}}]}FileValidationService.prototype.buildAcceptedFileTypesList=function(){return Yt.ACCEPTED_FILE_TYPES.map((function(e){return"."+e})).join(",")};FileValidationService.prototype.validate=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n;return __generator(this,(function(i){switch(i.label){case 0:this.fileValidatorFactory.build(this.validators).validate(e,t);i.label=1;case 1:i.trys.push([1,3,,4]);return[4,this.fileMimeTypeService.isFileMimeTypeValid(e)];case 2:i.sent();if(t.length>0){return[2,Promise.reject(t)]}return[3,4];case 3:n=i.sent();t.push({subject:"type",message:Yt.I18N_KEYS.FILE_TYPE_INVALID});return[2,Promise.reject(t)];case 4:return[2]}}))}))};FileValidationService=__decorate([r.Injectable(),__metadata("design:paramtypes",[qt,Kt])],FileValidationService);return FileValidationService}();var Zt=function(){function InputPropertyChange(e,t){this.key=e;this.value=t}return InputPropertyChange}();var Qt=function(){function InputProperties(e){if(e===void 0){e={}}this.changes=new s.Subject;this._map=new Map(i.toPairs(e))}InputProperties.prototype.get=function(e){return this._map.get(e)};InputProperties.prototype.set=function(e,t,n){if(n===void 0){n=true}this._map.set(e,t);if(n){this.changes.next(new Zt(e,t))}};return InputProperties}();var Jt=function(){function ValidatorParameters(e,t){if(e===void 0){e={}}if(t===void 0){t={}}this.validators={};this.asyncValidators={};this.validators=this._omitUndefinedValues(e);this.asyncValidators=this._omitUndefinedValues(t)}ValidatorParameters.prototype.has=function(e){return this.validators.hasOwnProperty(e)};ValidatorParameters.prototype.get=function(e){if(!this.has(e)){return null}return this.validators[e]};ValidatorParameters.prototype.hasAsync=function(e){return this.asyncValidators.hasOwnProperty(e)};ValidatorParameters.prototype.getAsync=function(e){if(!this.hasAsync(e)){return null}return this.asyncValidators[e]};ValidatorParameters.prototype._omitUndefinedValues=function(e){return i.omitBy(e,i.isUndefined)};return ValidatorParameters}();var en=function(e){__extends(FormField,e);function FormField(t,n,i){if(t===void 0){t={}}if(n===void 0){n={}}var o=i.component,r=i.inputs,a=r===void 0?new Qt:r,s=i.validatorParams,c=s===void 0?new Jt:s,l=i.persist,d=l===void 0?true:l;var p=e.call(this,t,n)||this;p.component=o;p.inputs=a;p.inputChanges=a.changes;p.validatorParams=c;p.persist=d;return p}FormField.prototype.setInput=function(e,t){this.inputs.set(e,t)};FormField.prototype.getInput=function(e){return this.inputs.get(e)};FormField.prototype.getPersistedValue=function(){if(!this.persist){return undefined}return this.value===undefined?null:this.value};return FormField}(d.FormControl);var tn=function(e){__extends(FormGrouping,e);function FormGrouping(t,n,i){if(n===void 0){n={}}var o=i.component,r=i.inputs,a=r===void 0?new Qt:r,s=i.validatorParams,c=s===void 0?new Jt:s,l=i.persist,d=l===void 0?true:l;var p=e.call(this,t,n)||this;p.component=o;p.inputs=a;p.inputChanges=a.changes;p.validatorParams=c;p.persist=d;return p}FormGrouping.prototype.setInput=function(e,t){this.inputs.set(e,t)};FormGrouping.prototype.getInput=function(e){return this.inputs.get(e)};FormGrouping.prototype.setNestedErrors=function(e){var t=this;if(e===void 0){e=[]}e.forEach((function(e){var n=e[0],i=e[1];var o=t.get(n);if(!o){throw new Error("FormGrouping - Path not found when setting nested error: "+n)}o.setErrors(i)}))};FormGrouping.prototype.getPersistedValue=function(){var e=this;return Object.keys(this.controls).reduce((function(t,n){var i=e.controls[n];if(!i.persist){return __assign(__assign({},t),i.getPersistedValue())}t[n]=i.getPersistedValue();return t}),{})};return FormGrouping}(d.FormGroup);var nn=function(e){__extends(FormList,e);function FormList(t,n,i){if(n===void 0){n={}}var o=i.component,r=i.inputs,a=r===void 0?new Qt:r,s=i.validatorParams,c=s===void 0?new Jt:s,l=i.persist,d=l===void 0?true:l;var p=e.call(this,t,n)||this;p.component=o;p.inputs=a;p.inputChanges=a.changes;p.validatorParams=c;p.persist=d;return p}FormList.prototype.setInput=function(e,t){this.inputs.set(e,t)};FormList.prototype.getInput=function(e){return this.inputs.get(e)};FormList.prototype.getPersistedValue=function(){return this.controls.reduce((function(e,t){if(!t.persist){return e.concat(i.values(t.getPersistedValue()))}e.push(t.getPersistedValue());return e}),[])};FormList.prototype.size=function(){return this.controls.length};FormList.prototype.swapFormElements=function(e,t){if(!this._isInBounds(e)||!this._isInBounds(t)||e===t){return}var n=this.at(e);this.insert(e,this.at(t));this.insert(t,n)};FormList.prototype.moveFormElement=function(e,t){if(!this._isInBounds(e)||!this._isInBounds(t)||e===t){return}var n=t<e?-1:1;var i=this.at(e);for(var o=e;o!==t;o+=n){var r=o+n;this.setControl(o,this.at(r))}this.setControl(t,i)};FormList.prototype._isInBounds=function(e){return e<this.controls.length&&e>=0};return FormList}(d.FormArray);var on=Symbol("_form_prop_");var rn=function(){function PropDecorator(e){this.property=e}return PropDecorator}();var an=function(e){__extends(InputPropDecorator,e);function InputPropDecorator(t,n){var i=e.call(this,t)||this;i.alias=n?n:i.property;return i}return InputPropDecorator}(rn);var sn=function(e){__extends(FormPropDecorator,e);function FormPropDecorator(){return e!==null&&e.apply(this,arguments)||this}return FormPropDecorator}(rn);function makePropertyDecorator(e){return function(t,n){var i=t.constructor;if(!i[on]){i[on]=[]}i[on].push(e(n))}}function DynamicForm(){return makePropertyDecorator((function(e){return new sn(e)}))}var DynamicInput=function(e){if(e===void 0){e=null}return makePropertyDecorator((function(t){return new an(t,e)}))};var cn=function(){function FormListerComponent(){}Object.defineProperty(FormListerComponent.prototype,"forms",{get:function(){return i.values(this.form.controls)},enumerable:false,configurable:true});__decorate([DynamicForm(),__metadata("design:type",tn)],FormListerComponent.prototype,"form",void 0);FormListerComponent=__decorate([r.Component({selector:"form-lister",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'<ng-template [formRenderer]="form" *ngFor="let form of forms"></ng-template>'})],FormListerComponent);return FormListerComponent}();var onChange=function(e){var t=e.changeDetectorRef,n=e.instance;n.onDynamicInputChange&&n.onDynamicInputChange();t.markForCheck()};var decorate=function(e,t){var n=e.instance;var i=n.constructor[on];if(!Array.isArray(i)){return new s.Subscription}var o=new Map;i.forEach((function(e){var i=e.property;if(e instanceof an){var r=e.alias;if(t.getInput(r)===undefined&&n[i]!==undefined){t.setInput(r,n[i])}n[i]=t.getInput(r);o.set(r,e)}else if(e instanceof sn){n[i]=t}}));onChange(e);return t.inputChanges.subscribe((function(t){var i=t.key,r=t.value;var a=o.get(i);if(!a){return}n[a.property]=r;onChange(e)}))};var ln=function(){function FormRendererDirective(e,t){this.componentFactoryResolver=e;this.viewContainerRef=t}Object.defineProperty(FormRendererDirective.prototype,"form",{set:function(e){this._dispose();var t=this.componentFactoryResolver.resolveComponentFactory(e.component);var n=this.viewContainerRef.createComponent(t);this._subscription=decorate(n,e)},enumerable:false,configurable:true});FormRendererDirective.prototype.ngOnDestroy=function(){this._dispose()};FormRendererDirective.prototype._dispose=function(){this._subscription&&this._subscription.unsubscribe();this.viewContainerRef.clear()};__decorate([r.Input("formRenderer"),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],FormRendererDirective.prototype,"form",null);FormRendererDirective=__decorate([r.Directive({selector:"[formRenderer]"}),__metadata("design:paramtypes",[r.ComponentFactoryResolver,r.ViewContainerRef])],FormRendererDirective);return FormRendererDirective}();var dn=new r.InjectionToken("COMPONENT_MAP");var pn=new r.InjectionToken("ASYNC_VALIDATOR_MAP");var un=new r.InjectionToken("VALIDATOR_MAP");var mn=function(){function FormBuilderModule(){}e=FormBuilderModule;FormBuilderModule.forRoot=function(t){return{ngModule:e,providers:[{provide:r.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:[t.types],multi:true},{provide:dn,useValue:t.types},{provide:un,useValue:t.validators},{provide:pn,useValue:t.asyncValidators}]}};var e;FormBuilderModule=e=__decorate([r.NgModule({imports:[u.CommonModule,d.ReactiveFormsModule],declarations:[ln,cn],entryComponents:[cn],exports:[ln]})],FormBuilderModule);return FormBuilderModule}();var gn=function(){function Registry(e){if(e===void 0){e={}}this._map=new Map(i.toPairs(e))}Registry.prototype.add=function(e,t){if(this._map.has(e)){throw new Error(this._service+": is overriding an element named '"+e+"' in its registry.")}this._map.set(e,t)};Registry.prototype.get=function(e){if(!this._map.has(e)){throw new Error(this._service+": does not have '"+e+"' in its registry.")}return this._map.get(e)};Object.defineProperty(Registry.prototype,"_service",{get:function(){return this.constructor.name},enumerable:false,configurable:true});return Registry}();var hn=function(e){__extends(ComponentRegistryService,e);function ComponentRegistryService(t){return e.call(this,t)||this}ComponentRegistryService=__decorate([r.Injectable({providedIn:"root"}),__param(0,r.Optional()),__param(0,r.Inject(dn)),__metadata("design:paramtypes",[Object])],ComponentRegistryService);return ComponentRegistryService}(gn);var vn=function(e){__extends(AsyncValidatorRegistryService,e);function AsyncValidatorRegistryService(t){return e.call(this,t)||this}AsyncValidatorRegistryService=__decorate([r.Injectable({providedIn:"root"}),__param(0,r.Optional()),__param(0,r.Inject(pn)),__metadata("design:paramtypes",[Object])],AsyncValidatorRegistryService);return AsyncValidatorRegistryService}(gn);var fn=function(e){__extends(ValidatorRegistryService,e);function ValidatorRegistryService(t){return e.call(this,t)||this}ValidatorRegistryService=__decorate([r.Injectable({providedIn:"root"}),__param(0,r.Optional()),__param(0,r.Inject(un)),__metadata("design:paramtypes",[Object])],ValidatorRegistryService);return ValidatorRegistryService}(gn);var _n=function(){function SchemaCompilerService(e,t,n){this.types=e;this.validators=t;this.asyncValidators=n}SchemaCompilerService.prototype.compileGroup=function(e,t,n){var i=this;if(n===void 0){n={}}var o=Object.keys(t.schemas).reduce((function(o,r){o[r]=i._toAbstractForm(e?e[r]:null,t.schemas[r],n);return o}),{});return new tn(o,this._getValidators(t,n),{component:t.component?this._getComponent(t.component,n.components):cn,inputs:new Qt(t.inputs),validatorParams:new Jt(t.validators,t.asyncValidators),persist:this._toPersist(t.persist)})};SchemaCompilerService.prototype.compileList=function(e,t,n){var i=this;if(n===void 0){n={}}var o=Array.isArray(t.schema)?t.schema:[t.schema];if(!o.length){throw Error("SchemaCompilerService - One or more schemas must be provided to compile a form list.")}var r=(Array.isArray(e)?e:[]).map((function(e,t){var r=o[t]?o[t]:o[o.length-1];return i._toAbstractForm(e,r,n)}));return new nn(r,this._getValidators(t,n),{component:this._getComponent(t.component,n.components),inputs:new Qt(t.inputs),validatorParams:new Jt(t.validators,t.asyncValidators),persist:this._toPersist(t.persist)})};SchemaCompilerService.prototype.compileField=function(e,t,n){if(n===void 0){n={}}return new en({value:e,disabled:t.disabled},this._getValidators(t,n),{component:this._getComponent(t.component,n.components),inputs:new Qt(t.inputs),validatorParams:new Jt(t.validators,t.asyncValidators),persist:this._toPersist(t.persist)})};SchemaCompilerService.prototype._getValidators=function(e,t){if(t===void 0){t={}}var n=[];var i=[];if(e.validators){n=this._mapValidator(e.validators,this.validators,t.validators)}if(e.asyncValidators){i=this._mapValidator(e.asyncValidators,this.asyncValidators,t.asyncValidators)}return{validators:n,asyncValidators:i}};SchemaCompilerService.prototype._toAbstractForm=function(e,t,n){if(t.type==="field"){return this.compileField(e,t,n)}if(t.type==="group"){return this.compileGroup(e,t,n)}return this.compileList(e,t,n)};SchemaCompilerService.prototype._mapValidator=function(e,t,n){var i=this;if(n===void 0){n={}}return Object.keys(e).reduce((function(o,r){var a=e[r];if(a!==undefined){var s=n[r]?n[r]:t.get(r);if(!s){throw new Error("SchemaCompilerService - Validator not found in "+i.validators.constructor.name+" for: "+r+".")}o.push(s(a))}return o}),[])};SchemaCompilerService.prototype._toPersist=function(e){if(e===void 0){e=true}return e};SchemaCompilerService.prototype._getComponent=function(e,t){if(t===void 0){t={}}var n=t[e]?t[e]:this.types.get(e);if(!n){throw new Error("SchemaCompilerService - Did not find component for: "+e+".")}return n};SchemaCompilerService=__decorate([r.Injectable({providedIn:mn}),__metadata("design:paramtypes",[hn,fn,vn])],SchemaCompilerService);return SchemaCompilerService}();var getPersistenceMap=function(e,t,n,i){if(t===void 0){t={}}if(n===void 0){n=[]}if(i===void 0){i=[]}if(e instanceof en){if(e.persist){t[n.join(".")]=i}return t}if(e instanceof nn||e instanceof tn){if(e.persist&&n.length){t[n.join(".")]=i}Object.keys(e.controls).forEach((function(o){var r=e.controls[o];var a=__spreadArrays(i,[o]);if(r.persist){return getPersistenceMap(r,t,__spreadArrays(n,[o]),a)}return getPersistenceMap(r,t,n,a)}))}return t};var toFormValue=function(e,t){if(t.type==="field"){return e}if(t.type==="group"){return processGroupSchema(e,t)}return processListSchema(e,t)};var processGroupSchema=function(e,t){var n={};Object.keys(t.schemas).forEach((function(i){var o=getInnerData(e,i,t.schemas[i].type);n[i]=toFormValue(o,t.schemas[i])}));return n};var processListSchema=function(e,t){var n=t;var i=[];var o=Array.isArray(e)?e:[];var r=Array.isArray(n.schema)?n.schema:[n.schema];o.forEach((function(e,t){if(t>r.length-1){t=r.length-1}i.push(toFormValue(e,r[t]))}));return i};var getInnerData=function(e,t,n){if(e==null){return null}var i=e[t];if(i!==undefined){return i}else if(n==="field"){return null}return e};t.ALERT_CONFIG_DEFAULTS=jt;t.ALERT_CONFIG_DEFAULTS_TOKEN=Ut;t.AbstractCachedRestService=at;t.Alert=$t;t.AlertFactory=Bt;t.AlertModule=Gt;t.AlertService=Ht;t.AnnotationService=z;t.AsyncValidatorRegistryService=vn;t.AuthenticationService=kt;t.BackendEntry=ve;t.BackendInterceptor=_e;t.BaseValueAccessor=k;t.BooleanUtils=R;t.BrowserService=vt;t.CacheAction=H;t.CacheConfig=$;t.CacheConfigAnnotationFactory=CacheConfigAnnotationFactory;t.CacheEngine=de;t.CacheService=ue;t.Cached=j;t.CachedAnnotationFactory=CachedAnnotationFactory;t.CloneableUtils=m;t.ComponentRegistryService=hn;t.CryptographicUtils=C;t.DEFAULT_AUTHENTICATION_CLIENT_ID=ee;t.DEFAULT_AUTHENTICATION_ENTRY_POINT=Q;t.DEFAULT_AUTH_MAP=te;t.DEFAULT_CREDENTIALS_MAP=ne;t.DEFAULT_LANGUAGE_ISO=se;t.DefaultCacheTiming=pe;t.DefaultRetryStrategy=Ue;t.DynamicForm=DynamicForm;t.DynamicInput=DynamicInput;t.EVENTS=ae;t.EVENT_SERVICE=X;t.EXPONENTIAL_RETRY_DEFAULT_SETTING=ke;t.EvictionTag=me;t.ExponentialRetry=Fe;t.ExponentialRetryStrategy=je;t.FILE_VALIDATION_CONFIG=Yt;t.FORM_PROP=on;t.FileMimeTypeService=qt;t.FileReaderService=Wt;t.FileValidationService=Xt;t.FileValidatorFactory=Kt;t.FingerPrintingService=ft;t.FlawInjectionInterceptorModule=Ce;t.FormBuilderModule=mn;t.FormField=en;t.FormGrouping=tn;t.FormList=nn;t.FormListerComponent=cn;t.FormPropDecorator=sn;t.FormRendererDirective=ln;t.FunctionsUtils=S;t.FundamentalModalManagerService=Ft;t.FundamentalModalTemplateComponent=zt;t.FundamentalModalTemplateModule=Lt;t.GET_REQUESTS_ON_HOLD_MAP=Xe;t.HTTP_METHODS_READ=Ne;t.HTTP_METHODS_UPDATE=xe;t.HttpBackendService=fe;t.HttpErrorInterceptorService=Je;t.HttpInterceptorModule=tt;t.HttpUtils=x;t.I18N_RESOURCE_URI_TOKEN=Y;t.I18N_ROOT_RESOURCE_URI=J;t.IAlertService=Se;t.IAuthenticationManagerService=De;t.IAuthenticationService=be;t.IModalService=Te;t.ISelectAdapter=Pt;t.ISessionService=Ae;t.ISettingsService=Pe;t.ISharedDataService=Ee;t.IStorageService=Ie;t.ITranslationsFetchService=ht;t.InputPropDecorator=an;t.InputProperties=Qt;t.InputPropertyChange=Zt;t.InvalidateCache=InvalidateCache;t.InvalidateCacheAnnotationFactory=InvalidateCacheAnnotationFactory;t.LANDING_PAGE_PATH=ie;t.LANGUAGE_SERVICE=le;t.LANGUAGE_SERVICE_CONSTANTS=ce;t.LIBRARY_NAME=q;t.LINEAR_RETRY_DEFAULT_SETTING=ze;t.LanguageDropdown=wt;t.LanguageDropdownAdapter=Ct;t.LanguageDropdownComponent=Et;t.LanguageDropdownHelper=It;t.LanguageDropdownModule=xt;t.LanguageService=St;t.LinearRetry=Le;t.LinearRetryStrategy=Be;t.ListItemKeyboardControlDirective=Tt;t.ListKeyboardControlDirective=Dt;t.ListKeyboardControlModule=Ot;t.LogService=A;t.LoginDialogComponent=gt;t.LoginDialogModule=Nt;t.LoginDialogResourceProvider=mt;t.ModalService=Vt;t.ModuleUtils=P;t.OPERATION_CONTEXT_TOKEN=qe;t.OperationContextAnnotationFactory=OperationContextAnnotationFactory;t.OperationContextRegistered=We;t.OperationContextService=He;t.PermissionErrorInterceptor=Ye;t.PromiseUtils=D;t.PropDecorator=rn;t.REAUTH_STARTED=Z;t.RarelyChangingContentName=ge;t.ResponseAdapterInterceptor=it;t.RestClient=ot;t.RestServiceFactory=rt;t.RetryInterceptor=Ke;t.SELECTED_LANGUAGE=re;t.SIMPLE_RETRY_DEFAULT_SETTING=Ve;t.SSOAuthenticationHelper=ut;t.SWITCH_LANGUAGE_EVENT=oe;t.SchemaCompilerService=_n;t.SelectComponent=Rt;t.SelectModule=Mt;t.SimpleRetry=$e;t.StringUtils=h;t.StripResponseHeaders=StripResponseHeaders;t.TESTMODESERVICE=we;t.TranslationModule=yt;t.URIBuilder=f;t.UnauthorizedErrorInterceptor=Ze;t.UrlUtils=_;t.ValidatorParameters=Jt;t.ValidatorRegistryService=fn;t.WHO_AM_I_RESOURCE_URI_TOKEN=K;t.WindowUtils=w;t.annotationService=L;t.booleanUtils=M;t.clientErrorPredicate=clientErrorPredicate;t.cloneableUtils=g;t.commonNgZone=I;t.defaultRetryStrategyFactory=defaultRetryStrategyFactory;t.exponentialRetryStrategyFactory=exponentialRetryStrategyFactory;t.functionsUtils=b;t.getPersistenceMap=getPersistenceMap;t.httpUtils=N;t.linearRetryStrategyFactory=linearRetryStrategyFactory;t.moduleUtils=T;t.noInternetConnectionErrorPredicate=noInternetConnectionErrorPredicate;t.promiseUtils=O;t.rarelyChangingContent=he;t.readPredicate=readPredicate;t.retriableErrorPredicate=retriableErrorPredicate;t.serverErrorPredicate=serverErrorPredicate;t.stringUtils=v;t.timeoutErrorPredicate=timeoutErrorPredicate;t.toFormValue=toFormValue;t.updatePredicate=updatePredicate;t.urlUtils=y;t.windowUtils=E},823:function(e,t){},825:function(e,t){},835:function(e,t){},837:function(e,t){},864:function(e,t){},865:function(e,t){},870:function(e,t){},93:function(e,t,n){"use strict";(function(e){$exceptionHandler.$inject=["$log"];GatewayProxiedAnnotationFactory.$inject=["gatewayProxy"];$translateStaticFilesLoader.$inject=["$q","translationsFetchService"];Object.defineProperty(t,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var i=n(137);var o=n(818);var r=n(114);var a=n(148);var s=n(0);var c=n(929);var l=n(930);var d=_interopDefault(n(5));var p=n(132);var u=n(4);var m=n(155);var g=n(49);var h=n(156);var v=n(198);var f=n(52);var _=_interopDefault(n(319));var y=_interopDefault(n(367));var C=n(168);var S=n(22);var b=n(549);var I=n(45);var w=n(931);angular.module("tabsetModule",[]).component("yTabset",{transclude:false,templateUrl:"yTabsetTemplate.html",controller:"yTabsetController",controllerAs:"yTabset",bindings:{model:"=",tabsList:"<",tabControl:"=",numTabsDisplayed:"@"}}).controller("yTabsetController",(function(){}));angular.module("yLoDashModule",[]).factory("lodash",(function(){if(!window.smarteditLodash){if(window._&&window._.noConflict){window.smarteditLodash=window._.noConflict()}else{throw"could not find lodash library under window._ namespace"}}return window.smarteditLodash}));(function(){var e=e||window.angular;var t=null;try{t=e.module("coretemplates")}catch(e){}t=t||e.module("coretemplates",[]);t.run(["$templateCache",function(e){e.put("HelpComponent.html",'<se-tooltip [triggers]="[\'mouseenter\', \'mouseleave\']" placement="auto" [isChevronVisible]="true" [title]="title" class="se-help"><span se-tooltip-trigger class="sap-icon--sys-help se-y-help-icon"></span><ng-container se-tooltip-body><div *ngIf="template" [seCompileHtml]="template"></div><div *ngIf="templateUrl" [ngInclude]="templateUrl"></div></ng-container><ng-content se-tooltip-body></ng-content></se-tooltip>');e.put("legacyHasOperationPermissionTemplate.html",'<div data-ng-if="ctrl.isPermissionGrantedFlag" ng-transclude></div>');e.put("ClientPagedListCellComponent.html",'<ng-container *ngIf="key.component; else cellText"><ng-container *ngComponentOutlet="key.component; injector: componentInjector"></ng-container></ng-container><ng-template #cellText><span>{{ item[key.property] }}</span></ng-template>');e.put("ClientPagedListComponent.html",'<div class="fluid-container se-paged-list-result"><p class="se-page-list__page-count" *ngIf="displayCount"><span>({{ totalItems }} {{ \'se.pagelist.countsearchresult\' | translate }})</span></p><table class="se-paged-list-table table table-striped table-hover techne-table"><thead><tr><th *ngFor="let key of keys; trackBy: keysTrackBy" (click)="onOrderByColumn(key.property)" [ngStyle]="{ \'width\': columnWidth + \'%\' }" class="se-paged-list__header" [ngClass]="\'se-paged-list__header-\' + key.property"><ng-container *ngIf="key.i18n">{{ key.i18n | translate }} <span class="header-icon" [hidden]="visibleSortingHeader !== key.property" [ngClass]="{                          \'sap-icon--navigation-down-arrow\': headersSortingState[key.property],                          \'sap-icon--navigation-up-arrow\': !headersSortingState[key.property]                      }"></span></ng-container></th><th class="se-paged-list__header"></th><th class="se-paged-list__header" *ngIf="dropdownItems"></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of filteredItems" class="techne-table-xs-right techne-table-xs-left se-paged-list-item"><td *ngFor="let key of keys" [ngClass]="\'se-paged-list-item-\' + key.property"><se-client-paged-list-cell [item]="item" [key]="key"></se-client-paged-list-cell></td><td><se-tooltip *ngIf="item.icon" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [title]="\'se.icon.tooltip.visibility\' | translate: { numberOfRestrictions: item.icon.numberOfRestrictions }" [isChevronVisible]="true"><img [src]="item.icon.src" se-tooltip-trigger/></se-tooltip></td><ng-container *ngIf="dropdownItems"><td *seHasOperationPermission="\'se.edit.page\'" class="paged-list-table__body__td paged-list-table__body__td-menu"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="item" class="pull-right"></se-dropdown-menu></td></ng-container></tr></tbody></table><div class="pagination-container"><se-pagination [totalItems]="totalItems < itemsPerPage ? itemsPerPage : totalItems" [itemsPerPage]="itemsPerPage" (onChange)="onCurrentPageChange($event)" [currentPage]="currentPage" class="pagination-lg"></se-pagination></div></div>');e.put("CollapsibleContainerComponent.html",'<div role="tab" class="collapsible-container__header" [ngClass]="{        \'collapsible-container__header--icon-right\': isIconRight(),        \'collapsible-container__header--icon-left\': isIconLeft()    }" [attr.id]="headingId" [attr.aria-selected]="isOpen" (keypress)="handleKeypress($event)"><button type="button" tabindex="0" class="collapsible-container__header__title" (click)="toggle()" [attr.aria-expanded]="isOpen" [attr.aria-controls]="panelId"><ng-content select="se-collapsible-container-header"></ng-content></button> <a class="collapsible-container__header__button btn btn-link" *ngIf="configuration.iconVisible" [ngClass]="{            \'collapsible-container__header__button--expanded\': isOpen        }" [title]="isOpen            ? \'se.ycollapsible.action.collapse\'            : (\'se.ycollapsible.action.expand\' | translate)        " [attr.aria-expanded]="isOpen" (click)="toggle()"><span class="sap-icon--navigation-down-arrow collapsible-container__header__icon"></span></a></div><div #container class="collapsible-container__content panel" [ngStyle]="{ \'max-height.px\': isOpen ? containerHeight : 0 }" [attr.id]="panelId" [attr.aria-labelledby]="headingId" [attr.aria-hidden]="!isOpen" role="tabpanel"><ng-content select="se-collapsible-container-content"></ng-content></div>');e.put("DataTableComponent.html",'<table class="se-paged-list-table fd-table"><thead><tr><th *ngFor="let column of columns" (click)="sortColumn(column)" [ngStyle]="{\'width.\': columnWidth + \'%\'}" [ngClass]="\'se-paged-list__header-\'+column.property" class="se-paged-list__header">{{ column.i18n | translate }} <span class="se-data-table__arrow" *ngIf="visibleSortingHeader === column.property" [ngClass]="{                         \'se-data-table__arrow--expanded sap-icon--navigation-down-arrow\': headersSortingState[column.property],                        \'se-data-table__arrow--not-expanded sap-icon--navigation-up-arrow\': !headersSortingState[column.property] }"></span></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of items; let i = index" class="se-paged-list-item"><td *ngFor="let column of columns" [ngClass]="\'se-paged-list-item-\'+column.property"><se-data-table-renderer [column]="column" [item]="item" [config]="config" [index]="i"></se-data-table-renderer></td></tr></tbody></table>');e.put("yDropdownDefaultItemTemplate.html",'<a class="se-dropdown-item fd-menu__item" data-ng-class="dropdownItem.customCss" data-ng-click="dropdownItem.callback($ctrl.selectedItem) ">{{dropdownItem.key | translate}}</a>');e.put("DynamicPagedListComponent.html",'<div *ngIf="ready" class="se-dynamic-paged-list"><div class="fd-panel__body fd-panel__body--bleed"><se-data-table [columns]="columns" [config]="config" [items]="items" [sortStatus]="sortStatus" (onSortColumn)="orderByColumn($event)"></se-data-table></div><div class="fd-panel__footer"><se-pagination *ngIf="!!items.length" class="se-dynamic-list__pagination" [totalItems]="totalItems" [itemsPerPage]="config.itemsPerPage" [currentPage]="currentPage" (onChange)="onCurrentPageChange($event)"></se-pagination><span class="se-paged-list__page-count-wrapper se-paged-list__page-count-wrapper--footer"><span class="span-page-list__page-count-text">{{\'se.pagelist.countsearchresult\' | translate}} </span><span class="se-page-list__page-count">({{ totalItems }})</span></span></div></div><se-spinner [isSpinning]="!ready"></se-spinner>');e.put("legacyDynamicPagedListTemplate.html",'<se-dynamic-paged-list [config]="$ctrl.config" [mask]="$ctrl.mask" (get-api)="$ctrl.internalGetApi($event)" (on-items-update)="$ctrl.onItemsUpdate($event)"></se-dynamic-paged-list>');e.put("GenericEditorComponent.html",'<ng-template let-state [formBuilder]="{schema$: editor.schema$, data$: editor.data$}" (stateCreated)="setFormState($event)"><div class="se-generic-editor"><se-generic-editor-breadcrumb></se-generic-editor-breadcrumb><ng-container *ngIf="state; else noSupport"><form novalidate #nativeForm class="no-enter-submit se-generic-editor__form" [contentManager]="{onSave: editor.submit$}" (onSuccess)="editor.onSuccess($event)" (onError)="editor.onFailure($event)"><div class="modal-header se-generic-editor__header" *ngIf="modalHeaderTitle"><h4 class="modal-title">{{modalHeaderTitle| translate}}</h4></div><div class="se-generic-editor__body"><ng-template [formRenderer]="state.group"></ng-template></div><div class="se-generic-editor__footer modal-footer" *ngIf="editor && showCommands()"><button fd-button id="cancel" type="button" options="light" *ngIf="showCancel()" (click)="_reset()">{{editor.cancelButtonText | translate}}</button> <button fd-button id="submit" name="submit" options="emphasized" *ngIf="showSubmit()" [seSubmitBtn]="editor.isSubmitDisabled">{{editor.submitButtonText | translate}}</button></div></form></ng-container><ng-template #noSupport><div class="se-generic-editor__body"><se-message type="info" id="GenericEditor.NoEditingSupportDisclaimer"><ng-container se-message-description>{{ \'se.editor.notification.editing.not.supported\' | translate }}</ng-container></se-message></div></ng-template></div></ng-template>');e.put("yHelpTemplate.html",'<se-help class="se-y-help-wrapper" [template]="$ctrl.template" [template-url]="$ctrl.templateUrl" [title]="$ctrl.title"></se-help>');e.put("InfiniteScrollingComponent.html",'<div #container class="se-infinite-scrolling__container" [ngClass]="dropDownContainerClass" fdInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div class="se-infinite-scrolling__holder" [ngClass]="dropDownClass"><div #content><ng-content></ng-content></div><div class="spinner-container"><se-spinner [isSpinning]="isLoading" [isFluid]="false"></se-spinner></div></div></div>');e.put("LegacyInfiniteScrollingTemplate.html",'<div class="ySEInfiniteScrolling-container {{$ctrl.dropDownContainerClass}}"><div class="ySEInfiniteScrolling {{$ctrl.dropDownClass}}" data-ng-if="!!$ctrl.initiated" data-infinite-scroll="$ctrl.nextPage()" data-infinite-scroll-disabled="$ctrl.pagingDisabled" data-infinite-scroll-distance="$ctrl.distance" data-infinite-scroll-immediate-check="true" data-infinite-scroll-container="$ctrl.container"><div data-ng-transclude></div></div><div data-ng-if="!$ctrl.pagingDisabled" class="panel panel-default panel__ySEInfiniteScrolling"><div class="panel-body panel-body__ySEInfiniteScrolling"><div class="spinner"><div class="spinner-container spinner-container1"><div class="spinner-circle1"></div><div class="spinner-circle2"></div><div class="spinner-circle3"></div><div class="circle4"></div></div><div class="spinner-container spinner-container2"><div class="spinner-circle1"></div><div class="spinner-circle2"></div><div class="spinner-circle3"></div><div class="circle4"></div></div><div class="spinner-container spinner-container3"><div class="spinner-circle1"></div><div class="spinner-circle2"></div><div class="spinner-circle3"></div><div class="circle4"></div></div></div></div></div></div>');e.put("genericEditorComponentTemplate.html",'<se-generic-editor [id]="$ctrl.id" [smartedit-component-id]="$ctrl.smarteditComponentId" [smartedit-component-type]="$ctrl.smarteditComponentType" [structure]="$ctrl.structure" [structure-api]="$ctrl.structureApi" [content]="$ctrl.content" [content-api]="$ctrl.contentApi" [(submit)]="$ctrl.submit" [(reset)]="$ctrl.reset" [(is-dirty)]="$ctrl.isDirty" [(is-valid)]="$ctrl.isValid" [editor-stack-id]="$ctrl.editorStackId" [update-callback]="$ctrl.updateCallback" [custom-on-submit]="$ctrl.customOnSubmit" [uri-context]="$ctrl.uriContext" (get-api)="$ctrl.getApi($event)"></se-generic-editor>');e.put("EditableListComponent.html",'<div [ngClass]="{ \'y-editable-list-disabled\': !editable, \'se-editable-list-disabled\': !editable }"><se-tree (onTreeUpdated)="handleTreeUpdated($event)" [removeDefaultTemplate]="true" [rootNodeUid]="rootId" [nodeTemplateUrl]="itemTemplateUrl" [nodeComponent]="itemComponent" [nodeActions]="actions" [dragOptions]="dragOptions" [showAsList]="true"></se-tree></div>');e.put("PaginationComponent.html",'<fd-pagination class="se-pagination" [displayTotalItems]="displayTotalItems" [totalItems]="totalItems" [itemsPerPage]="totalItems === 1 ? 1 : itemsPerPage" [currentPage]="currentPage" (pageChangeStart)="onPageChanged($event)" nextLabel="&rsaquo; " previousLabel="&lsaquo; "></fd-pagination>');e.put("yPaginationTemplate.html",'<div class="fd-pagination"><ul data-uib-pagination boundary-links="true " total-items="$ctrl.totalItems " items-per-page="$ctrl.itemsPerPage " ng-model="$ctrl.currentPage " ng-change="$ctrl.pageChanged()" class="fd-pagination__nav" previous-text="&lsaquo; " next-text="&rsaquo; " first-text="&laquo; " last-text="&raquo; "></ul></div>');e.put("yPopoverPopupTemplate.html",'<div class="popover se-popover" data-ng-class="$ctrl.placement"><div class="arrow" x-arrow></div><div class="popover-inner"><h3 class="se-popover__title" data-ng-if="$ctrl.title">{{ $ctrl.title | translate }}</h3><div class="se-popover__content" data-compile-html="$ctrl.template"></div></div></div>');e.put("SelectComponent.html",'<fd-select [style.display]="\'none\'"></fd-select><div [attr.id]="id + \'-selector\'" class="select-container" [ngClass]="{        \'has-warning\': hasWarning(),        \'has-error\': hasError()    }"><ng-container *ngIf="multiSelect; then multi; else singleSelect"></ng-container><ng-template #singleSelect><fd-popover [triggers]="[\'click\']" [(isOpen)]="isOpen" [placement]="\'bottom\'" (isOpenChange)="onSingleSelectIsOpenChange($event)"><fd-popover-control><div class="selected-container fd-select-custom" [attr.has-selected-option]="!!selected || null"><button fd-button class="fd-select-button-custom toggle-button" [disabled]="isReadOnly"><span *ngIf="!selected; else selectedItem" class="selected-placeholder">{{ placeholder | translate }}</span><ng-template #selectedItem><div class="selected-item"><span *ngIf="controls" class="glyphicon glyphicon-search"></span><se-item-printer *ngIf="selected" [attr.id]="id + \'-selected\'" [item]="selected" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span *ngIf="controls || showRemoveButton" class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, selected)"></span></div></ng-template></button></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngIf="searchEnabled && isOpen"><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></ng-container><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #multi><fd-popover class="se-multi-select" [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="\'bottom\'"><fd-popover-control><div class="selected-container"><ng-container *ngIf="selected && selected.length > 0"><ol class="selected-list" cdkDropList (cdkDropListDropped)="onDrop($event)"><li *ngFor="let item of selected; trackBy: itemTrackBy" cdkDrag class="selected-list__item selected-item"><se-item-printer [item]="item" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, item)"></span></li></ol></ng-container><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #resultsHeader><se-select-results-header [search]="search" [resultsHeaderComponent]="resultsHeaderComponent" [resultsHeaderLabel]="resultsHeaderLabel" [displayResultsHeaderLabel]="showResultsHeaderLabel()" [actionableSearchItem]="actionableSearchItem" (actionButtonClick)="closeAndReset()"></se-select-results-header></ng-template><ng-template #searchInputTemplate><se-select-search-input [isDisabled]="isReadOnly" [isReadOnly]="multiSelect && !searchEnabled" [isTypeAheadEnabled]="!multiSelect" [placeholder]="showPlaceholder() ? (placeholder | translate) : \'\'" [search]="search" (searchKeyup)="onSearchInputKeyup($event.event, $event.value)" (searchChange)="onSearchInputChange($event)"></se-select-search-input></ng-template><ng-template #selectListTemplate><se-select-list [id]="id" [isPagedDropdown]="isPagedDropdown()" [fetchPage]="fetchStrategy.fetchPage" [search]="search" [items]="items" [selected]="selected" [excludeSelected]="multiSelect" [disableChoiceFn]="disableChoiceFn" [itemComponent]="itemComponent" [selectComponentCtx]="this" (optionClick)="onOptionClick($event)" (infiniteScrollItemsChange)="onInfiniteScrollItemsChange()"></se-select-list></ng-template></div>');e.put("SliderPanelComponent.html",'<div class="se-slider-panel-wrapper" *ngIf="isShown"><div class="se-slider-panel-container slide-in"><div class="se-slider-panel__header" *ngIf="sliderPanelConfiguration.modal"><span class="se-slider-panel__title" *ngIf="sliderPanelConfiguration.modal.title">{{ sliderPanelConfiguration.modal.title | translate }}</span> <button type="button" class="se-slider-panel__close-btn fd-button--light fd-modal__close" aria-label="close" *ngIf="sliderPanelConfiguration.modal.showDismissButton" (click)="sliderPanelDismissAction()"></button></div><div class="se-slider-panel__body"><div *ngIf="sliderPanelConfiguration.template" [seCompileHtml]="sliderPanelConfiguration.template" [scope]="sliderPanelConfiguration.scope"></div><div *ngIf="sliderPanelConfiguration.templateUrl" [ngInclude]="sliderPanelConfiguration.templateUrl" [scope]="sliderPanelConfiguration.scope"></div><ng-content></ng-content></div><div class="se-slider-panel__footer" *ngIf="sliderPanelConfiguration.modal && (sliderPanelConfiguration.modal.cancel || sliderPanelConfiguration.modal.save)"><button type="button" class="fd-button--light se-slider-panel__footer-btn se-slider-panel__footer-btn--cancel" *ngIf="sliderPanelConfiguration.modal.cancel" (click)="sliderPanelConfiguration.modal.cancel.onClick()">{{ sliderPanelConfiguration.modal.cancel.label | translate }}</button> <button type="button" class="fd-button--emphasized se-slider-panel__footer-btn se-slider-panel__footer-btn--save" *ngIf="sliderPanelConfiguration.modal.save" (click)="sliderPanelConfiguration.modal.save.onClick()" [disabled]="isSaveDisabled()">{{ sliderPanelConfiguration.modal.save.label | translate }}</button></div></div></div>');e.put("TabComponent.html",'<ng-container *ngIf="!isLegacyTab; else legacyAngularJSTab"><ng-container *ngComponentOutlet="tab.component; injector: tabInjector"></ng-container></ng-container><ng-template #legacyAngularJSTab><div [ngInclude]="tab.templateUrl" [scope]="scopeStream | async"></div></ng-template>');e.put("TabsComponent.html",'<div class="se-tabset-wrapper"><ul class="nav nav-tabs se-tabset" role="tablist" *ngIf="isInitialized"><ng-container *ngIf="tabsList.length !== numTabsDisplayed"><li *ngFor="let tab of (getVisibleTabs() | async); trackBy: trackTabById" [ngClass]="{ \'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" (click)="selectTab(tab)" class="se-tabset__link" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><ng-container *ngIf="tabsList && tabsList.length == numTabsDisplayed"><li *ngFor="let tab of tabsList; trackBy: trackTabById" [ngClass]="{\'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><su-select class="se-tabset__select" *ngIf="tabsList.length > numTabsDisplayed && (getDropdownTabs() | async)" [items]="dropdownTabs" [isKeyboardControlEnabled]="false" [hasCustomTrigger]="true" (onItemSelected)="selectTab($event.value)"><li [ngClass]="{\'active\': isActiveInMoreTab()}" su-select-custom-trigger><a [ngClass]="{\'sm-tab-error\': dropDownHasErrors()}" class="dropdown-toggle"><span *ngIf="!isActiveInMoreTab()" class="multi-tabs__more-span">{{ \'se.ytabset.tabs.more\' | translate }} </span><span *ngIf="isActiveInMoreTab()" class="multi-tabs__more-span">{{selectedTab.title | translate}} </span><span class="caret"></span></a></li></su-select></ul><div class="se-tab-set__content-wrapper" *ngIf="selectedTab"><ng-container *ngFor="let tab of tabsList; trackBy: trackTabById"><se-tab [hidden]="tab.id !== selectedTab.id" [attr.tab-id]="tab.id" [tab]="tab" [model]="model"></se-tab></ng-container></div></div>');e.put("yTabsetTemplate.html",'<se-tabs [tabs-list]="yTabset.tabsList" [model]="yTabset.model" [num-tabs-displayed]="yTabset.numTabsDisplayed"></se-tabs>');e.put("treeNodeRendererTemplate.html",'<div ui-tree-handle class="tree-node tree-node-content se-tree-node clearfix" data-ng-class="{ hovered: node.mouseHovered }" data-ng-mouseenter="$ctrl.onNodeMouseEnter(node)" data-ng-mouseleave="$ctrl.onNodeMouseLeave(node)"><div data-ng-show="!$ctrl.showAsList" class="se-tree-node__expander--wrapper col-xs-1 text-center"><a class="se-tree-node__expander btn btn-link btn-sm" data-ng-if="$ctrl.hasChildren(this)" data-ng-disabled="$ctrl.isDisabled" data-ng-click="$ctrl.toggleAndfetch(this)"><span data-ng-class="{\'sap-icon--slim-arrow-right\': collapsed,\'sap-icon--slim-arrow-down\': !collapsed}"></span></a></div><div data-ng-show="$ctrl.displayDefaultTemplate()" class="se-tree-node__name col-xs-5" title="{{ node.name | l10n }}"><span>{{node.name | l10n}}</span><h6 data-ng-show="node.title">{{node.title | l10n}}</h6></div><div data-ng-include="$ctrl.nodeTemplateUrl" data-ng-if="$ctrl.nodeTemplateUrl" data-include-replace></div></div><ol data-ui-tree-nodes="" data-ng-model="node.nodes" data-ng-class="{hidden: collapsed}" class="se-tree-node__ol"><li data-ng-repeat="node in node.nodes" data-ui-tree-node data-ng-include="\'treeNodeRendererTemplate.html\'"></li></ol>');e.put("yTreeComponentTemplate.html",'<div data-ui-tree="$ctrl.treeOptions.callbacks" data-drag-enabled="$ctrl.treeOptions.dragEnabled" data-drag-delay="$ctrl.treeOptions.dragDelay" class="categoryTable se-tree"><div class="se-tree__body"><div class="desktopLayout clearfix"><ol data-ui-tree-nodes="" data-ng-model="$ctrl.root.nodes" class="se-tree__nodes"><li data-ng-if="$ctrl.root.nodes.length === 0" class="se-tree__nodes--nodata" data-translate="se.ytree.no.nodes.to.display"></li><li class="se-tree__nodes--item" data-ng-repeat="node in $ctrl.root.nodes" data-ui-tree-node data-ng-include="\'treeNodeRendererTemplate.html\'"></li></ol></div></div></div>');e.put("TreeComponent.html",'<div class="categoryTable se-tree"><div class="se-tree__body"><div class="desktopLayout"><ol class="se-tree__nodes"><li *ngIf="(this.treeService.dataSource.get() | async).length === 0" class="se-tree__nodes--nodata">{{ \'se.ytree.no.nodes.to.display\' | translate }}</li><li class="se-tree__nodes--item"><se-tree-node [source]="this.treeService.dataSource.get() | async"></se-tree-node></li></ol></div></div></div>');e.put("TreeNodeComponent.html",'<ol class="se-tree-node__ol angular-ui-tree-nodes" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="source" [cdkDropListDisabled]="isDisabled"><li *ngFor="let node of source" cdkDrag [cdkDragData]="node" class="angular-ui-tree-node se-tree-node__li"><se-tree-node-renderer [node]="node"></se-tree-node-renderer></li></ol>');e.put("TreeNodeRendererComponent.html",'<div class="tree-node tree-node-content se-tree-node angular-ui-tree-handle" [ngClass]="{        \'hovered\': node.mouseHovered,        \'se-tree-node--first-level\': isRootNodeDescendant,        \'se-tree-node--selected\': !collapsed    }" [ngStyle]="{        \'padding-left\': getPaddingLeft(node.level)    }" [attr.level]="node.level" (mouseover)="onMouseOver()" (mouseout)="onMouseOut()"><div *ngIf="!showAsList" class="se-tree-node__expander--wrapper col-xs-1 text-center"><a class="se-tree-node__expander btn btn-link btn-sm" *ngIf="node.hasChildren" [attr.disabled]="isDisabled || null" (click)="toggle($event)"><span [ngClass]="{                    \'sap-icon--slim-arrow-right\': collapsed,                    \'sap-icon--slim-arrow-down\': !collapsed                }"></span></a></div><div *ngIf="displayDefaultTemplate" class="se-tree-node__name col-xs-5" [attr.title]="node.title | seL10n | async "><span>{{node.name}}</span><h6 *ngIf="node.title">{{node.title | seL10n | async }}</h6></div><div [ngStyle]="{\'width\': \'100%\'}" *ngIf="tree.nodeTemplateUrl" [ngInclude]="tree.nodeTemplateUrl" [scope]="{node: node}" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="tree.nodeComponent"><ng-container *ngComponentOutlet="tree.nodeComponent; injector: nodeComponentInjector"></ng-container></ng-container></div><se-tree-node [source]="node.nodes" *ngIf="node.nodes.length && node.isExpanded"></se-tree-node>');e.put("accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="yCollapsibleContainer__header" ng-keypress="toggleOpen($event)"><a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle yCollapsibleContainer__title" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span> </a><a class="yCollapsibleContainer__icon btn btn-link" data-toggle-id="toggle-1" title="{{isOpen ? \'se.ycollapsible.action.collapse\' : \'se.ycollapsible.action.expand\' | translate}}" aria-expanded="{{isOpen}}" ng-click="toggleOpen()"><span class="sap-icon--navigation-right-arrow y-collapsible-icon" data-ng-class="{            \'y-collapsible-icon--collapse\':isOpen, \'y-collapsible-icon--expand\':!isOpen}"></span></a></div><div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen"><div ng-transclude></div></div>');e.put("yCollapsibleContainer.html",'<uib-accordion class="y-collapsible"><div uib-accordion-group class="yCollapsibleContainer__group y-collapsible__group" data-template-url="accordion-group.html" data-is-open="$ctrl.isExpanded" data-ng-class="$ctrl.getIconRelatedClassname()"><uib-accordion-heading class="y-collapsible__heading"><div class="yCollapsibleContainer__title y-collapsible__title" data-ng-transclude="collapsible-container-title"></div></uib-accordion-heading><div class="y-collapsible__content" data-ng-transclude="collapsible-container-content"></div></div></uib-accordion>');e.put("yDataTableTemplate.html",'<se-data-table [items]="$ctrl.items" [config]="$ctrl.config" [columns]="$ctrl.columns" (on-sort-column)="$ctrl.onSortColumn($event.$columnKey, $event.$columnSortMode)"></se-data-table>');e.put("yMessage.html",'<se-message [message-id]="$ctrl.messageId" [type]="$ctrl.type"><div se-message-title id="y-message-title"></div><div se-message-description id="y-message-description"></div></se-message><div ng-hide="true"><div ng-transclude="messageTitle" id="y-message-title-source"></div><div ng-transclude="messageDescription" id="y-message-description-source"></div></div>');e.put("moreTextTemplate.html",'<se-more-text [text]="$ctrl.text" [limit]="$ctrl.limit" [more-label-i18n-key]="$ctrl.moreLabelI18nKey" [less-label-i18n-key]="$ctrl.lessLabelI18nKey" [ellipsis]="$ctrl.ellipsis"></se-more-text>');e.put("defaultItemTemplate.html",'<span class="y-select-default-item" data-ng-bind-html="item.label | l10n | translate"></span>');e.put("uiSelectChoicesTemplate.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><div data-ng-if="$ctrl.resultsHeaderTemplate || $ctrl.resultsHeaderTemplateUrl"><div data-ng-if="$ctrl.resultsHeaderTemplate" data-compile-html="$ctrl.resultsHeaderTemplate"></div><div data-ng-if="$ctrl.resultsHeaderTemplateUrl" data-ng-include="$ctrl.resultsHeaderTemplateUrl"></div></div><li class="y-infinite-scrolling__listbox-header" data-ng-show="$ctrl.showResultHeader()">{{ $ctrl.resultsHeaderLabel | translate }}</li><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>');e.put("uiSelectPagedChoicesTemplate.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results ui-select-choices__infinite-scrolling"><li class="ui-select-choices-group" data-ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div data-ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" data-ng-bind="$group.name"></div><y-infinite-scrolling data-ng-if="$select.open" data-drop-down-class="" data-page-size="10" data-mask="$select.search" data-fetch-page="$ctrl.fetchStrategy.fetchPage" data-context="$ctrl"><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" data-ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><div data-ng-if="$ctrl.resultsHeaderTemplate" data-compile-html="$ctrl.resultsHeaderTemplate"></div><div data-ng-if="$ctrl.resultsHeaderTemplateUrl" data-ng-include="$ctrl.resultsHeaderTemplateUrl"></div><li class="y-infinite-scrolling__listbox-header" data-ng-show="$ctrl.showResultHeader()">{{ $ctrl.resultsHeaderLabel | translate }}</li><li role="option" data-ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" data-ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></y-infinite-scrolling></li></ul>');e.put("yMultiSelectTemplate.html",'<ui-select id="{{$ctrl.id}}-selector" multiple="multiple" sortable="true" theme="<%= theme %>" data-ng-model="$ctrl.model" data-ng-model-options="{ debounce: 500 }" style="width: 100%" data-ng-change="$ctrl.internalOnChange()" ng-disabled="$ctrl.isReadOnly" reset-search-input="$ctrl.resetSearchInput" on-remove="$ctrl.internalOnRemove($item, $model)" on-select="$ctrl.internalOnSelect($item, $model)" data-ng-init="$ctrl.internalInit($select)" data-ng-keyup="$ctrl.internalKeyup($event, $select.search)" class="se-generic-editor-dropdown" data-ng-class="{\'se-generic-editor-dropdown__paged\':$ctrl.requiresPaginatedStyling(), \'has-error\': $ctrl.hasError(), \'has-warning\': $ctrl.hasWarning()}"><ui-select-match class="se-generic-editor-dropdown__match se-generic-editor-multiple-dropdown__match" placeholder="{{$ctrl.placeholder || \'se.genericeditor.sedropdown.placeholder\' | translate}}"><item-printer id="{{$ctrl.id}}-selected" data-model="$item" data-template-url="$ctrl.itemTemplate" class="" data-ng-class="{\'se-generic-editor-dropdown__item-printer\':$ctrl.hasControls()}"></item-printer></ui-select-match><ui-select-choices id="{{$ctrl.id}}-list" {% filtering %} position="down"><div data-ng-include="$ctrl.itemTemplate"></div></ui-select-choices></ui-select>');e.put("ySelectTemplate.html",'<ui-select id="{{$ctrl.id}}-selector" data-ng-model="$ctrl.model" data-ng-model-options="{ debounce: 500 }" style="width: 100%" theme="<%= theme %>" search-enabled="$ctrl.searchEnabled" data-ng-change="$ctrl.internalOnChange()" reset-search-input="$ctrl.resetSearchInput" on-remove="$ctrl.internalOnRemove($item, $model)" on-select="$ctrl.internalOnSelect($item, $model)" data-ng-init="$ctrl.internalInit($select)" data-ng-keyup="$ctrl.internalKeyup($event, $select.search)" data-ng-class="{\'se-generic-editor-dropdown__paged\':$ctrl.requiresPaginatedStyling(), \'has-error\': $ctrl.hasError(), \'has-warning\': $ctrl.hasWarning() }" class="se-generic-editor-dropdown" ng-disabled="$ctrl.isReadOnly"><ui-select-match placeholder="{{$ctrl.placeholder || \'se.genericeditor.sedropdown.placeholder\' | translate}}" class="se-generic-editor-dropdown__match2"><span data-ng-if="$ctrl.hasControls()" class="input-group-addon glyphicon glyphicon-search ySESearchIcon__navigation"></span><item-printer id="{{$ctrl.id}}-selected" data-model="$select.selected" data-template-url="$ctrl.itemTemplate" class="y-select-item-printer" data-ng-class="{\'se-generic-editor-dropdown__item-printer\':$ctrl.hasControls()}"></item-printer><span data-ng-if="$ctrl.hasControls() || $ctrl.showRemoveButton" class="sap-icon--sys-cancel ySESearchIcon__navigation se-generic-editor-dropdown__remove-button" data-ng-click="$ctrl.clear($select, $event)"></span></ui-select-match><ui-select-choices id="{{$ctrl.id}}-list" {% filtering %} position="down" ui-disable-choice="$ctrl.disableChoice(item)" data-ng-click="$event.stopPropagation()"><div data-ng-include="$ctrl.itemTemplate"></div></ui-select-choices><ui-select-no-choice data-ng-if="$ctrl.noResultLabel" class="y-select-no-result-label">{{$ctrl.noResultLabel | translate}}</ui-select-no-choice></ui-select>');e.put("modalTemplate.html",'<div id="y-modal-dialog" class="fd-modal"><div class="fd-modal__content" data-ng-class="modalController._getModalType()"><div class="se-modal__header fd-modal__header" data-ng-class="{\'se-modal__header--no-title\': !modalController._modalManager.title}" data-ng-if="modalController._modalManager.title"><div class="se-nowrap-ellipsis se-modal__header-title fd-modal__title" id="smartedit-modal-title-{{ modalController._modalManager.title }}">{{ modalController._modalManager.title | translate }}&nbsp;{{ modalController._modalManager.titleSuffix | translate }}</div><button type="button" aria-label="close" class="se-modal-close fd-button--light fd-modal__close" data-ng-if="modalController._modalManager._showDismissButton()" data-ng-click="modalController._modalManager._handleDismissButton()"></button></div><div class="se-modal__body fd-modal__body" id="modalBody"><div data-ng-include="modalController.templateUrl"></div></div><div class="se-modal__footer fd-modal__footer" data-ng-if="modalController._modalManager._hasButtons()"><span data-ng-repeat="button in modalController._modalManager.getButtons()"><button id="{{ button.id }}" type="button" class="se-modal-button--footer fd-button" data-ng-disabled="button.disabled" data-ng-class="{                        \'fd-button--light\': button.style==\'default\',                         \'fd-button--emphasized\': button.style==\'primary\'}" data-ng-click="modalController._modalManager._buttonPressed(button)">{{ button.label | translate }}</button></span></div></div></div>');e.put("DropdownMenuComponent.html",'<fd-popover [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="placement || \'bottom-end\'" class="se-dropdown-more-menu"><fd-popover-control><div #toggleMenu><div *ngIf="!useProjectedAnchor; else projectedAnchor;" class="sap-icon--overflow se-dropdown-more-menu__toggle"></div><ng-template #projectedAnchor><ng-content></ng-content></ng-template></div></fd-popover-control><fd-popover-body><fd-menu><ul fd-menu-list class="se-dropdown-menu__list" [ngClass]="additionalClasses"><se-dropdown-menu-item *ngFor="let dropdownItem of clonedDropdownItems" [dropdownItem]="dropdownItem" [selectedItem]="selectedItem"></se-dropdown-menu-item></ul></fd-menu></fd-popover-body></fd-popover>');e.put("DropdownMenuItemComponent.html",'<li *ngIf="dropdownItem.condition(selectedItem)" class="se-dropdown-menu__item-wrapper" [ngClass]="dropdownItem.customCss"><ng-container *ngIf="dropdownItem.component"><ng-container *ngComponentOutlet="dropdownItem.component; injector: dropdownItemInjector"></ng-container></ng-container><span *ngIf="dropdownItem.templateUrl" [ngInclude]="dropdownItem.templateUrl" [compileHtmlNgController]="compileHtmlNgController"></span></li>');e.put("DropdownMenuItemDefaultComponent.html",'<a class="se-dropdown-item fd-menu__item" [ngClass]="data.dropdownItem.customCss" (click)="data.dropdownItem.callback(data.selectedItem, data.dropdownItem)"><span *ngIf="data.dropdownItem.icon" [ngClass]="data.dropdownItem.icon"></span> <span>{{ data.dropdownItem.key | translate }}</span></a>');e.put("yDropDownMenuTemplate.html",'<div class="y-dropdown-more-menu" data-uib-dropdown><div class="sap-icon--overflow y-dropdown-more-menu__toggle" data-uib-dropdown-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></div><ul class="se-y-dropdown-menu__list fd-menu__list" data-uib-dropdown-menu><li data-ng-repeat="dropdownItem in $ctrl.clonedDropdownItems" data-ng-if="dropdownItem.condition($ctrl.selectedItem)" data-ng-class="dropdownItem.customCss" class="se-dropdown-menu__item-wrapper"><span data-ng-include="dropdownItem.templateUrl"></span></li></ul></div>');e.put("GenericEditorFIeldMessagesComponent.html",'<div *ngIf="errors.length > 0"><span *ngFor="let error of errors" class="se-help-block--has-error help-block fd-form__message fd-form__message--error">{{ error | translate}}</span></div><div *ngIf="warnings.length > 0"><span *ngFor="let warning of warnings" class="se-help-block--has-warning help-block fd-form__message fd-form__message--warning">{{ warning | translate }}</span></div>');e.put("GenericEditorFieldComponent.html",'<div [attr.validation-id]="field.qualifier" class="ySEField"><div *ngIf="field.template"><div #widget></div></div><ng-container *ngIf="field.component"><ng-container *ngComponentOutlet="field.component; injector: widgetInjector"></ng-container></ng-container><se-generic-editor-field-messages [field]="field" [qualifier]="qualifier"></se-generic-editor-field-messages><div *ngIf="field.postfix" class="ySEText ySEFieldPostfix">{{ field.postfix | translate }}</div></div>');e.put("GenericEditorTabComponent.html",'<div class="se-generic-editor__row ySErow" *ngFor="let field of fields" [ngClass]="\'se-generic-editor__row--\' + field.qualifier"><label [id]="field.qualifier + \'-label\'" class="se-control-label" *ngIf="!field.hidePrefixLabel && field.i18nKey" [ngClass]="{ required: field.required }">{{ field.i18nKey | lowercase | translate }}</label><div class="ySEGenericEditorFieldStructure" [id]="field.qualifier" [attr.data-cms-field-qualifier]="field.qualifier" [attr.data-cms-structure-type]="field.cmsStructureType"><ng-template [formRenderer]="getForm(field.qualifier)"></ng-template></div></div>');e.put("LocalizedElementComponent.html",'<se-tabs *ngIf="tabs" class="multi-tabs-editor" [model]="form" [tabsList]="tabs" [numTabsDisplayed]="6"></se-tabs>');e.put("errorMessageTemplate.html",'<span data-ng-if="field.errors" data-ng-repeat="error in field.errors | filter:{language:qualifier}" id="validation-error-{{field.qualifier}}-{{qualifier}}-{{$index}}" class="se-help-block--has-error help-block fd-form__message fd-form__message--error">{{ error.message | translate }}</span>');e.put("yEditableListDefaultItemTemplate.html",'<div><span>{{ node.uid }}</span><se-dropdown-menu data-ng-if="$ctrl.editable" [dropdown-items]="$ctrl.getDropdownItems()" [selected-item]="this" class="pull-right se-tree-node__actions--more-menu"></se-dropdown-menu></div>');e.put("yEditableListTemplate.html",'<div data-ng-class="{ \'y-editable-list-disabled\': !$ctrl.editable }"><ytree remove-default-template="true" data-root-node-uid="$ctrl.rootId" data-node-template-url="$ctrl.itemTemplateUrl" data-node-actions="$ctrl.actions" data-drag-options="$ctrl.dragOptions" data-show-as-list="true"/></div>');e.put("ActionableSearchItemComponent.html",'<div *ngIf="search" class="se-actionable-search-item"><div class="se-actionable-search-item__name">{{ search }}</div><button type="button" class="fd-button--light se-actionable-search-item__action-btn" (click)="onButtonClick()">{{ getActionText() | translate }}</button></div>');e.put("DefaultItemPrinterComponent.html",'<span [attr.title]="((data.item.label || data.item.name) | seL10n | async) | translate" class="se-item-printer-text se-nowrap-ellipsis">{{ ((data.item.label || data.item.name) | seL10n | async) | translate }}</span>');e.put("ItemPrinterComponent.html",'<ng-container *ngComponentOutlet="component; injector: componentInjector"></ng-container>');e.put("ResultsHeaderComponent.html",'<div *ngIf="showResultsHeaderItem() || resultsHeaderLabel || actionableSearchItem" class="results-header"><div *ngIf="showResultsHeaderItem()"><ng-container *ngComponentOutlet="resultsHeaderComponent"></ng-container></div><se-actionable-search-item *ngIf="actionableSearchItem" [search]="search" [eventId]="actionableSearchItem.eventId" [actionText]="actionableSearchItem.actionText" (actionButtonClick)="onActionButtonClick()"></se-actionable-search-item><li class="fd-menu__list-header" *ngIf="displayResultsHeaderLabel">{{ resultsHeaderLabel | translate }}</li></div>');e.put("SearchInputComponent.html",'<div class="search"><input #searchInput type="search" class="search__input" [disabled]="isDisabled" [readOnly]="isReadOnly" [placeholder]="placeholder" [ngModel]="search" (ngModelChange)="onChange($event)" (keyup)="onKeyup($event)"/></div>');e.put("SelectListComponent.html",'<se-infinite-scrolling *ngIf="isPagedDropdown; else selectList" [pageSize]="infiniteScrollingPageSize" [mask]="search" [fetchPage]="fetchPage" [context]="selectComponentCtx" (itemsChange)="onInfiniteScrollItemsChange()"><ng-container *ngTemplateOutlet="selectList"></ng-container></se-infinite-scrolling><ng-template #selectList><ol [attr.id]="id +\'-list\'" fd-menu-list suListKeyboardControl [suListKeyboardControlDisabledPredicate]="keyboardControlDisabledPredicate" (suListKeyboardControlEnterKeydown)="onEnterKeydown($event)" [ngClass]="{ \'fd-menu__list--basic\': !isPagedDropdown }"><ng-container *ngFor="let item of items; trackBy: itemTrackBy"><li *ngIf="(excludeSelected && !isItemSelected(item)) || !excludeSelected" suListItemKeyboardControl class="se-select-list__item" [ngClass]="{\'is-selected\': (!excludeSelected && isItemSelected(item)), \'is-disabled\': isItemDisabled(item)}"><fd-option (click)="onOptionClick($event, item)" class="menu-option"><se-item-printer [item]="item" [isSelected]="false" [component]="itemComponent" [selectComponentCtx]="selectComponentCtx"></se-item-printer></fd-option></li></ng-container></ol></ng-template>');e.put("sliderPanelTemplate.html",'<div class="se-slider-panel-wrapper" data-ng-if="$ctrl.isShown"><div class="se-slider-panel-container slide-in"><div class="se-slider-panel__header" data-ng-show="$ctrl.sliderPanelConfiguration.modal"><span class="se-slider-panel__title" data-ng-if="$ctrl.sliderPanelConfiguration.modal.title">{{ $ctrl.sliderPanelConfiguration.modal.title | translate }}</span> <button type="button" class="se-slider-panel__close-btn fd-button--light fd-modal__close" aria-label="close" data-ng-if="$ctrl.sliderPanelConfiguration.modal.showDismissButton" data-ng-click="$ctrl.sliderPanelDismissAction()"></button></div><div class="se-slider-panel__body" data-ng-transclude></div><div class="se-slider-panel__footer" data-ng-if="($ctrl.sliderPanelConfiguration.modal.cancel || $ctrl.sliderPanelConfiguration.modal.save)"><button type="button" class="fd-button--light se-slider-panel__footer-btn se-slider-panel__footer-btn--cancel" data-ng-if="$ctrl.sliderPanelConfiguration.modal.cancel" data-ng-click="$ctrl.sliderPanelConfiguration.modal.cancel.onClick()">{{ $ctrl.sliderPanelConfiguration.modal.cancel.label | translate }}</button> <button type="button" class="fd-button--emphasized se-slider-panel__footer-btn se-slider-panel__footer-btn--save" data-ng-if="$ctrl.sliderPanelConfiguration.modal.save" data-ng-click="$ctrl.sliderPanelConfiguration.modal.save.onClick()" data-ng-disabled="$ctrl.isSaveDisabled()">{{ $ctrl.sliderPanelConfiguration.modal.save.label | translate }}</button></div></div></div>');e.put("yActionableSearchItemTemplate.html",'<div class="se-actionable-search-item" data-ng-if="$ctrl.getInputText()"><div class="se-actionable-search-item__name">{{ $ctrl.getInputText() }}</div><button type="button" class="fd-button--light se-actionable-search-item__create-btn" data-ng-show="$ctrl.showForm()" data-ng-click="$ctrl.buttonPressed()">{{ $ctrl.getActionText() | translate }}</button></div>');e.put("GenericEditorDropdownComponent.html",'<se-select *ngIf="dropdown.initialized" [id]="dropdown.qualifier" (click)="dropdown.onClick()" [placeholder]="field.placeholder" [(model)]="model[qualifier]" [onChange]="dropdown.triggerAction" [fetchStrategy]="dropdown.fetchStrategy" [(reset)]="dropdown.reset" [multiSelect]="dropdown.isMultiDropdown" [controls]="dropdown.isMultiDropdown" [showRemoveButton]="showRemoveButton" [isReadOnly]="!field.editable" [itemComponent]="itemComponent" [resultsHeaderComponent]="resultsHeaderComponent" [actionableSearchItem]="actionableSearchItem" (getApi)="dropdown.setSelectAPI($event)" (resetChange)="onResetChange($event)"></se-select>');e.put("BooleanComponent.html",'<div class="se-boolean fd-form__item fd-form__item--check"><span class="fd-toggle fd-toggle--xs fd-form__control"><label class="fd-form__label" for="{{qualifierId}}-checkbox"><input type="checkbox" id="{{qualifierId}}-checkbox" class="se-boolean__input" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="!widget.field.editable" [(ngModel)]="widget.model[widget.qualifier]"/> <span class="fd-toggle__switch" role="presentation"></span></label></span><p *ngIf="widget.field.labelText && !widget.model[widget.qualifier]" class="se-boolean__text">{{widget.field.labelText| translate}}</p></div>');e.put("DateTimePickerComponent.html",'<div #dateTimePicker *ngIf="isEditable" class="input-group se-date-field" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{            \'is-invalid\': widget.field.hasErrors,            \'is-warning\': widget.field.hasWarnings,            \'se-input--is-disabled\': !isEditable        }" [placeholder]="placeholderText | translate" [attr.name]="widget.field.qualifier"/> <span class="input-group-addon se-date-field--button" [ngClass]="{ \'se-date-field--button-has-error\': widget.field.hasErrors, \'se-date-field--button-has-warning\': widget.field.hasWarnings }"><span class="sap-icon--calendar se-date-field--button-icon"></span></span></div><div class="input-group date se-date-field" *ngIf="!isEditable" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{\'se-input--is-disabled\': !isEditable}" [(ngModel)]="widget.model[this.widget.qualifier]" dateFormatter formatType="short" [disabled]="true"/></div>');e.put("EditableDropdownComponent.html",'<se-generic-editor-dropdown [id]="data.id" [field]="data.field" [qualifier]="data.qualifier" [model]="data.model"></se-generic-editor-dropdown>');e.put("EmailComponent.html",'<input [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [max]="255" type="email" id="{{widget.field.qualifier}}-shortstring" class="fd-form-control"/>');e.put("FloatComponent.html",'<input pattern="^[-]?([0-9]*)(.[0-9]{1,5})?$" type="number" id="{{widget.field.qualifier}}-float" class="fd-form-control" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [step]="precision"/>');e.put("NumberComponent.html",'<input [min]="1" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" id="{{widget.field.qualifier}}-number" class="fd-form-control" type="number"/>');e.put("RichTextFieldComponent.html",'<textarea #textarea class="fd-form__control" [ngClass]="{\'has-error\': widget.field.hasErrors}" name="{{widget.field.qualifier}}-{{widget.qualifier}}" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" (change)="reassignUserCheck()"></textarea><div *ngIf="requiresUserCheck()"><div id="richTextWarningMessage" [hidden]="widget.field.isUserChecked"><span fd-status-label [status]="\'warning\'" [icon]="\'message-warning\'">{{\'se.editor.richtext.message.warning\' | translate}}</span></div><input id="richTextWarningCheckBox" type="checkbox" [(ngModel)]="widget.field.isUserChecked" (click)="checkboxOnClick($event.target)"/> <span [ngClass]="{\'warning-check-msg\': true, \'not-checked\': widget.editor.hasFrontEndValidationErrors && !widget.field.isUserChecked}">{{\'se.editor.richtext.check\' | translate}}</span></div>');e.put("seDropdownTemplate.html",'<y-select data-ng-if="$ctrl.dropdown.initialized" data-id="{{$ctrl.dropdown.qualifier}}" data-ng-click="$ctrl.dropdown.onClick()" data-placeholder="$ctrl.field.placeholder" data-ng-model="$ctrl.model[$ctrl.qualifier]" data-on-change="$ctrl.dropdown.triggerAction" data-fetch-strategy="$ctrl.dropdown.fetchStrategy" data-reset="$ctrl.dropdown.reset" data-multi-select="$ctrl.dropdown.isMultiDropdown" data-controls="$ctrl.dropdown.isMultiDropdown" data-show-remove-button="$ctrl.showRemoveButton" data-is-read-only="!$ctrl.field.editable" data-item-template="$ctrl.itemTemplateUrl" data-results-header-template-url="$ctrl.dropdown.resultsHeaderTemplateUrl" data-results-header-template="$ctrl.dropdown.resultsHeaderTemplate" data-get-api="$ctrl.dropdown.setYSelectAPI($api)"/>')}])})();var SeEntryModule=function(e){return function(t){window.__smartedit__.modules[e]=t;return t}};var extendStatics=function(e,t){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};return extendStatics(e,t)};function __extends(e,t){extendStatics(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o))e[o]=t[o]}return e};return __assign.apply(this,arguments)};function __decorate(e,t,n,i){var o=arguments.length,r=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,n):i,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)if(a=e[s])r=(o<3?a(r):o>3?a(t,n,r):a(t,n))||r;return o>3&&r&&Object.defineProperty(t,n,r),r}function __param(e,t){return function(n,i){t(n,i,e)}}function __metadata(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function fulfilled(e){try{step(i.next(e))}catch(e){o(e)}}function rejected(e){try{step(i["throw"](e))}catch(e){o(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,o,r,a;return a={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function verb(e){return function(t){return step([e,t])}}function step(a){if(i)throw new TypeError("Generator is already executing.");while(n)try{if(i=1,o&&(r=a[0]&2?o["return"]:a[0]?o["throw"]||((r=o["return"])&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;if(o=0,r)a=[a[0]&2,r.value];switch(a[0]){case 0:case 1:r=a;break;case 4:n.label++;return{value:a[1],done:false};case 5:n.label++;o=a[1];a=[0];continue;case 7:a=n.ops.pop();n.trys.pop();continue;default:if(!(r=n.trys,r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){n.label=a[1];break}if(a[0]===6&&n.label<r[1]){n.label=r[1];r=a;break}if(r&&n.label<r[2]){n.label=r[2];n.ops.push(a);break}if(r[2])n.ops.pop();n.trys.pop();continue}a=t.call(e,n)}catch(e){a=[6,e];o=0}finally{i=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}var E=function(){function DINameUtils(){}DINameUtils.prototype.buildComponentName=function(e){return this.buildName(e).replace(/Component$/,"").replace(/Directive$/,"")};DINameUtils.prototype.buildFilterName=function(e){return this.buildName(e).replace(/Filter$/,"")};DINameUtils.prototype.buildServiceName=function(e){return this.buildName(e)};DINameUtils.prototype.buildModuleName=function(e){return this.buildName(e).replace(/Module$/,"")};DINameUtils.prototype.buildName=function(e){var t=o.annotationService.getOriginalConstructor(e);var n=o.functionsUtils.getConstructorName(t);return this.convertNameCasing(n)};DINameUtils.prototype.convertNameCasing=function(e){var t=e.substring(0,1).toLowerCase()+e.substring(1);return t};DINameUtils.prototype.makeValueProvider=function(e){var t=Object.keys(e)[0];var n=t.replace(/^DEFAULT_/,"");return{provide:n,useValue:e[t]}};return DINameUtils}();var P=new E;var T={};var SeModule=function(e){return function(t){e=e;var n=P.buildName(t);var i=getAngular();var o=[];if(e.imports){e.imports.forEach((function(e,t){var throwUnAnnotatedModuleError=function(e){var t=P.buildName(e);throw new Error(t+" module was imported into "+n+" module but doesn't seem to have been @SeModule annotated")};var r;if(typeof e==="string"){r=e}else if(typeof e==="function"){r=e.moduleName;if(!r){throwUnAnnotatedModuleError(e)}}else if(e&&e.seModule){if(!e.seModule.moduleName){throwUnAnnotatedModuleError(e.seModule)}var a=P.buildName(e.seModule);var s=i.module(a);r=s.name;if(e.providers){addArrayOfProvidersToModule(s,e.providers)}}else{throw new Error("the import statement "+e+" at index "+t+" added to "+n+" is neither a legacy string nor an SeModuleConstructor")}if(o.indexOf(r)>-1){throw new Error("module "+r+" is imported more than once into "+n)}o.push(r)}))}var r=i.module(n,o);if(e.providers){addArrayOfProvidersToModule(r,e.providers)}if(e.declarations){e.declarations.forEach((function(e){if(e.filterName){addFilterToModule(r,e)}else{addFullComponentGraphToModule(r,e)}}))}if(e.config){r.config(e.config)}if(e.initialize){r.run(e.initialize)}t.moduleName=r.name;return t}};function addArrayOfProvidersToModule(e,t){t.forEach((function(t,n){var i=e.name;if(!t){throw new Error("At the time a provider at index "+n+" was added to module "+i+",\n\t\t\t\tit was undefined, this is probably due to the path in your typescript import statement\n\t\t\t\treferencing a barrel file of an alias defined in a higher layer, consider using a relative path instead.")}if(t.provide&&!t.useValue&&!t.useClass&&!t.useFactory){throw new Error("At the time a provider named "+t.provide+" was added to module "+i+"\n\t\t        did not provide an instance of SeValueProvider, SeClassProvider, or FactoryProvider.")}if(t.multi){t=t;addMultiProviderToModule(e,t)}else{addProviderToModule(e,t)}}))}function addProviderToModule(e,t){if(t.useValue){t=t;e.constant(t.provide,t.useValue)}else if(t.useClass){t=t;e.service(t.provide,t.useClass)}else if(t.useFactory){t=t;var n=Array.isArray(t.useFactory)||t.useFactory.$inject;if(n&&t.deps){throw Error("At the time a provider "+t.provide+" uses ngInject annotations and \n\t\t\tSeFactoryProvider.deps at the same time. Please use one or the other.")}var i=t.deps?t.deps.map((function(e){return typeof e==="string"?e:P.buildServiceName(e)})):[];e.factory(t.provide,n?t.useFactory:__spreadArrays(i,[t.useFactory]))}else{t=t;var o=P.buildServiceName(t);e.service(o,t)}}function addMultiProviderToModule(e,t){var n=e.name+t.provide;var i=T[n];if(!i){i=[]}var o=n+a.uniqueId();i.push(o);T[n]=i;var useFactory=function(){return[].slice.call(arguments)};addProviderToModule(e,__assign(__assign({},t),{provide:o}));addProviderToModule(e,{provide:t.provide,useFactory:useFactory,deps:i})}function addFilterToModule(e,t){e.filter(t.filterName,t.transform)}function addFullComponentGraphToModule(e,t){var n=t.definition;if(!n){var i=o.functionsUtils.getConstructorName(t);throw new Error(i+" component was imported into "+e.name+" module but doesn't seem to have been @SeComponent or @SeDirective annotated")}if(t.providers){addArrayOfProvidersToModule(e,t.providers)}var r=t.componentName;var a=t.directiveName;if(r){e.component(r,n);delete t.definition;var s=t.entryComponents;if(s){s.forEach((function(t){addFullComponentGraphToModule(e,t)}))}delete t.entryComponents}else if(a){e.directive(a,(function(){return n}))}}SeModule.getAngular=function(){return r};function getAngular(){return SeModule.getAngular()}var A=function(){function DIBridgeModule(){}DIBridgeModule=__decorate([SeModule({})],DIBridgeModule);return DIBridgeModule}();var parseDirectiveBindings=function(e){var t;if(e&&e.length){t=e.reduce((function(e,t){var n=t.replace(/\s/g,"").split(":");var i=n[n.length-1];if(!i.startsWith("@")&&!i.startsWith("&")&&!i.startsWith("=")){i="<"+i}e[n[0]]=i;return e}),{})}return t};var parseDirectiveName=function(e,t){var n=/^\[([-\w]+)\]$/;var i=/^([-\w]+)$/;if(!e){return{name:P.buildComponentName(t),restrict:"E"}}else if(e.startsWith(".")){return{name:a.camelCase(e.substring(1)),restrict:"C"}}else if(n.test(e)){return{name:a.camelCase(n.exec(e)[1]),restrict:"A"}}else if(i.test(e)){return{name:a.camelCase(i.exec(e)[1]),restrict:"E"}}else{var r=o.functionsUtils.getConstructorName(t);throw new Error("SeDirective "+r+" declared an unexpected selector ("+e+"). \n\t\tMake sure to use an element name or class (.class) or attribute ([attribute])")}};var SeDirective=function(e){return function(t){e=e;var n={controller:t,scope:typeof e.scope==="undefined"?{}:e.scope,replace:e.replace,transclude:e.transclude,template:e.template,templateUrl:e.templateUrl,controllerAs:e.controllerAs,bindToController:parseDirectiveBindings(e.inputs)||true,require:e.require};var i=parseDirectiveName(e.selector,t);n.restrict=i.restrict;t.directiveName=i.name;t.definition=n;t.providers=e.providers;return t}};var D=function(){function DIBridgeUtils(){}DIBridgeUtils.prototype.downgradeComponent=function(e,t){if(!o.functionsUtils.isUnitTestMode()){var n=parseDirectiveName(e.selector,t);this._getBridgeModule().directive(n.name,i.downgradeComponent({component:t}))}};DIBridgeUtils.prototype.downgradeService=function(e,t,n){if(!o.functionsUtils.isUnitTestMode()){window.__smartedit__.downgradedService[e]=t;if(t){var r=window.__smartedit__.getDecoratorPayload("Injectable",t);if(r&&r.providedIn!=="root"){throw new Error("service "+e+" is meant to be downgraded but is not provided in root: make sure to mark it with @Injectable({providedIn: 'root'})")}}this._getBridgeModule().factory(e,i.downgradeInjectable(n?n:t))}};DIBridgeUtils.prototype.upgradeProvider=function(e,t){return{provide:t?t:e,useFactory:function(t){return t.get(e)},deps:["$injector"]}};DIBridgeUtils.prototype._getBridgeModule=function(){return r.module(A.moduleName)};return DIBridgeUtils}();var O=new D;var R={};var SeDowngradeService=function(e){return function(t){O.downgradeService(P.buildServiceName(t),t,e);return t}};var SeDowngradeComponent=function(){return function(e){if(!o.functionsUtils.isUnitTestMode()){var t=window.__smartedit__.getDecoratorPayload("Component",e);if(!t){var n=o.functionsUtils.getConstructorName(e);throw new Error("@SeDowngradeComponent "+n+" should only be used on a @Component decorated class")}O.downgradeComponent(t,e)}return e}};var M=function(){function NodeUtils(){}NodeUtils.prototype.collectSmarteditAttributesByElementUuid=function(e){var t=document.querySelector(".smartEditComponent[data-smartedit-element-uuid='"+e+"']");if(!t){throw new Error("could not find element with uuid "+e)}return Array.from(t.attributes).reduce((function(e,t){var n=t.name;if(n.indexOf("smartedit-")>-1){n=a.camelCase(n.replace("data-",""));e[n]=t.value}return e}),{})};NodeUtils.prototype.hasLegacyAngularJSBootsrap=function(){return!!document.querySelector("[ng-app], [data-ng-app], [custom-app]")};NodeUtils.prototype.compareHTMLElementsPosition=function(e){return function(t,n){if(e){t=t[e];n=n[e]}if(t===n){return 0}if(!t.compareDocumentPosition){return t.sourceIndex-n.sourceIndex}if(t.compareDocumentPosition(n)&2){return 1}return-1}};NodeUtils.prototype.isPointOverElement=function(e,t){var n=t.getBoundingClientRect();return e.x>=n.left&&e.x<=n.right&&e.y>=n.top&&e.y<=n.bottom};NodeUtils.prototype.areIntersecting=function(e,t){return!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)};NodeUtils.prototype.injectJS=function(){function getInjector(){return c}return{getInjector:getInjector,execute:function(e){var t=this;var n=e.srcs;var i=e.index;var o=e.callback;if(!n.length){o();return}if(i===undefined){i=0}if(n[i]!==undefined){this.getInjector()(n[i],(function(){if(i+1<n.length){t.execute({srcs:n,index:i+1,callback:o})}else if(typeof o==="function"){o()}}))}}}};return NodeUtils}();var x=new M;var N=[];var k=function(){function AbstractDecorator(){var e=this;N.push(this.smarteditElementuuid);var t=this.ngOnDestroy.bind(this);this.ngOnDestroy=function(){t();N.splice(N.indexOf(e.smarteditElementuuid),1)}}AbstractDecorator.getScopes=function(){return N};Object.defineProperty(AbstractDecorator.prototype,"componentAttributes",{get:function(){if(!this._cachedCcomponentAttributes){try{this._cachedCcomponentAttributes=x.collectSmarteditAttributesByElementUuid(this.smarteditElementuuid)}catch(e){console.log("AbstratcDecorator failed to find original element with uuid "+this.smarteditElementuuid)}}return this._cachedCcomponentAttributes},enumerable:false,configurable:true});AbstractDecorator.prototype.ngOnDestroy=function(){};__decorate([s.Input(),__metadata("design:type",Boolean)],AbstractDecorator.prototype,"active",void 0);__decorate([s.Input("data-smartedit-element-uuid"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditElementuuid",void 0);__decorate([s.Input("data-smartedit-component-id"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditComponentId",void 0);__decorate([s.Input("data-smartedit-component-uuid"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditComponentUuid",void 0);__decorate([s.Input("data-smartedit-component-type"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditComponentType",void 0);__decorate([s.Input("data-smartedit-catalog-version-uuid"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditCatalogVersionUuid",void 0);__decorate([s.Input("data-smartedit-container-id"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditContainerId",void 0);__decorate([s.Input("data-smartedit-container-uuid"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditContainerUuid",void 0);__decorate([s.Input("data-smartedit-container-type"),__metadata("design:type",String)],AbstractDecorator.prototype,"smarteditContainerType",void 0);return AbstractDecorator}();var SeCustomComponent=function(){return function(e){var t=o.functionsUtils.getConstructorName(e);var n=window.__smartedit__.getDecoratorPayload("Component",e);if(!n){throw new Error("@SeCustomComponent "+t+" should only be used on a @Component decorated class")}var i=parseComponentSelector(n.selector,e);e.selector=i;F.unshift(e);return e}};var parseComponentSelector=function(e,t){if(!e){return window.smarteditLodash.kebabCase(P.buildComponentName(t))}else{return e}};var F=[];function registerCustomComponents(e){F.forEach((function(t){if(!customElements.get(t.selector)){var n=l.createCustomElement(t,{injector:e});customElements.define(t.selector,n)}}))}var SeDecorator=function(){return function(e){var t=o.functionsUtils.getConstructorName(e);var n=window.__smartedit__.getDecoratorPayload("Component",e);if(!n){throw new Error("@SeDecorator "+t+" should only be used on a @Component decorated class")}if(n.template&&n.template.indexOf("<ng-content")===-1){throw new Error("@SeDecorator "+t+" should contain <ng-content> node in its template")}if(!(e.prototype instanceof k)){throw new Error("@SeDecorator "+t+" should extend AbstractDecorator")}return SeCustomComponent()(e)}};var SeFilter=function(){return function(e){e.filterName=P.buildFilterName(e);return e}};var SeInjectable=function(){return function(e){return e}};var SeComponent=function(e){return function(t){e=e;var n=parseDirectiveName(e.selector,t);var i={controller:t,controllerAs:"$ctrl",transclude:e.transclude||true,bindings:parseDirectiveBindings(e.inputs),require:e.require};if(e.templateUrl){i.templateUrl=e.templateUrl}else if(e.template){i.template=e.template}if(n.restrict!=="E"){var r=o.functionsUtils.getConstructorName(t);throw new Error("component "+r+" declared a selector on class or attribute. version 1808 of Smartedit DI limits SeComponents to element selectors")}t.componentName=n.name;t.definition=i;t.entryComponents=e.entryComponents;t.providers=e.providers;return t}};var z=function(){function TruncatedText(e,t,n,i){if(e===void 0){e=""}if(t===void 0){t=""}if(i===void 0){i=""}this.text=e;this.truncatedText=t;this.truncated=n;this.ellipsis=i;this.text=this.text||"";this.truncatedText=this.truncatedText||""}TruncatedText.prototype.getUntruncatedText=function(){return this.text};TruncatedText.prototype.getTruncatedText=function(){return this.truncatedText+this.ellipsis};TruncatedText.prototype.isTruncated=function(){return this.truncated};return TruncatedText}();window.__smartedit__=window.__smartedit__||{};function getDecoratorKey(e,t){return e+"-"+t+":definition"}a.merge(window.__smartedit__,{modules:{},pushedModules:[],smarteditDecoratorPayloads:{},addDecoratorPayload:function(e,t,n){var i=getDecoratorKey(e,t);if(window.__smartedit__.smarteditDecoratorPayloads[i]){throw new Error("Duplicate class/decorator pair")}window.__smartedit__.smarteditDecoratorPayloads[i]=n},getDecoratorPayload:function(e,t){var n=o.functionsUtils.getConstructorName(o.annotationService.getOriginalConstructor(t));return window.__smartedit__.smarteditDecoratorPayloads[getDecoratorKey(e,n)]},getComponentDecoratorPayload:function(e){return window.__smartedit__.smarteditDecoratorPayloads[getDecoratorKey("Component",e)]},downgradedService:{}});window.pushModules=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}window.__smartedit__.pushedModules=window.__smartedit__.pushedModules.concat(e)};var L=function(e){__extends(WindowUtils,e);WindowUtils.$inject=["ngZone"];function WindowUtils(n){var i=e.call(this,n)||this;i.getGatewayTargetFrame=function(){if(i.isIframe()){return i.getWindow().parent}else if(i.getWindow().document.getElementById(t.SMARTEDIT_IFRAME_ID)){return i.getWindow().document.getElementById(t.SMARTEDIT_IFRAME_ID).contentWindow}return null};return i}t=WindowUtils;WindowUtils.prototype.getSmarteditIframe=function(){return document.querySelector("iframe#"+t.SMARTEDIT_IFRAME_ID)};WindowUtils.prototype.getIframe=function(){return document.querySelector("iframe")};WindowUtils.prototype.setTrustedIframeDomain=function(e){this.trustedIframeDomain=o.urlUtils.getOrigin(e)};WindowUtils.prototype.setTrustedIframeDomain.$inject=["trustedIframeSource"];WindowUtils.prototype.getTrustedIframeDomain=function(){return this.trustedIframeDomain};WindowUtils.prototype.isCrossOrigin=function(e){return o.urlUtils.getOrigin()!==o.urlUtils.getOrigin(e)};WindowUtils.prototype.isCrossOrigin.$inject=["location"];var t;WindowUtils.SMARTEDIT_IFRAME_ID="ySmartEditFrame";WindowUtils=t=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[s.NgZone])],WindowUtils);return WindowUtils}(o.WindowUtils);var V=new L;window.__smartedit__.addDecoratorPayload("Injectable","ModuleUtils",{providedIn:"root"});var $=function(e){__extends(ModuleUtils,e);ModuleUtils.$inject=["logService"];function ModuleUtils(t){var n=e.call(this)||this;n.logService=t;return n}ModuleUtils.prototype.getNgModule=function(e){if(window.__smartedit__.modules){var t=Object.keys(window.__smartedit__.modules).find((function(t){return t.toLowerCase().endsWith(e.toLowerCase())||t.toLowerCase().endsWith(e.toLowerCase()+"module")}));if(!t){return null}return window.__smartedit__.modules[t]}return null};ModuleUtils.prototype.getNgModule.$inject=["appName"];ModuleUtils.prototype.addModuleToAngularJSApp=function(e,t){try{r.module(t);r.module(e).requires.push(t)}catch(n){this.logService.warn("Failed to load legacy AngularJS module "+t+" into "+e+"; SmartEdit functionality may be compromised.")}};ModuleUtils.prototype.addModuleToAngularJSApp.$inject=["legacyAngularModuleName","app"];ModuleUtils=__decorate([s.Injectable({providedIn:"root"}),__metadata("design:paramtypes",[o.LogService])],ModuleUtils);return ModuleUtils}(o.ModuleUtils);var U=new $(new o.LogService);var j=function(e){__extends(StringUtils,e);function StringUtils(){return e!==null&&e.apply(this,arguments)||this}StringUtils.prototype.sanitizeHTML=function(e){if(B.isBlank(e)){return e}return e.replace(/(\r\n|\n|\r)/gm,"").replace(/>\s+</g,"><").replace(/<\/br\>/g,"")};StringUtils.prototype.generateIdentifier=function(){var e=(new Date).getTime();if(window.performance&&typeof window.performance.now==="function"){e+=window.performance.now()}var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+Math.random()*16)%16|0;e=Math.floor(e/16);return(t==="x"?n:n&3|8).toString(16)}));return t};StringUtils.prototype.getEncodedString=function(e){return this.encode(e)};StringUtils.prototype.trim=function(e){return e.trim()};StringUtils.prototype.escapeHtml=function(e){if(typeof e==="string"){return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}return e};StringUtils.prototype.resourceLocationToRegex=function(e){return new RegExp(e.replace(/\/:[^\/]*/g,"/.*"))};return StringUtils}(o.StringUtils);var B=new j;var H=function(){function ApiUtils(){}ApiUtils.prototype.getDataFromResponse=function(e){var t=Object.keys(e).filter((function(t){return e[t]instanceof Array}))[0];return e[t]};ApiUtils.prototype.getKeyHoldingDataFromResponse=function(e){var t=Object.keys(e).filter((function(t){return e[t]instanceof Array}))[0];return t};return ApiUtils}();var G=new H;var W="domain";var q="smarteditloader-component";var K="smarteditcontainer-component";var Y="smartedit-component";var X="data-smartedit-element-uuid";var Z="data-smartedit-component-id";var Q="data-smartedit-component-type";var J="ng";var ee="**";var te=1e3;var ne="CURRENT_CONTEXT_CATALOG";var ie="CURRENT_CONTEXT_CATALOG_VERSION";var oe="CURRENT_CONTEXT_SITE_ID";var re="CURRENT_PAGE_CONTEXT_CATALOG";var ae="CURRENT_PAGE_CONTEXT_CATALOG_VERSION";var se="CURRENT_PAGE_CONTEXT_SITE_ID";var ce="_SHOW_SLOT_MENU";var le="HIDE_SLOT_MENU";var de="OVERLAY_DISABLED";var pe="en_US";var ue="CLOSE_CTX_MENU";var me="CTX_MENU_DROPDOWN_IS_OPEN";(function(e){e["ADD_OPERATION"]="addedNodes";e["REMOVE_OPERATION"]="removedNodes"})(t.MUTATION_CHILD_TYPES||(t.MUTATION_CHILD_TYPES={}));var ge={CHILD_LIST:{NAME:"childList",ADD_OPERATION:t.MUTATION_CHILD_TYPES.ADD_OPERATION,REMOVE_OPERATION:t.MUTATION_CHILD_TYPES.REMOVE_OPERATION},ATTRIBUTES:{NAME:"attributes"}};var he="/permissionswebservices/v1/permissions/catalogs/search";var ve={BACKGROUND_TASKS:"Background Tasks",INTERACTIVE:"Interactive",NON_INTERACTIVE:"Non-Interactive",BATCH_OPERATIONS:"Batch Operations",TOOLING:"Tooling",CMS:"CMS"};var fe="/smarteditwebservices/v1/i18n/translations";var _e="/authorizationserver/oauth/whoami";var ye="smartedit";var Ce="/samlsinglesignon/saml";var Se="/smartedit/authenticate";var be="/samlsinglesignon/saml/logout";var Ie="/previewwebservices/v1/preview";var we=/\/cmssmarteditwebservices|\/cmswebservices/;var Ee=/^(.*)\/smartedit/;var Pe="smartedit";var Te="/smartedit/configuration";var Ae="/smartedit/settings";var De="EVENT_NOTIFICATION_CHANGED";(function(e){e["Ascending"]="asc";e["Descending"]="desc"})(t.SortDirections||(t.SortDirections={}));var Oe="REFRESH_CONTEXTUAL_MENU_ITEMS_EVENT";var Re="previousUsername";var Me={topLogoURL:"static-resources/images/SAP_R_grad.svg",bottomLogoURL:"static-resources/images/best-run-sap-logo.svg"};var xe="EVENT_PERSPECTIVE_CHANGED";var Ne="EVENT_PERSPECTIVE_UNLOADING";var ke="EVENT_PERSPECTIVE_REFRESHED";var Fe="EVENT_PERSPECTIVE_ADDED";var ze="EVENT_PERSPECTIVE_UPDATED";var Le="EVENT_STRICT_PREVIEW_MODE_REQUESTED";var Ve="perspectiveToolbar.perspectiveSelectorTemplate";var $e="EVENT_SMARTEDIT_COMPONENT_UPDATED";var Ue="smarteditoverlay";var je="EVENT_OUTER_FRAME_CLICKED";var Be="data-smartedit-catalog-version-uuid";var He="smartEditComponent";var Ge="data-smartedit-container-id";var We={PROCESS:"processComponent",REMOVE:"removeComponent",KEEP_VISIBLE:"keepComponentVisible"};var qe={PROCESS_COMPONENTS:"contractChangeListenerProcessComponents",RESTART_PROCESS:"contractChangeListenerRestartProcess"};var Ke="overlayRerendered";var Ye="data-smartedit-";var Xe="smartEditComponentProcessStatus";var Ze="data-smartedit-component-uuid";var Qe="smartEditComponentX";var Je="ContentSlot";var et="data-smartedit-container-type";var tt="/cmswebservices/v1/sites/:siteUID/languages";var nt="/smarteditwebservices/v1/i18n/languages";var it="genericEditorLoadedEvent";var ot="UnrelatedValidationMessagesEvent";var rt={VALIDATION_ERROR:"ValidationError",WARNING:"Warning"};var at="/cmswebservices/v1/enums";var st="DROPDOWN_IMPLEMENTATION_SUFFIX";var ct="LinkedDropdown";var lt="ClickDropdown";var dt="/cmswebservices/v1/sites";var pt={ANGULAR_FORMAT:"short",MOMENT_FORMAT:"M/D/YY h:mm A",MOMENT_ISO:"YYYY-MM-DDTHH:mm:00ZZ",ISO:"yyyy-MM-ddTHH:mm:00Z",ANGULAR_SHORT:"M/d/yy h:mm a"};var ut={LEFT:"left",RIGHT:"right"};var mt="/cmswebservices/v1/types";var gt="/storefront";var ht="/cmssmarteditwebservices/v1/sites/:siteUID/products/:productUID";var vt="/cmssmarteditwebservices/v1/productcatalogs/:catalogId/versions/:catalogVersion/products";var ft="HIDE_TOOLBAR_ITEM_CONTEXT";var _t="SHOW_TOOLBAR_ITEM_CONTEXT";var yt={DRAG_DROP_CROSS_ORIGIN_START:"DRAG_DROP_CROSS_ORIGIN_START",DRAG_DROP_START:"EVENT_DRAG_DROP_START",DRAG_DROP_END:"EVENT_DRAG_DROP_END",TRACK_MOUSE_POSITION:"EVENT_TRACK_MOUSE_POSITION",DROP_ELEMENT:"EVENT_DROP_ELEMENT"};var Ct="se.none";var St="se.all";var bt=100;var It=70;var wt="smartedit-element-hovered";var Et="ySECmsScrollArea";var Pt="ySmartEditFrameDragArea";var Tt={START:"START",END:"END"};var At="#js_iFrameWrapper";var Dt=1e4;var Ot="EVENT_CONTENT_CATALOG_UPDATE";var Rt=[];var Mt=[];var xt="/cmswebservices/v1/catalogs/"+ne+"/versions/"+ie+"/media";var Nt="/cmswebservices/v1/media";var kt="experience";var Ft=function(){function DateUtils(){}DateUtils.prototype.formatDateAsUtc=function(e){return d(e).utc().format(pt.MOMENT_ISO)};return DateUtils}();var zt=new Ft;var Lt=function(){DiscardablePromiseUtils.$inject=["logService"];function DiscardablePromiseUtils(e){this.logService=e;this._map={}}DiscardablePromiseUtils.prototype.apply=function(e,t,n,i){if(!this._map[e]){this._map[e]={promise:t,successCallback:n,failureCallback:i}}else{this.logService.debug("competing promise for key "+e);delete this._map[e].discardableHolder.successCallback;delete this._map[e].discardableHolder.failureCallback;this._map[e].promise=t}this._map[e].discardableHolder={successCallback:this._map[e].successCallback,failureCallback:this._map[e].failureCallback};var o=this;var r=this._map[e].promise;r.then(function(t){if(this.successCallback){delete o._map[e];this.successCallback.apply(undefined,arguments)}else{o.logService.debug("aborted successCallback for promise identified by "+e)}}.bind(this._map[e].discardableHolder),function(t){if(this.failureCallback){delete o._map[e];this.failureCallback.apply(undefined,arguments)}else{o.logService.debug("aborted failureCallback for promise identified by "+e)}}.bind(this._map[e].discardableHolder))};DiscardablePromiseUtils.prototype.apply.$inject=["key","promise","successCallback","failureCallback"];DiscardablePromiseUtils.prototype.clear=function(e){if(this.exists(e)){delete this._map[e].discardableHolder.successCallback;delete this._map[e].discardableHolder.failureCallback}};DiscardablePromiseUtils.prototype.clear.$inject=["key"];DiscardablePromiseUtils.prototype.exists=function(e){return this._map[e]?true:false};DiscardablePromiseUtils.prototype.exists.$inject=["key"];DiscardablePromiseUtils=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService])],DiscardablePromiseUtils);return DiscardablePromiseUtils}();(function(e){var t=function(){function ParseError(e){this.value=e}return ParseError}();e.ParseError=t})(t.Errors||(t.Errors={}));var Vt=function(){function ObjectUtils(){var e=this;this.isObjectEmptyDeep=function(e){if(a.isObject(e)){for(var t in e){if(e.hasOwnProperty(t)){if(!a.isEmpty(e[t])){return false}}}return true}return a.isString(e)?a.isEmpty(e):a.isNil(e)};this.resetObject=function(t,n){if(!t){t=e.copy(n)}else{for(var i in t){if(t.hasOwnProperty(i)){delete t[i]}}a.extend(t,e.copy(n))}return t};this.deepIterateOverObjectWith=function(t,n){return a.reduce(t,(function(t,i,o){if(a.isPlainObject(i)){t[o]=e.deepIterateOverObjectWith(i,n)}else{t[o]=n(i)}return t}),{})};this.deepObjectPropertyDiff=function(t,n){function CHANGED_PROPERTY(){}function NON_CHANGED_PROPERTY(){}var i=a.mergeWith(a.cloneDeep(t),n,(function(e,t){if(!a.isPlainObject(e)){return!a.isEqual(e,t)?CHANGED_PROPERTY:NON_CHANGED_PROPERTY}return undefined}));var o=e.deepIterateOverObjectWith(i,(function(e){if(e!==CHANGED_PROPERTY&&e!==NON_CHANGED_PROPERTY){return CHANGED_PROPERTY}else{return e}}));return e.deepIterateOverObjectWith(o,(function(e){return e===CHANGED_PROPERTY?true:false}))};this.readObjectStructure=function(t,n){if(n===void 0){n=0}if(n>25){return e.getClassName(t)}if(t===undefined||t===null||t.then){return t}if(typeof t==="function"){return"FUNCTION"}else if(typeof t==="number"){return"NUMBER"}else if(typeof t==="string"){return"STRING"}else if(typeof t==="boolean"){return"BOOLEAN"}else if(a.isElement(t)){return"ELEMENT"}else if(t.hasOwnProperty&&t.hasOwnProperty("length")){if(t.forEach){var i=[];t.forEach((function(t){n++;i.push(e.readObjectStructure(t,n))}));return i}else{return"JQUERY"}}else if(t.constructor&&t.constructor.name&&t.constructor.name!=="Object"){return t.constructor.name}else{var o={};Object.keys(t).forEach((function(i){if(!i.startsWith("$")){n++;o[i]=e.readObjectStructure(t[i],n)}}));return o}}}ObjectUtils.prototype.copy=function(e){return JSON.parse(JSON.stringify(e))};ObjectUtils.prototype.merge=function(e,t){return Object.assign(e,t)};ObjectUtils.prototype.convertToArray=function(e){var t=[];for(var n in e){if(!n.startsWith("$")&&!n.startsWith("toJSON")){t.push({key:n,value:e[n]})}}return t};ObjectUtils.prototype.uniqueArray=function(e,t){var n=new Set(e);t.forEach((function(t){if(!n.has(t)){e.push(t)}}));return e};ObjectUtils.prototype.isFunction=function(e){return typeof e==="function"};ObjectUtils.prototype.isObject=function(e){var t={boolean:false,function:true,object:true,number:false,string:false,undefined:false};return!!(e&&t[typeof e])};ObjectUtils.prototype.isTypedMap=function(e){return e&&this.isObject(e)&&e.constructor===Object};ObjectUtils.prototype.sortBy=function(e,t,n){var i=this;if(n===void 0){n=false}var o=__spreadArrays(e);var r=n?-1:1;o.sort((function(e,n){var o=i.isTypedMap(e)?e[t]:e;var a=i.isTypedMap(n)?n[t]:n;var s=String(o).localeCompare(String(a),undefined,{numeric:true,sensitivity:"base"});return s*r}));return o};ObjectUtils.prototype.getClassName=function(e){return e&&e.constructor&&e.constructor.name&&e.constructor.name!=="Object"?e.constructor.name:null};return ObjectUtils}();var $t=new Vt;var Ut=function(){function ScriptUtils(){}ScriptUtils.prototype.injectJS=function(){function getInjector(){return c}return{getInjector:getInjector,execute:function(e){var t=this;var n=e.srcs;var i=e.index;var o=e.callback;if(!n.length){o();return}if(i===undefined){i=0}if(n[i]!==undefined){this.getInjector()(n[i],(function(){if(i+1<n.length){t.execute({srcs:n,index:i+1,callback:o})}else if(typeof o==="function"){o()}}))}}}};return ScriptUtils}();var jt=new Ut;var Bt=function(){function FunctionsModule(){}FunctionsModule=__decorate([SeModule({providers:[o.BooleanUtils,o.CloneableUtils,o.UrlUtils,o.CryptographicUtils,o.FunctionsUtils,o.LogService,$,M,o.PromiseUtils,j,Lt,{provide:"ParseError",useFactory:function(){return t.Errors.ParseError}},{provide:"getAbsoluteURL",useFactory:function(){return o.urlUtils.getAbsoluteURL}},{provide:"getOrigin",useFactory:function(){return o.urlUtils.getOrigin}},{provide:"isBlank",useFactory:function(){return B.isBlank}},{provide:"extend",useFactory:function(){return function(e,t){if(!t){t=function(){return}}t.prototype=Object.create(e.prototype);return t}}},{provide:"customTimeout",useFactory:function(){return function(e,t){setTimeout((function(){e()}),t)}}},{provide:"copy",useFactory:function(){return $t.copy}},{provide:"merge",useFactory:function(){return $t.merge}},{provide:"getQueryString",useFactory:function(){return o.urlUtils.getQueryString}},{provide:"getURI",useFactory:function(){return o.urlUtils.getURI}},{provide:"parseQuery",useFactory:function(){return o.urlUtils.parseQuery}},{provide:"trim",useFactory:function(){return B.trim}},{provide:"convertToArray",useFactory:function(){return $t.convertToArray}},{provide:"injectJS",useFactory:function(){return jt.injectJS()}},{provide:"uniqueArray",useFactory:function(){return $t.uniqueArray}},{provide:"regExpFactory",useFactory:function(){return B.regExpFactory}},{provide:"generateIdentifier",useFactory:function(){return B.generateIdentifier}},{provide:"escapeHtml",useFactory:function(){return B.escapeHtml}},{provide:"sanitize",useFactory:function(){return B.sanitize}},{provide:"sanitizeHTML",useFactory:function(){return B.sanitizeHTML}},{provide:"toPromise",useFactory:function(e,t){return function(n,i){return function(){try{return e.when(n.apply(i,arguments))}catch(n){t.error("execution of a method that was turned into a promise failed");t.error(n);return e.reject(n)}}}},deps:["$q","$log"]},{provide:"isFunction",useFactory:function(){return $t.isFunction}},{provide:"isObject",useFactory:function(){return $t.isObject}},{provide:"debounce",useFactory:function(e,t){var n=function(){function TypeError(){}return TypeError}();return function(i,o,r){var a;var s;var c;var l;var d;var p;var u;var m;var g=0;var h=false;var v=true;var f;if(!e(i)){throw new n}o=Math.max(0,o)||0;if(r===true){m=true;v=false}else if(t(r)){m=r.leading;h="maxWait"in r&&(Math.max(o,r.maxWait)||0);v="trailing"in r?r.trailing:v}var delayed=function(){var e=o-(Date.now()-l);if(e<=0){if(s){clearTimeout(s)}f=u;s=p=u=undefined;if(f){g=Date.now();c=i.apply(d,a);if(!p&&!s){a=d=null}}}else{p=setTimeout(delayed,e)}};var maxDelayed=function(){if(p){clearTimeout(p)}s=p=u=undefined;if(v||h!==o){g=Date.now();c=i.apply(d,a);if(!p&&!s){a=d=null}}};return function(){a=arguments;l=Date.now();d=this;u=v&&(p||!m);var e;if(h===false){e=m&&!p}else{if(!s&&!m){g=l}var t=h-(l-g);f=t<=0;if(f){if(s){s=clearTimeout(s)}g=l;c=i.apply(d,a)}else if(!s){s=setTimeout(maxDelayed,t)}}if(f&&p){p=clearTimeout(p)}else if(!p&&o!==h){p=setTimeout(delayed,o)}if(e){f=true;c=i.apply(d,a)}if(f&&!p&&!s){a=d=null}return c}}},deps:["isFunction","isObject"]},{provide:"throttle",useFactory:function(e,t,n){return function(i,o,r){var a=true;var s=true;if(!t(i)){throw new TypeError}if(r===false){a=false}else if(n(r)){a="leading"in r?r.leading:a;s="trailing"in r?r.trailing:s}r={};r.leading=a;r.maxWait=o;r.trailing=s;return e(i,o,r)}},deps:["debounce","isFunction","isObject"]},{provide:"parseHTML",useFactory:function(e){return function(t){return e.parseHTML(t)}},deps:["yjQuery"]},{provide:"unsafeParseHTML",useFactory:function(e){return e.unsafeParseHTML},deps:["jQueryUtilsService"]},{provide:"extractFromElement",useFactory:function(e){return e.extractFromElement},deps:["jQueryUtilsService"]},{provide:"closeOpenModalsOnBrowserBack",useFactory:function(e){return function(){if(e.getTop()){e.dismissAll()}}},deps:["$uibModalStack"]},{provide:"URIBuilder",useFactory:function(){return o.URIBuilder}},{provide:"getDataFromResponse",useFactory:function(){return G.getDataFromResponse}},{provide:"getKeyHoldingDataFromResponse",useFactory:function(){return G.getKeyHoldingDataFromResponse}},{provide:"resetObject",useFactory:function(){return $t.resetObject}},{provide:"isObjectEmptyDeep",useFactory:function(){return $t.isObjectEmptyDeep}},{provide:"areAllTruthy",useFactory:function(){return o.booleanUtils.areAllTruthy}},{provide:"isAnyTruthy",useFactory:function(){return o.booleanUtils.isAnyTruthy}},{provide:"formatDateAsUtc",useFactory:function(){return zt.formatDateAsUtc}},{provide:"getEncodedString",useFactory:function(){return B.encode}},{provide:"encode",useFactory:function(){return B.encode}},{provide:"compareHTMLElementsPosition",useFactory:function(){return x.compareHTMLElementsPosition}},{provide:"isIframe",useFactory:function(){return V.isIframe}},{provide:"isPointOverElement",useFactory:function(){return x.isPointOverElement}},{provide:"areIntersecting",useFactory:function(){return x.areIntersecting}},{provide:"EXTENDED_VIEW_PORT_MARGIN",useValue:te},{provide:"isInExtendedViewPort",useFactory:function(e){return e.isInExtendedViewPort},deps:["jQueryUtilsService"]},{provide:"deepIterateOverObjectWith",useFactory:function(){return $t.deepIterateOverObjectWith}},{provide:"deepObjectPropertyDiff",useFactory:function(){return $t.deepObjectPropertyDiff}},{provide:"isInDOM",useFactory:function(e,t){return function(n){return t.contains(e[0],n)}},deps:["$document","yjQuery"]},{provide:"readObjectStructureFactory",useValue:function(){return $t.readObjectStructure}}]})],FunctionsModule);return FunctionsModule}();var Ht=function(e){__extends(SmarteditErrorHandler,e);function SmarteditErrorHandler(){var t=e.call(this)||this;t.ignorePatterns=[/Uncaught[\s]*\(in[\s]*promise\)/,/Unhandled[\s]*Promise[\s]*rejection/];return t}SmarteditErrorHandler.prototype.handleError=function(t){if(false){}var n=t&&t.message?t.message:t;if(n&&this.ignorePatterns.some((function(e){return e.test(n.toString())}))){return}if(t instanceof p.HttpErrorResponse&&t.status===401){return}e.prototype.handleError.call(this,t)};return SmarteditErrorHandler}(s.ErrorHandler);function objectToArray(e){return Object.keys(e).reduce((function(t,n){return __spreadArrays(t||[],[{key:n,value:e[n]}])}),[])}var Gt=function(e){__extends(AbstractAngularJSBasedCustomElement,e);function AbstractAngularJSBasedCustomElement(t){var n=e.call(this)||this;n.upgrade=t;n.PROCESSED_ATTRIBUTE_NAME="processed";return n}AbstractAngularJSBasedCustomElement.prototype.markAsProcessed=function(){this.setAttribute(this.PROCESSED_ATTRIBUTE_NAME,"true")};AbstractAngularJSBasedCustomElement.prototype.connectedCallback=function(){if(!this.isConnected||this.getAttribute(this.PROCESSED_ATTRIBUTE_NAME)){return}this.internalConnectedCallback()};AbstractAngularJSBasedCustomElement.prototype.disconnectedCallback=function(){if(!this.scope||this.isConnected){return}this.scope.$destroy();this.internalDisconnectedCallback&&this.internalDisconnectedCallback()};AbstractAngularJSBasedCustomElement.prototype.attributeChangedCallback=function(e,t,n){if(!this.shouldReactOnAttributeChange()){return}this.internalAttributeChangedCallback(e,t,n)};AbstractAngularJSBasedCustomElement.prototype.shouldReactOnAttributeChange=function(){return this.internalAttributeChangedCallback&&this.scope&&this.isConnected&&!!this.getAttribute(this.PROCESSED_ATTRIBUTE_NAME)};Object.defineProperty(AbstractAngularJSBasedCustomElement.prototype,"$rootScope",{get:function(){return this.upgrade.injector.get("$rootScope")},enumerable:false,configurable:true});Object.defineProperty(AbstractAngularJSBasedCustomElement.prototype,"$compile",{get:function(){return this.upgrade.injector.get("$compile")},enumerable:false,configurable:true});return AbstractAngularJSBasedCustomElement}(HTMLElement);var Wt=new s.InjectionToken("EXTENDED_VIEW_PORT_MARGIN");var qt=new s.InjectionToken("HEART_BEAT_TIMEOUT_THRESHOLD_MS");var Kt=function(){SystemEventService.$inject=["logService","promiseUtils"];function SystemEventService(e,t){this.logService=e;this.promiseUtils=t;this._eventHandlers={}}SystemEventService.prototype.publish=function(e,t){if(!e){this.logService.error("Failed to send event. No event ID provided for data: "+t)}else{if(this._eventHandlers[e]&&this._eventHandlers[e].length>0){return this._invokeEventHandlers(e,t)}}return Promise.resolve()};SystemEventService.prototype.publish.$inject=["eventId","data"];SystemEventService.prototype.publishAsync=function(e,t){var n=this;return new Promise((function(i,o){setTimeout((function(){n.publish(e,t).then((function(e){return i(e)}),(function(e){return o(e)}))}),0)}))};SystemEventService.prototype.publishAsync.$inject=["eventId","data"];SystemEventService.prototype.subscribe=function(e,t){var n=this;var i;if(!e||!t){this.logService.error("Failed to subscribe event handler for event: "+e)}else{if(this._eventHandlers[e]===undefined){this._eventHandlers[e]=[]}this._eventHandlers[e].push(t);i=function(){n._unsubscribe(e,t)}}return i};SystemEventService.prototype.subscribe.$inject=["eventId","handler"];SystemEventService.prototype._unsubscribe=function(e,t){var n=this._eventHandlers[e];var i=n?this._eventHandlers[e].indexOf(t):-1;if(i>=0){this._eventHandlers[e].splice(i,1)}else{this.logService.warn("Attempting to remove event handler for "+e+" but handler not found.")}};SystemEventService.prototype._unsubscribe.$inject=["eventId","handler"];SystemEventService.prototype._invokeEventHandlers=function(e,t){var n=this;return Promise.all(this._eventHandlers[e].map((function(i){var o=n.promiseUtils.toPromise(i);return o(e,t)}))).then((function(e){return Promise.resolve(e.pop())}),(function(e){return Promise.reject(e)}))};SystemEventService.prototype._invokeEventHandlers.$inject=["eventId","data"];SystemEventService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService,o.PromiseUtils])],SystemEventService);return SystemEventService}();var Yt=function(){function MessageGateway(e,t,n,i,o,r,a){this.logService=e;this.systemEventService=t;this.cloneableUtils=n;this.windowUtils=i;this.promiseUtils=o;this.TIMEOUT_TO_RETRY_PUBLISHING=r;this.gatewayId=a;this.PROMISE_ACKNOWLEDGEMENT_EVENT_ID="promiseAcknowledgement";this.PROMISE_RETURN_EVENT_ID="promiseReturn";this.SUCCESS="success";this.FAILURE="failure";this.MAX_RETRIES=5;this.promisesToResolve={}}MessageGateway.prototype.publish=function(e,t,n,i){var o=this;if(n===void 0){n=0}if(!e){return Promise.reject("MessageGateway: Failed to send event. No event ID provided for _data: "+t)}var r=this.cloneableUtils.makeCloneable(t);if(!a.isEqual(r,t)){this.logService.debug("MessageGateway.publish - Non cloneable payload has been sanitized for gateway "+this.gatewayId+", event "+e+":",r)}var s=this.promisesToResolve[i]||this.promiseUtils.defer();try{var c=this.windowUtils.getGatewayTargetFrame();if(!c){s.reject("It is standalone. There is no iframe");return s.promise}i=i||this._generateIdentifier();try{c.postMessage({pk:i,gatewayId:this.gatewayId,eventId:e,data:r},"*")}catch(t){this.logService.error(t);this.logService.error("MessageGateway.publish - postMessage has failed for gateway "+this.gatewayId+" event "+e+" and data ",r)}this.promisesToResolve[i]=s;this._setTimeout((function(){if(!s.acknowledged&&e!==o.PROMISE_RETURN_EVENT_ID&&e!==o.PROMISE_ACKNOWLEDGEMENT_EVENT_ID){if(n<o.MAX_RETRIES){o.logService.debug(document.location.href+" is retrying to publish event "+e);o.publish(e,r,++n,i).catch((function(e){}))}else{var t="MessageGateway.publish - Not able to publish event "+e+" after max retries for gateway "+o.gatewayId+" and data";s.reject({error:t,data:r})}}}),this.TIMEOUT_TO_RETRY_PUBLISHING)}catch(e){s.reject()}return s.promise};MessageGateway.prototype.subscribe=function(e,t){var n;if(!e){this.logService.error("MessageGateway: Failed to subscribe event handler for event: "+e)}else{var i=this._getSystemEventId(e);n=this.systemEventService.subscribe(i,t)}return n};MessageGateway.prototype.processEvent=function(e){var t=this;var n=e.data;if(e.eventId!==this.PROMISE_RETURN_EVENT_ID&&e.eventId!==this.PROMISE_ACKNOWLEDGEMENT_EVENT_ID){this.logService.debug(document.location.href,"sending acknowledgement for",e);this.publish(this.PROMISE_ACKNOWLEDGEMENT_EVENT_ID,{pk:e.pk});var i=this._getSystemEventId(e.eventId);return this.systemEventService.publishAsync(i,e.data).then((function(n){t.logService.debug(document.location.href,"sending promise resolve",e);return t.publish(t.PROMISE_RETURN_EVENT_ID,{pk:e.pk,type:t.SUCCESS,resolvedDataOfLastSubscriber:n})}),(function(){t.logService.debug(document.location.href,"sending promise reject",e);return t.publish(t.PROMISE_RETURN_EVENT_ID,{pk:e.pk,type:t.FAILURE})}))}else if(e.eventId===this.PROMISE_RETURN_EVENT_ID){if(this.promisesToResolve[n.pk]){if(n.type===this.SUCCESS){this.logService.debug(document.location.href,"received promise resolve",e);this.promisesToResolve[n.pk].resolve(n.resolvedDataOfLastSubscriber)}else if(n.type===this.FAILURE){this.logService.debug(document.location.href,"received promise reject",e);this.promisesToResolve[n.pk].reject()}delete this.promisesToResolve[n.pk]}}else if(e.eventId===this.PROMISE_ACKNOWLEDGEMENT_EVENT_ID){if(this.promisesToResolve[n.pk]){this.logService.debug(document.location.href,"received acknowledgement",e);this.promisesToResolve[n.pk].acknowledged=true}}return Promise.resolve()};MessageGateway.prototype._setTimeout=function(e,t){if(o.functionsUtils.isUnitTestMode()){setTimeout(e,t)}else{this.windowUtils.runTimeoutOutsideAngular(e,t)}};MessageGateway.prototype._generateIdentifier=function(){return(new Date).getTime()+Math.random().toString()};MessageGateway.prototype._getSystemEventId=function(e){return this.gatewayId+":"+e};return MessageGateway}();var Xt=function(){GatewayFactory.$inject=["logService","systemEventService","cloneableUtils","windowUtils","promiseUtils","functionsUtils"];function GatewayFactory(e,t,n,i,o,r){this.logService=e;this.systemEventService=t;this.cloneableUtils=n;this.windowUtils=i;this.promiseUtils=o;this.functionsUtils=r;this.messageGatewayMap={}}e=GatewayFactory;GatewayFactory.prototype.initListener=function(){var e=this;var t=[];this.windowUtils.getWindow().addEventListener("message",(function(n){if(e._isAllowed(n.origin)){var i=n.data;if(t.indexOf(i.pk)>-1){return}t.push(i.pk);e.logService.debug("message event handler called",i.eventId);var o=i.gatewayId;var r=e.messageGatewayMap[o];if(!r){e.logService.debug("Incoming message on gateway "+o+", but no destination exists.");return}r.processEvent(i)}else{e.logService.error("disallowed storefront is trying to communicate with smarteditcontainer")}}),false)};GatewayFactory.prototype.createGateway=function(t){if(this.messageGatewayMap[t]&&!this.functionsUtils.isUnitTestMode()){this.logService.error("Message Gateway for "+t+" already reserved");return null}this.messageGatewayMap[t]=new Yt(this.logService,this.systemEventService,this.cloneableUtils,this.windowUtils,this.promiseUtils,e.TIMEOUT_TO_RETRY_PUBLISHING,t);return this.messageGatewayMap[t]};GatewayFactory.prototype.createGateway.$inject=["gatewayId"];GatewayFactory.prototype._isAllowed=function(e){return this.windowUtils.isIframe()||this.windowUtils.getTrustedIframeDomain()===e};GatewayFactory.prototype._isAllowed.$inject=["origin"];var e;GatewayFactory.TIMEOUT_TO_RETRY_PUBLISHING=500;GatewayFactory=e=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService,Kt,o.CloneableUtils,L,o.PromiseUtils,o.FunctionsUtils])],GatewayFactory);return GatewayFactory}();var Zt=function(){GatewayProxy.$inject=["logService","promiseUtils","stringUtils","functionsUtils","gatewayFactory"];function GatewayProxy(e,t,n,i,o){this.logService=e;this.promiseUtils=t;this.stringUtils=n;this.functionsUtils=i;this.gatewayFactory=o;this.nonProxiableMethods=["getMethodForVoid","getMethodForSingleInstance","getMethodForArray"]}GatewayProxy.prototype.initForService=function(e,t,n){var i=this;var o=n||e.gatewayId;if(!o){this.logService.error("initForService() - service expected to have an associated gatewayId - methodsSubset: "+(t&&t.length?t.join(","):[]));return null}var r=this.gatewayFactory.createGateway(o);var a=t;if(!a){a=[];for(var s in e){if(typeof e[s]==="function"&&!this._isNonProxiableMethod(s)){a.push(s)}}}a.forEach((function(t){if(typeof e[t]==="function"){if(i.functionsUtils.isEmpty(e[t])){i._turnToProxy(t,e,r)}else{e[t]=i.promiseUtils.toPromise(e[t],e);r.subscribe(t,i._onGatewayEvent.bind(null,t,e))}}}))};GatewayProxy.prototype.initForService.$inject=["service","methodsSubset","gatewayId"];GatewayProxy.prototype._isNonProxiableMethod=function(e){return this.nonProxiableMethods.indexOf(e)>-1||e.startsWith("$")||e==="lodash"||e==="jQuery"};GatewayProxy.prototype._isNonProxiableMethod.$inject=["key"];GatewayProxy.prototype._onGatewayEvent=function(e,t,n,i){return t[e].apply(t,i.arguments)};GatewayProxy.prototype._onGatewayEvent.$inject=["fnName","service","eventId","data"];GatewayProxy.prototype._turnToProxy=function(e,t,n){var i=this;delete t[e];t[e]=function(){var t=[];for(var o=0;o<arguments.length;o++){t[o]=arguments[o]}return n.publish(e,{arguments:t}).then((function(e){if(!i.stringUtils.isBlank(e)){delete e.$resolved;delete e.$promise}return e}),(function(o){if(o){i.logService.debug("gatewayProxy - publish failed for gateway "+n.gatewayId+" method "+e+" and arguments "+t)}return Promise.reject(o)}))}};GatewayProxy.prototype._turnToProxy.$inject=["fnName","service","gateway"];GatewayProxy=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService,o.PromiseUtils,o.StringUtils,o.FunctionsUtils,Xt])],GatewayProxy);return GatewayProxy}();var Qt=new s.InjectionToken("ANNOUNCEMENT_DATA");var Jt=function(){function IAnnouncementService(){}IAnnouncementService.prototype.showAnnouncement=function(e){"proxyFunction";return null};IAnnouncementService.prototype.closeAnnouncement=function(e){"proxyFunction";return null};return IAnnouncementService}();var en=function(){function ICatalogService(){}ICatalogService.prototype.retrieveUriContext=function(e){"proxyFunction";return null};ICatalogService.prototype.getContentCatalogsForSite=function(e){"proxyFunction";return null};ICatalogService.prototype.getAllContentCatalogsGroupedById=function(){"proxyFunction";return null};ICatalogService.prototype.getCatalogByVersion=function(e,t){"proxyFunction";return null};ICatalogService.prototype.isContentCatalogVersionNonActive=function(e){"proxyFunction";return null};ICatalogService.prototype.getContentCatalogActiveVersion=function(e){"proxyFunction";return null};ICatalogService.prototype.getActiveContentCatalogVersionByCatalogId=function(e){"proxyFunction";return null};ICatalogService.prototype.getCurrentSiteID=function(){"proxyFunction";return null};ICatalogService.prototype.getDefaultSiteForContentCatalog=function(e){"proxyFunction";return null};ICatalogService.prototype.getContentCatalogVersion=function(e){"proxyFunction";return null};ICatalogService.prototype.getCatalogVersionByUuid=function(e,t){"proxyFunction";return null};ICatalogService.prototype.getCatalogVersionUUid=function(e){"proxyFunction";return null};ICatalogService.prototype.getProductCatalogsBySiteKey=function(e){"proxyFunction";return null};ICatalogService.prototype.getProductCatalogsForSite=function(e){"proxyFunction";return null};ICatalogService.prototype.getActiveProductCatalogVersionByCatalogId=function(e){"proxyFunction";return null};ICatalogService.prototype.returnActiveCatalogVersionUIDs=function(e){"proxyFunction";return null};ICatalogService.prototype.isCurrentCatalogMultiCountry=function(){"proxyFunction";return null};return ICatalogService}();var tn=function(){function IExperienceService(){}IExperienceService.prototype.updateExperiencePageContext=function(e,t){"proxyFunction";return null};IExperienceService.prototype.getCurrentExperience=function(){"proxyFunction";return null};IExperienceService.prototype.setCurrentExperience=function(e){"proxyFunction";return null};IExperienceService.prototype.hasCatalogVersionChanged=function(){"proxyFunction";return null};IExperienceService.prototype.buildRefreshedPreviewUrl=function(){"proxyFunction";return null};IExperienceService.prototype.updateExperience=function(e){"proxyFunction";return null};IExperienceService.prototype.loadExperience=function(e){"proxyFunction";return null};IExperienceService.prototype.compareWithCurrentExperience=function(e){"proxyFunction";return null};IExperienceService.prototype._convertExperienceToPreviewData=function(e,t){var n=a.cloneDeep(e);var i=[];delete n.catalogDescriptor;delete n.siteDescriptor;delete n.languageDescriptor;delete n.pageContext;delete n.productCatalogVersions;if(e.productCatalogVersions&&e.productCatalogVersions.length){e.productCatalogVersions.forEach((function(e){i.push({catalog:e.catalog,catalogVersion:e.catalogVersion})}))}i.push({catalog:e.catalogDescriptor.catalogId,catalogVersion:e.catalogDescriptor.catalogVersion});n.catalogVersions=i;n.language=e.languageDescriptor.isocode;n.resourcePath=t;n.siteId=e.siteDescriptor.uid;return n};IExperienceService.prototype.initializeExperience=function(){"proxyFunction";return null};IExperienceService.prototype.buildAndSetExperience=function(e){"proxyFunction";return null};return IExperienceService}();var nn=function(){function IFeatureService(e){this.cloneableUtils=e}IFeatureService.prototype.register=function(e){this._validate(e);this._featuresToAlias=this._featuresToAlias||{};this._featuresToAlias[e.key]={enablingCallback:e.enablingCallback,disablingCallback:e.disablingCallback};delete e.enablingCallback;delete e.disablingCallback;return this._registerAliases(this.cloneableUtils.makeCloneable(e))};IFeatureService.prototype.enable=function(e){if(this._featuresToAlias&&this._featuresToAlias[e]){this._featuresToAlias[e].enablingCallback()}else{this._remoteEnablingFromInner(e)}};IFeatureService.prototype.disable=function(e){if(this._featuresToAlias&&this._featuresToAlias[e]){this._featuresToAlias[e].disablingCallback()}else{this._remoteDisablingFromInner(e)}};IFeatureService.prototype.getFeatureProperty=function(e,t){"proxyFunction";return null};IFeatureService.prototype.addToolbarItem=function(e){"proxyFunction";return null};IFeatureService.prototype.addDecorator=function(e){"proxyFunction";return null};IFeatureService.prototype.addContextualMenuButton=function(e){"proxyFunction";return null};IFeatureService.prototype.getFeatureKeys=function(){"proxyFunction";return null};IFeatureService.prototype._remoteEnablingFromInner=function(e){"proxyFunction";return null};IFeatureService.prototype._remoteDisablingFromInner=function(e){"proxyFunction";return null};IFeatureService.prototype._registerAliases=function(e){"proxyFunction";return null};IFeatureService.prototype._validate=function(e){if(a.isEmpty(e.key)){throw new Error("featureService.configuration.key.error.required")}if(a.isEmpty(e.nameI18nKey)){throw new Error("featureService.configuration.nameI18nKey.error.required")}if(!a.isFunction(e.enablingCallback)){throw new Error("featureService.configuration.enablingCallback.error.not.function")}if(!a.isFunction(e.disablingCallback)){throw new Error("featureService.configuration.disablingCallback.error.not.function")}};return IFeatureService}();var on=function(){function INotificationMouseLeaveDetectionService(){}INotificationMouseLeaveDetectionService.prototype.startDetection=function(e,t,n){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype.stopDetection=function(){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._remoteStartDetection=function(e){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._remoteStopDetection=function(){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._callCallback=function(){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._onMouseMove=function(e){var t=this;this._getBounds().then((function(n){var i=n&&e&&(e.clientX<n.x||e.clientX>n.x+n.width);var o=n&&e&&(e.clientY<n.y||e.clientY>n.y+n.height);if(i||o){t._onMouseLeave()}}))};INotificationMouseLeaveDetectionService.prototype._getBounds=function(){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._getCallback=function(){"proxyFunction";return null};INotificationMouseLeaveDetectionService.prototype._onMouseLeave=function(){var e=this;this._getCallback().then((function(t){if(t){t();e.stopDetection()}else{e._callCallback().then((function(){e.stopDetection()}))}}))};return INotificationMouseLeaveDetectionService}();var rn=function(){function INotificationService(){}INotificationService.prototype.pushNotification=function(e){"proxyFunction";return null};INotificationService.prototype.removeNotification=function(e){"proxyFunction";return null};INotificationService.prototype.removeAllNotifications=function(){"proxyFunction";return null};return INotificationService}();var an=function(){function IPageInfoService(){}IPageInfoService.prototype.getPageUID=function(){"proxyFunction";return null};IPageInfoService.prototype.getPageUUID=function(){"proxyFunction";return null};IPageInfoService.prototype.getCatalogVersionUUIDFromPage=function(){"proxyFunction";return null};return IPageInfoService}();var sn=function(){IPreviewService.$inject=["urlUtils"];function IPreviewService(e){this.urlUtils=e}IPreviewService.prototype.createPreview=function(e){"proxyFunction";return null};IPreviewService.prototype.createPreview.$inject=["previewData"];IPreviewService.prototype.updatePreview=function(e){"proxyFunction";return null};IPreviewService.prototype.updatePreview.$inject=["previewData"];IPreviewService.prototype.getResourcePathFromPreviewUrl=function(e){"proxyFunction";return null};IPreviewService.prototype.getResourcePathFromPreviewUrl.$inject=["previewUrl"];IPreviewService.prototype.updateUrlWithNewPreviewTicketId=function(e,t){var n=this;return this.createPreview(t).then((function(t){return n.urlUtils.updateUrlParameter(e,"cmsTicketId",t.ticketId)}))};IPreviewService.prototype.updateUrlWithNewPreviewTicketId.$inject=["storefrontUrl","previewData"];IPreviewService=__decorate([SeInjectable(),__metadata("design:paramtypes",[o.UrlUtils])],IPreviewService);return IPreviewService}();var cn=function(){function IUrlService(){}IUrlService.prototype.openUrlInPopup=function(e){"proxyFunction";return null};IUrlService.prototype.path=function(e){"proxyFunction";return null};IUrlService.prototype.buildUriContext=function(e,t,n){var i={};i[oe]=e;i[ne]=t;i[ie]=n;return i};IUrlService.prototype.buildPageUriContext=function(e,t,n){var i={};i[se]=e;i[re]=t;i[ae]=n;return i};return IUrlService}();var ln=function(){function IWaitDialogService(){}IWaitDialogService.prototype.showWaitModal=function(e){"proxyFunction";return null};IWaitDialogService.prototype.hideWaitModal=function(){"proxyFunction";return null};return IWaitDialogService}();var dn=function(){function IIframeClickDetectionService(){}IIframeClickDetectionService.prototype.onIframeClick=function(){"proxyFunction";return null};IIframeClickDetectionService.prototype.registerCallback=function(e,t){"proxyFunction";return null};IIframeClickDetectionService.prototype.removeCallback=function(e){"proxyFunction"};return IIframeClickDetectionService}();var pn=new s.InjectionToken("alertServiceToken");var un=function(){function IAlertService(){}IAlertService.prototype.showAlert=function(e){"proxyFunction";return};IAlertService.prototype.showInfo=function(e){"proxyFunction";return};IAlertService.prototype.showDanger=function(e){"proxyFunction";return};IAlertService.prototype.showWarning=function(e){"proxyFunction";return};IAlertService.prototype.showSuccess=function(e){"proxyFunction";return};return IAlertService}();var prepareRuleConfiguration=function(e){this.ruleVerifyFunctions=this.ruleVerifyFunctions||{};this.ruleVerifyFunctions[e.names.join("-")]={verify:e.verify};delete e.verify;return e};var validateRule=function(e){if(!(e.names instanceof Array)){throw Error("Rule names must be array")}if(e.names.length<1){throw Error("Rule requires at least one name")}if(!e.verify){throw Error("Rule requires a verify function")}if(typeof e.verify!=="function"){throw Error("Rule verify must be a function")}};var mn=function(){function IPermissionService(){}IPermissionService.prototype.clearCache=function(){"proxyFunction";return};IPermissionService.prototype.getPermission=function(e){"proxyFunction";return null};IPermissionService.prototype.isPermitted=function(e){"proxyFunction";return null};IPermissionService.prototype.registerPermission=function(e){"proxyFunction";return};IPermissionService.prototype.registerRule=function(e){validateRule(e);e=prepareRuleConfiguration.bind(this)(e);this._registerRule(e)};IPermissionService.prototype.registerDefaultRule=function(e){e=prepareRuleConfiguration.bind(this)(e);this._registerDefaultRule(e)};IPermissionService.prototype.unregisterDefaultRule=function(){"proxyFunction";return};IPermissionService.prototype._registerRule=function(e){"proxyFunction";return};IPermissionService.prototype._registerDefaultRule=function(e){"proxyFunction";return};return IPermissionService}();var gn=function(){function IResizeListener(){}IResizeListener.prototype.unregister=function(e){"proxyFunction"};IResizeListener.prototype.fix=function(e){"proxyFunction"};IResizeListener.prototype.register=function(e,t){"proxyFunction"};IResizeListener.prototype.init=function(){"proxyFunction"};IResizeListener.prototype.dispose=function(){"proxyFunction"};return IResizeListener}();var hn=function(){function IPositionRegistry(){}IPositionRegistry.prototype.register=function(e){"proxyFunction"};IPositionRegistry.prototype.unregister=function(e){"proxyFunction"};IPositionRegistry.prototype.getRepositionedComponents=function(){"proxyFunction";return null};IPositionRegistry.prototype.dispose=function(){"proxyFunction"};return IPositionRegistry}();var vn=function(){function IRenderService(e,t,n,i,o,r,a,s){this.yjQuery=e;this.systemEventService=t;this.notificationService=n;this.pageInfoService=i;this.perspectiveService=o;this.crossFrameEventService=r;this.windowUtils=a;this.modalService=s;this.KEY_CODES={ESC:27};this.HOTKEY_NOTIFICATION_CONFIGURATION={id:"HOTKEY_NOTIFICATION_ID",componentName:"PerspectiveSelectorHotkeyNotificationComponent"};this._bindEvents()}IRenderService.prototype.renderSlots=function(e){"proxyFunction";return null};IRenderService.prototype.renderComponent=function(e,t){"proxyFunction";return null};IRenderService.prototype.renderRemoval=function(e,t,n){"proxyFunction";return null};IRenderService.prototype.renderPage=function(e){"proxyFunction";return null};IRenderService.prototype.toggleOverlay=function(e){"proxyFunction";return null};IRenderService.prototype.refreshOverlayDimensions=function(){"proxyFunction";return null};IRenderService.prototype.blockRendering=function(e){"proxyFunction";return null};IRenderService.prototype.isRenderingBlocked=function(){"proxyFunction";return null};IRenderService.prototype._getDocument=function(){return document};IRenderService.prototype._bindEvents=function(){var e=this;this._getDocument().addEventListener("keyup",(function(t){return e._keyUpEventHandler(t)}));this._getDocument().addEventListener("click",(function(){return e._clickEvent()}))};IRenderService.prototype._keyUpEventHandler=function(e){var t=this;if(!this._areAllModalWindowsClosed()){return Promise.resolve()}return this._shouldEnableKeyPressEvent(e).then((function(e){if(e){t._keyPressEvent()}}))};IRenderService.prototype._shouldEnableKeyPressEvent=function(e){var t=this;return new Promise((function(n){try{return t.pageInfoService.getPageUUID().then((function(i){if(i){return t.perspectiveService.isHotkeyEnabledForActivePerspective().then((function(i){return n(e.which===t.KEY_CODES.ESC&&i)}))}return n(false)}))}catch(e){return n(false)}}))};IRenderService.prototype._keyPressEvent=function(){var e=this;this.isRenderingBlocked().then((function(t){if(!t){e.blockRendering(true);e.renderPage(false);e.notificationService.pushNotification(e.HOTKEY_NOTIFICATION_CONFIGURATION);e.systemEventService.publishAsync("OVERLAY_DISABLED")}else{e.blockRendering(false);e.renderPage(true);e.notificationService.removeNotification(e.HOTKEY_NOTIFICATION_CONFIGURATION.id)}}))};IRenderService.prototype._clickEvent=function(){var e=this;if(!this.windowUtils.isIframe()){this.crossFrameEventService.publish(je)}return this.isRenderingBlocked().then((function(t){if(t&&!e.windowUtils.isIframe()){e.blockRendering(false);e.renderPage(true);return e.notificationService.removeNotification(e.HOTKEY_NOTIFICATION_CONFIGURATION.id)}return null}))};IRenderService.prototype._areAllModalWindowsClosed=function(){return!this.modalService.hasOpenModals()};return IRenderService}();var fn=function(){function IToolbarServiceFactory(){}IToolbarServiceFactory.prototype.getToolbarService=function(e){"proxyFunction";return null};return IToolbarServiceFactory}();var _n=function(){function IConfirmationModalService(){}IConfirmationModalService.prototype.confirm=function(e){"proxyFunction";return Promise.resolve()};return IConfirmationModalService}();var yn=function(){function ICatalogVersionPermissionService(){}ICatalogVersionPermissionService.prototype.hasWritePermission=function(e,t){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasReadPermission=function(e,t){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasWritePermissionOnCurrent=function(){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasReadPermissionOnCurrent=function(){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasSyncPermission=function(e,t,n){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasSyncPermissionFromCurrentToActiveCatalogVersion=function(){"proxyFunction";return null};ICatalogVersionPermissionService.prototype.hasSyncPermissionToActiveCatalogVersion=function(e,t){"proxyFunction";return null};return ICatalogVersionPermissionService}();var Cn=function(){function IDecoratorService(){}IDecoratorService.prototype.addMappings=function(e){"proxyFunction"};IDecoratorService.prototype.enable=function(e,t){"proxyFunction"};IDecoratorService.prototype.disable=function(e){"proxyFunction"};IDecoratorService.prototype.getDecoratorsForComponent=function(e,t){"proxyFunction";return null};return IDecoratorService}();var Sn=function(){function IRestServiceFactory(){}IRestServiceFactory.prototype.get=function(e,t){"proxyFunction";return null};IRestServiceFactory.prototype.setDomain=function(e){"proxyFunction"};IRestServiceFactory.prototype.setBasePath=function(e){"proxyFunction"};IRestServiceFactory.prototype.setGlobalBasePath=function(e){"proxyFunction"};return IRestServiceFactory}();var bn=function(){function IDragAndDropCrossOrigin(){}IDragAndDropCrossOrigin.prototype.initialize=function(){"proxyFunction"};return IDragAndDropCrossOrigin}();var In=function(){function IContextualMenuService(){}IContextualMenuService.prototype.addItems=function(e){"proxyFunction"};IContextualMenuService.prototype.removeItemByKey=function(e){"proxyFunction"};IContextualMenuService.prototype.containsItem=function(e){"proxyFunction";return null};IContextualMenuService.prototype.getContextualMenuByType=function(e){"proxyFunction";return null};IContextualMenuService.prototype.refreshMenuItems=function(){"proxyFunction"};IContextualMenuService.prototype.getContextualMenuItems=function(e){return null};return IContextualMenuService}();var wn=function(){function ICatalogDetailsService(){}ICatalogDetailsService.prototype.addItems=function(e,t){"proxyFunction"};ICatalogDetailsService.prototype.getItems=function(){"proxyFunction";return null};return ICatalogDetailsService}();var En=function(){function ILegacyDecoratorToCustomElementConverter(){}ILegacyDecoratorToCustomElementConverter.prototype.getScopes=function(){return null};ILegacyDecoratorToCustomElementConverter.prototype.convert=function(e){return null};ILegacyDecoratorToCustomElementConverter.prototype.convertIfNeeded=function(e){return null};return ILegacyDecoratorToCustomElementConverter}();var Pn=function(){function ISmartEditContractChangeListener(){}ISmartEditContractChangeListener.prototype._newMutationObserver=function(e){return null};ISmartEditContractChangeListener.prototype._newIntersectionObserver=function(e){return null};ISmartEditContractChangeListener.prototype._addToComponentQueue=function(e){return null};ISmartEditContractChangeListener.prototype._componentsQueueLength=function(){return null};ISmartEditContractChangeListener.prototype.isExtendedViewEnabled=function(){return null};ISmartEditContractChangeListener.prototype.setEconomyMode=function(e){return null};ISmartEditContractChangeListener.prototype.initListener=function(){return null};ISmartEditContractChangeListener.prototype._processQueue=function(){return null};ISmartEditContractChangeListener.prototype.isIntersecting=function(e){return null};ISmartEditContractChangeListener.prototype._rawProcessQueue=function(){return null};ISmartEditContractChangeListener.prototype._addComponents=function(e){return null};ISmartEditContractChangeListener.prototype._removeComponents=function(e,t){return null};ISmartEditContractChangeListener.prototype._registerSizeAndPositionListeners=function(e){return null};ISmartEditContractChangeListener.prototype._unregisterSizeAndPositionListeners=function(e){return null};ISmartEditContractChangeListener.prototype.stopListener=function(){return null};ISmartEditContractChangeListener.prototype._stopExpendableListeners=function(){return null};ISmartEditContractChangeListener.prototype._startExpendableListeners=function(){return null};ISmartEditContractChangeListener.prototype.onComponentsAdded=function(e){return null};ISmartEditContractChangeListener.prototype.onComponentsRemoved=function(e){return null};ISmartEditContractChangeListener.prototype.onComponentChanged=function(e){return null};ISmartEditContractChangeListener.prototype.onComponentResized=function(e){return null};ISmartEditContractChangeListener.prototype.onComponentRepositioned=function(e){return null};ISmartEditContractChangeListener.prototype.onPageChanged=function(e){return null};return ISmartEditContractChangeListener}();var Tn=function(){function ITemplateCacheService(){}ITemplateCacheService.prototype.info=function(){return undefined};ITemplateCacheService.prototype.put=function(e,t){return undefined};ITemplateCacheService.prototype.get=function(e){return undefined};ITemplateCacheService.prototype.remove=function(e){return undefined};ITemplateCacheService.prototype.removeAll=function(){return undefined};ITemplateCacheService.prototype.destroy=function(){return undefined};return ITemplateCacheService}();var An=new s.InjectionToken("WIZARD_MANAGER");var Dn=new s.InjectionToken("WIZARD_API");var On=function(){function WizardService(e,t){this.defaultWizardActionStrategy=e;this.stringUtils=t;this.onLoadStep=function(e,t){return};this.onClose=function(e){return};this.onCancel=function(){return};this.onStepsUpdated=function(e){return}}WizardService.prototype.initialize=function(e){this.validateConfig(e);this._actionStrategy=e.actionStrategy||this.defaultWizardActionStrategy;this._actionStrategy.applyStrategy(this,e);this._currentIndex=0;this._conf=__assign({},e);this._steps=this._conf.steps;this._getResult=e.resultFn;this.validateStepUids(this._steps);this.goToStepWithIndex(0)};WizardService.prototype.executeAction=function(e){var t=this;if(e.executeIfCondition){var n=e.executeIfCondition();return(n instanceof Promise?n:Promise.resolve(n)).then((function(){return e.execute(t)}))}return Promise.resolve(e.execute(this))};WizardService.prototype.goToStepWithIndex=function(e){var t=this.getStepWithIndex(e);if(t){this.onLoadStep(e,t);this._currentIndex=e}};WizardService.prototype.goToStepWithId=function(e){this.goToStepWithIndex(this.getStepIndexFromId(e))};WizardService.prototype.addStep=function(e,t){if(parseInt(e.id,10)!==0&&!e.id){e.id=this.stringUtils.generateIdentifier()}if(!t){t=0}if(this._currentIndex>=t){this._currentIndex++}this._steps.splice(t,0,e);this.validateStepUids(this._steps);this._actionStrategy.applyStrategy(this,this._conf);this.onStepsUpdated(this._steps)};WizardService.prototype.removeStepById=function(e){this.removeStepByIndex(this.getStepIndexFromId(e))};WizardService.prototype.removeStepByIndex=function(e){if(e>=0&&e<this.getStepsCount()){this._steps.splice(e,1);if(e===this._currentIndex){this.goToStepWithIndex(0)}this._actionStrategy.applyStrategy(this,this._conf);this.onStepsUpdated(this._steps)}};WizardService.prototype.close=function(){var e;if(typeof this._getResult==="function"){e=this._getResult()}this.onClose(e)};WizardService.prototype.cancel=function(){this.onCancel()};WizardService.prototype.getSteps=function(){return this._steps};WizardService.prototype.getStepIndexFromId=function(e){var t=this._steps.findIndex((function(t){return t.id===e}));return t};WizardService.prototype.containsStep=function(e){return this.getStepIndexFromId(e)>=0};WizardService.prototype.getCurrentStepId=function(){return this.getCurrentStep().id};WizardService.prototype.getCurrentStepIndex=function(){return this._currentIndex};WizardService.prototype.getCurrentStep=function(){return this.getStepWithIndex(this._currentIndex)};WizardService.prototype.getStepsCount=function(){return this._steps.length};WizardService.prototype.getStepWithId=function(e){var t=this.getStepIndexFromId(e);if(t>=0){return this.getStepWithIndex(t)}return null};WizardService.prototype.getStepWithIndex=function(e){if(e>=0&&e<this.getStepsCount()){return this._steps[e]}throw new Error("wizardService.getStepForIndex - Index out of bounds: "+e)};WizardService.prototype.validateConfig=function(e){if(!e.steps||e.steps.length<=0){throw new Error("Invalid WizardService configuration - no steps provided")}e.steps.forEach((function(e){if(!e.templateUrl&&!e.component){throw new Error("Invalid WizardService configuration - Step missing a templateUrl or component: "+e)}}))};WizardService.prototype.validateStepUids=function(e){var t=this;var n={};e.forEach((function(e){if(!e.id){e.id=t.stringUtils.generateIdentifier()}else if(n[e.id]){throw new Error("Invalid (Duplicate) step id: "+e.id)}else{n[e.id]=e.id}}))};return WizardService}();var Rn=function(){function CompileHtml(e,t,n){this.elementRef=e;this.renderer=t;this.upgrade=n}CompileHtml.prototype.ngOnChanges=function(e){var t=this.hasInputChanged(e.template);var n=this.hasInputChanged(e.scope);this.template=t?e.template.currentValue:this.template;if(this.template&&(n||t)){this.setCompiledHTML()}};CompileHtml.prototype.ngOnDestroy=function(){this.resetScope();this.removeCompiledHTML()};CompileHtml.prototype.resetScope=function(){if(this.$scope){this.$scope.$destroy()}};CompileHtml.prototype.removeCompiledHTML=function(){if(this.elementRef.nativeElement.firstChild){this.renderer.removeChild(this.elementRef.nativeElement,this.elementRef.nativeElement.firstChild)}};CompileHtml.prototype.hasInputChanged=function(e){return!!e&&!a.isEqual(e.previousValue,e.currentValue)};CompileHtml.prototype.setCompiledHTML=function(){this.removeCompiledHTML();this.resetScope();this.renderer.appendChild(this.elementRef.nativeElement,this.compile())};CompileHtml.prototype.compile=function(){var e=this.isTemplateUrl(this.template)?this.$templateCache.get(this.template):this.template;this.$scope=this.$rootScope.$new(false);if(!e){throw new Error("did not find cached template for file "+this.template+" when building tab")}Object.assign(this.$scope,this.scope||{});if(this.compileHtmlNgController){this.$scope[this.compileHtmlNgController.alias]=this;e=this.wrapTemplateIntoNgController(e,this.compileHtmlNgController.alias)}return this.$compile(e)(this.$scope)[0]};CompileHtml.prototype.wrapTemplateIntoNgController=function(e,t){return'<div ng-controller="'+t+".compileHtmlNgController.value as "+t+'">'+e+"</div>"};CompileHtml.prototype.isTemplateUrl=function(e){return/.html$/.test(e)};Object.defineProperty(CompileHtml.prototype,"$templateCache",{get:function(){return this.upgrade.$injector.get("$templateCache")},enumerable:false,configurable:true});Object.defineProperty(CompileHtml.prototype,"$compile",{get:function(){return this.upgrade.$injector.get("$compile")},enumerable:false,configurable:true});Object.defineProperty(CompileHtml.prototype,"$rootScope",{get:function(){return this.upgrade.$injector.get("$rootScope")},enumerable:false,configurable:true});__decorate([s.Input(),__metadata("design:type",Object)],CompileHtml.prototype,"scope",void 0);__decorate([s.Input(),__metadata("design:type",Object)],CompileHtml.prototype,"compileHtmlNgController",void 0);return CompileHtml}();var Mn=function(e){__extends(CompileHtmlDirective,e);function CompileHtmlDirective(t,n,i){return e.call(this,t,n,i)||this}CompileHtmlDirective.prototype.ngOnChanges=function(t){t.template=t.seCompileHtml;e.prototype.ngOnChanges.call(this,t)};__decorate([s.Input(),__metadata("design:type",String)],CompileHtmlDirective.prototype,"seCompileHtml",void 0);__decorate([s.Input(),__metadata("design:type",Object)],CompileHtmlDirective.prototype,"scope",void 0);__decorate([s.Input(),__metadata("design:type",Object)],CompileHtmlDirective.prototype,"compileHtmlNgController",void 0);CompileHtmlDirective=__decorate([s.Directive({selector:"[seCompileHtml]"}),__metadata("design:paramtypes",[s.ElementRef,s.Renderer2,i.UpgradeModule])],CompileHtmlDirective);return CompileHtmlDirective}(Rn);var xn=function(e){__extends(NgIncludeDirective,e);function NgIncludeDirective(t,n,i){return e.call(this,t,n,i)||this}NgIncludeDirective.prototype.ngOnChanges=function(t){t.template=t.ngInclude;e.prototype.ngOnChanges.call(this,t)};__decorate([s.Input(),__metadata("design:type",String)],NgIncludeDirective.prototype,"ngInclude",void 0);__decorate([s.Input(),__metadata("design:type",Object)],NgIncludeDirective.prototype,"scope",void 0);__decorate([s.Input(),__metadata("design:type",Object)],NgIncludeDirective.prototype,"compileHtmlNgController",void 0);NgIncludeDirective=__decorate([s.Directive({selector:"[ngInclude]"}),__metadata("design:paramtypes",[s.ElementRef,s.Renderer2,i.UpgradeModule])],NgIncludeDirective);return NgIncludeDirective}(Rn);var Nn=function(){function CompileHtmlModule(){}CompileHtmlModule=__decorate([s.NgModule({declarations:[xn,Mn],exports:[xn,Mn]})],CompileHtmlModule);return CompileHtmlModule}();window.__smartedit__.addDecoratorPayload("Component","ModalWizardNavBarComponent",{selector:"se-modal-wizard-nav-bar",template:'\n        <div class="se-modal-wizard__steps-container" *ngIf="navActions">\n            <div *ngFor="let action of navActions; let isLast = last" class="se-modal-wizard__step">\n                <button\n                    [attr.id]="action.id"\n                    [ngClass]="{\n                        \'se-modal-wizard-step__action--enabled\': action.enableIfCondition(),\n                        \'se-modal-wizard-step__action--disabled\': !action.enableIfCondition(),\n                        \'se-modal-wizard-step__action--current\': action.isCurrentStep()\n                    }"\n                    class="se-modal-wizard-step__action"\n                    (click)="onClickAction(action)"\n                    [disabled]="!action.enableIfCondition()"\n                >\n                    {{ action.i18n | translate }}\n                </button>\n                <span\n                    *ngIf="!isLast"\n                    [ngClass]="{\n                        \'se-modal-wizard__step-icon-next--enabled\': action.enableIfCondition(),\n                        \'se-modal-wizard__step-icon-next--disabled\': !action.enableIfCondition()\n                    }"\n                    class="sap-icon--navigation-right-arrow se-modal-wizard__step-icon-next"\n                >\n                </span>\n            </div>\n        </div>\n    '});var kn=function(){function ModalWizardNavBarComponent(){this.executeAction=new s.EventEmitter}ModalWizardNavBarComponent.prototype.onClickAction=function(e){this.executeAction.emit(e)};__decorate([s.Input(),__metadata("design:type",Array)],ModalWizardNavBarComponent.prototype,"navActions",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],ModalWizardNavBarComponent.prototype,"executeAction",void 0);ModalWizardNavBarComponent=__decorate([s.Component({selector:"se-modal-wizard-nav-bar",template:'\n        <div class="se-modal-wizard__steps-container" *ngIf="navActions">\n            <div *ngFor="let action of navActions; let isLast = last" class="se-modal-wizard__step">\n                <button\n                    [attr.id]="action.id"\n                    [ngClass]="{\n                        \'se-modal-wizard-step__action--enabled\': action.enableIfCondition(),\n                        \'se-modal-wizard-step__action--disabled\': !action.enableIfCondition(),\n                        \'se-modal-wizard-step__action--current\': action.isCurrentStep()\n                    }"\n                    class="se-modal-wizard-step__action"\n                    (click)="onClickAction(action)"\n                    [disabled]="!action.enableIfCondition()"\n                >\n                    {{ action.i18n | translate }}\n                </button>\n                <span\n                    *ngIf="!isLast"\n                    [ngClass]="{\n                        \'se-modal-wizard__step-icon-next--enabled\': action.enableIfCondition(),\n                        \'se-modal-wizard__step-icon-next--disabled\': !action.enableIfCondition()\n                    }"\n                    class="sap-icon--navigation-right-arrow se-modal-wizard__step-icon-next"\n                >\n                </span>\n            </div>\n        </div>\n    '})],ModalWizardNavBarComponent);return ModalWizardNavBarComponent}();window.__smartedit__.addDecoratorPayload("Component","ModalWizardStepOutletComponent",{selector:"se-modal-wizard-step-outlet",template:'\n        \x3c!-- AngularJS --\x3e\n\n        <ng-container *ngIf="steps && steps.length > 0">\n            <ng-container *ngFor="let step of steps">\n                <div\n                    [ngClass]="{\n                        \'se-modal-wizard__content--visible\': isActive(step)\n                    }"\n                    class="se-modal-wizard__content"\n                >\n                    \x3c!-- AngularJS --\x3e\n\n                    <div\n                        *ngIf="!!step.templateUrl"\n                        [ngInclude]="step.templateUrl"\n                        [compileHtmlNgController]="compileHtmlNgController"\n                    ></div>\n\n                    \x3c!-- Angular --\x3e\n\n                    <div *ngIf="step.component">\n                        <ng-container\n                            *ngComponentOutlet="step.component; injector: wizardApiInjector"\n                        ></ng-container>\n                    </div>\n                </div>\n            </ng-container>\n        </ng-container>\n    '});var Fn=function(){function ModalWizardStepOutletComponent(){}ModalWizardStepOutletComponent.prototype.isActive=function(e){return this.wizardService.getCurrentStepId()===e.id};__decorate([s.Input(),__metadata("design:type",Array)],ModalWizardStepOutletComponent.prototype,"steps",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ModalWizardStepOutletComponent.prototype,"compileHtmlNgController",void 0);__decorate([s.Input(),__metadata("design:type",On)],ModalWizardStepOutletComponent.prototype,"wizardService",void 0);__decorate([s.Input(),__metadata("design:type",s.Injector)],ModalWizardStepOutletComponent.prototype,"wizardApiInjector",void 0);ModalWizardStepOutletComponent=__decorate([s.Component({selector:"se-modal-wizard-step-outlet",template:'\n        \x3c!-- AngularJS --\x3e\n\n        <ng-container *ngIf="steps && steps.length > 0">\n            <ng-container *ngFor="let step of steps">\n                <div\n                    [ngClass]="{\n                        \'se-modal-wizard__content--visible\': isActive(step)\n                    }"\n                    class="se-modal-wizard__content"\n                >\n                    \x3c!-- AngularJS --\x3e\n\n                    <div\n                        *ngIf="!!step.templateUrl"\n                        [ngInclude]="step.templateUrl"\n                        [compileHtmlNgController]="compileHtmlNgController"\n                    ></div>\n\n                    \x3c!-- Angular --\x3e\n\n                    <div *ngIf="step.component">\n                        <ng-container\n                            *ngComponentOutlet="step.component; injector: wizardApiInjector"\n                        ></ng-container>\n                    </div>\n                </div>\n            </ng-container>\n        </ng-container>\n    '})],ModalWizardStepOutletComponent);return ModalWizardStepOutletComponent}();var zn={id:"wizard_action_id",i18n:"wizard_action_label",isMainAction:true,enableIfCondition:function(){return true},executeIfCondition:function(){return true},execute:function(e){return}};var Ln=function(){function WizardActions(){}WizardActions.prototype.customAction=function(e){return this.createNewAction(e)};WizardActions.prototype.customAction.$inject=["configuration"];WizardActions.prototype.done=function(e){var t={id:"ACTION_DONE",i18n:"se.action.done",execute:function(e){e.close()}};return this.createNewAction(e,t)};WizardActions.prototype.done.$inject=["configuration"];WizardActions.prototype.next=function(e){var t={id:"ACTION_NEXT",i18n:"se.action.next",execute:function(e){e.goToStepWithIndex(e.getCurrentStepIndex()+1)}};return this.createNewAction(e,t)};WizardActions.prototype.next.$inject=["configuration"];WizardActions.prototype.navBarAction=function(e){if(!e.wizardService||e.destinationIndex===null){throw new Error("Error initializating navBarAction, must provide the wizardService and destinationIndex fields")}var t={id:"ACTION_GOTO",i18n:"action.goto",enableIfCondition:function(){return e.wizardService.getCurrentStepIndex()>=e.destinationIndex},execute:function(t){t.goToStepWithIndex(e.destinationIndex)}};return this.createNewAction(e,t)};WizardActions.prototype.navBarAction.$inject=["configuration"];WizardActions.prototype.back=function(e){var t={id:"ACTION_BACK",i18n:"se.action.back",isMainAction:false,execute:function(e){var t=e.getCurrentStepIndex();if(t<=0){throw new Error("Failure to execute BACK action, no previous index exists!")}e.goToStepWithIndex(t-1)}};return this.createNewAction(e,t)};WizardActions.prototype.back.$inject=["configuration"];WizardActions.prototype.cancel=function(){return this.createNewAction({id:"ACTION_CANCEL",i18n:"se.action.cancel",isMainAction:false,execute:function(e){e.cancel()}})};WizardActions.prototype.createNewAction=function(e,t){if(e===void 0){e=null}if(t===void 0){t=null}return __assign(__assign(__assign({},zn),t),e)};WizardActions.prototype.createNewAction.$inject=["configuration","customConfiguration"];WizardActions=__decorate([SeDowngradeService()],WizardActions);return WizardActions}();var Vn=function(){DefaultWizardActionStrategy.$inject=["wizardActions"];function DefaultWizardActionStrategy(e){this.wizardActions=e}DefaultWizardActionStrategy.prototype.applyStrategy=function(e,t){var n=this.applyOverrides(e,this.wizardActions.next(),t.nextLabel,t.onNext,t.isFormValid);var i=this.applyOverrides(e,this.wizardActions.done(),t.doneLabel,t.onDone,t.isFormValid);var o=t.backLabel?{i18n:t.backLabel}:null;var r=this.wizardActions.back(o);t.steps.forEach((function(e,o){e.actions=[];if(o>0){e.actions.push(r)}if(o===t.steps.length-1){e.actions.push(i)}else{e.actions.push(n)}}));t.cancelAction=this.applyOverrides(e,this.wizardActions.cancel(),t.cancelLabel,t.onCancel,null);t.templateOverride="modalWizardNavBarTemplate.html"};DefaultWizardActionStrategy.prototype.applyStrategy.$inject=["wizardService","conf"];DefaultWizardActionStrategy.prototype.applyOverrides=function(e,t,n,i,o){if(n){t.i18n=n}if(i){t.executeIfCondition=function(){return i(e.getCurrentStepId())}}if(o){t.enableIfCondition=function(){return o(e.getCurrentStepId())}}return t};DefaultWizardActionStrategy.prototype.applyOverrides.$inject=["wizardService","action","label","executeCondition","enableCondition"];DefaultWizardActionStrategy=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[Ln])],DefaultWizardActionStrategy);return DefaultWizardActionStrategy}();window.__smartedit__.addDecoratorPayload("Component","ModalWizardTemplateComponent",{selector:"se-modal-wizard-template",template:'\n        <div id="yModalWizard">\n            <div class="se-modal-wizard-template">\n                <se-modal-wizard-nav-bar\n                    [navActions]="_wizardContext?.navActions"\n                    (executeAction)="executeAction($event)"\n                ></se-modal-wizard-nav-bar>\n                <se-modal-wizard-step-outlet\n                    [steps]="_wizardContext?._steps"\n                    [compileHtmlNgController]="legacyController"\n                    [wizardService]="wizardService"\n                    [wizardApiInjector]="wizardInjector"\n                ></se-modal-wizard-step-outlet>\n            </div>\n        </div>\n    '});var $n=function(){function ModalWizardTemplateComponent(e,t,n,i,o,r){this.modalManager=e;this.wizardActions=t;this.defaultWizardActionStrategy=n;this.upgrade=i;this.componentFactoryResolver=o;this.injector=r}ModalWizardTemplateComponent.prototype.ngOnInit=function(){var e=this;this.modalManager.getModalData().subscribe((function(t){e.wizardService=new On(e.defaultWizardActionStrategy,B);e.wizardService.properties=t.properties;e.assignExternalController(t);if(typeof e.getWizardConfig!=="function"){throw new Error("The provided controller must provide a getWizardConfig() function.")}var n=e.getWizardConfig();e._wizardContext={_steps:n.steps};e.executeAction=function(t){e.wizardService.executeAction(t)};e.wizardService.onLoadStep=function(t,n){e.modalManager.setTitle(n.title);if(n.templateUrl){e._wizardContext.templateUrl=n.templateUrl}else if(n.component){e._wizardContext.component=n.component}e.modalManager.removeAllButtons();var i=(n.actions||[]).map((function(t){return e.convertActionToButtonConf(t)}));e.modalManager.addButtons(i)};e.wizardService.onClose=function(t){e.modalManager.close(t)};e.wizardService.onCancel=function(){e.modalManager.close()};e.wizardService.onStepsUpdated=function(t){e.setupNavBar(t);e._wizardContext._steps=t};e.wizardService.initialize(n);e.setupModal(n)}))};ModalWizardTemplateComponent.prototype.setupNavBar=function(e){var t=this;this._wizardContext.navActions=e.map((function(e,n){var i=t.wizardActions.navBarAction({id:"NAV-"+e.id,stepIndex:n,wizardService:t.wizardService,destinationIndex:n,i18n:e.name,isCurrentStep:function(){return i.stepIndex===t.wizardService.getCurrentStepIndex()}});return i}))};ModalWizardTemplateComponent.prototype.setupModal=function(e){var t=this;this._wizardContext.templateOverride=e.templateOverride;if(e.cancelAction){this.modalManager.setDismissCallback((function(){return t.wizardService.executeAction(e.cancelAction)}))}this.setupNavBar(e.steps)};ModalWizardTemplateComponent.prototype.convertActionToButtonConf=function(e){var t=this;return{id:e.id,style:e.isMainAction?o.FundamentalModalButtonStyle.Primary:o.FundamentalModalButtonStyle.Default,label:e.i18n,action:o.FundamentalModalButtonAction.None,disabledFn:function(){return!e.enableIfCondition()},callback:function(){t.wizardService.executeAction(e);return g.of(null)}}};ModalWizardTemplateComponent.prototype.assignExternalController=function(e){if(e.controller){this.assignLegacyController(e)}if(e.component){this.assignAngularController(e)}};ModalWizardTemplateComponent.prototype.assignLegacyController=function(e){var t=this;a.assign(this,this.$controller(e.controller,{wizardManager:this.wizardService}));this.legacyController={value:function(){return t},alias:e.controllerAs}};ModalWizardTemplateComponent.prototype.assignAngularController=function(e){var t=s.Injector.create({providers:[{provide:An,useValue:this.wizardService}],parent:this.injector});var n=this.componentFactoryResolver.resolveComponentFactory(e.component);var i=n.create(t).instance;a.assign(this,i);this.wizardInjector=s.Injector.create({providers:[{provide:Dn,useValue:i}],parent:this.injector})};Object.defineProperty(ModalWizardTemplateComponent.prototype,"$controller",{get:function(){return this.upgrade.$injector.get("$controller")},enumerable:false,configurable:true});ModalWizardTemplateComponent=__decorate([s.Component({selector:"se-modal-wizard-template",template:'\n        <div id="yModalWizard">\n            <div class="se-modal-wizard-template">\n                <se-modal-wizard-nav-bar\n                    [navActions]="_wizardContext?.navActions"\n                    (executeAction)="executeAction($event)"\n                ></se-modal-wizard-nav-bar>\n                <se-modal-wizard-step-outlet\n                    [steps]="_wizardContext?._steps"\n                    [compileHtmlNgController]="legacyController"\n                    [wizardService]="wizardService"\n                    [wizardApiInjector]="wizardInjector"\n                ></se-modal-wizard-step-outlet>\n            </div>\n        </div>\n    '}),__metadata("design:paramtypes",[o.FundamentalModalManagerService,Ln,Vn,i.UpgradeModule,s.ComponentFactoryResolver,s.Injector])],ModalWizardTemplateComponent);return ModalWizardTemplateComponent}();var Un=function(){ModalWizard.$inject=["modalService"];function ModalWizard(e){this.modalService=e}ModalWizard.prototype.open=function(e){var t=this;this.validateConfig(e);return new Promise((function(n,i){var o=t.modalService.open({component:$n,templateConfig:{isDismissButtonVisible:true},data:e,config:{focusTrapped:false,backdropClickCloseable:false}});o.afterClosed.subscribe(n,i)}))};ModalWizard.prototype.open.$inject=["config"];ModalWizard.prototype.validateConfig=function(e){if(!e.controller&&!e.component){throw new Error("WizardService - initialization exception. No controller nor component provided")}if(e.controller&&e.component){throw new Error("WizardService - initialization exception. Provide either controller or component")}};ModalWizard.prototype.validateConfig.$inject=["config"];ModalWizard=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.IModalService])],ModalWizard);return ModalWizard}();var jn=function(){function WizardModule(){}WizardModule=__decorate([s.NgModule({imports:[u.CommonModule,Nn,m.TranslateModule],providers:[Un,Ln,Vn],declarations:[$n,kn,Fn],entryComponents:[$n,kn,Fn]})],WizardModule);return WizardModule}();function $exceptionHandler(e){"ngInject";var t=[/^Possibly unhandled rejection/];var n=[/Unexpected request/,/No more request expected/];return function exceptionHandler(i,o){if(t.some((function(e){return e.test(i)}))){return}if(n.some((function(e){return e.test(i)}))){e.error("E2E mock issue: "+i);return}e.error(i)}}function isAjaxError(e){return e.hasOwnProperty("headers")}function handlePromiseRejections(e,t,n,i){var defaultFailureCallback=function(i){if(undefined!==i&&"canceled"!==i){if(n.isPlainObject(i)){if(!isAjaxError(i)){t.error("exception caught in promise: "+JSON.stringify(i))}}else if(!n.isBoolean(i)){t.error(i)}}return e.reject(i)};var o=i.then;i.then=function(e,t,n){var i=t?t:defaultFailureCallback;return o.call(this,e,i,n)};return i}var Bn=function(){function ConfigModule(){}ConfigModule=__decorate([SeModule({providers:[$exceptionHandler],config:["$qProvider","$provide",function(e,t){"ngInject";e.errorOnUnhandledRejections(true);t.decorator("$q",["$delegate","$log","lodash",function(e,t,n){"ngInject";var i=e.when;e.when=function(){if(arguments[0]&&!arguments[0].then){return handlePromiseRejections(e,t,n,i.apply(this,arguments))}else{return i.apply(this,arguments)}};var o=e.all;e.all=function(){return handlePromiseRejections(e,t,n,o.apply(e,arguments))};var r=e.defer;e.defer=function(){var i=r.bind(e)();handlePromiseRejections(e,t,n,i.promise);return i};return e}]);t.decorator("$timeout",["$delegate","$q","$log","lodash",function(e,t,n,i){"ngInject";var o=e;function wrappedTimeout(){var r;var a=arguments;if(typeof window.Zone==="function"){(new window.Zone).run((function(){r=handlePromiseRejections(t,n,i,o.apply(e,a))}))}else{r=handlePromiseRejections(t,n,i,o.apply(e,a))}return r}i.merge(wrappedTimeout,o);return wrappedTimeout}])}]})],ConfigModule);return ConfigModule}();var Hn;(function(e){e["None"]="none";e["Close"]="close";e["Dismiss"]="dismiss"})(Hn||(Hn={}));var Gn;(function(e){e["Default"]="default";e["Primary"]="primary"})(Gn||(Gn={}));var Wn={id:"button.id",label:"button.label",action:Hn.None,style:Gn.Primary,disabled:false,callback:null};var qn=function(){function ModalManager(e,t,n){var i=this;this.config=e;this.$translate=t;this.modalInstance=n;this.title="";this.showDismissX=true;this.buttons=[];this._defaultButtonOptions=Wn;if(!this.modalInstance){throw new Error("no.modalInstance.injected")}if(typeof this.config.title==="string"){this.title=e.title}if(typeof this.config.titleSuffix==="string"){this.titleSuffix=e.titleSuffix}if(this.config.buttons){this.buttons=__spreadArrays(this.buttons,this.config.buttons.map((function(e){return i.createButton(e)})))}this.closeFunction=this.modalInstance.close;this.dismissFunction=this.modalInstance.dismiss}ModalManager.prototype.addButton=function(e){var t=this.createButton(e);this.buttons=__spreadArrays(this.buttons,[t]);return t};ModalManager.prototype.getButtons=function(){return this.buttons};ModalManager.prototype.removeAllButtons=function(){this.buttons=[]};ModalManager.prototype.removeButton=function(e){this.buttons=this.buttons.filter((function(t){return t.id!==e}))};ModalManager.prototype.enableButton=function(e){this.buttons=this.buttons.map((function(t){return t.id===e?__assign(__assign({},t),{disabled:false}):t}))};ModalManager.prototype.disableButton=function(e){this.buttons=this.buttons.map((function(t){return t.id===e?__assign(__assign({},t),{disabled:true}):t}))};ModalManager.prototype.getButton=function(e){return this.buttons.find((function(t){return t.id===e}))};ModalManager.prototype.setShowHeaderDismiss=function(e){if(typeof e==="boolean"){this.showDismissX=e}else{throw new Error("modalService.ModalManager.showDismissX.illegal.param")}};ModalManager.prototype.setDismissCallback=function(e){this.dismissCallback=e};ModalManager.prototype.setButtonHandler=function(e){this.buttonEventCallback=e};ModalManager.prototype.close=function(e){if(this.closeFunction){this.closeFunction(e)}};ModalManager.prototype.dismiss=function(e){if(this.dismissFunction){this.dismissFunction(e)}};ModalManager.prototype._showDismissButton=function(){return this.showDismissX};ModalManager.prototype._buttonPressed=function(e){var t=this;var n;if(e.callback){n=e.callback()}else if(this.buttonEventCallback){n=this.buttonEventCallback(e.id)}if(e.action!==Hn.None){var i=e.action===Hn.Close?this.close:this.dismiss;if(n){n.then((function(e){return i.call(t,e)})).catch(a.noop)}else{i.call(this)}}if(n){n.then(a.noop).catch(a.noop)}};ModalManager.prototype._handleDismissButton=function(){var e=this;if(this.dismissCallback){this.dismissCallback().then((function(t){return e.dismiss(t)})).catch(a.noop)}else{this.dismiss()}};ModalManager.prototype._hasButtons=function(){return this.buttons.length>0};ModalManager.prototype.createButton=function(e){var t=__assign(__assign({},this._defaultButtonOptions),e);this.$translate(e.label||this._defaultButtonOptions.label).then((function(e){t.label=e}));var n=Object.keys(Gn).some((function(e){return Gn[e]===t.style}));var i=Object.keys(Hn).some((function(e){return Hn[e]===t.action}));if(!n){throw new Error("modalService.ModalManager._createButton.illegal.button.style")}if(!i){throw new Error("modalService.ModalManager._createButton.illegal.button.action")}return t};return ModalManager}();function modalControllerClassFactory(e){var t=function(){ModalController.$inject=["$scope","$uibModalInstance","$translate","$controller","$templateCache","stringUtils"];function ModalController(t,n,i,o,a,s){this.$scope=t;this.$uibModalInstance=n;this.$translate=i;this.$controller=o;this.$templateCache=a;this.stringUtils=s;this._modalManager=new qn(e,this.$translate,this.$uibModalInstance);this.$scope.modalController=this;if(e.controller){r.extend(this,this.$controller(e.controller,{$scope:t,modalManager:this._modalManager}));if(this.init){this.init()}}if(e.controllerAs){this.$scope[e.controllerAs]=this}if(e.templateInline){this.templateUrl="modalTemplateKey"+btoa(this.stringUtils.generateIdentifier());this.$templateCache.put(this.templateUrl,e.templateInline)}else{this.templateUrl=e.templateUrl}}ModalController.prototype.init=function(){};ModalController.prototype.close=function(e){this._modalManager.close(e);this.$templateCache.remove(this.templateUrl)};ModalController.prototype.dismiss=function(e){this._modalManager.dismiss(e);this.$templateCache.remove(this.templateUrl)};ModalController.prototype._getModalType=function(){var t=e.templateInline?e.inlineTemplateSelector:this.templateUrl.split(".")[0];return"se-modal--"+t};return ModalController}();return t}window.__smartedit__.addDecoratorPayload("Injectable","ModalService",{providedIn:"root"});var Kn=function(e){__extends(ModalService,e);ModalService.$inject=["fundamentalModalService","upgrade"];function ModalService(t,n){var i=e.call(this,t)||this;i.fundamentalModalService=t;i.upgrade=n;return i}ModalService.prototype.hasOpenModals=function(){return!!this.$uibModalStack.getTop()||this.fundamentalModalService.hasOpenModals()};ModalService.prototype.dismissAll=function(){if(this.$uibModalStack.getTop()){this.$uibModalStack.dismissAll()}if(this.fundamentalModalService.hasOpenModals()){this.fundamentalModalService.dismissAll()}};ModalService.prototype.open=function(t){return t.component?e.prototype.open.call(this,t):this.angularJSOpen(t)};ModalService.prototype.open.$inject=["conf"];ModalService.prototype.angularJSOpen=function(e){var t=e||{};if(t.templateUrl&&t.templateInline){throw new Error("modalService.configuration.errors.2.templates.provided")}return this.$uibModal.open({templateUrl:"modalTemplate.html",size:t.size||"lg",backdrop:"static",keyboard:false,controller:modalControllerClassFactory(t),controllerAs:"modalController",windowClass:t.cssClasses||null,animation:!e.animation&&this.$animate.enabled()}).result};ModalService.prototype.angularJSOpen.$inject=["conf"];Object.defineProperty(ModalService.prototype,"$uibModalStack",{get:function(){return this.upgrade.$injector.get("$uibModalStack")},enumerable:false,configurable:true});Object.defineProperty(ModalService.prototype,"$uibModal",{get:function(){return this.upgrade.$injector.get("$uibModal")},enumerable:false,configurable:true});Object.defineProperty(ModalService.prototype,"$animate",{get:function(){return this.upgrade.$injector.get("$animate")},enumerable:false,configurable:true});ModalService=__decorate([SeDowngradeService(),s.Injectable({providedIn:"root"}),__metadata("design:paramtypes",[h.ModalService,i.UpgradeModule])],ModalService);return ModalService}(o.ModalService);var Yn=n(550);var Xn=function(){function ModalServiceModule(){}ModalServiceModule=__decorate([SeModule({imports:[Yn,"translationServiceModule","functionsModule","coretemplates"],providers:[{provide:"MODAL_BUTTON_ACTIONS",useValue:{NONE:Hn.None,CLOSE:Hn.Close,DISMISS:Hn.Dismiss}},{provide:"MODAL_BUTTON_STYLES",useValue:{DEFAULT:Gn.Default,PRIMARY:Gn.Primary,SECONDARY:Gn.Default}}]})],ModalServiceModule);return ModalServiceModule}();var Zn=function(){function IUIBootstrapModalService(){}IUIBootstrapModalService.prototype.getPromiseChain=function(){return null};IUIBootstrapModalService.prototype.open=function(e){return null};return IUIBootstrapModalService}();var Qn=function(){function IUIBootstrapModalStackService(){}IUIBootstrapModalStackService.prototype.close=function(e,t){return undefined};IUIBootstrapModalStackService.prototype.dismiss=function(e,t){return undefined};IUIBootstrapModalStackService.prototype.dismissAll=function(e){return undefined};IUIBootstrapModalStackService.prototype.getTop=function(){return undefined};IUIBootstrapModalStackService.prototype.open=function(e,t){return undefined};return IUIBootstrapModalStackService}();var Jn=new s.InjectionToken("TOOLBAR_ITEM");(function(e){e["TEMPLATE"]="TEMPLATE";e["ACTION"]="ACTION";e["HYBRID_ACTION"]="HYBRID_ACTION"})(t.ToolbarItemType||(t.ToolbarItemType={}));(function(e){e["left"]="left";e["middle"]="middle";e["right"]="right"})(t.ToolbarSection||(t.ToolbarSection={}));(function(e){e["left"]="left";e["center"]="center";e["right"]="right"})(t.ToolbarDropDownPosition||(t.ToolbarDropDownPosition={}));var ei=function(){function IToolbarService(e,t,n){this.logService=e;this.$templateCache=t;this.permissionService=n;this.aliases=[];this.actions={}}IToolbarService.prototype.getActions=function(){return this.actions};IToolbarService.prototype.getAliases=function(){return this.aliases};IToolbarService.prototype.addItems=function(e){var t=this;var n=e.filter((function(e){var n=true;if(!e.key){t.logService.error("addItems() - Cannot add item without key.");n=false}if(e.contextTemplate&&e.contextTemplateUrl){t.logService.error("addItems() - Toolbar item should contain only one of contextTemplate or contextTemplateUrl");n=false}return n})).map((function(e){var n=e.key;t.actions[n]=e.callback;var i;if(e.contextTemplate){i="toolbarItemContextTemplate"+btoa(B.generateIdentifier())+".html";t.$templateCache.put(i,e.contextTemplate)}else{i=e.contextTemplateUrl}var o={key:n,name:e.nameI18nKey,iconClassName:e.iconClassName,description:e.descriptionI18nKey,icons:e.icons,type:e.type,include:e.include,priority:e.priority||500,section:e.section||"left",isOpen:false,component:e.component,actionButtonFormat:e.actionButtonFormat,keepAliveOnClose:e.keepAliveOnClose||false,contextTemplateUrl:i,contextComponent:e.contextComponent,dropdownPosition:e.dropdownPosition,permissions:e.permissions};return t._populateIsPermissionGranted(o)}));return Promise.all(n).then((function(e){if(e.length>0){t.addAliases(e)}return}))};IToolbarService.prototype._populateIsPermissionGranted=function(e){if(e.permissions){return Promise.resolve(this.permissionService.isPermitted([{names:e.permissions}]).then((function(t){e.isPermissionGranted=t;return e})))}else{e.isPermissionGranted=true;return Promise.resolve(e)}};IToolbarService.prototype.addAliases=function(e){"proxyFunction";return};IToolbarService.prototype.removeItemByKey=function(e){"proxyFunction";return};IToolbarService.prototype._removeItemOnInner=function(e){"proxyFunction";return};IToolbarService.prototype.removeAliasByKey=function(e){"proxyFunction";return};IToolbarService.prototype.triggerActionOnInner=function(e){"proxyFunction";return};return IToolbarService}();var ti=/web.+\/(\w+)\.html/;var delegator=function(e){"ngInject";var t={};var n=e.put;e.put=function(){var i=arguments[0];var o=arguments[1];if(ti.test(i)){var r=ti.exec(i)[1]+".html";if(!t[r]){n.apply(e,[r,o]);t[r]=i}else{throw new Error("[templateCacheDecorator] html templates "+t[r]+" and "+i+" are conflicting, you must give them different filenames")}}return n.apply(e,arguments)};return e};delegator.$inject=["$delegate"];var ni=function(){function TemplateCacheDecoratorModule(){}TemplateCacheDecoratorModule=__decorate([SeModule({config:["$provide",function(e){"ngInject";e.decorator("$templateCache",["$delegate",delegator])}]})],TemplateCacheDecoratorModule);return TemplateCacheDecoratorModule}();var ii=function(){function TextTruncateService(){}TextTruncateService.prototype.truncateToNearestWord=function(e,t,n){if(n===void 0){n=""}if(a.isNil(t)||e>t.length){return new z(t,t,false)}var i=/(\s)/g;var o=t.match(i);var r=0;if(!o){r=e}else{for(var s=0;s<o.length;s++){var c=this.getPositionOfCharacters(t,o[s],s+1);if(c>e){break}r=c}}var l=t.substr(0,r);return new z(t,l,true,n)};TextTruncateService.prototype.truncateToNearestWord.$inject=["limit","text","ellipsis"];TextTruncateService.prototype.getPositionOfCharacters=function(e,t,n){return e.split(t,n).join(t).length};TextTruncateService.prototype.getPositionOfCharacters.$inject=["searchString","characters","index"];TextTruncateService=__decorate([SeDowngradeService()],TextTruncateService);return TextTruncateService}();var oi="FrequentlyChangingContent";var ri=new o.CacheAction(oi);var ai="RarelyChangingContent";var si=new o.CacheAction(ai);var ci=new o.EvictionTag({event:"AUTHORIZATION_SUCCESS"});var li=new o.EvictionTag({event:"USER_HAS_CHANGED"});var di=new o.EvictionTag({event:"CATALOG_SYNCHRONIZED_EVENT"});var pi=new o.EvictionTag({event:"CATALOG_EVENT",relatedTags:[di,li]});var ui=new o.EvictionTag({event:"PAGE_CREATED_EVENT"});var mi=new o.EvictionTag({event:"PAGE_DELETED_EVENT"});var gi=new o.EvictionTag({event:"PAGE_UPDATED_EVENT"});var hi=new o.EvictionTag({event:"PAGE_RESTORED_EVENT"});var vi=new o.EvictionTag({event:"PAGE_CHANGE"});var fi=new o.EvictionTag({event:"pageEvictionTag",relatedTags:[ui,mi,gi]});var _i=new o.EvictionTag({event:"EVENT_CONTENT_CATALOG_UPDATE"});var yi=new o.EvictionTag({event:"EVENT_PERSPECTIVE_CHANGED"});var Ci="/cmssmarteditwebservices/v1/sites/:siteUID/contentcatalogs";var Si=function(e){__extends(ContentCatalogRestService,e);ContentCatalogRestService.$inject=["restServiceFactory"];function ContentCatalogRestService(t){return e.call(this,t,Ci)||this}ContentCatalogRestService=__decorate([SeDowngradeService(),o.CacheConfig({actions:[si],tags:[li,fi,_i]}),o.OperationContextRegistered(Ci,["CMS","INTERACTIVE"]),__metadata("design:paramtypes",[o.RestServiceFactory])],ContentCatalogRestService);return ContentCatalogRestService}(o.AbstractCachedRestService);var bi=function(e){__extends(ProductCatalogRestService,e);ProductCatalogRestService.$inject=["restServiceFactory"];function ProductCatalogRestService(t){return e.call(this,t,"/cmssmarteditwebservices/v1/sites/:siteUID/productcatalogs")||this}ProductCatalogRestService=__decorate([SeDowngradeService(),o.CacheConfig({actions:[si],tags:[li]}),__metadata("design:paramtypes",[o.RestServiceFactory])],ProductCatalogRestService);return ProductCatalogRestService}(o.AbstractCachedRestService);var Ii=function(){PermissionsRestService.$inject=["restServiceFactory"];function PermissionsRestService(e){this.URI="/permissionswebservices/v1/permissions/global/search";this.resource=e.get(this.URI)}PermissionsRestService.prototype.get=function(e){return this.resource.queryByPost({principalUid:e.user},{permissionNames:e.permissionNames}).then((function(e){return{permissions:e.permissions}}))};PermissionsRestService.prototype.get.$inject=["queryData"];PermissionsRestService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.RestServiceFactory])],PermissionsRestService);return PermissionsRestService}();var wi=function(){AuthorizationService.$inject=["logService","sessionService","permissionsRestService"];function AuthorizationService(e,t,n){this.logService=e;this.sessionService=t;this.permissionsRestService=n}AuthorizationService.prototype.hasGlobalPermissions=function(e){var t=this;if(!e.length||e.length<1){throw new Error("permissionNames must be a non-empty array")}var onSuccess=function(n){return t.mergePermissionResults(n,e)};var onError=function(){t.logService.error("AuthorizationService - Failed to determine authorization for the following permissions: "+e.toString());return false};return this.getPermissions(e).then(onSuccess,onError)};AuthorizationService.prototype.hasGlobalPermissions.$inject=["permissionNames"];AuthorizationService.prototype.getPermissionResult=function(e,t){var n=e.permissions.find((function(e){return e.key.toLowerCase()===t.toLowerCase()}));return!!n&&n.value==="true"};AuthorizationService.prototype.getPermissionResult.$inject=["permissionResults","permissionName"];AuthorizationService.prototype.mergePermissionResults=function(e,t){var n=!!t&&t.length>0;var i=0;while(n&&i<t.length){n=n&&this.getPermissionResult(e,t[i++])}return n};AuthorizationService.prototype.mergePermissionResults.$inject=["permissionResults","permissionNames"];AuthorizationService.prototype.getPermissions=function(e){var t=this;return this.sessionService.getCurrentUsername().then((function(n){if(!n){return{permissions:[]}}return t.permissionsRestService.get({user:n,permissionNames:e.join(",")})}))};AuthorizationService.prototype.getPermissions.$inject=["permissionNames"];AuthorizationService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService,o.ISessionService,Ii])],AuthorizationService);return AuthorizationService}();var Ei=function(){CrossFrameEventServiceGateway.$inject=["gatewayFactory"];function CrossFrameEventServiceGateway(e){return e.createGateway("CROSS_FRAME_EVENT")}CrossFrameEventServiceGateway.crossFrameEventServiceGatewayToken=new s.InjectionToken("crossFrameEventServiceGatewayToken");CrossFrameEventServiceGateway=__decorate([s.Injectable(),__metadata("design:paramtypes",[Xt])],CrossFrameEventServiceGateway);return CrossFrameEventServiceGateway}();window.__smartedit__.addDecoratorPayload("Injectable","CrossFrameEventService",{providedIn:"root"});var Pi=function(){CrossFrameEventService.$inject=["systemEventService","crossFrameEventServiceGateway","windowUtils"];function CrossFrameEventService(e,t,n){this.systemEventService=e;this.crossFrameEventServiceGateway=t;this.windowUtils=n}CrossFrameEventService.prototype.publish=function(e,t){var n=[this.systemEventService.publishAsync(e,t)];if(this.windowUtils.getGatewayTargetFrame()){n.push(this.crossFrameEventServiceGateway.publish(e,t))}return Promise.all(n)};CrossFrameEventService.prototype.publish.$inject=["eventId","data"];CrossFrameEventService.prototype.subscribe=function(e,t){var n=this.systemEventService.subscribe(e,t);var i=this.crossFrameEventServiceGateway.subscribe(e,t);var unsubscribeFn=function(){n();i()};return unsubscribeFn};CrossFrameEventService.prototype.subscribe.$inject=["eventId","handler"];CrossFrameEventService=__decorate([SeDowngradeService(),s.Injectable({providedIn:"root"}),__param(1,s.Inject(Ei.crossFrameEventServiceGatewayToken)),__metadata("design:paramtypes",[Kt,Yt,L])],CrossFrameEventService);return CrossFrameEventService}();var Ti="GatewayProxied";var Ai=o.annotationService.getClassAnnotationFactory(Ti);function GatewayProxiedAnnotationFactory(e){"ngInject";return o.annotationService.setClassAnnotationFactory(Ti,(function(t){return function(n,i,o){i.call.apply(i,__spreadArrays([n],o));n.gatewayId=P.buildServiceName(i);e.initForService(n,t.length>0?t:null)}}))}var Di=function(){Instrumentation.$inject=["readObjectStructure"];function Instrumentation(e){this.readObjectStructure=e;this._FUNCTION_EXECUTION_DATA={};this._DECORATED_MODULES=[];this._DEFAULT_LEVEL=10;this.alreadyBrowsed=[];this.functionsUtils=new o.FunctionsUtils}Instrumentation.prototype.execute=function(e,t,n){var i=this;var o=t||this._DEFAULT_LEVEL;if(e.modules===undefined){return}this._logFunctionArgumentsAndReturnValue=this._logFunctionArgumentsAndReturnValue.bind(this);this._getServiceConfig=this._getServiceConfig.bind(this);this._getIterableDelegate=this._getIterableDelegate.bind(this);this._getDelegateFunctions=this._getDelegateFunctions.bind(this);this._extractComponentBindings=this._extractComponentBindings.bind(this);this._extractDirectiveBindings=this._extractDirectiveBindings.bind(this);var a=e.$provide;e.modules.forEach((function(t){i.alreadyBrowsed.push(t);if(!n){if(i._DECORATED_MODULES.indexOf(t)>-1||!t.endsWith("Module")){return}}i._DECORATED_MODULES.push(t);var s=i._getServiceConfig(t);var c=s.exclude.concat(e.globalExcludedFunctions||[]);var l=s.include.concat(e.globalIncludedFunctions||[]);var d=r.module(t);d._invokeQueue.forEach((function(n){var o=n[1];if(["factory","component","service","directive"].indexOf(o)>-1){var r=n[2];var s=r[0];if(o==="component"){i._extractComponentBindings(r)}else if(o==="directive"){i._extractDirectiveBindings(r)}else{try{if(i._isEligible(s,e.globalExcludedRecipes,e.globalIncludedRecipes)){a.decorator(s,["$delegate",function(e){var t=i._getIterableDelegate(e);var n=i._getDelegateFunctions(t,c,l);n.forEach((function(e){if(!t[e.name].__DECORATED__){var n=i;var o=n.functionsUtils.isEmpty(e.fn);if(o){t[e.name]=function(){"proxyFunction";var t=e.fn.apply(this,arguments);n._logFunctionArgumentsAndReturnValue(s,e.name,arguments,t);return t}}else{t[e.name]=function(){var t=e.fn.apply(this,arguments);n._logFunctionArgumentsAndReturnValue(s,e.name,arguments,t);return t}}t[e.name].__DECORATED__=true}}));return e}])}else{i.warn("not eligible recipe : "+s)}}catch(e){i.error(e);i.warn("Warning-No-Service-Exists: "+s+" of type "+o+", moduleName: "+t)}}}}));if(o>0){var p=o-1;d.requires.forEach((function(t){if(i.alreadyBrowsed.indexOf(t)===-1&&e.defaultExcludeModules.indexOf(t)===-1&&t.indexOf("Mock")===-1){i.execute({globalExcludedRecipes:e.globalExcludedRecipes,globalIncludedRecipes:e.globalIncludedRecipes,globalExcludedFunctions:e.globalExcludedFunctions,globalIncludedFunctions:e.globalIncludedFunctions,modules:[t],$provide:e.$provide,defaultExcludeModules:e.defaultExcludeModules},p,false)}}))}}))};Instrumentation.prototype.execute.$inject=["config","_LEVEL","isRoot"];Instrumentation.prototype._getServiceConfig=function(e){return typeof e==="string"?{name:e,exclude:[],include:[]}:e};Instrumentation.prototype._getServiceConfig.$inject=["service"];Instrumentation.prototype._getIterableDelegate=function(e){return e.prototype?e.prototype:e};Instrumentation.prototype._getIterableDelegate.$inject=["$delegate"];Instrumentation.prototype._matches=function(e,t){return new RegExp(t,"gi").test(e)};Instrumentation.prototype._matches.$inject=["name","nameRegex"];Instrumentation.prototype._getDelegateFunctions=function(e,t,n){var i=[];for(var o in e){if(typeof e[o]==="function"){if(this._isEligible(o,t,n)){i.push({name:o,fn:e[o]})}}}return i};Instrumentation.prototype._getDelegateFunctions.$inject=["$delegate","serviceExcludeFunctions","serviceIncludeFunctions"];Instrumentation.prototype._isEligible=function(e,t,n){return(!n.length||!!n.find(this._matches.bind(this,e)))&&(!t.length||!t.find(this._matches.bind(this,e)))};Instrumentation.prototype._isEligible.$inject=["recipeName","excludes","includes"];Instrumentation.prototype._resultIsPromise=function(e){return!!e&&(e.$$state!==undefined||!!e.then)};Instrumentation.prototype._resultIsPromise.$inject=["result"];Instrumentation.prototype._keyExists=function(e){if(this._FUNCTION_EXECUTION_DATA[e]!==undefined){return true}return false};Instrumentation.prototype._keyExists.$inject=["key"];Instrumentation.prototype._extractComponentBindings=function(e){var t=e[0];var n=e[1].bindings;this._logDirectiveResult(t,n)};Instrumentation.prototype._extractComponentBindings.$inject=["args"];Instrumentation.prototype._extractDirectiveBindings=function(e){var t=e[0];try{var n=e[1];var i=null;if(typeof n==="function"){i=n()}else if(n instanceof Array){i=n[n.length-1]()}if(i){var o=i.scope;var r=i.bindToController;this._logDirectiveResult(t,undefined,o,r)}}catch(e){this._logDirectiveResult(t)}};Instrumentation.prototype._extractDirectiveBindings.$inject=["args"];Instrumentation.prototype._logFunctionArgumentsAndReturnValue=function(e,t,n,i){var o=this;var a=this.readObjectStructure(Array.prototype.slice.call(n));var s=null;try{s=e+"~"+t+"~"+r.toJson(a)}catch(e){this.error("COULD NOT GENERATE KEY");return i}if(this._keyExists(s)){return i}this._FUNCTION_EXECUTION_DATA[s]={};if(this._resultIsPromise(i)){return i.then((function(n){try{o._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:{promiseValue:o.readObjectStructure(n)}};o.warn(r.toJson(o._FUNCTION_EXECUTION_DATA[s]))}catch(e){o.error("COULD NOT STRINGIFY")}return Promise.resolve(n)}),(function(n){o.error("ERROR WHILE RESOLVING RESULT: "+n);o._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:{promiseValue:n}};o.warn(r.toJson(o._FUNCTION_EXECUTION_DATA[s]));return Promise.reject(n)}))}else{this._FUNCTION_EXECUTION_DATA[s]={serviceName:e,functionName:t,arguments:a,result:this.readObjectStructure(i)};try{this.warn(r.toJson(this._FUNCTION_EXECUTION_DATA[s]))}catch(e){this.error("COULD NOT STRINGIFY")}return i}};Instrumentation.prototype._logFunctionArgumentsAndReturnValue.$inject=["serviceName","functionName","_args","result"];Instrumentation.prototype._logDirectiveResult=function(e,t,n,i){this.warn(r.toJson({directiveName:e,bindings:t,scope:n,bindToController:i}))};Instrumentation.prototype._logDirectiveResult.$inject=["directiveName","bindings","scope","bindToController"];Instrumentation.prototype.warn=function(e){console.warn(e)};Instrumentation.prototype.warn.$inject=["message"];Instrumentation.prototype.error=function(e){console.error(e)};Instrumentation.prototype.error.$inject=["message"];Instrumentation=__decorate([SeInjectable(),__metadata("design:paramtypes",[Function])],Instrumentation);return Instrumentation}();function getItemFromSessionStorage(e){try{return window.sessionStorage.getItem(e)}catch(e){return null}}var instrument=function(e,t,n){"ngInject";if(getItemFromSessionStorage("isInstrumented")==="true"){new Di(t).execute({globalExcludedRecipes:["assetsService","configurationExtractorService","experienceService"],globalIncludedRecipes:["^.*Interface$","^.*Service$","^.*Helper$","^.*Hanlder$","^.*Editor$","^I.*$","^.*Decorator$","^.*Directive$","^.*Registry$","^.*Listener$","^.*Resource$","^.*Populator$","^.*Constants$","^.*Factory$","^.*Facade$","^.*Interceptor$","^.*Manager$","^.*Class$","^.*Strategy","^.*Predicate","^.*Retry","^.*Gateway"],globalExcludedFunctions:["^_.*$","^\\$","lodash","yjQuery"],globalIncludedFunctions:["^.*$"],defaultExcludeModules:["functionsModule","ycmssmarteditModule","ui.bootstrap","ui.select","yjQuery","instrumentModule","ui.tree","treeModule"],modules:[n],$provide:e},15,true)}};instrument.$inject=["$provide","readObjectStructure","TOP_LEVEL_MODULE_NAME"];var Oi=function(e){__extends(LanguageService,e);LanguageService.$inject=["logService","translateService","promiseUtils","eventService","browserService","storageService","injector","languageServiceConstants"];function LanguageService(t,n,i,o,r,a,s,c){var l=e.call(this,t,n,i,o,r,a,s,c)||this;l.logService=t;l.translateService=n;l.promiseUtils=i;l.eventService=o;l.browserService=r;l.storageService=a;l.injector=s;l.languageServiceConstants=c;return l}LanguageService.prototype.getLanguagesForSite=function(e){var t=this;return this.languageRestService.get({siteUID:e}).then((function(e){return e.languages}),(function(e){t.logService.error("LanguageService.getLanguagesForSite() - Error loading languages");return Promise.reject(e)}))};LanguageService.prototype.getLanguagesForSite.$inject=["siteUID"];Object.defineProperty(LanguageService.prototype,"languageRestService",{get:function(){return this.injector.get(o.RestServiceFactory).get(this.languageServiceConstants.LANGUAGE_RESOURCE_URI)},enumerable:false,configurable:true});__decorate([o.Cached({actions:[o.rarelyChangingContent]}),__metadata("design:type",Function),__metadata("design:paramtypes",[String]),__metadata("design:returntype",Promise)],LanguageService.prototype,"getLanguagesForSite",null);LanguageService=__decorate([SeDowngradeService(),__param(3,s.Inject(o.EVENT_SERVICE)),__param(7,s.Inject(o.LANGUAGE_SERVICE_CONSTANTS)),__metadata("design:paramtypes",[o.LogService,m.TranslateService,o.PromiseUtils,Object,o.BrowserService,o.IStorageService,s.Injector,Object])],LanguageService);return LanguageService}(o.LanguageService);var Ri=function(){LanguageServiceGateway.$inject=["gatewayFactory"];function LanguageServiceGateway(t){e.instance=e.instance||t.createGateway("languageSwitch")}e=LanguageServiceGateway;LanguageServiceGateway.prototype.getInstance=function(){return e.instance};var e;LanguageServiceGateway=e=__decorate([SeDowngradeService(),s.Injectable(),__metadata("design:paramtypes",[Xt])],LanguageServiceGateway);return LanguageServiceGateway}();var Mi=function(){function IPerspectiveService(){}IPerspectiveService.prototype.register=function(e){"proxyFunction";return null};IPerspectiveService.prototype.switchTo=function(e){"proxyFunction";return null};IPerspectiveService.prototype.hasActivePerspective=function(){"proxyFunction";return null};IPerspectiveService.prototype.selectDefault=function(){"proxyFunction";return null};IPerspectiveService.prototype.isEmptyPerspectiveActive=function(){"proxyFunction";return null};IPerspectiveService.prototype.refreshPerspective=function(){"proxyFunction";return null};IPerspectiveService.prototype.getActivePerspectiveKey=function(){"proxyFunction";return null};IPerspectiveService.prototype.isHotkeyEnabledForActivePerspective=function(){"proxyFunction";return null};IPerspectiveService.prototype.getActivePerspective=function(){"proxyFunction";return null};IPerspectiveService.prototype.getPerspectives=function(){"proxyFunction";return null};return IPerspectiveService}();var xi=function(){GenericEditorStackService.$inject=["systemEventService","logService"];function GenericEditorStackService(t,n){this.systemEventService=t;this.logService=n;this._editorsStacks={};this.systemEventService.subscribe(e.EDITOR_PUSH_TO_STACK_EVENT,this.pushEditorEventHandler.bind(this));this.systemEventService.subscribe(e.EDITOR_POP_FROM_STACK_EVENT,this.popEditorEventHandler.bind(this))}e=GenericEditorStackService;GenericEditorStackService.prototype.isAnyGenericEditorOpened=function(){return a.size(this._editorsStacks)>=1};GenericEditorStackService.prototype.areMultipleGenericEditorsOpened=function(){return a.size(this._editorsStacks)>1||a.some(this._editorsStacks,(function(e){return e.length>1}))};GenericEditorStackService.prototype.getEditorsStack=function(e){return this._editorsStacks[e]||null};GenericEditorStackService.prototype.getEditorsStack.$inject=["editorStackId"];GenericEditorStackService.prototype.isTopEditorInStack=function(e,t){var n=false;var i=this._editorsStacks[e];if(i){var o=i[i.length-1];n=o&&o.editorId===t}return n};GenericEditorStackService.prototype.isTopEditorInStack.$inject=["editorStackId","editorId"];GenericEditorStackService.prototype.pushEditorEventHandler=function(e,t){this.validateId(t);var n=t.editorStackId;if(!this._editorsStacks[n]){this._editorsStacks[n]=[]}this._editorsStacks[n].push({component:t.component,componentType:t.componentType,editorId:t.editorId})};GenericEditorStackService.prototype.pushEditorEventHandler.$inject=["eventId","editorToPushInfo"];GenericEditorStackService.prototype.popEditorEventHandler=function(e,t){this.validateId(t);var n=t.editorStackId;var i=this._editorsStacks[n];if(!i){this.logService.warn("genericEditorStackService - Stack of editors not found. Cannot pop editor.");return}i.pop();if(i.length===0){delete this._editorsStacks[n]}};GenericEditorStackService.prototype.popEditorEventHandler.$inject=["eventId","editorToPopInfo"];GenericEditorStackService.prototype.validateId=function(e){if(!e.editorStackId){throw new Error("genericEditorStackService - Must provide a stack id.")}};GenericEditorStackService.prototype.validateId.$inject=["editorInfo"];var e;GenericEditorStackService.EDITOR_PUSH_TO_STACK_EVENT="EDITOR_PUSH_TO_STACK_EVENT";GenericEditorStackService.EDITOR_POP_FROM_STACK_EVENT="EDITOR_POP_FROM_STACK_EVENT";GenericEditorStackService=e=__decorate([SeDowngradeService(),s.Injectable(),__metadata("design:paramtypes",[Kt,o.LogService])],GenericEditorStackService);return GenericEditorStackService}();var Ni=function(){NonValidationErrorInterceptor.$inject=["alertService","genericEditorStackService"];function NonValidationErrorInterceptor(e,t){this.alertService=e;this.genericEditorStackService=t}NonValidationErrorInterceptor.prototype.predicate=function(e,t){return t.status===400};NonValidationErrorInterceptor.prototype.predicate.$inject=["request","response"];NonValidationErrorInterceptor.prototype.responseError=function(e,t){var n=this;if(t.error&&t.error.errors){t.error.errors.filter((function(e){var t=e.type==="ValidationError";return!t||t&&!n.genericEditorStackService.isAnyGenericEditorOpened()})).forEach((function(e){n.alertService.showDanger({message:e.message||"se.unknown.request.error",timeout:1e4})}))}return Promise.reject(t)};NonValidationErrorInterceptor.prototype.responseError.$inject=["request","response"];NonValidationErrorInterceptor=__decorate([s.Injectable(),__metadata("design:paramtypes",[un,xi])],NonValidationErrorInterceptor);return NonValidationErrorInterceptor}();var ki=function(){PreviewErrorInterceptor.$inject=["injector","logService","sharedDataService"];function PreviewErrorInterceptor(e,t,n){this.injector=e;this.logService=t;this.sharedDataService=n}PreviewErrorInterceptor.prototype.predicate=function(e,t){return t.status===400&&e.url.indexOf(Ie)>-1&&!o.stringUtils.isBlank(e.body.pageId)&&this._hasUnknownIdentifierError(t.error.errors)};PreviewErrorInterceptor.prototype.predicate.$inject=["request","response"];PreviewErrorInterceptor.prototype.responseError=function(e,t){this.logService.info("The error 400 above on preview is expected in some scenarios, typically when switching catalogs from experience selector.");this.logService.info("Removing the pageId ["+e.body.pageId+"] and creating a preview for homepage");delete e.body.pageId;this.sharedDataService.update(kt,(function(e){delete e.pageId;return e}));this.injector.get("iframeManagerService").setCurrentLocation(null);return this.injector.get(p.HttpClient).request(e).toPromise()};PreviewErrorInterceptor.prototype.responseError.$inject=["request","response"];PreviewErrorInterceptor.prototype._hasUnknownIdentifierError=function(e){var t=e.filter((function(e){return e.type==="UnknownIdentifierError"}));return!!t.length};PreviewErrorInterceptor.prototype._hasUnknownIdentifierError.$inject=["errors"];PreviewErrorInterceptor=__decorate([s.Injectable(),__metadata("design:paramtypes",[s.Injector,o.LogService,o.ISharedDataService])],PreviewErrorInterceptor);return PreviewErrorInterceptor}();var Fi=function(){ResourceNotFoundErrorInterceptor.$inject=["alertService","httpUtils"];function ResourceNotFoundErrorInterceptor(e,t){this.alertService=e;this.httpUtils=t}ResourceNotFoundErrorInterceptor.prototype.predicate=function(e,t){return t.status===404&&!this.httpUtils.isHTMLRequest(e,t)&&!this._isLanguageResourceRequest(e.url)};ResourceNotFoundErrorInterceptor.prototype.predicate.$inject=["request","response"];ResourceNotFoundErrorInterceptor.prototype.responseError=function(e,t){this.alertService.showDanger({message:t.statusText===o.StatusText.UNKNOW_ERROR?"se.unknown.request.error":t.message,timeout:1e4});return Promise.reject(t)};ResourceNotFoundErrorInterceptor.prototype.responseError.$inject=["request","response"];ResourceNotFoundErrorInterceptor.prototype._isLanguageResourceRequest=function(e){var t=new RegExp(tt.replace(/\:.*\//g,".*/"));return t.test(e)};ResourceNotFoundErrorInterceptor.prototype._isLanguageResourceRequest.$inject=["url"];ResourceNotFoundErrorInterceptor=__decorate([s.Injectable(),__metadata("design:paramtypes",[un,o.HttpUtils])],ResourceNotFoundErrorInterceptor);return ResourceNotFoundErrorInterceptor}();function operationContextInteractivePredicate(e,t){return t===ve.INTERACTIVE}function operationContextNonInteractivePredicate(e,t){return a.includes([ve.BACKGROUND_TASKS,ve.NON_INTERACTIVE,ve.BATCH_OPERATIONS],t)}function operationContextCMSPredicate(e,t){return t===ve.CMS}function operationContextToolingPredicate(e,t){return t===ve.TOOLING}var zi=function(){InterceptorHelper.$inject=["logService"];function InterceptorHelper(e){this.logService=e}InterceptorHelper.prototype.handleRequest=function(e,t){return this._handle(e,e,t,false)};InterceptorHelper.prototype.handleRequest.$inject=["config","callback"];InterceptorHelper.prototype.handleResponse=function(e,t){return this._handle(e,e.config,t,false)};InterceptorHelper.prototype.handleResponse.$inject=["response","callback"];InterceptorHelper.prototype.handleResponseError=function(e,t){return this._handle(e,e.config,t,true)};InterceptorHelper.prototype.handleResponseError.$inject=["response","callback"];InterceptorHelper.prototype._isEligibleForInterceptors=function(e){return e&&e.url&&!/.+\.html$/.test(e.url)};InterceptorHelper.prototype._isEligibleForInterceptors.$inject=["config"];InterceptorHelper.prototype._handle=function(e,t,n,i){try{if(this._isEligibleForInterceptors(t)){return n()}else{if(i){return Promise.reject(e)}else{return e}}}catch(t){this.logService.error("caught error in one of the interceptors",t);if(i){return Promise.reject(e)}else{return e}}};InterceptorHelper.prototype._handle.$inject=["chain","config","callback","isError"];InterceptorHelper=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.LogService])],InterceptorHelper);return InterceptorHelper}();var Li=function(){TestModeService.$inject=["upgrade"];function TestModeService(e){this.upgrade=e;this.TEST_KEY="e2eMode"}e=TestModeService;TestModeService.prototype.isE2EMode=function(){return this.isE2EModeLegacy()||this.isE2EModeNg()};TestModeService.prototype.isE2EModeNg=function(){try{return this.upgrade.injector.get(e.TEST_TOKEN)}catch(e){return false}};TestModeService.prototype.isE2EModeLegacy=function(){return this.upgrade.$injector&&this.upgrade.$injector.has(this.TEST_KEY)&&this.upgrade.$injector.get(this.TEST_KEY)};var e;TestModeService.TEST_TOKEN=new s.InjectionToken("TEST_KEY_TOKEN");TestModeService=e=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[i.UpgradeModule])],TestModeService);return TestModeService}();var Vi=function(){PolyfillService.$inject=["browserService","testModeService"];function PolyfillService(e,t){this.browserService=e;this.testModeService=t}PolyfillService.prototype.isEligibleForEconomyMode=function(){return this.browserService.isIE()||this.testModeService.isE2EMode()};PolyfillService.prototype.isEligibleForExtendedView=function(){return this.browserService.isIE()||this.browserService.isFF()||this.testModeService.isE2EMode()};PolyfillService.prototype.isEligibleForThrottledScrolling=function(){return this.browserService.isIE()};PolyfillService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.BrowserService,Li])],PolyfillService);return PolyfillService}();var $i=function(){PriorityService.$inject=["stringUtils"];function PriorityService(e){this.stringUtils=e}PriorityService.prototype.sort=function(e,t){var n=this;return e.sort((function(e,t){var i=e.priority-t.priority;if(i===0){i=n.stringUtils.encode(e).localeCompare(n.stringUtils.encode(t))}return i}))};PriorityService.prototype.sort.$inject=["candidate","ascending"];PriorityService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.StringUtils])],PriorityService);return PriorityService}();var Ui=function(){SmarteditBootstrapGateway.$inject=["gatewayFactory"];function SmarteditBootstrapGateway(e){this.instance=this.instance||e.createGateway("smartEditBootstrap")}SmarteditBootstrapGateway.prototype.getInstance=function(){return this.instance};SmarteditBootstrapGateway.prototype.subscribe=function(e,t){return this.getInstance().subscribe(e,t)};SmarteditBootstrapGateway.prototype.subscribe.$inject=["eventId","callback"];SmarteditBootstrapGateway.prototype.publish=function(e,t,n,i){if(n===void 0){n=0}return this.getInstance().publish(e,t,n,i)};SmarteditBootstrapGateway.prototype.publish.$inject=["eventId","_data","retries","pk"];SmarteditBootstrapGateway.prototype.processEvent=function(e){return this.getInstance().processEvent(e)};SmarteditBootstrapGateway.prototype.processEvent.$inject=["event"];SmarteditBootstrapGateway=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[Xt])],SmarteditBootstrapGateway);return SmarteditBootstrapGateway}();var ji=function(){function CustomHandlingStrategy(){}CustomHandlingStrategy.isNgRoute=function(e){return e.startsWith("/"+J)};CustomHandlingStrategy.prototype.shouldProcessUrl=function(e){return CustomHandlingStrategy.isNgRoute(e.toString())};CustomHandlingStrategy.prototype.extract=function(e){return e};CustomHandlingStrategy.prototype.merge=function(e,t){return e};return CustomHandlingStrategy}();(function(e){e["NG"]="ng";e["AJS"]="ajs"})(t.NavigationEventSource||(t.NavigationEventSource={}));var Bi=function(){SmarteditRoutingService.$inject=["router","document","logService","upgrade"];function SmarteditRoutingService(e,t,n,i){this.router=e;this.document=t;this.logService=n;this.upgrade=i;this.listenersInitialized=false;this.routeChangeError$=new g.ReplaySubject;this.routeChangeStart$=new g.ReplaySubject;this.routeChangeSuccess$=new g.ReplaySubject;this.previousRouterUrl=""}SmarteditRoutingService.prototype.init=function(){if(!this.listenersInitialized){this.notifyOnAngularRouteEvents();this.notifyOnAngularJSRouteEvents();this.listenersInitialized=true}};SmarteditRoutingService.prototype.go=function(e){return this.router.navigateByUrl(e)};SmarteditRoutingService.prototype.go.$inject=["url"];SmarteditRoutingService.prototype.path=function(){return this.router.url};SmarteditRoutingService.prototype.absUrl=function(){return this.document.location.href};SmarteditRoutingService.prototype.routeChangeStart=function(){var e=this;this.warnAboutListenersNotInitialized();return this.routeChangeStart$.pipe(f.filter((function(t){return!!t.url&&t.url!==e.previousRouterUrl})),f.map((function(e){return e.routeData})))};SmarteditRoutingService.prototype.routeChangeSuccess=function(){var e=this;this.warnAboutListenersNotInitialized();return this.routeChangeSuccess$.pipe(f.filter((function(t){return!!t.url&&t.url!==e.previousRouterUrl})),f.map((function(e){return e.routeData})))};SmarteditRoutingService.prototype.routeChangeError=function(){this.warnAboutListenersNotInitialized();return this.routeChangeError$.pipe(f.map((function(e){return e.routeData})))};SmarteditRoutingService.prototype.reload=function(e){var t=this;if(e===void 0){e=this.router.url}return this.router.navigateByUrl("/",{skipLocationChange:true}).then((function(){return t.router.navigateByUrl(e)}))};SmarteditRoutingService.prototype.reload.$inject=["url"];SmarteditRoutingService.prototype.getCurrentUrlFromEvent=function(e){if(e instanceof v.NavigationStart||e instanceof v.NavigationEnd||e instanceof v.NavigationError){return e.url}return e&&e.current&&e.current.originalPath};SmarteditRoutingService.prototype.getCurrentUrlFromEvent.$inject=["event"];SmarteditRoutingService.prototype.warnAboutListenersNotInitialized=function(){if(!this.listenersInitialized){this.logService.warn("Listeners not initialized, run `init()` first.")}};SmarteditRoutingService.prototype.notifyOnAngularRouteEvents=function(){var e=this;this.router.events.subscribe((function(n){if(n&&n.url&&!ji.isNgRoute(n.url)){return}switch(true){case n instanceof v.NavigationStart:{e.routeChangeStart$.next({from:t.NavigationEventSource.NG,url:n.url,routeData:n});break}case n instanceof v.NavigationError:{e.routeChangeError$.next({from:t.NavigationEventSource.NG,url:n.url,routeData:n});break}case n instanceof v.NavigationEnd:{e.routeChangeSuccess$.next({from:t.NavigationEventSource.NG,url:n.url,routeData:n});e.previousRouterUrl=n&&n.url;break}}}))};SmarteditRoutingService.prototype.notifyOnAngularJSRouteEvents=function(){var e=this;this.upgrade.$injector.get("$rootScope").$on("$routeChangeSuccess",(function(n,i,o){e.routeChangeSuccess$.next({from:t.NavigationEventSource.AJS,url:i&&i.originalPath,routeData:{event:n,current:i,previous:o}});e.previousRouterUrl=i&&i.originalPath}));this.upgrade.$injector.get("$rootScope").$on("$routeChangeError",(function(n,i,o,r){e.routeChangeError$.next({from:t.NavigationEventSource.AJS,url:i&&i.originalPath,routeData:{event:n,current:i,previous:o,rejection:r}})}));this.upgrade.$injector.get("$rootScope").$on("$routeChangeStart",(function(n,i,o){e.routeChangeStart$.next({from:t.NavigationEventSource.AJS,url:i&&i.originalPath,routeData:{event:n,next:i,current:o}})}))};SmarteditRoutingService=__decorate([SeDowngradeService(),__param(0,s.Optional()),__param(1,s.Inject(u.DOCUMENT)),__metadata("design:paramtypes",[v.Router,Document,o.LogService,i.UpgradeModule])],SmarteditRoutingService);return SmarteditRoutingService}();var Hi=function(e){__extends(AuthenticationManager,e);AuthenticationManager.$inject=["routing"];function AuthenticationManager(t){var n=e.call(this)||this;n.routing=t;return n}AuthenticationManager.prototype.onLogout=function(){var e=this.routing.path();if(o.stringUtils.isBlank(e)||e==="/"+J){this.routing.reload()}else{this.routing.go(J)}};AuthenticationManager.prototype.onUserHasChanged=function(){this.routing.reload()};AuthenticationManager=__decorate([s.Injectable(),__metadata("design:paramtypes",[Bi])],AuthenticationManager);return AuthenticationManager}(o.IAuthenticationManagerService);var Gi=function(){SettingsService.$inject=["restServicefactory"];function SettingsService(e){this.restService=e.get(Ae)}SettingsService.prototype.load=function(){return this.restService.get()};SettingsService.prototype.get=function(e){return this.load().then((function(t){return t[e]}))};SettingsService.prototype.get.$inject=["key"];SettingsService.prototype.getBoolean=function(e){return this.load().then((function(t){return t[e]===true||t[e]==="true"}))};SettingsService.prototype.getBoolean.$inject=["key"];SettingsService.prototype.getStringList=function(e){return this.load().then((function(t){return t[e]}))};SettingsService.prototype.getStringList.$inject=["key"];__decorate([o.Cached({actions:[si]}),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",Promise)],SettingsService.prototype,"load",null);SettingsService=__decorate([SeDowngradeService(o.ISettingsService),s.Injectable(),__metadata("design:paramtypes",[o.RestServiceFactory])],SettingsService);return SettingsService}();var Wi=function(){function SeRouteService(){}SeRouteService.init=function(e){this.$routeProvider=e};SeRouteService.provideNgRoute=function(e,t){this.validateNgRoutes(e);this.provideRouteShortcutConfigs(e);return v.RouterModule.forRoot(e,t)};SeRouteService.provideLegacyRoute=function(e){if(!this.$routeProvider){throw new Error("Please call SeRouteService.init($routeProvider) first")}var t={path:e.path,priority:e.priority,titleI18nKey:e.titleI18nKey,shortcutComponent:e.shortcutComponent};this.provideRouteShortcutConfigs([t]);return this.$routeProvider.when(e.path,e.route)};Object.defineProperty(SeRouteService,"routeShortcutConfigs",{get:function(){return this.routeShortcuts},enumerable:false,configurable:true});SeRouteService.provideRouteShortcutConfigs=function(e){var t=this;var n=[];this.generateRouteShortcutConfig(n,e);n.filter((function(e){return t.canRegisterRouteShortcutConfig(e)})).forEach((function(e){t.routeShortcuts.push(e)}))};SeRouteService.generateRouteShortcutConfig=function(e,t,n){var i=this;if(n===void 0){n=""}t.forEach((function(t){if(t.path){var o=i.getFullPath(n,t);e.push({fullPath:o,titleI18nKey:t.titleI18nKey,priority:t.priority,shortcutComponent:t.shortcutComponent})}if(t.children){var o=i.getFullPath(n,t);var r=t.path?o:n;i.generateRouteShortcutConfig(e,t.children,r)}}))};SeRouteService.getFullPath=function(e,t){return e?e+"/"+t.path:t.path};SeRouteService.validateNgRoutes=function(e){e.forEach((function(e){if(e.path&&!e.path.startsWith(J)&&!e.path.startsWith(ee)){throw new Error("Angular route must start with "+J)}}))};SeRouteService.canRegisterRouteShortcutConfig=function(e){if(!e.fullPath){return false}var t=e.fullPath;this.CATALOG_AWARE_PATH_PLACEHOLDERS.forEach((function(e){t=t.replace(e,"")}));if(t.indexOf(":")>-1){return false}return true};SeRouteService.CATALOG_AWARE_PATH_PLACEHOLDERS=[":siteId",":catalogId",":catalogVersion"];SeRouteService.routeShortcuts=[];return SeRouteService}();var qi=function(){function SeRouteModule(){}SeRouteModule=__decorate([SeModule({providers:[Wi]})],SeRouteModule);return SeRouteModule}();var Ki="yjQuery";function yjQueryServiceFactory(){var t="smarteditJQuery";if(!window[t]){if(e&&e.noConflict){window[t]=e.noConflict(true)}else{window[t]=e}}return window[t]}var Yi=function(){function YjqueryModule(){}YjqueryModule=__decorate([s.NgModule({providers:[{provide:Ki,useFactory:yjQueryServiceFactory},U.initialize((function(e){e.fn.extend({getCssPath:function(){var e;var t=this;while(t.length){var n=t[0];var i=n.className;if(n.tagName==="BODY"){break}t=t.parent();e=i+(e?">"+e:"")}return e}});O.downgradeService(Ki,null,Ki)}),[Ki])]})],YjqueryModule);return YjqueryModule}();var Xi={root:null,threshold:0};var Zi={attributes:true,attributeOldValue:false,childList:true,characterData:false,subtree:true};var Qi=function(){InViewElementObserver.$inject=["logService","document","yjQuery"];function InViewElementObserver(e,t,n){this.logService=e;this.document=t;this.yjQuery=n;this.componentsQueue=[];this.selectors=[];this.hasClassBasedSelectors=false}InViewElementObserver.prototype.elementFromPoint=function(e){var t=this.document.elementFromPoint(e.x,e.y);return t||this.getInViewElements().find((function(t){return x.isPointOverElement(e,t)}))};InViewElementObserver.prototype.elementFromPoint.$inject=["mousePosition"];InViewElementObserver.prototype.addSelector=function(e,t){var n=this;if(!B.isBlank(e)&&this.selectors.map((function(e){return e.selector})).indexOf(e)===-1){if(/\.[\w]+/.test(e)){this.hasClassBasedSelectors=true}this.selectors.push({selector:e,callback:t});this.restart()}return function(){var t=n.selectors.map((function(e){return e.selector})).indexOf(e);n.selectors.splice(t,1);n.restart()}};InViewElementObserver.prototype.addSelector.$inject=["selector","callback"];InViewElementObserver.prototype.getAllElements=function(){return this.componentsQueue.map((function(e){return e.component}))};InViewElementObserver.prototype.getInViewElements=function(){return this.componentsQueue.filter((function(e){return e.isIntersecting})).map((function(e){return e.component}))};InViewElementObserver.prototype.restart=function(){this.stopListener();this.initListener()};InViewElementObserver.prototype.stopListener=function(){if(this.mutationObserver){this.mutationObserver.disconnect();delete this.mutationObserver}if(this.intersectionObserver){this.intersectionObserver.disconnect();delete this.intersectionObserver}this.componentsQueue=[]};InViewElementObserver.prototype.initListener=function(){var e=this;if(!this.mutationObserver){this.mutationObserver=this._newMutationObserver(this._mutationObserverCallback.bind(this));if(!this.intersectionObserver){this.intersectionObserver=this._newIntersectionObserver((function(t){var n=t.filter((function(t){return e._isEligibleComponent(t.target)}));n.forEach((function(t){e._updateQueue(t)}));e.selectors.filter((function(e){return!!e.callback})).forEach((function(t){if(n.find((function(n){return e.yjQuery(n.target).is(t.selector)}))){t.callback()}}))}))}this._getEligibleElements().forEach((function(t){e.intersectionObserver.observe(t)}))}};InViewElementObserver.prototype._aggregateAddedOrRemovedNodes=function(e,t){var n=this;var i=a.flatten(e.filter((function(e){return e.type===ge.CHILD_LIST.NAME&&(!!t&&e.addedNodes&&e.addedNodes.length||!t&&e.removedNodes&&e.removedNodes.length)})).map((function(e){var i=a.flatten(Array.prototype.slice.call(t?e.addedNodes:e.removedNodes).filter((function(e){return e.nodeType===Node.ELEMENT_NODE})).map((function(e){var t=n._getAllEligibleChildren(e);return n._isEligibleComponent(e)?[e].concat(t):t}))).sort(x.compareHTMLElementsPosition()).reverse();return i})));return a.uniqWith(i,(function(e,t){return e.contains(t)||t.contains(e)}))};InViewElementObserver.prototype._aggregateAddedOrRemovedNodes.$inject=["mutations","addedOnes"];InViewElementObserver.prototype._aggregateMutationsOnClass=function(e,t){var n=this;return a.compact(e.filter((function(e){return e.target&&e.target.nodeType===Node.ELEMENT_NODE&&e.type===ge.ATTRIBUTES.NAME&&e.attributeName==="class"})).map((function(e){if(t&&n._isEligibleComponent(e.target)){return e.target}else if(!t&&n._isEligibleComponent(e.target)){return e.target}return null})))};InViewElementObserver.prototype._aggregateMutationsOnClass.$inject=["mutations","addedOnes"];InViewElementObserver.prototype._mutationObserverCallback=function(e){var t=this;this.logService.debug(e);this._aggregateAddedOrRemovedNodes(e,true).forEach((function(e){t.intersectionObserver.observe(e)}));if(this.hasClassBasedSelectors){this._aggregateMutationsOnClass(e,true).forEach((function(e){t.intersectionObserver.observe(e)}))}this._aggregateAddedOrRemovedNodes(e,false).forEach((function(e){var n=t._getComponentIndexInQueue(e);if(n!==-1){t.componentsQueue.splice(n,1)}}));if(this.hasClassBasedSelectors){this._aggregateMutationsOnClass(e,false).forEach((function(e){var n=t._getComponentIndexInQueue(e);if(n!==-1){t.componentsQueue.splice(n,1)}}))}};InViewElementObserver.prototype._mutationObserverCallback.$inject=["mutations"];InViewElementObserver.prototype._updateQueue=function(e){var t=this._getComponentIndexInQueue(e.target);if(t!==-1){if(!e.intersectionRatio&&!this._isInDOM(e.target)){this.componentsQueue.splice(t,1)}else{this.componentsQueue[t].isIntersecting=!!e.intersectionRatio}}else if(this._isInDOM(e.target)){this.componentsQueue.push({component:e.target,isIntersecting:!!e.intersectionRatio})}};InViewElementObserver.prototype._updateQueue.$inject=["entry"];InViewElementObserver.prototype._newMutationObserver=function(e){var t=new MutationObserver(e);t.observe(this.document.body,a.merge(a.cloneDeep(Zi),{attributes:this.hasClassBasedSelectors}));return t};InViewElementObserver.prototype._newMutationObserver.$inject=["callback"];InViewElementObserver.prototype._newIntersectionObserver=function(e){return new IntersectionObserver(e,Xi)};InViewElementObserver.prototype._newIntersectionObserver.$inject=["callback"];InViewElementObserver.prototype._getJQuerySelector=function(){return this.selectors.map((function(e){return e.selector})).join(",")};InViewElementObserver.prototype._isEligibleComponent=function(e){return this.yjQuery(e).is(this._getJQuerySelector())};InViewElementObserver.prototype._isEligibleComponent.$inject=["component"];InViewElementObserver.prototype._getEligibleElements=function(){return Array.prototype.slice.call(this.yjQuery(this._getJQuerySelector()))};InViewElementObserver.prototype._getAllEligibleChildren=function(e){return Array.prototype.slice.call(e.querySelectorAll(this._getJQuerySelector()))};InViewElementObserver.prototype._getAllEligibleChildren.$inject=["component"];InViewElementObserver.prototype._getComponentIndexInQueue=function(e){return this.componentsQueue.findIndex((function(t){return e===t.component}))};InViewElementObserver.prototype._getComponentIndexInQueue.$inject=["component"];InViewElementObserver.prototype._isInDOM=function(e){return this.yjQuery.contains(this.document.body,e)};InViewElementObserver.prototype._isInDOM.$inject=["component"];InViewElementObserver=__decorate([SeDowngradeService(),__param(1,s.Inject(u.DOCUMENT)),__param(2,s.Inject(Ki)),__metadata("design:paramtypes",[o.LogService,Document,Function])],InViewElementObserver);return InViewElementObserver}();var Ji=function(){DragAndDropScrollingService.$inject=["windowUtils","translate","inViewElementObserver","yjQuery"];function DragAndDropScrollingService(t,n,i,o){this.windowUtils=t;this.translate=n;this.inViewElementObserver=i;this.yjQuery=o;this.SCROLLING_AREA_HEIGHT=50;this.FAST_SCROLLING_AREA_HEIGHT=25;this.SCROLLING_STEP=5;this.FAST_SCROLLING_STEP=15;this.topScrollArea=null;this.bottomScrollArea=null;this.throttleScrollingEnabled=false;this.inViewElementObserver.addSelector("#"+e.TOP_SCROLL_AREA_ID);this.inViewElementObserver.addSelector("#"+e.BOTTOM_SCROLL_AREA_ID);this.throttledScrollPage=a.throttle(this.scrollPage.bind(this),It)}e=DragAndDropScrollingService;DragAndDropScrollingService.prototype.initialize=function(){this.scrollable=this.getSelector(this.windowUtils.getWindow().document.scrollingElement);this.addScrollAreas();this.addEventListeners();this.scrollDelta=0;this.initialized=true};DragAndDropScrollingService.prototype.deactivate=function(){this.removeEventListeners();this.scrollDelta=0;this.initialized=false};DragAndDropScrollingService.prototype.enable=function(){if(this.initialized){this.scrollLimitY=this.scrollable.get(0).scrollHeight-this.windowUtils.getWindow().innerHeight;this.showScrollAreas()}};DragAndDropScrollingService.prototype.disable=function(){if(this.initialized){var e=this.getScrollAreas();e.trigger("dragleave");e.hide()}};DragAndDropScrollingService.prototype.toggleThrottling=function(e){this.throttleScrollingEnabled=e};DragAndDropScrollingService.prototype.toggleThrottling.$inject=["isEnabled"];DragAndDropScrollingService.prototype.addScrollAreas=function(){var t=this;this.topScrollArea=this.getSelector('<div id="'+e.TOP_SCROLL_AREA_ID+'" class="'+Et+'"></div>').appendTo("body");this.bottomScrollArea=this.getSelector('<div id="'+e.BOTTOM_SCROLL_AREA_ID+'" class="'+Et+'"></div>').appendTo("body");var n=this.getScrollAreas();n.height(this.SCROLLING_AREA_HEIGHT);this.topScrollArea.css({top:0});this.bottomScrollArea.css({bottom:0});n.hide();var i;var o;return this.translate.get("se.draganddrop.uihint.top").toPromise().then((function(e){i=e;return t.translate.get("se.draganddrop.uihint.bottom").toPromise()})).then((function(e){o=e;t.topScrollArea.text(i);t.bottomScrollArea.text(o)}))};DragAndDropScrollingService.prototype.addEventListeners=function(){var e=this.getScrollAreas();e.on("dragenter",this.onDragEnter.bind(this));e.on("dragover",this.onDragOver.bind(this));e.on("dragleave",this.onDragLeave.bind(this))};DragAndDropScrollingService.prototype.removeEventListeners=function(){var e=this.getScrollAreas();e.off("dragenter");e.off("dragover");e.off("dragleave");e.remove()};DragAndDropScrollingService.prototype.onDragEnter=function(t){var n=this.SCROLLING_STEP;var i=this.getSelector(t.target);var o=i.attr("id");if(o===e.TOP_SCROLL_AREA_ID){n*=-1}this.scrollDelta=n;this.animationFrameId=this.windowUtils.getWindow().requestAnimationFrame(this.scrollPage.bind(this))};DragAndDropScrollingService.prototype.onDragEnter.$inject=["event"];DragAndDropScrollingService.prototype.onDragOver=function(t){var n=t.originalEvent;var i=this.getSelector(n.target);var o=i.attr("id");if(o===e.TOP_SCROLL_AREA_ID){if(n.clientY<=this.FAST_SCROLLING_AREA_HEIGHT){this.scrollDelta=-this.FAST_SCROLLING_STEP}else{this.scrollDelta=-this.SCROLLING_STEP}}else{var r=this.windowUtils.getWindow().innerHeight;if(n.clientY>=r-this.FAST_SCROLLING_AREA_HEIGHT){this.scrollDelta=this.FAST_SCROLLING_STEP}else{this.scrollDelta=this.SCROLLING_STEP}}};DragAndDropScrollingService.prototype.onDragOver.$inject=["evt"];DragAndDropScrollingService.prototype.onDragLeave=function(){this.scrollDelta=0;this.windowUtils.getWindow().cancelAnimationFrame(this.animationFrameId)};DragAndDropScrollingService.prototype.scrollPage=function(){if(this.scrollDelta){var e=this.scrollable.scrollTop();var t=false;if(this.scrollDelta>0&&e<this.scrollLimitY){t=true}else if(this.scrollDelta<0&&e>0){t=true}if(t){var n=this.scrollable.scrollTop();var i=n+this.scrollDelta;this.scrollable.scrollTop(i);this.animationFrameId=this.windowUtils.getWindow().requestAnimationFrame(this.throttleScrollingEnabled?this.throttledScrollPage:this.scrollPage.bind(this))}this.showScrollAreas()}};DragAndDropScrollingService.prototype.getSelector=function(e){return this.yjQuery(e)};DragAndDropScrollingService.prototype.getSelector.$inject=["selector"];DragAndDropScrollingService.prototype.getScrollAreas=function(){return this.yjQuery(["#"+e.TOP_SCROLL_AREA_ID,"#"+e.BOTTOM_SCROLL_AREA_ID].join(","))};DragAndDropScrollingService.prototype.showScrollAreas=function(){var e=this.scrollable.scrollTop();if(e===0){this.topScrollArea.hide()}else{this.topScrollArea.show()}if(e>=this.scrollLimitY){this.bottomScrollArea.hide()}else{this.bottomScrollArea.show()}};var e;DragAndDropScrollingService.TOP_SCROLL_AREA_ID="top_scroll_page";DragAndDropScrollingService.BOTTOM_SCROLL_AREA_ID="bottom_scroll_page";DragAndDropScrollingService=e=__decorate([SeDowngradeService(),__param(3,s.Inject(Ki)),__metadata("design:paramtypes",[o.WindowUtils,m.TranslateService,Qi,Function])],DragAndDropScrollingService);return DragAndDropScrollingService}();var eo=function(){DragAndDropService.$inject=["yjQuery","dragAndDropScrollingService","inViewElementObserver","systemEventService","dragAndDropCrossOrigin"];function DragAndDropService(e,t,n,i,o){this.yjQuery=e;this.dragAndDropScrollingService=t;this.inViewElementObserver=n;this.systemEventService=i;this.dragAndDropCrossOrigin=o;this.configurations={};this.isDragAndDropExecuting=false;this.dragAndDropCrossOrigin.initialize()}e=DragAndDropService;DragAndDropService.prototype.register=function(e){if(!e||!e.id){throw new Error("dragAndDropService - register(): Configuration needs an ID.")}this.configurations[e.id]=e;if(!o.stringUtils.isBlank(e.targetSelector)){this.inViewElementObserver.addSelector(e.targetSelector)}};DragAndDropService.prototype.register.$inject=["configuration"];DragAndDropService.prototype.unregister=function(e){var t=this;e.forEach((function(e){var n=t.configurations[e];if(n){t.deactivateConfiguration(n);t.deactivateScrolling(n);delete t.configurations[e]}}))};DragAndDropService.prototype.unregister.$inject=["configurationsIDList"];DragAndDropService.prototype.applyAll=function(){var e=this;a.forEach(this.configurations,(function(t){e.apply(t.id)}))};DragAndDropService.prototype.apply=function(e){var t=this.configurations[e];if(t){this.update(t.id);this.cacheDragImages(t);this.initializeScrolling(t)}};DragAndDropService.prototype.apply.$inject=["configurationID"];DragAndDropService.prototype.update=function(e){var t=this.configurations[e];if(t){this.deactivateConfiguration(t);this._update(t)}};DragAndDropService.prototype.update.$inject=["configurationID"];DragAndDropService.prototype.markDragStarted=function(){this.setDragAndDropExecutionStatus(true);this.dragAndDropScrollingService.enable()};DragAndDropService.prototype.markDragStopped=function(){this.setDragAndDropExecutionStatus(false);this.dragAndDropScrollingService.disable()};DragAndDropService.prototype._update=function(t){var n=this;var i=a.isArray(t.sourceSelector)?t.sourceSelector:[t.sourceSelector];i.forEach((function(i){var o=n.getSelector(i+":not([draggable])");o.attr(e.DRAGGABLE_ATTR,"true");o.on("dragstart",n.onDragStart.bind(n,t));o.on("dragend",n.onDragEnd.bind(n,t))}));var o=this.getSelector(t.targetSelector+":not([draggable])");o.attr(e.DROPPABLE_ATTR,"true");o.on("dragenter",this.onDragEnter.bind(this,t));o.on("dragover",this.onDragOver.bind(this,t));o.on("drop",this.onDrop.bind(this,t));o.on("dragleave",this.onDragLeave.bind(this,t))};DragAndDropService.prototype._update.$inject=["configuration"];DragAndDropService.prototype.deactivateConfiguration=function(t){var n=Array.isArray(t.sourceSelector)?t.sourceSelector.join(","):t.sourceSelector;var i=this.getSelector(n);var o=this.getSelector(t.targetSelector);i.removeAttr(e.DRAGGABLE_ATTR);o.removeAttr(e.DROPPABLE_ATTR);i.off("dragstart");i.off("dragend");o.off("dragenter");o.off("dragover");o.off("dragleave");o.off("drop")};DragAndDropService.prototype.deactivateConfiguration.$inject=["configuration"];DragAndDropService.prototype.onDragStart=function(e,t){var n=this;var i=t.originalEvent;this.setDragTransferData(e,i);setTimeout((function(){var o=n.yjQuery(t.target).closest("."+Qe);n.setDragAndDropExecutionStatus(true,o);n.dragAndDropScrollingService.enable();if(e.startCallback){e.startCallback(i)}}),0)};DragAndDropService.prototype.onDragStart.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.onDragEnd=function(e,t){var n=t.originalEvent;this.dragAndDropScrollingService.disable();if(this.isDragAndDropExecuting&&e.stopCallback){e.stopCallback(n)}this.setDragAndDropExecutionStatus(false)};DragAndDropService.prototype.onDragEnd.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.onDragEnter=function(e,t){var n=t.originalEvent;n.preventDefault();if(this.isDragAndDropExecuting&&e.dragEnterCallback){e.dragEnterCallback(n)}};DragAndDropService.prototype.onDragEnter.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.onDragOver=function(e,t){var n=t.originalEvent;n.preventDefault();if(this.isDragAndDropExecuting&&e.dragOverCallback){e.dragOverCallback(n)}};DragAndDropService.prototype.onDragOver.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.onDrop=function(e,t){var n=t.originalEvent;n.preventDefault();n.stopPropagation();if(n.relatedTarget&&n.relatedTarget.nodeType===3){return true}if(n.target===n.relatedTarget){return true}if(this.isDragAndDropExecuting&&e.dropCallback){e.dropCallback(n)}return false};DragAndDropService.prototype.onDrop.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.onDragLeave=function(e,t){var n=t.originalEvent;n.preventDefault();if(this.isDragAndDropExecuting&&e.outCallback){e.outCallback(n)}};DragAndDropService.prototype.onDragLeave.$inject=["configuration","yjQueryEvent"];DragAndDropService.prototype.cacheDragImages=function(e){var t;if(e.helper){t=e.helper()}if(!t){return}if(typeof t==="string"){e._cachedDragImage=new Image;e._cachedDragImage.src=t}else{e._cachedDragImage=t}};DragAndDropService.prototype.cacheDragImages.$inject=["configuration"];DragAndDropService.prototype.setDragTransferData=function(e,t){t.dataTransfer.setData("Text",e.id);if(e._cachedDragImage&&t.dataTransfer.setDragImage){t.dataTransfer.setDragImage(e._cachedDragImage,0,0)}};DragAndDropService.prototype.setDragTransferData.$inject=["configuration","evt"];DragAndDropService.prototype.getSelector=function(e){return this.yjQuery(e)};DragAndDropService.prototype.getSelector.$inject=["selector"];DragAndDropService.prototype.setDragAndDropExecutionStatus=function(e,t){this.isDragAndDropExecuting=e;this.systemEventService.publish(e?yt.DRAG_DROP_START:yt.DRAG_DROP_END,t)};DragAndDropService.prototype.setDragAndDropExecutionStatus.$inject=["isExecuting","element"];DragAndDropService.prototype.initializeScrolling=function(e){if(e.enableScrolling&&this.browserRequiresCustomScrolling()){this.dragAndDropScrollingService.initialize()}};DragAndDropService.prototype.initializeScrolling.$inject=["configuration"];DragAndDropService.prototype.deactivateScrolling=function(e){if(e.enableScrolling&&this.browserRequiresCustomScrolling()){this.dragAndDropScrollingService.deactivate()}};DragAndDropService.prototype.deactivateScrolling.$inject=["configuration"];DragAndDropService.prototype.browserRequiresCustomScrolling=function(){return true};var e;DragAndDropService.DRAGGABLE_ATTR="draggable";DragAndDropService.DROPPABLE_ATTR="data-droppable";DragAndDropService=e=__decorate([SeDowngradeService(),__param(0,s.Inject(Ki)),__metadata("design:paramtypes",[Function,Ji,Qi,Kt,bn])],DragAndDropService);return DragAndDropService}();var to=function(){function DragAndDropServiceModule(){}DragAndDropServiceModule=__decorate([s.NgModule({providers:[Qi,Ji,eo]})],DragAndDropServiceModule);return DragAndDropServiceModule}();var no={DROP:"drop",DRAG_ENTER:"dragenter",DRAG_OVER:"dragover",DRAG_LEAVE:"dragleave"};var io=function(){function StorageNamespaceConverter(){}StorageNamespaceConverter.ERR_INVALID_NAMESPACED_ID=function(e){return new Error("StorageNamespaceConverter - Invalid namespaced id ["+e+"]")};StorageNamespaceConverter.getNamespacedStorageId=function(e,t){return""+e+this.separator+t};StorageNamespaceConverter.getStorageIdFromNamespacedId=function(e){var t=e.match(new RegExp(this.namespaceDecoderRegexStr));if(t&&t[2].length>0){return t[2]}throw StorageNamespaceConverter.ERR_INVALID_NAMESPACED_ID(e)};StorageNamespaceConverter.getNamespaceFromNamespacedId=function(e){var t=e.match(new RegExp(this.namespaceDecoderRegexStr));if(t&&t[1].length>0){return t[1]}throw StorageNamespaceConverter.ERR_INVALID_NAMESPACED_ID(e)};StorageNamespaceConverter.separator="<ns:id>";StorageNamespaceConverter.namespaceDecoderRegexStr="(.*)"+StorageNamespaceConverter.separator+"(.*)";return StorageNamespaceConverter}();var oo=function(){function NamespacedStorageManager(e,t){this.storageManager=e;this.namespace=t}NamespacedStorageManager.prototype.getStorage=function(e){e.storageId=this.getNamespaceStorageId(e.storageId);return this.storageManager.getStorage(e)};NamespacedStorageManager.prototype.deleteStorage=function(e,t){if(t===void 0){t=false}return this.storageManager.deleteStorage(this.getNamespaceStorageId(e),t)};NamespacedStorageManager.prototype.deleteExpiredStorages=function(e){if(e===void 0){e=false}return this.storageManager.deleteExpiredStorages(e)};NamespacedStorageManager.prototype.hasStorage=function(e){return this.storageManager.hasStorage(this.getNamespaceStorageId(e))};NamespacedStorageManager.prototype.registerStorageController=function(e){return this.storageManager.registerStorageController(e)};NamespacedStorageManager.prototype.getNamespaceStorageId=function(e){return io.getNamespacedStorageId(this.namespace,e)};NamespacedStorageManager.prototype.getStorageManager=function(){return this.storageManager};return NamespacedStorageManager}();var ro=function(){function StorageManagerFactory(e){this.theOneAndOnlyStorageManager=e}StorageManagerFactory.ERR_INVALID_NAMESPACE=function(e){return new Error("StorageManagerFactory Error: invalid namespace ["+e+"]. Namespace must be a non-empty string")};StorageManagerFactory.prototype.getStorageManager=function(e){this.validateNamespace(e);return new oo(this.theOneAndOnlyStorageManager,e)};StorageManagerFactory.prototype.validateNamespace=function(e){if(typeof e!=="string"||e.length<=0){throw StorageManagerFactory.ERR_INVALID_NAMESPACE(e)}};return StorageManagerFactory}();var ao=function(){function IStorageGateway(){}IStorageGateway.prototype.handleStorageRequest=function(e,t,n){"proxyFunction";return Promise.resolve()};return IStorageGateway}();var so=function(){function IStorageManager(){}IStorageManager.prototype.registerStorageController=function(e){"proxyFunction"};IStorageManager.prototype.hasStorage=function(e){"proxyFunction";return null};IStorageManager.prototype.getStorage=function(e){"proxyFunction";return null};IStorageManager.prototype.deleteStorage=function(e,t){"proxyFunction";return Promise.resolve(true)};IStorageManager.prototype.deleteExpiredStorages=function(e){"proxyFunction";return Promise.resolve(true)};return IStorageManager}();var co=function(){function IStorageManagerFactory(){}IStorageManagerFactory.prototype.getStorageManager=function(e){"proxyFunction";return null};return IStorageManagerFactory}();var lo=function(e){__extends(IStorageManagerGateway,e);function IStorageManagerGateway(){return e!==null&&e.apply(this,arguments)||this}IStorageManagerGateway.prototype.getStorageSanitityCheck=function(e){"proxyFunction";return Promise.resolve(true)};return IStorageManagerGateway}(so);var po=function(){function IStoragePropertiesService(){}IStoragePropertiesService.prototype.getProperty=function(e){"proxyFunction";return null};return IStoragePropertiesService}();var uo=new s.InjectionToken("storageProperties");var mo=new s.InjectionToken("doNotUseStorageManager");var go=function(){function Timer(e,t,n){if(n===void 0){n=1e3}this.zone=e;this._callback=t;this._duration=n;this._timer=null}Timer.prototype.isActive=function(){return!!this._timer};Timer.prototype.restart=function(e){this._duration=e||this._duration;this.stop();this.start()};Timer.prototype.start=function(e){var t=this;this._duration=e||this._duration;this.zone.runOutsideAngular((function(){t._timer=setInterval((function(){try{if(t._callback){t._callback()}else{t.stop()}}catch(e){t.stop()}}),t._duration)}))};Timer.prototype.stop=function(){clearInterval(this._timer);this._timer=null};Timer.prototype.resetDuration=function(e){this._duration=e||this._duration};Timer.prototype.teardown=function(){this.stop();this._callback=null;this._duration=null;this._timer=null};return Timer}();var ho=function(){TimerService.$inject=["ngZone"];function TimerService(e){this.ngZone=e}TimerService.prototype.createTimer=function(e,t){return new go(this.ngZone,e,t)};TimerService.prototype.createTimer.$inject=["callback","duration"];TimerService=__decorate([SeDowngradeService(),s.Injectable(),__metadata("design:paramtypes",[s.NgZone])],TimerService);return TimerService}();var vo=function(){JQueryUtilsService.$inject=["yjQuery","document","EXTENDED_VIEW_PORT_MARGIN","windowUtils"];function JQueryUtilsService(e,t,n,i){this.yjQuery=e;this.document=t;this.EXTENDED_VIEW_PORT_MARGIN=n;this.windowUtils=i}JQueryUtilsService.prototype.extractFromElement=function(e,t){var n=this.yjQuery(e);return n.filter(t).add(n.find(t))};JQueryUtilsService.prototype.extractFromElement.$inject=["parent","extractionSelector"];JQueryUtilsService.prototype.unsafeParseHTML=function(e){return this.yjQuery.parseHTML(e,null,true)};JQueryUtilsService.prototype.unsafeParseHTML.$inject=["stringHTML"];JQueryUtilsService.prototype.isInDOM=function(e){return this.document.documentElement.contains(e)};JQueryUtilsService.prototype.isInDOM.$inject=["element"];JQueryUtilsService.prototype.isInExtendedViewPort=function(e){if(!this.document.documentElement.contains(e)){return false}var t=this.yjQuery(e);var n=__assign(__assign({},t.offset()),{width:t.outerWidth(),height:t.outerHeight()});var i=this.document.scrollingElement||this.document.documentElement;return x.areIntersecting({left:-this.EXTENDED_VIEW_PORT_MARGIN+i.scrollLeft,width:this.windowUtils.getWindow().innerWidth+2*this.EXTENDED_VIEW_PORT_MARGIN,top:-this.EXTENDED_VIEW_PORT_MARGIN+i.scrollTop,height:this.windowUtils.getWindow().innerHeight+2*this.EXTENDED_VIEW_PORT_MARGIN},n)};JQueryUtilsService.prototype.isInExtendedViewPort.$inject=["element"];JQueryUtilsService=__decorate([SeDowngradeService(),__param(0,s.Inject(Ki)),__param(1,s.Inject(u.DOCUMENT)),__param(2,s.Inject(Wt)),__metadata("design:paramtypes",[Function,Document,Number,L])],JQueryUtilsService);return JQueryUtilsService}();window.__smartedit__.addDecoratorPayload("Injectable","L10nService",{providedIn:"root"});var fo=function(){L10nService.$inject=["languageService","crossFrameEventService"];function L10nService(e,t){var n=this;this.languageService=e;this.languageSwitchSubject=new g.BehaviorSubject(null);this.languageSwitch$=this.languageSwitchSubject.asObservable();this.unRegSwitchLanguageEvent=t.subscribe(o.SWITCH_LANGUAGE_EVENT,(function(){return n.resolveLanguage()}))}L10nService.prototype.ngOnDestroy=function(){this.unRegSwitchLanguageEvent();this.languageSwitchSubject.unsubscribe()};L10nService.prototype.resolveLanguage=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,this.languageService.getResolveLocaleIsoCode()];case 1:e=t.sent();this.languageSwitchSubject.next(e);return[2]}}))}))};L10nService=__decorate([SeDowngradeService(),s.Injectable({providedIn:"root"}),__metadata("design:paramtypes",[Oi,Pi])],L10nService);return L10nService}();function getLocalizedFilterFn(e){return function(t){if(typeof t==="string"){return t}else if(t){return t[e]||t[Object.keys(t)[0]]}else{return undefined}}}var _o=function(){function L10nPipe(e){this.l10nService=e}L10nPipe.prototype.transform=function(e){var t=this;return this.l10nService.languageSwitch$.pipe(f.startWith(null),f.pairwise(),f.tap((function(e){var n=e[0],i=e[1];if(n!==i){t.filterFn=getLocalizedFilterFn(i)}})),f.map((function(){return t.filterFn(e)})))};L10nPipe=__decorate([s.Pipe({name:"seL10n"}),__metadata("design:paramtypes",[fo])],L10nPipe);return L10nPipe}();function getInitialFilterFn(){return function(e){return e}}function setupL10nFilter(e,t){var n;function prepareFilter(){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(i){switch(i.label){case 0:n=getInitialFilterFn();n.$stateful=false;return[4,e.getResolveLocaleIsoCode()];case 1:t=i.sent();n=getLocalizedFilterFn(t);n.$stateful=false;return[2]}}))}))}prepareFilter();t.subscribe(o.SWITCH_LANGUAGE_EVENT,prepareFilter);return function(e){return n(e)}}var yo=function(){function L10nFilter(){}L10nFilter.transform=["languageService","crossFrameEventService",function(e,t){"ngInject";return setupL10nFilter(e,t)}];L10nFilter=__decorate([SeFilter()],L10nFilter);return L10nFilter}();var Co=function(){function L10nModule(){}L10nModule=__decorate([SeModule({declarations:[yo]})],L10nModule);return L10nModule}();var So=new s.InjectionToken("CATALOG_DETAILS_ITEM_DATA");var bo=function(){function AngularJSBootstrapIndicatorService(){this._smarteditContainerReady=new g.BehaviorSubject(false);this._smarteditReady=new g.BehaviorSubject(false)}AngularJSBootstrapIndicatorService.prototype.setSmarteditContainerReady=function(){this._smarteditContainerReady.next(true)};AngularJSBootstrapIndicatorService.prototype.setSmarteditReady=function(){this._smarteditReady.next(true)};AngularJSBootstrapIndicatorService.prototype.onSmarteditContainerReady=function(){return this._smarteditContainerReady.pipe(f.filter((function(e){return e})))};AngularJSBootstrapIndicatorService.prototype.onSmarteditReady=function(){return this._smarteditReady.pipe(f.filter((function(e){return e})))};AngularJSBootstrapIndicatorService=__decorate([s.Injectable()],AngularJSBootstrapIndicatorService);return AngularJSBootstrapIndicatorService}();var Io=function(){AngularJSLazyDependenciesService.$inject=["upgrade"];function AngularJSLazyDependenciesService(e){this.upgrade=e}AngularJSLazyDependenciesService.prototype.$injector=function(){return this.upgrade.$injector};AngularJSLazyDependenciesService.prototype.$templateCache=function(){return this.$injector().get("$templateCache")};AngularJSLazyDependenciesService.prototype.$rootScope=function(){return this.$injector().get("$rootScope")};AngularJSLazyDependenciesService.prototype.$location=function(){return this.$injector().get("$location")};AngularJSLazyDependenciesService=__decorate([s.Injectable(),__metadata("design:paramtypes",[i.UpgradeModule])],AngularJSLazyDependenciesService);return AngularJSLazyDependenciesService}();var wo=function(){function YTreeDndEvent(e,t,n,i,o){this.sourceNode=e;this.destinationNodes=t;this.position=n;this.sourceParentHandle=i;this.targetParentHandle=o}return YTreeDndEvent}();var TreeDndOptionFactory=function(e,t,n,i,o){"ngInject";return function(){function class_1(r){this.dragEnabled=false;this.dragDelay=t.dragDelay;this.callbacks={};if(!r){return}if(r.onDropCallback){this.dragEnabled=true;this.callbacks.dropped=function(t){if(t.source===null||t.dest===null){return}var n=new wo(t.source.nodeScope.$modelValue,t.dest.nodesScope.$modelValue,t.dest.index,t.source.nodeScope.$parentNodeScope,t.dest.nodesScope.$nodeScope);e((function(){r.onDropCallback(n)}))}}if(r.beforeDropCallback){this.dragEnabled=true;this.callbacks.beforeDrop=function(e){if(e.source===null||e.dest===null){return true}var t=new wo(e.source.nodeScope.$modelValue,e.dest.nodesScope.$modelValue,e.dest.index);var a=r.beforeDropCallback(t);return i.when(a).then((function(e){if(typeof e==="object"){if(e.confirmDropI18nKey){var t={description:e.confirmDropI18nKey};return n.confirm(t)}if(e.rejectDropI18nKey){o.showDanger({message:e.rejectDropI18nKey});return false}throw new Error("Unexpected return value for beforeDropCallback does not contain confirmDropI18nKey nor rejectDropI18nKey: "+e)}return e}))}}if(r.allowDropCallback){this.dragEnabled=true;this.callbacks.accept=function(e,t,n){var i=new wo(e.$modelValue,t.$modelValue,n);return r.allowDropCallback(i)}}}return class_1}()};TreeDndOptionFactory.$inject=["$timeout","treeConfig","confirmationModalService","$q","alertService"];var TreeServiceFactory=function(e,t,n){"ngInject";return function(){function class_1(e){if(e){this.nodesRestService=t.get(e)}}class_1.prototype.fetchChildren=function(t){t.nodes=t.nodes||[];if(t.initiated){return e.when(t.nodes)}else{return e.when(this.nodesRestService.get({parentUid:t.uid})).then((function(e){t.initiated=true;var i=n(e);if(!i){return[]}i.forEach((function(e){e.parent=t}));Array.prototype.push.apply(t.nodes,i);return i}))}};class_1.prototype.saveNode=function(t){return e.when(this.nodesRestService.save({parentUid:t.uid,name:(t.name?t.name:t.uid)+t.nodes.length})).then((function(e){t.hasChildren=true;e.parent=t;return e}))};class_1.prototype.removeNode=function(t){return e.when(this.nodesRestService.remove({identifier:t.uid})).then((function(){var e=t.parent;e.hasChildren=e.nodes.length>1;return}))};return class_1}()};TreeServiceFactory.$inject=["$q","restServiceFactory","getDataFromResponse"];var Eo=function(){YtreeComponent.$inject=["$scope","$q","TreeService","_TreeDndOptions"];function YtreeComponent(e,t,n,i){this.$scope=e;this.$q=t;this.TreeService=n;this._TreeDndOptions=i}YtreeComponent.prototype.$onInit=function(){var e=this;this.root={uid:this.rootNodeUid,hasChildren:true,name:"root",parent:null,parentUid:null,position:0,itemType:null,uuid:null};this.treeOptions=new this._TreeDndOptions(this.dragOptions);this.treeService=new this.TreeService(this.nodeUri);Object.keys(this.nodeActions).forEach((function(t){e[t]=e.nodeActions[t].bind(e,e.treeService);e.nodeActions[t]=e.nodeActions[t].bind(e,e.treeService)}));this.fetchData(this.root)};YtreeComponent.prototype.collapseAll=function(){this.$scope.$broadcast("angular-ui-tree:collapse-all")};YtreeComponent.prototype.expandAll=function(){this.$scope.$broadcast("angular-ui-tree:expand-all")};YtreeComponent.prototype.hasChildren=function(e){var t=e.$modelValue;return t.hasChildren};YtreeComponent.prototype.hasChildren.$inject=["handle"];YtreeComponent.prototype.fetchData=function(e){return this.treeService.fetchChildren(e)};YtreeComponent.prototype.fetchData.$inject=["nodeData"];YtreeComponent.prototype.toggleAndfetch=function(e){var t=this;this.isDisabled=true;var n=e.$modelValue;if(e.collapsed){return this.fetchData(n).then((function(){e.toggle();t.isDisabled=false}))}e.toggle();this.isDisabled=false;return this.$q.when()};YtreeComponent.prototype.toggleAndfetch.$inject=["handle"];YtreeComponent.prototype.refresh=function(e){var t=e.$modelValue;t.initiated=false;var n=e.collapsed;return this.fetchData(t).then((function(){if(!n&&e.collapsed){e.toggle()}}))};YtreeComponent.prototype.refresh.$inject=["handle"];YtreeComponent.prototype.refreshParent=function(e){if(e.$modelValue.parent.uid===this.root.uid){this.fetchData(this.root)}else{this.refresh(e.$parentNodeScope)}};YtreeComponent.prototype.refreshParent.$inject=["handle"];YtreeComponent.prototype.newChild=function(e){var t=this;var n=e.$modelValue?e.$modelValue:this.root;n.nodes=n.nodes||[];this.treeService.saveNode(n).then((function(i){(e.collapsed?t.toggleAndfetch(e):t.$q.when()).then((function(){var e=n.nodes.find((function(e){return e.uid===i.uid}));if(!e){n.nodes.push(i)}}))}))};YtreeComponent.prototype.newChild.$inject=["handle"];YtreeComponent.prototype.newSibling=function(e){var t=e.$modelValue;var n=t.parent;this.treeService.saveNode(n).then((function(e){n.nodes.push(e)}))};YtreeComponent.prototype.newSibling.$inject=["handle"];YtreeComponent.prototype.remove=function(e){var t=this;var n=e.$modelValue;this.treeService.removeNode(n).then((function(){var e=n.parent;e.nodes.splice(e.nodes.indexOf(n),1);e.initiated=false;delete e.nodes;t.fetchData(e)}))};YtreeComponent.prototype.remove.$inject=["handle"];YtreeComponent.prototype.isRoot=function(e){var t=e.$modelValue;return t.parent.uid===undefined};YtreeComponent.prototype.isRoot.$inject=["handle"];YtreeComponent.prototype.displayDefaultTemplate=function(){return!this.removeDefaultTemplate};YtreeComponent.prototype.onNodeMouseEnter=function(e){e.mouseHovered=true};YtreeComponent.prototype.onNodeMouseEnter.$inject=["node"];YtreeComponent.prototype.onNodeMouseLeave=function(e){e.mouseHovered=false};YtreeComponent.prototype.onNodeMouseLeave.$inject=["node"];YtreeComponent.prototype.getNodeById=function(e,t){if(!t){t=this.root.nodes}if(e===this.rootNodeUid){return this.root}for(var n in t){if(t.hasOwnProperty(n)){if(t[n].uid===e){return t[n]}if(t[n].hasChildren){t[n].nodes=t[n].nodes||[];var i=this.getNodeById(e,t[n].nodes);if(i){return i}}}}return null};YtreeComponent.prototype.getNodeById.$inject=["nodeUid","nodeArray"];YtreeComponent=__decorate([SeComponent({templateUrl:"yTreeComponentTemplate.html",inputs:["nodeTemplateUrl:=","nodeUri:=","nodeActions:=","rootNodeUid:=","dragOptions:=","removeDefaultTemplate:=?","showAsList:=?"]}),__metadata("design:paramtypes",[Object,Function,Function,Function])],YtreeComponent);return YtreeComponent}();var Po=n(933);var To={provide:"treeConfig",useValue:{treeClass:"angular-ui-tree",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30,defaultCollapsed:true,dragDelay:200}};var Ao=function(){function TreeModule(){}TreeModule=__decorate([SeModule({imports:[Po,"includeReplaceModule","functionsModule","smarteditServicesModule","translationServiceModule","confirmationModalServiceModule","yLoDashModule"],declarations:[Eo],providers:[To,{provide:"TreeService",useFactory:TreeServiceFactory},{provide:"_TreeDndOptions",useFactory:TreeDndOptionFactory},TreeServiceFactory]})],TreeModule);return TreeModule}();var Do=function(){function YMoreTextComponent(){}YMoreTextComponent=__decorate([SeComponent({templateUrl:"moreTextTemplate.html",inputs:["text","limit:?","moreLabelI18nKey:?","lessLabelI18nKey:?","ellipsis:?"]})],YMoreTextComponent);return YMoreTextComponent}();var Oo=function(){YInfiniteScrollingComponent.$inject=["$timeout","encode","lodash","discardablePromiseUtils","$element","stringUtils","throttle","testModeService"];function YInfiniteScrollingComponent(e,t,n,i,o,r,a,s){this.$timeout=e;this.encode=t;this.lodash=n;this.discardablePromiseUtils=i;this.$element=o;this.CONTAINER_CLASS="ySEInfiniteScrolling-container";this.initiated=false;this.THROTTLE_MILLISECONDS=250;this.containerId=r.generateIdentifier();this.nextPage=this.nextPage.bind(this);if(!s.isE2EMode()){this.$onChanges=a(this.$onChanges.bind(this),this.THROTTLE_MILLISECONDS)}}YInfiniteScrollingComponent.prototype.$onChanges=function(){this.context=this.context||this;this.$postLink()};YInfiniteScrollingComponent.prototype.nextPage=function(){var e=this;if(this.pagingDisabled){return}this.pagingDisabled=true;this.currentPage++;this.mask=this.mask||"";this.discardablePromiseUtils.apply(this.containerId,this.fetchPage(this.mask,this.pageSize,this.currentPage),(function(t){t.results=t.results||[];t.results.forEach((function(t){t.technicalUniqueId=e.encode(t)}));var n=e.lodash.differenceBy(t.results,e.context.items,"technicalUniqueId");if(e.lodash.size(n)>0){Array.prototype.push.apply(e.context.items,n)}e.$timeout((function(){e.pagingDisabled=t.results.length===0||t.pagination&&e.context.items.length===t.pagination.totalCount}))}))};YInfiniteScrollingComponent.prototype.$postLink=function(){var e=this.initiated;this.distance=this.distance||0;this.context.items=[];this.currentPage=-1;this.pagingDisabled=false;if(!this.container&&this.$element){this.container=this.$element.find("."+this.CONTAINER_CLASS).get(0);this.initiated=true}else{this.container.scrollTop=0}if(e){this.nextPage()}};YInfiniteScrollingComponent=__decorate([SeComponent({templateUrl:"LegacyInfiniteScrollingTemplate.html",inputs:["pageSize","mask:?","fetchPage","distance:?","context:?","dropDownContainerClass: @?","dropDownClass: @?"]}),__metadata("design:paramtypes",[Function,Function,Function,Lt,Object,j,Function,Li])],YInfiniteScrollingComponent);return YInfiniteScrollingComponent}();var Ro=function(){YEventMessageComponent.$inject=["systemEventService"];function YEventMessageComponent(e){this.systemEventService=e;this.type="info";this.show=false}YEventMessageComponent.prototype.$onChanges=function(e){var t=this;if(e.showEvent){this.removeShowEventHandler();this.unregisterShowEventHandler=this.systemEventService.subscribe(e.showEvent.currentValue,(function(e,n){return t.showEventHandler(e,n)}))}if(e.hideEvent){this.removeHideEventHandler();this.unregisterHideEventHandler=this.systemEventService.subscribe(e.hideEvent.currentValue,(function(){return t.show=false}))}if(this.recompile){this.recompile()}};YEventMessageComponent.prototype.$onChanges.$inject=["changesObj"];YEventMessageComponent.prototype.$onInit=function(){this.show=this.showToStart==="true"||this.showToStart===true};YEventMessageComponent.prototype.$onDestroy=function(){this.removeShowEventHandler();this.removeHideEventHandler()};YEventMessageComponent.prototype.showDescription=function(){return typeof this.description==="string"&&this.description.length>0};YEventMessageComponent.prototype.showTitle=function(){return typeof this.title==="string"&&this.title.length>0};YEventMessageComponent.prototype.showEventHandler=function(e,t){if(t.description&&t.description.length){this.description=t.description}if(t.title&&t.title.length){this.title=t.title}this.show=true;if(this.recompile){this.recompile()}};YEventMessageComponent.prototype.showEventHandler.$inject=["eventId","eventData"];YEventMessageComponent.prototype.removeHideEventHandler=function(){if(this.unregisterHideEventHandler){this.unregisterHideEventHandler()}};YEventMessageComponent.prototype.removeShowEventHandler=function(){if(this.unregisterShowEventHandler){this.unregisterShowEventHandler()}};YEventMessageComponent=__decorate([SeComponent({template:'\n\t\t<div data-recompile-dom="$ctrl.recompile">\n\t\t\t<se-message [type]="$ctrl.type"\n\t\t\t\tdata-ng-if="$ctrl.show">\n\t\t\t\t<ng-container data-ng-if="$ctrl.title.length" se-message-title>\n\t\t\t\t\t{{ $ctrl.title | translate }}\n\t\t\t\t</ng-container>\n\t\t\t\t<ng-container data-ng-if="$ctrl.description.length" se-message-description>\n\t\t\t\t\t{{ $ctrl.description | translate }}\n\t\t\t\t</ng-container>\n\t\t\t</se-message>\n\t\t</div>\n    ',inputs:["type: ?","title: ?","description: ?","showEvent: ?","hideEvent: ?","showToStart: ?"]}),__metadata("design:paramtypes",[Kt])],YEventMessageComponent);return YEventMessageComponent}();var Mo=function(){YMessageComponent.$inject=["$element","$compile","$scope"];function YMessageComponent(e,t,n){this.$element=e;this.$compile=t;this.$scope=n}YMessageComponent.prototype.$postLink=function(){var e=this.$element.find("#y-message-title");var t=this.$element.find("#y-message-description");var n=this.$element.find("#y-message-title-source");var i=this.$element.find("#y-message-description-source");if(n[0].firstChild){e.append(this.$compile(n[0].firstChild)(this.$scope)[0])}if(i[0].firstChild){t.append(this.$compile(i[0].firstChild)(this.$scope)[0])}};YMessageComponent=__decorate([SeComponent({templateUrl:"yMessage.html",transclude:{messageTitle:"?messageTitle",messageDescription:"?messageDescription"},inputs:["messageId:@","type:@"]}),__metadata("design:paramtypes",[Object,Function,Object])],YMessageComponent);return YMessageComponent}();var xo=new s.InjectionToken("DROPDOWN_MENU_ITEM_DATA");window.__smartedit__.addDecoratorPayload("Component","DropdownMenuItemDefaultComponent",{selector:"se-dropdown-menu-item-default",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'<a class="se-dropdown-item fd-menu__item" [ngClass]="data.dropdownItem.customCss" (click)="data.dropdownItem.callback(data.selectedItem, data.dropdownItem)"><span *ngIf="data.dropdownItem.icon" [ngClass]="data.dropdownItem.icon"></span> <span>{{ data.dropdownItem.key | translate }}</span></a>'});var No=function(){function DropdownMenuItemDefaultComponent(e){this.data=e}DropdownMenuItemDefaultComponent=__decorate([s.Component({selector:"se-dropdown-menu-item-default",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'<a class="se-dropdown-item fd-menu__item" [ngClass]="data.dropdownItem.customCss" (click)="data.dropdownItem.callback(data.selectedItem, data.dropdownItem)"><span *ngIf="data.dropdownItem.icon" [ngClass]="data.dropdownItem.icon"></span> <span>{{ data.dropdownItem.key | translate }}</span></a>'}),__param(0,s.Inject(xo)),__metadata("design:paramtypes",[Object])],DropdownMenuItemDefaultComponent);return DropdownMenuItemDefaultComponent}();var ko=function(){function YHelpComponent(){}YHelpComponent.prototype.$onChanges=function(e){if(this.template&&e.template){this.template="<div>"+this.template+"</div>"}};YHelpComponent.prototype.$onChanges.$inject=["changes"];YHelpComponent=__decorate([SeComponent({selector:"y-help",templateUrl:"yHelpTemplate.html",inputs:["title","template","templateUrl"]})],YHelpComponent);return YHelpComponent}();r.module("resourceLocationsModule",[]).constant("CONTEXT_SITE_ID",oe).constant("CONTEXT_CATALOG",ne).constant("CONTEXT_CATALOG_VERSION",ie).constant("PAGE_CONTEXT_SITE_ID",se).constant("PAGE_CONTEXT_CATALOG",re).constant("PAGE_CONTEXT_CATALOG_VERSION",ae).constant("SMARTEDIT_ROOT","smartedit").constant("SMARTEDIT_RESOURCE_URI_REGEXP",Ee).constant("CONFIGURATION_URI",Te).constant("CMSWEBSERVICES_RESOURCE_URI","/cmswebservices").constant("DEFAULT_AUTHENTICATION_ENTRY_POINT",o.DEFAULT_AUTHENTICATION_ENTRY_POINT).constant("DEFAULT_AUTHENTICATION_CLIENT_ID",ye).constant("I18N_RESOURCE_URI","/smarteditwebservices/v1/i18n/translations").constant("I18N_LANGUAGES_RESOURCE_URI",nt).constant("PREVIEW_RESOURCE_URI",Ie).constant("LANGUAGE_RESOURCE_URI",tt).constant("PRODUCT_RESOURCE_API",ht).constant("PRODUCT_LIST_RESOURCE_API",vt).constant("SITES_RESOURCE_URI",dt).constant("LANDING_PAGE_PATH",o.LANDING_PAGE_PATH).constant("STORE_FRONT_CONTEXT",gt).constant("CATALOGS_PATH","/cmswebservices/v1/catalogs/").constant("MEDIA_PATH",Nt).constant("ENUM_RESOURCE_URI","/cmswebservices/v1/enums").constant("SYNC_PATH","/cmswebservices/v1/catalogs/:catalog/versions/Staged/synchronizations/versions/Online").constant("MEDIA_RESOURCE_URI",xt).constant("TYPES_RESOURCE_URI",mt).factory("resourceLocationToRegex",(function(){return B.resourceLocationToRegex}));var Fo=function(){function SeConstantsModule(){}SeConstantsModule=__decorate([SeModule({providers:__spreadArrays(U.provideValues({CTX_MENU_DROPDOWN_IS_OPEN:me,CLOSE_CTX_MENU:ue,SHOW_SLOT_MENU:"_SHOW_SLOT_MENU",HIDE_SLOT_MENU:"HIDE_SLOT_MENU"}),[{provide:"OVERLAY_ID",useValue:Ue},{provide:"COMPONENT_CLASS",useValue:"smartEditComponent"},{provide:"OVERLAY_COMPONENT_CLASS",useValue:Qe},{provide:"SMARTEDIT_ATTRIBUTE_PREFIX",useValue:"data-smartedit-"},{provide:"ID_ATTRIBUTE",useValue:Z},{provide:"UUID_ATTRIBUTE",useValue:Ze},{provide:"ELEMENT_UUID_ATTRIBUTE",useValue:X},{provide:"CATALOG_VERSION_UUID_ATTRIBUTE",useValue:Be},{provide:"TYPE_ATTRIBUTE",useValue:Q},{provide:"CONTAINER_ID_ATTRIBUTE",useValue:"data-smartedit-container-id"},{provide:"CONTAINER_TYPE_ATTRIBUTE",useValue:et},{provide:"CONTENT_SLOT_TYPE",useValue:Je},{provide:"SMARTEDIT_IFRAME_WRAPPER_ID",useValue:At},{provide:"SMARTEDIT_IFRAME_DRAG_AREA",useValue:Pt},{provide:"EVENT_TOGGLE_SMARTEDIT_IFRAME_DRAG_AREA",useValue:"EVENT_TOGGLE_SMARTEDIT_IFRAME_DRAG_AREA"},{provide:"SCROLL_AREA_CLASS",useValue:Et},{provide:"SMARTEDIT_ELEMENT_HOVERED",useValue:wt},{provide:"SMARTEDIT_DRAG_AND_DROP_EVENTS",useValue:yt},{provide:"DATE_CONSTANTS",useValue:pt},{provide:Ot,useValue:Ot},{provide:xe,useValue:xe},{provide:Fe,useValue:Fe},{provide:ze,useValue:ze},{provide:Ne,useValue:Ne},{provide:ke,useValue:ke},{provide:"ALL_PERSPECTIVE",useValue:St},{provide:"NONE_PERSPECTIVE",useValue:Ct},{provide:"PERSPECTIVE_SELECTOR_WIDGET_KEY",useValue:Ve},{provide:"VALIDATION_MESSAGE_TYPES",useValue:{VALIDATION_ERROR:"ValidationError",WARNING:"Warning"}},{provide:"CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS",useValue:qe},{provide:"SMARTEDIT_COMPONENT_PROCESS_STATUS",useValue:"smartEditComponentProcessStatus"},{provide:"CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS",useValue:We},{provide:"SORT_DIRECTIONS",useValue:{ASC:t.SortDirections.Ascending,DESC:t.SortDirections.Descending}},{provide:je,useValue:je},{provide:Oe,useValue:Oe},{provide:"SHOW_TOOLBAR_ITEM_CONTEXT",useValue:_t},{provide:"HIDE_TOOLBAR_ITEM_CONTEXT",useValue:ft},{provide:"EVENT_NOTIFICATION_CHANGED",useValue:"EVENT_NOTIFICATION_CHANGED"},{provide:"OVERLAY_RERENDERED_EVENT",useValue:Ke},{provide:"WHO_AM_I_RESOURCE_URI",useValue:_e},{provide:"EVENTS",useValue:o.EVENTS},{provide:"SELECTED_LANGUAGE",useValue:"SELECTED_LANGUAGE"},{provide:"SWITCH_LANGUAGE_EVENT",useValue:"SWITCH_LANGUAGE_EVENT"},{provide:"EVENT_SMARTEDIT_COMPONENT_UPDATED",useValue:$e},{provide:"OPERATION_CONTEXT",useValue:ve},{provide:"SMARTEDIT_INNER_FILES",useValue:"SMARTEDIT_INNER_FILES"},{provide:"SMARTEDIT_INNER_FILES_POST",useValue:"SMARTEDIT_INNER_FILES_POST"}])})],SeConstantsModule);return SeConstantsModule}();var zo;(function(e){e["Hover"]="hover";e["Click"]="click";e["Focus"]="focus";e["OutsideClick"]="outsideClick";e["None"]="none"})(zo||(zo={}));var Lo;(function(e){e["Close"]="close";e["None"]="none"})(Lo||(Lo={}));var Vo=function(){YPopoverDirective.$inject=["$scope","$timeout","$element","yjQuery","$templateCache","yPopupEngineService","$transclude"];function YPopoverDirective(e,t,n,i,o,r,a){var s=this;this.$scope=e;this.$timeout=t;this.$element=n;this.yjQuery=i;this.$templateCache=o;this.yPopupEngineService=r;this.$transclude=a;this.title="";this.placement="top";this.transcludedContent=null;this.transclusionScope=null;this.engine=null;this.config=null;this.trigger=zo.Click;this.isOpen=false;this.previousIsOpen=false;this.$transclude((function(e,t){s.$element.append(e);s.transcludedContent=e;s.transclusionScope=t}))}YPopoverDirective.prototype.$onInit=function(){var e=this;var t=this.$element[0];var n=o.windowUtils.isIframe()?this.yjQuery("#"+Ue):null;this.$scope.placement=this.placement;this.$scope.template=this.template;this.$scope.title=this.title;this.config={placement:this.placement||"top",trigger:this.trigger||zo.Click,container:n&&n.length?n[0]:"body",onShow:function(){e.isOpen=true},onHide:function(){e.isOpen=false},onChanges:function(t,n){e.$timeout((function(){if(e.placement!==n.placement){e.placement=n.placement}}))}};this.engine=new this.yPopupEngineService(t,this.getTemplate(),this.$scope,this.config);this.isOpen=!o.stringUtils.isBlank(this.isOpen)?this.isOpen:this.engine.isOpen};YPopoverDirective.prototype.$doCheck=function(){if(this.previousIsOpen!==this.isOpen){if(this.isOpen){this.engine.show()}else{this.engine.hide()}this.previousIsOpen=this.isOpen}};YPopoverDirective.prototype.$onChanges=function(){if(this.templateUrl){this.template=this.$templateCache.get(this.templateUrl);delete this.templateUrl}if(this.engine){this.config.placement=this.placement||"top";this.config.trigger=this.trigger||zo.Click;this.engine.configure(this.config)}};YPopoverDirective.prototype.$onDestroy=function(){this.engine.dispose();this.transcludedContent.remove();this.transclusionScope.$destroy()};YPopoverDirective.prototype.getTemplate=function(){return'<y-popover-popup class="se-popover-popup" data-placement="ypop.placement" data-template="ypop.template" data-title="ypop.title"></y-popover-popup>'};YPopoverDirective=__decorate([SeDirective({selector:"[y-popover]",transclude:true,replace:false,controllerAs:"ypop",inputs:["templateUrl:?","template:?","title:?","placement:?","trigger:?","isOpen:?"]}),__metadata("design:paramtypes",[Object,Function,Object,Function,Object,Object,Function])],YPopoverDirective);return YPopoverDirective}();var $o=function(){YPopupEngineService.$inject=["$document","$compile","$timeout"];function YPopupEngineService(e,t,n){var i=function(){function YPopupEngine(e,t,n,i){var o=this;this.anchorElement=e;this.template=t;this.scope=n;this.eventListeners=[];this.isOpen=false;this.oldTrigger=null;this.resizeObserver=new y((function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];var r=i.target;if(r===o.popupElement){o.update()}}}));this.popperConfig={modifiers:{preventOverflow:{padding:0,boundariesElement:"viewport"}}};this.configure(i)}YPopupEngine.prototype.configure=function(t){var n=this;var i=t||{};this.onChanges=i.onChanges;this.container=i.container||e[0].body;this.onShow=i.onShow;this.onHide=i.onHide;this.disposing=false;this.config={placement:i.placement||"bottom",modifiers:i.modifiers,trigger:i.trigger||zo.Hover,onClickOutside:i.onClickOutside||Lo.Close,onCreate:function(e){return n._onChanges(e)},onUpdate:function(e){return n._onChanges(e)}};this.setTrigger(this.config.trigger)};YPopupEngine.prototype.show=function(){if(this.isOpen||this.disposing){return}this.isOpen=true;this.popupScope=this.scope.$new(false);this.popupElement=t(this.template)(this.popupScope)[0];this.popupInstance=new _(this.anchorElement,this.popupElement,a.merge(this.config,this.popperConfig));if(typeof this.container==="string"){r.element(this.container)[0].appendChild(this.popupElement)}else{this.container.appendChild(this.popupElement)}this.resizeObserver.observe(this.popupElement);if(this.onShow){this.onShow()}this.update()};YPopupEngine.prototype.hide=function(){if(!this.isOpen){return}this.resizeObserver.unobserve(this.popupElement);this.popupScope.$destroy();this.popupInstance.destroy();this.popupElement.parentNode.removeChild(this.popupElement);if(this.onHide){this.onHide()}this.isOpen=false};YPopupEngine.prototype.update=function(){if(this.isOpen){this.popupInstance.scheduleUpdate()}};YPopupEngine.prototype.setTrigger=function(t){var i=this;if(this.oldTrigger===t){return}this.config.trigger=t;this.oldTrigger=t;this._removeTriggers();this._composeEvents(t).forEach((function(e){return i._setEventListener(e)}));if(this.config.onClickOutside===Lo.Close&&this.config.trigger===zo.Click){var bodyClick_1=function(e){return e.target!==i.anchorElement&&!i.anchorElement.contains(e.target)&&i.hide()};e[0].body.addEventListener("click",(function(e){n((function(){bodyClick_1(e)}))}));this.eventListeners.push((function(){e[0].body.removeEventListener("click",bodyClick_1)}))}};YPopupEngine.prototype.dispose=function(){this.disposing=true;this.hide();this._removeTriggers()};YPopupEngine.prototype._removeTriggers=function(){this.eventListeners.forEach((function(e){e()}));this.eventListeners=[]};YPopupEngine.prototype._onChanges=function(e){if(this.onChanges){this.onChanges(this.popupElement,e)}};YPopupEngine.prototype._handleShow=function(e){e.stopPropagation();e.preventDefault();this.show()};YPopupEngine.prototype._handleHide=function(e){e.stopPropagation();e.preventDefault();this.hide()};YPopupEngine.prototype._setEventListener=function(e){var t=this;this.anchorElement.addEventListener(e.event,(function(t){n((function(){e.handle(t)}))}));this.eventListeners.push((function(){t.anchorElement.removeEventListener(e.event,e.handle)}))};YPopupEngine.prototype._composeEvents=function(e){var t=this;switch(e){case zo.Click:return[{event:"click",handle:function(){return t.isOpen?t.hide():t.show()}}];case zo.Hover:return[{event:"mouseenter",handle:function(e){return t._handleShow(e)}},{event:"mouseleave",handle:function(e){return t._handleHide(e)}}];case zo.Focus:return[{event:"focus",handle:function(e){return t._handleShow(e)}},{event:"blur",handle:function(e){return t._handleHide(e)}}];case"show":case"true":case true:this.show();return[];case"hide":case"false":case false:this.hide();return[];default:return[]}};return YPopupEngine}();return i}YPopupEngineService=__decorate([SeInjectable(),__metadata("design:paramtypes",[Object,Function,Function])],YPopupEngineService);return YPopupEngineService}();var Uo=function(){YPopupOverlayUtilsClickOrderService.$inject=["$document","$log"];function YPopupOverlayUtilsClickOrderService(e,t){this.$document=e;this.$log=t;this.controllerRegistry=[]}YPopupOverlayUtilsClickOrderService.prototype.register=function(e){var t=this;var n=this.getIndex(e);if(n===-1){if(this.controllerRegistry.length===0){r.element(this.$document[0].body).on("click",(function(e){return t.clickHandler(e)}))}this.controllerRegistry=__spreadArrays([e],this.controllerRegistry)}else{this.$log.warn("yPopupOverlayUtilsClickOrderService.onHide() - instance already registered")}};YPopupOverlayUtilsClickOrderService.prototype.register.$inject=["instance"];YPopupOverlayUtilsClickOrderService.prototype.unregister=function(e){var t=this;var n=this.getIndex(e);if(n!==-1){this.controllerRegistry.splice(n,1)}if(this.controllerRegistry.length===0){r.element(this.$document[0].body).off("click",(function(e){return t.clickHandler(e)}))}};YPopupOverlayUtilsClickOrderService.prototype.unregister.$inject=["instance"];YPopupOverlayUtilsClickOrderService.prototype.clickHandler=function(e){if(this.controllerRegistry.length>0){this.controllerRegistry[0].onBodyElementClicked(e)}};YPopupOverlayUtilsClickOrderService.prototype.clickHandler.$inject=["$event"];YPopupOverlayUtilsClickOrderService.prototype.getIndex=function(e){return this.controllerRegistry.findIndex((function(t){return t.uuid===e.uuid}))};YPopupOverlayUtilsClickOrderService.prototype.getIndex.$inject=["instance"];YPopupOverlayUtilsClickOrderService=__decorate([SeInjectable(),__metadata("design:paramtypes",[Object,Object])],YPopupOverlayUtilsClickOrderService);return YPopupOverlayUtilsClickOrderService}();var jo=function(){YPopupOverlayUtilsDOMCalculations.$inject=["$window","$document"];function YPopupOverlayUtilsDOMCalculations(e,t){this.$window=e;this.$document=t}YPopupOverlayUtilsDOMCalculations.prototype.adjustHorizontalToBeInViewport=function(e){if(e.width>=this.$window.innerWidth){e.left=0;e.width=this.$window.innerWidth}else{var t=this.getScrollBarWidth();if(e.left-this.$window.pageXOffset+e.width>=this.$window.innerWidth-t){e.left=this.$window.innerWidth-e.width-t}if(e.left-this.$window.pageXOffset<=0){e.left=this.$window.pageXOffset}}};YPopupOverlayUtilsDOMCalculations.prototype.adjustHorizontalToBeInViewport.$inject=["absPosition"];YPopupOverlayUtilsDOMCalculations.prototype.calculatePreferredPosition=function(e,t,n,i,o){var r=this.$window.pageXOffset;var a=this.$window.pageYOffset;var s={width:t,height:n,top:0,left:0};switch(i){case"top":s.top=e.top+a-n;break;case"bottom":default:s.top=e.bottom+a}switch(o){case"left":s.left=e.right+r-t;break;case"right":default:s.left=e.left+r}return s};YPopupOverlayUtilsDOMCalculations.prototype.calculatePreferredPosition.$inject=["anchorBoundingClientRect","targetWidth","targetHeight","targetValign","targetHalign"];YPopupOverlayUtilsDOMCalculations.prototype.getScrollBarWidth=function(){var e=this.$document[0].body.scrollHeight>this.$document[0].body.clientHeight;if(!e){return 0}var t=this.$document[0].createElement("p");var n=this.$document[0].createElement("div");t.style.width="100%";t.style.height="200px";n.style.position="absolute";n.style.top="0px";n.style.left="0px";n.style.visibility="hidden";n.style.width="200px";n.style.height="150px";n.style.overflow="hidden";n.appendChild(t);this.$document[0].body.appendChild(n);var i=t.offsetWidth;var o=n.clientWidth;n.style.overflow="scroll";this.$document[0].body.removeChild(n);return i-o};YPopupOverlayUtilsDOMCalculations=__decorate([SeInjectable(),__metadata("design:paramtypes",[Object,Object])],YPopupOverlayUtilsDOMCalculations);return YPopupOverlayUtilsDOMCalculations}();var Bo="ypo-uuid-_";var Ho=function(){YPopupOverlayDirective.$inject=["$scope","$element","$compile","$attrs","$timeout","yjQuery","yPopupOverlayUtilsDOMCalculations","yPopupOverlayUtilsClickOrderService"];function YPopupOverlayDirective(e,t,n,i,o,r,a,s){var c=this;this.$scope=e;this.$element=t;this.$compile=n;this.$attrs=i;this.$timeout=o;this.yjQuery=r;this.yPopupOverlayUtilsDOMCalculations=a;this.yPopupOverlayUtilsClickOrderService=s;this.togglePoppup=function(e){e.stopPropagation();e.preventDefault();return c.popupDisplayed?c.hide():c.show()};this.$scope.closePopupOverlay=function(){c.hide()}}YPopupOverlayDirective.prototype.$onInit=function(){this.uuid=a.uniqueId(Bo);this.popupDisplayed=false;this.resetPopupSize();this.updateTriggers(zo.Click);this.active=!!this.yPopupOverlay};YPopupOverlayDirective.prototype.$doCheck=function(){if(!this.active){return}this.checkPopupSizeChanged();if(this.yPopupOverlayTrigger!==this.doCheckTrigger){this.doCheckTrigger=this.yPopupOverlayTrigger;this.updateTriggers(this.yPopupOverlayTrigger)}};YPopupOverlayDirective.prototype.$onDestroy=function(){if(this.untrigger){this.untrigger()}this.hide()};YPopupOverlayDirective.prototype.onBodyElementClicked=function(e){if(!this.popupElement){return false}var t=this.isChildOfElement(this.popupElement,e.target);var n=this.isChildOfElement(this.$element,e.target);if(!t&&!n){this.hide();e.stopPropagation();e.preventDefault();return true}return false};YPopupOverlayDirective.prototype.onBodyElementClicked.$inject=["$event"];YPopupOverlayDirective.prototype.isChildOfElement=function(e,t){return e[0]===t||this.yjQuery.contains(e[0],t)};YPopupOverlayDirective.prototype.isChildOfElement.$inject=["parentElement","childElement"];YPopupOverlayDirective.prototype.checkPopupSizeChanged=function(){if(this.popupElement){var e=this.popupElement.children().first();if(!e[0]){return}var t=e[0].getBoundingClientRect();var n=t.width!==this.popupSize.width||t.height!==this.popupSize.height;this.popupSize={width:t.width,height:t.height};if(n){this.updatePopupElementPositionAndSize()}}};YPopupOverlayDirective.prototype.updatePopupElementPositionAndSize=function(){if(!this.popupElement){return}try{var e=this.$element[0].getBoundingClientRect();var t=this.yPopupOverlayUtilsDOMCalculations.calculatePreferredPosition(e,this.popupSize.width,this.popupSize.height,this.yPopupOverlay.valign,this.yPopupOverlay.halign);this.yPopupOverlayUtilsDOMCalculations.adjustHorizontalToBeInViewport(t);this.popupElement.css(t)}catch(e){}};YPopupOverlayDirective.prototype.getTemplateString=function(){var e=this.yjQuery("<div>");e.attr("data-uuid",this.uuid);e.addClass("se-popover-outer");var t;if(this.yPopupOverlay.template){t=this.yjQuery("<div>");t.html(this.yPopupOverlay.template)}else if(this.yPopupOverlay.templateUrl){t=this.yjQuery("<data-ng-include>");t.attr("src","'"+this.yPopupOverlay.templateUrl+"'")}else{throw new Error("yPositiongetTemplateString() - Missing template")}t.addClass("se-popover-inner");e.append(t);return e[0].outerHTML};YPopupOverlayDirective.prototype.hide=function(){var e=this;if(!this.popupDisplayed){return}this.yPopupOverlayUtilsClickOrderService.unregister(this);if(this.popupElementScope){this.popupElementScope.$destroy();this.popupElementScope=null}if(this.popupElement){this.popupElement.remove();this.popupElement=null}if(this.$attrs.yPopupOverlayOnHide){this.$timeout((function(){return e.yPopupOverlayOnHide()}))}this.resetPopupSize();this.popupDisplayed=false};YPopupOverlayDirective.prototype.show=function(){var e=this;if(this.popupDisplayed){return}var t=this.getTemplateString();this.popupElementScope=this.$scope.$new(false);this.popupElement=this.$compile(t)(this.popupElementScope);var n=V.isIframe()?this.yjQuery("#"+Ue):this.yjQuery("body");this.updatePopupElementPositionAndSize();this.popupElement.appendTo(n);r.element((function(){e.updatePopupElementPositionAndSize();e.yPopupOverlayUtilsClickOrderService.register(e);if(e.$attrs.yPopupOverlayOnShow){e.$timeout((function(){e.yPopupOverlayOnShow()}))}}));this.popupDisplayed=true};YPopupOverlayDirective.prototype.updateTriggers=function(e){var t=this;if(this.oldTrigger===e){return}this.oldTrigger=e;if(this.untrigger){this.untrigger()}if(e===zo.Click){r.element(this.$element).on("click",this.togglePoppup);this.untrigger=function(){r.element(t.$element).off("click",t.togglePoppup)};return}if(e==="true"||e===true){this.show()}else{this.hide()}};YPopupOverlayDirective.prototype.updateTriggers.$inject=["trigger"];YPopupOverlayDirective.prototype.resetPopupSize=function(){this.popupSize={width:0,height:0}};YPopupOverlayDirective=__decorate([SeDirective({selector:"[y-popup-overlay]",scope:false,inputs:["yPopupOverlay:=","yPopupOverlayTrigger:=","yPopupOverlayOnShow:&","yPopupOverlayOnHide:&"]}),__metadata("design:paramtypes",[Object,Object,Function,Object,Function,Function,jo,Uo])],YPopupOverlayDirective);return YPopupOverlayDirective}();var Go=function(){function YPopupOverlayModule(){}YPopupOverlayModule=__decorate([SeModule({imports:[Bt,Fo],providers:[$o,Uo,jo],declarations:[Ho]})],YPopupOverlayModule);return YPopupOverlayModule}();var Wo=function(){function YPopoverPopupComponent(){}YPopoverPopupComponent=__decorate([SeComponent({selector:"y-popover-popup",templateUrl:"yPopoverPopupTemplate.html",inputs:["title:?","template:?","placement:?"]})],YPopoverPopupComponent);return YPopoverPopupComponent}();var qo=function(){function YPopoverModule(){}YPopoverModule=__decorate([SeModule({imports:["coretemplates",Go,Bt,Fo],declarations:[Vo,Wo]})],YPopoverModule);return YPopoverModule}();var Ko=function(){function YHelpModule(){}YHelpModule=__decorate([SeModule({imports:[qo],declarations:[ko]})],YHelpModule);return YHelpModule}();var Yo=function(){function DropdownPopulatorInterface(e,t,n){this.lodash=e;this.languageService=t;this.translateService=n}DropdownPopulatorInterface.prototype.getItem=function(e){return null};DropdownPopulatorInterface.prototype.fetchAll=function(e){"proxyFunction";return null};DropdownPopulatorInterface.prototype.fetchPage=function(e){"proxyFunction";return null};DropdownPopulatorInterface.prototype.isPaged=function(){return false};DropdownPopulatorInterface.prototype.populateAttributes=function(e,t,n){var i=this;return this.lodash.map(e,(function(e){if(t&&i.lodash.isEmpty(e.id)){e.id=e[t]}if(n&&i.lodash.isEmpty(e.label)){var o=i.lodash.find(n,(function(t){return!i.lodash.isEmpty(e[t])}));if(o){e.label=e[o]}}return e}))};DropdownPopulatorInterface.prototype.search=function(e,t){var n=this;return this.languageService.getResolveLocale().then((function(i){return n.lodash.filter(e,(function(e){var o;if(n.lodash.isObject(e.label)){i=e.label[i]?i:Object.keys(e.label)[0];o=e.label[i]}else{o=n.translateService?n.translateService.instant(e.label):e.label}return o&&o.toUpperCase().indexOf(t.toUpperCase())>-1}))}))};return DropdownPopulatorInterface}();var Xo=function(e){__extends(OptionsDropdownPopulator,e);OptionsDropdownPopulator.$inject=["languageService","translateService"];function OptionsDropdownPopulator(t,n){var i=e.call(this,a,t,n)||this;i.languageService=t;i.translateService=n;return i}OptionsDropdownPopulator.prototype.fetchAll=function(e){var t=this.populateAttributes(e.field.options,e.field.idAttribute,e.field.labelAttributes);if(e.search){return this.search(t,e.search)}return Promise.resolve(t)};OptionsDropdownPopulator.prototype.fetchAll.$inject=["payload"];OptionsDropdownPopulator=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[Oi,m.TranslateService])],OptionsDropdownPopulator);return OptionsDropdownPopulator}(Yo);var Zo=new s.InjectionToken("CustomDropdownPopulatorsToken");var Qo=new s.InjectionToken("IDropdownPopulatorInterface");var Jo=function(e){__extends(UriDropdownPopulator,e);UriDropdownPopulator.$inject=["restServiceFactory","languageService","translateService"];function UriDropdownPopulator(t,n,i){var o=e.call(this,a,n,i)||this;o.restServiceFactory=t;o.languageService=n;o.translateService=i;return o}UriDropdownPopulator.prototype.fetchAll=function(e){var t=this;var n;if(e.field.dependsOn){n=this._buildQueryParams(e.field.dependsOn,e.model)}return this.restServiceFactory.get(e.field.uri).get(n).then((function(n){var i=G.getDataFromResponse(n);var o=t.populateAttributes(i,e.field.idAttribute,e.field.labelAttributes);if(e.search){return t.search(o,e.search)}return Promise.resolve(o)}))};UriDropdownPopulator.prototype.fetchAll.$inject=["payload"];UriDropdownPopulator.prototype.fetchPage=function(e){var t=this;var n={};if(e.field.dependsOn){n=this._buildQueryParams(e.field.dependsOn,e.model)}n.pageSize=e.pageSize;n.currentPage=e.currentPage;n.mask=e.search;if(e.field.params){this.lodash.extend(n,e.field.params)}return this.restServiceFactory.get(e.field.uri).get(n).then((function(n){var i=G.getKeyHoldingDataFromResponse(n);n[i]=t.populateAttributes(n[i],e.field.idAttribute,e.field.labelAttributes);return Promise.resolve(n)}))};UriDropdownPopulator.prototype.fetchPage.$inject=["payload"];UriDropdownPopulator.prototype.getItem=function(e){var t=this;return this.restServiceFactory.get(e.field.uri).getById(e.id).then((function(n){n=t.populateAttributes([n],e.field.idAttribute,e.field.labelAttributes)[0];return Promise.resolve(n)}))};UriDropdownPopulator.prototype.getItem.$inject=["payload"];UriDropdownPopulator.prototype._buildQueryParams=function(e,t){var n=e.split(",").reduce((function(e,n){e[n]=t[n];return e}),{});return n};UriDropdownPopulator.prototype._buildQueryParams.$inject=["dependsOn","model"];UriDropdownPopulator=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[o.RestServiceFactory,Oi,m.TranslateService])],UriDropdownPopulator);return UriDropdownPopulator}(Yo);var dropdownPopulatorInterfaceConstructorFactory=function(e,t){return function(n){__extends(class_1,n);function class_1(){return n.call(this,a,e,t)||this}return class_1}(Yo)};var er=function(){function DropdownPopulatorModule(){}DropdownPopulatorModule=__decorate([s.NgModule({providers:[Xo,Jo,{provide:Qo,useFactory:dropdownPopulatorInterfaceConstructorFactory,deps:[Oi,m.TranslateService]},U.initialize((function(){O.downgradeService("DropdownPopulatorInterface",null,Qo)}))]})],DropdownPopulatorModule);return DropdownPopulatorModule}();window.__smartedit__.addDecoratorPayload("Component","ActionableSearchItemComponent",{selector:"se-actionable-search-item",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-actionable-search-item]":"true"},template:'<div *ngIf="search" class="se-actionable-search-item"><div class="se-actionable-search-item__name">{{ search }}</div><button type="button" class="fd-button--light se-actionable-search-item__action-btn" (click)="onButtonClick()">{{ getActionText() | translate }}</button></div>'});var tr=function(){function ActionableSearchItemComponent(e){this.systemEventService=e;this.actionButtonClick=new s.EventEmitter;this.defaultEventId="yActionableSearchItem_ACTION_CREATE";this.defaultActionText="se.yationablesearchitem.action.create"}ActionableSearchItemComponent.prototype.getActionText=function(){return this.actionText||this.defaultActionText};ActionableSearchItemComponent.prototype.onButtonClick=function(){var e=this.eventId||this.defaultEventId;this.systemEventService.publishAsync(e,this.search||"");this.actionButtonClick.emit()};__decorate([s.Input(),__metadata("design:type",String)],ActionableSearchItemComponent.prototype,"search",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ActionableSearchItemComponent.prototype,"eventId",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ActionableSearchItemComponent.prototype,"actionText",void 0);__decorate([s.Output(),__metadata("design:type",Object)],ActionableSearchItemComponent.prototype,"actionButtonClick",void 0);ActionableSearchItemComponent=__decorate([s.Component({selector:"se-actionable-search-item",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-actionable-search-item]":"true"},template:'<div *ngIf="search" class="se-actionable-search-item"><div class="se-actionable-search-item__name">{{ search }}</div><button type="button" class="fd-button--light se-actionable-search-item__action-btn" (click)="onButtonClick()">{{ getActionText() | translate }}</button></div>'}),__metadata("design:paramtypes",[Kt])],ActionableSearchItemComponent);return ActionableSearchItemComponent}();var nr=new s.InjectionToken("ITEM_COMPONENT_DATA");var ir=function(){function L10nPipeModule(){}L10nPipeModule=__decorate([s.NgModule({declarations:[_o],exports:[_o]})],L10nPipeModule);return L10nPipeModule}();var or=function(){function ReversePipe(){}ReversePipe.prototype.transform=function(e){if(!e){return undefined}return e.slice().reverse()};ReversePipe=__decorate([s.Pipe({name:"seReverse"})],ReversePipe);return ReversePipe}();var rr=function(){function ReversePipeModule(){}ReversePipeModule=__decorate([s.NgModule({declarations:[or],exports:[or]})],ReversePipeModule);return ReversePipeModule}();var ar=function(){function PropertyPipe(){}PropertyPipe.prototype.transform=function(e,t){if(!e){return undefined}if(!t){return __spreadArrays(e)}return e.filter((function(e){return Object.keys(t).every((function(n){return e[n]===t[n]}))}))};PropertyPipe=__decorate([s.Pipe({name:"seProperty"})],PropertyPipe);return PropertyPipe}();var sr=function(){function PropertyPipeModule(){}PropertyPipeModule=__decorate([s.NgModule({declarations:[ar],exports:[ar]})],PropertyPipeModule);return PropertyPipeModule}();var cr=function(){function StartFromPipe(){}e=StartFromPipe;StartFromPipe.transform=function(e,t){return e?e.slice(Number(t)):[]};StartFromPipe.prototype.transform=function(t,n){return e.transform(t,n)};var e;StartFromPipe=e=__decorate([s.Pipe({name:"seStartFrom"})],StartFromPipe);return StartFromPipe}();var lr=function(){function StartFromPipeModule(){}StartFromPipeModule=__decorate([s.NgModule({declarations:[cr],exports:[cr]})],StartFromPipeModule);return StartFromPipeModule}();var dr=function(){function FilterByFieldPipe(){}e=FilterByFieldPipe;FilterByFieldPipe.transform=function(e,t,n,i){var o=i||a.noop;var r=[];if(!t){o(e);return e}var s=t.toLowerCase().split(" ");(e||[]).forEach((function(e){n=n||Object.keys(e);var t=n.map((function(t){return e[t]})).filter((function(e){return typeof e==="string"||e instanceof String})).map((function(e){return e.toLowerCase()}));var i=s.map((function(e){return!!t.find((function(t){return t.indexOf(e)>=0}))})).filter((function(e){return!e}));if(i.length===0){r.push(e)}}));o(r);return r};FilterByFieldPipe.prototype.transform=function(t,n,i,o){return e.transform(t,n,i,o)};var e;FilterByFieldPipe=e=__decorate([s.Pipe({name:"seFilterByField"})],FilterByFieldPipe);return FilterByFieldPipe}();var pr=function(){function FilterByFieldPipeModule(){}FilterByFieldPipeModule=__decorate([s.NgModule({declarations:[dr],exports:[dr]})],FilterByFieldPipeModule);return FilterByFieldPipeModule}();window.__smartedit__.addDecoratorPayload("Component","SpinnerComponent",{selector:"se-spinner",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div\n            *ngIf="isSpinning"\n            class="se-spinner panel-body"\n            [ngClass]="{ \'se-spinner--fluid\': isFluid }"\n        >\n            <div class="spinner">\n                <div class="spinner-container spinner-container1">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container2">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container3">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n            </div>\n        </div>\n    '});var ur=function(){function SpinnerComponent(){this.isFluid=true}__decorate([s.Input(),__metadata("design:type",Boolean)],SpinnerComponent.prototype,"isSpinning",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SpinnerComponent.prototype,"isFluid",void 0);SpinnerComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-spinner",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div\n            *ngIf="isSpinning"\n            class="se-spinner panel-body"\n            [ngClass]="{ \'se-spinner--fluid\': isFluid }"\n        >\n            <div class="spinner">\n                <div class="spinner-container spinner-container1">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container2">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n                <div class="spinner-container spinner-container3">\n                    <div class="spinner-circle1"></div>\n                    <div class="spinner-circle2"></div>\n                    <div class="spinner-circle3"></div>\n                    <div class="circle4"></div>\n                </div>\n            </div>\n        </div>\n    '})],SpinnerComponent);return SpinnerComponent}();var mr=function(){function SpinnerModule(){}SpinnerModule=__decorate([s.NgModule({imports:[u.CommonModule],declarations:[ur],entryComponents:[ur],exports:[ur]})],SpinnerModule);return SpinnerModule}();window.__smartedit__.addDecoratorPayload("Component","InfiniteScrollingComponent",{selector:"se-infinite-scrolling",template:'<div #container class="se-infinite-scrolling__container" [ngClass]="dropDownContainerClass" fdInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div class="se-infinite-scrolling__holder" [ngClass]="dropDownClass"><div #content><ng-content></ng-content></div><div class="spinner-container"><se-spinner [isSpinning]="isLoading" [isFluid]="false"></se-spinner></div></div></div>',styles:["se-infinite-scrolling.se-infinite-scrolling--narrowed .se-infinite-scrolling__holder{padding:0 20px}se-infinite-scrolling .se-infinite-scrolling__container{overflow-y:auto;max-height:200px}se-infinite-scrolling .se-infinite-scrolling__holder{overflow-y:hidden}"],encapsulation:s.ViewEncapsulation.None});var gr=function(){InfiniteScrollingComponent.$inject=["discardablePromiseUtils","cdr"];function InfiniteScrollingComponent(e,t){this.discardablePromiseUtils=e;this.cdr=t;this.distance=80;this.itemsChange=new s.EventEmitter;this.containerId=B.generateIdentifier();this.initiated=false;this.isLoading=false}InfiniteScrollingComponent.prototype.ngOnInit=function(){this.init()};InfiniteScrollingComponent.prototype.ngOnChanges=function(){this.context=this.context||this;this.init()};InfiniteScrollingComponent.prototype.ngAfterViewInit=function(){this.initContentResizeObserver()};InfiniteScrollingComponent.prototype.ngOnDestroy=function(){this.discardablePromiseUtils.clear(this.containerId);this.contentResizeObserver.disconnect()};InfiniteScrollingComponent.prototype.nextPage=function(){var e=this;if(this.pagingDisabled){return}this.pagingDisabled=true;this.currentPage=this.currentPage+1;this.mask=this.mask||"";this.isLoading=true;this.discardablePromiseUtils.apply(this.containerId,this.fetchPage(this.mask,this.pageSize,this.currentPage),(function(t){t.results=t.results||[];t.results.forEach((function(e){e.technicalUniqueId=B.encode(e)}));var n=a.differenceBy(t.results,e.context.items,"technicalUniqueId");if(n.length>0){e.context.items=__spreadArrays(e.context.items,n||[])}e.itemsChange.emit(e.context.items);e.pagingDisabled=t.pagination===undefined||t.results.length===0||t.pagination&&e.context.items.length===t.pagination.totalCount;if(t.pagination!==undefined&&e.context.items.length===0&&t.pagination.page<t.pagination.totalPages){e.pagingDisabled=false;e.nextPage()}if(e.pagingDisabled){e.isLoading=false;e.cdr.detectChanges();return}}))};InfiniteScrollingComponent.prototype.scrollToTop=function(){if(this.containerElement){this.containerElement.nativeElement.scrollTop=0}};InfiniteScrollingComponent.prototype.scrollToBottom=function(){if(this.containerElement){this.containerElement.nativeElement.scrollTop=this.containerElement.nativeElement.scrollHeight}};InfiniteScrollingComponent.prototype.init=function(){var e=this.initiated;this.context.items=[];this.currentPage=-1;this.pagingDisabled=false;this.initiated=true;if(e){this.scrollToTop();this.nextPage()}};InfiniteScrollingComponent.prototype.initContentResizeObserver=function(){var e=this;this.contentResizeObserver=new y((function(t){var n=t[0].contentRect;var i=n.height===0;if(!e.pagingDisabled&&e.isLoading&&!i){if(e.shouldLoadNextPage()){e.nextPage()}else{e.isLoading=false;e.cdr.detectChanges()}e.contentResizeObserver.disconnect()}}));this.contentResizeObserver.observe(this.contentElement.nativeElement)};InfiniteScrollingComponent.prototype.shouldLoadNextPage=function(){var e=this.contentElement.nativeElement.offsetHeight;var t=this.containerElement.nativeElement.offsetHeight;var n=e<=t;return n};__decorate([s.Input(),__metadata("design:type",Number)],InfiniteScrollingComponent.prototype,"pageSize",void 0);__decorate([s.Input(),__metadata("design:type",String)],InfiniteScrollingComponent.prototype,"mask",void 0);__decorate([s.Input(),__metadata("design:type",String)],InfiniteScrollingComponent.prototype,"dropDownContainerClass",void 0);__decorate([s.Input(),__metadata("design:type",String)],InfiniteScrollingComponent.prototype,"dropDownClass",void 0);__decorate([s.Input(),__metadata("design:type",Object)],InfiniteScrollingComponent.prototype,"distance",void 0);__decorate([s.Input(),__metadata("design:type",Object)],InfiniteScrollingComponent.prototype,"context",void 0);__decorate([s.Input(),__metadata("design:type",Function)],InfiniteScrollingComponent.prototype,"fetchPage",void 0);__decorate([s.Output(),__metadata("design:type",Object)],InfiniteScrollingComponent.prototype,"itemsChange",void 0);__decorate([s.ViewChild("container",{static:false}),__metadata("design:type",s.ElementRef)],InfiniteScrollingComponent.prototype,"containerElement",void 0);__decorate([s.ViewChild("content",{static:false}),__metadata("design:type",s.ElementRef)],InfiniteScrollingComponent.prototype,"contentElement",void 0);InfiniteScrollingComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-infinite-scrolling",template:'<div #container class="se-infinite-scrolling__container" [ngClass]="dropDownContainerClass" fdInfiniteScroll (onScrollAction)="nextPage()" [scrollPercent]="distance" *ngIf="initiated"><div class="se-infinite-scrolling__holder" [ngClass]="dropDownClass"><div #content><ng-content></ng-content></div><div class="spinner-container"><se-spinner [isSpinning]="isLoading" [isFluid]="false"></se-spinner></div></div></div>',styles:["se-infinite-scrolling.se-infinite-scrolling--narrowed .se-infinite-scrolling__holder{padding:0 20px}se-infinite-scrolling .se-infinite-scrolling__container{overflow-y:auto;max-height:200px}se-infinite-scrolling .se-infinite-scrolling__holder{overflow-y:hidden}"],encapsulation:s.ViewEncapsulation.None}),__metadata("design:paramtypes",[Lt,s.ChangeDetectorRef])],InfiniteScrollingComponent);return InfiniteScrollingComponent}();var hr=function(){function InfiniteScrollingModule(){}InfiniteScrollingModule=__decorate([s.NgModule({imports:[h.InfiniteScrollModule,mr,u.CommonModule],declarations:[gr],entryComponents:[gr],exports:[gr]})],InfiniteScrollingModule);return InfiniteScrollingModule}();window.__smartedit__.addDecoratorPayload("Component","DefaultItemPrinterComponent",{selector:"se-default-item-printer",changeDetection:s.ChangeDetectionStrategy.OnPush,styles:['.se-item-printer-text{vertical-align:middle;position:relative;max-width:100%;font-family:"72";color:#51555a;display:inline-block}'],template:'<span [attr.title]="((data.item.label || data.item.name) | seL10n | async) | translate" class="se-item-printer-text se-nowrap-ellipsis">{{ ((data.item.label || data.item.name) | seL10n | async) | translate }}</span>'});var vr=function(){function DefaultItemPrinterComponent(e){this.data=e}DefaultItemPrinterComponent=__decorate([s.Component({selector:"se-default-item-printer",changeDetection:s.ChangeDetectionStrategy.OnPush,styles:['.se-item-printer-text{vertical-align:middle;position:relative;max-width:100%;font-family:"72";color:#51555a;display:inline-block}'],template:'<span [attr.title]="((data.item.label || data.item.name) | seL10n | async) | translate" class="se-item-printer-text se-nowrap-ellipsis">{{ ((data.item.label || data.item.name) | seL10n | async) | translate }}</span>'}),__param(0,s.Inject(nr)),__metadata("design:paramtypes",[Object])],DefaultItemPrinterComponent);return DefaultItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","SearchInputComponent",{selector:"se-select-search-input",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-search-input]":"true"},template:'<div class="search"><input #searchInput type="search" class="search__input" [disabled]="isDisabled" [readOnly]="isReadOnly" [placeholder]="placeholder" [ngModel]="search" (ngModelChange)="onChange($event)" (keyup)="onKeyup($event)"/></div>'});var fr=function(){function SearchInputComponent(e,t){this.elementRef=e;this.sharedDataService=t;this.searchKeyup=new s.EventEmitter;this.searchChange=new s.EventEmitter}SearchInputComponent.prototype.ngOnInit=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:e=this;return[4,this.sharedDataService.get("configuration")];case 1:e.configurations=t.sent();this.initSearchInputFilter();return[2]}}))}))};SearchInputComponent.prototype.ngOnDestroy=function(){this.searchTermSubscription.unsubscribe()};Object.defineProperty(SearchInputComponent.prototype,"nativeElement",{get:function(){return this.elementRef.nativeElement},enumerable:false,configurable:true});Object.defineProperty(SearchInputComponent.prototype,"inputElement",{get:function(){return this.searchInput.nativeElement},enumerable:false,configurable:true});SearchInputComponent.prototype.focus=function(){this.inputElement.focus()};SearchInputComponent.prototype.onChange=function(e){this.isTypeAheadEnabled?this.searchTermSubject.next(e):this.searchChange.emit(e)};SearchInputComponent.prototype.onKeyup=function(e){this.keyUpEvent=e;var t=e.target.value;this.isTypeAheadEnabled?this.searchTermSubject.next(t):this.searchKeyup.emit({event:this.keyUpEvent,value:t})};SearchInputComponent.prototype.initSearchInputFilter=function(){var e=this;this.searchTermSubject=new g.Subject;this.searchTerm$=this.searchTermSubject.asObservable().pipe(f.filter((function(t){return e.configurations&&e.configurations.typeAheadMiniSearchTermLength?t.length>0&&t.length>e.configurations.typeAheadMiniSearchTermLength:true})),f.debounceTime(this.configurations&&this.configurations.typeAheadDebounce||500),f.distinctUntilChanged());this.searchTermSubscription=this.searchTerm$.subscribe((function(t){e.searchKeyup.emit({event:e.keyUpEvent,value:t});e.searchChange.emit(t)}))};__decorate([s.Input(),__metadata("design:type",Boolean)],SearchInputComponent.prototype,"isDisabled",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],SearchInputComponent.prototype,"isReadOnly",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],SearchInputComponent.prototype,"isTypeAheadEnabled",void 0);__decorate([s.Input(),__metadata("design:type",String)],SearchInputComponent.prototype,"placeholder",void 0);__decorate([s.Input(),__metadata("design:type",String)],SearchInputComponent.prototype,"search",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SearchInputComponent.prototype,"searchKeyup",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SearchInputComponent.prototype,"searchChange",void 0);__decorate([s.ViewChild("searchInput",{static:false}),__metadata("design:type",s.ElementRef)],SearchInputComponent.prototype,"searchInput",void 0);SearchInputComponent=__decorate([s.Component({selector:"se-select-search-input",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-search-input]":"true"},template:'<div class="search"><input #searchInput type="search" class="search__input" [disabled]="isDisabled" [readOnly]="isReadOnly" [placeholder]="placeholder" [ngModel]="search" (ngModelChange)="onChange($event)" (keyup)="onKeyup($event)"/></div>'}),__metadata("design:paramtypes",[s.ElementRef,o.ISharedDataService])],SearchInputComponent);return SearchInputComponent}();window.__smartedit__.addDecoratorPayload("Component","SelectComponent",{selector:"se-select",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select]":"true"},template:'<fd-select [style.display]="\'none\'"></fd-select><div [attr.id]="id + \'-selector\'" class="select-container" [ngClass]="{\n        \'has-warning\': hasWarning(),\n        \'has-error\': hasError()\n    }"><ng-container *ngIf="multiSelect; then multi; else singleSelect"></ng-container><ng-template #singleSelect><fd-popover [triggers]="[\'click\']" [(isOpen)]="isOpen" [placement]="\'bottom\'" (isOpenChange)="onSingleSelectIsOpenChange($event)"><fd-popover-control><div class="selected-container fd-select-custom" [attr.has-selected-option]="!!selected || null"><button fd-button class="fd-select-button-custom toggle-button" [disabled]="isReadOnly"><span *ngIf="!selected; else selectedItem" class="selected-placeholder">{{ placeholder | translate }}</span><ng-template #selectedItem><div class="selected-item"><span *ngIf="controls" class="glyphicon glyphicon-search"></span><se-item-printer *ngIf="selected" [attr.id]="id + \'-selected\'" [item]="selected" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span *ngIf="controls || showRemoveButton" class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, selected)"></span></div></ng-template></button></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngIf="searchEnabled && isOpen"><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></ng-container><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #multi><fd-popover class="se-multi-select" [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="\'bottom\'"><fd-popover-control><div class="selected-container"><ng-container *ngIf="selected && selected.length > 0"><ol class="selected-list" cdkDropList (cdkDropListDropped)="onDrop($event)"><li *ngFor="let item of selected; trackBy: itemTrackBy" cdkDrag class="selected-list__item selected-item"><se-item-printer [item]="item" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, item)"></span></li></ol></ng-container><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #resultsHeader><se-select-results-header [search]="search" [resultsHeaderComponent]="resultsHeaderComponent" [resultsHeaderLabel]="resultsHeaderLabel" [displayResultsHeaderLabel]="showResultsHeaderLabel()" [actionableSearchItem]="actionableSearchItem" (actionButtonClick)="closeAndReset()"></se-select-results-header></ng-template><ng-template #searchInputTemplate><se-select-search-input [isDisabled]="isReadOnly" [isReadOnly]="multiSelect && !searchEnabled" [isTypeAheadEnabled]="!multiSelect" [placeholder]="showPlaceholder() ? (placeholder | translate) : \'\'" [search]="search" (searchKeyup)="onSearchInputKeyup($event.event, $event.value)" (searchChange)="onSearchInputChange($event)"></se-select-search-input></ng-template><ng-template #selectListTemplate><se-select-list [id]="id" [isPagedDropdown]="isPagedDropdown()" [fetchPage]="fetchStrategy.fetchPage" [search]="search" [items]="items" [selected]="selected" [excludeSelected]="multiSelect" [disableChoiceFn]="disableChoiceFn" [itemComponent]="itemComponent" [selectComponentCtx]="this" (optionClick)="onOptionClick($event)" (infiniteScrollItemsChange)="onInfiniteScrollItemsChange()"></se-select-list></ng-template></div>'});var _r=function(){SelectComponent.$inject=["l10nService","logService","cdr"];function SelectComponent(e,t,n){this.l10nService=e;this.logService=t;this.cdr=n;this.modelChange=new s.EventEmitter;this.controls=false;this.multiSelect=false;this.keepModelOnReset=false;this.isReadOnly=false;this.searchEnabled=true;this.resetSearchInput=true;this.showRemoveButton=false;this.getApi=new s.EventEmitter;this.resetChange=new s.EventEmitter;this.isOpen=false;this.items=[];this.search="";this.api={setValidationState:this.setValidationState.bind(this),resetValidationState:this.resetValidationState.bind(this)}}Object.defineProperty(SelectComponent.prototype,"isSingleCss",{get:function(){return!this.multiSelect},enumerable:false,configurable:true});Object.defineProperty(SelectComponent.prototype,"isMultiCss",{get:function(){return this.multiSelect},enumerable:false,configurable:true});Object.defineProperty(SelectComponent.prototype,"isPagedCss",{get:function(){return this.isPagedDropdown()},enumerable:false,configurable:true});SelectComponent.prototype.clickHandler=function(e){if(!this.multiSelect){return}if(e.target===this.searchInputCmp.inputElement){e.stopPropagation();if(!this.isOpen){this.onMultiSelectIsOpenChange(true)}}else if(this.isOpen){this.onMultiSelectIsOpenChange(false)}};SelectComponent.prototype.clickHandler.$inject=["event"];SelectComponent.prototype.ngOnInit=function(){var e=this;if(!this.placeholder){this.placeholder="se.genericeditor.sedropdown.placeholder"}if(this.fetchStrategy.fetchAll){this.initSearchInputFilter()}this.fetchData();setTimeout((function(){e.resetChange.emit(e.internalReset.bind(e))}));this.getApi.emit(this.api)};SelectComponent.prototype.ngOnChanges=function(e){if(!this.itemComponent){this.itemComponent=vr}this.isValidConfiguration();var t=e.model;var n=t&&t.currentValue!==this.modelChangeOld&&!t.firstChange;if(n){if(this.multiSelect){if(this.isModelEmpty()){this.model=[]}}this.fetchData()}};SelectComponent.prototype.ngOnChanges.$inject=["changes"];SelectComponent.prototype.ngOnDestroy=function(){if(this.languageSwitchSubscription){this.languageSwitchSubscription.unsubscribe()}if(this.searchInputChangeSubject){this.searchInputChangeSubject.unsubscribe()}};SelectComponent.prototype.onSingleSelectIsOpenChange=function(e){var t=this;if(e){setTimeout((function(){if(t.searchInputCmp){t.searchInputCmp.focus()}if(t.fetchStrategy.fetchAll){t.refreshOptions(t.search)}}))}else{this.resetOnClose()}};SelectComponent.prototype.onSingleSelectIsOpenChange.$inject=["isOpen"];SelectComponent.prototype.onSearchInputKeyup=function(e,t){this.internalKeyup(e,t)};SelectComponent.prototype.onSearchInputKeyup.$inject=["event","value"];SelectComponent.prototype.onSearchInputChange=function(e){this.onSearchChange(e);if(this.searchInputChangeSubject){this.searchInputChangeSubject.next(e)}};SelectComponent.prototype.onSearchInputChange.$inject=["value"];SelectComponent.prototype.onOptionClick=function(e){var t=false;if(this.multiSelect){var n=__spreadArrays(this.selected||[],[e]);this.setSelected(n);t=true}else if(!this.isItemSelected(e)){this.setSelected(e);t=true}this.internalOnSelect(e,e.id);if(t){this.internalOnChange()}this.closeAndReset()};SelectComponent.prototype.onOptionClick.$inject=["item"];SelectComponent.prototype.onSearchChange=function(e){this.search=e};SelectComponent.prototype.onSearchChange.$inject=["value"];SelectComponent.prototype.onDrop=function(e){C.moveItemInArray(this.selected,e.previousIndex,e.currentIndex);this.setSelected(this.selected);var t=e.previousIndex!==e.currentIndex;if(t){this.internalOnChange()}};SelectComponent.prototype.onDrop.$inject=["event"];SelectComponent.prototype.removeSelectedOption=function(e,t){var n=this.multiSelect?this.selected.filter((function(e){return e!==t})):undefined;this.setSelected(n);this.internalOnRemove(t,t.id);if(this.isOpen){this.closeAndReset()}};SelectComponent.prototype.removeSelectedOption.$inject=["_","item"];SelectComponent.prototype.closeAndReset=function(){this.close();this.resetOnClose()};SelectComponent.prototype.showResultsHeaderLabel=function(){return this.items.length>0&&!!this.resultsHeaderLabel};SelectComponent.prototype.onInfiniteScrollItemsChange=function(){};SelectComponent.prototype.showPlaceholder=function(){return this.multiSelect||!this.multiSelect&&!!this.selected};SelectComponent.prototype.itemTrackBy=function(e,t){return t.id};SelectComponent.prototype.itemTrackBy.$inject=["_","item"];SelectComponent.prototype.setValidationState=function(e){this.validationState=e;this.cdr.detectChanges()};SelectComponent.prototype.setValidationState.$inject=["validationState"];SelectComponent.prototype.resetValidationState=function(){this.validationState=undefined;this.cdr.detectChanges()};SelectComponent.prototype.hasError=function(){return rt.VALIDATION_ERROR===this.validationState};SelectComponent.prototype.hasWarning=function(){return rt.WARNING===this.validationState};SelectComponent.prototype.fetchEntity=function(e){var t=this;return this.fetchStrategy.fetchEntity(e).then((function(e){if(!e){t.logService.debug("fetchEntity was used to fetch the option identified by "+e+" but failed to find a match")}return e}))};SelectComponent.prototype.fetchEntity.$inject=["modelId"];SelectComponent.prototype.updateModelIfNotFoundInItems=function(e){var t=this;if(!this.keepModelOnReset){if(this.multiSelect){if(this.isModelEmpty()){this.setSelected([],false);return}var n=this.model.filter((function(n){return t.getItemByModel(e,n)}));var i=a.isEqual(this.model,n);if(!i){this.updateModel(n);this.resolveAndSetSelected(e)}else{this.resolveAndSetSelected(e)}return}if(this.isModelEmpty()){this.setSelected(undefined,false);return}var o=this.getItemByModel(e);if(!o){this.setSelected(undefined)}else{this.resolveAndSetSelected(e)}}};SelectComponent.prototype.updateModelIfNotFoundInItems.$inject=["items"];SelectComponent.prototype.refreshOptions=function(e){var t=this;this.internalFetchAll(e).then((function(e){t.items=e;t.cdr.detectChanges()}))};SelectComponent.prototype.refreshOptions.$inject=["mask"];SelectComponent.prototype.isValidConfiguration=function(){if(this.resultsHeaderComponent&&this.resultsHeaderLabel){throw new Error('Only one of "resultsHeaderComponent" or "resultsHeaderLabel" must be specified')}if(!this.fetchStrategy.fetchAll&&!this.fetchStrategy.fetchPage){throw new Error("Neither fetchAll nor fetchPage have been specified in fetchStrategy")}if(this.fetchStrategy.fetchAll&&this.fetchStrategy.fetchPage){throw new Error("Only one of either fetchAll or fetchPage must be specified in fetchStrategy")}if(this.fetchStrategy.fetchPage&&this.model&&!this.fetchStrategy.fetchEntity&&!this.fetchStrategy.fetchEntities){throw new Error("fetchPage has been specified in fetchStrategy but neither fetchEntity nor fetchEntities are available to load item identified by "+this.model)}if(this.isPagedDropdown()&&!this.keepModelOnReset){this.logService.debug("current Select is paged, so keepModelOnReset flag is ignored (it will always keep the model on reset).")}};SelectComponent.prototype.internalKeyup=function(e,t){if(this.keyup){this.keyup(e,t)}};SelectComponent.prototype.internalKeyup.$inject=["event","search"];SelectComponent.prototype.internalOnRemove=function(e,t){if(this.onRemove){this.onRemove(e,t)}this.internalOnChange()};SelectComponent.prototype.internalOnRemove.$inject=["item","model"];SelectComponent.prototype.internalOnChange=function(){if(this.onChange){this.onChange()}};SelectComponent.prototype.internalOnSelect=function(e,t){if(this.onSelect){this.onSelect(e,t)}};SelectComponent.prototype.internalOnSelect.$inject=["item","model"];SelectComponent.prototype.internalFetchAll=function(e){var t=this;if(e===void 0){e=""}return this.fetchStrategy.fetchAll(e).then((function(e){t.fetchAllItems=e;return __spreadArrays(e)}))};SelectComponent.prototype.internalFetchAll.$inject=["mask"];SelectComponent.prototype.internalFetchEntities=function(){var e=this;var t;if(!this.multiSelect){t=this.fetchEntity(this.model).then((function(e){return[e]}))}else{if(this.fetchStrategy.fetchEntities){t=this.fetchStrategy.fetchEntities(this.model).then((function(t){if(t.length!==e.model.length){e.logService.debug("!fetchEntities was used to fetch the options identified by "+JSON.stringify(e.model)+" but failed to find all matches")}return t}))}else{var n=this.model.map((function(t){return e.fetchEntity(t)}));t=Promise.all(n)}}return t.then((function(t){var n=t.filter((function(e){return e!==null})).map((function(e){delete e.$promise;delete e.$resolved;e.technicalUniqueId=B.encode(e);return e}));e.updateModelIfNotFoundInItems(n);e.internalOnChange();e.cdr.detectChanges()}))};SelectComponent.prototype.onMultiSelectIsOpenChange=function(e){this.isOpen=e;if(e){if(this.isPagedDropdown()){this.cdr.detectChanges();return}this.refreshOptions(this.search)}else{this.resetOnClose()}};SelectComponent.prototype.onMultiSelectIsOpenChange.$inject=["isOpen"];SelectComponent.prototype.initSearchInputFilter=function(){var e=this;this.searchInputChangeSubject=new g.Subject;this.searchInputChange$=this.searchInputChangeSubject.asObservable();this.languageSwitchSubscription=this.l10nService.languageSwitch$.subscribe((function(t){e.filterFn=getLocalizedFilterFn(t)}));this.searchInputChange$.pipe(f.filter((function(){return typeof e.fetchStrategy.fetchAll!=="undefined"})),f.tap((function(t){e.items=e.filterItemsBySearch(e.fetchAllItems,t);e.cdr.detectChanges()})),f.debounceTime(500),f.switchMap((function(t){return e.internalFetchAll(t)}))).subscribe((function(t){e.items=e.filterItemsBySearch(t,e.search);e.cdr.detectChanges()}))};SelectComponent.prototype.filterItemsBySearch=function(e,t){var n=this;return e.filter((function(e){return n.filterFn(e.label||e.name).trim().toUpperCase().includes(t.trim().toUpperCase())}))};SelectComponent.prototype.filterItemsBySearch.$inject=["fetchedItems","search"];SelectComponent.prototype.close=function(){this.isOpen=false};SelectComponent.prototype.resetOnClose=function(){if(this.search&&this.resetSearchInput){this.search="";this.cdr.detectChanges();if(this.fetchStrategy.fetchAll){this.refreshOptions(this.search)}}};SelectComponent.prototype.fetchData=function(){if(!this.isPagedDropdown()){this.internalFetchAllAndCheckModel()}else if(!this.isModelEmpty()){this.internalFetchEntities()}};SelectComponent.prototype.internalFetchAllAndCheckModel=function(){var e=this;return this.internalFetchAll().then((function(t){e.updateModelIfNotFoundInItems(t);e.internalOnChange();e.cdr.detectChanges()}))};SelectComponent.prototype.getItemByModel=function(e,t){if(t===void 0){t=this.model}return e.find((function(e){return e.id===t}))};SelectComponent.prototype.getItemByModel.$inject=["items","model"];SelectComponent.prototype.getItemsByModel=function(e,t){var n=this;if(t===void 0){t=this.model}return t.map((function(t){return n.getItemByModel(e,t)})).filter((function(e){return!!e}))};SelectComponent.prototype.getItemsByModel.$inject=["items","model"];SelectComponent.prototype.mapSelectedToModel=function(){return this.multiSelect?this.selected.map((function(e){return e.id})):this.selected.id};SelectComponent.prototype.setSelected=function(e,t){if(t===void 0){t=true}this.selected=e;if(t){var n=void 0;if(this.selected){n=this.mapSelectedToModel()}this.updateModel(n)}};SelectComponent.prototype.setSelected.$inject=["items","updateModel"];SelectComponent.prototype.isItemSelected=function(e){if(!this.selected){return false}return e.id===this.selected.id};SelectComponent.prototype.isItemSelected.$inject=["item"];SelectComponent.prototype.internalReset=function(e){if(e===void 0){e=false}this.items.length=0;if(e){this.selected=undefined;this.resetModel();return}if(!this.keepModelOnReset){this.fetchData()}};SelectComponent.prototype.internalReset.$inject=["forceReset"];SelectComponent.prototype.resetModel=function(){var e=this.multiSelect?[]:undefined;this.updateModel(e)};SelectComponent.prototype.updateModel=function(e){this.model=e;this.modelChangeOld=this.model;this.modelChange.emit(e)};SelectComponent.prototype.updateModel.$inject=["model"];SelectComponent.prototype.isPagedDropdown=function(){return!!this.fetchStrategy.fetchPage};SelectComponent.prototype.isModelEmpty=function(){if(this.multiSelect){return!this.model||this.model&&this.model.length===0}else{return!this.model}};SelectComponent.prototype.resolveAndSetSelected=function(e){var t=this.multiSelect?this.getItemsByModel(e):this.getItemByModel(e);this.setSelected(t,false)};SelectComponent.prototype.resolveAndSetSelected.$inject=["items"];__decorate([s.HostBinding("class.se-select--single"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SelectComponent.prototype,"isSingleCss",null);__decorate([s.HostBinding("class.se-select--multi"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SelectComponent.prototype,"isMultiCss",null);__decorate([s.HostBinding("class.se-select--paged"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SelectComponent.prototype,"isPagedCss",null);__decorate([s.Input(),s.HostBinding("attr.id"),__metadata("design:type",String)],SelectComponent.prototype,"id",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"model",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SelectComponent.prototype,"modelChange",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"fetchStrategy",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"controls",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"multiSelect",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"keepModelOnReset",void 0);__decorate([s.Input(),s.HostBinding("class.is-disabled"),__metadata("design:type",Object)],SelectComponent.prototype,"isReadOnly",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"actionableSearchItem",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],SelectComponent.prototype,"resultsHeaderComponent",void 0);__decorate([s.Input(),__metadata("design:type",String)],SelectComponent.prototype,"resultsHeaderLabel",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"disableChoiceFn",void 0);__decorate([s.Input(),__metadata("design:type",String)],SelectComponent.prototype,"placeholder",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],SelectComponent.prototype,"itemComponent",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"searchEnabled",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"resetSearchInput",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"onChange",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"onRemove",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"onSelect",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"keyup",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectComponent.prototype,"showRemoveButton",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SelectComponent.prototype,"getApi",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectComponent.prototype,"reset",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SelectComponent.prototype,"resetChange",void 0);__decorate([s.ViewChild(fr,{static:false}),__metadata("design:type",fr)],SelectComponent.prototype,"searchInputCmp",void 0);__decorate([s.HostListener("document:click",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[MouseEvent]),__metadata("design:returntype",void 0)],SelectComponent.prototype,"clickHandler",null);SelectComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-select",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select]":"true"},template:'<fd-select [style.display]="\'none\'"></fd-select><div [attr.id]="id + \'-selector\'" class="select-container" [ngClass]="{\n        \'has-warning\': hasWarning(),\n        \'has-error\': hasError()\n    }"><ng-container *ngIf="multiSelect; then multi; else singleSelect"></ng-container><ng-template #singleSelect><fd-popover [triggers]="[\'click\']" [(isOpen)]="isOpen" [placement]="\'bottom\'" (isOpenChange)="onSingleSelectIsOpenChange($event)"><fd-popover-control><div class="selected-container fd-select-custom" [attr.has-selected-option]="!!selected || null"><button fd-button class="fd-select-button-custom toggle-button" [disabled]="isReadOnly"><span *ngIf="!selected; else selectedItem" class="selected-placeholder">{{ placeholder | translate }}</span><ng-template #selectedItem><div class="selected-item"><span *ngIf="controls" class="glyphicon glyphicon-search"></span><se-item-printer *ngIf="selected" [attr.id]="id + \'-selected\'" [item]="selected" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span *ngIf="controls || showRemoveButton" class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, selected)"></span></div></ng-template></button></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngIf="searchEnabled && isOpen"><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></ng-container><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #multi><fd-popover class="se-multi-select" [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="\'bottom\'"><fd-popover-control><div class="selected-container"><ng-container *ngIf="selected && selected.length > 0"><ol class="selected-list" cdkDropList (cdkDropListDropped)="onDrop($event)"><li *ngFor="let item of selected; trackBy: itemTrackBy" cdkDrag class="selected-list__item selected-item"><se-item-printer [item]="item" [component]="itemComponent" [selectComponentCtx]="this"></se-item-printer><span class="sap-icon--sys-cancel selected-item__remove-button" (click)="removeSelectedOption($event, item)"></span></li></ol></ng-container><ng-container *ngTemplateOutlet="searchInputTemplate"></ng-container></div></fd-popover-control><fd-popover-body><fd-menu class="se-select-list-container"><ng-container *ngTemplateOutlet="resultsHeader"></ng-container><ng-container *ngIf="isOpen"><ng-container *ngTemplateOutlet="selectListTemplate"></ng-container></ng-container></fd-menu></fd-popover-body></fd-popover></ng-template><ng-template #resultsHeader><se-select-results-header [search]="search" [resultsHeaderComponent]="resultsHeaderComponent" [resultsHeaderLabel]="resultsHeaderLabel" [displayResultsHeaderLabel]="showResultsHeaderLabel()" [actionableSearchItem]="actionableSearchItem" (actionButtonClick)="closeAndReset()"></se-select-results-header></ng-template><ng-template #searchInputTemplate><se-select-search-input [isDisabled]="isReadOnly" [isReadOnly]="multiSelect && !searchEnabled" [isTypeAheadEnabled]="!multiSelect" [placeholder]="showPlaceholder() ? (placeholder | translate) : \'\'" [search]="search" (searchKeyup)="onSearchInputKeyup($event.event, $event.value)" (searchChange)="onSearchInputChange($event)"></se-select-search-input></ng-template><ng-template #selectListTemplate><se-select-list [id]="id" [isPagedDropdown]="isPagedDropdown()" [fetchPage]="fetchStrategy.fetchPage" [search]="search" [items]="items" [selected]="selected" [excludeSelected]="multiSelect" [disableChoiceFn]="disableChoiceFn" [itemComponent]="itemComponent" [selectComponentCtx]="this" (optionClick)="onOptionClick($event)" (infiniteScrollItemsChange)="onInfiniteScrollItemsChange()"></se-select-list></ng-template></div>'}),__metadata("design:paramtypes",[fo,o.LogService,s.ChangeDetectorRef])],SelectComponent);return SelectComponent}();window.__smartedit__.addDecoratorPayload("Component","ItemPrinterComponent",{selector:"se-item-printer",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-item-printer]":"true"},template:'<ng-container *ngComponentOutlet="component; injector: componentInjector"></ng-container>'});var yr=function(){function ItemPrinterComponent(e){this.injector=e;this.isSelected=true}ItemPrinterComponent.prototype.ngOnChanges=function(e){if(e.item){this.itemComponentData=this.createItemComponentData();if(this.component){this.componentInjector=this.createItemComponentInjector()}}};ItemPrinterComponent.prototype.createItemComponentData=function(){return{item:this.item,selected:this.isSelected,select:this.selectComponentCtx}};ItemPrinterComponent.prototype.createItemComponentInjector=function(){return s.Injector.create({parent:this.injector,providers:[{provide:nr,useValue:this.itemComponentData}]})};__decorate([s.Input(),__metadata("design:type",Object)],ItemPrinterComponent.prototype,"item",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],ItemPrinterComponent.prototype,"component",void 0);__decorate([s.Input(),__metadata("design:type",_r)],ItemPrinterComponent.prototype,"selectComponentCtx",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ItemPrinterComponent.prototype,"isSelected",void 0);ItemPrinterComponent=__decorate([s.Component({selector:"se-item-printer",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-item-printer]":"true"},template:'<ng-container *ngComponentOutlet="component; injector: componentInjector"></ng-container>'}),__metadata("design:paramtypes",[s.Injector])],ItemPrinterComponent);return ItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","ResultsHeaderComponent",{selector:"se-select-results-header",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-results-header]":"true"},template:'<div *ngIf="showResultsHeaderItem() || resultsHeaderLabel || actionableSearchItem" class="results-header"><div *ngIf="showResultsHeaderItem()"><ng-container *ngComponentOutlet="resultsHeaderComponent"></ng-container></div><se-actionable-search-item *ngIf="actionableSearchItem" [search]="search" [eventId]="actionableSearchItem.eventId" [actionText]="actionableSearchItem.actionText" (actionButtonClick)="onActionButtonClick()"></se-actionable-search-item><li class="fd-menu__list-header" *ngIf="displayResultsHeaderLabel">{{ resultsHeaderLabel | translate }}</li></div>'});var Cr=function(){function ResultsHeaderComponent(){this.actionButtonClick=new s.EventEmitter}ResultsHeaderComponent.prototype.onActionButtonClick=function(){this.actionButtonClick.emit()};ResultsHeaderComponent.prototype.showResultsHeaderItem=function(){return typeof this.resultsHeaderComponent!=="undefined"};__decorate([s.Input(),__metadata("design:type",String)],ResultsHeaderComponent.prototype,"search",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],ResultsHeaderComponent.prototype,"resultsHeaderComponent",void 0);__decorate([s.Input(),__metadata("design:type",String)],ResultsHeaderComponent.prototype,"resultsHeaderLabel",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],ResultsHeaderComponent.prototype,"displayResultsHeaderLabel",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ResultsHeaderComponent.prototype,"actionableSearchItem",void 0);__decorate([s.Output(),__metadata("design:type",Object)],ResultsHeaderComponent.prototype,"actionButtonClick",void 0);ResultsHeaderComponent=__decorate([s.Component({selector:"se-select-results-header",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-results-header]":"true"},template:'<div *ngIf="showResultsHeaderItem() || resultsHeaderLabel || actionableSearchItem" class="results-header"><div *ngIf="showResultsHeaderItem()"><ng-container *ngComponentOutlet="resultsHeaderComponent"></ng-container></div><se-actionable-search-item *ngIf="actionableSearchItem" [search]="search" [eventId]="actionableSearchItem.eventId" [actionText]="actionableSearchItem.actionText" (actionButtonClick)="onActionButtonClick()"></se-actionable-search-item><li class="fd-menu__list-header" *ngIf="displayResultsHeaderLabel">{{ resultsHeaderLabel | translate }}</li></div>'})],ResultsHeaderComponent);return ResultsHeaderComponent}();window.__smartedit__.addDecoratorPayload("Component","SelectListComponent",{selector:"se-select-list",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-list]":"true"},template:'<se-infinite-scrolling *ngIf="isPagedDropdown; else selectList" [pageSize]="infiniteScrollingPageSize" [mask]="search" [fetchPage]="fetchPage" [context]="selectComponentCtx" (itemsChange)="onInfiniteScrollItemsChange()"><ng-container *ngTemplateOutlet="selectList"></ng-container></se-infinite-scrolling><ng-template #selectList><ol [attr.id]="id +\'-list\'" fd-menu-list suListKeyboardControl [suListKeyboardControlDisabledPredicate]="keyboardControlDisabledPredicate" (suListKeyboardControlEnterKeydown)="onEnterKeydown($event)" [ngClass]="{ \'fd-menu__list--basic\': !isPagedDropdown }"><ng-container *ngFor="let item of items; trackBy: itemTrackBy"><li *ngIf="(excludeSelected && !isItemSelected(item)) || !excludeSelected" suListItemKeyboardControl class="se-select-list__item" [ngClass]="{\'is-selected\': (!excludeSelected && isItemSelected(item)), \'is-disabled\': isItemDisabled(item)}"><fd-option (click)="onOptionClick($event, item)" class="menu-option"><se-item-printer [item]="item" [isSelected]="false" [component]="itemComponent" [selectComponentCtx]="selectComponentCtx"></se-item-printer></fd-option></li></ng-container></ol></ng-template>'});var Sr=function(){function SelectListComponent(){this.isPagedDropdown=false;this.excludeSelected=false;this.optionClick=new s.EventEmitter;this.infiniteScrollItemsChange=new s.EventEmitter;this.infiniteScrollingPageSize=10}SelectListComponent.prototype.keyboardControlDisabledPredicate=function(e){return e.getElement().classList.contains("is-disabled")};SelectListComponent.prototype.itemTrackBy=function(e,t){return t.id};SelectListComponent.prototype.isItemSelected=function(e){var t=Array.isArray(this.selected);if(!this.selected||t&&this.selected.length===0){return false}return t?!!this.selected.find((function(t){return t.id===e.id})):e.id===this.selected.id};SelectListComponent.prototype.onOptionClick=function(e,t){if(this.isItemDisabled(t)){e.stopPropagation();return}this.optionClick.emit(t)};SelectListComponent.prototype.onEnterKeydown=function(e){var t=this.getItems();var n=t[e];this.optionClick.emit(n)};SelectListComponent.prototype.isItemDisabled=function(e){return this.disableChoiceFn?this.disableChoiceFn(e):false};SelectListComponent.prototype.onInfiniteScrollItemsChange=function(){this.infiniteScrollItemsChange.emit()};SelectListComponent.prototype.getItems=function(){var e=this;if(this.excludeSelected){return this.items.filter((function(t){return!e.isItemSelected(t)}))}else{return this.items}};__decorate([s.Input(),__metadata("design:type",String)],SelectListComponent.prototype,"id",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectListComponent.prototype,"isPagedDropdown",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectListComponent.prototype,"fetchPage",void 0);__decorate([s.Input(),__metadata("design:type",String)],SelectListComponent.prototype,"search",void 0);__decorate([s.Input(),__metadata("design:type",Array)],SelectListComponent.prototype,"items",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectListComponent.prototype,"selected",void 0);__decorate([s.Input(),__metadata("design:type",Object)],SelectListComponent.prototype,"excludeSelected",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SelectListComponent.prototype,"disableChoiceFn",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],SelectListComponent.prototype,"itemComponent",void 0);__decorate([s.Input(),__metadata("design:type",_r)],SelectListComponent.prototype,"selectComponentCtx",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SelectListComponent.prototype,"optionClick",void 0);__decorate([s.Output(),__metadata("design:type",Object)],SelectListComponent.prototype,"infiniteScrollItemsChange",void 0);SelectListComponent=__decorate([s.Component({selector:"se-select-list",changeDetection:s.ChangeDetectionStrategy.OnPush,host:{"[class.se-select-list]":"true"},template:'<se-infinite-scrolling *ngIf="isPagedDropdown; else selectList" [pageSize]="infiniteScrollingPageSize" [mask]="search" [fetchPage]="fetchPage" [context]="selectComponentCtx" (itemsChange)="onInfiniteScrollItemsChange()"><ng-container *ngTemplateOutlet="selectList"></ng-container></se-infinite-scrolling><ng-template #selectList><ol [attr.id]="id +\'-list\'" fd-menu-list suListKeyboardControl [suListKeyboardControlDisabledPredicate]="keyboardControlDisabledPredicate" (suListKeyboardControlEnterKeydown)="onEnterKeydown($event)" [ngClass]="{ \'fd-menu__list--basic\': !isPagedDropdown }"><ng-container *ngFor="let item of items; trackBy: itemTrackBy"><li *ngIf="(excludeSelected && !isItemSelected(item)) || !excludeSelected" suListItemKeyboardControl class="se-select-list__item" [ngClass]="{\'is-selected\': (!excludeSelected && isItemSelected(item)), \'is-disabled\': isItemDisabled(item)}"><fd-option (click)="onOptionClick($event, item)" class="menu-option"><se-item-printer [item]="item" [isSelected]="false" [component]="itemComponent" [selectComponentCtx]="selectComponentCtx"></se-item-printer></fd-option></li></ng-container></ol></ng-template>'})],SelectListComponent);return SelectListComponent}();var br=function(){function SelectModule(){}SelectModule=__decorate([s.NgModule({imports:[u.CommonModule,S.FormsModule,C.DragDropModule,h.PopoverModule,h.ButtonModule,h.MenuModule,h.SelectModule,h.FormModule,hr,Nn,ir,o.ListKeyboardControlModule,o.TranslationModule.forChild()],declarations:[_r,vr,yr,tr,Sr,fr,Cr],entryComponents:[_r,vr,yr,tr,Sr,fr,Cr],exports:[_r]})],SelectModule);return SelectModule}();var Ir=new s.InjectionToken(ct);var wr=new s.InjectionToken("DROPDOWN_IMPLEMENTATION_SUFFIX_TOKEN");var Er=new s.InjectionToken(lt);var Pr=function(){function IGenericEditorDropdownServiceConstructor(e){}return IGenericEditorDropdownServiceConstructor}();function genericEditorDropdownComponentOnInit(){this.field.params=this.field.params||{};this.field.params.catalogId=this.field.params.catalogId||ne;this.field.params.catalogVersion=this.field.params.catalogVersion||ie;var e=this.GenericEditorDropdownService||this.SEDropdownService;this.dropdown=new e({field:this.field,qualifier:this.qualifier,model:this.model,id:this.id,onClickOtherDropdown:this.onClickOtherDropdown.bind(this),getApi:this.getApi});this.dropdown.init()}window.__smartedit__.addDecoratorPayload("Component","GenericEditorDropdownComponent",{selector:"se-generic-editor-dropdown",host:{"[class.se-generic-editor-dropdown]":"true"},template:'<se-select *ngIf="dropdown.initialized" [id]="dropdown.qualifier" (click)="dropdown.onClick()" [placeholder]="field.placeholder" [(model)]="model[qualifier]" [onChange]="dropdown.triggerAction" [fetchStrategy]="dropdown.fetchStrategy" [(reset)]="dropdown.reset" [multiSelect]="dropdown.isMultiDropdown" [controls]="dropdown.isMultiDropdown" [showRemoveButton]="showRemoveButton" [isReadOnly]="!field.editable" [itemComponent]="itemComponent" [resultsHeaderComponent]="resultsHeaderComponent" [actionableSearchItem]="actionableSearchItem" (getApi)="dropdown.setSelectAPI($event)" (resetChange)="onResetChange($event)"></se-select>'});var Tr=function(){GenericEditorDropdownComponent.$inject=["GenericEditorDropdownService"];function GenericEditorDropdownComponent(e){this.GenericEditorDropdownService=e;this.resetChange=new s.EventEmitter}GenericEditorDropdownComponent.prototype.ngOnInit=function(){genericEditorDropdownComponentOnInit.call(this)};GenericEditorDropdownComponent.prototype.onClickOtherDropdown=function(){this.selectComponent.closeAndReset()};GenericEditorDropdownComponent.prototype.onResetChange=function(e){this.resetChange.emit(e)};GenericEditorDropdownComponent.prototype.onResetChange.$inject=["reset"];__decorate([s.Input(),__metadata("design:type",String)],GenericEditorDropdownComponent.prototype,"id",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorDropdownComponent.prototype,"field",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorDropdownComponent.prototype,"qualifier",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorDropdownComponent.prototype,"model",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],GenericEditorDropdownComponent.prototype,"showRemoveButton",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],GenericEditorDropdownComponent.prototype,"itemComponent",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],GenericEditorDropdownComponent.prototype,"resultsHeaderComponent",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorDropdownComponent.prototype,"actionableSearchItem",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorDropdownComponent.prototype,"reset",void 0);__decorate([s.Output(),__metadata("design:type",Object)],GenericEditorDropdownComponent.prototype,"resetChange",void 0);__decorate([s.ViewChild(_r,{static:false}),__metadata("design:type",_r)],GenericEditorDropdownComponent.prototype,"selectComponent",void 0);GenericEditorDropdownComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-generic-editor-dropdown",host:{"[class.se-generic-editor-dropdown]":"true"},template:'<se-select *ngIf="dropdown.initialized" [id]="dropdown.qualifier" (click)="dropdown.onClick()" [placeholder]="field.placeholder" [(model)]="model[qualifier]" [onChange]="dropdown.triggerAction" [fetchStrategy]="dropdown.fetchStrategy" [(reset)]="dropdown.reset" [multiSelect]="dropdown.isMultiDropdown" [controls]="dropdown.isMultiDropdown" [showRemoveButton]="showRemoveButton" [isReadOnly]="!field.editable" [itemComponent]="itemComponent" [resultsHeaderComponent]="resultsHeaderComponent" [actionableSearchItem]="actionableSearchItem" (getApi)="dropdown.setSelectAPI($event)" (resetChange)="onResetChange($event)"></se-select>'}),__metadata("design:paramtypes",[Pr])],GenericEditorDropdownComponent);return GenericEditorDropdownComponent}();var GenericEditorDropdownServiceFactory=function(e,t,n,i,o,r,s,c,l){var d=e.$injector();return function(){function class_1(e){var t=this;this.field=e.field;this.qualifier=e.qualifier;this.model=e.model;this.id=e.id;this.onClickOtherDropdown=e.onClickOtherDropdown;this.items=[];this.getApi=e.getApi;this.setYSelectAPI=function(e){t.ySelectAPI=e};this.setSelectAPI=function(e){t.selectAPI=e};this.$api={setResultsHeaderTemplateUrl:function(e){t.resultsHeaderTemplateUrl=e},setResultsHeaderTemplate:function(e){t.resultsHeaderTemplate=e}}}class_1.prototype.init=function(){this.initializeAngularJSAPI();this._setPopulatorName();this.isMultiDropdown=this.field.collection?this.field.collection:false;this.triggerAction=this.triggerAction.bind(this);this.eventId=(this.id||"")+n;this.clickEventKey=(this.id||"")+i;if(this.field.dependsOn){r.subscribe(this.eventId,this._respondToChange.bind(this))}r.subscribe(this.clickEventKey,this._respondToOtherClicks.bind(this));var e=this._resolvePopulator();if(!e){throw new Error("se.dropdown.no.populator.found")}this.populator=e.instance,this.isPaged=e.isPaged;this.fetchStrategy={fetchEntity:this.fetchEntity.bind(this)};if(this.isPaged){this.fetchStrategy.fetchPage=this.fetchPage.bind(this)}else{this.fetchStrategy.fetchAll=this.fetchAll.bind(this)}this.initialized=true};class_1.prototype.initializeAngularJSAPI=function(){if(typeof this.getApi==="function"){this.getApi({$api:this.$api})}};class_1.prototype.triggerAction=function(){var e=this;var t=this.items.filter((function(t){return t.id===e.model[e.qualifier]}))[0];var n={qualifier:this.qualifier,optionObject:t};this._setValidationState(this.getState(this.field));r.publishAsync(this.eventId,n)};class_1.prototype.onClick=function(){r.publishAsync(this.clickEventKey,this.field.qualifier)};class_1.prototype.fetchAll=function(e){var t=this;return this.populator.fetchAll({field:this.field,model:this.model,selection:this.selection,search:e}).then((function(e){t.items=e;return t.items}))};class_1.prototype.fetchEntity=function(e){return this.populator.getItem({field:this.field,id:e,model:this.model})};class_1.prototype.fetchPage=function(e,n,i){var o=this;return this.populator.fetchPage({field:this.field,model:this.model,selection:this.selection,search:e,pageSize:n,currentPage:i}).then((function(e){var t=G.getKeyHoldingDataFromResponse(e);e.results=e[t];delete e[t];o.items=__spreadArrays(o.items,e.results);return e})).catch((function(e){t.error("Failed to fetch items and paging information. "+e)}))};class_1.prototype.getState=function(e){return e.hasErrors?rt.VALIDATION_ERROR:e.hasWarnings?rt.WARNING:undefined};class_1.prototype.isPopulatorPaged=function(e){return e.isPaged&&e.isPaged()};class_1.prototype._setPopulatorName=function(){this.populatorName={options:s.constructor.name,uri:c.constructor.name,propertyType:this.field.propertyType+o,cmsStructureType:this.field.cmsStructureType+o,smarteditComponentType:{withQualifier:this.field.smarteditComponentType+this.field.qualifier+o,withQualifierForDowngradedService:a.camelCase(this.field.smarteditComponentType+this.field.qualifier+o),withoutQualifier:this.field.smarteditComponentType+o}}};class_1.prototype._setValidationState=function(e){var t=this.ySelectAPI||this.selectAPI;if(t){t.setValidationState(e)}};class_1.prototype._respondToChange=function(e,t){if(this.field.dependsOn&&this.field.dependsOn.split(",").indexOf(t.qualifier)>-1){this.selection=t.optionObject;if(this.reset){this.reset()}}};class_1.prototype._respondToOtherClicks=function(e,t){if(this.field.qualifier!==t&&typeof this.onClickOtherDropdown==="function"){this.onClickOtherDropdown(e,t)}};class_1.prototype._resolvePopulator=function(){if(this.field.options&&this.field.uri){throw new Error("se.dropdown.contains.both.uri.and.options")}if(this.field.options){return{instance:this._resolvePopulatorByName(this.populatorName.options),isPaged:false}}if(this.field.uri){return{instance:this._resolvePopulatorByName(this.populatorName.uri),isPaged:this._isFieldPaged(this.field)}}if(this.field.propertyType){var e=this._resolvePopulatorByName(this.populatorName.propertyType);return{instance:e,isPaged:this.isPopulatorPaged(e)}}var t=this._resolvePopulatorByName(this.populatorName.cmsStructureType);if(t){return{instance:t,isPaged:this._isFieldPaged(this.field)}}var n=this._resolvePopulatorByName(this.populatorName.smarteditComponentType.withQualifier);if(n){return{instance:n,isPaged:this.isPopulatorPaged(n)}}var i=this._resolvePopulatorByName(this.populatorName.smarteditComponentType.withQualifierForDowngradedService);if(i){return{instance:i,isPaged:this.isPopulatorPaged(i)}}var o=this._resolvePopulatorByName(this.populatorName.smarteditComponentType.withoutQualifier);if(o){return{instance:o,isPaged:this.isPopulatorPaged(o)}}return undefined};class_1.prototype._resolvePopulatorByName=function(e){if(e===s.constructor.name){return s}if(e===c.constructor.name){return c}if(d.has(e)){return d.get(e)}if(l&&l.length>0){return l.find((function(t){return t.constructor.name.toUpperCase()===e.toUpperCase()}))}return undefined};class_1.prototype._isFieldPaged=function(e){return this.field.paged?this.field.paged:false};return class_1}()};var Ar=function(){function GenericEditorDropdownModule(){}GenericEditorDropdownModule=__decorate([s.NgModule({imports:[u.CommonModule,br,er],declarations:[Tr],entryComponents:[Tr],exports:[Tr],providers:[{provide:wr,useValue:"DropdownPopulator"},{provide:Ir,useValue:ct},{provide:Er,useValue:lt},{provide:Pr,useFactory:GenericEditorDropdownServiceFactory,deps:[Io,o.LogService,Ir,Er,wr,Kt,Xo,Jo,[new s.Optional,Zo]]},U.initialize((function(){O.downgradeService("SEDropdownService",Pr);O.downgradeService("DROPDOWN_IMPLEMENTATION_SUFFIX",null,wr);O.downgradeService("LINKED_DROPDOWN",null,Ir);O.downgradeService("CLICK_DROPDOWN",null,Er)}))]})],GenericEditorDropdownModule);return GenericEditorDropdownModule}();var Dr=function(){SeDropdownComponent.$inject=["SEDropdownService","CONTEXT_CATALOG","CONTEXT_CATALOG_VERSION","yjQuery"];function SeDropdownComponent(e,t,n,i){this.SEDropdownService=e;this.CONTEXT_CATALOG=t;this.CONTEXT_CATALOG_VERSION=n;this.yjQuery=i}SeDropdownComponent.prototype.$onInit=function(){genericEditorDropdownComponentOnInit.call(this)};SeDropdownComponent.prototype.onClickOtherDropdown=function(){this.closeSelect()};SeDropdownComponent.prototype.closeSelect=function(){var e=this.getUiSelectCtrl();if(e){e.open=false}};SeDropdownComponent.prototype.getUiSelectCtrl=function(){var e="#"+this.field.qualifier+"-selector";return this.yjQuery(e).controller("uiSelect")};SeDropdownComponent=__decorate([SeComponent({templateUrl:"seDropdownTemplate.html",inputs:["field:=","qualifier:=","model:=","id:=","getApi:&?","itemTemplateUrl","showRemoveButton"]}),__metadata("design:paramtypes",[Object,String,String,Function])],SeDropdownComponent);return SeDropdownComponent}();var Or=function(){function SeDropdownModule(){}SeDropdownModule=__decorate([SeModule({imports:["smarteditServicesModule","functionsModule","seConstantsModule"],declarations:[Dr]})],SeDropdownModule);return SeDropdownModule}();var Rr=function(){GenericEditorComponent.$inject=["$attrs"];function GenericEditorComponent(e){this.$attrs=e}GenericEditorComponent.prototype.$onInit=function(){this.submit=this.$attrs.hasOwnProperty("submit")?this.submit:null;this.reset=this.$attrs.hasOwnProperty("reset")?this.reset:null;this.isDirty=this.$attrs.hasOwnProperty("isDirty")?this.isDirty:null;this.isValid=this.$attrs.hasOwnProperty("isValid")?this.isValid:null};GenericEditorComponent=__decorate([SeComponent({templateUrl:"genericEditorComponentTemplate.html",inputs:["id:=","smarteditComponentId:=","smarteditComponentType:=?","contentApi:=","content:=","uriContext","submit:=?","reset:=?","isDirty:=?","isValid:=?","getApi:&?","customOnSubmit:=?","structureApi","structure","updateCallback","editorStackId"]}),__metadata("design:paramtypes",[Object])],GenericEditorComponent);return GenericEditorComponent}();var Mr={provide:"GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT",useValue:ot};var xr={provide:"GENERIC_EDITOR_LOADED_EVENT",useValue:it};var Nr=function(){function GenericEditorModule(){}GenericEditorModule=__decorate([SeModule({imports:["smarteditServicesModule","functionsModule","coretemplates","translationServiceModule","seConstantsModule","resourceLocationsModule","ui.bootstrap",Or],providers:[Mr,xr],declarations:[Rr]})],GenericEditorModule);return GenericEditorModule}();var kr={expandedByDefault:false,iconAlignment:"right",iconVisible:true};window.__smartedit__.addDecoratorPayload("Component","CollapsibleContainerComponent",{selector:"se-collapsible-container",template:'<div role="tab" class="collapsible-container__header" [ngClass]="{\n        \'collapsible-container__header--icon-right\': isIconRight(),\n        \'collapsible-container__header--icon-left\': isIconLeft()\n    }" [attr.id]="headingId" [attr.aria-selected]="isOpen" (keypress)="handleKeypress($event)"><button type="button" tabindex="0" class="collapsible-container__header__title" (click)="toggle()" [attr.aria-expanded]="isOpen" [attr.aria-controls]="panelId"><ng-content select="se-collapsible-container-header"></ng-content></button> <a class="collapsible-container__header__button btn btn-link" *ngIf="configuration.iconVisible" [ngClass]="{\n            \'collapsible-container__header__button--expanded\': isOpen\n        }" [title]="isOpen\n            ? \'se.ycollapsible.action.collapse\'\n            : (\'se.ycollapsible.action.expand\' | translate)\n        " [attr.aria-expanded]="isOpen" (click)="toggle()"><span class="sap-icon--navigation-down-arrow collapsible-container__header__icon"></span></a></div><div #container class="collapsible-container__content panel" [ngStyle]="{ \'max-height.px\': isOpen ? containerHeight : 0 }" [attr.id]="panelId" [attr.aria-labelledby]="headingId" [attr.aria-hidden]="!isOpen" role="tabpanel"><ng-content select="se-collapsible-container-content"></ng-content></div>',styles:[".collapsible-container__content{overflow:hidden;display:block;transition:max-height .4s ease;width:100%;background-color:#fff}.collapsible-container__header{max-width:100%;background-color:#fff;display:flex;align-items:center;min-height:50px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.collapsible-container__header__title{text-align:left;background:0 0;border:0;outline:0;flex:1;display:flex;align-items:center;min-height:50px;text-decoration:none;user-select:none}.collapsible-container__header__title:hover{text-decoration:none}.collapsible-container__header__button{flex:0;transition:all .4s ease;font-size:20px}.collapsible-container__header__button--expanded{transform:rotate(180deg)}.collapsible-container__header--icon-right .collapsible-container__header__title{order:1}.collapsible-container__header--icon-right .collapsible-container__header__button{order:2}.collapsible-container__header--icon-left .collapsible-container__header__title{order:2}.collapsible-container__header--icon-left .collapsible-container__header__button{order:1}:host(.se-collapsible-container--noshadow) .collapsible-container__content.panel{box-shadow:none}"],changeDetection:s.ChangeDetectionStrategy.OnPush});var Fr=function(){CollapsibleContainerComponent.$inject=["cdr"];function CollapsibleContainerComponent(e){var t=this;this.cdr=e;this.getApi=new s.EventEmitter;this.containerHeight=0;this.headingId=B.generateIdentifier();this.panelId=B.generateIdentifier();this.api={isExpanded:function(){return t.isOpen}}}Object.defineProperty(CollapsibleContainerComponent.prototype,"_container",{set:function(e){var t=this;this.container=e;this.containerHeight=e.nativeElement.scrollHeight;if(!this.mutationObserver&&this.container&&this.container.nativeElement){this.mutationObserver=new MutationObserver((function(){t.containerHeight=t.container.nativeElement.scrollHeight;t.cdr.detectChanges()}));this.mutationObserver.observe(this.container.nativeElement,{childList:true,subtree:true,attributes:true})}},enumerable:false,configurable:true});CollapsibleContainerComponent.prototype.ngOnDestroy=function(){this.mutationObserver.disconnect()};CollapsibleContainerComponent.prototype.ngOnChanges=function(e){if(e.configuration){this.configure()}};CollapsibleContainerComponent.prototype.ngOnChanges.$inject=["changes"];CollapsibleContainerComponent.prototype.ngOnInit=function(){this.configure();this.isOpen=this.configuration.expandedByDefault;this.getApi.emit(this.api)};CollapsibleContainerComponent.prototype.toggle=function(){this.isOpen=!this.isOpen};CollapsibleContainerComponent.prototype.handleKeypress=function(e){if(e.code==="Enter"){this.toggle()}};CollapsibleContainerComponent.prototype.handleKeypress.$inject=["event"];CollapsibleContainerComponent.prototype.isIconRight=function(){return this.configuration.iconAlignment==="right"};CollapsibleContainerComponent.prototype.isIconLeft=function(){return this.configuration.iconAlignment==="left"};CollapsibleContainerComponent.prototype.configure=function(){this.configuration=__assign(__assign({},kr),this.configuration||{})};__decorate([s.Input(),__metadata("design:type",Object)],CollapsibleContainerComponent.prototype,"configuration",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],CollapsibleContainerComponent.prototype,"getApi",void 0);__decorate([s.ViewChild("container",{static:true}),__metadata("design:type",s.ElementRef),__metadata("design:paramtypes",[s.ElementRef])],CollapsibleContainerComponent.prototype,"_container",null);CollapsibleContainerComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-collapsible-container",template:'<div role="tab" class="collapsible-container__header" [ngClass]="{\n        \'collapsible-container__header--icon-right\': isIconRight(),\n        \'collapsible-container__header--icon-left\': isIconLeft()\n    }" [attr.id]="headingId" [attr.aria-selected]="isOpen" (keypress)="handleKeypress($event)"><button type="button" tabindex="0" class="collapsible-container__header__title" (click)="toggle()" [attr.aria-expanded]="isOpen" [attr.aria-controls]="panelId"><ng-content select="se-collapsible-container-header"></ng-content></button> <a class="collapsible-container__header__button btn btn-link" *ngIf="configuration.iconVisible" [ngClass]="{\n            \'collapsible-container__header__button--expanded\': isOpen\n        }" [title]="isOpen\n            ? \'se.ycollapsible.action.collapse\'\n            : (\'se.ycollapsible.action.expand\' | translate)\n        " [attr.aria-expanded]="isOpen" (click)="toggle()"><span class="sap-icon--navigation-down-arrow collapsible-container__header__icon"></span></a></div><div #container class="collapsible-container__content panel" [ngStyle]="{ \'max-height.px\': isOpen ? containerHeight : 0 }" [attr.id]="panelId" [attr.aria-labelledby]="headingId" [attr.aria-hidden]="!isOpen" role="tabpanel"><ng-content select="se-collapsible-container-content"></ng-content></div>',styles:[".collapsible-container__content{overflow:hidden;display:block;transition:max-height .4s ease;width:100%;background-color:#fff}.collapsible-container__header{max-width:100%;background-color:#fff;display:flex;align-items:center;min-height:50px;box-shadow:0 1px 1px rgba(0,0,0,.05)}.collapsible-container__header__title{text-align:left;background:0 0;border:0;outline:0;flex:1;display:flex;align-items:center;min-height:50px;text-decoration:none;user-select:none}.collapsible-container__header__title:hover{text-decoration:none}.collapsible-container__header__button{flex:0;transition:all .4s ease;font-size:20px}.collapsible-container__header__button--expanded{transform:rotate(180deg)}.collapsible-container__header--icon-right .collapsible-container__header__title{order:1}.collapsible-container__header--icon-right .collapsible-container__header__button{order:2}.collapsible-container__header--icon-left .collapsible-container__header__title{order:2}.collapsible-container__header--icon-left .collapsible-container__header__button{order:1}:host(.se-collapsible-container--noshadow) .collapsible-container__content.panel{box-shadow:none}"],changeDetection:s.ChangeDetectionStrategy.OnPush}),__metadata("design:paramtypes",[s.ChangeDetectorRef])],CollapsibleContainerComponent);return CollapsibleContainerComponent}();window.__smartedit__.addDecoratorPayload("Component","CollapsibleContainerContentComponent",{selector:"se-collapsible-container-content",template:" <ng-content></ng-content> "});var zr=function(){function CollapsibleContainerContentComponent(){}CollapsibleContainerContentComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-collapsible-container-content",template:" <ng-content></ng-content> "})],CollapsibleContainerContentComponent);return CollapsibleContainerContentComponent}();window.__smartedit__.addDecoratorPayload("Component","CollapsibleContainerHeaderComponent",{selector:"se-collapsible-container-header",template:" <ng-content></ng-content> "});var Lr=function(){function CollapsibleContainerHeaderComponent(){}CollapsibleContainerHeaderComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-collapsible-container-header",template:" <ng-content></ng-content> "})],CollapsibleContainerHeaderComponent);return CollapsibleContainerHeaderComponent}();var Vr=function(){function CollapsibleContainerModule(){}CollapsibleContainerModule=__decorate([s.NgModule({imports:[m.TranslateModule.forChild(),u.CommonModule],declarations:[Fr,zr,Lr],entryComponents:[Fr,zr,Lr],exports:[Fr,zr,Lr]})],CollapsibleContainerModule);return CollapsibleContainerModule}();window.__smartedit__.addDecoratorPayload("Component","WaitDialogComponent",{template:'\n        <div class="panel panel-default ySEPanelSpinner">\n            <div class="panel-body">\n                <div class="spinner ySESpinner">\n                    <div class="spinner-container spinner-container1">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                    <div class="spinner-container spinner-container2">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                    <div class="spinner-container spinner-container3">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                </div>\n                <div class="ySESpinnerText">\n                    {{\n                        modalRef.data.customLoadingMessageLocalizedKey || \'se.wait.dialog.message\'\n                            | translate\n                    }}\n                </div>\n            </div>\n        </div>\n    ',selector:"wait-dialog"});var $r=function(){function WaitDialogComponent(e){this.modalRef=e}WaitDialogComponent=__decorate([s.Component({template:'\n        <div class="panel panel-default ySEPanelSpinner">\n            <div class="panel-body">\n                <div class="spinner ySESpinner">\n                    <div class="spinner-container spinner-container1">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                    <div class="spinner-container spinner-container2">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                    <div class="spinner-container spinner-container3">\n                        <div class="spinner-circle1"></div>\n                        <div class="spinner-circle2"></div>\n                        <div class="spinner-circle3"></div>\n                        <div class="circle4"></div>\n                    </div>\n                </div>\n                <div class="ySESpinnerText">\n                    {{\n                        modalRef.data.customLoadingMessageLocalizedKey || \'se.wait.dialog.message\'\n                            | translate\n                    }}\n                </div>\n            </div>\n        </div>\n    ',selector:"wait-dialog"}),__metadata("design:paramtypes",[h.ModalRef])],WaitDialogComponent);return WaitDialogComponent}();var Ur=function(){function TabsSelectAdapter(){}TabsSelectAdapter.transform=function(e,t){return{id:t,label:e.title,value:e,listItemClassName:e.hasErrors&&"sm-tab-error"}};return TabsSelectAdapter}();window.__smartedit__.addDecoratorPayload("Component","TabsComponent",{selector:"se-tabs",template:'<div class="se-tabset-wrapper"><ul class="nav nav-tabs se-tabset" role="tablist" *ngIf="isInitialized"><ng-container *ngIf="tabsList.length !== numTabsDisplayed"><li *ngFor="let tab of (getVisibleTabs() | async); trackBy: trackTabById" [ngClass]="{ \'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" (click)="selectTab(tab)" class="se-tabset__link" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><ng-container *ngIf="tabsList && tabsList.length == numTabsDisplayed"><li *ngFor="let tab of tabsList; trackBy: trackTabById" [ngClass]="{\'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><su-select class="se-tabset__select" *ngIf="tabsList.length > numTabsDisplayed && (getDropdownTabs() | async)" [items]="dropdownTabs" [isKeyboardControlEnabled]="false" [hasCustomTrigger]="true" (onItemSelected)="selectTab($event.value)"><li [ngClass]="{\'active\': isActiveInMoreTab()}" su-select-custom-trigger><a [ngClass]="{\'sm-tab-error\': dropDownHasErrors()}" class="dropdown-toggle"><span *ngIf="!isActiveInMoreTab()" class="multi-tabs__more-span">{{ \'se.ytabset.tabs.more\' | translate }} </span><span *ngIf="isActiveInMoreTab()" class="multi-tabs__more-span">{{selectedTab.title | translate}} </span><span class="caret"></span></a></li></su-select></ul><div class="se-tab-set__content-wrapper" *ngIf="selectedTab"><ng-container *ngFor="let tab of tabsList; trackBy: trackTabById"><se-tab [hidden]="tab.id !== selectedTab.id" [attr.tab-id]="tab.id" [tab]="tab" [model]="model"></se-tab></ng-container></div></div>'});var jr=function(){function TabsComponent(){this.tabsList=[];this.onTabSelected=new s.EventEmitter;this.tabChangedStream=new g.BehaviorSubject(null)}Object.defineProperty(TabsComponent.prototype,"isInitialized",{get:function(){return!!this.tabsList&&this.tabsList.length>1&&!!this.selectedTab},enumerable:false,configurable:true});TabsComponent.prototype.isActiveInMoreTab=function(){var e=this;return this.tabsList.findIndex((function(t){return t.id===e.selectedTab.id}))>=this.numTabsDisplayed-1};TabsComponent.prototype.ngOnChanges=function(e){var t=this;var n=e.tabsList&&e.tabsList.currentValue&&!e.tabsList.previousValue||e.tabsList&&e.tabsList.firstChange&&!!e.tabsList.currentValue;var i=e.tabsList&&!!e.tabsList.previousValue&&!!e.tabsList.currentValue;if(this.tabsList){var o=this.tabsList.find((function(e){return e.active}))||this.tabsList[0];if(!this.selectedTab||this.selectedTab&&this.selectedTab.id!==o.id){this.selectedTab=o;this.selectedTab.active=true}}if(n){this.tabsList=this.tabsList.map((function(e){return __assign(__assign({},e),{active:false,hasErrors:false})}));this.tabChangedStream.next()}if(i){this.tabChangedStream.next()}this.getDropdownTabs().subscribe((function(e){t.dropdownTabs=e}))};TabsComponent.prototype.ngOnChanges.$inject=["changes"];TabsComponent.prototype.selectTab=function(e){if(e&&e.id!==this.selectedTab.id){if(!this.selectedTab.active){this.findSelectedTab()}this.selectedTab.active=false;this.selectedTab=e;this.selectedTab.active=true;this.onTabSelected.emit(this.selectedTab.id)}};TabsComponent.prototype.selectTab.$inject=["tabToSelect"];TabsComponent.prototype.dropDownHasErrors=function(){var e=this.tabsList.slice(this.numTabsDisplayed-1);return e.some((function(e){return e.hasErrors}))};TabsComponent.prototype.findSelectedTab=function(){var e=this.tabsList.find((function(e){return e.active}));if(e){this.selectedTab=e}};TabsComponent.prototype.getDropdownTabs=function(){var e=this;return this.tabChangedStream.pipe(f.map((function(){return(e.tabsList||[]).slice(e.numTabsDisplayed-1).map(Ur.transform)})),f.distinctUntilChanged((function(e,t){return a.isEqual(e,t)})))};TabsComponent.prototype.getVisibleTabs=function(){var e=this;return this.tabChangedStream.pipe(f.map((function(){return(e.tabsList||[]).slice(0,e.numTabsDisplayed-1)})),f.distinctUntilChanged((function(e,t){return a.isEqual(e,t)})))};TabsComponent.prototype.trackTabById=function(e){return e};TabsComponent.prototype.trackTabById.$inject=["index"];__decorate([s.Input(),__metadata("design:type",Object)],TabsComponent.prototype,"model",void 0);__decorate([s.Input(),__metadata("design:type",Array)],TabsComponent.prototype,"tabsList",void 0);__decorate([s.Input(),__metadata("design:type",Number)],TabsComponent.prototype,"numTabsDisplayed",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],TabsComponent.prototype,"onTabSelected",void 0);TabsComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-tabs",template:'<div class="se-tabset-wrapper"><ul class="nav nav-tabs se-tabset" role="tablist" *ngIf="isInitialized"><ng-container *ngIf="tabsList.length !== numTabsDisplayed"><li *ngFor="let tab of (getVisibleTabs() | async); trackBy: trackTabById" [ngClass]="{ \'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" (click)="selectTab(tab)" class="se-tabset__link" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><ng-container *ngIf="tabsList && tabsList.length == numTabsDisplayed"><li *ngFor="let tab of tabsList; trackBy: trackTabById" [ngClass]="{\'active\': tab.id === selectedTab.id }" [attr.tab-id]="tab.id" class="se-tabset__tab"><a [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)" *ngIf="!tab.message">{{tab.title | translate}}</a><se-tooltip [triggers]="[\'mouseover\']" *ngIf="tab.message"><a se-tooltip-trigger [ngClass]="{\'sm-tab-error\': tab.hasErrors}" class="se-tabset__link" (click)="selectTab(tab)">{{tab.title | translate}} </a><span se-tooltip-body>{{ tab.message }}</span></se-tooltip></li></ng-container><su-select class="se-tabset__select" *ngIf="tabsList.length > numTabsDisplayed && (getDropdownTabs() | async)" [items]="dropdownTabs" [isKeyboardControlEnabled]="false" [hasCustomTrigger]="true" (onItemSelected)="selectTab($event.value)"><li [ngClass]="{\'active\': isActiveInMoreTab()}" su-select-custom-trigger><a [ngClass]="{\'sm-tab-error\': dropDownHasErrors()}" class="dropdown-toggle"><span *ngIf="!isActiveInMoreTab()" class="multi-tabs__more-span">{{ \'se.ytabset.tabs.more\' | translate }} </span><span *ngIf="isActiveInMoreTab()" class="multi-tabs__more-span">{{selectedTab.title | translate}} </span><span class="caret"></span></a></li></su-select></ul><div class="se-tab-set__content-wrapper" *ngIf="selectedTab"><ng-container *ngFor="let tab of tabsList; trackBy: trackTabById"><se-tab [hidden]="tab.id !== selectedTab.id" [attr.tab-id]="tab.id" [tab]="tab" [model]="model"></se-tab></ng-container></div></div>'})],TabsComponent);return TabsComponent}();var Br=new s.InjectionToken("tab-data");window.__smartedit__.addDecoratorPayload("Component","TabComponent",{selector:"se-tab",template:'<ng-container *ngIf="!isLegacyTab; else legacyAngularJSTab"><ng-container *ngComponentOutlet="tab.component; injector: tabInjector"></ng-container></ng-container><ng-template #legacyAngularJSTab><div [ngInclude]="tab.templateUrl" [scope]="scopeStream | async"></div></ng-template>'});var Hr=function(){TabComponent.$inject=["injector"];function TabComponent(e){this.injector=e;this.scopeStream=new g.BehaviorSubject(null)}TabComponent.prototype.ngOnChanges=function(e){var t=e.model&&!a.isEqual(e.model.previousValue,e.model.currentValue);var n=e.tab&&!a.isEqual(e.tab.previousValue,e.tab.currentValue);if(n||t){this.scopeStream.next({model:this.model,tabId:this.tab.id,tab:this.tab})}};TabComponent.prototype.ngOnChanges.$inject=["changes"];TabComponent.prototype.ngOnInit=function(){if(!this.isLegacyTab){this.tabInjector=s.Injector.create({providers:[{provide:Br,useValue:{model:this.model,tabId:this.tab.id,tab:this.tab}}],parent:this.injector})}};Object.defineProperty(TabComponent.prototype,"isLegacyTab",{get:function(){return!!this.tab.templateUrl},enumerable:false,configurable:true});__decorate([s.Input(),__metadata("design:type",Object)],TabComponent.prototype,"tab",void 0);__decorate([s.Input(),__metadata("design:type",Object)],TabComponent.prototype,"model",void 0);TabComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-tab",template:'<ng-container *ngIf="!isLegacyTab; else legacyAngularJSTab"><ng-container *ngComponentOutlet="tab.component; injector: tabInjector"></ng-container></ng-container><ng-template #legacyAngularJSTab><div [ngInclude]="tab.templateUrl" [scope]="scopeStream | async"></div></ng-template>'}),__metadata("design:paramtypes",[s.Injector])],TabComponent);return TabComponent}();var Gr=function(){function FundamentalsModule(){}FundamentalsModule=__decorate([s.NgModule({imports:[h.ModalModule,h.ButtonModule,b.BrowserAnimationsModule,S.FormsModule,h.PopoverModule,h.MenuModule,h.AlertModule,h.PaginationModule],exports:[h.ModalModule,h.ButtonModule,h.FormModule,h.PopoverModule,h.MenuModule,h.AlertModule,h.PaginationModule]})],FundamentalsModule);return FundamentalsModule}();function $translateStaticFilesLoader(e,t){"ngInject";return function(n){return e.when(t.get(n.key))}}n(935);var Wr=function(){function TranslationServiceModule(){}TranslationServiceModule=__decorate([SeModule({imports:["pascalprecht.translate","legacySmarteditCommonsModule"],providers:[$translateStaticFilesLoader],config:["$translateProvider",function(e){"ngInject";e.useStaticFilesLoader({prefix:fe+"/",suffix:""});e.preferredLanguage(pe);e.useSanitizeValueStrategy("escapeParameters")}],initialize:["$translate","browserService","operationContextService","crossFrameEventService","storageService","SWITCH_LANGUAGE_EVENT","OPERATION_CONTEXT",function(e,t,n,i,o,r,a){"ngInject";o.getValueFromLocalStorage("SELECTED_LANGUAGE",false).then((function(e){return e?e.isoCode:t.getBrowserLocale()}),(function(){return t.getBrowserLocale()})).then((function(t){e.use(t)}));n.register(fe,a.TOOLING);i.subscribe(r,(function(t,n){e.use(n.isoCode)}))}]})],TranslationServiceModule);return TranslationServiceModule}();var qr=function(){function AlertServiceProvidersModule(){}e=AlertServiceProvidersModule;AlertServiceProvidersModule.forRoot=function(t,n){return{ngModule:e,providers:[{provide:t,useClass:n},{provide:o.IAlertService,useFactory:function(e){return e},deps:[t]}]}};var e;AlertServiceProvidersModule=e=__decorate([s.NgModule()],AlertServiceProvidersModule);return AlertServiceProvidersModule}();window.__smartedit__.addDecoratorPayload("Component","TooltipComponent",{selector:"se-tooltip",template:'\n        <fd-popover\n            [triggers]="triggers"\n            [placement]="placement"\n            [appendTo]="appendTo"\n            [noArrow]="!isChevronVisible"\n            [additionalClasses]="[\'se-tooltip-container\']"\n            [ngClass]="additionalClasses"\n            class="se-tooltip"\n        >\n            <fd-popover-control>\n                <ng-content select="[se-tooltip-trigger]"></ng-content>\n            </fd-popover-control>\n            <fd-popover-body>\n                <div class="popover se-popover">\n                    <h3 class="se-popover__title" *ngIf="title">{{ title | translate }}</h3>\n\n                    <div class="se-popover__content">\n                        <ng-content select="[se-tooltip-body]"></ng-content>\n                    </div>\n                </div>\n            </fd-popover-body>\n        </fd-popover>\n    '});var Kr=function(){function TooltipComponent(){}TooltipComponent.prototype.ngAfterViewInit=function(){var e=this;this.popoverIsOpenChangeSubscription=this.popover.isOpenChange.subscribe((function(t){if(t){setTimeout((function(){return e.popover.updatePopover()}))}}))};TooltipComponent.prototype.ngOnDestroy=function(){this.popoverIsOpenChangeSubscription.unsubscribe()};__decorate([s.Input(),__metadata("design:type",Array)],TooltipComponent.prototype,"triggers",void 0);__decorate([s.Input(),__metadata("design:type",String)],TooltipComponent.prototype,"placement",void 0);__decorate([s.Input(),__metadata("design:type",String)],TooltipComponent.prototype,"title",void 0);__decorate([s.Input(),__metadata("design:type",Object)],TooltipComponent.prototype,"appendTo",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],TooltipComponent.prototype,"isChevronVisible",void 0);__decorate([s.Input(),__metadata("design:type",Array)],TooltipComponent.prototype,"additionalClasses",void 0);__decorate([s.ViewChild(h.PopoverComponent,{static:false}),__metadata("design:type",h.PopoverComponent)],TooltipComponent.prototype,"popover",void 0);TooltipComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-tooltip",template:'\n        <fd-popover\n            [triggers]="triggers"\n            [placement]="placement"\n            [appendTo]="appendTo"\n            [noArrow]="!isChevronVisible"\n            [additionalClasses]="[\'se-tooltip-container\']"\n            [ngClass]="additionalClasses"\n            class="se-tooltip"\n        >\n            <fd-popover-control>\n                <ng-content select="[se-tooltip-trigger]"></ng-content>\n            </fd-popover-control>\n            <fd-popover-body>\n                <div class="popover se-popover">\n                    <h3 class="se-popover__title" *ngIf="title">{{ title | translate }}</h3>\n\n                    <div class="se-popover__content">\n                        <ng-content select="[se-tooltip-body]"></ng-content>\n                    </div>\n                </div>\n            </fd-popover-body>\n        </fd-popover>\n    '})],TooltipComponent);return TooltipComponent}();var Yr=function(){function TooltipModule(){}TooltipModule=__decorate([s.NgModule({imports:[u.CommonModule,Gr,o.TranslationModule.forChild()],declarations:[Kr],entryComponents:[Kr],exports:[Kr]})],TooltipModule);return TooltipModule}();var Xr=function(){function TabsModule(){}TabsModule=__decorate([s.NgModule({imports:[u.CommonModule,Nn,o.SelectModule,Yr,o.TranslationModule.forChild()],declarations:[jr,Hr],entryComponents:[jr,Hr],exports:[jr,Hr]})],TabsModule);return TabsModule}();var Zr=new s.InjectionToken("DATA_TABLE_COMPONENT_DATA");window.__smartedit__.addDecoratorPayload("Component","DataTableComponent",{selector:"se-data-table",template:'<table class="se-paged-list-table fd-table"><thead><tr><th *ngFor="let column of columns" (click)="sortColumn(column)" [ngStyle]="{\'width.\': columnWidth + \'%\'}" [ngClass]="\'se-paged-list__header-\'+column.property" class="se-paged-list__header">{{ column.i18n | translate }} <span class="se-data-table__arrow" *ngIf="visibleSortingHeader === column.property" [ngClass]="{ \n                        \'se-data-table__arrow--expanded sap-icon--navigation-down-arrow\': headersSortingState[column.property],\n                        \'se-data-table__arrow--not-expanded sap-icon--navigation-up-arrow\': !headersSortingState[column.property] }"></span></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of items; let i = index" class="se-paged-list-item"><td *ngFor="let column of columns" [ngClass]="\'se-paged-list-item-\'+column.property"><se-data-table-renderer [column]="column" [item]="item" [config]="config" [index]="i"></se-data-table-renderer></td></tr></tbody></table>'});var Qr=function(){function DataTableComponent(){this.onSortColumn=new s.EventEmitter;this.headersSortingState={}}DataTableComponent.prototype.ngOnInit=function(){this._validateInput();this._configure()};DataTableComponent.prototype.sortColumn=function(e){if(e.sortable){this.columnToggleReversed=!this.columnToggleReversed;this.headersSortingState[e.property]=this.columnToggleReversed;this.visibleSortingHeader=e.property;this.currentPage=1;this.internalSortBy=e.property;this.columnSortMode=this.columnToggleReversed?t.SortDirections.Descending:t.SortDirections.Ascending;this.onSortColumn.emit({$columnKey:e,$columnSortMode:this.columnSortMode})}};DataTableComponent.prototype.sortColumn.$inject=["columnKey"];DataTableComponent.prototype._configure=function(){var e=100;this.columnWidth=e/this.columns.length;this.columnToggleReversed=this.sortStatus.reversed;this.columnSortMode=this.sortStatus.reversed?t.SortDirections.Descending:t.SortDirections.Ascending;this.headersSortingState[this.sortStatus.internalSortBy]=this.config.reversed;this.visibleSortingHeader=this.sortStatus.internalSortBy};DataTableComponent.prototype._validateInput=function(){if(!Array.isArray(this.columns)){throw new Error("Columns must be an array")}if(this.columns.some((function(e){return!!e.renderer&&!!e.component}))){throw new Error("Columns must have either renderer or a component")}if(!(this.config instanceof Object)){throw new Error("Config must be an object")}};__decorate([s.Input(),__metadata("design:type",Array)],DataTableComponent.prototype,"columns",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DataTableComponent.prototype,"config",void 0);__decorate([s.Input(),__metadata("design:type",Array)],DataTableComponent.prototype,"items",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DataTableComponent.prototype,"sortStatus",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],DataTableComponent.prototype,"onSortColumn",void 0);DataTableComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-data-table",template:'<table class="se-paged-list-table fd-table"><thead><tr><th *ngFor="let column of columns" (click)="sortColumn(column)" [ngStyle]="{\'width.\': columnWidth + \'%\'}" [ngClass]="\'se-paged-list__header-\'+column.property" class="se-paged-list__header">{{ column.i18n | translate }} <span class="se-data-table__arrow" *ngIf="visibleSortingHeader === column.property" [ngClass]="{ \n                        \'se-data-table__arrow--expanded sap-icon--navigation-down-arrow\': headersSortingState[column.property],\n                        \'se-data-table__arrow--not-expanded sap-icon--navigation-up-arrow\': !headersSortingState[column.property] }"></span></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of items; let i = index" class="se-paged-list-item"><td *ngFor="let column of columns" [ngClass]="\'se-paged-list-item-\'+column.property"><se-data-table-renderer [column]="column" [item]="item" [config]="config" [index]="i"></se-data-table-renderer></td></tr></tbody></table>'})],DataTableComponent);return DataTableComponent}();window.__smartedit__.addDecoratorPayload("Component","DataTableRendererComponent",{selector:"se-data-table-renderer",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div\n            *ngIf="column.renderer"\n            [seCompileHtml]="column.renderer(item, column)"\n            [compileHtmlNgController]="legacyController"\n            [scope]="{ item: item, column: column, $index: index }"\n        ></div>\n        <div *ngIf="!column.renderer && column.component">\n            <ng-container\n                *ngComponentOutlet="column.component; injector: rendererInjector"\n            ></ng-container>\n        </div>\n        <span *ngIf="!column.renderer && !column.component">{{ item[column.property] }}</span>\n    '});var Jr=function(){DataTableRendererComponent.$inject=["injector"];function DataTableRendererComponent(e){this.injector=e}DataTableRendererComponent.prototype.ngOnInit=function(){this.setInjector()};DataTableRendererComponent.prototype.ngOnChanges=function(e){if(e.column||e.item){this.setInjector()}if(e.config){this.setLegacyController()}};DataTableRendererComponent.prototype.ngOnChanges.$inject=["changes"];DataTableRendererComponent.prototype.setLegacyController=function(){var e=this.config;this.legacyController={alias:"$ctrl",value:function(){function class_1(){this.config=e}return class_1}()}};DataTableRendererComponent.prototype.setInjector=function(){var e=this,t=e.column,n=e.item;this.rendererInjector=s.Injector.create({providers:[{provide:Zr,useValue:{column:t,item:n}}],parent:this.injector})};__decorate([s.Input(),__metadata("design:type",Object)],DataTableRendererComponent.prototype,"column",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DataTableRendererComponent.prototype,"item",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DataTableRendererComponent.prototype,"config",void 0);__decorate([s.Input(),__metadata("design:type",Number)],DataTableRendererComponent.prototype,"index",void 0);DataTableRendererComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-data-table-renderer",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div\n            *ngIf="column.renderer"\n            [seCompileHtml]="column.renderer(item, column)"\n            [compileHtmlNgController]="legacyController"\n            [scope]="{ item: item, column: column, $index: index }"\n        ></div>\n        <div *ngIf="!column.renderer && column.component">\n            <ng-container\n                *ngComponentOutlet="column.component; injector: rendererInjector"\n            ></ng-container>\n        </div>\n        <span *ngIf="!column.renderer && !column.component">{{ item[column.property] }}</span>\n    '}),__metadata("design:paramtypes",[s.Injector])],DataTableRendererComponent);return DataTableRendererComponent}();var ea=function(){CompileHtmlLegacyDirective.$inject=["$compile","$scope","$element","$attrs"];function CompileHtmlLegacyDirective(e,t,n,i){this.$compile=e;this.$scope=t;this.$element=n;this.$attrs=i}CompileHtmlLegacyDirective.prototype.$postLink=function(){var e=this;this.$scope.$parent.$watch((function(t){return t.$eval(e.$attrs.compileHtml)}),(function(t){e.$element.html(t);e.$compile(e.$element.contents())(e.$scope.$parent)}))};CompileHtmlLegacyDirective=__decorate([SeDirective({selector:"[compile-html]"}),__metadata("design:paramtypes",[Function,Object,Object,Object])],CompileHtmlLegacyDirective);return CompileHtmlLegacyDirective}();var ta=function(){function RecompileDomDirective(){this.showContent=true}RecompileDomDirective.prototype.$postLink=function(){var e=this;this.recompileDom=function(){e.showContent=false;setTimeout((function(){e.showContent=true}),0)}};RecompileDomDirective=__decorate([SeDirective({selector:"[recompile-dom]",replace:false,transclude:true,controllerAs:"ctrl",template:"<div data-ng-if='ctrl.showContent' data-ng-transclude></div>",inputs:["recompileDom:="]})],RecompileDomDirective);return RecompileDomDirective}();var na=function(){PageSensitiveDirective.$inject=["crossFrameEventService"];function PageSensitiveDirective(e){this.crossFrameEventService=e;this.hasContent=true}PageSensitiveDirective.prototype.$onInit=function(){var e=this;this.unRegisterPageChangeListener=this.crossFrameEventService.subscribe(o.EVENTS.PAGE_CHANGE,(function(){e.hasContent=false;setTimeout((function(){e.hasContent=true}),0)}))};PageSensitiveDirective.prototype.$onDestroy=function(){this.unRegisterPageChangeListener()};PageSensitiveDirective=__decorate([SeDirective({selector:"page-sensitive",replace:false,transclude:true,template:"<div class='se-page-sensitive' data-ng-if='ctrl.hasContent' data-ng-transclude></div>",scope:true,controllerAs:"ctrl"}),__metadata("design:paramtypes",[Object])],PageSensitiveDirective);return PageSensitiveDirective}();var ia=function(){YSelectComponent.$inject=["logService","$templateCache"];function YSelectComponent(e,t){var n=this;this.logService=e;this.$templateCache=t;this.resultsHeaderLabel="se.yselect.options.inactiveoption.label";this.api={setValidationState:function(e){n.validationState=e},resetValidationState:function(){n.validationState=undefined}}}YSelectComponent.prototype.$onInit=function(){var e=this;this.items=[];this.searchEnabled=this.searchEnabled!==false;this.resetSearchInput=this.resetSearchInput!==false;this.exposedModel.$viewChangeListeners.push((function(){return e.syncModels()}));this.exposedModel.$render=function(){return e.syncModels()};this.reset=function(t){e.items.length=0;if(t){e.resetModel()}return e.$onChanges()};if(typeof this.getApi==="function"){this.getApi({$api:this.api})}};YSelectComponent.prototype.$onChanges=function(e){var t=Promise.resolve(null);this.isValidConfiguration();this.updateControlTemplate();if(!this.items||this.items.length===0){if(!this.isPagedDropdown()){t=this.internalFetchAll()}else if(this.fetchStrategy.fetchEntity||this.fetchStrategy.fetchEntities){if(!this.isModelEmpty()){t=this.internalFetchEntities()}}else{throw new Error("could not initialize dropdown of ySelect, neither fetchEntity, fetchEntities, nor fetchAll were specified")}}if(e&&e.fetchStrategy){this._updateChild()}return t};YSelectComponent.prototype.$onChanges.$inject=["changes"];YSelectComponent.prototype.syncModels=function(){this.model=this.exposedModel.$modelValue;this.$onChanges();this.internalOnChange()};YSelectComponent.prototype.clear=function(e,t){t.preventDefault();t.stopPropagation();delete this.model;this.internalOnChange()};YSelectComponent.prototype.clear.$inject=["$select","$event"];YSelectComponent.prototype.showResultHeader=function(){return this.searchEnabled&&this.items&&this.items.length>0};YSelectComponent.prototype.getActionableTemplateUrl=function(){return this.actionableSearchItemTemplateConfig?this.actionableSearchItemTemplateConfig.templateUrl:""};YSelectComponent.prototype.refreshOptions=function(e){var t=this;if(this.fetchStrategy.fetchAll){this.fetchStrategy.fetchAll(e).then((function(e){if(r.toJson(t.items)!==r.toJson(e)){t.items=e}}))}};YSelectComponent.prototype.refreshOptions.$inject=["mask"];YSelectComponent.prototype.internalOnRemove=function(e,t){if(this.onRemove){this.onRemove(e,t)}};YSelectComponent.prototype.internalOnRemove.$inject=["item","model"];YSelectComponent.prototype.internalOnSelect=function(e,t){if(this.onSelect){this.onSelect(e,t)}};YSelectComponent.prototype.internalOnSelect.$inject=["item","model"];YSelectComponent.prototype.internalInit=function(e){if(this.init){this.init(e)}e.searchInput.on("keydown",(function(e){if(e.key==="Backspace"||e.key==="Delete"){e.stopImmediatePropagation()}}))};YSelectComponent.prototype.internalInit.$inject=["select"];YSelectComponent.prototype.internalKeyup=function(e,t){if(this.keyup){this.keyup(e,t)}};YSelectComponent.prototype.internalKeyup.$inject=["event","selectSearch"];YSelectComponent.prototype.internalOnChange=function(){this.exposedModel.$setViewValue(this.model);if(this.onChange){this.onChange()}};YSelectComponent.prototype.internalFetchAll=function(){var e=this;return this.fetchStrategy.fetchAll().then((function(t){e.items=t;if(e.model){var n=e.multiSelect?e.model.every((function(t){return!!e.items.find((function(e){return e.id===t}))})):t.find((function(t){return t.id===e.model}));if(!n){e.logService.debug("[ySelect - "+e.id+"] fetchAll was used to fetch the option identified by "+e.model+" but failed to find a match")}e.updateModelIfNecessary()}e.internalOnChange()}))};YSelectComponent.prototype.internalFetchEntities=function(){var e=this;var t;if(!this.multiSelect){t=this.fetchEntity(this.model).then((function(e){return[e]}))}else{if(this.fetchStrategy.fetchEntities){t=this.fetchStrategy.fetchEntities(this.model).then((function(t){if(t.length!==e.model.length){e.logService.debug("!fetchEntities was used to fetch the options identified by "+e.model+" but failed to find all matches")}return t}))}else{var n=this.model.map((function(t){return e.fetchEntity(t)}));t=Promise.all(n)}}return t.then((function(t){e.items=t.filter((function(e){return e!==null})).map((function(e){delete e.$promise;delete e.$resolved;e.technicalUniqueId=B.encode(e);return e}));e.updateModelIfNecessary();e.internalOnChange()}))};YSelectComponent.prototype.fetchEntity=function(e){var t=this;return this.fetchStrategy.fetchEntity(e).then((function(e){if(!e){t.logService.debug("fetchEntity was used to fetch the option identified by "+e+" but failed to find a match")}return e}))};YSelectComponent.prototype.fetchEntity.$inject=["entryId"];YSelectComponent.prototype.updateModelIfNecessary=function(){var e=this;if(!this.keepModelOnReset){if(this.multiSelect){this.model=this.model.filter((function(t){return e.items.find((function(e){return e&&e.id===t}))}))}else{var t=this.items.filter((function(t){return t.id===e.model}));this.model=t.length>0?this.model:null}}};YSelectComponent.prototype.isValidConfiguration=function(){if(!this.fetchStrategy.fetchAll&&!this.fetchStrategy.fetchPage){throw new Error("neither fetchAll nor fetchPage have been specified in fetchStrategy")}if(this.fetchStrategy.fetchAll&&this.fetchStrategy.fetchPage){throw new Error("only one of either fetchAll or fetchPage must be specified in fetchStrategy")}if(this.fetchStrategy.fetchPage&&this.model&&!this.fetchStrategy.fetchEntity&&!this.fetchStrategy.fetchEntities){throw new Error("fetchPage has been specified in fetchStrategy but neither fetchEntity nor fetchEntities are available to load item identified by "+this.model)}if(this.isPagedDropdown()&&!this.keepModelOnReset){this.logService.debug("current ySelect is paged, so keepModelOnReset flag is ignored (it will always keep the model on reset).")}};YSelectComponent.prototype.requiresPaginatedStyling=function(){return this.isPagedDropdown()||this.hasControls()};YSelectComponent.prototype.hasError=function(){return rt.VALIDATION_ERROR===this.validationState};YSelectComponent.prototype.hasWarning=function(){return rt.WARNING===this.validationState};YSelectComponent.prototype.hasControls=function(){return(this.controls||false)===true};YSelectComponent.prototype.disableChoice=function(e){if(this.disableChoiceFn){return this.disableChoiceFn(e)}return false};YSelectComponent.prototype.disableChoice.$inject=["item"];YSelectComponent.prototype.isPagedDropdown=function(){return!!this.fetchStrategy.fetchPage};YSelectComponent.prototype.resetModel=function(){if(this.multiSelect){this.model.length=0}else{delete this.model}};YSelectComponent.prototype.updateControlTemplate=function(){this.theme=this.isPagedDropdown()?"pagedSelect2":"select2";this.itemTemplate=this.itemTemplate||"defaultItemTemplate.html"};YSelectComponent.prototype.isModelEmpty=function(){if(this.multiSelect){return!this.model||this.model&&this.model.length===0}else{return!this.model}};YSelectComponent.prototype._updateChild=function(){var e="ySelectTemplate.html";var t="yMultiSelectTemplate.html";var n=!this.fetchStrategy.fetchPage?"select2":"pagedSelect2";var i=!this.fetchStrategy.fetchPage?'repeat="item.id as item in $ctrl.items | filter: $select.search" refresh="$ctrl.refreshOptions($select.search)"':'repeat="item.id as item in $ctrl.items"';var o=this.$templateCache.get(this.multiSelect?t:e);this.result=o.replace("<%= theme %>",n).replace("{% filtering %}",i)};YSelectComponent=__decorate([SeComponent({template:"<div data-compile-html='$ctrl.result'></div>",transclude:true,require:{exposedModel:"ngModel"},inputs:["id:@","fetchStrategy","onChange","controls","multiSelect","keepModelOnReset","reset:=?","isReadOnly","resultsHeaderTemplate","resultsHeaderTemplateUrl","resultsHeaderLabel","disableChoiceFn","placeholder","itemTemplate","searchEnabled","resetSearchInput","onRemove","onSelect","init","keyup","showRemoveButton","getApi:&"]}),__metadata("design:paramtypes",[o.LogService,Object])],YSelectComponent);return YSelectComponent}();var oa=function(){ItemPrinterComponent.$inject=["$scope"];function ItemPrinterComponent(e){var t=this;this.$scope=e;this.$onChanges=function(){t.$scope.item=t.model;t.$scope.ySelect=t.ySelect};this.$scope.selected=true}ItemPrinterComponent=__decorate([SeComponent({selector:"item-printer",template:'<div class="se-item-printer" ng-include="$ctrl.templateUrl"></div>',replace:false,transclude:false,inputs:["templateUrl","model"],require:{ySelect:"^ySelect"}}),__metadata("design:paramtypes",[Object])],ItemPrinterComponent);return ItemPrinterComponent}();var ra=function(){ActionableSearchItemComponent.$inject=["systemEventService"];function ActionableSearchItemComponent(e){this.systemEventService=e;this.defaultEventId="yActionableSearchItem_ACTION_CREATE";this.defaultActionText="se.yationablesearchitem.action.create"}ActionableSearchItemComponent.prototype.getActionText=function(){return this.actionText||this.defaultActionText};ActionableSearchItemComponent.prototype.showForm=function(){return this.uiSelect&&this.uiSelect.search&&this.uiSelect.search.length>0};ActionableSearchItemComponent.prototype.getInputText=function(){return this.uiSelect.search};ActionableSearchItemComponent.prototype.buttonPressed=function(){var e=this.eventId||this.defaultEventId;this.systemEventService.publishAsync(e,this.uiSelect.search||"");this.uiSelect.close()};ActionableSearchItemComponent=__decorate([SeComponent({selector:"y-actionable-search-item",templateUrl:"yActionableSearchItemTemplate.html",require:{ySelect:"^ySelect",uiSelect:"^uiSelect"},inputs:["eventId:@?","actionText:@?"]}),__metadata("design:paramtypes",[Kt])],ActionableSearchItemComponent);return ActionableSearchItemComponent}();var aa=function(){function YSelectModule(){}YSelectModule=__decorate([SeModule({imports:["legacySmarteditCommonsModule","functionsModule","ui.select","ngSanitize","coretemplates","l10nModule","seConstantsModule"],declarations:[ia,oa,ra],initialize:["$templateCache",function(e){"ngInject";e.put("select2/select-multiple.tpl.html",e.get("select2/select-multiple.tpl.html").replace("{'select2-display-none': !$select.open || $select.items.length === 0}","{'select2-display-none': !$select.open }"));e.put("select2/select-multiple.tpl.html",e.get("select2/select-multiple.tpl.html").replace('placeholder="{{$selectMultiple.getPlaceholder()}}"','placeholder="{{$select.placeholder}}"'));e.put("select2/select.tpl.html",e.get("select2/select.tpl.html").replace('<input type="search"','<input type="search" placeholder="{{$select.isEmpty() ? null : $select.placeholder}}"'));e.put("select2/match-multiple.tpl.html",e.get("select2/match-multiple.tpl.html").replace('href="javascript:;"',""));e.put("pagedSelect2/match-multiple.tpl.html",e.get("select2/match-multiple.tpl.html"));e.put("pagedSelect2/match.tpl.html",e.get("select2/match.tpl.html"));e.put("pagedSelect2/no-choice.tpl.html",e.get("select2/no-choice.tpl.html"));e.put("pagedSelect2/select-multiple.tpl.html",e.get("select2/select-multiple.tpl.html"));e.put("pagedSelect2/select.tpl.html",e.get("select2/select.tpl.html"));e.put("pagedSelect2/choices.tpl.html",e.get("uiSelectPagedChoicesTemplate.html"));e.put("select2/choices.tpl.html",e.get("uiSelectChoicesTemplate.html"))}]})],YSelectModule);return YSelectModule}();var sa=function(){IncludeReplaceDirective.$inject=["$element"];function IncludeReplaceDirective(e){this.$element=e}IncludeReplaceDirective.prototype.$postLink=function(){this.$element.replaceWith(this.$element.children())};IncludeReplaceDirective=__decorate([SeDirective({selector:"[include-replace]",require:"ngInclude"}),__metadata("design:paramtypes",[Object])],IncludeReplaceDirective);return IncludeReplaceDirective}();var ca=function(){function ResizeObserverDirective(e){this.elementRef=e;this.onResize=new s.EventEmitter}ResizeObserverDirective.prototype.ngOnInit=function(){this.startWatching()};ResizeObserverDirective.prototype.ngOnDestroy=function(){this.observer.disconnect()};ResizeObserverDirective.prototype.startWatching=function(){var e=this;this.observer=new y((function(t){return e.internalOnResize(t)}));this.observer.observe(this.elementRef.nativeElement)};ResizeObserverDirective.prototype.internalOnResize=function(e){this.onResize.emit()};__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],ResizeObserverDirective.prototype,"onResize",void 0);ResizeObserverDirective=__decorate([s.Directive({selector:"[seResizeObserver]"}),__metadata("design:paramtypes",[s.ElementRef])],ResizeObserverDirective);return ResizeObserverDirective}();var la=function(){function ResizeObserverModule(){}ResizeObserverModule=__decorate([s.NgModule({declarations:[ca],exports:[ca]})],ResizeObserverModule);return ResizeObserverModule}();var da=function(){function HasOperationPermissionBaseDirective(e,t,n){this.systemEventService=e;this.permissionService=t;this.logService=n}HasOperationPermissionBaseDirective.prototype.ngOnInit=function(){this.unregisterHandler=this.systemEventService.subscribe(o.EVENTS.PERMISSION_CACHE_CLEANED,this.refreshIsPermissionGranted.bind(this))};HasOperationPermissionBaseDirective.prototype.ngOnDestroy=function(){this.unregisterHandler()};HasOperationPermissionBaseDirective.prototype.ngOnChanges=function(e){if(e.hasOperationPermission&&e.hasOperationPermission.currentValue){this.permission=e.hasOperationPermission.currentValue;this.refreshIsPermissionGranted()}};Object.defineProperty(HasOperationPermissionBaseDirective.prototype,"isPermissionGrantedHandler",{set:function(e){this._isPermissionGrantedHandler=e},enumerable:false,configurable:true});HasOperationPermissionBaseDirective.prototype.refreshIsPermissionGranted=function(){var e=this;this.isPermissionGranted(this.permission).then((function(t){e._isPermissionGrantedHandler(t)}))};HasOperationPermissionBaseDirective.prototype.isPermissionGranted=function(e){var t=this;return this.permissionService.isPermitted(this.validateAndPreparePermissions(e)).then((function(e){return e}),(function(e){t.logService.error("Failed to retrieve authorization",e);return false})).then((function(e){return e}))};HasOperationPermissionBaseDirective.prototype.validateAndPreparePermissions=function(e){if(typeof e!=="string"&&!Array.isArray(e)){throw new Error("Permission should be string or an array of objects")}return typeof e==="string"?this.toPermissions(e):e};HasOperationPermissionBaseDirective.prototype.toPermissions=function(e){return[{names:e.split(",")}]};return HasOperationPermissionBaseDirective}();var pa=function(e){__extends(HasOperationPermissionDirective,e);function HasOperationPermissionDirective(t,n,i,o,r,a){var s=e.call(this,i,o,r)||this;s.templateRef=t;s.viewContainerRef=n;s.cdr=a;s.hasView=false;s.isPermissionGrantedHandler=s.getIsPermissionGrantedHandler();return s}HasOperationPermissionDirective.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)};HasOperationPermissionDirective.prototype.ngOnChanges=function(t){e.prototype.ngOnChanges.call(this,{hasOperationPermission:new s.SimpleChange(t.seHasOperationPermission.previousValue,t.seHasOperationPermission.currentValue,t.seHasOperationPermission.firstChange)})};HasOperationPermissionDirective.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)};HasOperationPermissionDirective.prototype.getIsPermissionGrantedHandler=function(){var e=this;return function(t){e.updateView(t)}};HasOperationPermissionDirective.prototype.updateView=function(e){if(e&&!this.hasView){this.viewContainerRef.createEmbeddedView(this.templateRef);this.hasView=true}else if(!e&&this.hasView){this.viewContainerRef.clear()}this.cdr.markForCheck()};__decorate([s.Input(),__metadata("design:type",Object)],HasOperationPermissionDirective.prototype,"seHasOperationPermission",void 0);HasOperationPermissionDirective=__decorate([s.Directive({selector:"[seHasOperationPermission]"}),__param(3,s.Inject(mn)),__metadata("design:paramtypes",[s.TemplateRef,s.ViewContainerRef,Kt,mn,o.LogService,s.ChangeDetectorRef])],HasOperationPermissionDirective);return HasOperationPermissionDirective}(da);var ua=function(){function HasOperationPermissionDirectiveModule(){}HasOperationPermissionDirectiveModule=__decorate([s.NgModule({declarations:[pa],exports:[pa]})],HasOperationPermissionDirectiveModule);return HasOperationPermissionDirectiveModule}();var ma=function(){function ClickOutsideDirective(e,t){this.host=e;this.iframeClickDetectionService=t;this.clickOutside=new s.EventEmitter;this.id="clickOutsideIframeClick"+B.generateIdentifier()}ClickOutsideDirective.prototype.onDocumentClick=function(e){if(e===this.host.nativeElement||this.host.nativeElement.contains(e)){return}this.clickOutside.emit()};ClickOutsideDirective.prototype.ngOnInit=function(){var e=this;this.iframeClickDetectionService.registerCallback(this.id,(function(){return e.onOutsideClick()}))};ClickOutsideDirective.prototype.ngOnDestroy=function(){this.iframeClickDetectionService.removeCallback(this.id)};ClickOutsideDirective.prototype.onOutsideClick=function(){this.clickOutside.emit()};__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],ClickOutsideDirective.prototype,"clickOutside",void 0);__decorate([s.HostListener("document:click",["$event.target"]),__metadata("design:type",Function),__metadata("design:paramtypes",[HTMLElement]),__metadata("design:returntype",void 0)],ClickOutsideDirective.prototype,"onDocumentClick",null);ClickOutsideDirective=__decorate([s.Directive({selector:"[seClickOutside]"}),__metadata("design:paramtypes",[s.ElementRef,dn])],ClickOutsideDirective);return ClickOutsideDirective}();var ga=function(){function ClickOutsideModule(){}ClickOutsideModule=__decorate([s.NgModule({imports:[u.CommonModule],declarations:[ma],exports:[ma]})],ClickOutsideModule);return ClickOutsideModule}();var ha=function(){function CustomComponentOutletDirective(e,t){this.elementRef=e;this.renderer=t;this.hasView=false}CustomComponentOutletDirective.prototype.ngOnChanges=function(){this.updateView(this.componentName)};CustomComponentOutletDirective.prototype.updateView=function(e){if(e&&!this.hasView){this.createView()}else if(!e&&this.hasView){this.removeView()}else if(e&&this.hasView){this.removeView();this.createView()}};CustomComponentOutletDirective.prototype.createView=function(){var e=window.__smartedit__.getComponentDecoratorPayload(this.componentName);this.component=this.renderer.createElement(e.selector);this.renderer.appendChild(this.elementRef.nativeElement,this.component);this.hasView=true};CustomComponentOutletDirective.prototype.removeView=function(){this.renderer.removeChild(this.elementRef.nativeElement,this.component);this.hasView=false};__decorate([s.Input("seCustomComponentOutlet"),__metadata("design:type",String)],CustomComponentOutletDirective.prototype,"componentName",void 0);CustomComponentOutletDirective=__decorate([s.Directive({selector:"[seCustomComponentOutlet]"}),__metadata("design:paramtypes",[s.ElementRef,s.Renderer2])],CustomComponentOutletDirective);return CustomComponentOutletDirective}();var va=function(){function CustomComponentOutletDirectiveModule(){}CustomComponentOutletDirectiveModule=__decorate([s.NgModule({declarations:[ha],exports:[ha]})],CustomComponentOutletDirectiveModule);return CustomComponentOutletDirectiveModule}();var fa=function(){function DataTableModule(){}DataTableModule=__decorate([s.NgModule({imports:[u.CommonModule,o.TranslationModule.forChild(),Nn],declarations:[Qr,Jr],entryComponents:[Qr,Jr],exports:[Qr,Jr]})],DataTableModule);return DataTableModule}();var _a=function(){YDropDownMenuComponent.$inject=["$templateCache"];function YDropDownMenuComponent(e){this.$templateCache=e}YDropDownMenuComponent.prototype.$onChanges=function(){var e=this;this.clonedDropdownItems=__spreadArrays(this.dropdownItems).map((function(e){return __assign(__assign({},e),{condition:e.condition||function(){return true}})})).map((function(t){return e.setTemplateUrl(t)}))};YDropDownMenuComponent.prototype.isDeleteButton=function(e){return e.key&&e.key.indexOf("remove")!==-1};YDropDownMenuComponent.prototype.isDeleteButton.$inject=["dropdownItem"];YDropDownMenuComponent.prototype.setTemplateUrl=function(e){switch(this._validatePassedAttribute(e)){case"callback":return __assign(__assign({},e),{templateUrl:"yDropdownDefaultItemTemplate.html"});case"template":return __assign(__assign({},e),{templateUrl:this._cacheDropdownItemTemplate(e),template:null});default:return e}};YDropDownMenuComponent.prototype.setTemplateUrl.$inject=["dropdownItem"];YDropDownMenuComponent.prototype._cacheDropdownItemTemplate=function(e){var t="yDropdownItem_"+B.getEncodedString(e.template)+"_Template.html";if(!this.$templateCache.get(t)){this.$templateCache.put(t,e.template)}return t};YDropDownMenuComponent.prototype._cacheDropdownItemTemplate.$inject=["dropdownItem"];YDropDownMenuComponent.prototype._validatePassedAttribute=function(e){var t={callback:"function",template:"string",templateUrl:"string"};var n=Object.keys(t);var i=Object.keys(e);var o=i.filter((function(e){return n.indexOf(e)!==-1}));if(o.length!==1){throw new Error("Please provide only one of callback, template or templateUrl.")}if(typeof e[o[0]]!==t[o[0]]){throw new Error("Please provide a parameter of a proper type: callback(Function), template(String) or templateUrl(String).")}return o[0]};YDropDownMenuComponent.prototype._validatePassedAttribute.$inject=["dropdownItem"];YDropDownMenuComponent=__decorate([SeComponent({selector:"y-drop-down-menu",templateUrl:"yDropDownMenuTemplate.html",inputs:["dropdownItems","selectedItem"]}),__metadata("design:paramtypes",[Object])],YDropDownMenuComponent);return YDropDownMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","DropdownMenuComponent",{selector:"se-dropdown-menu",template:'<fd-popover [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="placement || \'bottom-end\'" class="se-dropdown-more-menu"><fd-popover-control><div #toggleMenu><div *ngIf="!useProjectedAnchor; else projectedAnchor;" class="sap-icon--overflow se-dropdown-more-menu__toggle"></div><ng-template #projectedAnchor><ng-content></ng-content></ng-template></div></fd-popover-control><fd-popover-body><fd-menu><ul fd-menu-list class="se-dropdown-menu__list" [ngClass]="additionalClasses"><se-dropdown-menu-item *ngFor="let dropdownItem of clonedDropdownItems" [dropdownItem]="dropdownItem" [selectedItem]="selectedItem"></se-dropdown-menu-item></ul></fd-menu></fd-popover-body></fd-popover>'});var ya=function(){DropdownMenuComponent.$inject=["$templateCache","cd"];function DropdownMenuComponent(e,t){this.$templateCache=e;this.cd=t;this.useProjectedAnchor=false;this.isOpen=false;this.additionalClasses=[];this.isOpenChange=new s.EventEmitter}DropdownMenuComponent.prototype.clickHandler=function(e){if(this.toggleMenuElement.nativeElement.contains(e.target)){e.stopPropagation();this.isOpen=!this.isOpen;this.cd.detectChanges();this.emitIsOpenChange();return}if(this.isOpen){this.isOpen=false;this.cd.detectChanges();this.emitIsOpenChange();return}};DropdownMenuComponent.prototype.clickHandler.$inject=["event"];DropdownMenuComponent.prototype.ngOnChanges=function(e){var t=this;if(e.dropdownItems){this.clonedDropdownItems=this.dropdownItems.map((function(e){return __assign(__assign({},e),{condition:e.condition||function(){return true}})})).map((function(e){return t.setComponentOrTemplateUrl(e)}))}};DropdownMenuComponent.prototype.ngOnChanges.$inject=["changes"];DropdownMenuComponent.prototype.emitIsOpenChange=function(){this.isOpenChange.emit(this.isOpen)};DropdownMenuComponent.prototype.setComponentOrTemplateUrl=function(e){switch(this.validateDropdownItem(e)){case"callback":return __assign(__assign({},e),{component:No});case"template":return __assign(__assign({},e),{templateUrl:this.cacheDropdownItemTemplate(e),template:null});default:return e}};DropdownMenuComponent.prototype.setComponentOrTemplateUrl.$inject=["dropdownItem"];DropdownMenuComponent.prototype.cacheDropdownItemTemplate=function(e){var t="yDropdownItem_"+B.getEncodedString(e.template)+"_Template.html";if(!this.$templateCache.get(t)){this.$templateCache.put(t,e.template)}return t};DropdownMenuComponent.prototype.cacheDropdownItemTemplate.$inject=["dropdownItem"];DropdownMenuComponent.prototype.validateDropdownItem=function(e){var t=["callback","template","templateUrl","component"];var n=Object.keys(e);var i=n.filter((function(e){return t.indexOf(e)!==-1}));if(i.length!==1){throw new Error("DropdownMenuComponent.validateDropdownItem - Dropdown Item must contain at least a callback, template, templateUrl or component")}var o=i[0];return o};DropdownMenuComponent.prototype.validateDropdownItem.$inject=["dropdownItem"];__decorate([s.Input(),__metadata("design:type",Array)],DropdownMenuComponent.prototype,"dropdownItems",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DropdownMenuComponent.prototype,"selectedItem",void 0);__decorate([s.Input(),__metadata("design:type",String)],DropdownMenuComponent.prototype,"placement",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DropdownMenuComponent.prototype,"useProjectedAnchor",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DropdownMenuComponent.prototype,"isOpen",void 0);__decorate([s.Input(),__metadata("design:type",Array)],DropdownMenuComponent.prototype,"additionalClasses",void 0);__decorate([s.Output(),__metadata("design:type",Object)],DropdownMenuComponent.prototype,"isOpenChange",void 0);__decorate([s.ViewChild("toggleMenu",{static:true}),__metadata("design:type",s.ElementRef)],DropdownMenuComponent.prototype,"toggleMenuElement",void 0);__decorate([s.HostListener("document:click",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[MouseEvent]),__metadata("design:returntype",void 0)],DropdownMenuComponent.prototype,"clickHandler",null);DropdownMenuComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-dropdown-menu",template:'<fd-popover [triggers]="[]" [closeOnOutsideClick]="false" [isOpen]="isOpen" [placement]="placement || \'bottom-end\'" class="se-dropdown-more-menu"><fd-popover-control><div #toggleMenu><div *ngIf="!useProjectedAnchor; else projectedAnchor;" class="sap-icon--overflow se-dropdown-more-menu__toggle"></div><ng-template #projectedAnchor><ng-content></ng-content></ng-template></div></fd-popover-control><fd-popover-body><fd-menu><ul fd-menu-list class="se-dropdown-menu__list" [ngClass]="additionalClasses"><se-dropdown-menu-item *ngFor="let dropdownItem of clonedDropdownItems" [dropdownItem]="dropdownItem" [selectedItem]="selectedItem"></se-dropdown-menu-item></ul></fd-menu></fd-popover-body></fd-popover>'}),__metadata("design:paramtypes",[Tn,s.ChangeDetectorRef])],DropdownMenuComponent);return DropdownMenuComponent}();window.__smartedit__.addDecoratorPayload("Component","DropdownMenuItemComponent",{selector:"se-dropdown-menu-item",template:'<li *ngIf="dropdownItem.condition(selectedItem)" class="se-dropdown-menu__item-wrapper" [ngClass]="dropdownItem.customCss"><ng-container *ngIf="dropdownItem.component"><ng-container *ngComponentOutlet="dropdownItem.component; injector: dropdownItemInjector"></ng-container></ng-container><span *ngIf="dropdownItem.templateUrl" [ngInclude]="dropdownItem.templateUrl" [compileHtmlNgController]="compileHtmlNgController"></span></li>'});var Ca=function(){function DropdownMenuItemComponent(e){this.injector=e}DropdownMenuItemComponent.prototype.ngOnInit=function(){if(this.dropdownItem.templateUrl){this.createCompileHtmlNgController();return}if(this.dropdownItem.component){this.createDropdownItemInjector()}};DropdownMenuItemComponent.prototype.createCompileHtmlNgController=function(){var e=this.selectedItem;this.compileHtmlNgController={alias:"$ctrl",value:function(){this.selectedItem=e}}};DropdownMenuItemComponent.prototype.createDropdownItemInjector=function(){var e=this.selectedItem;this.dropdownItemInjector=s.Injector.create({parent:this.injector,providers:[{provide:xo,useValue:{dropdownItem:this.dropdownItem,selectedItem:e}}]})};__decorate([s.Input(),__metadata("design:type",Object)],DropdownMenuItemComponent.prototype,"dropdownItem",void 0);__decorate([s.Input(),__metadata("design:type",Object)],DropdownMenuItemComponent.prototype,"selectedItem",void 0);DropdownMenuItemComponent=__decorate([s.Component({selector:"se-dropdown-menu-item",template:'<li *ngIf="dropdownItem.condition(selectedItem)" class="se-dropdown-menu__item-wrapper" [ngClass]="dropdownItem.customCss"><ng-container *ngIf="dropdownItem.component"><ng-container *ngComponentOutlet="dropdownItem.component; injector: dropdownItemInjector"></ng-container></ng-container><span *ngIf="dropdownItem.templateUrl" [ngInclude]="dropdownItem.templateUrl" [compileHtmlNgController]="compileHtmlNgController"></span></li>'}),__metadata("design:paramtypes",[s.Injector])],DropdownMenuItemComponent);return DropdownMenuItemComponent}();var Sa=function(){function DropdownMenuModule(){}DropdownMenuModule=__decorate([s.NgModule({imports:[u.CommonModule,Gr,Nn,o.TranslationModule.forChild()],declarations:[ya,Ca,No],entryComponents:[ya,No],exports:[ya]})],DropdownMenuModule);return DropdownMenuModule}();var ba=function(){function LegacyDynamicPagedListComponent(){}LegacyDynamicPagedListComponent.prototype.internalGetApi=function(e){this.getApi({$api:e})};LegacyDynamicPagedListComponent.prototype.internalGetApi.$inject=["$api"];LegacyDynamicPagedListComponent=__decorate([SeComponent({selector:"dynamic-paged-list",templateUrl:"legacyDynamicPagedListTemplate.html",inputs:["config:=","mask:=?","getApi:&?","onItemsUpdate:&?"]})],LegacyDynamicPagedListComponent);return LegacyDynamicPagedListComponent}();window.__smartedit__.addDecoratorPayload("Component","DynamicPagedListComponent",{selector:"se-dynamic-paged-list",template:'<div *ngIf="ready" class="se-dynamic-paged-list"><div class="fd-panel__body fd-panel__body--bleed"><se-data-table [columns]="columns" [config]="config" [items]="items" [sortStatus]="sortStatus" (onSortColumn)="orderByColumn($event)"></se-data-table></div><div class="fd-panel__footer"><se-pagination *ngIf="!!items.length" class="se-dynamic-list__pagination" [totalItems]="totalItems" [itemsPerPage]="config.itemsPerPage" [currentPage]="currentPage" (onChange)="onCurrentPageChange($event)"></se-pagination><span class="se-paged-list__page-count-wrapper se-paged-list__page-count-wrapper--footer"><span class="span-page-list__page-count-text">{{\'se.pagelist.countsearchresult\' | translate}} </span><span class="se-page-list__page-count">({{ totalItems }})</span></span></div></div><se-spinner [isSpinning]="!ready"></se-spinner>'});var Ia=function(){DynamicPagedListComponent.$inject=["logService","restServiceFactory","cdr"];function DynamicPagedListComponent(e,t,n){var i=this;this.logService=e;this.restServiceFactory=t;this.cdr=n;this.getApi=new s.EventEmitter;this.onItemsUpdate=new s.EventEmitter;this.api={reloadItems:function(){return i.loadItems()}}}DynamicPagedListComponent.prototype.ngOnInit=function(){this._validateInput();this.ready=false;this.totalItems=0;this.currentPage=1;this.columnSortMode=this.config.reversed?t.SortDirections.Descending:t.SortDirections.Ascending;this.internalSortBy=a.cloneDeep(this.config.sortBy);this.oldMask=this.mask;this.columns=[];this.sortStatus={internalSortBy:this.internalSortBy,reversed:this.config.reversed,currentPage:this.currentPage};this._buildColumnData();this.loadItems();this.getApi.emit(this.api)};DynamicPagedListComponent.prototype.ngOnChanges=function(e){var t=e.mask;if(!!t&&!t.firstChange&&this.oldMask!==this.mask){this.oldMask=this.mask;this.currentPage=1;this.loadItems()}};DynamicPagedListComponent.prototype.ngOnChanges.$inject=["changes"];DynamicPagedListComponent.prototype.orderByColumn=function(e){this.internalSortBy=e.$columnKey.property;this.columnSortMode=e.$columnSortMode;this.config.reversed=this.columnSortMode===t.SortDirections.Descending;this.sortStatus.internalSortBy=this.internalSortBy;this.sortStatus.reversed=this.config.reversed;if(e.$columnKey.sortable){this.currentPage=1;this.sortStatus.currentPage=1;this.loadItems()}};DynamicPagedListComponent.prototype.orderByColumn.$inject=["event"];DynamicPagedListComponent.prototype.loadItems=function(){var e=this;this.ready=false;var t=__assign(__assign({},this.config.queryParams||{}),{currentPage:this.currentPage-1,mask:this.mask,pageSize:this.config.itemsPerPage,sort:this.internalSortBy+":"+this.columnSortMode});return this.restServiceFactory.get(this.config.uri).page(t).then((function(t){e.items=t.results;if(e.items.length===0){e.logService.warn("PagedList: No items returned to display")}e.totalItems=t.pagination.totalCount;e.currentPage=parseInt(String(t.pagination.page),10)+1;e.ready=true;e.cdr.detectChanges();e.onItemsUpdate.emit(t);return t}))};DynamicPagedListComponent.prototype.onCurrentPageChange=function(e){if(e===this.currentPage){return}this.currentPage=e;this.loadItems()};DynamicPagedListComponent.prototype.onCurrentPageChange.$inject=["newCurrentPage"];DynamicPagedListComponent.prototype._validateInput=function(){if(!this.config){throw new Error("config object is required")}if(!(this.config.keys instanceof Array)){throw new Error("keys must be an array")}if(this.config.keys.length<1){throw new Error("dynamic paged list requires at least one key")}if(!this.config.uri){throw new Error("dynamic paged list requires a uri to fetch the list of items")}};DynamicPagedListComponent.prototype._buildColumnData=function(){var e=this;this.columns=this.config.keys.map((function(t){return __assign(__assign({},t),{renderer:e.config.renderers[t.property]})}))};__decorate([s.Input(),__metadata("design:type",Object)],DynamicPagedListComponent.prototype,"config",void 0);__decorate([s.Input(),__metadata("design:type",String)],DynamicPagedListComponent.prototype,"mask",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],DynamicPagedListComponent.prototype,"getApi",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],DynamicPagedListComponent.prototype,"onItemsUpdate",void 0);DynamicPagedListComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-dynamic-paged-list",template:'<div *ngIf="ready" class="se-dynamic-paged-list"><div class="fd-panel__body fd-panel__body--bleed"><se-data-table [columns]="columns" [config]="config" [items]="items" [sortStatus]="sortStatus" (onSortColumn)="orderByColumn($event)"></se-data-table></div><div class="fd-panel__footer"><se-pagination *ngIf="!!items.length" class="se-dynamic-list__pagination" [totalItems]="totalItems" [itemsPerPage]="config.itemsPerPage" [currentPage]="currentPage" (onChange)="onCurrentPageChange($event)"></se-pagination><span class="se-paged-list__page-count-wrapper se-paged-list__page-count-wrapper--footer"><span class="span-page-list__page-count-text">{{\'se.pagelist.countsearchresult\' | translate}} </span><span class="se-page-list__page-count">({{ totalItems }})</span></span></div></div><se-spinner [isSpinning]="!ready"></se-spinner>'}),__metadata("design:paramtypes",[o.LogService,o.RestServiceFactory,s.ChangeDetectorRef])],DynamicPagedListComponent);return DynamicPagedListComponent}();window.__smartedit__.addDecoratorPayload("Component","PaginationComponent",{selector:"se-pagination",template:'<fd-pagination class="se-pagination" [displayTotalItems]="displayTotalItems" [totalItems]="totalItems" [itemsPerPage]="totalItems === 1 ? 1 : itemsPerPage" [currentPage]="currentPage" (pageChangeStart)="onPageChanged($event)" nextLabel="&rsaquo; " previousLabel="&lsaquo; "></fd-pagination>'});var wa=function(){function PaginationComponent(){this.displayTotalItems=false;this.onChange=new s.EventEmitter}PaginationComponent.prototype.onPageChanged=function(e){this.currentPage=e;this.onChange.emit(e)};PaginationComponent.prototype.onPageChanged.$inject=["page"];__decorate([s.Input(),__metadata("design:type",Number)],PaginationComponent.prototype,"totalItems",void 0);__decorate([s.Input(),__metadata("design:type",Object)],PaginationComponent.prototype,"displayTotalItems",void 0);__decorate([s.Input(),__metadata("design:type",Number)],PaginationComponent.prototype,"itemsPerPage",void 0);__decorate([s.Input(),__metadata("design:type",Number)],PaginationComponent.prototype,"currentPage",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],PaginationComponent.prototype,"onChange",void 0);PaginationComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-pagination",template:'<fd-pagination class="se-pagination" [displayTotalItems]="displayTotalItems" [totalItems]="totalItems" [itemsPerPage]="totalItems === 1 ? 1 : itemsPerPage" [currentPage]="currentPage" (pageChangeStart)="onPageChanged($event)" nextLabel="&rsaquo; " previousLabel="&lsaquo; "></fd-pagination>'})],PaginationComponent);return PaginationComponent}();var Ea=function(){function PaginationModule(){}PaginationModule=__decorate([s.NgModule({imports:[Gr],declarations:[wa],exports:[wa]})],PaginationModule);return PaginationModule}();var Pa=function(){function DynamicPagedListModule(){}DynamicPagedListModule=__decorate([s.NgModule({imports:[u.CommonModule,Ea,fa,o.TranslationModule.forChild(),mr],declarations:[Ia],entryComponents:[Ia],exports:[Ia]})],DynamicPagedListModule);return DynamicPagedListModule}();var Ta=function(){function TreeNestedDataSource(){this._data=new g.BehaviorSubject([])}TreeNestedDataSource.prototype.get=function(){return this._data.asObservable()};TreeNestedDataSource.prototype.set=function(e){this._data.next(e)};return TreeNestedDataSource}();var Aa=function(){function TreeNodeItem(e){this.position=0;this.nodes=[];this.hasChildren=e.hasChildren;this.name=e.name;this.title=e.title;this.parentUid=e.parentUid;this.position=e.position;this.itemType=e.itemType;this.uid=e.uid;this.uuid=e.uuid;this.level=e.level;this.nodes=[]}TreeNodeItem.prototype.setPosition=function(e){this.position=e;return this};TreeNodeItem.prototype.setMouseHovered=function(e){this.mouseHovered=e;return this};TreeNodeItem.prototype.setInitiated=function(e){this.initiated=e;return this};TreeNodeItem.prototype.setLevel=function(e){this.level=e;return this};TreeNodeItem.prototype.addNode=function(e){var t=this;this.nodes=__spreadArrays(this.nodes,[e.setParent(this)]).map((function(e,n){return e.setPosition(n).setLevel(t.level+1)}));this.updateHasChildren();return this};TreeNodeItem.prototype.addNodes=function(e){var t=this;this.nodes=__spreadArrays(this.nodes,e.map((function(e){return e.setParent(t)}))).map((function(e,n){return e.setPosition(n).setLevel(t.level+1)}));this.updateHasChildren();return this};TreeNodeItem.prototype.removeAllNodes=function(){this.nodes=[];this.updateHasChildren();return this};TreeNodeItem.prototype.removeNode=function(e){this.nodes=this.nodes.filter((function(t){return t.uid!==e.uid})).map((function(e,t){return e.setPosition(t)}));this.updateHasChildren();return this};TreeNodeItem.prototype.setParent=function(e){this.parent=e;this.parentUid=e.uid;return this};TreeNodeItem.prototype.toggle=function(){this.isExpanded=!this.isExpanded;return this};TreeNodeItem.prototype.collapse=function(){this.isExpanded=false;return this};TreeNodeItem.prototype.expand=function(){this.isExpanded=true;return this};TreeNodeItem.prototype.collapseAll=function(){var e=this;this.nodes.forEach((function(t){return e.collapseRecursively(t)}))};TreeNodeItem.prototype.expandAll=function(){var e=this;this.nodes.forEach((function(t){return e.expandRecursively(t)}))};TreeNodeItem.prototype.collapseRecursively=function(e){var t=this;e.collapse().nodes.forEach((function(e){return t.collapseRecursively(e)}))};TreeNodeItem.prototype.expandRecursively=function(e){var t=this;e.expand().nodes.forEach((function(e){return t.expandRecursively(e)}))};TreeNodeItem.prototype.updateHasChildren=function(){this.hasChildren=!!this.nodes.length};return TreeNodeItem}();var Da=function(e){__extends(NavigationNodeItem,e);function NavigationNodeItem(t){var n=e.call(this,t)||this;n.entries=t.entries;return n}return NavigationNodeItem}(Aa);var Oa;(function(e){e["CMSNavigationNode"]="CMSNavigationNode"})(Oa||(Oa={}));var Ra=function(){function TreeNodeItemFactory(){}TreeNodeItemFactory.prototype.get=function(e){switch(e.itemType){case Oa.CMSNavigationNode:return new Da(e);default:return new Aa(e)}};TreeNodeItemFactory.prototype.get.$inject=["dto"];TreeNodeItemFactory=__decorate([SeDowngradeService()],TreeNodeItemFactory);return TreeNodeItemFactory}();var Ma=function(){TreeService.$inject=["restServiceFactory","treeNodeItemFactory"];function TreeService(e,t){this.restServiceFactory=e;this.treeNodeItemFactory=t;this.dataSource=new Ta;this.$onTreeUpdated=new g.BehaviorSubject(false)}TreeService.prototype.onTreeUpdated=function(){return this.$onTreeUpdated.pipe(f.filter((function(e){return!!e})))};TreeService.prototype.init=function(e,t){if(e){this.nodesRestService=this.restServiceFactory.get(e)}this.setRoot(t)};TreeService.prototype.init.$inject=["nodeUri","rootNodeUid"];TreeService.prototype.rearrange=function(e,t,n){var i=t.nodes.filter((function(t){return t.uid!==e.uid}));var o=__spreadArrays(i.slice(0,n),[e],i.slice(n,i.length));e.parent.removeNode(e);t.removeAllNodes().addNodes(o);this.update()};TreeService.prototype.rearrange.$inject=["node","parent","position"];TreeService.prototype.fetchChildren=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;var o=this;return __generator(this,(function(r){switch(r.label){case 0:t=e||this.root;if(!t.initiated)return[3,1];this.update();return[2,Promise.resolve(t.nodes)];case 1:return[4,this.nodesRestService.get({parentUid:t.uid})];case 2:n=r.sent();i=(G.getDataFromResponse(n)||[]).map((function(e){return o.treeNodeItemFactory.get(e)}));t.removeAllNodes().addNodes(i).setInitiated(true);this.update();return[2,i]}}))}))};TreeService.prototype.fetchChildren.$inject=["_parent"];TreeService.prototype.toggle=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){e.toggle();return[2,this.fetchChildren(e)]}))}))};TreeService.prototype.toggle.$inject=["node"];TreeService.prototype.newChild=function(e){return __awaiter(this,void 0,void 0,(function(){var t,n,i;return __generator(this,(function(o){switch(o.label){case 0:t=e||this.root;return[4,this.saveNode(t)];case 1:n=o.sent();if(!t.isExpanded){this.toggle(t)}else{i=t.nodes.find((function(e){return e.uid===n.uid}));if(!i){t.addNode(this.treeNodeItemFactory.get(n));this.update()}}return[2]}}))}))};TreeService.prototype.newChild.$inject=["node"];TreeService.prototype.newSibling=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.saveNode(e.parent)];case 1:t=n.sent();e.parent.addNode(this.treeNodeItemFactory.get(t));this.update();return[2]}}))}))};TreeService.prototype.newSibling.$inject=["node"];TreeService.prototype.removeNode=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.nodesRestService.remove({identifier:e.uid})];case 1:t.sent();e.parent.removeNode(e);this.update();return[2]}}))}))};TreeService.prototype.removeNode.$inject=["node"];TreeService.prototype.update=function(){this.dataSource.set(null);this.dataSource.set(this.root.nodes);this.$onTreeUpdated.next(true)};TreeService.prototype.expandAll=function(){this.root.expandAll();this.update()};TreeService.prototype.collapseAll=function(){this.root.collapseAll();this.update()};TreeService.prototype.getNodePositionById=function(e){return this.getNodeById(e).position};TreeService.prototype.getNodePositionById.$inject=["nodeUid"];TreeService.prototype.getNodeById=function(e,t){if(e===this.root.uid){return this.root}var n=t||this.root.nodes;for(var i in n){if(n.hasOwnProperty(i)){if(n[i].uid===e){return n[i]}if(n[i].hasChildren){n[i].nodes=n[i].nodes||[];var o=this.getNodeById(e,n[i].nodes);if(o){return o}}}}return null};TreeService.prototype.getNodeById.$inject=["nodeUid","nodeArray"];TreeService.prototype.saveNode=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return[4,this.nodesRestService.save({parentUid:e.uid,name:(e.name?e.name:e.uid)+e.nodes.length})];case 1:t=n.sent();return[2,t]}}))}))};TreeService.prototype.saveNode.$inject=["_parent"];TreeService.prototype.setRoot=function(e){this.root=this.treeNodeItemFactory.get({uid:e,name:"root",level:0})};TreeService.prototype.setRoot.$inject=["uid"];TreeService=__decorate([s.Injectable(),__metadata("design:paramtypes",[o.RestServiceFactory,Ra])],TreeService);return TreeService}();var xa=function(){function TreeDragAndDropEvent(e,t,n,i,o){this.sourceNode=e;this.destinationNodes=t;this.sourceParentNode=n;this.destinationParentNode=i;this.position=o}return TreeDragAndDropEvent}();var Na=new s.InjectionToken("TREE_NODE");var ka=function(){TreeDragAndDropService.$inject=["confirmationModalService","alertService","treeService"];function TreeDragAndDropService(e,t,n){this.confirmationModalService=e;this.alertService=t;this.treeService=n}TreeDragAndDropService.prototype.init=function(e){this.config=e;this.isDragEnabled=!!e&&(!!e.onDropCallback||!!e.beforeDropCallback||!!e.allowDropCallback)};TreeDragAndDropService.prototype.init.$inject=["options"];TreeDragAndDropService.prototype.handleDrop=function(e){var t=this;if(!this.config||!e.isPointerOverContainer){return Promise.resolve()}if(!this.allowDrop(e)){return Promise.resolve()}return this.beforeDrop(e).then((function(n){if(n===false){return}t.onDrop(e);t.rearrangeNodes(e)}))};TreeDragAndDropService.prototype.handleDrop.$inject=["event"];TreeDragAndDropService.prototype.rearrangeNodes=function(e){this.treeService.rearrange(e.item.data,e.container.data[0].parent,e.currentIndex)};TreeDragAndDropService.prototype.rearrangeNodes.$inject=["event"];TreeDragAndDropService.prototype.onDrop=function(e){if(!this.config.onDropCallback){return}var t=new xa(e.item.data,e.container.data,e.item.data.parent,e.container.data[0].parent,e.currentIndex);return this.config.onDropCallback(t)};TreeDragAndDropService.prototype.onDrop.$inject=["event"];TreeDragAndDropService.prototype.allowDrop=function(e){if(!this.config.allowDropCallback){return true}return this.config.allowDropCallback(new xa(e.item.data,e.container.data,e.item.data.parent,e.container.data[0].parent,e.currentIndex))};TreeDragAndDropService.prototype.allowDrop.$inject=["event"];TreeDragAndDropService.prototype.beforeDrop=function(e){var t=this;if(!this.config.beforeDropCallback){return Promise.resolve()}var n=new xa(e.item.data,e.container.data,e.item.data.parent,e.container.data[0].parent,e.currentIndex);return this.config.beforeDropCallback(n).then((function(e){if(typeof e==="object"){if(e.confirmDropI18nKey){var n={description:e.confirmDropI18nKey};return t.confirmationModalService.confirm(n)}if(e.rejectDropI18nKey){t.alertService.showDanger({message:e.rejectDropI18nKey});return false}throw new Error("Unexpected return value for beforeDropCallback does not contain confirmDropI18nKey nor rejectDropI18nKey: "+e)}return e}))};TreeDragAndDropService.prototype.beforeDrop.$inject=["event"];TreeDragAndDropService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[_n,un,Ma])],TreeDragAndDropService);return TreeDragAndDropService}();window.__smartedit__.addDecoratorPayload("Component","TreeComponent",{selector:"se-tree",providers:[Ma,ka,Ra],host:{class:"se-tree"},template:'<div class="categoryTable se-tree"><div class="se-tree__body"><div class="desktopLayout"><ol class="se-tree__nodes"><li *ngIf="(this.treeService.dataSource.get() | async).length === 0" class="se-tree__nodes--nodata">{{ \'se.ytree.no.nodes.to.display\' | translate }}</li><li class="se-tree__nodes--item"><se-tree-node [source]="this.treeService.dataSource.get() | async"></se-tree-node></li></ol></div></div></div>'});var Fa=function(){TreeComponent.$inject=["treeService","treeDragAndDropService"];function TreeComponent(e,t){this.treeService=e;this.treeDragAndDropService=t;this.onTreeUpdated=new s.EventEmitter}TreeComponent.prototype.ngOnInit=function(){var e=this;this.setNodeActions();this.treeService.init(this.nodeUri,this.rootNodeUid);this.treeDragAndDropService.init(this.dragOptions);this.fetchData(this.treeService.root);this.treeService.onTreeUpdated().subscribe((function(){return e.onTreeUpdated.emit(e.treeService.root.nodes)}))};TreeComponent.prototype.fetchData=function(e){return this.treeService.fetchChildren(e)};TreeComponent.prototype.fetchData.$inject=["nodeData"];TreeComponent.prototype.hasChildren=function(e){return e.hasChildren};TreeComponent.prototype.hasChildren.$inject=["node"];TreeComponent.prototype.collapseAll=function(){this.treeService.collapseAll()};TreeComponent.prototype.expandAll=function(){this.treeService.expandAll()};TreeComponent.prototype.remove=function(e){this.treeService.removeNode(e)};TreeComponent.prototype.remove.$inject=["node"];TreeComponent.prototype.newSibling=function(e){this.treeService.newSibling(e)};TreeComponent.prototype.newSibling.$inject=["node"];TreeComponent.prototype.refresh=function(e){e.setInitiated(false);return this.treeService.fetchChildren(e)};TreeComponent.prototype.refresh.$inject=["node"];TreeComponent.prototype.refreshParent=function(e){this.refresh(e.parent)};TreeComponent.prototype.refreshParent.$inject=["node"];TreeComponent.prototype.newChild=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){this.treeService.newChild(e);return[2]}))}))};TreeComponent.prototype.newChild.$inject=["node"];TreeComponent.prototype.getNodeById=function(e,t){return this.treeService.getNodeById(e,t)};TreeComponent.prototype.getNodeById.$inject=["nodeUid","nodeArray"];Object.defineProperty(TreeComponent.prototype,"dragEnabled",{get:function(){return this.treeDragAndDropService.isDragEnabled},enumerable:false,configurable:true});TreeComponent.prototype.setNodeActions=function(){var e=this;Object.keys(this.nodeActions).forEach((function(t){e[t]=e.nodeActions[t].bind(e,e.treeService);e.nodeActions[t]=e.nodeActions[t].bind(e,e.treeService)}))};__decorate([s.Input(),__metadata("design:type",String)],TreeComponent.prototype,"nodeTemplateUrl",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],TreeComponent.prototype,"nodeComponent",void 0);__decorate([s.Input(),__metadata("design:type",String)],TreeComponent.prototype,"nodeUri",void 0);__decorate([s.Input(),__metadata("design:type",Object)],TreeComponent.prototype,"nodeActions",void 0);__decorate([s.Input(),__metadata("design:type",String)],TreeComponent.prototype,"rootNodeUid",void 0);__decorate([s.Input(),__metadata("design:type",Object)],TreeComponent.prototype,"dragOptions",void 0);__decorate([s.Input(),__metadata("design:type",String)],TreeComponent.prototype,"removeDefaultTemplate",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],TreeComponent.prototype,"showAsList",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],TreeComponent.prototype,"onTreeUpdated",void 0);TreeComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-tree",providers:[Ma,ka,Ra],host:{class:"se-tree"},template:'<div class="categoryTable se-tree"><div class="se-tree__body"><div class="desktopLayout"><ol class="se-tree__nodes"><li *ngIf="(this.treeService.dataSource.get() | async).length === 0" class="se-tree__nodes--nodata">{{ \'se.ytree.no.nodes.to.display\' | translate }}</li><li class="se-tree__nodes--item"><se-tree-node [source]="this.treeService.dataSource.get() | async"></se-tree-node></li></ol></div></div></div>'}),__metadata("design:paramtypes",[Ma,ka])],TreeComponent);return TreeComponent}();window.__smartedit__.addDecoratorPayload("Component","TreeNodeComponent",{selector:"se-tree-node",template:'<ol class="se-tree-node__ol angular-ui-tree-nodes" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="source" [cdkDropListDisabled]="isDisabled"><li *ngFor="let node of source" cdkDrag [cdkDragData]="node" class="angular-ui-tree-node se-tree-node__li"><se-tree-node-renderer [node]="node"></se-tree-node-renderer></li></ol>'});var za=function(){function TreeNodeComponent(e){this.treeDragAndDropService=e}Object.defineProperty(TreeNodeComponent.prototype,"isDisabled",{get:function(){return!this.treeDragAndDropService.isDragEnabled},enumerable:false,configurable:true});TreeNodeComponent.prototype.onDrop=function(e){this.treeDragAndDropService.handleDrop(e)};__decorate([s.Input(),__metadata("design:type",Array)],TreeNodeComponent.prototype,"source",void 0);TreeNodeComponent=__decorate([s.Component({selector:"se-tree-node",template:'<ol class="se-tree-node__ol angular-ui-tree-nodes" cdkDropList (cdkDropListDropped)="onDrop($event)" [cdkDropListData]="source" [cdkDropListDisabled]="isDisabled"><li *ngFor="let node of source" cdkDrag [cdkDragData]="node" class="angular-ui-tree-node se-tree-node__li"><se-tree-node-renderer [node]="node"></se-tree-node-renderer></li></ol>'}),__metadata("design:paramtypes",[ka])],TreeNodeComponent);return TreeNodeComponent}();var La=20;window.__smartedit__.addDecoratorPayload("Component","TreeNodeRendererComponent",{selector:"se-tree-node-renderer",template:'<div class="tree-node tree-node-content se-tree-node angular-ui-tree-handle" [ngClass]="{\n        \'hovered\': node.mouseHovered,\n        \'se-tree-node--first-level\': isRootNodeDescendant,\n        \'se-tree-node--selected\': !collapsed\n    }" [ngStyle]="{\n        \'padding-left\': getPaddingLeft(node.level)\n    }" [attr.level]="node.level" (mouseover)="onMouseOver()" (mouseout)="onMouseOut()"><div *ngIf="!showAsList" class="se-tree-node__expander--wrapper col-xs-1 text-center"><a class="se-tree-node__expander btn btn-link btn-sm" *ngIf="node.hasChildren" [attr.disabled]="isDisabled || null" (click)="toggle($event)"><span [ngClass]="{\n                    \'sap-icon--slim-arrow-right\': collapsed,\n                    \'sap-icon--slim-arrow-down\': !collapsed\n                }"></span></a></div><div *ngIf="displayDefaultTemplate" class="se-tree-node__name col-xs-5" [attr.title]="node.title | seL10n | async "><span>{{node.name}}</span><h6 *ngIf="node.title">{{node.title | seL10n | async }}</h6></div><div [ngStyle]="{\'width\': \'100%\'}" *ngIf="tree.nodeTemplateUrl" [ngInclude]="tree.nodeTemplateUrl" [scope]="{node: node}" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="tree.nodeComponent"><ng-container *ngComponentOutlet="tree.nodeComponent; injector: nodeComponentInjector"></ng-container></ng-container></div><se-tree-node [source]="node.nodes" *ngIf="node.nodes.length && node.isExpanded"></se-tree-node>'});var Va=function(){function TreeNodeRendererComponent(e,t,n){this.tree=e;this.treeService=t;this.injector=n}TreeNodeRendererComponent.prototype.ngOnInit=function(){this.createNodeComponentInjector()};TreeNodeRendererComponent.prototype.ngOnChanges=function(e){if(e.node){this.createNodeComponentInjector();this.createNodeLegacyController()}};TreeNodeRendererComponent.prototype.toggle=function(e){var t=this;e.stopPropagation();e.preventDefault();this.tree.isDropDisabled=true;this.treeService.toggle(this.node).then((function(){t.tree.isDropDisabled=false}))};TreeNodeRendererComponent.prototype.onMouseOver=function(){this.node.setMouseHovered(true);this.treeService.update()};TreeNodeRendererComponent.prototype.onMouseOut=function(){this.node.setMouseHovered(false);this.treeService.update()};TreeNodeRendererComponent.prototype.getPaddingLeft=function(e){return(e-1)*La+"px"};Object.defineProperty(TreeNodeRendererComponent.prototype,"showAsList",{get:function(){return this.tree.showAsList},enumerable:false,configurable:true});Object.defineProperty(TreeNodeRendererComponent.prototype,"isDisabled",{get:function(){return this.tree.isDropDisabled},enumerable:false,configurable:true});Object.defineProperty(TreeNodeRendererComponent.prototype,"collapsed",{get:function(){return!this.node.isExpanded},enumerable:false,configurable:true});Object.defineProperty(TreeNodeRendererComponent.prototype,"displayDefaultTemplate",{get:function(){return!this.tree.removeDefaultTemplate},enumerable:false,configurable:true});Object.defineProperty(TreeNodeRendererComponent.prototype,"isRootNodeDescendant",{get:function(){return this.node.parentUid==="root"},enumerable:false,configurable:true});TreeNodeRendererComponent.prototype.createNodeLegacyController=function(){var e=this;this.legacyController={value:function(){return e.tree},alias:"$ctrl"}};TreeNodeRendererComponent.prototype.createNodeComponentInjector=function(){this.nodeComponentInjector=s.Injector.create({providers:[{provide:Na,useValue:this.node}],parent:this.injector})};__decorate([s.Input(),__metadata("design:type",Object)],TreeNodeRendererComponent.prototype,"node",void 0);TreeNodeRendererComponent=__decorate([s.Component({selector:"se-tree-node-renderer",template:'<div class="tree-node tree-node-content se-tree-node angular-ui-tree-handle" [ngClass]="{\n        \'hovered\': node.mouseHovered,\n        \'se-tree-node--first-level\': isRootNodeDescendant,\n        \'se-tree-node--selected\': !collapsed\n    }" [ngStyle]="{\n        \'padding-left\': getPaddingLeft(node.level)\n    }" [attr.level]="node.level" (mouseover)="onMouseOver()" (mouseout)="onMouseOut()"><div *ngIf="!showAsList" class="se-tree-node__expander--wrapper col-xs-1 text-center"><a class="se-tree-node__expander btn btn-link btn-sm" *ngIf="node.hasChildren" [attr.disabled]="isDisabled || null" (click)="toggle($event)"><span [ngClass]="{\n                    \'sap-icon--slim-arrow-right\': collapsed,\n                    \'sap-icon--slim-arrow-down\': !collapsed\n                }"></span></a></div><div *ngIf="displayDefaultTemplate" class="se-tree-node__name col-xs-5" [attr.title]="node.title | seL10n | async "><span>{{node.name}}</span><h6 *ngIf="node.title">{{node.title | seL10n | async }}</h6></div><div [ngStyle]="{\'width\': \'100%\'}" *ngIf="tree.nodeTemplateUrl" [ngInclude]="tree.nodeTemplateUrl" [scope]="{node: node}" [compileHtmlNgController]="legacyController"></div><ng-container *ngIf="tree.nodeComponent"><ng-container *ngComponentOutlet="tree.nodeComponent; injector: nodeComponentInjector"></ng-container></ng-container></div><se-tree-node [source]="node.nodes" *ngIf="node.nodes.length && node.isExpanded"></se-tree-node>'}),__param(0,s.Inject(s.forwardRef((function(){return Fa})))),__metadata("design:paramtypes",[Fa,Ma,s.Injector])],TreeNodeRendererComponent);return TreeNodeRendererComponent}();var $a=function(){function NgTreeModule(){}NgTreeModule=__decorate([s.NgModule({imports:[Nn,C.DragDropModule,u.CommonModule,ir,o.TranslationModule.forChild()],declarations:[Fa,Va,za],exports:[Fa,za],entryComponents:[Fa,Va]})],NgTreeModule);return NgTreeModule}();var Ua=function(e){__extends(EditableListNodeItem,e);function EditableListNodeItem(t){var n=e.call(this,t)||this;n.thumbnail=t.thumbnail||{};n.id=t.id;n.code=t.code;n.catalogId=t.catalogId;n.catalogVersion=t.catalogVersion;return n}return EditableListNodeItem}(Aa);window.__smartedit__.addDecoratorPayload("Component","EditableListDefaultItem",{selector:"se-editable-list-default-item",template:'\n        <div>\n            <span>{{ node.uid }}</span>\n            <se-dropdown-menu\n                *ngIf="parent.editable"\n                [dropdownItems]="parent.getDropdownItems()"\n                [selectedItem]="node"\n                class="pull-right se-tree-node__actions--more-menu"\n            ></se-dropdown-menu>\n        </div>\n    '});var ja=function(){function EditableListDefaultItem(e,t){this.parent=e;this.node=t}EditableListDefaultItem=__decorate([s.Component({selector:"se-editable-list-default-item",template:'\n        <div>\n            <span>{{ node.uid }}</span>\n            <se-dropdown-menu\n                *ngIf="parent.editable"\n                [dropdownItems]="parent.getDropdownItems()"\n                [selectedItem]="node"\n                class="pull-right se-tree-node__actions--more-menu"\n            ></se-dropdown-menu>\n        </div>\n    '}),__param(0,s.Inject(s.forwardRef((function(){return Ba})))),__param(1,s.Inject(Na)),__metadata("design:paramtypes",[Ba,Object])],EditableListDefaultItem);return EditableListDefaultItem}();window.__smartedit__.addDecoratorPayload("Component","EditableListComponent",{selector:"se-editable-list",template:'<div [ngClass]="{ \'y-editable-list-disabled\': !editable, \'se-editable-list-disabled\': !editable }"><se-tree (onTreeUpdated)="handleTreeUpdated($event)" [removeDefaultTemplate]="true" [rootNodeUid]="rootId" [nodeTemplateUrl]="itemTemplateUrl" [nodeComponent]="itemComponent" [nodeActions]="actions" [dragOptions]="dragOptions" [showAsList]="true"></se-tree></div>'});var Ba=function(){function EditableListComponent(){this.refreshChange=new s.EventEmitter;this.itemsChange=new s.EventEmitter;this.dragOptions={};this.itemsOld=[]}EditableListComponent.prototype.ngOnInit=function(){var e=this;this._enableDragAndDrop=function(){e.dragOptions.allowDropCallback=function(t){return t.sourceNode.parentUid===e.rootId}};this.actions=this.getTreeActions();this.refreshChange.emit((function(){return e.actions.refreshList()}));if(!this.itemTemplateUrl&&!this.itemComponent){this.itemComponent=ja}this.rootId="root"+this.id;if(this.editable===undefined){this.editable=true}if(this.editable===true){this._enableDragAndDrop()}};EditableListComponent.prototype.handleTreeUpdated=function(e){if(this.hasItemsChanged(this.itemsOld,e)){this.itemsOld=e;this.itemsChange.emit(e);this.actions.performUpdate()}};EditableListComponent.prototype.handleTreeUpdated.$inject=["items"];EditableListComponent.prototype.getDropdownItems=function(){var e=this;return[{key:"se.ydropdownmenu.remove",callback:function(t){e.actions.removeItem(t)}},{key:"se.ydropdownmenu.move.up",condition:function(t){return e.actions.isMoveUpAllowed(t)},callback:function(t){e.actions.moveUp(t)}},{key:"se.ydropdownmenu.move.down",condition:function(t){return e.actions.isMoveDownAllowed(t)},callback:function(t){e.actions.moveDown(t)}}]};EditableListComponent.prototype.hasItemsChanged=function(e,t){var n=e.map((function(e){var t=e.uid;return t}));var i=t.map((function(e){var t=e.uid;return t}));return!a.isEqual(n,i)};EditableListComponent.prototype.hasItemsChanged.$inject=["oldItems","newItems"];EditableListComponent.prototype.getTreeActions=function(){var e=this;var t=this.getDropdownItems();return{fetchData:function(t,n){var i=e.items.map((function(e){return new Ua(e)}));i.forEach((function(e){if(e.id&&!e.uid){e.uid=e.id}e.setParent(n)}));n.removeAllNodes().addNodes(i);t.update();return Promise.resolve(n)},getDropdownItems:function(){return t},removeItem:function(e,t){t.parent.removeNode(t);e.update()},moveUp:function(e,t){e.rearrange(t,e.root,t.position-1)},moveDown:function(e,t){e.rearrange(t,e.root,t.position+1)},isMoveUpAllowed:function(e,t){return t.position>0},isMoveDownAllowed:function(e,t){return e.root.nodes.length!==t.position+1},performUpdate:function(t){if(e.onChange){e.onChange()}},refreshList:function(e){this.fetchData(e.root)}}};__decorate([s.Input(),__metadata("design:type",Function)],EditableListComponent.prototype,"refresh",void 0);__decorate([s.Input(),__metadata("design:type",Array)],EditableListComponent.prototype,"items",void 0);__decorate([s.Input(),__metadata("design:type",Function)],EditableListComponent.prototype,"onChange",void 0);__decorate([s.Input(),__metadata("design:type",String)],EditableListComponent.prototype,"itemTemplateUrl",void 0);__decorate([s.Input(),__metadata("design:type",s.Type)],EditableListComponent.prototype,"itemComponent",void 0);__decorate([s.Input(),__metadata("design:type",Boolean)],EditableListComponent.prototype,"editable",void 0);__decorate([s.Input(),__metadata("design:type",String)],EditableListComponent.prototype,"id",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],EditableListComponent.prototype,"refreshChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],EditableListComponent.prototype,"itemsChange",void 0);EditableListComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-editable-list",template:'<div [ngClass]="{ \'y-editable-list-disabled\': !editable, \'se-editable-list-disabled\': !editable }"><se-tree (onTreeUpdated)="handleTreeUpdated($event)" [removeDefaultTemplate]="true" [rootNodeUid]="rootId" [nodeTemplateUrl]="itemTemplateUrl" [nodeComponent]="itemComponent" [nodeActions]="actions" [dragOptions]="dragOptions" [showAsList]="true"></se-tree></div>'})],EditableListComponent);return EditableListComponent}();var Ha=function(){function EditableListModule(){}EditableListModule=__decorate([s.NgModule({imports:[u.CommonModule,$a,Sa],declarations:[Ba,ja],entryComponents:[Ba,ja],exports:[Ba,ja]})],EditableListModule);return EditableListModule}();var Ga=function(){function YEditableListComponent(){this.dragOptions={}}YEditableListComponent.prototype.$onInit=function(){var e=this;this._enableDragAndDrop=function(){e.dragOptions.allowDropCallback=function(t){return t.sourceNode.parentUid===e.rootId};e.dragOptions.onDropCallback=function(){e.actions.performUpdate()}};this.actions=this.getTreeActions();this.refresh=function(){e.actions.refreshList()};if(!this.itemTemplateUrl){this.itemTemplateUrl="yEditableListDefaultItemTemplate.html"}this.rootId="root"+this.id;if(this.editable===undefined){this.editable=true}if(this.editable===true){this._enableDragAndDrop()}};YEditableListComponent.prototype.getTreeActions=function(){var e=this;var t=this.getDropdownItems();return{fetchData:function(t,n){e.items.map((function(t){if(t.id&&!t.uid){t.uid=t.id}t.parentUid=e.rootId}));n.nodes=e.items;return Promise.resolve(n)},getDropdownItems:function(){return t},removeItem:function(e,t){var n=t.$modelValue;var i=this.root.nodes.indexOf(n);this.root.nodes.splice(i,1);this.performUpdate(parent,t)},moveUp:function(e,t){var n=t.$modelValue;var i=this.root.nodes.indexOf(n);var o=this.root.nodes[i-1];this.root.nodes.splice(i-1,2,n,o);this.performUpdate(parent,t)},moveDown:function(e,t){var n=t.$modelValue;var i=this.root.nodes.indexOf(n);var o=this.root.nodes[i+1];this.root.nodes.splice(i,2,o,n);this.performUpdate(parent,t)},isMoveUpAllowed:function(e,t){var n=t.$modelValue;return this.root.nodes.indexOf(n)>0},isMoveDownAllowed:function(e,t){var n=t.$modelValue;var i=this.root.nodes.length;return this.root.nodes.indexOf(n)!==i-1},performUpdate:function(){if(e.onChange){e.onChange()}},refreshList:function(){this.fetchData(this.root)}}};YEditableListComponent.prototype.getDropdownItems=function(){var e=this;return[{key:"se.ydropdownmenu.remove",callback:function(t){e.actions.removeItem(t)}},{key:"se.ydropdownmenu.move.up",condition:function(t){return e.actions.isMoveUpAllowed(t)},callback:function(t){e.actions.moveUp(t)}},{key:"se.ydropdownmenu.move.down",condition:function(t){return e.actions.isMoveDownAllowed(t)},callback:function(t){e.actions.moveDown(t)}}]};YEditableListComponent=__decorate([SeComponent({selector:"y-editable-list",templateUrl:"yEditableListTemplate.html",inputs:["id:@","items","refresh:=","onChange","itemTemplateUrl","editable"]})],YEditableListComponent);return YEditableListComponent}();var Wa=function(){function YEditableListModule(){}YEditableListModule=__decorate([SeModule({imports:[Ao],declarations:[Ga]})],YEditableListModule);return YEditableListModule}();window.__smartedit__.addDecoratorPayload("Component","MessageComponent",{selector:"se-message",template:'\n        <div\n            [attr.message-id]="messageId"\n            class="fd-alert se-y-message"\n            role="alert"\n            [ngClass]="classes"\n        >\n            <div class="y-message-text">\n                <div class="y-message-info-title">\n                    <ng-content select="[se-message-title]"></ng-content>\n                </div>\n                <div class="y-message-info-description">\n                    <ng-content select="[se-message-description]"></ng-content>\n                </div>\n            </div>\n        </div>\n    '});var qa=function(){function MessageComponent(){}MessageComponent.prototype.ngOnInit=function(){this.messageId=this.messageId||"y-message-default-id";switch(this.type){case"danger":this.classes="fd-alert--error";break;case"info":this.classes="fd-alert--information";break;case"success":this.classes="fd-alert--success";break;case"warning":this.classes="fd-alert--warning";break;default:this.classes="fd-alert--information"}};__decorate([s.Input(),__metadata("design:type",String)],MessageComponent.prototype,"messageId",void 0);__decorate([s.Input(),__metadata("design:type",String)],MessageComponent.prototype,"type",void 0);MessageComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-message",template:'\n        <div\n            [attr.message-id]="messageId"\n            class="fd-alert se-y-message"\n            role="alert"\n            [ngClass]="classes"\n        >\n            <div class="y-message-text">\n                <div class="y-message-info-title">\n                    <ng-content select="[se-message-title]"></ng-content>\n                </div>\n                <div class="y-message-info-description">\n                    <ng-content select="[se-message-description]"></ng-content>\n                </div>\n            </div>\n        </div>\n    '})],MessageComponent);return MessageComponent}();window.__smartedit__.addDecoratorPayload("Component","EventMessageComponent",{selector:"se-event-message",template:'\n        <div>\n            <se-message [type]="type" *ngIf="show">\n                <ng-container *ngIf="showTitle()" se-message-title>\n                    {{ title | translate }}\n                </ng-container>\n                <ng-container *ngIf="showDescription()" se-message-description>\n                    {{ description | translate }}\n                </ng-container>\n            </se-message>\n        </div>\n    '});var Ka=function(){EventMessageComponent.$inject=["systemEventService"];function EventMessageComponent(e){this.systemEventService=e;this.show=false}EventMessageComponent.prototype.ngOnInit=function(){this.show=this.showToStart==="true"||this.showToStart===true;this.watchShowEventChange();this.watchHideEventChange()};EventMessageComponent.prototype.ngOnDestroy=function(){this.removeShowEventHandler();this.removeHideEventHandler()};EventMessageComponent.prototype.ngOnChanges=function(e){if(e.showEvent){this.watchShowEventChange()}if(e.hideEvent){this.watchHideEventChange()}};EventMessageComponent.prototype.ngOnChanges.$inject=["changes"];EventMessageComponent.prototype.showDescription=function(){return typeof this.description==="string"&&this.description.length>0};EventMessageComponent.prototype.showTitle=function(){return typeof this.title==="string"&&this.title.length>0};EventMessageComponent.prototype.showEventHandler=function(e,t){if(t.description&&t.description.length){this.description=t.description}if(t.title&&t.title.length){this.title=t.title}this.show=true};EventMessageComponent.prototype.showEventHandler.$inject=["eventId","eventData"];EventMessageComponent.prototype.removeHideEventHandler=function(){if(this.unregisterHideEventHandler){this.unregisterHideEventHandler()}};EventMessageComponent.prototype.removeShowEventHandler=function(){if(this.unregisterShowEventHandler){this.unregisterShowEventHandler()}};EventMessageComponent.prototype.watchShowEventChange=function(){var e=this;this.removeShowEventHandler();this.unregisterShowEventHandler=this.systemEventService.subscribe(this.showEvent,(function(t,n){return e.showEventHandler(t,n)}))};EventMessageComponent.prototype.watchHideEventChange=function(){var e=this;this.removeHideEventHandler();this.unregisterHideEventHandler=this.systemEventService.subscribe(this.hideEvent,(function(){return e.show=false}))};__decorate([s.Input(),__metadata("design:type",String)],EventMessageComponent.prototype,"type",void 0);__decorate([s.Input(),__metadata("design:type",String)],EventMessageComponent.prototype,"title",void 0);__decorate([s.Input(),__metadata("design:type",String)],EventMessageComponent.prototype,"description",void 0);__decorate([s.Input(),__metadata("design:type",String)],EventMessageComponent.prototype,"showEvent",void 0);__decorate([s.Input(),__metadata("design:type",String)],EventMessageComponent.prototype,"hideEvent",void 0);__decorate([s.Input(),__metadata("design:type",Object)],EventMessageComponent.prototype,"showToStart",void 0);EventMessageComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-event-message",template:'\n        <div>\n            <se-message [type]="type" *ngIf="show">\n                <ng-container *ngIf="showTitle()" se-message-title>\n                    {{ title | translate }}\n                </ng-container>\n                <ng-container *ngIf="showDescription()" se-message-description>\n                    {{ description | translate }}\n                </ng-container>\n            </se-message>\n        </div>\n    '}),__metadata("design:paramtypes",[Kt])],EventMessageComponent);return EventMessageComponent}();var Ya=function(){function MessageModule(){}MessageModule=__decorate([s.NgModule({imports:[u.CommonModule,m.TranslateModule.forChild()],declarations:[qa,Ka],entryComponents:[qa,Ka],exports:[qa,Ka]})],MessageModule);return MessageModule}();var Xa=new s.InjectionToken("POPUP_OVERLAY_DATA");(function(e){e["Hover"]="hover";e["Click"]="click"})(t.PopoverTrigger||(t.PopoverTrigger={}));window.__smartedit__.addDecoratorPayload("Component","PopupOverlayComponent",{selector:"se-popup-overlay",template:'\n        <fd-popover\n            [placement]="getPlacement()"\n            [noArrow]="true"\n            [appendTo]="appendTo"\n            [triggers]="trigger.length && trigger"\n            (isOpenChange)="handleOpenChange($event)"\n            [additionalClasses]="[\'se-popup-overlay-container\']"\n            class="popup-overlay popover-outer"\n        >\n            <fd-popover-control> <ng-content></ng-content> </fd-popover-control>\n\n            <fd-popover-body #popoverBody class="popover-inner popup-overlay__inner">\n                <ng-container *ngIf="isOpen">\n                    <div\n                        *ngIf="popupOverlay.template"\n                        [seCompileHtml]="popupOverlay.template"\n                        [scope]="popupOverlayData"\n                        [compileHtmlNgController]="popupOverlay.legacyController"\n                    ></div>\n                    <div\n                        *ngIf="popupOverlay.templateUrl"\n                        [ngInclude]="popupOverlay.templateUrl"\n                        [scope]="popupOverlayData"\n                        [compileHtmlNgController]="popupOverlay.legacyController"\n                    ></div>\n                    <ng-container *ngIf="popupOverlay.component">\n                        <ng-container\n                            *ngComponentOutlet="\n                                popupOverlay.component;\n                                injector: popupOverlayInjector\n                            "\n                        ></ng-container>\n                    </ng-container>\n                    <ng-content select="[se-popup-overlay-body]"></ng-content>\n                </ng-container>\n            </fd-popover-body>\n        </fd-popover>\n    ',styles:[".se-popup-overlay-container{z-index:1060!important}"],encapsulation:s.ViewEncapsulation.None});var Za=function(){PopupOverlayComponent.$inject=["injector"];function PopupOverlayComponent(e){this.injector=e;this.popupOverlayOnShow=new s.EventEmitter;this.popupOverlayOnHide=new s.EventEmitter;this.trigger=[]}PopupOverlayComponent.prototype.ngOnInit=function(){this.setTrigger();this.createInjector();this.appendTo=V.isIframe()?document.getElementById("smarteditoverlay"):document.getElementsByTagName("body")[0]};PopupOverlayComponent.prototype.ngOnChanges=function(e){if(e.popupOverlayTrigger){this.setTrigger()}if(e.popupOverlayData){this.createInjector()}};PopupOverlayComponent.prototype.ngOnChanges.$inject=["changes"];PopupOverlayComponent.prototype.handleOpenChange=function(e){return e?this.handleOpen():this.handleClose()};PopupOverlayComponent.prototype.handleOpenChange.$inject=["isOpen"];PopupOverlayComponent.prototype.handleOpen=function(){this.isOpen=true;this.popupOverlayOnShow.emit()};PopupOverlayComponent.prototype.handleClose=function(){this.isOpen=false;this.popupOverlayOnHide.emit()};PopupOverlayComponent.prototype.getPlacement=function(){return(this.popupOverlay.valign||"bottom")+"-"+this.getHorizontalAlign()};PopupOverlayComponent.prototype.setTrigger=function(){if(this.popupOverlayTrigger===t.PopoverTrigger.Click){this.trigger=[this.popupOverlayTrigger]}if(this.popupOverlayTrigger===t.PopoverTrigger.Hover){this.trigger=["mouseenter","mouseleave"]}if(!this.popover){return}if(this.popupOverlayTrigger==="true"||this.popupOverlayTrigger===true){this.popover.open()}else{this.popover.close()}};PopupOverlayComponent.prototype.getHorizontalAlign=function(){if(!this.popupOverlay.halign){return"start"}return this.popupOverlay.halign==="right"?"start":"end"};PopupOverlayComponent.prototype.createInjector=function(){this.popupOverlayInjector=s.Injector.create({providers:[{provide:Xa,useValue:this.popupOverlayData||{}}],parent:this.injector})};__decorate([s.Input(),__metadata("design:type",Object)],PopupOverlayComponent.prototype,"popupOverlay",void 0);__decorate([s.Input(),__metadata("design:type",Object)],PopupOverlayComponent.prototype,"popupOverlayTrigger",void 0);__decorate([s.Input(),__metadata("design:type",Object)],PopupOverlayComponent.prototype,"popupOverlayData",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],PopupOverlayComponent.prototype,"popupOverlayOnShow",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],PopupOverlayComponent.prototype,"popupOverlayOnHide",void 0);__decorate([s.ViewChild(h.PopoverComponent,{static:false}),__metadata("design:type",h.PopoverComponent)],PopupOverlayComponent.prototype,"popover",void 0);PopupOverlayComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-popup-overlay",template:'\n        <fd-popover\n            [placement]="getPlacement()"\n            [noArrow]="true"\n            [appendTo]="appendTo"\n            [triggers]="trigger.length && trigger"\n            (isOpenChange)="handleOpenChange($event)"\n            [additionalClasses]="[\'se-popup-overlay-container\']"\n            class="popup-overlay popover-outer"\n        >\n            <fd-popover-control> <ng-content></ng-content> </fd-popover-control>\n\n            <fd-popover-body #popoverBody class="popover-inner popup-overlay__inner">\n                <ng-container *ngIf="isOpen">\n                    <div\n                        *ngIf="popupOverlay.template"\n                        [seCompileHtml]="popupOverlay.template"\n                        [scope]="popupOverlayData"\n                        [compileHtmlNgController]="popupOverlay.legacyController"\n                    ></div>\n                    <div\n                        *ngIf="popupOverlay.templateUrl"\n                        [ngInclude]="popupOverlay.templateUrl"\n                        [scope]="popupOverlayData"\n                        [compileHtmlNgController]="popupOverlay.legacyController"\n                    ></div>\n                    <ng-container *ngIf="popupOverlay.component">\n                        <ng-container\n                            *ngComponentOutlet="\n                                popupOverlay.component;\n                                injector: popupOverlayInjector\n                            "\n                        ></ng-container>\n                    </ng-container>\n                    <ng-content select="[se-popup-overlay-body]"></ng-content>\n                </ng-container>\n            </fd-popover-body>\n        </fd-popover>\n    ',styles:[".se-popup-overlay-container{z-index:1060!important}"],encapsulation:s.ViewEncapsulation.None}),__metadata("design:paramtypes",[s.Injector])],PopupOverlayComponent);return PopupOverlayComponent}();var Qa=function(){function PopupOverlayModule(){}PopupOverlayModule=__decorate([s.NgModule({imports:[u.CommonModule,h.PopoverModule,Nn],declarations:[Za],entryComponents:[Za],exports:[Za]})],PopupOverlayModule);return PopupOverlayModule}();window.__smartedit__.addDecoratorPayload("Component","PreventVerticalOverflowComponent",{selector:"se-prevent-vertical-overflow",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div #container [ngStyle]="containerStyle">\n            <ng-content></ng-content>\n        </div>\n    '});var Ja=function(){PreventVerticalOverflowComponent.$inject=["document","cdr"];function PreventVerticalOverflowComponent(e,t){this.document=e;this.cdr=t;this.containerStyle={"max-height.px":null,overflow:null}}PreventVerticalOverflowComponent.prototype.onWindowResize=function(){if(this.containerElement){this.onResize()}};PreventVerticalOverflowComponent.prototype.ngAfterViewInit=function(){var e=this;this.observer=new IntersectionObserver((function(t){var n=t[0];if(n.isIntersecting){e.onResize()}}),{root:this.document,threshold:0});this.observer.observe(this.containerElement.nativeElement)};PreventVerticalOverflowComponent.prototype.ngOnDestroy=function(){this.observer.unobserve(this.containerElement.nativeElement)};PreventVerticalOverflowComponent.prototype.onResize=function(){var e=this.getContainerBoundingClientRect(),t=e.top,n=e.height;if(t===0&&n===0){return}this.preventOverflow(t,n)};PreventVerticalOverflowComponent.prototype.preventOverflow=function(e,t){var n=this.preventIfOverflowing(e,t);if(!n&&this.containerStyle["max-height.px"]){this.reset();var i=this.getContainerBoundingClientRect(),o=i.top,r=i.height;this.preventIfOverflowing(o,r)}};PreventVerticalOverflowComponent.prototype.preventOverflow.$inject=["containerTop","containerHeight"];PreventVerticalOverflowComponent.prototype.preventIfOverflowing=function(e,t){if(this.isOverflowing(e,t)){this.prevent(e);return true}return false};PreventVerticalOverflowComponent.prototype.preventIfOverflowing.$inject=["top","height"];PreventVerticalOverflowComponent.prototype.isOverflowing=function(e,t){var n=this.getDocumentHeight();return n<e+t};PreventVerticalOverflowComponent.prototype.isOverflowing.$inject=["top","height"];PreventVerticalOverflowComponent.prototype.prevent=function(e){var t=this.getDocumentHeight();var n=t-e;this.containerStyle["max-height.px"]=n;this.containerStyle.overflow="auto";this.cdr.detectChanges()};PreventVerticalOverflowComponent.prototype.prevent.$inject=["elementTop"];PreventVerticalOverflowComponent.prototype.reset=function(){this.containerStyle["max-height.px"]=null;this.containerStyle.overflow=null;this.cdr.detectChanges()};PreventVerticalOverflowComponent.prototype.getContainerBoundingClientRect=function(){return this.containerElement.nativeElement.getBoundingClientRect()};PreventVerticalOverflowComponent.prototype.getDocumentHeight=function(){var e=this.document.documentElement.getBoundingClientRect().height;return e};__decorate([s.ViewChild("container",{static:false}),__metadata("design:type",s.ElementRef)],PreventVerticalOverflowComponent.prototype,"containerElement",void 0);__decorate([s.HostListener("window:resize"),__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],PreventVerticalOverflowComponent.prototype,"onWindowResize",null);PreventVerticalOverflowComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-prevent-vertical-overflow",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'\n        <div #container [ngStyle]="containerStyle">\n            <ng-content></ng-content>\n        </div>\n    '}),__param(0,s.Inject(u.DOCUMENT)),__metadata("design:paramtypes",[Document,s.ChangeDetectorRef])],PreventVerticalOverflowComponent);return PreventVerticalOverflowComponent}();var es=function(){function PreventVerticalOverflowModule(){}PreventVerticalOverflowModule=__decorate([s.NgModule({imports:[u.CommonModule],declarations:[Ja],entryComponents:[Ja],exports:[Ja]})],PreventVerticalOverflowModule);return PreventVerticalOverflowModule}();window.__smartedit__.addDecoratorPayload("Component","HelpComponent",{selector:"se-help",template:'<se-tooltip [triggers]="[\'mouseenter\', \'mouseleave\']" placement="auto" [isChevronVisible]="true" [title]="title" class="se-help"><span se-tooltip-trigger class="sap-icon--sys-help se-y-help-icon"></span><ng-container se-tooltip-body><div *ngIf="template" [seCompileHtml]="template"></div><div *ngIf="templateUrl" [ngInclude]="templateUrl"></div></ng-container><ng-content se-tooltip-body></ng-content></se-tooltip>'});var ts=function(){function HelpComponent(){}__decorate([s.Input(),__metadata("design:type",String)],HelpComponent.prototype,"title",void 0);__decorate([s.Input(),__metadata("design:type",String)],HelpComponent.prototype,"template",void 0);__decorate([s.Input(),__metadata("design:type",String)],HelpComponent.prototype,"templateUrl",void 0);HelpComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-help",template:'<se-tooltip [triggers]="[\'mouseenter\', \'mouseleave\']" placement="auto" [isChevronVisible]="true" [title]="title" class="se-help"><span se-tooltip-trigger class="sap-icon--sys-help se-y-help-icon"></span><ng-container se-tooltip-body><div *ngIf="template" [seCompileHtml]="template"></div><div *ngIf="templateUrl" [ngInclude]="templateUrl"></div></ng-container><ng-content se-tooltip-body></ng-content></se-tooltip>'})],HelpComponent);return HelpComponent}();var ns=function(){function HelpModule(){}HelpModule=__decorate([s.NgModule({imports:[u.CommonModule,Yr,Nn],declarations:[ts],entryComponents:[ts],exports:[ts]})],HelpModule);return HelpModule}();var is=function(){function SliderPanelZIndexHelper(){}SliderPanelZIndexHelper.prototype.getHighestZIndex=function(e){var t=this;return Math.max.apply(Math,this.getChildrenNodesFromTreeOrLeaf(e[0]).filter((function(e){return t.filterBlacklistedNodes(e)})).map((function(e){return t.mapToZIndexIntegers(e)})))};SliderPanelZIndexHelper.prototype.filterBlacklistedNodes=function(e){return!SliderPanelZIndexHelper.BLACKLISTED_NODE_NAMES.has(e.nodeName)};SliderPanelZIndexHelper.prototype.mapToZIndexIntegers=function(e){return parseInt(r.element(e).css("z-index"),10)||0};SliderPanelZIndexHelper.prototype.getChildrenNodesFromTreeOrLeaf=function(e){var t=this;return __spreadArrays([e],a.flatten(Array.from(e.children).map((function(e){return t.getChildrenNodesFromTreeOrLeaf(e)}))))};SliderPanelZIndexHelper.BLACKLISTED_NODE_NAMES=new Set(["SCRIPT","LINK","BASE"]);return SliderPanelZIndexHelper}();var os=function(){function SliderPanelService(e,t,n,i){this.element=e;this.window=t;this.configuration=n;this.yjQuery=i;this.inlineStyling={container:{},content:{}};this.sliderPanelDefaultConfiguration={slideFrom:"right",overlayDimension:"80%"};this.init()}SliderPanelService.prototype.updateContainerInlineStyling=function(e){var t=this.parent[0].getBoundingClientRect();var n={left:this.parent.css("border-left-width")?parseInt(this.parent.css("border-left-width").replace("px",""),10):0,top:this.parent.css("border-top-width")?parseInt(this.parent.css("border-top-width").replace("px",""),10):0};this.inlineStyling.container.height=this.parent[0].clientHeight+"px";this.inlineStyling.container.width=this.parent[0].clientWidth+"px";this.inlineStyling.container.left=(this.appendChildTarget.nodeName==="BODY"?Math.round(t.left+this.window.pageXOffset+n.left):0)+"px";this.inlineStyling.container.top=(this.appendChildTarget.nodeName==="BODY"?Math.round(t.top+this.window.pageYOffset+n.top):0)+"px";if(!e){this.inlineStyling.container.zIndex=this.sliderPanelConfiguration.zIndex?this.sliderPanelConfiguration.zIndex.toString():(this.returningHigherZIndex()+1).toString()}};SliderPanelService.prototype.returningHigherZIndex=function(){return(new is).getHighestZIndex(this.yjQuery("body"))};SliderPanelService.prototype.initializeParentRawElement=function(){var e=this.sliderPanelConfiguration.cssSelector?document.querySelector(this.sliderPanelConfiguration.cssSelector):null;this.parent=this.yjQuery(e||this.element.parent())};SliderPanelService.prototype.initializePanelConfiguration=function(){this.sliderPanelConfiguration=a.defaultsDeep(this.configuration,this.sliderPanelDefaultConfiguration)};SliderPanelService.prototype.initializeInlineStyles=function(){var e=["top","bottom"].indexOf(this.sliderPanelConfiguration.slideFrom)===-1?"width":"height";this.inlineStyling.content[e]=this.sliderPanelConfiguration.overlayDimension};SliderPanelService.prototype.initializeChildTarget=function(){var e=this.parent;var t=false;var n=0;for(n;e[0].nodeName!=="BODY";e=this.yjQuery(e.parent()),n++){var i=(e[0].getAttribute("class")||"").includes("fd-modal__content");var o=e[0].getAttribute("id")==="y-modal-dialog";if(i||o){t=true;break}}this.appendChildTarget=t?e[0]:document.body};SliderPanelService.prototype.append=function(){this.yjQuery(this.appendChildTarget).append(this.element[0])};SliderPanelService.prototype.init=function(){this.initializePanelConfiguration();this.initializeParentRawElement();this.initializeInlineStyles();this.initializeChildTarget();this.append()};return SliderPanelService}();var rs=function(){SliderPanelServiceFactory.$inject=["yjQuery"];function SliderPanelServiceFactory(e){this.yjQuery=e}SliderPanelServiceFactory.prototype.getNewServiceInstance=function(e,t,n){return new os(e,t,n,this.yjQuery)};SliderPanelServiceFactory.prototype.getNewServiceInstance.$inject=["element","window","configuration"];SliderPanelServiceFactory=__decorate([SeDowngradeService(),__param(0,s.Inject(Ki)),__metadata("design:paramtypes",[Function])],SliderPanelServiceFactory);return SliderPanelServiceFactory}();var as={SLIDERPANEL_ANIMATED:"sliderpanel--animated",SLIDERPANEL_SLIDEPREFIX:"sliderpanel--slidefrom"};window.__smartedit__.addDecoratorPayload("Component","SliderPanelComponent",{selector:"se-slider-panel",template:'<div class="se-slider-panel-wrapper" *ngIf="isShown"><div class="se-slider-panel-container slide-in"><div class="se-slider-panel__header" *ngIf="sliderPanelConfiguration.modal"><span class="se-slider-panel__title" *ngIf="sliderPanelConfiguration.modal.title">{{ sliderPanelConfiguration.modal.title | translate }}</span> <button type="button" class="se-slider-panel__close-btn fd-button--light fd-modal__close" aria-label="close" *ngIf="sliderPanelConfiguration.modal.showDismissButton" (click)="sliderPanelDismissAction()"></button></div><div class="se-slider-panel__body"><div *ngIf="sliderPanelConfiguration.template" [seCompileHtml]="sliderPanelConfiguration.template" [scope]="sliderPanelConfiguration.scope"></div><div *ngIf="sliderPanelConfiguration.templateUrl" [ngInclude]="sliderPanelConfiguration.templateUrl" [scope]="sliderPanelConfiguration.scope"></div><ng-content></ng-content></div><div class="se-slider-panel__footer" *ngIf="sliderPanelConfiguration.modal && (sliderPanelConfiguration.modal.cancel || sliderPanelConfiguration.modal.save)"><button type="button" class="fd-button--light se-slider-panel__footer-btn se-slider-panel__footer-btn--cancel" *ngIf="sliderPanelConfiguration.modal.cancel" (click)="sliderPanelConfiguration.modal.cancel.onClick()">{{ sliderPanelConfiguration.modal.cancel.label | translate }}</button> <button type="button" class="fd-button--emphasized se-slider-panel__footer-btn se-slider-panel__footer-btn--save" *ngIf="sliderPanelConfiguration.modal.save" (click)="sliderPanelConfiguration.modal.save.onClick()" [disabled]="isSaveDisabled()">{{ sliderPanelConfiguration.modal.save.label | translate }}</button></div></div></div>',styles:[".se-slider-panel-wrapper{position:fixed;display:flex;justify-content:center;overflow:hidden;width:100%;top:0;left:0;z-index:1060}.se-slider-panel-container{display:flex;flex-direction:column;transform:translateX(100%);-webkit-transform:translateX(100%);background-color:#fff;border-radius:4px;width:650px}.se-slider-panel__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px}.se-slider-panel__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-slider-panel__body{padding:20px;overflow-y:auto;max-height:70vh;height:70vh;min-height:500px;flex:1 1 auto}.se-slider-panel__footer{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;border-top:1px solid #d9d9d9;height:69px}.se-slider-panel__footer button{text-transform:capitalize;margin-left:12px}.slide-in{animation:slide-in .4s forwards;-webkit-animation:slide-in .4s forwards}@keyframes slide-in{100%{transform:translateX(0)}}@-webkit-keyframes slide-in{100%{-webkit-transform:translateX(0)}}:host-context(.fd-modal-container).sliderpanel--animated{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);align-items:center;display:flex}:host-context(.fd-modal-container).sliderpanel--animated .se-slider-panel-wrapper{top:auto}:host-context(.fd-modal-container).sliderpanel--animated .se-slider-panel-wrapper .se-slider-panel__body{max-height:calc(100vh - 128px);min-height:auto}"]});var ss=function(){SliderPanelComponent.$inject=["renderer","element","windowUtils","yjQuery","sliderPanelServiceFactory"];function SliderPanelComponent(e,t,n,i,o){this.renderer=e;this.element=t;this.windowUtils=n;this.yjQuery=i;this.sliderPanelServiceFactory=o;this.sliderPanelHideChange=new s.EventEmitter;this.sliderPanelShowChange=new s.EventEmitter;this.isShownChange=new s.EventEmitter;this.inlineStyling={container:{},content:{}}}SliderPanelComponent.prototype.ngOnInit=function(){var e=this;this.isShown=false;this.uniqueId=B.generateIdentifier();this.sliderPanelService=this.sliderPanelServiceFactory.getNewServiceInstance(this.yjQuery(this.element.nativeElement),this.windowUtils.getWindow(),this.sliderPanelConfiguration);this.sliderPanelConfiguration=this.sliderPanelService.sliderPanelConfiguration;this.slideClassName=as.SLIDERPANEL_SLIDEPREFIX+this.sliderPanelConfiguration.slideFrom;this.inlineStyling={container:this.sliderPanelService.inlineStyling.container,content:this.sliderPanelService.inlineStyling.content};setTimeout((function(){e.sliderPanelShowChange.emit((function(){return e.showSlider()}));e.sliderPanelHideChange.emit((function(){return e.hideSlider()}))}));this.sliderPanelDismissAction=this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.dismiss&&this.sliderPanelConfiguration.modal.dismiss.onClick?this.sliderPanelConfiguration.modal.dismiss.onClick:this.hideSlider;this.addScreenResizeEventHandler();if(this.sliderPanelConfiguration.displayedByDefault){this.showSlider()}};SliderPanelComponent.prototype.ngOnDestroy=function(){this.yjQuery(this.windowUtils.getWindow()).off("resize.doResize")};SliderPanelComponent.prototype.ngOnChanges=function(){this.validateComponent()};SliderPanelComponent.prototype.hideSlider=function(){var e=this;return new Promise((function(t){e.renderer.removeClass(e.element.nativeElement,as.SLIDERPANEL_ANIMATED);e.isShown=false;e.isShownChange.emit(e.isShown);t()}))};SliderPanelComponent.prototype.showSlider=function(){var e=this;return new Promise((function(t){e.sliderPanelService.updateContainerInlineStyling(false);e.inlineStyling.container=e.sliderPanelService.inlineStyling.container;var n=false;e.yjQuery("se-slider-panel.sliderpanel--animated .se-slider-panel-container").toArray().forEach((function(t){var i=e.yjQuery(t);if(!n){if(i.css("height")===e.inlineStyling.container.height&&i.css("width")===e.inlineStyling.container.width&&i.css("left")===e.inlineStyling.container.left&&i.css("top")===e.inlineStyling.container.top){n=true}}}));e.sliderPanelConfiguration.noGreyedOutOverlay=typeof e.sliderPanelConfiguration.noGreyedOutOverlay==="boolean"?e.sliderPanelConfiguration.noGreyedOutOverlay:n;e.isShown=true;e.isShownChange.emit(e.isShown);e.renderer.addClass(e.element.nativeElement,as.SLIDERPANEL_ANIMATED);t()}))};SliderPanelComponent.prototype.isSaveDisabled=function(){if(this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.save&&this.sliderPanelConfiguration.modal.save.isDisabledFn){return this.sliderPanelConfiguration.modal.save.isDisabledFn()}return false};SliderPanelComponent.prototype.validateComponent=function(){var e,t;var n=!!this.content;var i=!!((e=this.sliderPanelConfiguration)===null||e===void 0?void 0:e.templateUrl)||!!((t=this.sliderPanelConfiguration)===null||t===void 0?void 0:t.template);var o=n&&i;if(o){throw new Error("SliderComponent - invalid configuration provided. Only content or template / templateUrl can be provided, not both.")}};SliderPanelComponent.prototype.addScreenResizeEventHandler=function(){var e=this;this.yjQuery(this.windowUtils.getWindow()).on("resize.sliderPanelRedraw_"+this.uniqueId,(function(){if(e.isShown){setTimeout((function(){e.sliderPanelService.updateContainerInlineStyling(true);e.inlineStyling.container=e.sliderPanelService.inlineStyling.container}),0)}}))};__decorate([s.Input(),__metadata("design:type",Object)],SliderPanelComponent.prototype,"sliderPanelConfiguration",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SliderPanelComponent.prototype,"sliderPanelHide",void 0);__decorate([s.Input(),__metadata("design:type",Function)],SliderPanelComponent.prototype,"sliderPanelShow",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],SliderPanelComponent.prototype,"sliderPanelHideChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],SliderPanelComponent.prototype,"sliderPanelShowChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],SliderPanelComponent.prototype,"isShownChange",void 0);__decorate([s.ContentChild(s.TemplateRef,{static:false}),__metadata("design:type",s.TemplateRef)],SliderPanelComponent.prototype,"content",void 0);SliderPanelComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-slider-panel",template:'<div class="se-slider-panel-wrapper" *ngIf="isShown"><div class="se-slider-panel-container slide-in"><div class="se-slider-panel__header" *ngIf="sliderPanelConfiguration.modal"><span class="se-slider-panel__title" *ngIf="sliderPanelConfiguration.modal.title">{{ sliderPanelConfiguration.modal.title | translate }}</span> <button type="button" class="se-slider-panel__close-btn fd-button--light fd-modal__close" aria-label="close" *ngIf="sliderPanelConfiguration.modal.showDismissButton" (click)="sliderPanelDismissAction()"></button></div><div class="se-slider-panel__body"><div *ngIf="sliderPanelConfiguration.template" [seCompileHtml]="sliderPanelConfiguration.template" [scope]="sliderPanelConfiguration.scope"></div><div *ngIf="sliderPanelConfiguration.templateUrl" [ngInclude]="sliderPanelConfiguration.templateUrl" [scope]="sliderPanelConfiguration.scope"></div><ng-content></ng-content></div><div class="se-slider-panel__footer" *ngIf="sliderPanelConfiguration.modal && (sliderPanelConfiguration.modal.cancel || sliderPanelConfiguration.modal.save)"><button type="button" class="fd-button--light se-slider-panel__footer-btn se-slider-panel__footer-btn--cancel" *ngIf="sliderPanelConfiguration.modal.cancel" (click)="sliderPanelConfiguration.modal.cancel.onClick()">{{ sliderPanelConfiguration.modal.cancel.label | translate }}</button> <button type="button" class="fd-button--emphasized se-slider-panel__footer-btn se-slider-panel__footer-btn--save" *ngIf="sliderPanelConfiguration.modal.save" (click)="sliderPanelConfiguration.modal.save.onClick()" [disabled]="isSaveDisabled()">{{ sliderPanelConfiguration.modal.save.label | translate }}</button></div></div></div>',styles:[".se-slider-panel-wrapper{position:fixed;display:flex;justify-content:center;overflow:hidden;width:100%;top:0;left:0;z-index:1060}.se-slider-panel-container{display:flex;flex-direction:column;transform:translateX(100%);-webkit-transform:translateX(100%);background-color:#fff;border-radius:4px;width:650px}.se-slider-panel__header{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:space-between;border-bottom:1px solid #d9d9d9;height:53px}.se-slider-panel__header:first-child{font-size:1.1428571429rem;line-height:1.25;font-weight:400;color:#32363a}.se-slider-panel__body{padding:20px;overflow-y:auto;max-height:70vh;height:70vh;min-height:500px;flex:1 1 auto}.se-slider-panel__footer{padding:20px;display:flex;flex-direction:row;align-items:center;justify-content:flex-end;border-top:1px solid #d9d9d9;height:69px}.se-slider-panel__footer button{text-transform:capitalize;margin-left:12px}.slide-in{animation:slide-in .4s forwards;-webkit-animation:slide-in .4s forwards}@keyframes slide-in{100%{transform:translateX(0)}}@-webkit-keyframes slide-in{100%{-webkit-transform:translateX(0)}}:host-context(.fd-modal-container).sliderpanel--animated{position:fixed;left:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.5);align-items:center;display:flex}:host-context(.fd-modal-container).sliderpanel--animated .se-slider-panel-wrapper{top:auto}:host-context(.fd-modal-container).sliderpanel--animated .se-slider-panel-wrapper .se-slider-panel__body{max-height:calc(100vh - 128px);min-height:auto}"]}),__param(3,s.Inject(Ki)),__metadata("design:paramtypes",[s.Renderer2,s.ElementRef,L,Function,rs])],SliderPanelComponent);return SliderPanelComponent}();var cs=function(){function SliderPanelModule(){}SliderPanelModule=__decorate([s.NgModule({imports:[u.CommonModule,o.TranslationModule.forChild(),Nn],declarations:[ss],entryComponents:[ss],providers:[rs],exports:[ss]})],SliderPanelModule);return SliderPanelModule}();var ls={SLIDERPANEL_ANIMATED:"sliderpanel--animated",SLIDERPANEL_SLIDEPREFIX:"sliderpanel--slidefrom"};var ds=function(){YSliderPanelComponent.$inject=["$animate","$element","$timeout","$window","yjQuery","sliderPanelServiceFactory"];function YSliderPanelComponent(e,t,n,i,o,r){this.$animate=e;this.$element=t;this.$timeout=n;this.$window=i;this.yjQuery=o;this.sliderPanelServiceFactory=r;this.inlineStyling={container:{},content:{}}}YSliderPanelComponent.prototype.$onInit=function(){var e=this;this.isShown=false;this.uniqueId=a.uniqueId();this.sliderPanelService=this.sliderPanelServiceFactory.getNewServiceInstance(this.$element,this.$window,this.sliderPanelConfiguration);this.sliderPanelConfiguration=this.sliderPanelService.sliderPanelConfiguration;this.slideClassName=ls.SLIDERPANEL_SLIDEPREFIX+this.sliderPanelConfiguration.slideFrom;this.inlineStyling={container:this.sliderPanelService.inlineStyling.container,content:this.sliderPanelService.inlineStyling.content};this.sliderPanelShow=function(){return e.showSlider()};this.sliderPanelHide=function(){return e.hideSlider()};this.sliderPanelDismissAction=this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.dismiss&&this.sliderPanelConfiguration.modal.dismiss.onClick?this.sliderPanelConfiguration.modal.dismiss.onClick:this.hideSlider;this.addScreenResizeEventHandler();if(this.sliderPanelConfiguration.displayedByDefault){this.showSlider()}};YSliderPanelComponent.prototype.$onDestroy=function(){this.yjQuery(window).off("resize.doResize")};YSliderPanelComponent.prototype.hideSlider=function(){var e=this;return this.$animate.removeClass(this.$element,ls.SLIDERPANEL_ANIMATED).then((function(){e.isShown=false}))};YSliderPanelComponent.prototype.showSlider=function(){var e=this;this.sliderPanelService.updateContainerInlineStyling(false);this.inlineStyling.container=this.sliderPanelService.inlineStyling.container;var t=false;r.forEach(r.element("y-slider-panel.sliderpanel--animated .se-slider-panel-container"),(function(n){var i=r.element(n);if(!t){if(i.css("height")===e.inlineStyling.container.height&&i.css("width")===e.inlineStyling.container.width&&i.css("left")===e.inlineStyling.container.left&&i.css("top")===e.inlineStyling.container.top){t=true}}}));this.sliderPanelConfiguration.noGreyedOutOverlay=typeof this.sliderPanelConfiguration.noGreyedOutOverlay==="boolean"?this.sliderPanelConfiguration.noGreyedOutOverlay:t;this.isShown=true;return this.$animate.addClass(this.$element,ls.SLIDERPANEL_ANIMATED)};YSliderPanelComponent.prototype.isSaveDisabled=function(){if(this.sliderPanelConfiguration.modal&&this.sliderPanelConfiguration.modal.save&&this.sliderPanelConfiguration.modal.save.isDisabledFn){return this.sliderPanelConfiguration.modal.save.isDisabledFn()}return false};YSliderPanelComponent.prototype.addScreenResizeEventHandler=function(){var e=this;this.yjQuery(window).on("resize.sliderPanelRedraw_"+this.uniqueId,(function(){if(e.isShown){e.$timeout((function(){e.sliderPanelService.updateContainerInlineStyling(true);e.inlineStyling.container=e.sliderPanelService.inlineStyling.container}))}}))};YSliderPanelComponent=__decorate([SeComponent({selector:"y-slider-panel",templateUrl:"sliderPanelTemplate.html",transclude:true,inputs:["sliderPanelConfiguration","sliderPanelHide:=","sliderPanelShow:="]}),__metadata("design:paramtypes",[Object,Object,Function,Object,Function,rs])],YSliderPanelComponent);return YSliderPanelComponent}();window.__smartedit__.addDecoratorPayload("Component","MoreTextComponent",{selector:"se-more-text",template:'\n        <span id="y-more-text-payload" class="se-more-text__payload">{{ text }}</span>\n        <span\n            id="y-more-text-toggle"\n            class="se-more-text__toggle"\n            [ngClass]="{ \'se-more-text__toggle--capitalize\': capitalizeLabel }"\n            (click)="showHideMoreText()"\n            *ngIf="isTruncated"\n            >{{ linkLabel }}</span\n        >\n    ',styles:[".se-more-text__toggle--capitalize{text-transform:capitalize;color:#0a6ed1;cursor:pointer}"],providers:[ii]});var ps=function(){MoreTextComponent.$inject=["textTruncateService","translate"];function MoreTextComponent(e,t){this.textTruncateService=e;this.translate=t;this.capitalizeLabel=false;this.isTruncated=false;this.showingMore=false}MoreTextComponent.prototype.ngOnInit=function(){var e=this;this.limit=this.limit||100;this.moreLabelI18nKey=this.moreLabelI18nKey||"se.moretext.more.link";this.lessLabelI18nKey=this.lessLabelI18nKey||"se.moretext.less.link";this.truncatedText=this.textTruncateService.truncateToNearestWord(this.limit,this.text,this.ellipsis);this.isTruncated=this.truncatedText.isTruncated();this.translateLabels().subscribe((function(){e.showHideMoreText()}))};MoreTextComponent.prototype.showHideMoreText=function(){if(!this.isTruncated){return}this.text=this.showingMore?this.truncatedText.getUntruncatedText():this.truncatedText.getTruncatedText();this.linkLabel=this.showingMore?this.lessLabel:this.moreLabel;this.showingMore=!this.showingMore};MoreTextComponent.prototype.translateLabels=function(){var e=this;return g.zip(this.translate.get(this.moreLabelI18nKey),this.translate.get(this.lessLabelI18nKey)).pipe(f.tap((function(t){var n=t[0],i=t[1];e.moreLabel=n;e.lessLabel=i})))};__decorate([s.Input(),__metadata("design:type",String)],MoreTextComponent.prototype,"text",void 0);__decorate([s.Input(),__metadata("design:type",Number)],MoreTextComponent.prototype,"limit",void 0);__decorate([s.Input(),__metadata("design:type",String)],MoreTextComponent.prototype,"moreLabelI18nKey",void 0);__decorate([s.Input(),__metadata("design:type",String)],MoreTextComponent.prototype,"lessLabelI18nKey",void 0);__decorate([s.Input(),__metadata("design:type",String)],MoreTextComponent.prototype,"ellipsis",void 0);__decorate([s.Input(),__metadata("design:type",Object)],MoreTextComponent.prototype,"capitalizeLabel",void 0);MoreTextComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-more-text",template:'\n        <span id="y-more-text-payload" class="se-more-text__payload">{{ text }}</span>\n        <span\n            id="y-more-text-toggle"\n            class="se-more-text__toggle"\n            [ngClass]="{ \'se-more-text__toggle--capitalize\': capitalizeLabel }"\n            (click)="showHideMoreText()"\n            *ngIf="isTruncated"\n            >{{ linkLabel }}</span\n        >\n    ',styles:[".se-more-text__toggle--capitalize{text-transform:capitalize;color:#0a6ed1;cursor:pointer}"],providers:[ii]}),__metadata("design:paramtypes",[ii,m.TranslateService])],MoreTextComponent);return MoreTextComponent}();var us=function(){function MoreTextModule(){}MoreTextModule=__decorate([s.NgModule({imports:[u.CommonModule],declarations:[ps],entryComponents:[ps],exports:[ps]})],MoreTextModule);return MoreTextModule}();var ms=function(){function SharedComponentsModule(){}SharedComponentsModule=__decorate([s.NgModule({imports:[o.TranslationModule.forChild(),Gr,u.CommonModule,S.FormsModule,o.SelectModule,o.LanguageDropdownModule,S.ReactiveFormsModule,Vr,Nn,Ya,$a,ua,Sa,la,hr,mr,Qa,lr,Ea,Yr,rr,Ha,cs,o.LoginDialogModule,o.FundamentalModalTemplateModule,Pa,fa,ns,Xr,us,es],declarations:[$r],entryComponents:[$r],exports:[$r,o.SelectModule,o.LanguageDropdownModule,Nn,Ya,$a,Vr,ua,Sa,Qa,la,hr,lr,Ea,Yr,rr,Ha,mr,cs,o.LoginDialogModule,o.FundamentalModalTemplateModule,Pa,fa,ns,Xr,us,es]})],SharedComponentsModule);return SharedComponentsModule}();var gs=function(){function ContentManager(){this.onSuccess=new s.EventEmitter;this.onError=new s.EventEmitter;this.submitting=false}Object.defineProperty(ContentManager.prototype,"option",{set:function(e){this._onSave=e.onSave},enumerable:false,configurable:true});ContentManager.prototype.save=function(){var e=this;this.submitting=true;return this._onSave().pipe(f.finalize((function(){return e.submitting=false})),f.tap((function(t){e.onSuccess.emit(t)})),f.catchError((function(t){e.onError.emit(t);return g.throwError(t)})))};__decorate([s.Input("contentManager"),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],ContentManager.prototype,"option",null);__decorate([s.Output(),__metadata("design:type",Object)],ContentManager.prototype,"onSuccess",void 0);__decorate([s.Output(),__metadata("design:type",Object)],ContentManager.prototype,"onError",void 0);ContentManager=__decorate([s.Directive({selector:"[contentManager]"})],ContentManager);return ContentManager}();var createApi=function(e){return{setSubmitButtonText:function(t){e.submitButtonText=t},setCancelButtonText:function(t){e.cancelButtonText=t},setAlwaysShowSubmit:function(t){e.alwaysShowSubmit=t},setAlwaysShowReset:function(t){e.alwaysShowReset=t},setOnReset:function(t){e.onReset=t},setPreparePayload:function(t){e.preparePayload=t},setUpdateCallback:function(t){e.updateCallback=t},updateContent:function(t){e.form&&e.form.patchComponent(t)},getContent:function(){return e.form?$t.copy(e.form.component):undefined},onContentChange:function(){return},addContentChangeEvent:function(t){e.onChangeEvents.push(t);return function(){var n=e.onChangeEvents.findIndex((function(e){return e===t}));if(n>-1){e.onChangeEvents.splice(n,1)}}},triggerContentChangeEvents:function(){e.onChangeEvents.forEach((function(t){t($t.copy(e.form.component))}))},clearMessages:function(){e.form.removeValidationMessages()},switchToTabContainingQualifier:function(t){e.targetedQualifier=t},considerFormDirty:function(){e.initialDirty=true},setInProgress:function(t){e.inProgress=t},isSubmitDisabled:function(){return e.isSubmitDisabled()},getLanguages:function(){return null},setAlwaysEnableSubmit:function(t){e.alwaysEnableSubmit=t}}};var hs=new s.InjectionToken("GENERIC_EDITOR_WIDGET_DATA");window.__smartedit__.addDecoratorPayload("Component","BooleanComponent",{selector:"se-boolean",template:'<div class="se-boolean fd-form__item fd-form__item--check"><span class="fd-toggle fd-toggle--xs fd-form__control"><label class="fd-form__label" for="{{qualifierId}}-checkbox"><input type="checkbox" id="{{qualifierId}}-checkbox" class="se-boolean__input" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="!widget.field.editable" [(ngModel)]="widget.model[widget.qualifier]"/> <span class="fd-toggle__switch" role="presentation"></span></label></span><p *ngIf="widget.field.labelText && !widget.model[widget.qualifier]" class="se-boolean__text">{{widget.field.labelText| translate}}</p></div>'});var vs=function(){function BooleanComponent(e){this.widget=e}BooleanComponent.prototype.ngOnInit=function(){this.qualifierId=this.widget.qualifier+B.generateIdentifier();if(this.widget.model[this.widget.qualifier]===undefined){var e=this.widget.field.defaultValue!==undefined?this.widget.field.defaultValue:false;this.widget.model[this.widget.qualifier]=e;this.widget.editor.pristine[this.widget.qualifier]=e}};BooleanComponent=__decorate([s.Component({selector:"se-boolean",template:'<div class="se-boolean fd-form__item fd-form__item--check"><span class="fd-toggle fd-toggle--xs fd-form__control"><label class="fd-form__label" for="{{qualifierId}}-checkbox"><input type="checkbox" id="{{qualifierId}}-checkbox" class="se-boolean__input" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="!widget.field.editable" [(ngModel)]="widget.model[widget.qualifier]"/> <span class="fd-toggle__switch" role="presentation"></span></label></span><p *ngIf="widget.field.labelText && !widget.model[widget.qualifier]" class="se-boolean__text">{{widget.field.labelText| translate}}</p></div>'}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],BooleanComponent);return BooleanComponent}();var fs=function(){function BooleanModule(){}BooleanModule=__decorate([s.NgModule({imports:[u.CommonModule,S.FormsModule,m.TranslateModule.forChild()],declarations:[vs],entryComponents:[vs],exports:[vs]})],BooleanModule);return BooleanModule}();var _s=new s.InjectionToken("resolvedLocaleToMomentLocaleMap");var ys=new s.InjectionToken("tooltipsMap");var Cs=function(){DateTimePickerLocalizationService.$inject=["translate","resolvedLocaleToMomentLocaleMap","tooltipsMap","languageService"];function DateTimePickerLocalizationService(e,t,n,i){this.translate=e;this.resolvedLocaleToMomentLocaleMap=t;this.tooltipsMap=n;this.languageService=i}DateTimePickerLocalizationService.prototype.localizeDateTimePicker=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,this.localizeDateTimePickerUI(e)];case 1:t.sent();this.localizeDateTimePickerTooltips(e);return[2]}}))}))};DateTimePickerLocalizationService.prototype.localizeDateTimePicker.$inject=["datetimepicker"];DateTimePickerLocalizationService.prototype.convertResolvedToMomentLocale=function(e){var t=this.resolvedLocaleToMomentLocaleMap[e];if(t){return t}else{return e}};DateTimePickerLocalizationService.prototype.convertResolvedToMomentLocale.$inject=["resolvedLocale"];DateTimePickerLocalizationService.prototype.getLocalizedTooltips=function(){var e={};for(var t in this.tooltipsMap){if(this.tooltipsMap.hasOwnProperty(t)){e[t]=this.translate.instant(this.tooltipsMap[t])}}return e};DateTimePickerLocalizationService.prototype.compareTooltips=function(e,t){for(var n in this.tooltipsMap){if(e[n]!==t[n]){return false}}return true};DateTimePickerLocalizationService.prototype.compareTooltips.$inject=["tooltips1","tooltips2"];DateTimePickerLocalizationService.prototype.localizeDateTimePickerUI=function(e){var t=this;return this.languageService.getResolveLocale().then((function(n){var i=t.convertResolvedToMomentLocale(n);if(e.locale()!==i){e.locale(i)}}))};DateTimePickerLocalizationService.prototype.localizeDateTimePickerUI.$inject=["datetimepicker"];DateTimePickerLocalizationService.prototype.localizeDateTimePickerTooltips=function(e){var t=e.tooltips();var n=this.getLocalizedTooltips();if(!this.compareTooltips(t,n)){e.tooltips(n)}};DateTimePickerLocalizationService.prototype.localizeDateTimePickerTooltips.$inject=["datetimepicker"];DateTimePickerLocalizationService=__decorate([SeDowngradeService(),__param(1,s.Inject(_s)),__param(2,s.Inject(ys)),__metadata("design:paramtypes",[m.TranslateService,Object,Object,Oi])],DateTimePickerLocalizationService);return DateTimePickerLocalizationService}();var Ss={format:pt.MOMENT_FORMAT,keepOpen:true,minDate:new Date(0),showClear:true,showClose:true,useCurrent:false,widgetPositioning:{horizontal:"right",vertical:"bottom"}};var bs={in:"id",zh:"zh-cn"};var Is={today:"se.datetimepicker.today",clear:"se.datetimepicker.clear",close:"se.datetimepicker.close",selectMonth:"se.datetimepicker.selectmonth",prevMonth:"se.datetimepicker.previousmonth",nextMonth:"se.datetimepicker.nextmonth",selectYear:"se.datetimepicker.selectyear",prevYear:"se.datetimepicker.prevyear",nextYear:"se.datetimepicker.nextyear",selectDecade:"se.datetimepicker.selectdecade",prevDecade:"se.datetimepicker.prevdecade",nextDecade:"se.datetimepicker.nextdecade",prevCentury:"se.datetimepicker.prevcentury",nextCentury:"se.datetimepicker.nextcentury",pickHour:"se.datetimepicker.pickhour",incrementHour:"se.datetimepicker.incrementhour",decrementHour:"se.datetimepicker.decrementhour",pickMinute:"se.datetimepicker.pickminute",incrementMinute:"se.datetimepicker.incrementminute",decrementMinute:"se.datetimepicker.decrementminute",pickSecond:"se.datetimepicker.picksecond",incrementSecond:"se.datetimepicker.incrementsecond",decrementSecond:"se.datetimepicker.decrementsecond",togglePeriod:"se.datetimepicker.toggleperiod",selectTime:"se.datetimepicker.selecttime"};var ws=function(){function DateFormatterDirective(e,t,n,i){this.ngModel=e;this.element=t;this.renderer=n;this.datePipe=i}DateFormatterDirective.prototype.ngOnInit=function(){var e=this;this.ngModel.valueChanges.subscribe((function(t){var n=e.datePipe.transform(t,e.formatType||pt.ANGULAR_FORMAT);if(n!==t){e.renderer.setProperty(e.element.nativeElement,"value",n)}}))};__decorate([s.Input(),__metadata("design:type",String)],DateFormatterDirective.prototype,"formatType",void 0);DateFormatterDirective=__decorate([s.Directive({selector:"[ngModel][dateFormatter]",providers:[S.NgModel,u.DatePipe]}),__metadata("design:paramtypes",[S.NgModel,s.ElementRef,s.Renderer2,u.DatePipe])],DateFormatterDirective);return DateFormatterDirective}();window.__smartedit__.addDecoratorPayload("Component","DateTimePickerComponent",{selector:"se-date-time-picker",template:'<div #dateTimePicker *ngIf="isEditable" class="input-group se-date-field" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{\n            \'is-invalid\': widget.field.hasErrors,\n            \'is-warning\': widget.field.hasWarnings,\n            \'se-input--is-disabled\': !isEditable\n        }" [placeholder]="placeholderText | translate" [attr.name]="widget.field.qualifier"/> <span class="input-group-addon se-date-field--button" [ngClass]="{ \'se-date-field--button-has-error\': widget.field.hasErrors, \'se-date-field--button-has-warning\': widget.field.hasWarnings }"><span class="sap-icon--calendar se-date-field--button-icon"></span></span></div><div class="input-group date se-date-field" *ngIf="!isEditable" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{\'se-input--is-disabled\': !isEditable}" [(ngModel)]="widget.model[this.widget.qualifier]" dateFormatter formatType="short" [disabled]="true"/></div>'});var Es=function(){function DateTimePickerComponent(e,t,n){this.widget=e;this.yjQuery=t;this.dateTimePickerLocalizationService=n;this.placeholderText="se.componentform.select.date"}DateTimePickerComponent.prototype.ngAfterViewInit=function(){var e=this;if(this.isEditable){this.node.datetimepicker(Ss).on("dp.change",(function(){return e.handleDatePickerChange()})).on("dp.show",(function(){return e.handleDatePickerShow()}));if(this.widget.model[this.widget.qualifier]){setTimeout((function(){e.datetimepicker.date(d(e.widget.model[e.widget.qualifier]))}))}}};DateTimePickerComponent.prototype.handleDatePickerShow=function(){this.dateTimePickerLocalizationService.localizeDateTimePicker(this.datetimepicker)};DateTimePickerComponent.prototype.handleDatePickerChange=function(){var e=this.datetimepicker.date();this.widget.model[this.widget.qualifier]=e?zt.formatDateAsUtc(e):undefined};Object.defineProperty(DateTimePickerComponent.prototype,"node",{get:function(){return this.yjQuery(this.dateTimePickerElement.nativeElement)},enumerable:false,configurable:true});Object.defineProperty(DateTimePickerComponent.prototype,"datetimepicker",{get:function(){return this.node.datetimepicker().data("DateTimePicker")},enumerable:false,configurable:true});Object.defineProperty(DateTimePickerComponent.prototype,"isEditable",{get:function(){return!this.widget.isFieldDisabled()},enumerable:false,configurable:true});__decorate([s.ViewChild("dateTimePicker",{static:false}),__metadata("design:type",s.ElementRef)],DateTimePickerComponent.prototype,"dateTimePickerElement",void 0);DateTimePickerComponent=__decorate([s.Component({selector:"se-date-time-picker",template:'<div #dateTimePicker *ngIf="isEditable" class="input-group se-date-field" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{\n            \'is-invalid\': widget.field.hasErrors,\n            \'is-warning\': widget.field.hasWarnings,\n            \'se-input--is-disabled\': !isEditable\n        }" [placeholder]="placeholderText | translate" [attr.name]="widget.field.qualifier"/> <span class="input-group-addon se-date-field--button" [ngClass]="{ \'se-date-field--button-has-error\': widget.field.hasErrors, \'se-date-field--button-has-warning\': widget.field.hasWarnings }"><span class="sap-icon--calendar se-date-field--button-icon"></span></span></div><div class="input-group date se-date-field" *ngIf="!isEditable" id="date-time-picker-{{widget.field.qualifier}}"><input type="text" class="fd-form-control se-date-field--input" [ngClass]="{\'se-input--is-disabled\': !isEditable}" [(ngModel)]="widget.model[this.widget.qualifier]" dateFormatter formatType="short" [disabled]="true"/></div>'}),__param(0,s.Inject(hs)),__param(1,s.Inject(Ki)),__metadata("design:paramtypes",[Object,Function,Cs])],DateTimePickerComponent);return DateTimePickerComponent}();var Ps=function(){function DateTimePickerModule(){}DateTimePickerModule=__decorate([s.NgModule({imports:[u.CommonModule,S.FormsModule,m.TranslateModule.forChild()],providers:[{provide:_s,useValue:bs},{provide:ys,useValue:Is},Cs],declarations:[ws,Es],entryComponents:[Es],exports:[ws,Es]})],DateTimePickerModule);return DateTimePickerModule}();window.__smartedit__.addDecoratorPayload("Component","DropdownItemPrinterComponent",{selector:"se-dropdown-item-printer",template:" <span>{{ data.item.label }}</span> "});var Ts=function(){function DropdownItemPrinterComponent(e){this.data=e}DropdownItemPrinterComponent=__decorate([s.Component({selector:"se-dropdown-item-printer",template:" <span>{{ data.item.label }}</span> "}),__param(0,s.Inject(nr)),__metadata("design:paramtypes",[Object])],DropdownItemPrinterComponent);return DropdownItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","DropdownComponent",{selector:"se-dropdown-wrapper",template:'\n        <se-select\n            [id]="data.field.qualifier"\n            class="se-generic-editor-dropdown"\n            [(model)]="data.model[data.qualifier]"\n            [searchEnabled]="false"\n            [fetchStrategy]="fetchStrategy"\n            [itemComponent]="itemComponent"\n            [placeholder]="\'se.genericeditor.sedropdown.placeholder\'"\n        ></se-select>\n    '});var As=function(){function DropdownComponent(e){this.data=e;this.itemComponent=Ts;var t=e.field.options;this.fetchStrategy={fetchAll:function(){return Promise.resolve(t)}}}DropdownComponent=__decorate([s.Component({selector:"se-dropdown-wrapper",template:'\n        <se-select\n            [id]="data.field.qualifier"\n            class="se-generic-editor-dropdown"\n            [(model)]="data.model[data.qualifier]"\n            [searchEnabled]="false"\n            [fetchStrategy]="fetchStrategy"\n            [itemComponent]="itemComponent"\n            [placeholder]="\'se.genericeditor.sedropdown.placeholder\'"\n        ></se-select>\n    '}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],DropdownComponent);return DropdownComponent}();window.__smartedit__.addDecoratorPayload("Component","EditableDropdownComponent",{selector:"se-editable-dropdown",template:'<se-generic-editor-dropdown [id]="data.id" [field]="data.field" [qualifier]="data.qualifier" [model]="data.model"></se-generic-editor-dropdown>'});var Ds=function(){function EditableDropdownComponent(e){this.data=e}EditableDropdownComponent=__decorate([s.Component({selector:"se-editable-dropdown",template:'<se-generic-editor-dropdown [id]="data.id" [field]="data.field" [qualifier]="data.qualifier" [model]="data.model"></se-generic-editor-dropdown>'}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],EditableDropdownComponent);return EditableDropdownComponent}();var Os=function(){function EditableDropdownModule(){}EditableDropdownModule=__decorate([s.NgModule({imports:[u.CommonModule,Ar],declarations:[Ds],entryComponents:[Ds],exports:[Ds]})],EditableDropdownModule);return EditableDropdownModule}();window.__smartedit__.addDecoratorPayload("Component","EmailComponent",{selector:"se-email",template:'<input [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [max]="255" type="email" id="{{widget.field.qualifier}}-shortstring" class="fd-form-control"/>'});var Rs=function(){EmailComponent.$inject=["widget"];function EmailComponent(e){this.widget=e}EmailComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-email",template:'<input [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [max]="255" type="email" id="{{widget.field.qualifier}}-shortstring" class="fd-form-control"/>'}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],EmailComponent);return EmailComponent}();var Ms=function(){function EmailModule(){}EmailModule=__decorate([s.NgModule({imports:[u.CommonModule,m.TranslateModule.forChild(),S.FormsModule],declarations:[Rs],entryComponents:[Rs],exports:[Rs]})],EmailModule);return EmailModule}();window.__smartedit__.addDecoratorPayload("Component","EnumItemPrinterComponent",{selector:"se-enum-item-printer",template:' <span id="enum-{{ data.select.id }}">{{ data.item.label }}</span> '});var xs=function(){function EnumItemPrinterComponent(e){this.data=e}EnumItemPrinterComponent=__decorate([s.Component({selector:"se-enum-item-printer",template:' <span id="enum-{{ data.select.id }}">{{ data.item.label }}</span> '}),__param(0,s.Inject(nr)),__metadata("design:paramtypes",[Object])],EnumItemPrinterComponent);return EnumItemPrinterComponent}();window.__smartedit__.addDecoratorPayload("Component","EnumComponent",{selector:"se-enum",template:'\n        <se-select\n            [id]="data.field.qualifier"\n            class="se-generic-editor-dropdown"\n            [(model)]="data.model[data.qualifier]"\n            [isReadOnly]="data.isFieldDisabled()"\n            [resetSearchInput]="false"\n            [fetchStrategy]="fetchStrategy"\n            [itemComponent]="itemComponent"\n            [placeholder]="\'se.genericeditor.sedropdown.placeholder\'"\n            [showRemoveButton]="true"\n        ></se-select>\n    '});var Ns=function(){function EnumComponent(e){var t=this;this.data=e;this.itemComponent=xs;var n=e.editor,i=e.field,o=e.qualifier;this.fetchStrategy={fetchAll:function(e){return __awaiter(t,void 0,void 0,(function(){var t,r;return __generator(this,(function(a){switch(a.label){case 0:return[4,n.refreshOptions(i,o,e)];case 1:a.sent();t=i.options[o];r=t.map((function(e){return __assign(__assign({},e),{id:e.code})}));return[2,r]}}))}))}}}EnumComponent=__decorate([s.Component({selector:"se-enum",template:'\n        <se-select\n            [id]="data.field.qualifier"\n            class="se-generic-editor-dropdown"\n            [(model)]="data.model[data.qualifier]"\n            [isReadOnly]="data.isFieldDisabled()"\n            [resetSearchInput]="false"\n            [fetchStrategy]="fetchStrategy"\n            [itemComponent]="itemComponent"\n            [placeholder]="\'se.genericeditor.sedropdown.placeholder\'"\n            [showRemoveButton]="true"\n        ></se-select>\n    '}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],EnumComponent);return EnumComponent}();var ks="0.01";window.__smartedit__.addDecoratorPayload("Component","FloatComponent",{selector:"se-float",template:'<input pattern="^[-]?([0-9]*)(.[0-9]{1,5})?$" type="number" id="{{widget.field.qualifier}}-float" class="fd-form-control" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [step]="precision"/>'});var Fs=function(){FloatComponent.$inject=["widget"];function FloatComponent(e){this.widget=e;this.precision=ks}FloatComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-float",template:'<input pattern="^[-]?([0-9]*)(.[0-9]{1,5})?$" type="number" id="{{widget.field.qualifier}}-float" class="fd-form-control" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" [step]="precision"/>'}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],FloatComponent);return FloatComponent}();var zs=function(){function FloatModule(){}FloatModule=__decorate([s.NgModule({imports:[u.CommonModule,m.TranslateModule.forChild(),S.FormsModule],declarations:[Fs],entryComponents:[Fs],exports:[Fs]})],FloatModule);return FloatModule}();window.__smartedit__.addDecoratorPayload("Component","LongStringComponent",{template:'\n        <textarea\n            class="fd-form__control"\n            [ngClass]="{ \'is-invalid\': data.field.hasErrors, \'is-warning\': data.field.hasWarnings }"\n            [placeholder]="data.field.tooltip || \'\' | translate"\n            [attr.name]="data.field.qualifier"\n            [disabled]="data.isFieldDisabled()"\n            [(ngModel)]="data.model[data.qualifier]"\n        ></textarea>\n    ',selector:"se-long-string"});var Ls=function(){function LongStringComponent(e){this.data=e}LongStringComponent=__decorate([s.Component({template:'\n        <textarea\n            class="fd-form__control"\n            [ngClass]="{ \'is-invalid\': data.field.hasErrors, \'is-warning\': data.field.hasWarnings }"\n            [placeholder]="data.field.tooltip || \'\' | translate"\n            [attr.name]="data.field.qualifier"\n            [disabled]="data.isFieldDisabled()"\n            [(ngModel)]="data.model[data.qualifier]"\n        ></textarea>\n    ',selector:"se-long-string"}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],LongStringComponent);return LongStringComponent}();window.__smartedit__.addDecoratorPayload("Component","NumberComponent",{selector:"se-number",template:'<input [min]="1" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" id="{{widget.field.qualifier}}-number" class="fd-form-control" type="number"/>'});var Vs=function(){NumberComponent.$inject=["widget"];function NumberComponent(e){this.widget=e}NumberComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-number",template:'<input [min]="1" [ngClass]="{ \'is-invalid\': widget.field.hasErrors, \'is-warning\': widget.field.hasWarnings }" [placeholder]="(widget.field.tooltip || \'\') | translate" [attr.name]="widget.field.qualifier" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" id="{{widget.field.qualifier}}-number" class="fd-form-control" type="number"/>'}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],NumberComponent);return NumberComponent}();var $s=function(){function NumberModule(){}NumberModule=__decorate([s.NgModule({imports:[u.CommonModule,m.TranslateModule.forChild(),S.FormsModule],declarations:[Vs],entryComponents:[Vs],exports:[Vs]})],NumberModule);return NumberModule}();var Us=new s.InjectionToken("resolvedLocaleToCKEDITORLocaleMap");var js=new s.InjectionToken("richTextConfiguration");var Bs=function(){GenericEditorSanitizationService.$inject=["domSanitizer"];function GenericEditorSanitizationService(e){this.domSanitizer=e}GenericEditorSanitizationService.prototype.isSanitized=function(e){var t=this.domSanitizer.sanitize(s.SecurityContext.HTML,e).replace(/&#10;/g,"\n").replace(/&#160;/g," ").replace(/<br>/g,"<br />");var n=e.replace(/&#10;/g,"\n").replace(/&#160;/g," ").replace(/<br>/g,"<br />");return t===n};GenericEditorSanitizationService.prototype.isSanitized.$inject=["content"];GenericEditorSanitizationService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[I.DomSanitizer])],GenericEditorSanitizationService);return GenericEditorSanitizationService}();var Hs=function(){RichTextFieldLocalizationService.$inject=["languageService","resolvedLocaleToCKEDITORLocaleMap"];function RichTextFieldLocalizationService(e,t){this.languageService=e;this.resolvedLocaleToCKEDITORLocaleMap=t}RichTextFieldLocalizationService.prototype.localizeCKEditor=function(){var e=this;return this.languageService.getResolveLocale().then((function(t){CKEDITOR.config.language=e.convertResolvedToCKEditorLocale(t)}))};RichTextFieldLocalizationService.prototype.convertResolvedToCKEditorLocale=function(e){var t=this.resolvedLocaleToCKEDITORLocaleMap[e];if(t){return t}return e};RichTextFieldLocalizationService.prototype.convertResolvedToCKEditorLocale.$inject=["resolvedLocale"];RichTextFieldLocalizationService=__decorate([SeDowngradeService(),__param(1,s.Inject(Us)),__metadata("design:paramtypes",[Oi,Object])],RichTextFieldLocalizationService);return RichTextFieldLocalizationService}();var Gs=function(){function RichTextLoaderService(){var e=this;this.loadPromise=new Promise((function(t){e.checkLoadedInterval=setInterval((function(){if(CKEDITOR.status==="loaded"){t();clearInterval(e.checkLoadedInterval);e.checkLoadedInterval=null}}),100)}))}RichTextLoaderService.prototype.load=function(){return this.loadPromise};RichTextLoaderService=__decorate([SeDowngradeService(),__metadata("design:paramtypes",[])],RichTextLoaderService);return RichTextLoaderService}();window.__smartedit__.addDecoratorPayload("Component","RichTextFieldComponent",{selector:"se-rich-text-field",template:'<textarea #textarea class="fd-form__control" [ngClass]="{\'has-error\': widget.field.hasErrors}" name="{{widget.field.qualifier}}-{{widget.qualifier}}" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" (change)="reassignUserCheck()"></textarea><div *ngIf="requiresUserCheck()"><div id="richTextWarningMessage" [hidden]="widget.field.isUserChecked"><span fd-status-label [status]="\'warning\'" [icon]="\'message-warning\'">{{\'se.editor.richtext.message.warning\' | translate}}</span></div><input id="richTextWarningCheckBox" type="checkbox" [(ngModel)]="widget.field.isUserChecked" (click)="checkboxOnClick($event.target)"/> <span [ngClass]="{\'warning-check-msg\': true, \'not-checked\': widget.editor.hasFrontEndValidationErrors && !widget.field.isUserChecked}">{{\'se.editor.richtext.check\' | translate}}</span></div>'});var Ws=function(){RichTextFieldComponent.$inject=["widget","seRichTextLoaderService","seRichTextConfiguration","genericEditorSanitizationService","seRichTextFieldLocalizationService","settingsService"];function RichTextFieldComponent(e,t,n,i,o,r){this.widget=e;this.seRichTextLoaderService=t;this.seRichTextConfiguration=n;this.genericEditorSanitizationService=i;this.seRichTextFieldLocalizationService=o;this.settingsService=r}RichTextFieldComponent.prototype.ngAfterViewInit=function(){var e=this;return this.settingsService.get("cms.components.allowUnsafeJavaScript").then((function(t){return e.seRichTextLoaderService.load().then((function(){e.seRichTextConfiguration.allowedContent=t==="true";e.editorInstance=CKEDITOR.replace(e.textarea.nativeElement,e.seRichTextConfiguration);e.seRichTextFieldLocalizationService.localizeCKEditor();if(e.editorInstance){e.editorInstance.on("change",(function(){return e.onChange()}));e.editorInstance.on("mode",(function(){return e.onMode()}));CKEDITOR.on("instanceReady",(function(t){return e.onInstanceReady(t)}))}}))}))};RichTextFieldComponent.prototype.ngOnDestroy=function(){if(this.editorInstance&&CKEDITOR.instances[this.editorInstance.name]){CKEDITOR.instances[this.editorInstance.name].destroy()}};RichTextFieldComponent.prototype.onChange=function(){var e=this;setTimeout((function(){e.widget.model[e.widget.qualifier]=e.editorInstance.getData();e.reassignUserCheck();e.toggleSubmitButton(e.requiresUserCheck()&&!e.widget.field.isUserChecked)}))};RichTextFieldComponent.prototype.onMode=function(){var e=this;if(this.editorInstance.mode==="source"){var t=this.editorInstance.editable();t.attachListener(t,"input",(function(){e.editorInstance.fire("change")}))}};RichTextFieldComponent.prototype.onInstanceReady=function(e){var t=CKEDITOR.dtd;var n=__assign(__assign(__assign(__assign(__assign({},t.$nonBodyContent),t.$block),t.$listItem),t.$tableContent),{br:1});for(var i=0,o=Object.keys(n);i<o.length;i++){var r=o[i];e.editor.dataProcessor.writer.setRules(r,{indent:false,breakBeforeOpen:false,breakAfterOpen:false,breakBeforeClose:false,breakAfterClose:false})}e.editor.dataProcessor.writer.lineBreakChars="";e.editor.dataProcessor.writer.indentationChars=""};RichTextFieldComponent.prototype.onInstanceReady.$inject=["ev"];RichTextFieldComponent.prototype.requiresUserCheck=function(){var e=false;for(var t in this.widget.field.requiresUserCheck){if(this.widget.field.requiresUserCheck.hasOwnProperty(t)){e=e||this.widget.field.requiresUserCheck[t]}}return e};RichTextFieldComponent.prototype.reassignUserCheck=function(){if(this.widget.model&&this.widget.qualifier&&this.widget.model[this.widget.qualifier]){var e=this.genericEditorSanitizationService.isSanitized(this.widget.model[this.widget.qualifier]);this.widget.field.requiresUserCheck=this.widget.field.requiresUserCheck||{};this.widget.field.requiresUserCheck[this.widget.qualifier]=!e}else{this.widget.field.requiresUserCheck=this.widget.field.requiresUserCheck||{};this.widget.field.requiresUserCheck[this.widget.qualifier]=false}};RichTextFieldComponent.prototype.checkboxOnClick=function(e){this.toggleSubmitButton(!e.checked)};RichTextFieldComponent.prototype.checkboxOnClick.$inject=["event"];RichTextFieldComponent.prototype.toggleSubmitButton=function(e){this.widget.editor.api.setInProgress(e)};RichTextFieldComponent.prototype.toggleSubmitButton.$inject=["state"];__decorate([s.ViewChild("textarea",{static:false}),__metadata("design:type",s.ElementRef)],RichTextFieldComponent.prototype,"textarea",void 0);RichTextFieldComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-rich-text-field",template:'<textarea #textarea class="fd-form__control" [ngClass]="{\'has-error\': widget.field.hasErrors}" name="{{widget.field.qualifier}}-{{widget.qualifier}}" [disabled]="widget.isFieldDisabled()" [(ngModel)]="widget.model[widget.qualifier]" (change)="reassignUserCheck()"></textarea><div *ngIf="requiresUserCheck()"><div id="richTextWarningMessage" [hidden]="widget.field.isUserChecked"><span fd-status-label [status]="\'warning\'" [icon]="\'message-warning\'">{{\'se.editor.richtext.message.warning\' | translate}}</span></div><input id="richTextWarningCheckBox" type="checkbox" [(ngModel)]="widget.field.isUserChecked" (click)="checkboxOnClick($event.target)"/> <span [ngClass]="{\'warning-check-msg\': true, \'not-checked\': widget.editor.hasFrontEndValidationErrors && !widget.field.isUserChecked}">{{\'se.editor.richtext.check\' | translate}}</span></div>'}),__param(0,s.Inject(hs)),__param(2,s.Inject(js)),__metadata("design:paramtypes",[Object,Gs,Object,Bs,Hs,Gi])],RichTextFieldComponent);return RichTextFieldComponent}();var qs=function(){function RichTextFieldModule(){}RichTextFieldModule=__decorate([s.NgModule({imports:[u.CommonModule,S.FormsModule,m.TranslateModule.forChild(),h.BadgeLabelModule],providers:[Bs,Hs,Gs,Gi,{provide:Us,useValue:{in:"id",es_CO:"es"}},{provide:js,useValue:{toolbar:"full",toolbar_full:[{name:"basicstyles",items:["Bold","Italic","Strike","Underline"]},{name:"paragraph",items:["BulletedList","NumberedList","Blockquote"]},{name:"editing",items:["JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"tools",items:["SpellChecker","Maximize"]},"/",{name:"styles",items:["Format","Font","FontSize","TextColor","PasteText","PasteFromWord","RemoveFormat"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"forms",items:["Outdent","Indent"]},"/",{name:"clipboard",items:["Undo","Redo"]},{name:"document",items:["PageBreak","Source"]}],disableNativeSpellChecker:false,height:"100px",width:"100%",autoParagraph:false,basicEntities:false,fillEmptyBlocks:false,extraAllowedContent:"div(*)[role]",extraPlugins:"colorbutton, colordialog, font",font_names:"Arial/Arial, Helvetica, sans-serif;Times New Roman/Times New Roman, Times, serif;Verdana",fontSize_sizes:"10/10px;12/12px;14/14px;16/16px;18/18px;20/20px;22/22px;24/24px;36/36px;48/48px;",protectedSource:[/\r|\n|\r\n|\t/g]}}],declarations:[Ws],entryComponents:[Ws],exports:[Ws]})],RichTextFieldModule);return RichTextFieldModule}();window.__smartedit__.addDecoratorPayload("Component","ShortStringComponent",{template:'\n        <input\n            type="text"\n            id="{{ data.field.qualifier }}-shortstring"\n            [ngClass]="{\n                \'is-invalid\': data.field.hasErrors,\n                \'is-warning\': data.field.hasWarnings\n            }"\n            class="fd-form-control"\n            [placeholder]="data.field.tooltip || \'\' | translate"\n            [attr.name]="data.field.qualifier"\n            [disabled]="data.isFieldDisabled()"\n            [(ngModel)]="data.model[data.qualifier]"\n        />\n    ',selector:"se-short-string"});var Ks=function(){function ShortStringComponent(e){this.data=e}ShortStringComponent=__decorate([s.Component({template:'\n        <input\n            type="text"\n            id="{{ data.field.qualifier }}-shortstring"\n            [ngClass]="{\n                \'is-invalid\': data.field.hasErrors,\n                \'is-warning\': data.field.hasWarnings\n            }"\n            class="fd-form-control"\n            [placeholder]="data.field.tooltip || \'\' | translate"\n            [attr.name]="data.field.qualifier"\n            [disabled]="data.isFieldDisabled()"\n            [(ngModel)]="data.model[data.qualifier]"\n        />\n    ',selector:"se-short-string"}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],ShortStringComponent);return ShortStringComponent}();window.__smartedit__.addDecoratorPayload("Component","TextComponent",{template:" <p [id]=\"data.field.qualifier + '-text'\">{{ data.model[data.qualifier] }}</p> ",selector:"se-component-text"});var Ys=function(){function TextComponent(e){this.data=e}TextComponent=__decorate([s.Component({template:" <p [id]=\"data.field.qualifier + '-text'\">{{ data.model[data.qualifier] }}</p> ",selector:"se-component-text"}),__param(0,s.Inject(hs)),__metadata("design:paramtypes",[Object])],TextComponent);return TextComponent}();var Xs="0.01";var Zs=function(){EditorFieldMappingService.$inject=["logService"];function EditorFieldMappingService(e){this.logService=e;this._editorsFieldMapping=[];this._fieldsTabsMapping=[]}e=EditorFieldMappingService;EditorFieldMappingService.prototype.addFieldMapping=function(e,t,n,i){this._addMapping(e,t,n,i,this._editorsFieldMapping)};EditorFieldMappingService.prototype.addFieldMapping.$inject=["structureTypeName","componentTypeName","discriminator","configuration"];EditorFieldMappingService.prototype.getEditorFieldMapping=function(e,t){var n=this._getMapping(e,t,this._editorsFieldMapping);if(!n){this.logService.warn("editorFieldMappingService - Cannot find suitable field mapping for type ",e.cmsStructureType);n=null}else if(n&&n.template){n.template=this._cleanTemplate(n.template)}return n};EditorFieldMappingService.prototype.getEditorFieldMapping.$inject=["field","componentTypeStructure"];EditorFieldMappingService.prototype.addFieldTabMapping=function(e,t,n,i){this._addMapping(e,t,n,i,this._fieldsTabsMapping)};EditorFieldMappingService.prototype.addFieldTabMapping.$inject=["structureTypeName","componentTypeName","discriminator","tabId"];EditorFieldMappingService.prototype.getFieldTabMapping=function(e,t){return this._getMapping(e,t,this._fieldsTabsMapping)};EditorFieldMappingService.prototype.getFieldTabMapping.$inject=["field","componentTypeStructure"];EditorFieldMappingService.prototype._addMapping=function(e,t,n,i,o){e=this._validateField(e);t=this._validateField(t);n=this._validateField(n);var r={structureTypeMatcher:e,componentTypeMatcher:t,discriminatorMatcher:n,value:i};a.remove(o,(function(i){return i.structureTypeMatcher===e&&i.componentTypeMatcher===t&&i.discriminatorMatcher===n}));o.push(r)};EditorFieldMappingService.prototype._addMapping.$inject=["structureTypeMatcher","componentTypeMatcher","discriminatorMatcher","mappedValue","collection"];EditorFieldMappingService.prototype._validateField=function(t){if(t===null){t=e.WILDCARD}else if(typeof t!=="string"&&typeof t!=="function"){throw new Error("editorFieldMappingService: Mapping matcher must be of type string or function.")}return t};EditorFieldMappingService.prototype._validateField.$inject=["field"];EditorFieldMappingService.prototype._getMapping=function(e,t,n){var i=this;var o=null;var r=0;n.forEach((function(n){var a=i._evaluateMapping(n,e,t);if(a>r){o=n.value;r=a}}));return o};EditorFieldMappingService.prototype._getMapping.$inject=["field","componentTypeStructure","collection"];EditorFieldMappingService.prototype._evaluateMapping=function(t,n,i){var o;var r;var a=e.MATCH.NONE;var s=this._evaluateMatcher(t.structureTypeMatcher,n.cmsStructureType,n,i);if(s!==e.MATCH.NONE){o=this._evaluateMatcher(t.componentTypeMatcher,n.smarteditComponentType,n,i);if(o!==e.MATCH.NONE){r=this._evaluateMatcher(t.discriminatorMatcher,n.qualifier,n,i)}}if(s!==e.MATCH.NONE&&o!==e.MATCH.NONE&&r!==e.MATCH.NONE){a=s+o+r}return a};EditorFieldMappingService.prototype._evaluateMapping.$inject=["mappingEntry","field","componentTypeStructure"];EditorFieldMappingService.prototype._evaluateMatcher=function(t,n,i,o){if(typeof t==="string"){if(t===e.WILDCARD){return e.MATCH.PARTIAL}else{return this._exactValueMatchPredicate(t,n)?e.MATCH.EXACT:e.MATCH.NONE}}else{return t(n,i,o)?e.MATCH.EXACT:e.MATCH.NONE}};EditorFieldMappingService.prototype._evaluateMatcher.$inject=["matcher","actualValue","field","componentTypeStructure"];EditorFieldMappingService.prototype._registerDefaultFieldMappings=function(){if(!this._initialized){this._initialized=true;this.addFieldMapping("Boolean",null,null,{component:vs});this.addFieldMapping("ShortString",null,null,{component:Ks});this.addFieldMapping("Text",null,null,{component:Ys});this.addFieldMapping("LongString",null,null,{component:Ls});this.addFieldMapping("RichText",null,null,{component:Ws});this.addFieldMapping("Number",null,null,{component:Vs});this.addFieldMapping("Float",null,null,{component:Fs});this.addFieldMapping("Dropdown",null,null,{component:As});this.addFieldMapping("EditableDropdown",null,null,{component:Ds});this.addFieldMapping("DateTime",null,null,{component:Es});this.addFieldMapping("Enum",null,null,{component:Ns});this.addFieldMapping("Email",null,null,{component:Rs,validators:{email:function(e,t,n,i){return true}}})}};EditorFieldMappingService.prototype._cleanTemplate=function(e){var t=e?e.lastIndexOf("/"):-1;if(t!==-1){e=e.substring(t+1)}return e};EditorFieldMappingService.prototype._cleanTemplate.$inject=["template"];EditorFieldMappingService.prototype._exactValueMatchPredicate=function(e,t){return e===t};EditorFieldMappingService.prototype._exactValueMatchPredicate.$inject=["expectedValue","actualValue"];var e;EditorFieldMappingService.WILDCARD="*";EditorFieldMappingService.MATCH={NONE:0,PARTIAL:1,EXACT:4};EditorFieldMappingService=e=__decorate([SeDowngradeService(),s.Injectable(),__metadata("design:paramtypes",[o.LogService])],EditorFieldMappingService);return EditorFieldMappingService}();var Qs=function(){FetchEnumDataHandler.$inject=["restServiceFactory"];function FetchEnumDataHandler(e){this.restServiceFactory=e;this.restServiceForEnum=this.restServiceFactory.get(at)}e=FetchEnumDataHandler;FetchEnumDataHandler.resetForTests=function(){e.cache={}};FetchEnumDataHandler.prototype.findByMask=function(t,n){return(e.cache[t.cmsStructureEnumType]?Promise.resolve(e.cache[t.cmsStructureEnumType]):Promise.resolve(this.restServiceForEnum.get({enumClass:t.cmsStructureEnumType}))).then((function(i){e.cache[t.cmsStructureEnumType]=i;return e.cache[t.cmsStructureEnumType].enums.filter((function(e){return o.stringUtils.isBlank(n)||e.label.toUpperCase().indexOf(n.toUpperCase())>-1}))}))};FetchEnumDataHandler.prototype.findByMask.$inject=["field","search"];FetchEnumDataHandler.prototype.getById=function(e,t){return null};FetchEnumDataHandler.prototype.getById.$inject=["field","identifier"];var e;FetchEnumDataHandler.cache={};FetchEnumDataHandler=e=__decorate([SeDowngradeService(),s.Injectable(),__metadata("design:paramtypes",[o.RestServiceFactory])],FetchEnumDataHandler);return FetchEnumDataHandler}();var parseValidationMessage=function(e){var t=new RegExp("[a-zA-Z]+: ([|{)([a-zA-Z0-9]+)(]|}).?","g");var n=e.match(t)||[];return n.reduce((function(e,t){e.message=e.message.replace(t,"").trim();var n=t.split(":")[0].trim().toLowerCase();var i=t.split(":")[1].match(/[a-zA-Z0-9]+/g)[0];e[n]=i;return e}),{message:e})};var Js=function(){function SeValidationMessageParser(){}SeValidationMessageParser.prototype.parse=function(e){return parseValidationMessage(e)};SeValidationMessageParser.prototype.parse.$inject=["message"];SeValidationMessageParser=__decorate([SeDowngradeService(),s.Injectable()],SeValidationMessageParser);return SeValidationMessageParser}();var ec=function(){GenericEditorFactoryService.$inject=["yjQuery","restServiceFactory","languageService","sharedDataService","systemEventService","logService","upgrade","seValidationMessageParser","editorFieldMappingService"];function GenericEditorFactoryService(e,t,n,i,o,r,s,c,l){l._registerDefaultFieldMappings();this.genericEditorConstructor=function(){function class_1(e){var n=this;this.schema$=new g.BehaviorSubject(null);this.data$=new g.BehaviorSubject(null);this.submitButtonText="se.componentform.actions.submit";this.cancelButtonText="se.componentform.actions.cancel";this.api=createApi(this);this.onSubmit=function(e){if(n.smarteditComponentId){e.identifier=n.smarteditComponentId}if(n.editorCRUDService&&!n.smarteditComponentId){if(n.structure&&n.structure.type){if(!e.type){e.type=n.structure.type}}}return n.preparePayload(e).then((function(t){var i=n.editorCRUDService?n.smarteditComponentId?n.editorCRUDService.update(t):n.editorCRUDService.save(t):Promise.resolve(t);return i.then((function(t){return{payload:e,response:t}}))}))};this.submit$=function(){return g.from(n.submit(n.form.component))};this.onSuccess=function(e){var t;if(e.response){t=$t.copy(e.response)}else{t=$t.copy(e.payload)}delete t.identifier;if(!n.smarteditComponentId&&e.response){n.smarteditComponentId=e.response.uuid}n.form&&n.form.removeValidationMessages();n.inProgress=false;if(n.updateCallback){n.updateCallback(t,e.response)}};this.onFailure=function(e){n.form.removeValidationMessages();var t=e.error?e.error.errors:[];n.form.displayValidationMessages(t,true);var i=n.form.collectUnrelatedValidationMessages(t);if(i.length>0){o.publishAsync(ot,{messages:i,sourceGenericEditorId:n.id})}n.inProgress=false};this.isSubmitDisabled=function(){if(n.inProgress){return true}else if(!n.isDirty()||!n.isValid()){return!n.alwaysEnableSubmit}else{return false}};this._validate(e);this.id=e.id;this.inProgress=false;this.smarteditComponentType=e.smarteditComponentType;this.smarteditComponentId=e.smarteditComponentId;this.editorStackId=e.editorStackId||this.id;this.updateCallback=e.updateCallback;this.structure=e.structure;this.onChangeEvents=[];if(e.structureApi){this.editorStructureService=t.get(e.structureApi)}this.uriContext=e.uriContext;if(e.contentApi){this.editorCRUDService=t.get(e.contentApi)}this.initialContent=a.cloneDeep(e.content);this.initialDirty=false;if(e.customOnSubmit){this.onSubmit=e.customOnSubmit}this._unregisterUnrelatedMessagesEvent=o.subscribe(ot,this._handleUnrelatedValidationMessages.bind(this));this.element=e.element}Object.defineProperty(class_1.prototype,"pristine",{get:function(){return this.form?this.form.pristine:undefined},enumerable:false,configurable:true});Object.defineProperty(class_1.prototype,"nativeForm",{get:function(){return this.element.querySelector("form")},enumerable:false,configurable:true});class_1.prototype.setForm=function(e){var t=this;this.form=e;this.form.group.valueChanges.subscribe((function(){t.api.triggerContentChangeEvents()}))};class_1.prototype._finalize=function(){this._unregisterUnrelatedMessagesEvent();this.popEditorFromStack()};class_1.prototype.popEditorFromStack=function(){if(!this.editorStackId){return}o.publishAsync(xi.EDITOR_POP_FROM_STACK_EVENT,{editorStackId:this.editorStackId})};class_1.prototype.reset=function(e){var t=this;this.form&&this.form.removeValidationMessages();var i=this.editorStructureService?this.editorStructureService.get({smarteditComponentType:this.smarteditComponentType}):Promise.resolve(this.structure);return this._getUriContext().then((function(e){return Promise.all([t.api.getLanguages()||n.getLanguagesForSite(e[oe]),i.then((function(e){return t._convertStructureArray(e)})),Promise.resolve(e)])})).then((function(n){var i=n[0],o=n[1],r=n[2];var a={id:t.id,languages:i,structure:o,uriContext:r,smarteditComponentType:t.smarteditComponentType,targetedQualifier:t.targetedQualifier};t.schema$.next(a);t.data$.next(e?e:t.pristine);return}))};class_1.prototype.fetch=function(){if(!this.initialDirty){return this.initialContent?Promise.resolve(this.initialContent):this.smarteditComponentId?this.editorCRUDService.getById(this.smarteditComponentId).then((function(e){return e||{}})):Promise.resolve({})}return Promise.resolve({})};class_1.prototype.load=function(){var e=this;return this.fetch().then((function(t){return e.reset(t)}),(function(e){r.error("GenericEditor.load failed");r.error(e)}))};class_1.prototype.getComponent=function(){return this.form&&this.form.component||null};class_1.prototype.preparePayload=function(e){return Promise.resolve(this.form.sanitizedPayload(e))};class_1.prototype.submit=function(e){this.form.removeValidationMessages();this.hasFrontEndValidationErrors=false;if(!this.form.fieldsAreUserChecked()){this.hasFrontEndValidationErrors=true;return Promise.reject(true)}else if(this.isValid(true)){this.inProgress=true;return this.onSubmit(e)}else{r.warn("GenericEditor.submit() - unable to submit form. Form is unexpectedly invalid.");return Promise.reject({})}};class_1.prototype.refreshOptions=function(e,t,n){var i=this;return new Promise((function(o){var r=i._getRefreshHandleContructorOrToken(e.cmsStructureType);var a=i._getDataHandler(r);var s;var c;if(e.localized){s=i.form.component[e.qualifier][t];c=t}else{s=i.form.component[e.qualifier];c=e.qualifier}e.initiated=e.initiated||[];e.options=e.options||{};if(e.cmsStructureType==="Enum"){e.initiated.push(c)}if(e.initiated.indexOf(c)>-1){if(n.length>2||e.cmsStructureType==="Enum"){return a.findByMask(e,n).then((function(t){e.options[c]=t;o()}))}}else if(s){return a.getById(e,s).then((function(t){e.options[c]=[t];e.initiated.push(c);o()}))}else{e.initiated.push(c)}return o()}))};class_1.prototype.isDirty=function(e,t){return this.initialDirty||(this.form?this.form.isDirty(e,t):false)};class_1.prototype.isValid=function(e){if(e===void 0){e=false}if(e){var t=this.form.collectFrontEndValidationErrors(e,this.nativeForm);this.form.removeFrontEndValidationMessages();this.form.displayValidationMessages(t,e)}return!!this.form&&this.form.group.valid};class_1.prototype.watchFormErrors=function(e){this.form.watchErrors(e)};class_1.prototype.init=function(){var e=this;return this.load().then((function(){if(e.initialDirty){e.form.patchComponent(e.initialContent||{});e.data$.next(e.initialContent||{})}e._pushEditorToStack();o.publishAsync(it,e.id)}))};class_1.prototype._validate=function(e){if(B.isBlank(e.structureApi)&&!e.structure){throw new Error("genericEditor.configuration.error.no.structure")}else if(!B.isBlank(e.structureApi)&&e.structure){throw new Error("genericEditor.configuration.error.2.structures")}};class_1.prototype._getUriContext=function(){return Promise.resolve(this.uriContext?this.uriContext:i.get(kt).then((function(e){var t;return t={},t[oe]=e.siteDescriptor.uid,t[ne]=e.catalogDescriptor.catalogId,t[ie]=e.catalogDescriptor.catalogVersion,t})))};class_1.prototype._convertStructureArray=function(e){var t=e.structures||e.componentTypes;if(a.isArray(t)){if(t.length>1){throw new Error("init: Invalid structure, multiple structures returned")}e=t[0]}return e};class_1.prototype._handleUnrelatedValidationMessages=function(e,t){if(t.targetGenericEditorId&&t.targetGenericEditorId!==this.id){return}if(t.sourceGenericEditorId&&t.sourceGenericEditorId===this.id){return}this.form.removeValidationMessages();this.form.displayValidationMessages(t.messages,true)};class_1.prototype._getDataHandler=function(e){if(s.injector.get(e,null)){return s.injector.get(e)}if(s.$injector.has(e)){return s.$injector.get(e)}return null};class_1.prototype._getRefreshHandleContructorOrToken=function(e){switch(e){case"Enum":return Qs;default:return"fetch"+e+"DataHandler"}};class_1.prototype._pushEditorToStack=function(){o.publishAsync(xi.EDITOR_PUSH_TO_STACK_EVENT,{editorId:this.id,editorStackId:this.editorStackId,component:this.form.component,componentType:this.smarteditComponentType})};return class_1}()}GenericEditorFactoryService.prototype.getGenericEditorConstructor=function(){return this.genericEditorConstructor};GenericEditorFactoryService=__decorate([SeDowngradeService(),__param(0,s.Inject(Ki)),__metadata("design:paramtypes",[Function,o.RestServiceFactory,Oi,o.ISharedDataService,Kt,o.LogService,i.UpgradeModule,Js,Zs])],GenericEditorFactoryService);return GenericEditorFactoryService}();var tc=new Set(["id","smarteditComponentId","smarteditComponentType","structureApi","structure","contentApi","content","uriContext","updateCallback","customOnSubmit","editorStackId","modalHeaderTitle"]);window.__smartedit__.addDecoratorPayload("Component","GenericEditorComponent",{selector:"se-generic-editor",template:'<ng-template let-state [formBuilder]="{schema$: editor.schema$, data$: editor.data$}" (stateCreated)="setFormState($event)"><div class="se-generic-editor"><se-generic-editor-breadcrumb></se-generic-editor-breadcrumb><ng-container *ngIf="state; else noSupport"><form novalidate #nativeForm class="no-enter-submit se-generic-editor__form" [contentManager]="{onSave: editor.submit$}" (onSuccess)="editor.onSuccess($event)" (onError)="editor.onFailure($event)"><div class="modal-header se-generic-editor__header" *ngIf="modalHeaderTitle"><h4 class="modal-title">{{modalHeaderTitle| translate}}</h4></div><div class="se-generic-editor__body"><ng-template [formRenderer]="state.group"></ng-template></div><div class="se-generic-editor__footer modal-footer" *ngIf="editor && showCommands()"><button fd-button id="cancel" type="button" options="light" *ngIf="showCancel()" (click)="_reset()">{{editor.cancelButtonText | translate}}</button> <button fd-button id="submit" name="submit" options="emphasized" *ngIf="showSubmit()" [seSubmitBtn]="editor.isSubmitDisabled">{{editor.submitButtonText | translate}}</button></div></form></ng-container><ng-template #noSupport><div class="se-generic-editor__body"><se-message type="info" id="GenericEditor.NoEditingSupportDisclaimer"><ng-container se-message-description>{{ \'se.editor.notification.editing.not.supported\' | translate }}</ng-container></se-message></div></ng-template></div></ng-template>'});var nc=function(){GenericEditorComponent.$inject=["elementRef","genericEditorFactoryService","yjQuery"];function GenericEditorComponent(e,t,n){var i=this;this.elementRef=e;this.genericEditorFactoryService=t;this.yjQuery=n;this.submit=null;this.reset=null;this.isDirty=null;this.isValid=null;this.getApi=new s.EventEmitter;this.submitChange=new s.EventEmitter;this.resetChange=new s.EventEmitter;this.isValidChange=new s.EventEmitter;this.isDirtyChange=new s.EventEmitter;this.editor=null;this.componentForm=new S.FormGroup({});this.formInitialized$=new g.BehaviorSubject(null);this.formSet$=new g.BehaviorSubject(false);this.isSubmitDisabled=function(){return i.editor.isSubmitDisabled()}}Object.defineProperty(GenericEditorComponent.prototype,"nativeForm",{set:function(e){if(!e){return}this.formInitialized$.next(e.nativeElement)},enumerable:false,configurable:true});GenericEditorComponent.prototype.ngOnChanges=function(e){var t=!!Object.keys(e).find((function(e){return tc.has(e)}));if(!t){return}if(this.editor){this.editor._finalize()}var n=this.genericEditorFactoryService.getGenericEditorConstructor();this.editor=new n({id:this.id||B.generateIdentifier(),smarteditComponentType:this.smarteditComponentType,smarteditComponentId:this.smarteditComponentId,editorStackId:this.editorStackId,structureApi:this.structureApi,structure:this.structure,contentApi:this.contentApi,updateCallback:this.updateCallback,content:this.content,uriContext:this.uriContext,customOnSubmit:this.customOnSubmit,element:this.elementRef.nativeElement});this.getApi.emit(this.editor.api);this.editor.init()};GenericEditorComponent.prototype.ngOnChanges.$inject=["changes"];GenericEditorComponent.prototype.ngOnInit=function(){var e=this;this.showResetButton=a.isNull(this.reset);this.showSubmitButton=a.isNull(this.submit);setTimeout((function(){e.submitChange.emit((function(){return e.contentManager.save().toPromise().then((function(e){return e.response}))}));e.isValidChange.emit((function(){return e._isValid()}));e.isDirtyChange.emit((function(){return e._isDirty()}));e.resetChange.emit((function(){return e._reset()}))}));g.combineLatest(this.formSet$,this.formInitialized$).pipe(f.filter((function(e){return e.every((function(e){return!!e}))})),f.take(1)).subscribe((function(t){var n=t[0],i=t[1];return e.editor.watchFormErrors(i)}))};GenericEditorComponent.prototype.ngOnDestroy=function(){this.editor._finalize()};GenericEditorComponent.prototype.ngAfterViewInit=function(){this.yjQuery(this.yjQuery(".no-enter-submit")[0]).bind("keypress",(function(e){return e.key!=="Enter"}))};GenericEditorComponent.prototype.setFormState=function(e){this.editor.setForm(e);this.formSet$.next(true)};GenericEditorComponent.prototype.setFormState.$inject=["state"];GenericEditorComponent.prototype.showCommands=function(){return this.showCancel()||this.showSubmit()};GenericEditorComponent.prototype.showCancel=function(){return this.editor.alwaysShowReset||this.showResetButton===true&&this.editor.isDirty()&&this.editor.isValid()};GenericEditorComponent.prototype.showSubmit=function(){return this.editor.alwaysShowSubmit||this.showSubmitButton===true&&this.editor.isDirty()&&this.editor.isValid()};GenericEditorComponent.prototype._reset=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){if(this.editor.onReset&&this.editor.onReset()===false){return[2]}return[2,this.editor.reset()]}))}))};GenericEditorComponent.prototype._isValid=function(){return this.editor.isValid()};GenericEditorComponent.prototype._isDirty=function(){return this.editor?this.editor.isDirty():false};__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"id",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"smarteditComponentId",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"smarteditComponentType",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"structureApi",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorComponent.prototype,"structure",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"contentApi",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorComponent.prototype,"content",void 0);__decorate([s.Input(),__metadata("design:type",Promise)],GenericEditorComponent.prototype,"uriContext",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"submit",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"reset",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"isDirty",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"isValid",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"updateCallback",void 0);__decorate([s.Input(),__metadata("design:type",Function)],GenericEditorComponent.prototype,"customOnSubmit",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"editorStackId",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorComponent.prototype,"modalHeaderTitle",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],GenericEditorComponent.prototype,"getApi",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],GenericEditorComponent.prototype,"submitChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],GenericEditorComponent.prototype,"resetChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],GenericEditorComponent.prototype,"isValidChange",void 0);__decorate([s.Output(),__metadata("design:type",s.EventEmitter)],GenericEditorComponent.prototype,"isDirtyChange",void 0);__decorate([s.ViewChild("nativeForm",{static:false,read:s.ElementRef}),__metadata("design:type",s.ElementRef),__metadata("design:paramtypes",[s.ElementRef])],GenericEditorComponent.prototype,"nativeForm",null);__decorate([s.ViewChild(gs,{static:false}),__metadata("design:type",gs)],GenericEditorComponent.prototype,"contentManager",void 0);GenericEditorComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-generic-editor",template:'<ng-template let-state [formBuilder]="{schema$: editor.schema$, data$: editor.data$}" (stateCreated)="setFormState($event)"><div class="se-generic-editor"><se-generic-editor-breadcrumb></se-generic-editor-breadcrumb><ng-container *ngIf="state; else noSupport"><form novalidate #nativeForm class="no-enter-submit se-generic-editor__form" [contentManager]="{onSave: editor.submit$}" (onSuccess)="editor.onSuccess($event)" (onError)="editor.onFailure($event)"><div class="modal-header se-generic-editor__header" *ngIf="modalHeaderTitle"><h4 class="modal-title">{{modalHeaderTitle| translate}}</h4></div><div class="se-generic-editor__body"><ng-template [formRenderer]="state.group"></ng-template></div><div class="se-generic-editor__footer modal-footer" *ngIf="editor && showCommands()"><button fd-button id="cancel" type="button" options="light" *ngIf="showCancel()" (click)="_reset()">{{editor.cancelButtonText | translate}}</button> <button fd-button id="submit" name="submit" options="emphasized" *ngIf="showSubmit()" [seSubmitBtn]="editor.isSubmitDisabled">{{editor.submitButtonText | translate}}</button></div></form></ng-container><ng-template #noSupport><div class="se-generic-editor__body"><se-message type="info" id="GenericEditor.NoEditingSupportDisclaimer"><ng-container se-message-description>{{ \'se.editor.notification.editing.not.supported\' | translate }}</ng-container></se-message></div></ng-template></div></ng-template>'}),__param(2,s.Inject(Ki)),__metadata("design:paramtypes",[s.ElementRef,ec,Function])],GenericEditorComponent);return GenericEditorComponent}();var ic=function(){function GenericEditorTabService(){this._tabsConfiguration={};this._defaultTabPredicates=[]}e=GenericEditorTabService;GenericEditorTabService.prototype.configureTab=function(e,t){this._tabsConfiguration[e]=t};GenericEditorTabService.prototype.configureTab.$inject=["tabId","tabConfiguration"];GenericEditorTabService.prototype.getTabConfiguration=function(e){var t=this._tabsConfiguration[e];return t?t:null};GenericEditorTabService.prototype.getTabConfiguration.$inject=["tabId"];GenericEditorTabService.prototype.sortTabs=function(e){var t=this;return e.sort((function(e,n){var i=t.getTabPriority(e);var o=t.getTabPriority(n);if(o-i!==0){return o-i}else{if(e.id<n.id){return-1}else if(e.id>n.id){return 1}return 0}}))};GenericEditorTabService.prototype.sortTabs.$inject=["tabsToSort"];GenericEditorTabService.prototype.getComponentTypeDefaultTab=function(t){var n=null;this._defaultTabPredicates.some((function(e){n=e(t);return n!==null}));return n!==null?n:e.DEFAULT_TAB_ID};GenericEditorTabService.prototype.getComponentTypeDefaultTab.$inject=["componentTypeStructure"];GenericEditorTabService.prototype.addComponentTypeDefaultTabPredicate=function(e){if(!e||typeof e!=="function"){throw new Error("genericEditorTabService - provided predicate must be a function.")}this._defaultTabPredicates.push(e)};GenericEditorTabService.prototype.addComponentTypeDefaultTabPredicate.$inject=["predicate"];GenericEditorTabService.prototype.getTabPriority=function(t){var n=t.id;if(!n){throw new Error("genericEditorTabService - Every tab must have an id.")}var i=e.MIN_PRIORITY;if(this._tabsConfiguration[n]&&this._tabsConfiguration[n].priority){i=this._tabsConfiguration[n].priority}return i};GenericEditorTabService.prototype.getTabPriority.$inject=["tab"];var e;GenericEditorTabService.MIN_PRIORITY=0;GenericEditorTabService.DEFAULT_TAB_ID="default";GenericEditorTabService=e=__decorate([SeDowngradeService(),s.Injectable()],GenericEditorTabService);return GenericEditorTabService}();function genericEditorAngularJSTemplateBasedCustomElementClassFactory(e){return function(t){__extends(class_1,t);function class_1(){var n=t.call(this,e)||this;n.angularJSBody='\n            <div\n                class="ySEGenericEditorField ySEGenericEditorField__input-page-name--color"\n                data-ng-include="field.template"\n            ></div>\n        ';return n}class_1.prototype.internalConnectedCallback=function(){var e=this.parentElement.closest("se-generic-editor-field")||this.parentElement.closest("generic-editor-field");if(!e||!e.field){return}this.markAsProcessed();var t=e.editor,n=e.model,i=e.field,o=e.qualifier,r=e.id,a=e.editorStackId,s=e.isFieldDisabled,c=e.$ctrl;while(this.firstChild){this.removeChild(this.firstChild)}this.appendChild(window.smarteditJQuery(this.angularJSBody)[0]);this.scope=this.$rootScope.$new(false);var l=this.scope;l.editor=t;l.model=n;l.field=i;l.qualifier=o;l.id=r;l.editorStackId=a;l.isFieldDisabled=s;l.$ctrl=c;this.$compile(this)(this.scope)[0]};return class_1}(Gt)}var oc=function(){LegacyGEWidgetToCustomElementConverter.$inject=["upgrade","windowUtils"];function LegacyGEWidgetToCustomElementConverter(e,t){this.upgrade=e;this.windowUtils=t}e=LegacyGEWidgetToCustomElementConverter;LegacyGEWidgetToCustomElementConverter.prototype.convert=function(){if(!this.windowUtils.isIframe()&&!customElements.get(e.TEMPLATE_WIDGET_NAME)){var t=genericEditorAngularJSTemplateBasedCustomElementClassFactory(this.upgrade);customElements.define(e.TEMPLATE_WIDGET_NAME,t)}};var e;LegacyGEWidgetToCustomElementConverter.TEMPLATE_WIDGET_NAME="se-template-ge-widget";LegacyGEWidgetToCustomElementConverter=e=__decorate([s.Injectable(),__metadata("design:paramtypes",[i.UpgradeModule,L])],LegacyGEWidgetToCustomElementConverter);return LegacyGEWidgetToCustomElementConverter}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorBreadcrumbComponent",{selector:"se-generic-editor-breadcrumb",template:'\n        <div class="se-ge-breadcrumb">\n            <ng-container *ngIf="showBreadcrumb()">\n                <div\n                    *ngFor="let breadcrumbItem of getEditorsStack(); let i = index"\n                    class="se-ge-breadcrumb__item"\n                >\n                    <div class="se-ge-breadcrumb__data">\n                        <span class="se-ge-breadcrumb__title">\n                            {{ getComponentName(breadcrumbItem) | translate }}\n                        </span>\n                        <span class="se-ge-breadcrumb__info">\n                            {{ breadcrumbItem.componentType | translate }}\n                        </span>\n                    </div>\n\n                    <div\n                        class="se-ge-breadcrumb__divider sap-icon--navigation-right-arrow"\n                        *ngIf="i < getEditorsStack().length - 1"\n                    ></div>\n                </div>\n            </ng-container>\n        </div>\n    '});var rc=function(){function GenericEditorBreadcrumbComponent(e,t){this.genericEditorStackService=e;this.ge=t}GenericEditorBreadcrumbComponent.prototype.getEditorsStack=function(){if(!this.editorsStack){this.editorsStack=this.genericEditorStackService.getEditorsStack(this.ge.editorStackId)}return this.editorsStack};GenericEditorBreadcrumbComponent.prototype.showBreadcrumb=function(){return this.getEditorsStack()&&this.getEditorsStack().length>1};GenericEditorBreadcrumbComponent.prototype.getComponentName=function(e){if(!e.component.name){return"se.breadcrumb.name.empty"}return e.component.name};GenericEditorBreadcrumbComponent=__decorate([s.Component({selector:"se-generic-editor-breadcrumb",template:'\n        <div class="se-ge-breadcrumb">\n            <ng-container *ngIf="showBreadcrumb()">\n                <div\n                    *ngFor="let breadcrumbItem of getEditorsStack(); let i = index"\n                    class="se-ge-breadcrumb__item"\n                >\n                    <div class="se-ge-breadcrumb__data">\n                        <span class="se-ge-breadcrumb__title">\n                            {{ getComponentName(breadcrumbItem) | translate }}\n                        </span>\n                        <span class="se-ge-breadcrumb__info">\n                            {{ breadcrumbItem.componentType | translate }}\n                        </span>\n                    </div>\n\n                    <div\n                        class="se-ge-breadcrumb__divider sap-icon--navigation-right-arrow"\n                        *ngIf="i < getEditorsStack().length - 1"\n                    ></div>\n                </div>\n            </ng-container>\n        </div>\n    '}),__param(1,s.Inject(s.forwardRef((function(){return nc})))),__metadata("design:paramtypes",[xi,nc])],GenericEditorBreadcrumbComponent);return GenericEditorBreadcrumbComponent}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorDynamicFieldComponent",{selector:"se-ge-dynamic-field",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'\n        <se-generic-editor-field\n            [formControl]="form"\n            [field]="field"\n            [model]="component"\n            [qualifier]="qualifier"\n            [id]="id"\n        ></se-generic-editor-field>\n    '});var ac=function(){function GenericEditorDynamicFieldComponent(){}__decorate([o.DynamicForm(),__metadata("design:type",o.FormField)],GenericEditorDynamicFieldComponent.prototype,"form",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Object)],GenericEditorDynamicFieldComponent.prototype,"component",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Object)],GenericEditorDynamicFieldComponent.prototype,"field",void 0);__decorate([o.DynamicInput(),__metadata("design:type",String)],GenericEditorDynamicFieldComponent.prototype,"qualifier",void 0);__decorate([o.DynamicInput(),__metadata("design:type",String)],GenericEditorDynamicFieldComponent.prototype,"id",void 0);GenericEditorDynamicFieldComponent=__decorate([s.Component({selector:"se-ge-dynamic-field",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'\n        <se-generic-editor-field\n            [formControl]="form"\n            [field]="field"\n            [model]="component"\n            [qualifier]="qualifier"\n            [id]="id"\n        ></se-generic-editor-field>\n    '})],GenericEditorDynamicFieldComponent);return GenericEditorDynamicFieldComponent}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorTabComponent",{selector:"se-ge-tab",template:'<div class="se-generic-editor__row ySErow" *ngFor="let field of fields" [ngClass]="\'se-generic-editor__row--\' + field.qualifier"><label [id]="field.qualifier + \'-label\'" class="se-control-label" *ngIf="!field.hidePrefixLabel && field.i18nKey" [ngClass]="{ required: field.required }">{{ field.i18nKey | lowercase | translate }}</label><div class="ySEGenericEditorFieldStructure" [id]="field.qualifier" [attr.data-cms-field-qualifier]="field.qualifier" [attr.data-cms-structure-type]="field.cmsStructureType"><ng-template [formRenderer]="getForm(field.qualifier)"></ng-template></div></div>'});var sc=function(){function GenericEditorTabComponent(e,t){this.ge=e;this.data=t}GenericEditorTabComponent.prototype.ngOnInit=function(){var e=this;var t=this.data,n=t.model,i=t.tabId;this.fields=n.getInput("fieldsMap")[i];var o=n.controls[i];this.forms=o.controls;this._subscription=o.statusChanges.subscribe((function(){var t=a.values(e.forms).some((function(e){var t=e.getInput("field");return t.messages&&t.messages.length>0}));e.data.tab.hasErrors=t}));Object.keys(this.forms).forEach((function(t){e.forms[t].setInput("id",e.ge.editor.id)}))};GenericEditorTabComponent.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()};GenericEditorTabComponent.prototype.getForm=function(e){return this.forms[e]};GenericEditorTabComponent=__decorate([s.Component({selector:"se-ge-tab",template:'<div class="se-generic-editor__row ySErow" *ngFor="let field of fields" [ngClass]="\'se-generic-editor__row--\' + field.qualifier"><label [id]="field.qualifier + \'-label\'" class="se-control-label" *ngIf="!field.hidePrefixLabel && field.i18nKey" [ngClass]="{ required: field.required }">{{ field.i18nKey | lowercase | translate }}</label><div class="ySEGenericEditorFieldStructure" [id]="field.qualifier" [attr.data-cms-field-qualifier]="field.qualifier" [attr.data-cms-structure-type]="field.cmsStructureType"><ng-template [formRenderer]="getForm(field.qualifier)"></ng-template></div></div>'}),__param(1,s.Inject(Br)),__metadata("design:paramtypes",[nc,Object])],GenericEditorTabComponent);return GenericEditorTabComponent}();var createValidatorMap=function(e,t,n,i,o){return Object.keys(e||{}).reduce((function(r,a){var s;return __assign(__assign({},r),(s={},s[a]=e[a](t,n,i,o),s))}),{})};var cc=function(){function RootSchemaDataMapper(e,t,n){this.mappers=e;this.tabs=t;this.fieldsMap=n}RootSchemaDataMapper.prototype.toValue=function(){return this.mappers.reduce((function(e,t){e[t.id]=t.toValue();return e}),{})};RootSchemaDataMapper.prototype.toSchema=function(){return{type:"group",component:"tabs",schemas:this.mappers.reduce((function(e,t){e[t.id]=t.toSchema();return e}),{}),inputs:{tabs:this.tabs,fieldsMap:this.fieldsMap}}};return RootSchemaDataMapper}();var lc="$$internal";var dc=function(){function InternalProperty(){this._map=new Map}InternalProperty.prototype.watch=function(e,t){var n=this;this._map.set(e,t);return function(){n._map.delete(e)}};InternalProperty.prototype.trigger=function(e,t){if(this._map.has(e)){this._map.get(e)(t)}};return InternalProperty}();var proxifyDataObject=function(e){var t=new dc;Object.defineProperty(e,lc,{get:function(){return t}});return new Proxy(e,{set:function(e,t,n){e[t]=n;e[lc].trigger(t,n);return true}})};var pc=new Set(a.values(rt));var uc={SHORT_STRING:"ShortString",LONG_STRING:"LongString"};var mc=function(){function GenericEditorState(e,t,n,i,o,r,a,s,c){var l=this;this.id=e;this.group=t;this.component=n;this.proxiedComponent=i;this.pristine=o;this.tabs=r;this.fields=a;this.languages=s;this.parameters=c;this.removeValidationMessages=function(){l.fields.forEach((function(e){e.messages=undefined;e.hasErrors=false;e.hasWarnings=false}))};this._qualifierFieldMap=this.fields.reduce((function(e,t){e.set(t.qualifier,t);return e}),new Map);this._formFields=this._buildFormFieldsArray(this.group)}GenericEditorState.prototype.removeFrontEndValidationMessages=function(){var e=this;this.fields.forEach((function(t){if(!Array.isArray(t.messages)){return}var n=(t.messages||[]).filter((function(e){return e.fromSubmit===undefined?true:e.fromSubmit}));t.messages=n.length?n:undefined;t.hasErrors=e._containsValidationMessageType(t.messages,rt.VALIDATION_ERROR);t.hasWarnings=e._containsValidationMessageType(t.messages,rt.WARNING)}))};GenericEditorState.prototype.validationMessageBelongsToCurrentInstance=function(e){return this._qualifierFieldMap.has(e.subject)};GenericEditorState.prototype.collectUnrelatedValidationMessages=function(e){var t=this;return e.filter((function(e){return t._isValidationMessageType(e.type)&&!t.validationMessageBelongsToCurrentInstance(e)}))};GenericEditorState.prototype.watchErrors=function(e){var t=this;var n=this._formFields.map((function(e){return e.statusChanges.pipe(f.startWith(null))}));g.combineLatest(__spreadArrays(n,[this.group.statusChanges.pipe(f.startWith(null))])).pipe(f.distinctUntilChanged((function(e,t){return a.isEqual(e,t)})),f.map((function(){return t.collectFrontEndValidationErrors(false,e)}))).subscribe((function(e){t.removeFrontEndValidationMessages();t.displayValidationMessages(e,false)}))};GenericEditorState.prototype.collectFrontEndValidationErrors=function(e,t){var n=this;e=e||false;return this._formFields.reduce((function(i,o){var r=o.getInput("field");if(function(){var e=Array.from(t||[]).find((function(e){return e.getAttribute("name")===r.qualifier}));return!!e&&!e.checkValidity()}()){i.push({type:rt.VALIDATION_ERROR,subject:r.qualifier,message:"se.editor.htmlo.validation.error",fromSubmit:e,isNonPristine:n.isDirty(r.qualifier)})}if(o.getError("required")&&o.touched){if(r.localized){var a=o.getInput("id");i.push({type:rt.VALIDATION_ERROR,subject:r.qualifier,message:"se.componentform.required.field",language:a,fromSubmit:e,isNonPristine:n.isDirty(r.qualifier,a)})}else{i.push({type:rt.VALIDATION_ERROR,subject:r.qualifier,message:"se.componentform.required.field",fromSubmit:e,isNonPristine:n.isDirty(r.qualifier)})}}return i}),[])};GenericEditorState.prototype.displayValidationMessages=function(e,t){var n=this;e.filter((function(e){return n._isValidationMessageType(e.type)&&(t||e.isNonPristine)})).forEach((function(e){e.type=e.type||rt.VALIDATION_ERROR;var t=n._qualifierFieldMap.get(e.subject);if(!t){return}if(!t.messages){t.messages=[]}var i=a.merge(e,n._getParseValidationMessage(e.message));i.marker=t.localized?i.language:t.qualifier;i.type=e.type;i.uniqId=B.encode(i);var o=t.messages.find((function(e){return e.uniqId===i.uniqId}));if(!o){t.messages.push(i);if(i.type===rt.VALIDATION_ERROR){t.hasErrors=true}else if(i.type===rt.WARNING){t.hasWarnings=true}}else{a.merge(o,i)}}));a.values(this.group.controls).forEach((function(e){e.updateValueAndValidity({emitEvent:true})}));return Promise.resolve()};GenericEditorState.prototype.isDirty=function(e,t){this._bcPristine=this._buildComparable(this.fields,this.pristine);var n=this._buildComparable(this.fields,this.component);var i=e?t?this._bcPristine[e][t]:this._bcPristine[e]:this._bcPristine;var o=e?t?n[e][t]:n[e]:n;return!a.isEqual(i,o)};GenericEditorState.prototype.fieldsAreUserChecked=function(){return this.fields.every((function(e){var t=false;for(var n in e.requiresUserCheck){if(e.requiresUserCheck.hasOwnProperty(n)){t=t||e.requiresUserCheck[n]}}return!t||e.isUserChecked}))};GenericEditorState.prototype.patchComponent=function(e){this._qualifierFieldMap.forEach((function(t){var n=t.localized,i=t.qualifier;if(n&&e[i]){e[i]=proxifyDataObject(e[i])}}));Object.assign(this.proxiedComponent,e)};GenericEditorState.prototype.sanitizedPayload=function(e){if(e===void 0){e=this.component}this.fields.filter((function(e){return e.cmsStructureType===uc.LONG_STRING||e.cmsStructureType===uc.SHORT_STRING||typeof e.customSanitize==="function"})).forEach((function(t){var n=t.qualifier,i=t.localized,o=t.customSanitize;if(e[n]!==undefined&&n in e){if(o){e[n]=o(e[n],B.sanitize);return}}}));return e};GenericEditorState.prototype.switchToTabContainingQualifier=function(e){var t=this;if(!e){return}this.tabs.forEach((function(n){n.active=!!t.group.get([n.id,e])}))};GenericEditorState.prototype._getParseValidationMessage=function(e){return parseValidationMessage(e)};GenericEditorState.prototype._containsValidationMessageType=function(e,t){var n=this;if(!Array.isArray(e)){return false}return e.some((function(e){return e.type===t&&n.validationMessageBelongsToCurrentInstance(e)}))};GenericEditorState.prototype._isValidationMessageType=function(e){return pc.has(e)};GenericEditorState.prototype._buildComparable=function(e,t){var n=this;if(!t){return t}var i={};e.forEach((function(e){var o=t[e.qualifier];if(e.localized){o=o;var r={};a.forEach(o,(function(t,i){if(!a.isUndefined(t)){r[i]=n._buildFieldComparable(t,e)}}));i[e.qualifier]=r}else{o=t[e.qualifier];i[e.qualifier]=n._buildFieldComparable(o,e)}}));a.forEach(t,(function(t,n){var o=!e.some((function(e){return e.qualifier===n}));if(o){i[n]=t}}));return a.omitBy(i,a.isUndefined)};GenericEditorState.prototype._buildFieldComparable=function(e,t){switch(t.cmsStructureType){case"RichText":return e!==undefined?B.sanitizeHTML(e):null;case"Boolean":return e!==undefined?e:false;default:return e}};GenericEditorState.prototype._buildFormFieldsArray=function(e,t){var n=this;if(t===void 0){t=[]}if(e instanceof o.FormField){t.push(e);return t}if(e instanceof o.FormGrouping){Object.keys(e.controls).forEach((function(i){var o=e.controls[i];n._buildFormFieldsArray(o,t)}));return t}return t};return GenericEditorState}();var gc=function(){function FieldSchemaDataMapper(e,t,n,i){this.id=e;this.structure=t;this.required=n;this.component=i}FieldSchemaDataMapper.prototype.toValue=function(){return this.component[this.id]};FieldSchemaDataMapper.prototype.toSchema=function(){return{type:"field",component:"field",validators:__assign({required:this.required&&this.structure.editable||undefined},createValidatorMap(this.structure.validators,this.id,this.structure,this.required,this.component)),inputs:{id:this.id,field:this.structure,qualifier:this.id,component:this.component}}};return FieldSchemaDataMapper}();var hc=function(){function LocalizedSchemaDataMapper(e,t,n,i,o){this.id=e;this.mappers=t;this.structure=n;this.languages=i;this.component=o}LocalizedSchemaDataMapper.prototype.toValue=function(){return this.mappers.reduce((function(e,t){e[t.id]=t.toValue();return e}),{})};LocalizedSchemaDataMapper.prototype.toSchema=function(){return{type:"group",component:"localized",schemas:this.mappers.reduce((function(e,t){e[t.id]=t.toSchema();return e}),{}),inputs:{field:this.structure,languages:this.languages,component:this.component}}};return LocalizedSchemaDataMapper}();var vc=function(){function TabSchemaDataMapper(e,t){this.id=e;this.mappers=t}TabSchemaDataMapper.prototype.toValue=function(){return this.mappers.reduce((function(e,t){e[t.id]=t.toValue();return e}),{})};TabSchemaDataMapper.prototype.toSchema=function(){return{type:"group",persist:false,schemas:this.mappers.reduce((function(e,t){e[t.id]=t.toSchema();return e}),{})}};return TabSchemaDataMapper}();var createFieldMapper=function(e,t,n,i){return new gc(e,t,n,i)};var createLocalizedMapper=function(e,t,n){if(n[e.qualifier]===undefined){n[e.qualifier]={}}n[e.qualifier]=proxifyDataObject(n[e.qualifier]);var i=t.map((function(t){var i=t.isocode,o=t.required;return createFieldMapper(i,e,e.required&&o,n[e.qualifier])}));return new hc(e.qualifier,i,e,t,n)};var createTabMapper=function(e,t,n,i){var o=t.map((function(e){if(e.localized){return createLocalizedMapper(e,n,i)}return createFieldMapper(e.qualifier,e,e.required,i)}));return new vc(e,o)};var createRootMapper=function(e,t,n,i){var o=a.toPairs(e).map((function(e){var i=e[0],o=e[1];return createTabMapper(i,o,n,t)}));return new cc(o,i,e)};var fc=function(){GenericEditorStateBuilderService.$inject=["editorFieldMappingService","genericEditorTabService","translateService","schemaCompiler"];function GenericEditorStateBuilderService(e,t,n,i){this.editorFieldMappingService=e;this.genericEditorTabService=t;this.translateService=n;this.schemaCompiler=i}GenericEditorStateBuilderService.prototype.buildState=function(e,t){var n=this;var i=this._fieldAdaptor(t);var o=[];var r=i.reduce((function(e,i){var r=n.editorFieldMappingService.getFieldTabMapping(i,t.structure);if(!r){r=n.genericEditorTabService.getComponentTypeDefaultTab(t.structure)}if(!e[r]){e[r]=[];o.push({id:r,title:"se.genericeditor.tab."+r+".title",component:sc})}e[r].push(i);return e}),{});this.genericEditorTabService.sortTabs(o);var a={siteId:t.uriContext[oe],catalogId:t.uriContext[ne],catalogVersion:t.uriContext[ie]};var s=$t.copy(e);var c=proxifyDataObject(s);var l=this._createMapper(r,c,t.languages,o);var d=this.schemaCompiler.compileGroup(l.toValue(),l.toSchema());var p=new mc(t.id,d,s,c,$t.copy(e),o,i,t.languages,a);p.switchToTabContainingQualifier(t.targetedQualifier);return p};GenericEditorStateBuilderService.prototype.buildState.$inject=["data","schema"];GenericEditorStateBuilderService.prototype._createMapper=function(e,t,n,i){return createRootMapper(e,t,n,i)};GenericEditorStateBuilderService.prototype._createMapper.$inject=["fieldsMap","component","languages","tabs"];GenericEditorStateBuilderService.prototype._fieldAdaptor=function(e){var t=this;var n=e.structure;return n.attributes.map((function(i){var o=t.editorFieldMappingService.getEditorFieldMapping(i,n);var r=Object.assign(i,o);if(r.editable===undefined){r.editable=true}if(!r.postfixText){var a=(n.type?n.type.toLowerCase():"")+"."+i.qualifier.toLowerCase()+".postfix.text";var s=t.translateService.instant(a);r.postfixText=s!==a?s:""}r.smarteditComponentType=e.smarteditComponentType;return r}))};GenericEditorStateBuilderService.prototype._fieldAdaptor.$inject=["schema"];GenericEditorStateBuilderService=__decorate([s.Injectable(),__metadata("design:paramtypes",[Zs,ic,m.TranslateService,o.SchemaCompilerService])],GenericEditorStateBuilderService);return GenericEditorStateBuilderService}();var _c=function(){function FormBuilderDirective(e,t,n){this.templateRef=e;this.viewContainer=t;this.stateBuilderService=n;this.stateCreated=new s.EventEmitter}Object.defineProperty(FormBuilderDirective.prototype,"formBuilder",{set:function(e){this._dispose();this._subscription=g.combineLatest(e.data$,e.schema$).subscribe(this._onDataStream.bind(this))},enumerable:false,configurable:true});FormBuilderDirective.prototype.ngOnDestroy=function(){this._dispose()};FormBuilderDirective.prototype._onDataStream=function(e){var t=e[0],n=e[1];if(!t||!n){return}this.viewContainer.clear();if(!n.structure){this.viewContainer.createEmbeddedView(this.templateRef,{$implicit:null});return}var i=this.stateBuilderService.buildState(t,n);this.stateCreated.emit(i);this.viewContainer.createEmbeddedView(this.templateRef,{$implicit:i})};FormBuilderDirective.prototype._dispose=function(){this._subscription&&this._subscription.unsubscribe();this.viewContainer.clear()};__decorate([s.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],FormBuilderDirective.prototype,"formBuilder",null);__decorate([s.Output(),__metadata("design:type",Object)],FormBuilderDirective.prototype,"stateCreated",void 0);FormBuilderDirective=__decorate([s.Directive({selector:"[formBuilder]"}),__metadata("design:paramtypes",[s.TemplateRef,s.ViewContainerRef,fc])],FormBuilderDirective);return FormBuilderDirective}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorFieldComponent",{selector:"se-generic-editor-field",providers:[{provide:S.NG_VALUE_ACCESSOR,useExisting:s.forwardRef((function(){return GenericEditorFieldComponent_1})),multi:true}],template:'<div [attr.validation-id]="field.qualifier" class="ySEField"><div *ngIf="field.template"><div #widget></div></div><ng-container *ngIf="field.component"><ng-container *ngComponentOutlet="field.component; injector: widgetInjector"></ng-container></ng-container><se-generic-editor-field-messages [field]="field" [qualifier]="qualifier"></se-generic-editor-field-messages><div *ngIf="field.postfix" class="ySEText ySEFieldPostfix">{{ field.postfix | translate }}</div></div>'});var yc=function(){GenericEditorFieldComponent.$inject=["elementRef","injector","ge"];function GenericEditorFieldComponent(e,t,n){this.elementRef=e;this.injector=t;this.ge=n}e=GenericEditorFieldComponent;GenericEditorFieldComponent.prototype.writeValue=function(e){this.model[this.qualifier]=e};GenericEditorFieldComponent.prototype.writeValue.$inject=["value"];GenericEditorFieldComponent.prototype.registerOnChange=function(e){this._onChange=e};GenericEditorFieldComponent.prototype.registerOnChange.$inject=["fn"];GenericEditorFieldComponent.prototype.registerOnTouched=function(e){this._onTouched=e};GenericEditorFieldComponent.prototype.registerOnTouched.$inject=["fn"];GenericEditorFieldComponent.prototype.ngOnInit=function(){var e=this;this.createInjector();this._unWatch=this.model[lc].watch(this.qualifier,(function(t){if(e._onChange&&e._onTouched){e._onTouched();e._onChange(t)}}))};GenericEditorFieldComponent.prototype.ngOnDestroy=function(){this._unWatch()};GenericEditorFieldComponent.prototype.ngAfterViewInit=function(){var e=this;if(!this.field.template){return}var t=document.createElement("se-template-ge-widget");this.elementRef.nativeElement.editor=this.ge.editor;this.elementRef.nativeElement.model=this.model;this.elementRef.nativeElement.field=this.field;this.elementRef.nativeElement.qualifier=this.qualifier;this.elementRef.nativeElement.id=this.id;this.elementRef.nativeElement.editorStackId=this.ge.editor.editorStackId;this.elementRef.nativeElement.isFieldDisabled=function(){return e.isFieldDisabled()};this.elementRef.nativeElement.$ctrl=this;this.geWidget.nativeElement.appendChild(t)};GenericEditorFieldComponent.prototype.isFieldDisabled=function(){var e=this.field.editable;if(this.field.localized){e=this.field.editable&&this.field.isLanguageEnabledMap[this.qualifier]}return!e};GenericEditorFieldComponent.prototype.createInjector=function(){var e=this;this.widgetInjector=s.Injector.create({parent:this.injector,providers:[{provide:hs,useValue:{id:this.id,field:this.field,model:this.model,editor:this.ge.editor,qualifier:this.qualifier,isFieldDisabled:function(){return e.isFieldDisabled()}}}]})};var e;__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorFieldComponent.prototype,"field",void 0);__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorFieldComponent.prototype,"model",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorFieldComponent.prototype,"qualifier",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorFieldComponent.prototype,"id",void 0);__decorate([s.ViewChild("widget",{read:s.ElementRef,static:false}),__metadata("design:type",s.ElementRef)],GenericEditorFieldComponent.prototype,"geWidget",void 0);GenericEditorFieldComponent=e=__decorate([SeDowngradeComponent(),s.Component({selector:"se-generic-editor-field",providers:[{provide:S.NG_VALUE_ACCESSOR,useExisting:s.forwardRef((function(){return e})),multi:true}],template:'<div [attr.validation-id]="field.qualifier" class="ySEField"><div *ngIf="field.template"><div #widget></div></div><ng-container *ngIf="field.component"><ng-container *ngComponentOutlet="field.component; injector: widgetInjector"></ng-container></ng-container><se-generic-editor-field-messages [field]="field" [qualifier]="qualifier"></se-generic-editor-field-messages><div *ngIf="field.postfix" class="ySEText ySEFieldPostfix">{{ field.postfix | translate }}</div></div>'}),__param(2,s.Inject(s.forwardRef((function(){return nc})))),__metadata("design:paramtypes",[s.ElementRef,s.Injector,nc])],GenericEditorFieldComponent);return GenericEditorFieldComponent}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorFieldMessagesComponent",{selector:"se-generic-editor-field-messages",template:'<div *ngIf="errors.length > 0"><span *ngFor="let error of errors" class="se-help-block--has-error help-block fd-form__message fd-form__message--error">{{ error | translate}}</span></div><div *ngIf="warnings.length > 0"><span *ngFor="let warning of warnings" class="se-help-block--has-warning help-block fd-form__message fd-form__message--warning">{{ warning | translate }}</span></div>'});var Cc=function(){function GenericEditorFieldMessagesComponent(){this.previousMessages=null}GenericEditorFieldMessagesComponent.prototype.ngDoCheck=function(){if(this.field){var e=JSON.stringify(this.field.messages);if(this.previousMessages!==e){this.previousMessages=e;this.errors=this.getFilteredMessagesByType(rt.VALIDATION_ERROR);this.warnings=this.getFilteredMessagesByType(rt.WARNING)}}};GenericEditorFieldMessagesComponent.prototype.getFilteredMessagesByType=function(e){var t=this;return(this.field.messages||[]).filter((function(n){return n.marker===t.qualifier&&!n.format&&n.type===e})).map((function(e){return e.message}))};__decorate([s.Input(),__metadata("design:type",Object)],GenericEditorFieldMessagesComponent.prototype,"field",void 0);__decorate([s.Input(),__metadata("design:type",String)],GenericEditorFieldMessagesComponent.prototype,"qualifier",void 0);GenericEditorFieldMessagesComponent=__decorate([s.Component({selector:"se-generic-editor-field-messages",template:'<div *ngIf="errors.length > 0"><span *ngFor="let error of errors" class="se-help-block--has-error help-block fd-form__message fd-form__message--error">{{ error | translate}}</span></div><div *ngIf="warnings.length > 0"><span *ngFor="let warning of warnings" class="se-help-block--has-warning help-block fd-form__message fd-form__message--warning">{{ warning | translate }}</span></div>'})],GenericEditorFieldMessagesComponent);return GenericEditorFieldMessagesComponent}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorFieldWrapperComponent",{selector:"se-generic-editor-field-wrapper",template:' <ng-template [formRenderer]="form"></ng-template> '});var Sc=function(){function GenericEditorFieldWrapperComponent(e){var t=e.model,n=e.tabId,i=e.tab;this.form=t.controls[n];this._subscription=this.form.statusChanges.subscribe((function(e){i.hasErrors=e==="INVALID"}))}GenericEditorFieldWrapperComponent.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()};GenericEditorFieldWrapperComponent=__decorate([s.Component({selector:"se-generic-editor-field-wrapper",template:' <ng-template [formRenderer]="form"></ng-template> '}),__param(0,s.Inject(Br)),__metadata("design:paramtypes",[Object])],GenericEditorFieldWrapperComponent);return GenericEditorFieldWrapperComponent}();window.__smartedit__.addDecoratorPayload("Component","LocalizedElementComponent",{selector:"se-localized-element",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'<se-tabs *ngIf="tabs" class="multi-tabs-editor" [model]="form" [tabsList]="tabs" [numTabsDisplayed]="6"></se-tabs>'});var bc=function(){function LocalizedElementComponent(e){this.sessionService=e}LocalizedElementComponent.prototype.onDynamicInputChange=function(){this._createLocalizedTabs()};LocalizedElementComponent.prototype.ngDoCheck=function(){if(this.tabs&&this.field.messages!==this._previousMessages){this._previousMessages=this.field.messages;var e=this.field.messages?this.field.messages.filter((function(e){return e.type===rt.VALIDATION_ERROR})).reduce((function(e,t){e[t.language]=true;return e}),{}):{};this.tabs=this.tabs.map((function(t){var n=e[t.id];t.hasErrors=n!==undefined?n:false;return t}))}};LocalizedElementComponent.prototype._createLocalizedTabs=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,i,o;var r=this;return __generator(this,(function(a){switch(a.label){case 0:this.field.isLanguageEnabledMap={};return[4,this.sessionService.getCurrentUser()];case 1:e=a.sent(),t=e.readableLanguages,n=e.writeableLanguages;i=new Set(t);o=new Set(n);this.tabs=this.languages.filter((function(e){return i.has(e.isocode)})).map((function(e){var t=e.isocode,n=e.required;r.field.isLanguageEnabledMap[t]=o.has(t);var i=""+t.toUpperCase()+(r.field.editable&&n?"*":"");return{title:i,id:t,component:Sc}}));return[2]}}))}))};__decorate([o.DynamicForm(),__metadata("design:type",o.FormGrouping)],LocalizedElementComponent.prototype,"form",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Object)],LocalizedElementComponent.prototype,"field",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Object)],LocalizedElementComponent.prototype,"component",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Array)],LocalizedElementComponent.prototype,"languages",void 0);LocalizedElementComponent=__decorate([s.Component({selector:"se-localized-element",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'<se-tabs *ngIf="tabs" class="multi-tabs-editor" [model]="form" [tabsList]="tabs" [numTabsDisplayed]="6"></se-tabs>'}),__metadata("design:paramtypes",[o.ISessionService])],LocalizedElementComponent);return LocalizedElementComponent}();window.__smartedit__.addDecoratorPayload("Component","GenericEditorRootTabsComponent",{selector:"se-ge-root-tabs",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'\n        <se-tabs\n            class="se-generic-editor__tabs"\n            [model]="form"\n            [tabsList]="tabs"\n            [numTabsDisplayed]="3"\n        ></se-tabs>\n    '});var Ic=function(){function GenericEditorRootTabsComponent(){}__decorate([o.DynamicForm(),__metadata("design:type",o.FormGrouping)],GenericEditorRootTabsComponent.prototype,"form",void 0);__decorate([o.DynamicInput(),__metadata("design:type",Array)],GenericEditorRootTabsComponent.prototype,"tabs",void 0);GenericEditorRootTabsComponent=__decorate([s.Component({selector:"se-ge-root-tabs",styles:["\n            :host {\n                display: block;\n            }\n        "],template:'\n        <se-tabs\n            class="se-generic-editor__tabs"\n            [model]="form"\n            [tabsList]="tabs"\n            [numTabsDisplayed]="3"\n        ></se-tabs>\n    '})],GenericEditorRootTabsComponent);return GenericEditorRootTabsComponent}();var wc=function(){function SubmitBtnDirective(e){this.cm=e}Object.defineProperty(SubmitBtnDirective.prototype,"disabled",{get:function(){return this.cm.submitting||this.isDisabled&&this.isDisabled()},enumerable:false,configurable:true});SubmitBtnDirective.prototype.save=function(e){e.preventDefault();this.cm.save().subscribe()};__decorate([s.Input("seSubmitBtn"),__metadata("design:type",Function)],SubmitBtnDirective.prototype,"isDisabled",void 0);__decorate([s.HostBinding("disabled"),__metadata("design:type",Boolean),__metadata("design:paramtypes",[])],SubmitBtnDirective.prototype,"disabled",null);__decorate([s.HostListener("click",["$event"]),__metadata("design:type",Function),__metadata("design:paramtypes",[Event]),__metadata("design:returntype",void 0)],SubmitBtnDirective.prototype,"save",null);SubmitBtnDirective=__decorate([s.Directive({selector:"[seSubmitBtn]"}),__metadata("design:paramtypes",[gs])],SubmitBtnDirective);return SubmitBtnDirective}();var Ec=function(){function GenericEditorWidgetModule(){}GenericEditorWidgetModule=__decorate([s.NgModule({imports:[u.CommonModule,Ps,fs,o.TranslationModule.forChild(),S.FormsModule,qs,br,zs,$s,Ms,Os],declarations:[Ks,Ls,Ns,xs,As,Ts,Ys],entryComponents:[Ks,Ls,Ns,xs,As,Ts,Ys]})],GenericEditorWidgetModule);return GenericEditorWidgetModule}();var Pc=function(){function SeGenericEditorModule(){}SeGenericEditorModule=__decorate([s.NgModule({schemas:[s.CUSTOM_ELEMENTS_SCHEMA],imports:[u.CommonModule,Yi,S.FormsModule,S.ReactiveFormsModule,Gr,ms,Ec,br,Ar,o.TranslationModule.forChild(),o.FormBuilderModule.forRoot({validators:{required:function(){return S.Validators.required},email:function(){return S.Validators.email}},types:{tabs:Ic,localized:bc,field:ac}})],providers:[ec,Zs,Qs,xi,ic,Js,fc],declarations:[ac,nc,sc,bc,yc,Cc,Sc,rc,_c,gs,Ic,wc],entryComponents:[nc,sc,bc,yc,Cc,Sc,rc],exports:[nc,Ec,Ar]})],SeGenericEditorModule);return SeGenericEditorModule}();var Tc=function(e){__extends(LegacyHasOperationPermissionDirective,e);LegacyHasOperationPermissionDirective.$inject=["systemEventService","permissionService","logService"];function LegacyHasOperationPermissionDirective(t,n,i){var o=e.call(this,t,n,i)||this;o.isPermissionGrantedHandler=o.getIsPermissionGrantedHandler();return o}LegacyHasOperationPermissionDirective.prototype.$onInit=function(){e.prototype.ngOnInit.call(this)};LegacyHasOperationPermissionDirective.prototype.$onChanges=function(t){if(t.hasOperationPermission&&t.hasOperationPermission.currentValue){this.isPermissionGrantedFlag=false;e.prototype.ngOnChanges.call(this,{hasOperationPermission:new s.SimpleChange(t.hasOperationPermission.previousValue,t.hasOperationPermission.currentValue,t.hasOperationPermission.isFirstChange())})}};LegacyHasOperationPermissionDirective.prototype.$onChanges.$inject=["changes"];LegacyHasOperationPermissionDirective.prototype.$onDestroy=function(){e.prototype.ngOnDestroy.call(this)};LegacyHasOperationPermissionDirective.prototype.getIsPermissionGrantedHandler=function(){var e=this;return function(t){e.isPermissionGrantedFlag=t}};LegacyHasOperationPermissionDirective=__decorate([SeDirective({transclude:true,templateUrl:"legacyHasOperationPermissionTemplate.html",controllerAs:"ctrl",selector:"[has-operation-permission]",inputs:["hasOperationPermission"]}),__metadata("design:paramtypes",[Kt,mn,o.LogService])],LegacyHasOperationPermissionDirective);return LegacyHasOperationPermissionDirective}(da);window.__smartedit__.addDecoratorPayload("Component","HeaderLanguageDropdownComponent",{selector:"header-language-dropdown",template:'\n        <ul role="menu" class="fd-menu__list se-language-selector">\n            <li *ngIf="selectedLanguage">\n                <a\n                    class="yToolbarActions__dropdown-element fd-menu__item se-language-selector__element--selected"\n                >\n                    {{ selectedLanguage.name }}\n                </a>\n            </li>\n            <ng-container *ngFor="let language of items">\n                <li *ngIf="selectedLanguage.isoCode !== language.value.isoCode">\n                    <a\n                        class="yToolbarActions__dropdown-element fd-menu__item se-language-selector__element"\n                        (click)="onSelectedLanguage(language)"\n                    >\n                        {{ language.value.name }}\n                    </a>\n                </li>\n            </ng-container>\n        </ul>\n    '});var Ac=function(e){__extends(HeaderLanguageDropdownComponent,e);HeaderLanguageDropdownComponent.$inject=["languageService","crossFrameEventService"];function HeaderLanguageDropdownComponent(t,n){var i=e.call(this,t,n)||this;i.languageService=t;i.crossFrameEventService=n;i.languageSortStrategy="none";return i}HeaderLanguageDropdownComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"header-language-dropdown",template:'\n        <ul role="menu" class="fd-menu__list se-language-selector">\n            <li *ngIf="selectedLanguage">\n                <a\n                    class="yToolbarActions__dropdown-element fd-menu__item se-language-selector__element--selected"\n                >\n                    {{ selectedLanguage.name }}\n                </a>\n            </li>\n            <ng-container *ngFor="let language of items">\n                <li *ngIf="selectedLanguage.isoCode !== language.value.isoCode">\n                    <a\n                        class="yToolbarActions__dropdown-element fd-menu__item se-language-selector__element"\n                        (click)="onSelectedLanguage(language)"\n                    >\n                        {{ language.value.name }}\n                    </a>\n                </li>\n            </ng-container>\n        </ul>\n    '}),__metadata("design:paramtypes",[Oi,Pi])],HeaderLanguageDropdownComponent);return HeaderLanguageDropdownComponent}(o.LanguageDropdown);window.__smartedit__.addDecoratorPayload("Component","ConfirmDialogComponent",{selector:"se-confirm-dialog",template:'\n        <div id="confirmationModalDescription">\n            {{ (modalData | async).description | translate: (descriptionPlaceholders | async) }}\n        </div>\n    '});var Dc=function(){function ConfirmDialogComponent(e){this.modalManager=e}Object.defineProperty(ConfirmDialogComponent.prototype,"modalData",{get:function(){return this.modalManager.getModalData()},enumerable:false,configurable:true});Object.defineProperty(ConfirmDialogComponent.prototype,"descriptionPlaceholders",{get:function(){return this.modalManager.getModalData().pipe(f.map((function(e){return e.descriptionPlaceholders||{}})))},enumerable:false,configurable:true});ConfirmDialogComponent=__decorate([s.Component({selector:"se-confirm-dialog",template:'\n        <div id="confirmationModalDescription">\n            {{ (modalData | async).description | translate: (descriptionPlaceholders | async) }}\n        </div>\n    '}),__metadata("design:paramtypes",[o.FundamentalModalManagerService])],ConfirmDialogComponent);return ConfirmDialogComponent}();var Oc={DEFAULT_CONFIGURATION:kr,ICON_LEFT:"icon-left",ICON_RIGHT:"icon-right"};var Rc=function(){function YCollapsibleContainerComponent(){var e=this;this.isExpanded=true;this.api={isExpanded:function(){return e.isExpanded}}}YCollapsibleContainerComponent.prototype.$onInit=function(){this.configuration=a.defaultsDeep(this.configuration,Oc.DEFAULT_CONFIGURATION);this.isExpanded=this.configuration.expandedByDefault?this.configuration.expandedByDefault:false;if(typeof this.getApi==="function"){this.getApi({$api:this.api})}};YCollapsibleContainerComponent.prototype.getIconRelatedClassname=function(){if(this.configuration.iconVisible){var e="ICON_"+this.configuration.iconAlignment.toUpperCase();return Oc[e]}return""};YCollapsibleContainerComponent=__decorate([SeComponent({selector:"y-collapsible-container",templateUrl:"yCollapsibleContainer.html",transclude:{"collapsible-container-content":"content","collapsible-container-title":"?header"},inputs:["configuration","getApi:&"]})],YCollapsibleContainerComponent);return YCollapsibleContainerComponent}();var Mc=new s.InjectionToken("CLIENT_PAGED_LIST_CELL_COMPONENT_DATA_TOKEN");window.__smartedit__.addDecoratorPayload("Component","ClientPagedListCellComponent",{selector:"se-client-paged-list-cell",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="key.component; else cellText"><ng-container *ngComponentOutlet="key.component; injector: componentInjector"></ng-container></ng-container><ng-template #cellText><span>{{ item[key.property] }}</span></ng-template>'});var xc=function(){ClientPagedListCellComponent.$inject=["injector"];function ClientPagedListCellComponent(e){this.injector=e}ClientPagedListCellComponent.prototype.ngOnInit=function(){this.createComponentInjector()};ClientPagedListCellComponent.prototype.createComponentInjector=function(){this.componentInjector=s.Injector.create({parent:this.injector,providers:[{provide:Mc,useValue:{item:this.item,key:this.key}}]})};__decorate([s.Input(),__metadata("design:type",Object)],ClientPagedListCellComponent.prototype,"item",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ClientPagedListCellComponent.prototype,"key",void 0);ClientPagedListCellComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-client-paged-list-cell",changeDetection:s.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="key.component; else cellText"><ng-container *ngComponentOutlet="key.component; injector: componentInjector"></ng-container></ng-container><ng-template #cellText><span>{{ item[key.property] }}</span></ng-template>'}),__metadata("design:paramtypes",[s.Injector])],ClientPagedListCellComponent);return ClientPagedListCellComponent}();window.__smartedit__.addDecoratorPayload("Component","ClientPagedListComponent",{selector:"se-client-paged-list",changeDetection:s.ChangeDetectionStrategy.OnPush,providers:[dr,cr,u.SlicePipe],template:'<div class="fluid-container se-paged-list-result"><p class="se-page-list__page-count" *ngIf="displayCount"><span>({{ totalItems }} {{ \'se.pagelist.countsearchresult\' | translate }})</span></p><table class="se-paged-list-table table table-striped table-hover techne-table"><thead><tr><th *ngFor="let key of keys; trackBy: keysTrackBy" (click)="onOrderByColumn(key.property)" [ngStyle]="{ \'width\': columnWidth + \'%\' }" class="se-paged-list__header" [ngClass]="\'se-paged-list__header-\' + key.property"><ng-container *ngIf="key.i18n">{{ key.i18n | translate }} <span class="header-icon" [hidden]="visibleSortingHeader !== key.property" [ngClass]="{\n                          \'sap-icon--navigation-down-arrow\': headersSortingState[key.property],\n                          \'sap-icon--navigation-up-arrow\': !headersSortingState[key.property]\n                      }"></span></ng-container></th><th class="se-paged-list__header"></th><th class="se-paged-list__header" *ngIf="dropdownItems"></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of filteredItems" class="techne-table-xs-right techne-table-xs-left se-paged-list-item"><td *ngFor="let key of keys" [ngClass]="\'se-paged-list-item-\' + key.property"><se-client-paged-list-cell [item]="item" [key]="key"></se-client-paged-list-cell></td><td><se-tooltip *ngIf="item.icon" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [title]="\'se.icon.tooltip.visibility\' | translate: { numberOfRestrictions: item.icon.numberOfRestrictions }" [isChevronVisible]="true"><img [src]="item.icon.src" se-tooltip-trigger/></se-tooltip></td><ng-container *ngIf="dropdownItems"><td *seHasOperationPermission="\'se.edit.page\'" class="paged-list-table__body__td paged-list-table__body__td-menu"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="item" class="pull-right"></se-dropdown-menu></td></ng-container></tr></tbody></table><div class="pagination-container"><se-pagination [totalItems]="totalItems < itemsPerPage ? itemsPerPage : totalItems" [itemsPerPage]="itemsPerPage" (onChange)="onCurrentPageChange($event)" [currentPage]="currentPage" class="pagination-lg"></se-pagination></div></div>'});var Nc=function(){ClientPagedListComponent.$inject=["cdr","filterByFieldPipe","startFromPipe","slicePipe"];function ClientPagedListComponent(e,t,n,i){this.cdr=e;this.filterByFieldPipe=t;this.startFromPipe=n;this.slicePipe=i;this.reversed=false;this.displayCount=false;this.totalItems=0;this.currentPage=1;this.headersSortingState={}}ClientPagedListComponent.prototype.ngOnChanges=function(e){var t;if(e.items||e.query||e.itemFilterKeys||e.itemsPerPage){if(e.query){this.currentPage=1}this.filteredItems=this.filterItems();this.totalItems=e.query&&e.query.currentValue?this.filteredItems.length:this.items.length}if(e.keys){this.columnWidth=100/(this.keys.length||1)}if(e.reversed){this.columnToggleReversed=this.reversed}if(e.sortBy){this.headersSortingState=__assign(__assign({},this.headersSortingState),(t={},t[this.sortBy]=this.columnToggleReversed,t));this.visibleSortingHeader=this.sortBy;this.items=$t.sortBy(this.items,this.sortBy,this.columnToggleReversed);this.filteredItems=this.filterItems()}};ClientPagedListComponent.prototype.ngOnChanges.$inject=["changes"];ClientPagedListComponent.prototype.keysTrackBy=function(e,t){return t.property};ClientPagedListComponent.prototype.keysTrackBy.$inject=["_index","key"];ClientPagedListComponent.prototype.onOrderByColumn=function(e){this.columnToggleReversed=!this.columnToggleReversed;this.headersSortingState[e]=this.columnToggleReversed;this.visibleSortingHeader=e;this.items=$t.sortBy(this.items,e,this.columnToggleReversed);this.filteredItems=this.filterItems();this.cdr.detectChanges()};ClientPagedListComponent.prototype.onOrderByColumn.$inject=["columnKeyProp"];ClientPagedListComponent.prototype.onCurrentPageChange=function(e){this.currentPage=e;this.filteredItems=this.filterItems();this.cdr.detectChanges()};ClientPagedListComponent.prototype.onCurrentPageChange.$inject=["page"];ClientPagedListComponent.prototype.filterItems=function(){var e=this.itemFilterKeys||[];var t=this.filterByFieldPipe.transform(this.items,this.query,e);var n=(this.currentPage-1)*this.itemsPerPage;var i=this.startFromPipe.transform(t,n);var o=this.slicePipe.transform(i,0,this.itemsPerPage);return o};__decorate([s.Input(),__metadata("design:type",Array)],ClientPagedListComponent.prototype,"items",void 0);__decorate([s.Input(),__metadata("design:type",Array)],ClientPagedListComponent.prototype,"itemFilterKeys",void 0);__decorate([s.Input(),__metadata("design:type",Array)],ClientPagedListComponent.prototype,"keys",void 0);__decorate([s.Input(),__metadata("design:type",Number)],ClientPagedListComponent.prototype,"itemsPerPage",void 0);__decorate([s.Input(),__metadata("design:type",String)],ClientPagedListComponent.prototype,"sortBy",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ClientPagedListComponent.prototype,"reversed",void 0);__decorate([s.Input(),__metadata("design:type",String)],ClientPagedListComponent.prototype,"query",void 0);__decorate([s.Input(),__metadata("design:type",Object)],ClientPagedListComponent.prototype,"displayCount",void 0);__decorate([s.Input(),__metadata("design:type",Array)],ClientPagedListComponent.prototype,"dropdownItems",void 0);ClientPagedListComponent=__decorate([SeDowngradeComponent(),s.Component({selector:"se-client-paged-list",changeDetection:s.ChangeDetectionStrategy.OnPush,providers:[dr,cr,u.SlicePipe],template:'<div class="fluid-container se-paged-list-result"><p class="se-page-list__page-count" *ngIf="displayCount"><span>({{ totalItems }} {{ \'se.pagelist.countsearchresult\' | translate }})</span></p><table class="se-paged-list-table table table-striped table-hover techne-table"><thead><tr><th *ngFor="let key of keys; trackBy: keysTrackBy" (click)="onOrderByColumn(key.property)" [ngStyle]="{ \'width\': columnWidth + \'%\' }" class="se-paged-list__header" [ngClass]="\'se-paged-list__header-\' + key.property"><ng-container *ngIf="key.i18n">{{ key.i18n | translate }} <span class="header-icon" [hidden]="visibleSortingHeader !== key.property" [ngClass]="{\n                          \'sap-icon--navigation-down-arrow\': headersSortingState[key.property],\n                          \'sap-icon--navigation-up-arrow\': !headersSortingState[key.property]\n                      }"></span></ng-container></th><th class="se-paged-list__header"></th><th class="se-paged-list__header" *ngIf="dropdownItems"></th></tr></thead><tbody class="se-paged-list__table-body"><tr *ngFor="let item of filteredItems" class="techne-table-xs-right techne-table-xs-left se-paged-list-item"><td *ngFor="let key of keys" [ngClass]="\'se-paged-list-item-\' + key.property"><se-client-paged-list-cell [item]="item" [key]="key"></se-client-paged-list-cell></td><td><se-tooltip *ngIf="item.icon" [triggers]="[\'mouseenter\', \'mouseleave\']" [placement]="\'bottom\'" [title]="\'se.icon.tooltip.visibility\' | translate: { numberOfRestrictions: item.icon.numberOfRestrictions }" [isChevronVisible]="true"><img [src]="item.icon.src" se-tooltip-trigger/></se-tooltip></td><ng-container *ngIf="dropdownItems"><td *seHasOperationPermission="\'se.edit.page\'" class="paged-list-table__body__td paged-list-table__body__td-menu"><se-dropdown-menu [dropdownItems]="dropdownItems" [selectedItem]="item" class="pull-right"></se-dropdown-menu></td></ng-container></tr></tbody></table><div class="pagination-container"><se-pagination [totalItems]="totalItems < itemsPerPage ? itemsPerPage : totalItems" [itemsPerPage]="itemsPerPage" (onChange)="onCurrentPageChange($event)" [currentPage]="currentPage" class="pagination-lg"></se-pagination></div></div>'}),__metadata("design:paramtypes",[s.ChangeDetectorRef,dr,cr,u.SlicePipe])],ClientPagedListComponent);return ClientPagedListComponent}();var kc=function(){function ClientPagedListModule(){}ClientPagedListModule=__decorate([s.NgModule({imports:[u.CommonModule,Ea,Gr,Yr,Sa,ua,Nn,pr,lr,o.TranslationModule.forChild()],entryComponents:[Nc],declarations:[Nc,xc],exports:[Nc]})],ClientPagedListModule);return ClientPagedListModule}();var Fc=function(){ExperienceInterceptor.$inject=["sharedDataService","stringUtils","httpUtils"];function ExperienceInterceptor(e,t,n){this.sharedDataService=e;this.stringUtils=t;this.httpUtils=n}ExperienceInterceptor.prototype.intercept=function(e,t){var n=this;if(we.test(e.url)){return g.from(this.sharedDataService.get(kt)).pipe(f.switchMap((function(i){if(i){var o={};o.CONTEXT_SITE_ID_WITH_COLON=i.siteDescriptor.uid;o.CONTEXT_CATALOG_VERSION_WITH_COLON=i.catalogDescriptor.catalogVersion;o.CONTEXT_CATALOG_WITH_COLON=i.catalogDescriptor.catalogId;o[oe]=i.siteDescriptor.uid;o[ie]=i.catalogDescriptor.catalogVersion;o[ne]=i.catalogDescriptor.catalogId;o[se]=i.pageContext?i.pageContext.siteId:i.siteDescriptor.uid;o[ae]=i.pageContext?i.pageContext.catalogVersion:i.catalogDescriptor.catalogVersion;o[re]=i.pageContext?i.pageContext.catalogId:i.catalogDescriptor.catalogId;var r=e.clone({url:n.stringUtils.replaceAll(e.url,o),params:e.params&&typeof e.params==="object"?n.httpUtils.transformHttpParams(e.params,o):e.params});return t.handle(r)}return t.handle(e)})))}else{return t.handle(e)}};ExperienceInterceptor.prototype.intercept.$inject=["request","next"];ExperienceInterceptor=__decorate([s.Injectable(),__metadata("design:paramtypes",[o.ISharedDataService,o.StringUtils,o.HttpUtils])],ExperienceInterceptor);return ExperienceInterceptor}();var zc=function(){function IAnimateService(){}IAnimateService.prototype.addClass=function(e,t,n){return undefined};IAnimateService.prototype.animate=function(e,t,n,i,o){return undefined};IAnimateService.prototype.cancel=function(e){return undefined};IAnimateService.prototype.closeAndFlush=function(){return undefined};IAnimateService.prototype.enabled=function(e,t){return false};IAnimateService.prototype.enter=function(e,t,n,i){return undefined};IAnimateService.prototype.flush=function(){return undefined};IAnimateService.prototype.leave=function(e,t){return undefined};IAnimateService.prototype.move=function(e,t,n){return undefined};IAnimateService.prototype.off=function(e,t,n){return undefined};IAnimateService.prototype.on=function(e,t,n){return undefined};IAnimateService.prototype.pin=function(e,t){return undefined};IAnimateService.prototype.removeClass=function(e,t,n){return undefined};IAnimateService.prototype.setClass=function(e,t,n,i){return undefined};return IAnimateService}();var Lc=function(){function SmarteditConstantsModule(){}SmarteditConstantsModule=__decorate([s.NgModule({providers:[{provide:Wt,useValue:te},{provide:qt,useValue:Dt}]})],SmarteditConstantsModule);return SmarteditConstantsModule}();r.module("ngHrefDirectiveModule",[]).directive("ngHref",["smarteditRoutingService","logService",function(e,t){"ngInject";return{restrict:"A",replace:false,link:function(n,i,o){var r=o.ngHref.replace("#!","");t.debug("Navigating via overridden ngHref Directive","attrs.ngHref",o.ngHref,"href",r);i.attr("href",o.ngHref);i.bind("click",(function(t){t.preventDefault();e.go(r)}))}}}]);var Vc;var $c=new s.InjectionToken("gatewayProxiedAnnotationFactoryToKen");var Uc=new s.InjectionToken("cachedAnnotationFactoryToken");var jc=new s.InjectionToken("cacheConfigAnnotationFactoryToken");var Bc=new s.InjectionToken("invalidateCacheAnnotationFactoryToken");var Hc=new s.InjectionToken("operationContextAnnotationFactoryToken");var Gc=function(){function SmarteditCommonsModule(){}SmarteditCommonsModule=__decorate([s.NgModule({imports:[Gr,w.LocationUpgradeModule.config(),Yi,Pc,jn,Lc],providers:[O.upgradeProvider("$animate",zc),O.upgradeProvider("$uibModal",Zn),O.upgradeProvider("$uibModalStack",Qn),O.upgradeProvider("$templateCache",Tn),Ui,Io,bo,Ri,Oi,{provide:o.LANGUAGE_SERVICE,useClass:Oi},ho,Lt,U.provideValues((Vc={SSO_LOGOUT_ENTRY_POINT:be,SSO_AUTHENTICATION_ENTRY_POINT:Ce,SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT:Se,SMARTEDIT_RESOURCE_URI_REGEXP:Ee,SMARTEDIT_ROOT:Pe,SMARTEDIT_INNER_FILES:Rt,SMARTEDIT_INNER_FILES_POST:Mt},Vc[o.OPERATION_CONTEXT_TOKEN]=ve,Vc[o.WHO_AM_I_RESOURCE_URI_TOKEN]=_e,Vc[o.I18N_RESOURCE_URI_TOKEN]=fe,Vc)),{provide:p.HTTP_INTERCEPTORS,useClass:Fc,multi:true},{provide:o.IModalService,useClass:Kn},{provide:o.ISettingsService,useClass:Gi},rs,o.LogService,o.BrowserService,o.FingerPrintingService,o.CacheEngine,o.CacheService,o.CloneableUtils,Pi,{provide:o.LoginDialogResourceProvider,useValue:Me},{provide:o.LANGUAGE_SERVICE_CONSTANTS,useValue:{LANGUAGE_RESOURCE_URI:tt,I18N_LANGUAGES_RESOURCE_URI:nt}},{provide:o.EVENT_SERVICE,useFactory:function(e){return e},deps:[Pi]},{provide:Ei.crossFrameEventServiceGatewayToken,useClass:Ei},o.OperationContextService,o.BooleanUtils,o.CryptographicUtils,o.FunctionsUtils,o.HttpUtils,M,o.PromiseUtils,vo,{provide:o.StringUtils,useClass:j},j,o.UrlUtils,{provide:o.WindowUtils,useClass:L},L,Kt,$i,Li,{provide:o.TESTMODESERVICE,useFactory:function(e){return e},deps:[Li]},Xt,Zt,zi,{provide:$c,useFactory:GatewayProxiedAnnotationFactory,deps:[Zt]},{provide:Uc,useFactory:o.CachedAnnotationFactory,deps:[o.CacheService]},{provide:jc,useFactory:o.CacheConfigAnnotationFactory,deps:[o.LogService]},{provide:Bc,useFactory:o.InvalidateCacheAnnotationFactory,deps:[o.CacheService]},{provide:Hc,useFactory:o.OperationContextAnnotationFactory,deps:[s.Injector,o.OperationContextService,o.OPERATION_CONTEXT_TOKEN]},o.RestServiceFactory,Ii,wi,o.FileMimeTypeService,o.FileReaderService,o.FileValidationService,o.FileValidatorFactory,{provide:"seFileValidationServiceConstants",useValue:o.FILE_VALIDATION_CONFIG},U.initialize((function(e,t,n,i,r){O.downgradeService("translateService",m.TranslateService);O.downgradeService("browserService",o.BrowserService);O.downgradeService("httpBackendService",o.HttpBackendService);O.downgradeService("operationContextService",o.OperationContextService);O.downgradeService("retryInterceptor",o.RetryInterceptor);O.downgradeService("httpErrorInterceptorService",o.HttpErrorInterceptorService);O.downgradeService("fileMimeTypeService",o.FileMimeTypeService);O.downgradeService("fileReaderService",o.FileReaderService);O.downgradeService("fileValidationService",o.FileValidationService);O.downgradeService("fileValidatorFactory",o.FileValidatorFactory);O.downgradeService("seFileValidationServiceConstants",null,"seFileValidationServiceConstants")}),[$c,Uc,jc,Bc,Hc]),U.bootstrap((function(e,t,n,i,r){e.register(o.booleanUtils.areAllTruthy(operationContextInteractivePredicate,o.retriableErrorPredicate),t).register(o.booleanUtils.areAllTruthy(operationContextNonInteractivePredicate,o.retriableErrorPredicate),n).register(o.booleanUtils.areAllTruthy(operationContextCMSPredicate,o.timeoutErrorPredicate,o.updatePredicate),n).register(o.booleanUtils.areAllTruthy(operationContextToolingPredicate,o.timeoutErrorPredicate,o.updatePredicate),i);r.register(tt,ve.TOOLING)}),[o.RetryInterceptor,o.DefaultRetryStrategy,o.ExponentialRetryStrategy,o.LinearRetryStrategy,o.OperationContextService,o.LogService])]})],SmarteditCommonsModule);return SmarteditCommonsModule}();function deprecatedSince1811(){r.module("permissionServiceInterfaceModule",["legacySmarteditCommonsModule"]);r.module("FetchDataHandlerInterfaceModule",["genericEditorServicesModule"]);r.module("fetchEnumDataHandlerModule",["genericEditorServicesModule"]);r.module("dateFormatterModule",["dateTimePickerModule"]);r.module("DropdownPopulatorInterface",["dropdownPopulatorModule"]);r.module("optionsDropdownPopulatorModule",["dropdownPopulatorModule"]);r.module("uriDropdownPopulatorModule",["dropdownPopulatorModule"]);r.module("editorFieldMappingServiceModule",["genericEditorServicesModule"]);r.module("genericEditorStackServiceModule",["genericEditorServicesModule"]);r.module("genericEditorTabServiceModule",["genericEditorServicesModule"]);r.module("seValidationMessageParserModule",["genericEditorServicesModule"]);r.module("seGenericEditorFieldMessagesModule",["genericEditorModule"]);r.module("genericEditorTabModule",["genericEditorModule"]);r.module("genericEditorFieldModule",["genericEditorModule"]);r.module("authorizationModule",["legacySmarteditCommonsModule"])}function deprecatedSince1905(){r.module("smarteditCommonsModule",["legacySmarteditCommonsModule"]);r.module("browserServiceModule",["legacySmarteditCommonsModule"]);r.module("loadConfigModule",["legacySmarteditCommonsModule"])}function deprecatedSince2005(){r.module("yDataTableModule",["legacySmarteditCommonsModule"]);r.module("interceptorHelperModule",["legacySmarteditCommonsModule"]);r.module("yjqueryModule",["legacySmarteditCommonsModule"]);r.module("includeReplaceModule",["legacySmarteditCommonsModule"]);r.module("timerModule",["legacySmarteditCommonsModule"]);r.module("sliderPanelModule",["legacySmarteditCommonsModule"]);r.module("toolbarInterfaceModule",["legacySmarteditCommonsModule"]);r.module("yPaginationModule",["legacySmarteditCommonsModule"]);r.module("paginationFilterModule",["legacySmarteditCommonsModule"]);r.module("yActionableSearchItemModule",[aa.name]);r.module("genericEditorServicesModule",["legacySmarteditCommonsModule"]);r.module("hasOperationPermissionModule",["legacySmarteditCommonsModule"]);r.module("dragAndDropServiceModule",["legacySmarteditCommonsModule"]);r.module("recompileDomModule",["legacySmarteditCommonsModule"]);r.module("yDropDownMenuModule",["legacySmarteditCommonsModule"]);r.module("wizardServiceModule",["legacySmarteditCommonsModule"]);r.module("yMessageModule",["legacySmarteditCommonsModule"]);r.module("dynamicPagedListModule",["legacySmarteditCommonsModule"]);r.module("commonsRestServiceModule",[])}function deprecatedSince2105(){r.module("dropdownPopulatorModule",[])}var deprecate=function(){deprecatedSince1811();deprecatedSince1905();deprecatedSince2005();deprecatedSince2105()};(function(){var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var n=t.which;switch(n){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return true}if(t.metaKey||t.ctrlKey||t.altKey)return true;return false},isFunctionKey:function(e){e=e.which?e.which:e;return e>=112&&e<=123},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)},toSeparator:function(t){var n={ENTER:"\n",TAB:"\t",SPACE:" "}[t];if(n)return n;return e[t]?undefined:t}};function isNil(e){return angular.isUndefined(e)||e===null}if(angular.element.prototype.querySelectorAll===undefined){angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}}if(angular.element.prototype.closest===undefined){angular.element.prototype.closest=function(e){var t=this[0];var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;while(t){if(n.bind(t)(e)){return t}else{t=t.parentElement}}return false}}var t=0;var n=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:true,sortable:false,placeholder:"",refreshDelay:1e3,closeOnSelect:true,skipFocusser:false,dropdownPosition:"auto",removeSelected:true,resetSearchInput:true,generateId:function(){return t++},appendToBody:false,spinnerEnabled:false,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:true}).service("uiSelectMinErr",(function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments);var n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}})).directive("uisTranscludeAppend",(function(){return{link:function(e,t,n,i,o){o(e,(function(e){t.append(e)}))}}})).filter("highlight",(function(){function escapeRegexp(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,t){return t&&e?(""+e).replace(new RegExp(escapeRegexp(t),"gi"),'<span class="ui-select-highlight">$&</span>'):e}})).factory("uisOffset",["$document","$window",function(e,t){return function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);n.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,i,o){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(t){t.addClass("ui-select-choices");var n=t.parent().attr("theme")||e.theme;return n+"/choices.tpl.html"},compile:function(i,r){if(!r.repeat)throw n("repeat","Expected 'repeat' expression.");var a=r.groupBy;var s=r.groupFilter;if(a){var c=i.querySelectorAll(".ui-select-choices-group");if(c.length!==1)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",c.length);c.attr("ng-repeat",t.getGroupNgRepeatExpression())}var l=t.parse(r.repeat);var d=i.querySelectorAll(".ui-select-choices-row");if(d.length!==1){throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",d.length)}d.attr("ng-repeat",l.repeatExpression(a)).attr("ng-if","$select.open");var p=i.querySelectorAll(".ui-select-choices-row-inner");if(p.length!==1){throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",p.length)}p.attr("uis-transclude-append","");var u=o.document.addEventListener?d:p;u.attr("ng-click","$select.select("+l.itemName+",$select.skipFocusser,$event)");return function link(t,n,o,r){r.parseRepeatAttr(o.repeat,a,s);r.disableChoiceExpression=o.uiDisableChoice;r.onHighlightCallback=o.onHighlight;r.minimumInputLength=parseInt(o.minimumInputLength)||0;r.dropdownPosition=o.position?o.position.toLowerCase():e.dropdownPosition;t.$watch("$select.search",(function(e){if(e&&!r.open&&r.multiple)r.activate(false,true);r.activeIndex=r.tagging.isActivated?-1:0;if(!o.minimumInputLength||r.search.length>=o.minimumInputLength){r.refresh(o.refresh)}else{r.items=[]}}));o.$observe("refreshDelay",(function(){var n=t.$eval(o.refreshDelay);r.refreshDelay=n!==undefined?n:e.refreshDelay}));t.$watch("$select.open",(function(e){if(e){i.attr("role","listbox");r.refresh(o.refresh)}else{n.removeAttr("role")}}))}}}}]);n.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(t,n,i,o,r,a,s,c,l,d,p){var u=this;var m="";u.placeholder=c.placeholder;u.searchEnabled=c.searchEnabled;u.sortable=c.sortable;u.refreshDelay=c.refreshDelay;u.paste=c.paste;u.resetSearchInput=c.resetSearchInput;u.refreshing=false;u.spinnerEnabled=c.spinnerEnabled;u.spinnerClass=c.spinnerClass;u.removeSelected=c.removeSelected;u.closeOnSelect=true;u.skipFocusser=false;u.search=m;u.activeIndex=0;u.items=[];u.open=false;u.focus=false;u.disabled=false;u.selected=undefined;u.dropdownPosition="auto";u.focusser=undefined;u.multiple=undefined;u.disableChoiceExpression=undefined;u.tagging={isActivated:false,fct:undefined};u.taggingTokens={isActivated:false,tokens:undefined};u.lockChoiceExpression=undefined;u.clickTriggeredSelect=false;u.$filter=o;u.$element=n;u.$animate=function(){try{return d.get("$animate")}catch(e){return null}}();u.searchInput=n.querySelectorAll("input.ui-select-search");if(u.searchInput.length!==1){throw s("searchInput","Expected 1 input.ui-select-search but got '{0}'.",u.searchInput.length)}u.isEmpty=function(){return isNil(u.selected)||u.selected===""||u.multiple&&u.selected.length===0};function _findIndex(e,t,n){if(e.findIndex){return e.findIndex(t,n)}else{var i=Object(e);var o=i.length>>>0;var r;for(var a=0;a<o;a++){r=i[a];if(t.call(n,r,a,i)){return a}}return-1}}function _resetSearchInput(){if(u.resetSearchInput){u.search=m;if(u.selected&&u.items.length&&!u.multiple){u.activeIndex=_findIndex(u.items,(function(e){return angular.equals(this,e)}),u.selected)}}}function _groupsFilter(e,t){var n,i,o=[];for(n=0;n<t.length;n++){for(i=0;i<e.length;i++){if(e[i].name==[t[n]]){o.push(e[i])}}}return o}u.activate=function(e,o){if(!u.disabled&&!u.open){if(!o)_resetSearchInput();t.$broadcast("uis:activate");u.open=true;u.activeIndex=u.activeIndex>=u.items.length?0:u.activeIndex;if(u.activeIndex===-1&&u.taggingLabel!==false){u.activeIndex=0}var r=n.querySelectorAll(".ui-select-choices-content");var a=n.querySelectorAll(".ui-select-search");if(u.$animate&&u.$animate.on&&u.$animate.enabled(r[0])){var animateHandler=function(t,n){if(n==="start"&&u.items.length===0){u.$animate.off("removeClass",a[0],animateHandler);i((function(){u.focusSearchInput(e)}))}else if(n==="close"){u.$animate.off("enter",r[0],animateHandler);i((function(){u.focusSearchInput(e)}))}};if(u.items.length>0){u.$animate.on("enter",r[0],animateHandler)}else{u.$animate.on("removeClass",a[0],animateHandler)}}else{i((function(){u.focusSearchInput(e);if(!u.tagging.isActivated&&u.items.length>1){_ensureHighlightVisible()}}))}}else if(u.open&&!u.searchEnabled){u.close()}};u.focusSearchInput=function(e){u.search=e||u.search;u.searchInput[0].focus()};u.findGroupByName=function(e){return u.groups&&u.groups.filter((function(t){return t.name===e}))[0]};u.parseRepeatAttr=function(e,n,i){function updateGroups(e){var o=t.$eval(n);u.groups=[];angular.forEach(e,(function(e){var t=angular.isFunction(o)?o(e):e[o];var n=u.findGroupByName(t);if(n){n.items.push(e)}else{u.groups.push({name:t,items:[e]})}}));if(i){var r=t.$eval(i);if(angular.isFunction(r)){u.groups=r(u.groups)}else if(angular.isArray(r)){u.groups=_groupsFilter(u.groups,r)}}u.items=[];u.groups.forEach((function(e){u.items=u.items.concat(e.items)}))}function setPlainItems(e){u.items=e||[]}u.setItemsFn=n?updateGroups:setPlainItems;u.parserResult=a.parse(e);u.isGrouped=!!n;u.itemProperty=u.parserResult.itemName;var o=u.parserResult.source;var createArrayFromObject=function(){var e=o(t);t.$uisSource=Object.keys(e).map((function(t){var n={};n[u.parserResult.keyName]=t;n.value=e[t];return n}))};if(u.parserResult.keyName){createArrayFromObject();u.parserResult.source=l("$uisSource"+u.parserResult.filters);t.$watch(o,(function(e,t){if(e!==t)createArrayFromObject()}),true)}u.refreshItems=function(e){e=e||u.parserResult.source(t);var n=u.selected;if(u.isEmpty()||angular.isArray(n)&&!n.length||!u.multiple||!u.removeSelected){u.setItemsFn(e)}else{if(e!==undefined&&e!==null){var i=e.filter((function(e){return angular.isArray(n)?n.every((function(t){return!angular.equals(e,t)})):!angular.equals(e,n)}));u.setItemsFn(i)}}if(u.dropdownPosition==="auto"||u.dropdownPosition==="up"){t.calculateDropdownPos()}t.$broadcast("uis:refresh")};t.$watchCollection(u.parserResult.source,(function(e){if(e===undefined||e===null){u.items=[]}else{if(!angular.isArray(e)){throw s("items","Expected an array but got '{0}'.",e)}else{u.refreshItems(e);if(angular.isDefined(u.ngModel.$modelValue)){u.ngModel.$modelValue=null}}}}))};var g;u.refresh=function(e){if(e!==undefined){if(g){i.cancel(g)}g=i((function(){if(t.$select.search.length>=t.$select.minimumInputLength){var n=t.$eval(e);if(n&&angular.isFunction(n.then)&&!u.refreshing){u.refreshing=true;n.finally((function(){u.refreshing=false}))}}}),u.refreshDelay)}};u.isActive=function(e){if(!u.open){return false}var t=u.items.indexOf(e[u.itemProperty]);var n=t==u.activeIndex;if(!n||t<0){return false}if(n&&!angular.isUndefined(u.onHighlightCallback)){e.$eval(u.onHighlightCallback)}return n};var _isItemSelected=function(e){return u.selected&&angular.isArray(u.selected)&&u.selected.filter((function(t){return angular.equals(t,e)})).length>0};var h=[];function _updateItemDisabled(e,t){var n=h.indexOf(e);if(t&&n===-1){h.push(e)}if(!t&&n>-1){h.splice(n,1)}}function _isItemDisabled(e){return h.indexOf(e)>-1}u.isDisabled=function(e){if(!u.open)return;var t=e[u.itemProperty];var n=u.items.indexOf(t);var i=false;if(n>=0&&(angular.isDefined(u.disableChoiceExpression)||u.multiple)){if(t.isTag)return false;if(u.multiple){i=_isItemSelected(t)}if(!i&&angular.isDefined(u.disableChoiceExpression)){i=!!e.$eval(u.disableChoiceExpression)}_updateItemDisabled(t,i)}return i};u.select=function(e,n,i){if(isNil(e)||!_isItemDisabled(e)){if(!u.items&&!u.search&&!u.tagging.isActivated)return;if(!e||!_isItemDisabled(e)){u.clickTriggeredSelect=false;if(i&&(i.type==="click"||i.type==="touchend")&&e)u.clickTriggeredSelect=true;if(u.tagging.isActivated&&u.clickTriggeredSelect===false){if(u.taggingLabel===false){if(u.activeIndex<0){if(e===undefined){e=u.tagging.fct!==undefined?u.tagging.fct(u.search):u.search}if(!e||angular.equals(u.items[0],e)){return}}else{e=u.items[u.activeIndex]}}else{if(u.activeIndex===0){if(e===undefined)return;if(u.tagging.fct!==undefined&&typeof e==="string"){e=u.tagging.fct(e);if(!e)return}else if(typeof e==="string"){e=e.replace(u.taggingLabel,"").trim()}}}if(_isItemSelected(e)){u.close(n);return}}_resetSearchInput();t.$broadcast("uis:select",e);if(u.closeOnSelect){u.close(n)}}}};u.close=function(e){if(!u.open)return;if(u.ngModel&&u.ngModel.$setTouched)u.ngModel.$setTouched();u.open=false;_resetSearchInput();t.$broadcast("uis:close",e)};u.setFocus=function(){if(!u.focus)u.focusInput[0].focus()};u.clear=function(e){u.select(null);e.stopPropagation();i((function(){u.focusser[0].focus()}),0,false)};u.toggle=function(e){if(u.open){u.close();e.preventDefault();e.stopPropagation()}else{u.activate()}};u.isLocked=function(){return false};t.$watch((function(){return angular.isDefined(u.lockChoiceExpression)&&u.lockChoiceExpression!==""}),_initaliseLockedChoices);function _initaliseLockedChoices(e){if(!e)return;var t=[];function _updateItemLocked(e,n){var i=t.indexOf(e);if(n&&i===-1){t.push(e)}if(!n&&i>-1){t.splice(i,1)}}function _isItemlocked(e){return t.indexOf(e)>-1}u.isLocked=function(e,t){var n=false,i=u.selected[t];if(i){if(e){n=!!e.$eval(u.lockChoiceExpression);_updateItemLocked(i,n)}else{n=_isItemlocked(i)}}return n}}var v=null;var f=false;u.sizeSearchInput=function(){var e=u.searchInput[0],n=u.$element[0],calculateContainerWidth=function(){return n.clientWidth*!!e.offsetParent},updateIfVisible=function(t){if(t===0){return false}var n=t-e.offsetLeft;if(n<50)n=t;u.searchInput.css("width",n+"px");return true};u.searchInput.css("width","10px");i((function(){if(v===null&&!updateIfVisible(calculateContainerWidth())){v=t.$watch((function(){if(!f){f=true;t.$$postDigest((function(){f=false;if(updateIfVisible(calculateContainerWidth())){v();v=null}}))}}),angular.noop)}}))};function _handleDropDownSelection(t){var n=true;switch(t){case e.DOWN:if(!u.open&&u.multiple)u.activate(false,true);else if(u.activeIndex<u.items.length-1){var i=++u.activeIndex;while(_isItemDisabled(u.items[i])&&i<u.items.length){u.activeIndex=++i}}break;case e.UP:var o=u.search.length===0&&u.tagging.isActivated?-1:0;if(!u.open&&u.multiple)u.activate(false,true);else if(u.activeIndex>o){var r=--u.activeIndex;while(_isItemDisabled(u.items[r])&&r>o){u.activeIndex=--r}}break;case e.TAB:if(!u.multiple||u.open)u.select(u.items[u.activeIndex],true);break;case e.ENTER:if(u.open&&(u.tagging.isActivated||u.activeIndex>=0)){u.select(u.items[u.activeIndex],u.skipFocusser)}else{u.activate(false,true)}break;case e.ESC:u.close();break;default:n=false}return n}u.searchInput.on("keydown",(function(n){var o=n.which;if(~[e.ENTER,e.ESC].indexOf(o)){n.preventDefault();n.stopPropagation()}t.$apply((function(){var t=false;if(u.items.length>0||u.tagging.isActivated){if(!_handleDropDownSelection(o)&&!u.searchEnabled){n.preventDefault();n.stopPropagation()}if(u.taggingTokens.isActivated){for(var r=0;r<u.taggingTokens.tokens.length;r++){if(u.taggingTokens.tokens[r]===e.MAP[n.keyCode]){if(u.search.length>0){t=true}}}if(t){i((function(){u.searchInput.triggerHandler("tagged");var t=u.search.replace(e.MAP[n.keyCode],"").trim();if(u.tagging.fct){t=u.tagging.fct(t)}if(t)u.select(t,true)}))}}}}));if(e.isVerticalMovement(o)&&u.items.length>0){_ensureHighlightVisible()}if(o===e.ENTER||o===e.ESC){n.preventDefault();n.stopPropagation()}}));u.searchInput.on("paste",(function(t){var n;if(window.clipboardData&&window.clipboardData.getData){n=window.clipboardData.getData("Text")}else{n=(t.originalEvent||t).clipboardData.getData("text/plain")}n=u.search+n;if(n&&n.length>0){if(u.taggingTokens.isActivated){var i=[];for(var o=0;o<u.taggingTokens.tokens.length;o++){var r=e.toSeparator(u.taggingTokens.tokens[o])||u.taggingTokens.tokens[o];if(n.indexOf(r)>-1){i=n.split(r);break}}if(i.length===0){i=[n]}var a=u.search;angular.forEach(i,(function(e){var t=u.tagging.fct?u.tagging.fct(e):e;if(t){u.select(t,true)}}));u.search=a||m;t.preventDefault();t.stopPropagation()}else if(u.paste){u.paste(n);u.search=m;t.preventDefault();t.stopPropagation()}}}));u.searchInput.on("tagged",(function(){i((function(){_resetSearchInput()}))}));function _ensureHighlightVisible(){var e=n.querySelectorAll(".ui-select-choices-content");var t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1){throw s("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length)}if(u.activeIndex<0){return}var i=t[u.activeIndex];var o=i.offsetTop+i.clientHeight-e[0].scrollTop;var r=e[0].offsetHeight;if(o>r){e[0].scrollTop+=o-r}else if(o<i.clientHeight){if(u.isGrouped&&u.activeIndex===0)e[0].scrollTop=0;else e[0].scrollTop-=i.clientHeight-o}}var _=r((function(){u.sizeSearchInput()}),50);angular.element(p).bind("resize",_);t.$on("$destroy",(function(){u.searchInput.off("keyup keydown tagged blur paste");angular.element(p).off("resize",_)}));t.$watch("$select.activeIndex",(function(e){if(e)n.find("input").attr("aria-activedescendant","ui-select-choices-row-"+u.generatedId+"-"+e)}));t.$watch("$select.open",(function(e){if(!e)n.find("input").removeAttr("aria-activedescendant")}))}]);n.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,i,o,r,a){return{restrict:"EA",templateUrl:function(e,n){var i=n.theme||t.theme;return i+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:true,transclude:true,require:["uiSelect","^ngModel"],scope:true,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(o,s){var c=/{(.*)}\s*{(.*)}/.exec(s.ngClass);if(c){var l="{"+c[1]+", "+c[2]+"}";s.ngClass=l;o.attr("ng-class",l)}if(angular.isDefined(s.multiple))o.append("<ui-select-multiple/>").removeAttr("multiple");else o.append("<ui-select-single/>");if(s.inputId)o.querySelectorAll("input.ui-select-search")[0].id=s.inputId;return function(o,s,c,l,d){var p=l[0];var u=l[1];p.generatedId=t.generateId();p.baseTitle=c.title||"Select box";p.focusserTitle=p.baseTitle+" focus";p.focusserId="focusser-"+p.generatedId;p.closeOnSelect=function(){if(angular.isDefined(c.closeOnSelect)){return r(c.closeOnSelect)()}else{return t.closeOnSelect}}();o.$watch("skipFocusser",(function(){var e=o.$eval(c.skipFocusser);p.skipFocusser=e!==undefined?e:t.skipFocusser}));p.onSelectCallback=r(c.onSelect);p.onRemoveCallback=r(c.onRemove);p.ngModel=u;p.choiceGrouped=function(e){return p.isGrouped&&e&&e.name};if(c.tabindex){c.$observe("tabindex",(function(e){p.focusInput.attr("tabindex",e);s.removeAttr("tabindex")}))}o.$watch((function(){return o.$eval(c.searchEnabled)}),(function(e){p.searchEnabled=e!==undefined?e:t.searchEnabled}));o.$watch("sortable",(function(){var e=o.$eval(c.sortable);p.sortable=e!==undefined?e:t.sortable}));c.$observe("backspaceReset",(function(){var e=o.$eval(c.backspaceReset);p.backspaceReset=e!==undefined?e:true}));c.$observe("limit",(function(){p.limit=angular.isDefined(c.limit)?parseInt(c.limit,10):undefined}));o.$watch("removeSelected",(function(){var e=o.$eval(c.removeSelected);p.removeSelected=e!==undefined?e:t.removeSelected}));c.$observe("disabled",(function(){p.disabled=c.disabled!==undefined?c.disabled:false}));c.$observe("resetSearchInput",(function(){var e=o.$eval(c.resetSearchInput);p.resetSearchInput=e!==undefined?e:true}));c.$observe("paste",(function(){p.paste=o.$eval(c.paste)}));c.$observe("tagging",(function(){if(c.tagging!==undefined){var e=o.$eval(c.tagging);p.tagging={isActivated:true,fct:e!==true?e:undefined}}else{p.tagging={isActivated:false,fct:undefined}}}));c.$observe("taggingLabel",(function(){if(c.tagging!==undefined){if(c.taggingLabel==="false"){p.taggingLabel=false}else{p.taggingLabel=c.taggingLabel!==undefined?c.taggingLabel:"(new)"}}}));c.$observe("taggingTokens",(function(){if(c.tagging!==undefined){var e=c.taggingTokens!==undefined?c.taggingTokens.split("|"):[",","ENTER"];p.taggingTokens={isActivated:true,tokens:e}}}));c.$observe("spinnerEnabled",(function(){var e=o.$eval(c.spinnerEnabled);p.spinnerEnabled=e!==undefined?e:t.spinnerEnabled}));c.$observe("spinnerClass",(function(){var e=c.spinnerClass;p.spinnerClass=e!==undefined?c.spinnerClass:t.spinnerClass}));if(angular.isDefined(c.autofocus)){a((function(){p.setFocus()}))}if(angular.isDefined(c.focusOn)){o.$on(c.focusOn,(function(){a((function(){p.setFocus()}))}))}function onDocumentClick(e){if(!p.open)return;var t=false;if(window.jQuery){t=window.jQuery.contains(s[0],e.target)}else{t=s[0].contains(e.target)}if(!t&&!p.clickTriggeredSelect){var n;if(!p.skipFocusser){var i=["input","button","textarea","select"];var r=angular.element(e.target).controller("uiSelect");n=r&&r!==p;if(!n)n=~i.indexOf(e.target.tagName.toLowerCase())}else{n=true}p.close(n);o.$digest()}p.clickTriggeredSelect=false}e.on("click",onDocumentClick);o.$on("$destroy",(function(){e.off("click",onDocumentClick)}));d(o,(function(e){var t=angular.element("<div>").append(e);var i=t.querySelectorAll(".ui-select-match");i.removeAttr("ui-select-match");i.removeAttr("data-ui-select-match");if(i.length!==1){throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length)}s.querySelectorAll(".ui-select-match").replaceWith(i);var o=t.querySelectorAll(".ui-select-choices");o.removeAttr("ui-select-choices");o.removeAttr("data-ui-select-choices");if(o.length!==1){throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",o.length)}s.querySelectorAll(".ui-select-choices").replaceWith(o);var r=t.querySelectorAll(".ui-select-no-choice");r.removeAttr("ui-select-no-choice");r.removeAttr("data-ui-select-no-choice");if(r.length==1){s.querySelectorAll(".ui-select-no-choice").replaceWith(r)}}));var m=o.$eval(c.appendToBody);if(m!==undefined?m:t.appendToBody){o.$watch("$select.open",(function(e){if(e){positionDropdown()}else{resetDropdown()}}));o.$on("$destroy",(function(){resetDropdown()}))}var g=null,h="";function positionDropdown(){var t=i(s);g=angular.element('<div class="ui-select-placeholder"></div>');g[0].style.width=t.width+"px";g[0].style.height=t.height+"px";s.after(g);h=s[0].style.width;e.find("body").append(s);s[0].style.position="absolute";s[0].style.left=t.left+"px";s[0].style.top=t.top+"px";s[0].style.width=t.width+"px"}function resetDropdown(){if(g===null){return}g.replaceWith(s);g=null;s[0].style.position="";s[0].style.left="";s[0].style.top="";s[0].style.width=h;p.setFocus()}var v=null,f="direction-up";o.$watch("$select.open",(function(){if(p.dropdownPosition==="auto"||p.dropdownPosition==="up"){o.calculateDropdownPos()}}));var setDropdownPosUp=function(e,t){e=e||i(s);t=t||i(v);v[0].style.position="absolute";v[0].style.top=t.height*-1+"px";s.addClass(f)};var setDropdownPosDown=function(e,t){s.removeClass(f);e=e||i(s);t=t||i(v);v[0].style.position="";v[0].style.top=""};var calculateDropdownPosAfterAnimation=function(){a((function(){if(p.dropdownPosition==="up"){setDropdownPosUp()}else{s.removeClass(f);var t=i(s);var n=i(v);var o=e[0].documentElement.scrollTop||e[0].body.scrollTop;if(t.top+t.height+n.height>o+e[0].documentElement.clientHeight){setDropdownPosUp(t,n)}else{setDropdownPosDown(t,n)}}v[0].style.opacity=1}))};var _=false;o.calculateDropdownPos=function(){if(p.open){v=angular.element(s).querySelectorAll(".ui-select-dropdown");if(v.length===0){return}if(p.search===""&&!_){v[0].style.opacity=0;_=true}if(!i(v).height&&p.$animate&&p.$animate.on&&p.$animate.enabled(v)){var e=true;p.$animate.on("enter",v,(function(t,n){if(n==="close"&&e){calculateDropdownPosAfterAnimation();e=false}}))}else{calculateDropdownPosAfterAnimation()}}else{if(v===null||v.length===0){return}v[0].style.opacity=0;v[0].style.position="";v[0].style.top="";s.removeClass(f)}}}}}}]);n.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(t){t.addClass("ui-select-match");var n=t.parent();var i=getAttribute(n,"theme")||e.theme;var o=angular.isDefined(getAttribute(n,"multiple"));return i+(o?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,i,o){o.lockChoiceExpression=i.uiLockChoice;i.$observe("placeholder",(function(t){o.placeholder=t!==undefined?t:e.placeholder}));function setAllowClear(e){o.allowClear=angular.isDefined(e)?e===""?true:e.toLowerCase()==="true":false}i.$observe("allowClear",setAllowClear);setAllowClear(i.allowClear);if(o.multiple){o.sizeSearchInput()}}};function getAttribute(e,t){if(e[0].hasAttribute(t))return e.attr(t);if(e[0].hasAttribute("data-"+t))return e.attr("data-"+t);if(e[0].hasAttribute("x-"+t))return e.attr("x-"+t)}}]);n.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n=this,i=e.$select,o;if(angular.isUndefined(i.selected))i.selected=[];e.$evalAsync((function(){o=e.ngModel}));n.activeMatchIndex=-1;n.updateModel=function(){o.$setViewValue(Date.now());n.refreshComponent()};n.refreshComponent=function(){if(i.refreshItems){i.refreshItems()}if(i.sizeSearchInput){i.sizeSearchInput()}};n.removeChoice=function(o){if(i.isLocked(null,o))return false;var r=i.selected[o];var a={};a[i.parserResult.itemName]=r;i.selected.splice(o,1);n.activeMatchIndex=-1;i.sizeSearchInput();t((function(){i.onRemoveCallback(e,{$item:r,$model:i.parserResult.modelMapper(e,a)})}));n.updateModel();return true};n.getPlaceholder=function(){if(i.selected&&i.selected.length)return;return i.placeholder}}],controllerAs:"$selectMultiple",link:function(i,o,r,a){var s=a[0];var c=i.ngModel=a[1];var l=i.$selectMultiple;s.multiple=true;s.focusInput=s.searchInput;c.$isEmpty=function(e){return!e||e.length===0};c.$parsers.unshift((function(){var e={},t,n=[];for(var o=s.selected.length-1;o>=0;o--){e={};e[s.parserResult.itemName]=s.selected[o];t=s.parserResult.modelMapper(i,e);n.unshift(t)}return n}));c.$formatters.unshift((function(e){var t=s.parserResult&&s.parserResult.source(i,{$select:{search:""}}),n={},o;if(!t)return e;var r=[];var checkFnMultiple=function(e,t){if(!e||!e.length)return;for(var a=e.length-1;a>=0;a--){n[s.parserResult.itemName]=e[a];o=s.parserResult.modelMapper(i,n);if(s.parserResult.trackByExp){var c=/(\w*)\./.exec(s.parserResult.trackByExp);var l=/\.([^\s]+)/.exec(s.parserResult.trackByExp);if(c&&c.length>0&&c[1]==s.parserResult.itemName){if(l&&l.length>0&&o[l[1]]==t[l[1]]){r.unshift(e[a]);return true}}}if(angular.equals(o,t)){r.unshift(e[a]);return true}}return false};if(!e)return r;for(var a=e.length-1;a>=0;a--){if(!checkFnMultiple(s.selected,e[a])){if(!checkFnMultiple(t,e[a])){r.unshift(e[a])}}}return r}));i.$watchCollection((function(){return c.$modelValue}),(function(e,t){if(t!=e){if(angular.isDefined(c.$modelValue)){c.$modelValue=null}l.refreshComponent()}}));c.$render=function(){if(!angular.isArray(c.$viewValue)){if(isNil(c.$viewValue)){c.$viewValue=[]}else{throw t("multiarr","Expected model value to be array but got '{0}'",c.$viewValue)}}s.selected=c.$viewValue;l.refreshComponent();i.$evalAsync()};i.$on("uis:select",(function(e,t){if(s.selected.length>=s.limit){return}s.selected.push(t);var o={};o[s.parserResult.itemName]=t;n((function(){s.onSelectCallback(i,{$item:t,$model:s.parserResult.modelMapper(i,o)})}));l.updateModel()}));i.$on("uis:activate",(function(){l.activeMatchIndex=-1}));i.$watch("$select.disabled",(function(e,t){if(t&&!e)s.sizeSearchInput()}));s.searchInput.on("keydown",(function(t){var n=t.which;i.$apply((function(){var i=false;if(e.isHorizontalMovement(n)){i=_handleMatchSelection(n)}if(i&&n!=e.TAB){t.preventDefault();t.stopPropagation()}}))}));function _getCaretPosition(e){if(angular.isNumber(e.selectionStart))return e.selectionStart;else return e.value.length}function _handleMatchSelection(t){var n=_getCaretPosition(s.searchInput[0]),i=s.selected.length,o=0,r=i-1,a=l.activeMatchIndex,c=l.activeMatchIndex+1,d=l.activeMatchIndex-1,p=a;if(n>0||s.search.length&&t==e.RIGHT)return false;s.close();function getNewActiveMatchIndex(){switch(t){case e.LEFT:if(~l.activeMatchIndex)return d;else return r;case e.RIGHT:if(!~l.activeMatchIndex||a===r){s.activate();return false}else return c;case e.BACKSPACE:if(~l.activeMatchIndex){if(l.removeChoice(a)){return d}else{return a}}else{return r}case e.DELETE:if(~l.activeMatchIndex){l.removeChoice(l.activeMatchIndex);return a}else return false}}p=getNewActiveMatchIndex();if(!s.selected.length||p===false)l.activeMatchIndex=-1;else l.activeMatchIndex=Math.min(r,Math.max(o,p));return true}s.searchInput.on("keyup",(function(t){if(!e.isVerticalMovement(t.which)){i.$evalAsync((function(){s.activeIndex=s.taggingLabel===false?-1:0}))}if(s.tagging.isActivated&&s.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which)){return}s.activeIndex=s.taggingLabel===false?-1:0;if(s.taggingLabel===false)return;var n=angular.copy(s.items);var o=angular.copy(s.items);var r;var a;var c=false;var l=-1;var d;var p;if(s.tagging.fct!==undefined){d=s.$filter("filter")(n,{isTag:true});if(d.length>0){p=d[0]}if(n.length>0&&p){c=true;n=n.slice(1,n.length);o=o.slice(1,o.length)}r=s.tagging.fct(s.search);if(o.some((function(e){return angular.equals(e,r)}))||s.selected.some((function(e){return angular.equals(e,r)}))){i.$evalAsync((function(){s.activeIndex=0;s.items=n}));return}if(r)r.isTag=true}else{d=s.$filter("filter")(n,(function(e){return e.match(s.taggingLabel)}));if(d.length>0){p=d[0]}a=n[0];if(a!==undefined&&n.length>0&&p){c=true;n=n.slice(1,n.length);o=o.slice(1,o.length)}r=s.search+" "+s.taggingLabel;if(_findApproxDupe(s.selected,s.search)>-1){return}if(_findCaseInsensitiveDupe(o.concat(s.selected))){if(c){n=o;i.$evalAsync((function(){s.activeIndex=0;s.items=n}))}return}if(_findCaseInsensitiveDupe(o)){if(c){s.items=o.slice(1,o.length)}return}}if(c)l=_findApproxDupe(s.selected,r);if(l>-1){n=n.slice(l+1,n.length-1)}else{n=[];if(r)n.push(r);n=n.concat(o)}i.$evalAsync((function(){s.activeIndex=0;s.items=n;if(s.isGrouped){var e=r?n.slice(1):n;s.setItemsFn(e);if(r){s.items.unshift(r);s.groups.unshift({name:"",items:[r],tagging:true})}}}))}}));function _findCaseInsensitiveDupe(e){if(e===undefined||s.search===undefined){return false}var t=e.filter((function(e){if(s.search.toUpperCase()===undefined||e===undefined){return false}return e.toUpperCase()===s.search.toUpperCase()})).length>0;return t}function _findApproxDupe(e,t){var n=-1;if(angular.isArray(e)){var i=angular.copy(e);for(var o=0;o<i.length;o++){if(s.tagging.fct===undefined){if(i[o]+" "+s.taggingLabel===t){n=o}}else{var r=i[o];if(angular.isObject(r)){r.isTag=true}if(angular.equals(r,t)){n=o}}}}return n}s.searchInput.on("blur",(function(){n((function(){l.activeMatchIndex=-1}))}))}}}]);n.directive("uiSelectNoChoice",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:true,transclude:true,templateUrl:function(t){t.addClass("ui-select-no-choice");var n=t.parent().attr("theme")||e.theme;return n+"/no-choice.tpl.html"}}}]);n.directive("uiSelectSingle",["$timeout","$compile",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(i,o,r,a){var s=a[0];var c=a[1];c.$parsers.unshift((function(e){if(isNil(e)){return e}var t={},n;t[s.parserResult.itemName]=e;n=s.parserResult.modelMapper(i,t);return n}));c.$formatters.unshift((function(e){if(isNil(e)){return e}var t=s.parserResult&&s.parserResult.source(i,{$select:{search:""}}),n={},o;if(t){var checkFnSingle=function(t){n[s.parserResult.itemName]=t;o=s.parserResult.modelMapper(i,n);return o===e};if(s.selected&&checkFnSingle(s.selected)){return s.selected}for(var r=t.length-1;r>=0;r--){if(checkFnSingle(t[r]))return t[r]}}return e}));i.$watch("$select.selected",(function(e){if(c.$viewValue!==e){c.$setViewValue(e)}}));c.$render=function(){s.selected=c.$viewValue};i.$on("uis:select",(function(e,n){s.selected=n;var o={};o[s.parserResult.itemName]=n;t((function(){s.onSelectCallback(i,{$item:n,$model:isNil(n)?n:s.parserResult.modelMapper(i,o)})}))}));i.$on("uis:close",(function(e,n){t((function(){s.focusser.prop("disabled",false);if(!n)s.focusser[0].focus()}),0,false)}));i.$on("uis:activate",(function(){l.prop("disabled",true)}));var l=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");n(l)(i);s.focusser=l;s.focusInput=l;o.parent().append(l);l.bind("focus",(function(){i.$evalAsync((function(){s.focus=true}))}));l.bind("blur",(function(){i.$evalAsync((function(){s.focus=false}))}));l.bind("keydown",(function(t){if(t.which===e.BACKSPACE&&s.backspaceReset!==false){t.preventDefault();t.stopPropagation();s.select(undefined);i.$apply();return}if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC){return}if(t.which==e.DOWN||t.which==e.UP||t.which==e.ENTER||t.which==e.SPACE){t.preventDefault();t.stopPropagation();s.activate()}i.$digest()}));l.bind("keyup input",(function(t){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE){return}s.activate(l.val());l.val("");i.$digest()}))}}}]);n.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:["^^uiSelect","^ngModel"],link:function(t,i,o,r){if(t[o.uiSelectSort]===null){throw n("sort","Expected a list to sort")}var a=r[0];var s=r[1];var c=angular.extend({axis:"horizontal"},t.$eval(o.uiSelectSortOptions));var l=c.axis;var d="dragging";var p="dropping";var u="dropping-before";var m="dropping-after";t.$watch((function(){return a.sortable}),(function(e){if(e){i.attr("draggable",true)}else{i.removeAttr("draggable")}}));i.on("dragstart",(function(e){i.addClass(d);(e.dataTransfer||e.originalEvent.dataTransfer).setData("text",t.$index.toString())}));i.on("dragend",(function(){removeClass(d)}));var move=function(e,t){this.splice(t,0,this.splice(e,1)[0])};var removeClass=function(e){angular.forEach(a.$element.querySelectorAll("."+e),(function(t){angular.element(t).removeClass(e)}))};var dragOverHandler=function(e){e.preventDefault();var t=l==="vertical"?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);if(t<this[l==="vertical"?"offsetHeight":"offsetWidth"]/2){removeClass(m);i.addClass(u)}else{removeClass(u);i.addClass(m)}};var g;var dropHandler=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);e.cancel(g);g=e((function(){_dropHandler(n)}),20)};var _dropHandler=function(e){var n=t.$eval(o.uiSelectSort);var r=n[e];var a=null;if(i.hasClass(u)){if(e<t.$index){a=t.$index-1}else{a=t.$index}}else{if(e<t.$index){a=t.$index}else{a=t.$index+1}}move.apply(n,[e,a]);s.$setViewValue(Date.now());t.$apply((function(){t.$emit("uiSelectSort:change",{array:n,item:r,from:e,to:a})}));removeClass(p);removeClass(u);removeClass(m);i.off("drop",dropHandler)};i.on("dragenter",(function(){if(i.hasClass(d)){return}i.addClass(p);i.on("dragover",dragOverHandler);i.on("drop",dropHandler)}));i.on("dragleave",(function(e){if(e.target!=i){return}removeClass(p);removeClass(u);removeClass(m);i.off("dragover",dragOverHandler);i.off("drop",dropHandler)}))}}}]);n.factory("$$uisDebounce",["$timeout",function(e){return function(t,n){var i;return function(){var o=this;var r=Array.prototype.slice.call(arguments);if(i){e.cancel(i)}i=e((function(){t.apply(o,r)}),n)}}}]);n.directive("uisOpenClose",["$parse","$timeout",function(e,t){return{restrict:"A",require:"uiSelect",link:function(n,i,o,r){r.onOpenCloseCallback=e(o.uisOpenClose);n.$watch("$select.open",(function(e,i){if(e!==i){t((function(){r.onOpenCloseCallback(n,{isOpen:e})}))}}))}}}]);n.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var i;i=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!i){throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n)}var o=i[5],r="";if(i[3]){o=i[5].replace(/(^\()|(\)$)/g,"");var a=i[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/);if(a&&a[1].trim()){r=a[1];o=o.replace(r,"")}}return{itemName:i[4]||i[2],keyName:i[3],source:t(o),filters:r,trackByExp:i[6],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");if(this.trackByExp){t+=" track by "+this.trackByExp}return t}}};n.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])})();angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"></span></div></li></ul>');e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>');e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>');e.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""></li></ul>');e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"></span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');e.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>');e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>');e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>');e.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>');e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"></div></div></div>');e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div></div>');e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>');e.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""></span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;</span></span></div>');e.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""></span></div>');e.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""></div></div></div>');e.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>');e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div><div class="ui-select-no-choice"></div></div>')}]);var Wc=function(){function SmarteditRootModule(){}SmarteditRootModule=__decorate([SeModule({imports:[A,"resourceLocationsModule","functionsModule","yLoDashModule",Fo]})],SmarteditRootModule);return SmarteditRootModule}();var qc=function(){function StartFromFilter(){}StartFromFilter.transform=function(){return function(e,t){return cr.transform(e,t)}};StartFromFilter=__decorate([SeFilter()],StartFromFilter);return StartFromFilter}();var Kc=function(){function YPaginationComponent(){}YPaginationComponent.prototype.$onInit=function(){var e=this;this.exposedModel.$viewChangeListeners.push((function(){return e.onPageChange()}));this.exposedModel.$render=function(){return e.onPageChange()}};YPaginationComponent.prototype.onPageChange=function(){this.currentPage=this.exposedModel.$modelValue};YPaginationComponent.prototype.pageChanged=function(){this.exposedModel.$setViewValue(this.currentPage);this.onChange({$currentPage:this.currentPage})};YPaginationComponent=__decorate([SeComponent({selector:"y-pagination",templateUrl:"yPaginationTemplate.html",require:{exposedModel:"ngModel"},inputs:["totalItems","itemsPerPage","boundaryLinks","onChange:&"]})],YPaginationComponent);return YPaginationComponent}();var Yc=n(936);var Xc=n(938);deprecate();var Zc=function(){function LegacySmarteditCommonsModule(){}LegacySmarteditCommonsModule=__decorate([SeModule({imports:[Wc,Bt,Xc,Co,"resourceLocationsModule","seConstantsModule","yLoDashModule",Wr,Bn,"ui.select",Yc],providers:[Ri],declarations:[ea,qc,ba,Kc,ds,Oo,Ro,Do,ta,sa,_a,Mo,Tc]})],LegacySmarteditCommonsModule);return LegacySmarteditCommonsModule}();Object.defineProperty(t,"ALERT_CONFIG_DEFAULTS",{enumerable:true,get:function(){return o.ALERT_CONFIG_DEFAULTS}});Object.defineProperty(t,"ALERT_CONFIG_DEFAULTS_TOKEN",{enumerable:true,get:function(){return o.ALERT_CONFIG_DEFAULTS_TOKEN}});Object.defineProperty(t,"AbstractCachedRestService",{enumerable:true,get:function(){return o.AbstractCachedRestService}});Object.defineProperty(t,"Alert",{enumerable:true,get:function(){return o.Alert}});Object.defineProperty(t,"AuthenticationService",{enumerable:true,get:function(){return o.AuthenticationService}});Object.defineProperty(t,"BaseAlertFactory",{enumerable:true,get:function(){return o.AlertFactory}});Object.defineProperty(t,"BaseAlertService",{enumerable:true,get:function(){return o.AlertService}});Object.defineProperty(t,"BrowserService",{enumerable:true,get:function(){return o.BrowserService}});Object.defineProperty(t,"CacheAction",{enumerable:true,get:function(){return o.CacheAction}});Object.defineProperty(t,"CacheConfig",{enumerable:true,get:function(){return o.CacheConfig}});Object.defineProperty(t,"CacheConfigAnnotationFactory",{enumerable:true,get:function(){return o.CacheConfigAnnotationFactory}});Object.defineProperty(t,"CacheService",{enumerable:true,get:function(){return o.CacheService}});Object.defineProperty(t,"Cached",{enumerable:true,get:function(){return o.Cached}});Object.defineProperty(t,"CachedAnnotationFactory",{enumerable:true,get:function(){return o.CachedAnnotationFactory}});Object.defineProperty(t,"CloneableUtils",{enumerable:true,get:function(){return o.CloneableUtils}});Object.defineProperty(t,"CryptographicUtils",{enumerable:true,get:function(){return o.CryptographicUtils}});Object.defineProperty(t,"DEFAULT_AUTHENTICATION_ENTRY_POINT",{enumerable:true,get:function(){return o.DEFAULT_AUTHENTICATION_ENTRY_POINT}});Object.defineProperty(t,"DEFAULT_AUTH_MAP",{enumerable:true,get:function(){return o.DEFAULT_AUTH_MAP}});Object.defineProperty(t,"DEFAULT_CREDENTIALS_MAP",{enumerable:true,get:function(){return o.DEFAULT_CREDENTIALS_MAP}});Object.defineProperty(t,"DEFAULT_LANGUAGE_ISO",{enumerable:true,get:function(){return o.DEFAULT_LANGUAGE_ISO}});Object.defineProperty(t,"EVENTS",{enumerable:true,get:function(){return o.EVENTS}});Object.defineProperty(t,"EVENT_SERVICE",{enumerable:true,get:function(){return o.EVENT_SERVICE}});Object.defineProperty(t,"EvictionTag",{enumerable:true,get:function(){return o.EvictionTag}});Object.defineProperty(t,"FILE_VALIDATION_CONFIG",{enumerable:true,get:function(){return o.FILE_VALIDATION_CONFIG}});Object.defineProperty(t,"FileMimeTypeService",{enumerable:true,get:function(){return o.FileMimeTypeService}});Object.defineProperty(t,"FileReaderService",{enumerable:true,get:function(){return o.FileReaderService}});Object.defineProperty(t,"FileValidationService",{enumerable:true,get:function(){return o.FileValidationService}});Object.defineProperty(t,"FileValidatorFactory",{enumerable:true,get:function(){return o.FileValidatorFactory}});Object.defineProperty(t,"FingerPrintingService",{enumerable:true,get:function(){return o.FingerPrintingService}});Object.defineProperty(t,"FunctionsUtils",{enumerable:true,get:function(){return o.FunctionsUtils}});Object.defineProperty(t,"FundamentalModalButtonAction",{enumerable:true,get:function(){return o.FundamentalModalButtonAction}});Object.defineProperty(t,"FundamentalModalButtonStyle",{enumerable:true,get:function(){return o.FundamentalModalButtonStyle}});Object.defineProperty(t,"FundamentalModalManagerService",{enumerable:true,get:function(){return o.FundamentalModalManagerService}});Object.defineProperty(t,"HttpBackendService",{enumerable:true,get:function(){return o.HttpBackendService}});Object.defineProperty(t,"HttpErrorInterceptorService",{enumerable:true,get:function(){return o.HttpErrorInterceptorService}});Object.defineProperty(t,"HttpInterceptorModule",{enumerable:true,get:function(){return o.HttpInterceptorModule}});Object.defineProperty(t,"HttpUtils",{enumerable:true,get:function(){return o.HttpUtils}});Object.defineProperty(t,"I18N_RESOURCE_URI_TOKEN",{enumerable:true,get:function(){return o.I18N_RESOURCE_URI_TOKEN}});Object.defineProperty(t,"I18N_ROOT_RESOURCE_URI",{enumerable:true,get:function(){return o.I18N_ROOT_RESOURCE_URI}});Object.defineProperty(t,"IAlertServiceType",{enumerable:true,get:function(){return o.IAlertServiceType}});Object.defineProperty(t,"IAuthenticationManagerService",{enumerable:true,get:function(){return o.IAuthenticationManagerService}});Object.defineProperty(t,"IAuthenticationService",{enumerable:true,get:function(){return o.IAuthenticationService}});Object.defineProperty(t,"IBaseAlertService",{enumerable:true,get:function(){return o.IAlertService}});Object.defineProperty(t,"IBrowserService",{enumerable:true,get:function(){return o.BrowserService}});Object.defineProperty(t,"IModalService",{enumerable:true,get:function(){return o.IModalService}});Object.defineProperty(t,"ISessionService",{enumerable:true,get:function(){return o.ISessionService}});Object.defineProperty(t,"ISettingsService",{enumerable:true,get:function(){return o.ISettingsService}});Object.defineProperty(t,"ISharedDataService",{enumerable:true,get:function(){return o.ISharedDataService}});Object.defineProperty(t,"IStorageService",{enumerable:true,get:function(){return o.IStorageService}});Object.defineProperty(t,"ITranslationsFetchService",{enumerable:true,get:function(){return o.ITranslationsFetchService}});Object.defineProperty(t,"InvalidateCache",{enumerable:true,get:function(){return o.InvalidateCache}});Object.defineProperty(t,"InvalidateCacheAnnotationFactory",{enumerable:true,get:function(){return o.InvalidateCacheAnnotationFactory}});Object.defineProperty(t,"LANDING_PAGE_PATH",{enumerable:true,get:function(){return o.LANDING_PAGE_PATH}});Object.defineProperty(t,"LogService",{enumerable:true,get:function(){return o.LogService}});Object.defineProperty(t,"ModalButtonActions",{enumerable:true,get:function(){return o.ModalButtonActions}});Object.defineProperty(t,"ModalButtonStyles",{enumerable:true,get:function(){return o.ModalButtonStyles}});Object.defineProperty(t,"OPERATION_CONTEXT_TOKEN",{enumerable:true,get:function(){return o.OPERATION_CONTEXT_TOKEN}});Object.defineProperty(t,"OperationContextAnnotationFactory",{enumerable:true,get:function(){return o.OperationContextAnnotationFactory}});Object.defineProperty(t,"OperationContextRegistered",{enumerable:true,get:function(){return o.OperationContextRegistered}});Object.defineProperty(t,"OperationContextService",{enumerable:true,get:function(){return o.OperationContextService}});Object.defineProperty(t,"ParentWindowUtils",{enumerable:true,get:function(){return o.WindowUtils}});Object.defineProperty(t,"PermissionErrorInterceptor",{enumerable:true,get:function(){return o.PermissionErrorInterceptor}});Object.defineProperty(t,"PromiseUtils",{enumerable:true,get:function(){return o.PromiseUtils}});Object.defineProperty(t,"ResponseAdapterInterceptor",{enumerable:true,get:function(){return o.ResponseAdapterInterceptor}});Object.defineProperty(t,"RestServiceFactory",{enumerable:true,get:function(){return o.RestServiceFactory}});Object.defineProperty(t,"RetryInterceptor",{enumerable:true,get:function(){return o.RetryInterceptor}});Object.defineProperty(t,"SELECTED_LANGUAGE",{enumerable:true,get:function(){return o.SELECTED_LANGUAGE}});Object.defineProperty(t,"SSOAuthenticationHelper",{enumerable:true,get:function(){return o.SSOAuthenticationHelper}});Object.defineProperty(t,"SWITCH_LANGUAGE_EVENT",{enumerable:true,get:function(){return o.SWITCH_LANGUAGE_EVENT}});Object.defineProperty(t,"SeTranslationModule",{enumerable:true,get:function(){return o.TranslationModule}});Object.defineProperty(t,"TranslationModule",{enumerable:true,get:function(){return o.TranslationModule}});Object.defineProperty(t,"URIBuilder",{enumerable:true,get:function(){return o.URIBuilder}});Object.defineProperty(t,"UnauthorizedErrorInterceptor",{enumerable:true,get:function(){return o.UnauthorizedErrorInterceptor}});Object.defineProperty(t,"UrlUtils",{enumerable:true,get:function(){return o.UrlUtils}});Object.defineProperty(t,"WHO_AM_I_RESOURCE_URI_TOKEN",{enumerable:true,get:function(){return o.WHO_AM_I_RESOURCE_URI_TOKEN}});Object.defineProperty(t,"annotationService",{enumerable:true,get:function(){return o.annotationService}});Object.defineProperty(t,"booleanUtils",{enumerable:true,get:function(){return o.booleanUtils}});Object.defineProperty(t,"commonNgZone",{enumerable:true,get:function(){return o.commonNgZone}});Object.defineProperty(t,"functionsUtils",{enumerable:true,get:function(){return o.functionsUtils}});Object.defineProperty(t,"httpUtils",{enumerable:true,get:function(){return o.httpUtils}});Object.defineProperty(t,"promiseUtils",{enumerable:true,get:function(){return o.promiseUtils}});Object.defineProperty(t,"urlUtils",{enumerable:true,get:function(){return o.urlUtils}});t.$translateStaticFilesLoader=$translateStaticFilesLoader;t.ALERT_SERVICE_TOKEN=pn;t.ALL_PERSPECTIVE=St;t.ANNOUNCEMENT_DATA=Qt;t.AbstractAngularJSBasedCustomElement=Gt;t.AbstractDecorator=k;t.ActionableSearchItemComponent=tr;t.AlertServiceProvidersModule=qr;t.AngularJSBootstrapIndicatorService=bo;t.AngularJSLazyDependenciesService=Io;t.ApiUtils=H;t.AuthenticationManager=Hi;t.AuthorizationService=wi;t.BooleanComponent=vs;t.BooleanModule=fs;t.CATALOG_DETAILS_COLUMNS=ut;t.CATALOG_DETAILS_ITEM_DATA=So;t.CATALOG_VERSION_PERMISSIONS_RESOURCE_URI_CONSTANT=he;t.CATALOG_VERSION_UUID_ATTRIBUTE=Be;t.CLICK_DROPDOWN=lt;t.CLICK_DROPDOWN_TOKEN=Er;t.CLIENT_PAGED_LIST_CELL_COMPONENT_DATA_TOKEN=Mc;t.CLOSE_CTX_MENU=ue;t.CMSWEBSERVICES_PATH=we;t.COLLAPSIBLE_CONTAINER_CONSTANTS=Oc;t.COLLAPSIBLE_DEFAULT_CONFIGURATION=kr;t.COMPONENT_CLASS=He;t.CONFIGURATION_URI=Te;t.CONTAINER_ID_ATTRIBUTE=Ge;t.CONTAINER_TYPE_ATTRIBUTE=et;t.CONTENT_SLOT_TYPE=Je;t.CONTEXT_CATALOG=ne;t.CONTEXT_CATALOG_VERSION=ie;t.CONTEXT_SITE_ID=oe;t.CONTRACT_CHANGE_LISTENER_COMPONENT_PROCESS_STATUS=We;t.CONTRACT_CHANGE_LISTENER_PROCESS_EVENTS=qe;t.CSS_CLASSNAMES=as;t.CTX_MENU_DROPDOWN_IS_OPEN=me;t.ClickOutsideDirective=ma;t.ClickOutsideModule=ga;t.ClientPagedListModule=kc;t.CollapsibleContainerComponent=Fr;t.CollapsibleContainerContentComponent=zr;t.CollapsibleContainerHeaderComponent=Lr;t.CollapsibleContainerModule=Vr;t.CompileHtmlDirective=Mn;t.CompileHtmlLegacyDirective=ea;t.CompileHtmlModule=Nn;t.ConfigModule=Bn;t.ConfirmDialogComponent=Dc;t.ContentCatalogRestService=Si;t.CrossFrameEventService=Pi;t.CrossFrameEventServiceGateway=Ei;t.CustomComponentOutletDirective=ha;t.CustomComponentOutletDirectiveModule=va;t.CustomDropdownPopulatorsToken=Zo;t.CustomHandlingStrategy=ji;t.DATA_TABLE_COMPONENT_DATA=Zr;t.DATE_CONSTANTS=pt;t.DEFAULT_AUTHENTICATION_CLIENT_ID=ye;t.DEFAULT_GENERIC_EDITOR_FLOAT_PRECISION=Xs;t.DEFAULT_LANGUAGE=pe;t.DIBridgeModule=A;t.DIBridgeUtils=D;t.DINameUtils=E;t.DOMAIN_TOKEN=W;t.DO_NOT_USE_STORAGE_MANAGER_TOKEN=mo;t.DRAG_AND_DROP_CROSS_ORIGIN_BEFORE_TIME=Tt;t.DROPDOWN_IMPLEMENTATION_SUFFIX=st;t.DROPDOWN_IMPLEMENTATION_SUFFIX_TOKEN=wr;t.DROPDOWN_MENU_ITEM_DATA=xo;t.DataTableComponent=Qr;t.DateUtils=Ft;t.DiscardablePromiseUtils=Lt;t.DragAndDropScrollingService=Ji;t.DragAndDropService=eo;t.DragAndDropServiceModule=to;t.DropdownMenuComponent=ya;t.DropdownMenuItemDefaultComponent=No;t.DropdownMenuModule=Sa;t.DropdownPopulatorInterface=Yo;t.DropdownPopulatorModule=er;t.DynamicPagedListComponent=Ia;t.DynamicPagedListModule=Pa;t.ELEMENT_UUID_ATTRIBUTE=X;t.ENUM_RESOURCE_URI=at;t.EVENT_CONTENT_CATALOG_UPDATE=Ot;t.EVENT_NOTIFICATION_CHANGED=De;t.EVENT_OUTER_FRAME_CLICKED=je;t.EVENT_PERSPECTIVE_ADDED=Fe;t.EVENT_PERSPECTIVE_CHANGED=xe;t.EVENT_PERSPECTIVE_REFRESHED=ke;t.EVENT_PERSPECTIVE_UNLOADING=Ne;t.EVENT_PERSPECTIVE_UPDATED=ze;t.EVENT_SMARTEDIT_COMPONENT_UPDATED=$e;t.EVENT_STRICT_PREVIEW_MODE_REQUESTED=Le;t.EXPERIENCE_STORAGE_KEY=kt;t.EXTENDED_VIEW_PORT_MARGIN=te;t.EXTENDED_VIEW_PORT_MARGIN_TOKEN=Wt;t.EditableListComponent=Ba;t.EditableListDefaultItem=ja;t.EditableListModule=Ha;t.EditableListNodeItem=Ua;t.EditorFieldMappingService=Zs;t.EventMessageComponent=Ka;t.FetchEnumDataHandler=Qs;t.FilterByFieldPipe=dr;t.FilterByFieldPipeModule=pr;t.FrequentlyChangingContentName=oi;t.FunctionsModule=Bt;t.FundamentalsModule=Gr;t.GENERIC_EDITOR_LOADED_EVENT=it;t.GENERIC_EDITOR_LOADED_EVENT_CONSTANT=xr;t.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT=ot;t.GENERIC_EDITOR_UNRELATED_VALIDATION_MESSAGES_EVENT_CONSTANT=Mr;t.GENERIC_EDITOR_WIDGET_DATA=hs;t.GatewayFactory=Xt;t.GatewayProxied=Ai;t.GatewayProxiedAnnotationFactory=GatewayProxiedAnnotationFactory;t.GatewayProxy=Zt;t.GenericEditorBreadcrumbComponent=rc;t.GenericEditorComponent=nc;t.GenericEditorDropdownComponent=Tr;t.GenericEditorDropdownModule=Ar;t.GenericEditorDropdownServiceFactory=GenericEditorDropdownServiceFactory;t.GenericEditorFactoryService=ec;t.GenericEditorFieldComponent=yc;t.GenericEditorModule=Nr;t.GenericEditorSanitizationService=Bs;t.GenericEditorStackService=xi;t.GenericEditorTabService=ic;t.GenericEditorWidgetModule=Ec;t.HEART_BEAT_TIMEOUT_THRESHOLD_MS=Dt;t.HEART_BEAT_TIMEOUT_THRESHOLD_MS_TOKEN=qt;t.HIDE_SLOT_MENU=le;t.HIDE_TOOLBAR_ITEM_CONTEXT=ft;t.HasOperationPermissionBaseDirective=da;t.HasOperationPermissionDirectiveModule=ua;t.HeaderLanguageDropdownComponent=Ac;t.HelpComponent=ts;t.HelpModule=ns;t.I18N_LANGUAGES_RESOURCE_URI=nt;t.I18N_RESOURCE_URI=fe;t.IAlertService=un;t.IAnnouncementService=Jt;t.ICatalogDetailsService=wn;t.ICatalogService=en;t.ICatalogVersionPermissionService=yn;t.IConfirmationModalService=_n;t.IContextualMenuService=In;t.ID_ATTRIBUTE=Z;t.IDecoratorService=Cn;t.IDragAndDropCrossOrigin=bn;t.IDragEventType=no;t.IDropdownPopulatorInterface=Qo;t.IExperienceService=tn;t.IFeatureService=nn;t.IGenericEditorDropdownServiceConstructor=Pr;t.IIframeClickDetectionService=dn;t.ILegacyDecoratorToCustomElementConverter=En;t.INotificationMouseLeaveDetectionService=on;t.INotificationService=rn;t.IPageInfoService=an;t.IPermissionService=mn;t.IPerspectiveService=Mi;t.IPositionRegistry=hn;t.IPreviewService=sn;t.IRenderService=vn;t.IResizeListener=gn;t.IRestServiceFactory=Sn;t.ISmartEditContractChangeListener=Pn;t.IStorageGateway=ao;t.IStorageManager=so;t.IStorageManagerFactory=co;t.IStorageManagerGateway=lo;t.IStoragePropertiesService=po;t.ITEM_COMPONENT_DATA_TOKEN=nr;t.ITemplateCacheService=Tn;t.IToolbarService=ei;t.IToolbarServiceFactory=fn;t.IUIBootstrapModalService=Zn;t.IUIBootstrapModalStackService=Qn;t.IUrlService=cn;t.IWaitDialogService=ln;t.InViewElementObserver=Qi;t.IncludeReplaceDirective=sa;t.InfiniteScrollingComponent=gr;t.InfiniteScrollingModule=hr;t.InterceptorHelper=zi;t.JQueryUtilsService=vo;t.L10nFilter=yo;t.L10nModule=Co;t.L10nPipe=_o;t.L10nPipeModule=ir;t.L10nService=fo;t.LANGUAGE_RESOURCE_URI=tt;t.LINKED_DROPDOWN=ct;t.LINKED_DROPDOWN_TOKEN=Ir;t.LanguageService=Oi;t.LanguageServiceGateway=Ri;t.LegacyDynamicPagedListComponent=ba;t.LegacyGEWidgetToCustomElementConverter=oc;t.LegacyHasOperationPermissionDirective=Tc;t.LegacySmarteditCommonsModule=Zc;t.MEDIA_PATH=Nt;t.MEDIA_RESOURCE_URI=xt;t.MUTATION_TYPES=ge;t.MessageComponent=qa;t.MessageGateway=Yt;t.MessageModule=Ya;t.ModalManager=qn;t.ModalService=Kn;t.ModalServiceModule=Xn;t.ModalWizard=Un;t.ModalWizardNavBarComponent=kn;t.ModalWizardStepOutletComponent=Fn;t.ModalWizardTemplateComponent=$n;t.ModuleUtils=$;t.MoreTextComponent=ps;t.MoreTextModule=us;t.NG_ROUTE_PREFIX=J;t.NG_ROUTE_WILDCARD=ee;t.NONE_PERSPECTIVE=Ct;t.NamespacedStorageManager=oo;t.NavigationNodeItem=Da;t.NgIncludeDirective=xn;t.NgTreeModule=$a;t.NodeUtils=M;t.NonValidationErrorInterceptor=Ni;t.OPERATION_CONTEXT=ve;t.OVERLAY_COMPONENT_CLASS=Qe;t.OVERLAY_DISABLED_EVENT=de;t.OVERLAY_ID=Ue;t.OVERLAY_RERENDERED_EVENT=Ke;t.ObjectUtils=Vt;t.OptionsDropdownPopulator=Xo;t.PAGE_CONTEXT_CATALOG=re;t.PAGE_CONTEXT_CATALOG_VERSION=ae;t.PAGE_CONTEXT_SITE_ID=se;t.PERSPECTIVE_SELECTOR_WIDGET_KEY=Ve;t.POPUP_OVERLAY_DATA=Xa;t.PREVIEW_RESOURCE_URI=Ie;t.PREVIOUS_USERNAME_HASH=Re;t.PRODUCT_LIST_RESOURCE_API=vt;t.PRODUCT_RESOURCE_API=ht;t.PageSensitiveDirective=na;t.PaginationComponent=wa;t.PaginationModule=Ea;t.PermissionsRestService=Ii;t.PolyfillService=Vi;t.PopupOverlayComponent=Za;t.PopupOverlayModule=Qa;t.PreventVerticalOverflowComponent=Ja;t.PreventVerticalOverflowModule=es;t.PreviewErrorInterceptor=ki;t.PriorityService=$i;t.ProductCatalogRestService=bi;t.PropertyPipe=ar;t.PropertyPipeModule=sr;t.REFRESH_CONTEXTUAL_MENU_ITEMS_EVENT=Oe;t.RESOLVED_LOCALE_TO_CKEDITOR_LOCALE_MAP=Us;t.RICH_TEXT_CONFIGURATION=js;t.RarelyChangingContentName=ai;t.RecompileDomDirective=ta;t.ResizeObserverDirective=ca;t.ResizeObserverModule=la;t.ResourceNotFoundErrorInterceptor=Fi;t.ReversePipe=or;t.ReversePipeModule=rr;t.RichTextFieldComponent=Ws;t.RichTextFieldLocalizationService=Hs;t.RichTextFieldModule=qs;t.RichTextLoaderService=Gs;t.SCROLL_AREA_CLASS=Et;t.SEDropdownServiceFactory=GenericEditorDropdownServiceFactory;t.SEND_MOUSE_POSITION_THROTTLE=bt;t.SETTINGS_URI=Ae;t.SHOW_SLOT_MENU=ce;t.SHOW_TOOLBAR_ITEM_CONTEXT=_t;t.SITES_RESOURCE_URI=dt;t.SMARTEDITCONTAINER_COMPONENT_NAME=K;t.SMARTEDITLOADER_COMPONENT_NAME=q;t.SMARTEDIT_ATTRIBUTE_PREFIX=Ye;t.SMARTEDIT_COMPONENT_NAME=Y;t.SMARTEDIT_COMPONENT_PROCESS_STATUS=Xe;t.SMARTEDIT_DRAG_AND_DROP_EVENTS=yt;t.SMARTEDIT_ELEMENT_HOVERED=wt;t.SMARTEDIT_IFRAME_DRAG_AREA=Pt;t.SMARTEDIT_IFRAME_WRAPPER_ID=At;t.SMARTEDIT_INNER_FILES=Rt;t.SMARTEDIT_INNER_FILES_POST=Mt;t.SMARTEDIT_LOGIN_DIALOG_RESOURCES=Me;t.SMARTEDIT_RESOURCE_URI_REGEXP=Ee;t.SMARTEDIT_ROOT=Pe;t.SSO_AUTHENTICATION_ENTRY_POINT=Ce;t.SSO_LOGOUT_ENTRY_POINT=be;t.SSO_OAUTH2_AUTHENTICATION_ENTRY_POINT=Se;t.STORAGE_PROPERTIES_TOKEN=uo;t.STORE_FRONT_CONTEXT=gt;t.ScriptUtils=Ut;t.SeComponent=SeComponent;t.SeCustomComponent=SeCustomComponent;t.SeDecorator=SeDecorator;t.SeDirective=SeDirective;t.SeDowngradeComponent=SeDowngradeComponent;t.SeDowngradeService=SeDowngradeService;t.SeEntryModule=SeEntryModule;t.SeFilter=SeFilter;t.SeGenericEditorModule=Pc;t.SeInjectable=SeInjectable;t.SeModule=SeModule;t.SeRouteModule=qi;t.SeRouteService=Wi;t.SeValidationMessageParser=Js;t.SelectComponent=_r;t.SelectModule=br;t.SettingsService=Gi;t.SharedComponentsModule=ms;t.ShortStringComponent=Ks;t.SliderPanelComponent=ss;t.SliderPanelModule=cs;t.SliderPanelServiceFactory=rs;t.SmarteditBootstrapGateway=Ui;t.SmarteditCommonsModule=Gc;t.SmarteditConstantsModule=Lc;t.SmarteditErrorHandler=Ht;t.SmarteditRoutingService=Bi;t.SpinnerComponent=ur;t.SpinnerModule=mr;t.StartFromPipe=cr;t.StartFromPipeModule=lr;t.StorageManagerFactory=ro;t.StorageNamespaceConverter=io;t.StringUtils=j;t.SystemEventService=Kt;t.TAB_DATA=Br;t.THROTTLE_SCROLLING_DELAY=It;t.TOOLBAR_ITEM=Jn;t.TREE_NODE=Na;t.TYPES_RESOURCE_URI=mt;t.TYPE_ATTRIBUTE=Q;t.TabComponent=Hr;t.TabsComponent=jr;t.TabsModule=Xr;t.TemplateCacheDecoratorModule=ni;t.TestModeService=Li;t.TextTruncateService=ii;t.Timer=go;t.TimerService=ho;t.TooltipModule=Yr;t.TranslationServiceModule=Wr;t.TreeComponent=Fa;t.TreeDndOptionFactory=TreeDndOptionFactory;t.TreeDragAndDropEvent=xa;t.TreeModule=Ao;t.TreeNestedDataSource=Ta;t.TreeNodeItem=Aa;t.TreeNodeRendererComponent=Va;t.TreeService=Ma;t.TreeServiceFactory=TreeServiceFactory;t.TruncatedText=z;t.UUID_ATTRIBUTE=Ze;t.UriDropdownPopulator=Jo;t.VALIDATION_MESSAGE_TYPES=rt;t.WHO_AM_I_RESOURCE_URI=_e;t.WIZARD_API=Dn;t.WIZARD_MANAGER=An;t.WaitDialogComponent=$r;t.WindowUtils=L;t.WizardModule=jn;t.WizardService=On;t.YCollapsibleContainerComponent=Rc;t.YDropDownMenuComponent=_a;t.YEditableListModule=Wa;t.YEventMessageComponent=Ro;t.YHelpComponent=ko;t.YHelpModule=Ko;t.YInfiniteScrollingComponent=Oo;t.YJQUERY_TOKEN=Ki;t.YMessageComponent=Mo;t.YMoreTextComponent=Do;t.YSelectComponent=ia;t.YSelectModule=aa;t.YSliderPanelComponent=ds;t.YTreeDndEvent=wo;t.YjqueryModule=Yi;t.apiUtils=G;t.authorizationEvictionTag=ci;t.catalogEvictionTag=pi;t.catalogSyncedEvictionTag=di;t.contentCatalogUpdateEvictionTag=_i;t.dateUtils=zt;t.defaultButtonOptions=Wn;t.diBridgeUtils=O;t.diNameUtils=P;t.frequentlyChangingContent=ri;t.genericEditorDropdownComponentOnInit=genericEditorDropdownComponentOnInit;t.getLocalizedFilterFn=getLocalizedFilterFn;t.instrument=instrument;t.modalControllerClassFactory=modalControllerClassFactory;t.moduleUtils=U;t.nodeUtils=x;t.objectToArray=objectToArray;t.objectUtils=$t;t.operationContextCMSPredicate=operationContextCMSPredicate;t.operationContextInteractivePredicate=operationContextInteractivePredicate;t.operationContextNonInteractivePredicate=operationContextNonInteractivePredicate;t.operationContextToolingPredicate=operationContextToolingPredicate;t.pageChangeEvictionTag=vi;t.pageCreationEvictionTag=ui;t.pageDeletionEvictionTag=mi;t.pageEvictionTag=fi;t.pageRestoredEvictionTag=hi;t.pageUpdateEvictionTag=gi;t.parseComponentSelector=parseComponentSelector;t.parseDirectiveBindings=parseDirectiveBindings;t.parseDirectiveName=parseDirectiveName;t.parseValidationMessage=parseValidationMessage;t.perspectiveChangedEvictionTag=yi;t.rarelyChangingContent=si;t.registerCustomComponents=registerCustomComponents;t.scriptUtils=jt;t.seCustomComponents=F;t.servicesToBeDowngraded=R;t.setupL10nFilter=setupL10nFilter;t.stringUtils=B;t.userEvictionTag=li;t.windowUtils=V;t.yjQueryServiceFactory=yjQueryServiceFactory}).call(this,n(220))},943:function(e,t,n){}});